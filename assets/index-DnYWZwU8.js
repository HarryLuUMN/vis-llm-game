var Sd=Object.defineProperty;var Td=(m,t,n)=>t in m?Sd(m,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[t]=n;var ge=(m,t,n)=>Td(m,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))p(C);new MutationObserver(C=>{for(const b of C)if(b.type==="childList")for(const o of b.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&p(o)}).observe(document,{childList:!0,subtree:!0});function n(C){const b={};return C.integrity&&(b.integrity=C.integrity),C.referrerPolicy&&(b.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?b.credentials="include":C.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function p(C){if(C.ep)return;C.ep=!0;const b=n(C);fetch(C.href,b)}})();function getDefaultExportFromCjs(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}function getAugmentedNamespace(m){if(m.__esModule)return m;var t=m.default;if(typeof t=="function"){var n=function p(){return this instanceof p?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(m).forEach(function(p){var C=Object.getOwnPropertyDescriptor(m,p);Object.defineProperty(n,p,C.get?C:{enumerable:!0,get:function(){return m[p]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var m=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),o=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),e=Symbol.for("react.suspense"),a=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),c=Symbol.iterator;function u(Z){return Z===null||typeof Z!="object"?null:(Z=c&&Z[c]||Z["@@iterator"],typeof Z=="function"?Z:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s=Object.assign,l={};function v(Z,Q,j){this.props=Z,this.context=Q,this.refs=l,this.updater=j||h}v.prototype.isReactComponent={},v.prototype.setState=function(Z,Q){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,Q,"setState")},v.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function d(){}d.prototype=v.prototype;function g(Z,Q,j){this.props=Z,this.context=Q,this.refs=l,this.updater=j||h}var y=g.prototype=new d;y.constructor=g,s(y,v.prototype),y.isPureReactComponent=!0;var S=Array.isArray,T=Object.prototype.hasOwnProperty,w={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(Z,Q,j){var K,W={},V=null,J=null;if(Q!=null)for(K in Q.ref!==void 0&&(J=Q.ref),Q.key!==void 0&&(V=""+Q.key),Q)T.call(Q,K)&&!P.hasOwnProperty(K)&&(W[K]=Q[K]);var ee=arguments.length-2;if(ee===1)W.children=j;else if(1<ee){for(var te=Array(ee),ne=0;ne<ee;ne++)te[ne]=arguments[ne+2];W.children=te}if(Z&&Z.defaultProps)for(K in ee=Z.defaultProps,ee)W[K]===void 0&&(W[K]=ee[K]);return{$$typeof:m,type:Z,key:V,ref:J,props:W,_owner:w.current}}function R(Z,Q){return{$$typeof:m,type:Z.type,key:Q,ref:Z.ref,props:Z.props,_owner:Z._owner}}function I(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===m}function M(Z){var Q={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(j){return Q[j]})}var L=/\/+/g;function N(Z,Q){return typeof Z=="object"&&Z!==null&&Z.key!=null?M(""+Z.key):Q.toString(36)}function G(Z,Q,j,K,W){var V=typeof Z;(V==="undefined"||V==="boolean")&&(Z=null);var J=!1;if(Z===null)J=!0;else switch(V){case"string":case"number":J=!0;break;case"object":switch(Z.$$typeof){case m:case t:J=!0}}if(J)return J=Z,W=W(J),Z=K===""?"."+N(J,0):K,S(W)?(j="",Z!=null&&(j=Z.replace(L,"$&/")+"/"),G(W,Q,j,"",function(ne){return ne})):W!=null&&(I(W)&&(W=R(W,j+(!W.key||J&&J.key===W.key?"":(""+W.key).replace(L,"$&/")+"/")+Z)),Q.push(W)),1;if(J=0,K=K===""?".":K+":",S(Z))for(var ee=0;ee<Z.length;ee++){V=Z[ee];var te=K+N(V,ee);J+=G(V,Q,j,te,W)}else if(te=u(Z),typeof te=="function")for(Z=te.call(Z),ee=0;!(V=Z.next()).done;)V=V.value,te=K+N(V,ee++),J+=G(V,Q,j,te,W);else if(V==="object")throw Q=String(Z),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return J}function D(Z,Q,j){if(Z==null)return Z;var K=[],W=0;return G(Z,K,"","",function(V){return Q.call(j,V,W++)}),K}function B(Z){if(Z._status===-1){var Q=Z._result;Q=Q(),Q.then(function(j){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=j)},function(j){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=j)}),Z._status===-1&&(Z._status=0,Z._result=Q)}if(Z._status===1)return Z._result.default;throw Z._result}var $={current:null},k={transition:null},X={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:k,ReactCurrentOwner:w};function Y(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:D,forEach:function(Z,Q,j){D(Z,function(){Q.apply(this,arguments)},j)},count:function(Z){var Q=0;return D(Z,function(){Q++}),Q},toArray:function(Z){return D(Z,function(Q){return Q})||[]},only:function(Z){if(!I(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},react_production_min.Component=v,react_production_min.Fragment=n,react_production_min.Profiler=C,react_production_min.PureComponent=g,react_production_min.StrictMode=p,react_production_min.Suspense=e,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,react_production_min.act=Y,react_production_min.cloneElement=function(Z,Q,j){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var K=s({},Z.props),W=Z.key,V=Z.ref,J=Z._owner;if(Q!=null){if(Q.ref!==void 0&&(V=Q.ref,J=w.current),Q.key!==void 0&&(W=""+Q.key),Z.type&&Z.type.defaultProps)var ee=Z.type.defaultProps;for(te in Q)T.call(Q,te)&&!P.hasOwnProperty(te)&&(K[te]=Q[te]===void 0&&ee!==void 0?ee[te]:Q[te])}var te=arguments.length-2;if(te===1)K.children=j;else if(1<te){ee=Array(te);for(var ne=0;ne<te;ne++)ee[ne]=arguments[ne+2];K.children=ee}return{$$typeof:m,type:Z.type,key:W,ref:V,props:K,_owner:J}},react_production_min.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:b,_context:Z},Z.Consumer=Z},react_production_min.createElement=A,react_production_min.createFactory=function(Z){var Q=A.bind(null,Z);return Q.type=Z,Q},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Z){return{$$typeof:E,render:Z}},react_production_min.isValidElement=I,react_production_min.lazy=function(Z){return{$$typeof:x,_payload:{_status:-1,_result:Z},_init:B}},react_production_min.memo=function(Z,Q){return{$$typeof:a,type:Z,compare:Q===void 0?null:Q}},react_production_min.startTransition=function(Z){var Q=k.transition;k.transition={};try{Z()}finally{k.transition=Q}},react_production_min.unstable_act=Y,react_production_min.useCallback=function(Z,Q){return $.current.useCallback(Z,Q)},react_production_min.useContext=function(Z){return $.current.useContext(Z)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Z){return $.current.useDeferredValue(Z)},react_production_min.useEffect=function(Z,Q){return $.current.useEffect(Z,Q)},react_production_min.useId=function(){return $.current.useId()},react_production_min.useImperativeHandle=function(Z,Q,j){return $.current.useImperativeHandle(Z,Q,j)},react_production_min.useInsertionEffect=function(Z,Q){return $.current.useInsertionEffect(Z,Q)},react_production_min.useLayoutEffect=function(Z,Q){return $.current.useLayoutEffect(Z,Q)},react_production_min.useMemo=function(Z,Q){return $.current.useMemo(Z,Q)},react_production_min.useReducer=function(Z,Q,j){return $.current.useReducer(Z,Q,j)},react_production_min.useRef=function(Z){return $.current.useRef(Z)},react_production_min.useState=function(Z){return $.current.useState(Z)},react_production_min.useSyncExternalStore=function(Z,Q,j){return $.current.useSyncExternalStore(Z,Q,j)},react_production_min.useTransition=function(){return $.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var m=requireReact(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,C=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b={key:!0,ref:!0,__self:!0,__source:!0};function o(E,e,a){var x,c={},u=null,h=null;a!==void 0&&(u=""+a),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(h=e.ref);for(x in e)p.call(e,x)&&!b.hasOwnProperty(x)&&(c[x]=e[x]);if(E&&E.defaultProps)for(x in e=E.defaultProps,e)c[x]===void 0&&(c[x]=e[x]);return{$$typeof:t,type:E,key:u,ref:h,props:c,_owner:C.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=o,reactJsxRuntime_production_min.jsxs=o,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client$1={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(m){function t(k,X){var Y=k.length;k.push(X);e:for(;0<Y;){var Z=Y-1>>>1,Q=k[Z];if(0<C(Q,X))k[Z]=X,k[Y]=Q,Y=Z;else break e}}function n(k){return k.length===0?null:k[0]}function p(k){if(k.length===0)return null;var X=k[0],Y=k.pop();if(Y!==X){k[0]=Y;e:for(var Z=0,Q=k.length,j=Q>>>1;Z<j;){var K=2*(Z+1)-1,W=k[K],V=K+1,J=k[V];if(0>C(W,Y))V<Q&&0>C(J,W)?(k[Z]=J,k[V]=Y,Z=V):(k[Z]=W,k[K]=Y,Z=K);else if(V<Q&&0>C(J,Y))k[Z]=J,k[V]=Y,Z=V;else break e}}return X}function C(k,X){var Y=k.sortIndex-X.sortIndex;return Y!==0?Y:k.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;m.unstable_now=function(){return b.now()}}else{var o=Date,E=o.now();m.unstable_now=function(){return o.now()-E}}var e=[],a=[],x=1,c=null,u=3,h=!1,s=!1,l=!1,v=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var X=n(a);X!==null;){if(X.callback===null)p(a);else if(X.startTime<=k)p(a),X.sortIndex=X.expirationTime,t(e,X);else break;X=n(a)}}function S(k){if(l=!1,y(k),!s)if(n(e)!==null)s=!0,B(T);else{var X=n(a);X!==null&&$(S,X.startTime-k)}}function T(k,X){s=!1,l&&(l=!1,d(A),A=-1),h=!0;var Y=u;try{for(y(X),c=n(e);c!==null&&(!(c.expirationTime>X)||k&&!M());){var Z=c.callback;if(typeof Z=="function"){c.callback=null,u=c.priorityLevel;var Q=Z(c.expirationTime<=X);X=m.unstable_now(),typeof Q=="function"?c.callback=Q:c===n(e)&&p(e),y(X)}else p(e);c=n(e)}if(c!==null)var j=!0;else{var K=n(a);K!==null&&$(S,K.startTime-X),j=!1}return j}finally{c=null,u=Y,h=!1}}var w=!1,P=null,A=-1,R=5,I=-1;function M(){return!(m.unstable_now()-I<R)}function L(){if(P!==null){var k=m.unstable_now();I=k;var X=!0;try{X=P(!0,k)}finally{X?N():(w=!1,P=null)}}else w=!1}var N;if(typeof g=="function")N=function(){g(L)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,D=G.port2;G.port1.onmessage=L,N=function(){D.postMessage(null)}}else N=function(){v(L,0)};function B(k){P=k,w||(w=!0,N())}function $(k,X){A=v(function(){k(m.unstable_now())},X)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(k){k.callback=null},m.unstable_continueExecution=function(){s||h||(s=!0,B(T))},m.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<k?Math.floor(1e3/k):5},m.unstable_getCurrentPriorityLevel=function(){return u},m.unstable_getFirstCallbackNode=function(){return n(e)},m.unstable_next=function(k){switch(u){case 1:case 2:case 3:var X=3;break;default:X=u}var Y=u;u=X;try{return k()}finally{u=Y}},m.unstable_pauseExecution=function(){},m.unstable_requestPaint=function(){},m.unstable_runWithPriority=function(k,X){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=u;u=k;try{return X()}finally{u=Y}},m.unstable_scheduleCallback=function(k,X,Y){var Z=m.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,k){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Y+Q,k={id:x++,callback:X,priorityLevel:k,startTime:Y,expirationTime:Q,sortIndex:-1},Y>Z?(k.sortIndex=Y,t(a,k),n(e)===null&&k===n(a)&&(l?(d(A),A=-1):l=!0,$(S,Y-Z))):(k.sortIndex=Q,t(e,k),s||h||(s=!0,B(T))),k},m.unstable_shouldYield=M,m.unstable_wrapCallback=function(k){var X=u;return function(){var Y=u;u=X;try{return k.apply(this,arguments)}finally{u=Y}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var m=requireReact(),t=requireScheduler();function n(O){for(var F="https://reactjs.org/docs/error-decoder.html?invariant="+O,U=1;U<arguments.length;U++)F+="&args[]="+encodeURIComponent(arguments[U]);return"Minified React error #"+O+"; visit "+F+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,C={};function b(O,F){o(O,F),o(O+"Capture",F)}function o(O,F){for(C[O]=F,O=0;O<F.length;O++)p.add(F[O])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e=Object.prototype.hasOwnProperty,a=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},c={};function u(O){return e.call(c,O)?!0:e.call(x,O)?!1:a.test(O)?c[O]=!0:(x[O]=!0,!1)}function h(O,F,U,H){if(U!==null&&U.type===0)return!1;switch(typeof F){case"function":case"symbol":return!0;case"boolean":return H?!1:U!==null?!U.acceptsBooleans:(O=O.toLowerCase().slice(0,5),O!=="data-"&&O!=="aria-");default:return!1}}function s(O,F,U,H){if(F===null||typeof F>"u"||h(O,F,U,H))return!0;if(H)return!1;if(U!==null)switch(U.type){case 3:return!F;case 4:return F===!1;case 5:return isNaN(F);case 6:return isNaN(F)||1>F}return!1}function l(O,F,U,H,_,q,ie){this.acceptsBooleans=F===2||F===3||F===4,this.attributeName=H,this.attributeNamespace=_,this.mustUseProperty=U,this.propertyName=O,this.type=F,this.sanitizeURL=q,this.removeEmptyString=ie}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(O){v[O]=new l(O,0,!1,O,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(O){var F=O[0];v[F]=new l(F,1,!1,O[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(O){v[O]=new l(O,2,!1,O.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(O){v[O]=new l(O,2,!1,O,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(O){v[O]=new l(O,3,!1,O.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(O){v[O]=new l(O,3,!0,O,null,!1,!1)}),["capture","download"].forEach(function(O){v[O]=new l(O,4,!1,O,null,!1,!1)}),["cols","rows","size","span"].forEach(function(O){v[O]=new l(O,6,!1,O,null,!1,!1)}),["rowSpan","start"].forEach(function(O){v[O]=new l(O,5,!1,O.toLowerCase(),null,!1,!1)});var d=/[\-:]([a-z])/g;function g(O){return O[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(O){var F=O.replace(d,g);v[F]=new l(F,1,!1,O,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(O){var F=O.replace(d,g);v[F]=new l(F,1,!1,O,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(O){var F=O.replace(d,g);v[F]=new l(F,1,!1,O,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(O){v[O]=new l(O,1,!1,O.toLowerCase(),null,!1,!1)}),v.xlinkHref=new l("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(O){v[O]=new l(O,1,!1,O.toLowerCase(),null,!0,!0)});function y(O,F,U,H){var _=v.hasOwnProperty(F)?v[F]:null;(_!==null?_.type!==0:H||!(2<F.length)||F[0]!=="o"&&F[0]!=="O"||F[1]!=="n"&&F[1]!=="N")&&(s(F,U,_,H)&&(U=null),H||_===null?u(F)&&(U===null?O.removeAttribute(F):O.setAttribute(F,""+U)):_.mustUseProperty?O[_.propertyName]=U===null?_.type===3?!1:"":U:(F=_.attributeName,H=_.attributeNamespace,U===null?O.removeAttribute(F):(_=_.type,U=_===3||_===4&&U===!0?"":""+U,H?O.setAttributeNS(H,F,U):O.setAttribute(F,U))))}var S=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),w=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),k=Symbol.iterator;function X(O){return O===null||typeof O!="object"?null:(O=k&&O[k]||O["@@iterator"],typeof O=="function"?O:null)}var Y=Object.assign,Z;function Q(O){if(Z===void 0)try{throw Error()}catch(U){var F=U.stack.trim().match(/\n( *(at )?)/);Z=F&&F[1]||""}return`
`+Z+O}var j=!1;function K(O,F){if(!O||j)return"";j=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(F)if(F=function(){throw Error()},Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(me){var H=me}Reflect.construct(O,[],F)}else{try{F.call()}catch(me){H=me}O.call(F.prototype)}else{try{throw Error()}catch(me){H=me}O()}}catch(me){if(me&&H&&typeof me.stack=="string"){for(var _=me.stack.split(`
`),q=H.stack.split(`
`),ie=_.length-1,oe=q.length-1;1<=ie&&0<=oe&&_[ie]!==q[oe];)oe--;for(;1<=ie&&0<=oe;ie--,oe--)if(_[ie]!==q[oe]){if(ie!==1||oe!==1)do if(ie--,oe--,0>oe||_[ie]!==q[oe]){var le=`
`+_[ie].replace(" at new "," at ");return O.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",O.displayName)),le}while(1<=ie&&0<=oe);break}}}finally{j=!1,Error.prepareStackTrace=U}return(O=O?O.displayName||O.name:"")?Q(O):""}function W(O){switch(O.tag){case 5:return Q(O.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return O=K(O.type,!1),O;case 11:return O=K(O.type.render,!1),O;case 1:return O=K(O.type,!0),O;default:return""}}function V(O){if(O==null)return null;if(typeof O=="function")return O.displayName||O.name||null;if(typeof O=="string")return O;switch(O){case P:return"Fragment";case w:return"Portal";case R:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case G:return"SuspenseList"}if(typeof O=="object")switch(O.$$typeof){case M:return(O.displayName||"Context")+".Consumer";case I:return(O._context.displayName||"Context")+".Provider";case L:var F=O.render;return O=O.displayName,O||(O=F.displayName||F.name||"",O=O!==""?"ForwardRef("+O+")":"ForwardRef"),O;case D:return F=O.displayName||null,F!==null?F:V(O.type)||"Memo";case B:F=O._payload,O=O._init;try{return V(O(F))}catch{}}return null}function J(O){var F=O.type;switch(O.tag){case 24:return"Cache";case 9:return(F.displayName||"Context")+".Consumer";case 10:return(F._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return O=F.render,O=O.displayName||O.name||"",F.displayName||(O!==""?"ForwardRef("+O+")":"ForwardRef");case 7:return"Fragment";case 5:return F;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(F);case 8:return F===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof F=="function")return F.displayName||F.name||null;if(typeof F=="string")return F}return null}function ee(O){switch(typeof O){case"boolean":case"number":case"string":case"undefined":return O;case"object":return O;default:return""}}function te(O){var F=O.type;return(O=O.nodeName)&&O.toLowerCase()==="input"&&(F==="checkbox"||F==="radio")}function ne(O){var F=te(O)?"checked":"value",U=Object.getOwnPropertyDescriptor(O.constructor.prototype,F),H=""+O[F];if(!O.hasOwnProperty(F)&&typeof U<"u"&&typeof U.get=="function"&&typeof U.set=="function"){var _=U.get,q=U.set;return Object.defineProperty(O,F,{configurable:!0,get:function(){return _.call(this)},set:function(ie){H=""+ie,q.call(this,ie)}}),Object.defineProperty(O,F,{enumerable:U.enumerable}),{getValue:function(){return H},setValue:function(ie){H=""+ie},stopTracking:function(){O._valueTracker=null,delete O[F]}}}}function se(O){O._valueTracker||(O._valueTracker=ne(O))}function ae(O){if(!O)return!1;var F=O._valueTracker;if(!F)return!0;var U=F.getValue(),H="";return O&&(H=te(O)?O.checked?"true":"false":O.value),O=H,O!==U?(F.setValue(O),!0):!1}function ue(O){if(O=O||(typeof document<"u"?document:void 0),typeof O>"u")return null;try{return O.activeElement||O.body}catch{return O.body}}function de(O,F){var U=F.checked;return Y({},F,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:U??O._wrapperState.initialChecked})}function fe(O,F){var U=F.defaultValue==null?"":F.defaultValue,H=F.checked!=null?F.checked:F.defaultChecked;U=ee(F.value!=null?F.value:U),O._wrapperState={initialChecked:H,initialValue:U,controlled:F.type==="checkbox"||F.type==="radio"?F.checked!=null:F.value!=null}}function ye(O,F){F=F.checked,F!=null&&y(O,"checked",F,!1)}function ve(O,F){ye(O,F);var U=ee(F.value),H=F.type;if(U!=null)H==="number"?(U===0&&O.value===""||O.value!=U)&&(O.value=""+U):O.value!==""+U&&(O.value=""+U);else if(H==="submit"||H==="reset"){O.removeAttribute("value");return}F.hasOwnProperty("value")?Ie(O,F.type,U):F.hasOwnProperty("defaultValue")&&Ie(O,F.type,ee(F.defaultValue)),F.checked==null&&F.defaultChecked!=null&&(O.defaultChecked=!!F.defaultChecked)}function Se(O,F,U){if(F.hasOwnProperty("value")||F.hasOwnProperty("defaultValue")){var H=F.type;if(!(H!=="submit"&&H!=="reset"||F.value!==void 0&&F.value!==null))return;F=""+O._wrapperState.initialValue,U||F===O.value||(O.value=F),O.defaultValue=F}U=O.name,U!==""&&(O.name=""),O.defaultChecked=!!O._wrapperState.initialChecked,U!==""&&(O.name=U)}function Ie(O,F,U){(F!=="number"||ue(O.ownerDocument)!==O)&&(U==null?O.defaultValue=""+O._wrapperState.initialValue:O.defaultValue!==""+U&&(O.defaultValue=""+U))}var Ae=Array.isArray;function Oe(O,F,U,H){if(O=O.options,F){F={};for(var _=0;_<U.length;_++)F["$"+U[_]]=!0;for(U=0;U<O.length;U++)_=F.hasOwnProperty("$"+O[U].value),O[U].selected!==_&&(O[U].selected=_),_&&H&&(O[U].defaultSelected=!0)}else{for(U=""+ee(U),F=null,_=0;_<O.length;_++){if(O[_].value===U){O[_].selected=!0,H&&(O[_].defaultSelected=!0);return}F!==null||O[_].disabled||(F=O[_])}F!==null&&(F.selected=!0)}}function xe(O,F){if(F.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},F,{value:void 0,defaultValue:void 0,children:""+O._wrapperState.initialValue})}function be(O,F){var U=F.value;if(U==null){if(U=F.children,F=F.defaultValue,U!=null){if(F!=null)throw Error(n(92));if(Ae(U)){if(1<U.length)throw Error(n(93));U=U[0]}F=U}F==null&&(F=""),U=F}O._wrapperState={initialValue:ee(U)}}function Pe(O,F){var U=ee(F.value),H=ee(F.defaultValue);U!=null&&(U=""+U,U!==O.value&&(O.value=U),F.defaultValue==null&&O.defaultValue!==U&&(O.defaultValue=U)),H!=null&&(O.defaultValue=""+H)}function Ge(O){var F=O.textContent;F===O._wrapperState.initialValue&&F!==""&&F!==null&&(O.value=F)}function ze(O){switch(O){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(O,F){return O==null||O==="http://www.w3.org/1999/xhtml"?ze(F):O==="http://www.w3.org/2000/svg"&&F==="foreignObject"?"http://www.w3.org/1999/xhtml":O}var $e,ke=function(O){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(F,U,H,_){MSApp.execUnsafeLocalFunction(function(){return O(F,U,H,_)})}:O}(function(O,F){if(O.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in O)O.innerHTML=F;else{for($e=$e||document.createElement("div"),$e.innerHTML="<svg>"+F.valueOf().toString()+"</svg>",F=$e.firstChild;O.firstChild;)O.removeChild(O.firstChild);for(;F.firstChild;)O.appendChild(F.firstChild)}});function Xe(O,F){if(F){var U=O.firstChild;if(U&&U===O.lastChild&&U.nodeType===3){U.nodeValue=F;return}}O.textContent=F}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},We=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(O){We.forEach(function(F){F=F+O.charAt(0).toUpperCase()+O.substring(1),Je[F]=Je[O]})});function Ze(O,F,U){return F==null||typeof F=="boolean"||F===""?"":U||typeof F!="number"||F===0||Je.hasOwnProperty(O)&&Je[O]?(""+F).trim():F+"px"}function Qe(O,F){O=O.style;for(var U in F)if(F.hasOwnProperty(U)){var H=U.indexOf("--")===0,_=Ze(U,F[U],H);U==="float"&&(U="cssFloat"),H?O.setProperty(U,_):O[U]=_}}var ut=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bt(O,F){if(F){if(ut[O]&&(F.children!=null||F.dangerouslySetInnerHTML!=null))throw Error(n(137,O));if(F.dangerouslySetInnerHTML!=null){if(F.children!=null)throw Error(n(60));if(typeof F.dangerouslySetInnerHTML!="object"||!("__html"in F.dangerouslySetInnerHTML))throw Error(n(61))}if(F.style!=null&&typeof F.style!="object")throw Error(n(62))}}function Gt(O,F){if(O.indexOf("-")===-1)return typeof F.is=="string";switch(O){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function $t(O){return O=O.target||O.srcElement||window,O.correspondingUseElement&&(O=O.correspondingUseElement),O.nodeType===3?O.parentNode:O}var kt=null,kn=null,zn=null;function Ua(O){if(O=Mi(O)){if(typeof kt!="function")throw Error(n(280));var F=O.stateNode;F&&(F=vr(F),kt(O.stateNode,O.type,F))}}function $a(O){kn?zn?zn.push(O):zn=[O]:kn=O}function ka(){if(kn){var O=kn,F=zn;if(zn=kn=null,Ua(O),F)for(O=0;O<F.length;O++)Ua(F[O])}}function za(O,F){return O(F)}function Va(){}var ts=!1;function Wa(O,F,U){if(ts)return O(F,U);ts=!0;try{return za(O,F,U)}finally{ts=!1,(kn!==null||zn!==null)&&(Va(),ka())}}function hi(O,F){var U=O.stateNode;if(U===null)return null;var H=vr(U);if(H===null)return null;U=H[F];e:switch(F){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(H=!H.disabled)||(O=O.type,H=!(O==="button"||O==="input"||O==="select"||O==="textarea")),O=!H;break e;default:O=!1}if(O)return null;if(U&&typeof U!="function")throw Error(n(231,F,typeof U));return U}var ns=!1;if(E)try{var di={};Object.defineProperty(di,"passive",{get:function(){ns=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{ns=!1}function bu(O,F,U,H,_,q,ie,oe,le){var me=Array.prototype.slice.call(arguments,3);try{F.apply(U,me)}catch(Ee){this.onError(Ee)}}var fi=!1,Xi=null,Yi=!1,is=null,Pu={onError:function(O){fi=!0,Xi=O}};function Au(O,F,U,H,_,q,ie,oe,le){fi=!1,Xi=null,bu.apply(Pu,arguments)}function Ru(O,F,U,H,_,q,ie,oe,le){if(Au.apply(this,arguments),fi){if(fi){var me=Xi;fi=!1,Xi=null}else throw Error(n(198));Yi||(Yi=!0,is=me)}}function An(O){var F=O,U=O;if(O.alternate)for(;F.return;)F=F.return;else{O=F;do F=O,F.flags&4098&&(U=F.return),O=F.return;while(O)}return F.tag===3?U:null}function Ha(O){if(O.tag===13){var F=O.memoizedState;if(F===null&&(O=O.alternate,O!==null&&(F=O.memoizedState)),F!==null)return F.dehydrated}return null}function ja(O){if(An(O)!==O)throw Error(n(188))}function Ou(O){var F=O.alternate;if(!F){if(F=An(O),F===null)throw Error(n(188));return F!==O?null:O}for(var U=O,H=F;;){var _=U.return;if(_===null)break;var q=_.alternate;if(q===null){if(H=_.return,H!==null){U=H;continue}break}if(_.child===q.child){for(q=_.child;q;){if(q===U)return ja(_),O;if(q===H)return ja(_),F;q=q.sibling}throw Error(n(188))}if(U.return!==H.return)U=_,H=q;else{for(var ie=!1,oe=_.child;oe;){if(oe===U){ie=!0,U=_,H=q;break}if(oe===H){ie=!0,H=_,U=q;break}oe=oe.sibling}if(!ie){for(oe=q.child;oe;){if(oe===U){ie=!0,U=q,H=_;break}if(oe===H){ie=!0,H=q,U=_;break}oe=oe.sibling}if(!ie)throw Error(n(189))}}if(U.alternate!==H)throw Error(n(190))}if(U.tag!==3)throw Error(n(188));return U.stateNode.current===U?O:F}function Xa(O){return O=Ou(O),O!==null?Ya(O):null}function Ya(O){if(O.tag===5||O.tag===6)return O;for(O=O.child;O!==null;){var F=Ya(O);if(F!==null)return F;O=O.sibling}return null}var Za=t.unstable_scheduleCallback,Ka=t.unstable_cancelCallback,Iu=t.unstable_shouldYield,Mu=t.unstable_requestPaint,rt=t.unstable_now,Fu=t.unstable_getCurrentPriorityLevel,rs=t.unstable_ImmediatePriority,Ja=t.unstable_UserBlockingPriority,Zi=t.unstable_NormalPriority,Lu=t.unstable_LowPriority,Qa=t.unstable_IdlePriority,Ki=null,Zt=null;function Du(O){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Ki,O,void 0,(O.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Gu,Nu=Math.log,Bu=Math.LN2;function Gu(O){return O>>>=0,O===0?32:31-(Nu(O)/Bu|0)|0}var Ji=64,Qi=4194304;function ci(O){switch(O&-O){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return O&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return O&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return O}}function _i(O,F){var U=O.pendingLanes;if(U===0)return 0;var H=0,_=O.suspendedLanes,q=O.pingedLanes,ie=U&268435455;if(ie!==0){var oe=ie&~_;oe!==0?H=ci(oe):(q&=ie,q!==0&&(H=ci(q)))}else ie=U&~_,ie!==0?H=ci(ie):q!==0&&(H=ci(q));if(H===0)return 0;if(F!==0&&F!==H&&!(F&_)&&(_=H&-H,q=F&-F,_>=q||_===16&&(q&4194240)!==0))return F;if(H&4&&(H|=U&16),F=O.entangledLanes,F!==0)for(O=O.entanglements,F&=H;0<F;)U=31-zt(F),_=1<<U,H|=O[U],F&=~_;return H}function Uu(O,F){switch(O){case 1:case 2:case 4:return F+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return F+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $u(O,F){for(var U=O.suspendedLanes,H=O.pingedLanes,_=O.expirationTimes,q=O.pendingLanes;0<q;){var ie=31-zt(q),oe=1<<ie,le=_[ie];le===-1?(!(oe&U)||oe&H)&&(_[ie]=Uu(oe,F)):le<=F&&(O.expiredLanes|=oe),q&=~oe}}function ss(O){return O=O.pendingLanes&-1073741825,O!==0?O:O&1073741824?1073741824:0}function qa(){var O=Ji;return Ji<<=1,!(Ji&4194240)&&(Ji=64),O}function as(O){for(var F=[],U=0;31>U;U++)F.push(O);return F}function pi(O,F,U){O.pendingLanes|=F,F!==536870912&&(O.suspendedLanes=0,O.pingedLanes=0),O=O.eventTimes,F=31-zt(F),O[F]=U}function ku(O,F){var U=O.pendingLanes&~F;O.pendingLanes=F,O.suspendedLanes=0,O.pingedLanes=0,O.expiredLanes&=F,O.mutableReadLanes&=F,O.entangledLanes&=F,F=O.entanglements;var H=O.eventTimes;for(O=O.expirationTimes;0<U;){var _=31-zt(U),q=1<<_;F[_]=0,H[_]=-1,O[_]=-1,U&=~q}}function os(O,F){var U=O.entangledLanes|=F;for(O=O.entanglements;U;){var H=31-zt(U),_=1<<H;_&F|O[H]&F&&(O[H]|=F),U&=~_}}var Ye=0;function eo(O){return O&=-O,1<O?4<O?O&268435455?16:536870912:4:1}var to,ls,no,io,ro,us=!1,qi=[],ln=null,un=null,hn=null,vi=new Map,mi=new Map,dn=[],zu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function so(O,F){switch(O){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":vi.delete(F.pointerId);break;case"gotpointercapture":case"lostpointercapture":mi.delete(F.pointerId)}}function gi(O,F,U,H,_,q){return O===null||O.nativeEvent!==q?(O={blockedOn:F,domEventName:U,eventSystemFlags:H,nativeEvent:q,targetContainers:[_]},F!==null&&(F=Mi(F),F!==null&&ls(F)),O):(O.eventSystemFlags|=H,F=O.targetContainers,_!==null&&F.indexOf(_)===-1&&F.push(_),O)}function Vu(O,F,U,H,_){switch(F){case"focusin":return ln=gi(ln,O,F,U,H,_),!0;case"dragenter":return un=gi(un,O,F,U,H,_),!0;case"mouseover":return hn=gi(hn,O,F,U,H,_),!0;case"pointerover":var q=_.pointerId;return vi.set(q,gi(vi.get(q)||null,O,F,U,H,_)),!0;case"gotpointercapture":return q=_.pointerId,mi.set(q,gi(mi.get(q)||null,O,F,U,H,_)),!0}return!1}function ao(O){var F=Rn(O.target);if(F!==null){var U=An(F);if(U!==null){if(F=U.tag,F===13){if(F=Ha(U),F!==null){O.blockedOn=F,ro(O.priority,function(){no(U)});return}}else if(F===3&&U.stateNode.current.memoizedState.isDehydrated){O.blockedOn=U.tag===3?U.stateNode.containerInfo:null;return}}}O.blockedOn=null}function er(O){if(O.blockedOn!==null)return!1;for(var F=O.targetContainers;0<F.length;){var U=ds(O.domEventName,O.eventSystemFlags,F[0],O.nativeEvent);if(U===null){U=O.nativeEvent;var H=new U.constructor(U.type,U);Ut=H,U.target.dispatchEvent(H),Ut=null}else return F=Mi(U),F!==null&&ls(F),O.blockedOn=U,!1;F.shift()}return!0}function oo(O,F,U){er(O)&&U.delete(F)}function Wu(){us=!1,ln!==null&&er(ln)&&(ln=null),un!==null&&er(un)&&(un=null),hn!==null&&er(hn)&&(hn=null),vi.forEach(oo),mi.forEach(oo)}function yi(O,F){O.blockedOn===F&&(O.blockedOn=null,us||(us=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Wu)))}function xi(O){function F(_){return yi(_,O)}if(0<qi.length){yi(qi[0],O);for(var U=1;U<qi.length;U++){var H=qi[U];H.blockedOn===O&&(H.blockedOn=null)}}for(ln!==null&&yi(ln,O),un!==null&&yi(un,O),hn!==null&&yi(hn,O),vi.forEach(F),mi.forEach(F),U=0;U<dn.length;U++)H=dn[U],H.blockedOn===O&&(H.blockedOn=null);for(;0<dn.length&&(U=dn[0],U.blockedOn===null);)ao(U),U.blockedOn===null&&dn.shift()}var Vn=S.ReactCurrentBatchConfig,tr=!0;function Hu(O,F,U,H){var _=Ye,q=Vn.transition;Vn.transition=null;try{Ye=1,hs(O,F,U,H)}finally{Ye=_,Vn.transition=q}}function ju(O,F,U,H){var _=Ye,q=Vn.transition;Vn.transition=null;try{Ye=4,hs(O,F,U,H)}finally{Ye=_,Vn.transition=q}}function hs(O,F,U,H){if(tr){var _=ds(O,F,U,H);if(_===null)Rs(O,F,H,nr,U),so(O,H);else if(Vu(_,O,F,U,H))H.stopPropagation();else if(so(O,H),F&4&&-1<zu.indexOf(O)){for(;_!==null;){var q=Mi(_);if(q!==null&&to(q),q=ds(O,F,U,H),q===null&&Rs(O,F,H,nr,U),q===_)break;_=q}_!==null&&H.stopPropagation()}else Rs(O,F,H,null,U)}}var nr=null;function ds(O,F,U,H){if(nr=null,O=$t(H),O=Rn(O),O!==null)if(F=An(O),F===null)O=null;else if(U=F.tag,U===13){if(O=Ha(F),O!==null)return O;O=null}else if(U===3){if(F.stateNode.current.memoizedState.isDehydrated)return F.tag===3?F.stateNode.containerInfo:null;O=null}else F!==O&&(O=null);return nr=O,null}function lo(O){switch(O){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fu()){case rs:return 1;case Ja:return 4;case Zi:case Lu:return 16;case Qa:return 536870912;default:return 16}default:return 16}}var fn=null,fs=null,ir=null;function uo(){if(ir)return ir;var O,F=fs,U=F.length,H,_="value"in fn?fn.value:fn.textContent,q=_.length;for(O=0;O<U&&F[O]===_[O];O++);var ie=U-O;for(H=1;H<=ie&&F[U-H]===_[q-H];H++);return ir=_.slice(O,1<H?1-H:void 0)}function rr(O){var F=O.keyCode;return"charCode"in O?(O=O.charCode,O===0&&F===13&&(O=13)):O=F,O===10&&(O=13),32<=O||O===13?O:0}function sr(){return!0}function ho(){return!1}function Pt(O){function F(U,H,_,q,ie){this._reactName=U,this._targetInst=_,this.type=H,this.nativeEvent=q,this.target=ie,this.currentTarget=null;for(var oe in O)O.hasOwnProperty(oe)&&(U=O[oe],this[oe]=U?U(q):q[oe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?sr:ho,this.isPropagationStopped=ho,this}return Y(F.prototype,{preventDefault:function(){this.defaultPrevented=!0;var U=this.nativeEvent;U&&(U.preventDefault?U.preventDefault():typeof U.returnValue!="unknown"&&(U.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var U=this.nativeEvent;U&&(U.stopPropagation?U.stopPropagation():typeof U.cancelBubble!="unknown"&&(U.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),F}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(O){return O.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=Pt(Wn),Si=Y({},Wn,{view:0,detail:0}),Xu=Pt(Si),ps,vs,Ti,ar=Y({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(O){return O.relatedTarget===void 0?O.fromElement===O.srcElement?O.toElement:O.fromElement:O.relatedTarget},movementX:function(O){return"movementX"in O?O.movementX:(O!==Ti&&(Ti&&O.type==="mousemove"?(ps=O.screenX-Ti.screenX,vs=O.screenY-Ti.screenY):vs=ps=0,Ti=O),ps)},movementY:function(O){return"movementY"in O?O.movementY:vs}}),fo=Pt(ar),Yu=Y({},ar,{dataTransfer:0}),Zu=Pt(Yu),Ku=Y({},Si,{relatedTarget:0}),ms=Pt(Ku),Ju=Y({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Pt(Ju),_u=Y({},Wn,{clipboardData:function(O){return"clipboardData"in O?O.clipboardData:window.clipboardData}}),qu=Pt(_u),eh=Y({},Wn,{data:0}),co=Pt(eh),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(O){var F=this.nativeEvent;return F.getModifierState?F.getModifierState(O):(O=ih[O])?!!F[O]:!1}function gs(){return rh}var sh=Y({},Si,{key:function(O){if(O.key){var F=th[O.key]||O.key;if(F!=="Unidentified")return F}return O.type==="keypress"?(O=rr(O),O===13?"Enter":String.fromCharCode(O)):O.type==="keydown"||O.type==="keyup"?nh[O.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(O){return O.type==="keypress"?rr(O):0},keyCode:function(O){return O.type==="keydown"||O.type==="keyup"?O.keyCode:0},which:function(O){return O.type==="keypress"?rr(O):O.type==="keydown"||O.type==="keyup"?O.keyCode:0}}),ah=Pt(sh),oh=Y({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),po=Pt(oh),lh=Y({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),uh=Pt(lh),hh=Y({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dh=Pt(hh),fh=Y({},ar,{deltaX:function(O){return"deltaX"in O?O.deltaX:"wheelDeltaX"in O?-O.wheelDeltaX:0},deltaY:function(O){return"deltaY"in O?O.deltaY:"wheelDeltaY"in O?-O.wheelDeltaY:"wheelDelta"in O?-O.wheelDelta:0},deltaZ:0,deltaMode:0}),ch=Pt(fh),ph=[9,13,27,32],ys=E&&"CompositionEvent"in window,Ei=null;E&&"documentMode"in document&&(Ei=document.documentMode);var vh=E&&"TextEvent"in window&&!Ei,vo=E&&(!ys||Ei&&8<Ei&&11>=Ei),mo=" ",go=!1;function yo(O,F){switch(O){case"keyup":return ph.indexOf(F.keyCode)!==-1;case"keydown":return F.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xo(O){return O=O.detail,typeof O=="object"&&"data"in O?O.data:null}var Hn=!1;function mh(O,F){switch(O){case"compositionend":return xo(F);case"keypress":return F.which!==32?null:(go=!0,mo);case"textInput":return O=F.data,O===mo&&go?null:O;default:return null}}function gh(O,F){if(Hn)return O==="compositionend"||!ys&&yo(O,F)?(O=uo(),ir=fs=fn=null,Hn=!1,O):null;switch(O){case"paste":return null;case"keypress":if(!(F.ctrlKey||F.altKey||F.metaKey)||F.ctrlKey&&F.altKey){if(F.char&&1<F.char.length)return F.char;if(F.which)return String.fromCharCode(F.which)}return null;case"compositionend":return vo&&F.locale!=="ko"?null:F.data;default:return null}}var yh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function So(O){var F=O&&O.nodeName&&O.nodeName.toLowerCase();return F==="input"?!!yh[O.type]:F==="textarea"}function To(O,F,U,H){$a(H),F=fr(F,"onChange"),0<F.length&&(U=new cs("onChange","change",null,U,H),O.push({event:U,listeners:F}))}var Ci=null,wi=null;function xh(O){$o(O,0)}function or(O){var F=Kn(O);if(ae(F))return O}function Sh(O,F){if(O==="change")return F}var Eo=!1;if(E){var xs;if(E){var Ss="oninput"in document;if(!Ss){var Co=document.createElement("div");Co.setAttribute("oninput","return;"),Ss=typeof Co.oninput=="function"}xs=Ss}else xs=!1;Eo=xs&&(!document.documentMode||9<document.documentMode)}function wo(){Ci&&(Ci.detachEvent("onpropertychange",bo),wi=Ci=null)}function bo(O){if(O.propertyName==="value"&&or(wi)){var F=[];To(F,wi,O,$t(O)),Wa(xh,F)}}function Th(O,F,U){O==="focusin"?(wo(),Ci=F,wi=U,Ci.attachEvent("onpropertychange",bo)):O==="focusout"&&wo()}function Eh(O){if(O==="selectionchange"||O==="keyup"||O==="keydown")return or(wi)}function Ch(O,F){if(O==="click")return or(F)}function wh(O,F){if(O==="input"||O==="change")return or(F)}function bh(O,F){return O===F&&(O!==0||1/O===1/F)||O!==O&&F!==F}var Vt=typeof Object.is=="function"?Object.is:bh;function bi(O,F){if(Vt(O,F))return!0;if(typeof O!="object"||O===null||typeof F!="object"||F===null)return!1;var U=Object.keys(O),H=Object.keys(F);if(U.length!==H.length)return!1;for(H=0;H<U.length;H++){var _=U[H];if(!e.call(F,_)||!Vt(O[_],F[_]))return!1}return!0}function Po(O){for(;O&&O.firstChild;)O=O.firstChild;return O}function Ao(O,F){var U=Po(O);O=0;for(var H;U;){if(U.nodeType===3){if(H=O+U.textContent.length,O<=F&&H>=F)return{node:U,offset:F-O};O=H}e:{for(;U;){if(U.nextSibling){U=U.nextSibling;break e}U=U.parentNode}U=void 0}U=Po(U)}}function Ro(O,F){return O&&F?O===F?!0:O&&O.nodeType===3?!1:F&&F.nodeType===3?Ro(O,F.parentNode):"contains"in O?O.contains(F):O.compareDocumentPosition?!!(O.compareDocumentPosition(F)&16):!1:!1}function Oo(){for(var O=window,F=ue();F instanceof O.HTMLIFrameElement;){try{var U=typeof F.contentWindow.location.href=="string"}catch{U=!1}if(U)O=F.contentWindow;else break;F=ue(O.document)}return F}function Ts(O){var F=O&&O.nodeName&&O.nodeName.toLowerCase();return F&&(F==="input"&&(O.type==="text"||O.type==="search"||O.type==="tel"||O.type==="url"||O.type==="password")||F==="textarea"||O.contentEditable==="true")}function Ph(O){var F=Oo(),U=O.focusedElem,H=O.selectionRange;if(F!==U&&U&&U.ownerDocument&&Ro(U.ownerDocument.documentElement,U)){if(H!==null&&Ts(U)){if(F=H.start,O=H.end,O===void 0&&(O=F),"selectionStart"in U)U.selectionStart=F,U.selectionEnd=Math.min(O,U.value.length);else if(O=(F=U.ownerDocument||document)&&F.defaultView||window,O.getSelection){O=O.getSelection();var _=U.textContent.length,q=Math.min(H.start,_);H=H.end===void 0?q:Math.min(H.end,_),!O.extend&&q>H&&(_=H,H=q,q=_),_=Ao(U,q);var ie=Ao(U,H);_&&ie&&(O.rangeCount!==1||O.anchorNode!==_.node||O.anchorOffset!==_.offset||O.focusNode!==ie.node||O.focusOffset!==ie.offset)&&(F=F.createRange(),F.setStart(_.node,_.offset),O.removeAllRanges(),q>H?(O.addRange(F),O.extend(ie.node,ie.offset)):(F.setEnd(ie.node,ie.offset),O.addRange(F)))}}for(F=[],O=U;O=O.parentNode;)O.nodeType===1&&F.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<F.length;U++)O=F[U],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}var Ah=E&&"documentMode"in document&&11>=document.documentMode,jn=null,Es=null,Pi=null,Cs=!1;function Io(O,F,U){var H=U.window===U?U.document:U.nodeType===9?U:U.ownerDocument;Cs||jn==null||jn!==ue(H)||(H=jn,"selectionStart"in H&&Ts(H)?H={start:H.selectionStart,end:H.selectionEnd}:(H=(H.ownerDocument&&H.ownerDocument.defaultView||window).getSelection(),H={anchorNode:H.anchorNode,anchorOffset:H.anchorOffset,focusNode:H.focusNode,focusOffset:H.focusOffset}),Pi&&bi(Pi,H)||(Pi=H,H=fr(Es,"onSelect"),0<H.length&&(F=new cs("onSelect","select",null,F,U),O.push({event:F,listeners:H}),F.target=jn)))}function lr(O,F){var U={};return U[O.toLowerCase()]=F.toLowerCase(),U["Webkit"+O]="webkit"+F,U["Moz"+O]="moz"+F,U}var Xn={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionend:lr("Transition","TransitionEnd")},ws={},Mo={};E&&(Mo=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function ur(O){if(ws[O])return ws[O];if(!Xn[O])return O;var F=Xn[O],U;for(U in F)if(F.hasOwnProperty(U)&&U in Mo)return ws[O]=F[U];return O}var Fo=ur("animationend"),Lo=ur("animationiteration"),Do=ur("animationstart"),No=ur("transitionend"),Bo=new Map,Go="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(O,F){Bo.set(O,F),b(F,[O])}for(var bs=0;bs<Go.length;bs++){var Ps=Go[bs],Rh=Ps.toLowerCase(),Oh=Ps[0].toUpperCase()+Ps.slice(1);cn(Rh,"on"+Oh)}cn(Fo,"onAnimationEnd"),cn(Lo,"onAnimationIteration"),cn(Do,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(No,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ih=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function Uo(O,F,U){var H=O.type||"unknown-event";O.currentTarget=U,Ru(H,F,void 0,O),O.currentTarget=null}function $o(O,F){F=(F&4)!==0;for(var U=0;U<O.length;U++){var H=O[U],_=H.event;H=H.listeners;e:{var q=void 0;if(F)for(var ie=H.length-1;0<=ie;ie--){var oe=H[ie],le=oe.instance,me=oe.currentTarget;if(oe=oe.listener,le!==q&&_.isPropagationStopped())break e;Uo(_,oe,me),q=le}else for(ie=0;ie<H.length;ie++){if(oe=H[ie],le=oe.instance,me=oe.currentTarget,oe=oe.listener,le!==q&&_.isPropagationStopped())break e;Uo(_,oe,me),q=le}}}if(Yi)throw O=is,Yi=!1,is=null,O}function _e(O,F){var U=F[Ds];U===void 0&&(U=F[Ds]=new Set);var H=O+"__bubble";U.has(H)||(ko(F,O,2,!1),U.add(H))}function As(O,F,U){var H=0;F&&(H|=4),ko(U,O,H,F)}var dr="_reactListening"+Math.random().toString(36).slice(2);function Ri(O){if(!O[dr]){O[dr]=!0,p.forEach(function(U){U!=="selectionchange"&&(Ih.has(U)||As(U,!1,O),As(U,!0,O))});var F=O.nodeType===9?O:O.ownerDocument;F===null||F[dr]||(F[dr]=!0,As("selectionchange",!1,F))}}function ko(O,F,U,H){switch(lo(F)){case 1:var _=Hu;break;case 4:_=ju;break;default:_=hs}U=_.bind(null,F,U,O),_=void 0,!ns||F!=="touchstart"&&F!=="touchmove"&&F!=="wheel"||(_=!0),H?_!==void 0?O.addEventListener(F,U,{capture:!0,passive:_}):O.addEventListener(F,U,!0):_!==void 0?O.addEventListener(F,U,{passive:_}):O.addEventListener(F,U,!1)}function Rs(O,F,U,H,_){var q=H;if(!(F&1)&&!(F&2)&&H!==null)e:for(;;){if(H===null)return;var ie=H.tag;if(ie===3||ie===4){var oe=H.stateNode.containerInfo;if(oe===_||oe.nodeType===8&&oe.parentNode===_)break;if(ie===4)for(ie=H.return;ie!==null;){var le=ie.tag;if((le===3||le===4)&&(le=ie.stateNode.containerInfo,le===_||le.nodeType===8&&le.parentNode===_))return;ie=ie.return}for(;oe!==null;){if(ie=Rn(oe),ie===null)return;if(le=ie.tag,le===5||le===6){H=q=ie;continue e}oe=oe.parentNode}}H=H.return}Wa(function(){var me=q,Ee=$t(U),Ce=[];e:{var Te=Bo.get(O);if(Te!==void 0){var Re=cs,Fe=O;switch(O){case"keypress":if(rr(U)===0)break e;case"keydown":case"keyup":Re=ah;break;case"focusin":Fe="focus",Re=ms;break;case"focusout":Fe="blur",Re=ms;break;case"beforeblur":case"afterblur":Re=ms;break;case"click":if(U.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=uh;break;case Fo:case Lo:case Do:Re=Qu;break;case No:Re=dh;break;case"scroll":Re=Xu;break;case"wheel":Re=ch;break;case"copy":case"cut":case"paste":Re=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=po}var Le=(F&4)!==0,st=!Le&&O==="scroll",ce=Le?Te!==null?Te+"Capture":null:Te;Le=[];for(var he=me,pe;he!==null;){pe=he;var we=pe.stateNode;if(pe.tag===5&&we!==null&&(pe=we,ce!==null&&(we=hi(he,ce),we!=null&&Le.push(Oi(he,we,pe)))),st)break;he=he.return}0<Le.length&&(Te=new Re(Te,Fe,null,U,Ee),Ce.push({event:Te,listeners:Le}))}}if(!(F&7)){e:{if(Te=O==="mouseover"||O==="pointerover",Re=O==="mouseout"||O==="pointerout",Te&&U!==Ut&&(Fe=U.relatedTarget||U.fromElement)&&(Rn(Fe)||Fe[qt]))break e;if((Re||Te)&&(Te=Ee.window===Ee?Ee:(Te=Ee.ownerDocument)?Te.defaultView||Te.parentWindow:window,Re?(Fe=U.relatedTarget||U.toElement,Re=me,Fe=Fe?Rn(Fe):null,Fe!==null&&(st=An(Fe),Fe!==st||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Re=null,Fe=me),Re!==Fe)){if(Le=fo,we="onMouseLeave",ce="onMouseEnter",he="mouse",(O==="pointerout"||O==="pointerover")&&(Le=po,we="onPointerLeave",ce="onPointerEnter",he="pointer"),st=Re==null?Te:Kn(Re),pe=Fe==null?Te:Kn(Fe),Te=new Le(we,he+"leave",Re,U,Ee),Te.target=st,Te.relatedTarget=pe,we=null,Rn(Ee)===me&&(Le=new Le(ce,he+"enter",Fe,U,Ee),Le.target=pe,Le.relatedTarget=st,we=Le),st=we,Re&&Fe)t:{for(Le=Re,ce=Fe,he=0,pe=Le;pe;pe=Yn(pe))he++;for(pe=0,we=ce;we;we=Yn(we))pe++;for(;0<he-pe;)Le=Yn(Le),he--;for(;0<pe-he;)ce=Yn(ce),pe--;for(;he--;){if(Le===ce||ce!==null&&Le===ce.alternate)break t;Le=Yn(Le),ce=Yn(ce)}Le=null}else Le=null;Re!==null&&zo(Ce,Te,Re,Le,!1),Fe!==null&&st!==null&&zo(Ce,st,Fe,Le,!0)}}e:{if(Te=me?Kn(me):window,Re=Te.nodeName&&Te.nodeName.toLowerCase(),Re==="select"||Re==="input"&&Te.type==="file")var De=Sh;else if(So(Te))if(Eo)De=wh;else{De=Eh;var Ne=Th}else(Re=Te.nodeName)&&Re.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(De=Ch);if(De&&(De=De(O,me))){To(Ce,De,U,Ee);break e}Ne&&Ne(O,Te,me),O==="focusout"&&(Ne=Te._wrapperState)&&Ne.controlled&&Te.type==="number"&&Ie(Te,"number",Te.value)}switch(Ne=me?Kn(me):window,O){case"focusin":(So(Ne)||Ne.contentEditable==="true")&&(jn=Ne,Es=me,Pi=null);break;case"focusout":Pi=Es=jn=null;break;case"mousedown":Cs=!0;break;case"contextmenu":case"mouseup":case"dragend":Cs=!1,Io(Ce,U,Ee);break;case"selectionchange":if(Ah)break;case"keydown":case"keyup":Io(Ce,U,Ee)}var Be;if(ys)e:{switch(O){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Hn?yo(O,U)&&(Ue="onCompositionEnd"):O==="keydown"&&U.keyCode===229&&(Ue="onCompositionStart");Ue&&(vo&&U.locale!=="ko"&&(Hn||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Hn&&(Be=uo()):(fn=Ee,fs="value"in fn?fn.value:fn.textContent,Hn=!0)),Ne=fr(me,Ue),0<Ne.length&&(Ue=new co(Ue,O,null,U,Ee),Ce.push({event:Ue,listeners:Ne}),Be?Ue.data=Be:(Be=xo(U),Be!==null&&(Ue.data=Be)))),(Be=vh?mh(O,U):gh(O,U))&&(me=fr(me,"onBeforeInput"),0<me.length&&(Ee=new co("onBeforeInput","beforeinput",null,U,Ee),Ce.push({event:Ee,listeners:me}),Ee.data=Be))}$o(Ce,F)})}function Oi(O,F,U){return{instance:O,listener:F,currentTarget:U}}function fr(O,F){for(var U=F+"Capture",H=[];O!==null;){var _=O,q=_.stateNode;_.tag===5&&q!==null&&(_=q,q=hi(O,U),q!=null&&H.unshift(Oi(O,q,_)),q=hi(O,F),q!=null&&H.push(Oi(O,q,_))),O=O.return}return H}function Yn(O){if(O===null)return null;do O=O.return;while(O&&O.tag!==5);return O||null}function zo(O,F,U,H,_){for(var q=F._reactName,ie=[];U!==null&&U!==H;){var oe=U,le=oe.alternate,me=oe.stateNode;if(le!==null&&le===H)break;oe.tag===5&&me!==null&&(oe=me,_?(le=hi(U,q),le!=null&&ie.unshift(Oi(U,le,oe))):_||(le=hi(U,q),le!=null&&ie.push(Oi(U,le,oe)))),U=U.return}ie.length!==0&&O.push({event:F,listeners:ie})}var Mh=/\r\n?/g,Fh=/\u0000|\uFFFD/g;function Vo(O){return(typeof O=="string"?O:""+O).replace(Mh,`
`).replace(Fh,"")}function cr(O,F,U){if(F=Vo(F),Vo(O)!==F&&U)throw Error(n(425))}function pr(){}var Os=null,Is=null;function Ms(O,F){return O==="textarea"||O==="noscript"||typeof F.children=="string"||typeof F.children=="number"||typeof F.dangerouslySetInnerHTML=="object"&&F.dangerouslySetInnerHTML!==null&&F.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,Lh=typeof clearTimeout=="function"?clearTimeout:void 0,Wo=typeof Promise=="function"?Promise:void 0,Dh=typeof queueMicrotask=="function"?queueMicrotask:typeof Wo<"u"?function(O){return Wo.resolve(null).then(O).catch(Nh)}:Fs;function Nh(O){setTimeout(function(){throw O})}function Ls(O,F){var U=F,H=0;do{var _=U.nextSibling;if(O.removeChild(U),_&&_.nodeType===8)if(U=_.data,U==="/$"){if(H===0){O.removeChild(_),xi(F);return}H--}else U!=="$"&&U!=="$?"&&U!=="$!"||H++;U=_}while(U);xi(F)}function pn(O){for(;O!=null;O=O.nextSibling){var F=O.nodeType;if(F===1||F===3)break;if(F===8){if(F=O.data,F==="$"||F==="$!"||F==="$?")break;if(F==="/$")return null}}return O}function Ho(O){O=O.previousSibling;for(var F=0;O;){if(O.nodeType===8){var U=O.data;if(U==="$"||U==="$!"||U==="$?"){if(F===0)return O;F--}else U==="/$"&&F++}O=O.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Zn,Ii="__reactProps$"+Zn,qt="__reactContainer$"+Zn,Ds="__reactEvents$"+Zn,Bh="__reactListeners$"+Zn,Gh="__reactHandles$"+Zn;function Rn(O){var F=O[Kt];if(F)return F;for(var U=O.parentNode;U;){if(F=U[qt]||U[Kt]){if(U=F.alternate,F.child!==null||U!==null&&U.child!==null)for(O=Ho(O);O!==null;){if(U=O[Kt])return U;O=Ho(O)}return F}O=U,U=O.parentNode}return null}function Mi(O){return O=O[Kt]||O[qt],!O||O.tag!==5&&O.tag!==6&&O.tag!==13&&O.tag!==3?null:O}function Kn(O){if(O.tag===5||O.tag===6)return O.stateNode;throw Error(n(33))}function vr(O){return O[Ii]||null}var Ns=[],Jn=-1;function vn(O){return{current:O}}function qe(O){0>Jn||(O.current=Ns[Jn],Ns[Jn]=null,Jn--)}function Ke(O,F){Jn++,Ns[Jn]=O.current,O.current=F}var mn={},vt=vn(mn),Tt=vn(!1),On=mn;function Qn(O,F){var U=O.type.contextTypes;if(!U)return mn;var H=O.stateNode;if(H&&H.__reactInternalMemoizedUnmaskedChildContext===F)return H.__reactInternalMemoizedMaskedChildContext;var _={},q;for(q in U)_[q]=F[q];return H&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=F,O.__reactInternalMemoizedMaskedChildContext=_),_}function Et(O){return O=O.childContextTypes,O!=null}function mr(){qe(Tt),qe(vt)}function jo(O,F,U){if(vt.current!==mn)throw Error(n(168));Ke(vt,F),Ke(Tt,U)}function Xo(O,F,U){var H=O.stateNode;if(F=F.childContextTypes,typeof H.getChildContext!="function")return U;H=H.getChildContext();for(var _ in H)if(!(_ in F))throw Error(n(108,J(O)||"Unknown",_));return Y({},U,H)}function gr(O){return O=(O=O.stateNode)&&O.__reactInternalMemoizedMergedChildContext||mn,On=vt.current,Ke(vt,O),Ke(Tt,Tt.current),!0}function Yo(O,F,U){var H=O.stateNode;if(!H)throw Error(n(169));U?(O=Xo(O,F,On),H.__reactInternalMemoizedMergedChildContext=O,qe(Tt),qe(vt),Ke(vt,O)):qe(Tt),Ke(Tt,U)}var en=null,yr=!1,Bs=!1;function Zo(O){en===null?en=[O]:en.push(O)}function Uh(O){yr=!0,Zo(O)}function gn(){if(!Bs&&en!==null){Bs=!0;var O=0,F=Ye;try{var U=en;for(Ye=1;O<U.length;O++){var H=U[O];do H=H(!0);while(H!==null)}en=null,yr=!1}catch(_){throw en!==null&&(en=en.slice(O+1)),Za(rs,gn),_}finally{Ye=F,Bs=!1}}return null}var _n=[],qn=0,xr=null,Sr=0,It=[],Mt=0,In=null,tn=1,nn="";function Mn(O,F){_n[qn++]=Sr,_n[qn++]=xr,xr=O,Sr=F}function Ko(O,F,U){It[Mt++]=tn,It[Mt++]=nn,It[Mt++]=In,In=O;var H=tn;O=nn;var _=32-zt(H)-1;H&=~(1<<_),U+=1;var q=32-zt(F)+_;if(30<q){var ie=_-_%5;q=(H&(1<<ie)-1).toString(32),H>>=ie,_-=ie,tn=1<<32-zt(F)+_|U<<_|H,nn=q+O}else tn=1<<q|U<<_|H,nn=O}function Gs(O){O.return!==null&&(Mn(O,1),Ko(O,1,0))}function Us(O){for(;O===xr;)xr=_n[--qn],_n[qn]=null,Sr=_n[--qn],_n[qn]=null;for(;O===In;)In=It[--Mt],It[Mt]=null,nn=It[--Mt],It[Mt]=null,tn=It[--Mt],It[Mt]=null}var At=null,Rt=null,et=!1,Wt=null;function Jo(O,F){var U=Nt(5,null,null,0);U.elementType="DELETED",U.stateNode=F,U.return=O,F=O.deletions,F===null?(O.deletions=[U],O.flags|=16):F.push(U)}function Qo(O,F){switch(O.tag){case 5:var U=O.type;return F=F.nodeType!==1||U.toLowerCase()!==F.nodeName.toLowerCase()?null:F,F!==null?(O.stateNode=F,At=O,Rt=pn(F.firstChild),!0):!1;case 6:return F=O.pendingProps===""||F.nodeType!==3?null:F,F!==null?(O.stateNode=F,At=O,Rt=null,!0):!1;case 13:return F=F.nodeType!==8?null:F,F!==null?(U=In!==null?{id:tn,overflow:nn}:null,O.memoizedState={dehydrated:F,treeContext:U,retryLane:1073741824},U=Nt(18,null,null,0),U.stateNode=F,U.return=O,O.child=U,At=O,Rt=null,!0):!1;default:return!1}}function $s(O){return(O.mode&1)!==0&&(O.flags&128)===0}function ks(O){if(et){var F=Rt;if(F){var U=F;if(!Qo(O,F)){if($s(O))throw Error(n(418));F=pn(U.nextSibling);var H=At;F&&Qo(O,F)?Jo(H,U):(O.flags=O.flags&-4097|2,et=!1,At=O)}}else{if($s(O))throw Error(n(418));O.flags=O.flags&-4097|2,et=!1,At=O}}}function _o(O){for(O=O.return;O!==null&&O.tag!==5&&O.tag!==3&&O.tag!==13;)O=O.return;At=O}function Tr(O){if(O!==At)return!1;if(!et)return _o(O),et=!0,!1;var F;if((F=O.tag!==3)&&!(F=O.tag!==5)&&(F=O.type,F=F!=="head"&&F!=="body"&&!Ms(O.type,O.memoizedProps)),F&&(F=Rt)){if($s(O))throw qo(),Error(n(418));for(;F;)Jo(O,F),F=pn(F.nextSibling)}if(_o(O),O.tag===13){if(O=O.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(n(317));e:{for(O=O.nextSibling,F=0;O;){if(O.nodeType===8){var U=O.data;if(U==="/$"){if(F===0){Rt=pn(O.nextSibling);break e}F--}else U!=="$"&&U!=="$!"&&U!=="$?"||F++}O=O.nextSibling}Rt=null}}else Rt=At?pn(O.stateNode.nextSibling):null;return!0}function qo(){for(var O=Rt;O;)O=pn(O.nextSibling)}function ei(){Rt=At=null,et=!1}function zs(O){Wt===null?Wt=[O]:Wt.push(O)}var $h=S.ReactCurrentBatchConfig;function Fi(O,F,U){if(O=U.ref,O!==null&&typeof O!="function"&&typeof O!="object"){if(U._owner){if(U=U._owner,U){if(U.tag!==1)throw Error(n(309));var H=U.stateNode}if(!H)throw Error(n(147,O));var _=H,q=""+O;return F!==null&&F.ref!==null&&typeof F.ref=="function"&&F.ref._stringRef===q?F.ref:(F=function(ie){var oe=_.refs;ie===null?delete oe[q]:oe[q]=ie},F._stringRef=q,F)}if(typeof O!="string")throw Error(n(284));if(!U._owner)throw Error(n(290,O))}return O}function Er(O,F){throw O=Object.prototype.toString.call(F),Error(n(31,O==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":O))}function el(O){var F=O._init;return F(O._payload)}function tl(O){function F(ce,he){if(O){var pe=ce.deletions;pe===null?(ce.deletions=[he],ce.flags|=16):pe.push(he)}}function U(ce,he){if(!O)return null;for(;he!==null;)F(ce,he),he=he.sibling;return null}function H(ce,he){for(ce=new Map;he!==null;)he.key!==null?ce.set(he.key,he):ce.set(he.index,he),he=he.sibling;return ce}function _(ce,he){return ce=bn(ce,he),ce.index=0,ce.sibling=null,ce}function q(ce,he,pe){return ce.index=pe,O?(pe=ce.alternate,pe!==null?(pe=pe.index,pe<he?(ce.flags|=2,he):pe):(ce.flags|=2,he)):(ce.flags|=1048576,he)}function ie(ce){return O&&ce.alternate===null&&(ce.flags|=2),ce}function oe(ce,he,pe,we){return he===null||he.tag!==6?(he=Fa(pe,ce.mode,we),he.return=ce,he):(he=_(he,pe),he.return=ce,he)}function le(ce,he,pe,we){var De=pe.type;return De===P?Ee(ce,he,pe.props.children,we,pe.key):he!==null&&(he.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===B&&el(De)===he.type)?(we=_(he,pe.props),we.ref=Fi(ce,he,pe),we.return=ce,we):(we=Yr(pe.type,pe.key,pe.props,null,ce.mode,we),we.ref=Fi(ce,he,pe),we.return=ce,we)}function me(ce,he,pe,we){return he===null||he.tag!==4||he.stateNode.containerInfo!==pe.containerInfo||he.stateNode.implementation!==pe.implementation?(he=La(pe,ce.mode,we),he.return=ce,he):(he=_(he,pe.children||[]),he.return=ce,he)}function Ee(ce,he,pe,we,De){return he===null||he.tag!==7?(he=$n(pe,ce.mode,we,De),he.return=ce,he):(he=_(he,pe),he.return=ce,he)}function Ce(ce,he,pe){if(typeof he=="string"&&he!==""||typeof he=="number")return he=Fa(""+he,ce.mode,pe),he.return=ce,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case T:return pe=Yr(he.type,he.key,he.props,null,ce.mode,pe),pe.ref=Fi(ce,null,he),pe.return=ce,pe;case w:return he=La(he,ce.mode,pe),he.return=ce,he;case B:var we=he._init;return Ce(ce,we(he._payload),pe)}if(Ae(he)||X(he))return he=$n(he,ce.mode,pe,null),he.return=ce,he;Er(ce,he)}return null}function Te(ce,he,pe,we){var De=he!==null?he.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return De!==null?null:oe(ce,he,""+pe,we);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case T:return pe.key===De?le(ce,he,pe,we):null;case w:return pe.key===De?me(ce,he,pe,we):null;case B:return De=pe._init,Te(ce,he,De(pe._payload),we)}if(Ae(pe)||X(pe))return De!==null?null:Ee(ce,he,pe,we,null);Er(ce,pe)}return null}function Re(ce,he,pe,we,De){if(typeof we=="string"&&we!==""||typeof we=="number")return ce=ce.get(pe)||null,oe(he,ce,""+we,De);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case T:return ce=ce.get(we.key===null?pe:we.key)||null,le(he,ce,we,De);case w:return ce=ce.get(we.key===null?pe:we.key)||null,me(he,ce,we,De);case B:var Ne=we._init;return Re(ce,he,pe,Ne(we._payload),De)}if(Ae(we)||X(we))return ce=ce.get(pe)||null,Ee(he,ce,we,De,null);Er(he,we)}return null}function Fe(ce,he,pe,we){for(var De=null,Ne=null,Be=he,Ue=he=0,ft=null;Be!==null&&Ue<pe.length;Ue++){Be.index>Ue?(ft=Be,Be=null):ft=Be.sibling;var He=Te(ce,Be,pe[Ue],we);if(He===null){Be===null&&(Be=ft);break}O&&Be&&He.alternate===null&&F(ce,Be),he=q(He,he,Ue),Ne===null?De=He:Ne.sibling=He,Ne=He,Be=ft}if(Ue===pe.length)return U(ce,Be),et&&Mn(ce,Ue),De;if(Be===null){for(;Ue<pe.length;Ue++)Be=Ce(ce,pe[Ue],we),Be!==null&&(he=q(Be,he,Ue),Ne===null?De=Be:Ne.sibling=Be,Ne=Be);return et&&Mn(ce,Ue),De}for(Be=H(ce,Be);Ue<pe.length;Ue++)ft=Re(Be,ce,Ue,pe[Ue],we),ft!==null&&(O&&ft.alternate!==null&&Be.delete(ft.key===null?Ue:ft.key),he=q(ft,he,Ue),Ne===null?De=ft:Ne.sibling=ft,Ne=ft);return O&&Be.forEach(function(Pn){return F(ce,Pn)}),et&&Mn(ce,Ue),De}function Le(ce,he,pe,we){var De=X(pe);if(typeof De!="function")throw Error(n(150));if(pe=De.call(pe),pe==null)throw Error(n(151));for(var Ne=De=null,Be=he,Ue=he=0,ft=null,He=pe.next();Be!==null&&!He.done;Ue++,He=pe.next()){Be.index>Ue?(ft=Be,Be=null):ft=Be.sibling;var Pn=Te(ce,Be,He.value,we);if(Pn===null){Be===null&&(Be=ft);break}O&&Be&&Pn.alternate===null&&F(ce,Be),he=q(Pn,he,Ue),Ne===null?De=Pn:Ne.sibling=Pn,Ne=Pn,Be=ft}if(He.done)return U(ce,Be),et&&Mn(ce,Ue),De;if(Be===null){for(;!He.done;Ue++,He=pe.next())He=Ce(ce,He.value,we),He!==null&&(he=q(He,he,Ue),Ne===null?De=He:Ne.sibling=He,Ne=He);return et&&Mn(ce,Ue),De}for(Be=H(ce,Be);!He.done;Ue++,He=pe.next())He=Re(Be,ce,Ue,He.value,we),He!==null&&(O&&He.alternate!==null&&Be.delete(He.key===null?Ue:He.key),he=q(He,he,Ue),Ne===null?De=He:Ne.sibling=He,Ne=He);return O&&Be.forEach(function(xd){return F(ce,xd)}),et&&Mn(ce,Ue),De}function st(ce,he,pe,we){if(typeof pe=="object"&&pe!==null&&pe.type===P&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case T:e:{for(var De=pe.key,Ne=he;Ne!==null;){if(Ne.key===De){if(De=pe.type,De===P){if(Ne.tag===7){U(ce,Ne.sibling),he=_(Ne,pe.props.children),he.return=ce,ce=he;break e}}else if(Ne.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===B&&el(De)===Ne.type){U(ce,Ne.sibling),he=_(Ne,pe.props),he.ref=Fi(ce,Ne,pe),he.return=ce,ce=he;break e}U(ce,Ne);break}else F(ce,Ne);Ne=Ne.sibling}pe.type===P?(he=$n(pe.props.children,ce.mode,we,pe.key),he.return=ce,ce=he):(we=Yr(pe.type,pe.key,pe.props,null,ce.mode,we),we.ref=Fi(ce,he,pe),we.return=ce,ce=we)}return ie(ce);case w:e:{for(Ne=pe.key;he!==null;){if(he.key===Ne)if(he.tag===4&&he.stateNode.containerInfo===pe.containerInfo&&he.stateNode.implementation===pe.implementation){U(ce,he.sibling),he=_(he,pe.children||[]),he.return=ce,ce=he;break e}else{U(ce,he);break}else F(ce,he);he=he.sibling}he=La(pe,ce.mode,we),he.return=ce,ce=he}return ie(ce);case B:return Ne=pe._init,st(ce,he,Ne(pe._payload),we)}if(Ae(pe))return Fe(ce,he,pe,we);if(X(pe))return Le(ce,he,pe,we);Er(ce,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,he!==null&&he.tag===6?(U(ce,he.sibling),he=_(he,pe),he.return=ce,ce=he):(U(ce,he),he=Fa(pe,ce.mode,we),he.return=ce,ce=he),ie(ce)):U(ce,he)}return st}var ti=tl(!0),nl=tl(!1),Cr=vn(null),wr=null,ni=null,Vs=null;function Ws(){Vs=ni=wr=null}function Hs(O){var F=Cr.current;qe(Cr),O._currentValue=F}function js(O,F,U){for(;O!==null;){var H=O.alternate;if((O.childLanes&F)!==F?(O.childLanes|=F,H!==null&&(H.childLanes|=F)):H!==null&&(H.childLanes&F)!==F&&(H.childLanes|=F),O===U)break;O=O.return}}function ii(O,F){wr=O,Vs=ni=null,O=O.dependencies,O!==null&&O.firstContext!==null&&(O.lanes&F&&(Ct=!0),O.firstContext=null)}function Ft(O){var F=O._currentValue;if(Vs!==O)if(O={context:O,memoizedValue:F,next:null},ni===null){if(wr===null)throw Error(n(308));ni=O,wr.dependencies={lanes:0,firstContext:O}}else ni=ni.next=O;return F}var Fn=null;function Xs(O){Fn===null?Fn=[O]:Fn.push(O)}function il(O,F,U,H){var _=F.interleaved;return _===null?(U.next=U,Xs(F)):(U.next=_.next,_.next=U),F.interleaved=U,rn(O,H)}function rn(O,F){O.lanes|=F;var U=O.alternate;for(U!==null&&(U.lanes|=F),U=O,O=O.return;O!==null;)O.childLanes|=F,U=O.alternate,U!==null&&(U.childLanes|=F),U=O,O=O.return;return U.tag===3?U.stateNode:null}var yn=!1;function Ys(O){O.updateQueue={baseState:O.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rl(O,F){O=O.updateQueue,F.updateQueue===O&&(F.updateQueue={baseState:O.baseState,firstBaseUpdate:O.firstBaseUpdate,lastBaseUpdate:O.lastBaseUpdate,shared:O.shared,effects:O.effects})}function sn(O,F){return{eventTime:O,lane:F,tag:0,payload:null,callback:null,next:null}}function xn(O,F,U){var H=O.updateQueue;if(H===null)return null;if(H=H.shared,Ve&2){var _=H.pending;return _===null?F.next=F:(F.next=_.next,_.next=F),H.pending=F,rn(O,U)}return _=H.interleaved,_===null?(F.next=F,Xs(H)):(F.next=_.next,_.next=F),H.interleaved=F,rn(O,U)}function Pr(O,F,U){if(F=F.updateQueue,F!==null&&(F=F.shared,(U&4194240)!==0)){var H=F.lanes;H&=O.pendingLanes,U|=H,F.lanes=U,os(O,U)}}function sl(O,F){var U=O.updateQueue,H=O.alternate;if(H!==null&&(H=H.updateQueue,U===H)){var _=null,q=null;if(U=U.firstBaseUpdate,U!==null){do{var ie={eventTime:U.eventTime,lane:U.lane,tag:U.tag,payload:U.payload,callback:U.callback,next:null};q===null?_=q=ie:q=q.next=ie,U=U.next}while(U!==null);q===null?_=q=F:q=q.next=F}else _=q=F;U={baseState:H.baseState,firstBaseUpdate:_,lastBaseUpdate:q,shared:H.shared,effects:H.effects},O.updateQueue=U;return}O=U.lastBaseUpdate,O===null?U.firstBaseUpdate=F:O.next=F,U.lastBaseUpdate=F}function Ar(O,F,U,H){var _=O.updateQueue;yn=!1;var q=_.firstBaseUpdate,ie=_.lastBaseUpdate,oe=_.shared.pending;if(oe!==null){_.shared.pending=null;var le=oe,me=le.next;le.next=null,ie===null?q=me:ie.next=me,ie=le;var Ee=O.alternate;Ee!==null&&(Ee=Ee.updateQueue,oe=Ee.lastBaseUpdate,oe!==ie&&(oe===null?Ee.firstBaseUpdate=me:oe.next=me,Ee.lastBaseUpdate=le))}if(q!==null){var Ce=_.baseState;ie=0,Ee=me=le=null,oe=q;do{var Te=oe.lane,Re=oe.eventTime;if((H&Te)===Te){Ee!==null&&(Ee=Ee.next={eventTime:Re,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var Fe=O,Le=oe;switch(Te=F,Re=U,Le.tag){case 1:if(Fe=Le.payload,typeof Fe=="function"){Ce=Fe.call(Re,Ce,Te);break e}Ce=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Le.payload,Te=typeof Fe=="function"?Fe.call(Re,Ce,Te):Fe,Te==null)break e;Ce=Y({},Ce,Te);break e;case 2:yn=!0}}oe.callback!==null&&oe.lane!==0&&(O.flags|=64,Te=_.effects,Te===null?_.effects=[oe]:Te.push(oe))}else Re={eventTime:Re,lane:Te,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Ee===null?(me=Ee=Re,le=Ce):Ee=Ee.next=Re,ie|=Te;if(oe=oe.next,oe===null){if(oe=_.shared.pending,oe===null)break;Te=oe,oe=Te.next,Te.next=null,_.lastBaseUpdate=Te,_.shared.pending=null}}while(!0);if(Ee===null&&(le=Ce),_.baseState=le,_.firstBaseUpdate=me,_.lastBaseUpdate=Ee,F=_.shared.interleaved,F!==null){_=F;do ie|=_.lane,_=_.next;while(_!==F)}else q===null&&(_.shared.lanes=0);Nn|=ie,O.lanes=ie,O.memoizedState=Ce}}function al(O,F,U){if(O=F.effects,F.effects=null,O!==null)for(F=0;F<O.length;F++){var H=O[F],_=H.callback;if(_!==null){if(H.callback=null,H=U,typeof _!="function")throw Error(n(191,_));_.call(H)}}}var Li={},Jt=vn(Li),Di=vn(Li),Ni=vn(Li);function Ln(O){if(O===Li)throw Error(n(174));return O}function Zs(O,F){switch(Ke(Ni,F),Ke(Di,O),Ke(Jt,Li),O=F.nodeType,O){case 9:case 11:F=(F=F.documentElement)?F.namespaceURI:je(null,"");break;default:O=O===8?F.parentNode:F,F=O.namespaceURI||null,O=O.tagName,F=je(F,O)}qe(Jt),Ke(Jt,F)}function ri(){qe(Jt),qe(Di),qe(Ni)}function ol(O){Ln(Ni.current);var F=Ln(Jt.current),U=je(F,O.type);F!==U&&(Ke(Di,O),Ke(Jt,U))}function Ks(O){Di.current===O&&(qe(Jt),qe(Di))}var tt=vn(0);function Rr(O){for(var F=O;F!==null;){if(F.tag===13){var U=F.memoizedState;if(U!==null&&(U=U.dehydrated,U===null||U.data==="$?"||U.data==="$!"))return F}else if(F.tag===19&&F.memoizedProps.revealOrder!==void 0){if(F.flags&128)return F}else if(F.child!==null){F.child.return=F,F=F.child;continue}if(F===O)break;for(;F.sibling===null;){if(F.return===null||F.return===O)return null;F=F.return}F.sibling.return=F.return,F=F.sibling}return null}var Js=[];function Qs(){for(var O=0;O<Js.length;O++)Js[O]._workInProgressVersionPrimary=null;Js.length=0}var Or=S.ReactCurrentDispatcher,_s=S.ReactCurrentBatchConfig,Dn=0,nt=null,ot=null,ht=null,Ir=!1,Bi=!1,Gi=0,kh=0;function mt(){throw Error(n(321))}function qs(O,F){if(F===null)return!1;for(var U=0;U<F.length&&U<O.length;U++)if(!Vt(O[U],F[U]))return!1;return!0}function ea(O,F,U,H,_,q){if(Dn=q,nt=F,F.memoizedState=null,F.updateQueue=null,F.lanes=0,Or.current=O===null||O.memoizedState===null?Hh:jh,O=U(H,_),Bi){q=0;do{if(Bi=!1,Gi=0,25<=q)throw Error(n(301));q+=1,ht=ot=null,F.updateQueue=null,Or.current=Xh,O=U(H,_)}while(Bi)}if(Or.current=Lr,F=ot!==null&&ot.next!==null,Dn=0,ht=ot=nt=null,Ir=!1,F)throw Error(n(300));return O}function ta(){var O=Gi!==0;return Gi=0,O}function Qt(){var O={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?nt.memoizedState=ht=O:ht=ht.next=O,ht}function Lt(){if(ot===null){var O=nt.alternate;O=O!==null?O.memoizedState:null}else O=ot.next;var F=ht===null?nt.memoizedState:ht.next;if(F!==null)ht=F,ot=O;else{if(O===null)throw Error(n(310));ot=O,O={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?nt.memoizedState=ht=O:ht=ht.next=O}return ht}function Ui(O,F){return typeof F=="function"?F(O):F}function na(O){var F=Lt(),U=F.queue;if(U===null)throw Error(n(311));U.lastRenderedReducer=O;var H=ot,_=H.baseQueue,q=U.pending;if(q!==null){if(_!==null){var ie=_.next;_.next=q.next,q.next=ie}H.baseQueue=_=q,U.pending=null}if(_!==null){q=_.next,H=H.baseState;var oe=ie=null,le=null,me=q;do{var Ee=me.lane;if((Dn&Ee)===Ee)le!==null&&(le=le.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),H=me.hasEagerState?me.eagerState:O(H,me.action);else{var Ce={lane:Ee,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};le===null?(oe=le=Ce,ie=H):le=le.next=Ce,nt.lanes|=Ee,Nn|=Ee}me=me.next}while(me!==null&&me!==q);le===null?ie=H:le.next=oe,Vt(H,F.memoizedState)||(Ct=!0),F.memoizedState=H,F.baseState=ie,F.baseQueue=le,U.lastRenderedState=H}if(O=U.interleaved,O!==null){_=O;do q=_.lane,nt.lanes|=q,Nn|=q,_=_.next;while(_!==O)}else _===null&&(U.lanes=0);return[F.memoizedState,U.dispatch]}function ia(O){var F=Lt(),U=F.queue;if(U===null)throw Error(n(311));U.lastRenderedReducer=O;var H=U.dispatch,_=U.pending,q=F.memoizedState;if(_!==null){U.pending=null;var ie=_=_.next;do q=O(q,ie.action),ie=ie.next;while(ie!==_);Vt(q,F.memoizedState)||(Ct=!0),F.memoizedState=q,F.baseQueue===null&&(F.baseState=q),U.lastRenderedState=q}return[q,H]}function ll(){}function ul(O,F){var U=nt,H=Lt(),_=F(),q=!Vt(H.memoizedState,_);if(q&&(H.memoizedState=_,Ct=!0),H=H.queue,ra(fl.bind(null,U,H,O),[O]),H.getSnapshot!==F||q||ht!==null&&ht.memoizedState.tag&1){if(U.flags|=2048,$i(9,dl.bind(null,U,H,_,F),void 0,null),dt===null)throw Error(n(349));Dn&30||hl(U,F,_)}return _}function hl(O,F,U){O.flags|=16384,O={getSnapshot:F,value:U},F=nt.updateQueue,F===null?(F={lastEffect:null,stores:null},nt.updateQueue=F,F.stores=[O]):(U=F.stores,U===null?F.stores=[O]:U.push(O))}function dl(O,F,U,H){F.value=U,F.getSnapshot=H,cl(F)&&pl(O)}function fl(O,F,U){return U(function(){cl(F)&&pl(O)})}function cl(O){var F=O.getSnapshot;O=O.value;try{var U=F();return!Vt(O,U)}catch{return!0}}function pl(O){var F=rn(O,1);F!==null&&Yt(F,O,1,-1)}function vl(O){var F=Qt();return typeof O=="function"&&(O=O()),F.memoizedState=F.baseState=O,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:O},F.queue=O,O=O.dispatch=Wh.bind(null,nt,O),[F.memoizedState,O]}function $i(O,F,U,H){return O={tag:O,create:F,destroy:U,deps:H,next:null},F=nt.updateQueue,F===null?(F={lastEffect:null,stores:null},nt.updateQueue=F,F.lastEffect=O.next=O):(U=F.lastEffect,U===null?F.lastEffect=O.next=O:(H=U.next,U.next=O,O.next=H,F.lastEffect=O)),O}function ml(){return Lt().memoizedState}function Mr(O,F,U,H){var _=Qt();nt.flags|=O,_.memoizedState=$i(1|F,U,void 0,H===void 0?null:H)}function Fr(O,F,U,H){var _=Lt();H=H===void 0?null:H;var q=void 0;if(ot!==null){var ie=ot.memoizedState;if(q=ie.destroy,H!==null&&qs(H,ie.deps)){_.memoizedState=$i(F,U,q,H);return}}nt.flags|=O,_.memoizedState=$i(1|F,U,q,H)}function gl(O,F){return Mr(8390656,8,O,F)}function ra(O,F){return Fr(2048,8,O,F)}function yl(O,F){return Fr(4,2,O,F)}function xl(O,F){return Fr(4,4,O,F)}function Sl(O,F){if(typeof F=="function")return O=O(),F(O),function(){F(null)};if(F!=null)return O=O(),F.current=O,function(){F.current=null}}function Tl(O,F,U){return U=U!=null?U.concat([O]):null,Fr(4,4,Sl.bind(null,F,O),U)}function sa(){}function El(O,F){var U=Lt();F=F===void 0?null:F;var H=U.memoizedState;return H!==null&&F!==null&&qs(F,H[1])?H[0]:(U.memoizedState=[O,F],O)}function Cl(O,F){var U=Lt();F=F===void 0?null:F;var H=U.memoizedState;return H!==null&&F!==null&&qs(F,H[1])?H[0]:(O=O(),U.memoizedState=[O,F],O)}function wl(O,F,U){return Dn&21?(Vt(U,F)||(U=qa(),nt.lanes|=U,Nn|=U,O.baseState=!0),F):(O.baseState&&(O.baseState=!1,Ct=!0),O.memoizedState=U)}function zh(O,F){var U=Ye;Ye=U!==0&&4>U?U:4,O(!0);var H=_s.transition;_s.transition={};try{O(!1),F()}finally{Ye=U,_s.transition=H}}function bl(){return Lt().memoizedState}function Vh(O,F,U){var H=Cn(O);if(U={lane:H,action:U,hasEagerState:!1,eagerState:null,next:null},Pl(O))Al(F,U);else if(U=il(O,F,U,H),U!==null){var _=St();Yt(U,O,H,_),Rl(U,F,H)}}function Wh(O,F,U){var H=Cn(O),_={lane:H,action:U,hasEagerState:!1,eagerState:null,next:null};if(Pl(O))Al(F,_);else{var q=O.alternate;if(O.lanes===0&&(q===null||q.lanes===0)&&(q=F.lastRenderedReducer,q!==null))try{var ie=F.lastRenderedState,oe=q(ie,U);if(_.hasEagerState=!0,_.eagerState=oe,Vt(oe,ie)){var le=F.interleaved;le===null?(_.next=_,Xs(F)):(_.next=le.next,le.next=_),F.interleaved=_;return}}catch{}finally{}U=il(O,F,_,H),U!==null&&(_=St(),Yt(U,O,H,_),Rl(U,F,H))}}function Pl(O){var F=O.alternate;return O===nt||F!==null&&F===nt}function Al(O,F){Bi=Ir=!0;var U=O.pending;U===null?F.next=F:(F.next=U.next,U.next=F),O.pending=F}function Rl(O,F,U){if(U&4194240){var H=F.lanes;H&=O.pendingLanes,U|=H,F.lanes=U,os(O,U)}}var Lr={readContext:Ft,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Hh={readContext:Ft,useCallback:function(O,F){return Qt().memoizedState=[O,F===void 0?null:F],O},useContext:Ft,useEffect:gl,useImperativeHandle:function(O,F,U){return U=U!=null?U.concat([O]):null,Mr(4194308,4,Sl.bind(null,F,O),U)},useLayoutEffect:function(O,F){return Mr(4194308,4,O,F)},useInsertionEffect:function(O,F){return Mr(4,2,O,F)},useMemo:function(O,F){var U=Qt();return F=F===void 0?null:F,O=O(),U.memoizedState=[O,F],O},useReducer:function(O,F,U){var H=Qt();return F=U!==void 0?U(F):F,H.memoizedState=H.baseState=F,O={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:O,lastRenderedState:F},H.queue=O,O=O.dispatch=Vh.bind(null,nt,O),[H.memoizedState,O]},useRef:function(O){var F=Qt();return O={current:O},F.memoizedState=O},useState:vl,useDebugValue:sa,useDeferredValue:function(O){return Qt().memoizedState=O},useTransition:function(){var O=vl(!1),F=O[0];return O=zh.bind(null,O[1]),Qt().memoizedState=O,[F,O]},useMutableSource:function(){},useSyncExternalStore:function(O,F,U){var H=nt,_=Qt();if(et){if(U===void 0)throw Error(n(407));U=U()}else{if(U=F(),dt===null)throw Error(n(349));Dn&30||hl(H,F,U)}_.memoizedState=U;var q={value:U,getSnapshot:F};return _.queue=q,gl(fl.bind(null,H,q,O),[O]),H.flags|=2048,$i(9,dl.bind(null,H,q,U,F),void 0,null),U},useId:function(){var O=Qt(),F=dt.identifierPrefix;if(et){var U=nn,H=tn;U=(H&~(1<<32-zt(H)-1)).toString(32)+U,F=":"+F+"R"+U,U=Gi++,0<U&&(F+="H"+U.toString(32)),F+=":"}else U=kh++,F=":"+F+"r"+U.toString(32)+":";return O.memoizedState=F},unstable_isNewReconciler:!1},jh={readContext:Ft,useCallback:El,useContext:Ft,useEffect:ra,useImperativeHandle:Tl,useInsertionEffect:yl,useLayoutEffect:xl,useMemo:Cl,useReducer:na,useRef:ml,useState:function(){return na(Ui)},useDebugValue:sa,useDeferredValue:function(O){var F=Lt();return wl(F,ot.memoizedState,O)},useTransition:function(){var O=na(Ui)[0],F=Lt().memoizedState;return[O,F]},useMutableSource:ll,useSyncExternalStore:ul,useId:bl,unstable_isNewReconciler:!1},Xh={readContext:Ft,useCallback:El,useContext:Ft,useEffect:ra,useImperativeHandle:Tl,useInsertionEffect:yl,useLayoutEffect:xl,useMemo:Cl,useReducer:ia,useRef:ml,useState:function(){return ia(Ui)},useDebugValue:sa,useDeferredValue:function(O){var F=Lt();return ot===null?F.memoizedState=O:wl(F,ot.memoizedState,O)},useTransition:function(){var O=ia(Ui)[0],F=Lt().memoizedState;return[O,F]},useMutableSource:ll,useSyncExternalStore:ul,useId:bl,unstable_isNewReconciler:!1};function Ht(O,F){if(O&&O.defaultProps){F=Y({},F),O=O.defaultProps;for(var U in O)F[U]===void 0&&(F[U]=O[U]);return F}return F}function aa(O,F,U,H){F=O.memoizedState,U=U(H,F),U=U==null?F:Y({},F,U),O.memoizedState=U,O.lanes===0&&(O.updateQueue.baseState=U)}var Dr={isMounted:function(O){return(O=O._reactInternals)?An(O)===O:!1},enqueueSetState:function(O,F,U){O=O._reactInternals;var H=St(),_=Cn(O),q=sn(H,_);q.payload=F,U!=null&&(q.callback=U),F=xn(O,q,_),F!==null&&(Yt(F,O,_,H),Pr(F,O,_))},enqueueReplaceState:function(O,F,U){O=O._reactInternals;var H=St(),_=Cn(O),q=sn(H,_);q.tag=1,q.payload=F,U!=null&&(q.callback=U),F=xn(O,q,_),F!==null&&(Yt(F,O,_,H),Pr(F,O,_))},enqueueForceUpdate:function(O,F){O=O._reactInternals;var U=St(),H=Cn(O),_=sn(U,H);_.tag=2,F!=null&&(_.callback=F),F=xn(O,_,H),F!==null&&(Yt(F,O,H,U),Pr(F,O,H))}};function Ol(O,F,U,H,_,q,ie){return O=O.stateNode,typeof O.shouldComponentUpdate=="function"?O.shouldComponentUpdate(H,q,ie):F.prototype&&F.prototype.isPureReactComponent?!bi(U,H)||!bi(_,q):!0}function Il(O,F,U){var H=!1,_=mn,q=F.contextType;return typeof q=="object"&&q!==null?q=Ft(q):(_=Et(F)?On:vt.current,H=F.contextTypes,q=(H=H!=null)?Qn(O,_):mn),F=new F(U,q),O.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=Dr,O.stateNode=F,F._reactInternals=O,H&&(O=O.stateNode,O.__reactInternalMemoizedUnmaskedChildContext=_,O.__reactInternalMemoizedMaskedChildContext=q),F}function Ml(O,F,U,H){O=F.state,typeof F.componentWillReceiveProps=="function"&&F.componentWillReceiveProps(U,H),typeof F.UNSAFE_componentWillReceiveProps=="function"&&F.UNSAFE_componentWillReceiveProps(U,H),F.state!==O&&Dr.enqueueReplaceState(F,F.state,null)}function oa(O,F,U,H){var _=O.stateNode;_.props=U,_.state=O.memoizedState,_.refs={},Ys(O);var q=F.contextType;typeof q=="object"&&q!==null?_.context=Ft(q):(q=Et(F)?On:vt.current,_.context=Qn(O,q)),_.state=O.memoizedState,q=F.getDerivedStateFromProps,typeof q=="function"&&(aa(O,F,q,U),_.state=O.memoizedState),typeof F.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(F=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),F!==_.state&&Dr.enqueueReplaceState(_,_.state,null),Ar(O,U,_,H),_.state=O.memoizedState),typeof _.componentDidMount=="function"&&(O.flags|=4194308)}function si(O,F){try{var U="",H=F;do U+=W(H),H=H.return;while(H);var _=U}catch(q){_=`
Error generating stack: `+q.message+`
`+q.stack}return{value:O,source:F,stack:_,digest:null}}function la(O,F,U){return{value:O,source:null,stack:U??null,digest:F??null}}function ua(O,F){try{console.error(F.value)}catch(U){setTimeout(function(){throw U})}}var Yh=typeof WeakMap=="function"?WeakMap:Map;function Fl(O,F,U){U=sn(-1,U),U.tag=3,U.payload={element:null};var H=F.value;return U.callback=function(){zr||(zr=!0,wa=H),ua(O,F)},U}function Ll(O,F,U){U=sn(-1,U),U.tag=3;var H=O.type.getDerivedStateFromError;if(typeof H=="function"){var _=F.value;U.payload=function(){return H(_)},U.callback=function(){ua(O,F)}}var q=O.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(U.callback=function(){ua(O,F),typeof H!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var ie=F.stack;this.componentDidCatch(F.value,{componentStack:ie!==null?ie:""})}),U}function Dl(O,F,U){var H=O.pingCache;if(H===null){H=O.pingCache=new Yh;var _=new Set;H.set(F,_)}else _=H.get(F),_===void 0&&(_=new Set,H.set(F,_));_.has(U)||(_.add(U),O=ld.bind(null,O,F,U),F.then(O,O))}function Nl(O){do{var F;if((F=O.tag===13)&&(F=O.memoizedState,F=F!==null?F.dehydrated!==null:!0),F)return O;O=O.return}while(O!==null);return null}function Bl(O,F,U,H,_){return O.mode&1?(O.flags|=65536,O.lanes=_,O):(O===F?O.flags|=65536:(O.flags|=128,U.flags|=131072,U.flags&=-52805,U.tag===1&&(U.alternate===null?U.tag=17:(F=sn(-1,1),F.tag=2,xn(U,F,1))),U.lanes|=1),O)}var Zh=S.ReactCurrentOwner,Ct=!1;function xt(O,F,U,H){F.child=O===null?nl(F,null,U,H):ti(F,O.child,U,H)}function Gl(O,F,U,H,_){U=U.render;var q=F.ref;return ii(F,_),H=ea(O,F,U,H,q,_),U=ta(),O!==null&&!Ct?(F.updateQueue=O.updateQueue,F.flags&=-2053,O.lanes&=~_,an(O,F,_)):(et&&U&&Gs(F),F.flags|=1,xt(O,F,H,_),F.child)}function Ul(O,F,U,H,_){if(O===null){var q=U.type;return typeof q=="function"&&!Ma(q)&&q.defaultProps===void 0&&U.compare===null&&U.defaultProps===void 0?(F.tag=15,F.type=q,$l(O,F,q,H,_)):(O=Yr(U.type,null,H,F,F.mode,_),O.ref=F.ref,O.return=F,F.child=O)}if(q=O.child,!(O.lanes&_)){var ie=q.memoizedProps;if(U=U.compare,U=U!==null?U:bi,U(ie,H)&&O.ref===F.ref)return an(O,F,_)}return F.flags|=1,O=bn(q,H),O.ref=F.ref,O.return=F,F.child=O}function $l(O,F,U,H,_){if(O!==null){var q=O.memoizedProps;if(bi(q,H)&&O.ref===F.ref)if(Ct=!1,F.pendingProps=H=q,(O.lanes&_)!==0)O.flags&131072&&(Ct=!0);else return F.lanes=O.lanes,an(O,F,_)}return ha(O,F,U,H,_)}function kl(O,F,U){var H=F.pendingProps,_=H.children,q=O!==null?O.memoizedState:null;if(H.mode==="hidden")if(!(F.mode&1))F.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(oi,Ot),Ot|=U;else{if(!(U&1073741824))return O=q!==null?q.baseLanes|U:U,F.lanes=F.childLanes=1073741824,F.memoizedState={baseLanes:O,cachePool:null,transitions:null},F.updateQueue=null,Ke(oi,Ot),Ot|=O,null;F.memoizedState={baseLanes:0,cachePool:null,transitions:null},H=q!==null?q.baseLanes:U,Ke(oi,Ot),Ot|=H}else q!==null?(H=q.baseLanes|U,F.memoizedState=null):H=U,Ke(oi,Ot),Ot|=H;return xt(O,F,_,U),F.child}function zl(O,F){var U=F.ref;(O===null&&U!==null||O!==null&&O.ref!==U)&&(F.flags|=512,F.flags|=2097152)}function ha(O,F,U,H,_){var q=Et(U)?On:vt.current;return q=Qn(F,q),ii(F,_),U=ea(O,F,U,H,q,_),H=ta(),O!==null&&!Ct?(F.updateQueue=O.updateQueue,F.flags&=-2053,O.lanes&=~_,an(O,F,_)):(et&&H&&Gs(F),F.flags|=1,xt(O,F,U,_),F.child)}function Vl(O,F,U,H,_){if(Et(U)){var q=!0;gr(F)}else q=!1;if(ii(F,_),F.stateNode===null)Br(O,F),Il(F,U,H),oa(F,U,H,_),H=!0;else if(O===null){var ie=F.stateNode,oe=F.memoizedProps;ie.props=oe;var le=ie.context,me=U.contextType;typeof me=="object"&&me!==null?me=Ft(me):(me=Et(U)?On:vt.current,me=Qn(F,me));var Ee=U.getDerivedStateFromProps,Ce=typeof Ee=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Ce||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(oe!==H||le!==me)&&Ml(F,ie,H,me),yn=!1;var Te=F.memoizedState;ie.state=Te,Ar(F,H,ie,_),le=F.memoizedState,oe!==H||Te!==le||Tt.current||yn?(typeof Ee=="function"&&(aa(F,U,Ee,H),le=F.memoizedState),(oe=yn||Ol(F,U,oe,H,Te,le,me))?(Ce||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(F.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(F.flags|=4194308),F.memoizedProps=H,F.memoizedState=le),ie.props=H,ie.state=le,ie.context=me,H=oe):(typeof ie.componentDidMount=="function"&&(F.flags|=4194308),H=!1)}else{ie=F.stateNode,rl(O,F),oe=F.memoizedProps,me=F.type===F.elementType?oe:Ht(F.type,oe),ie.props=me,Ce=F.pendingProps,Te=ie.context,le=U.contextType,typeof le=="object"&&le!==null?le=Ft(le):(le=Et(U)?On:vt.current,le=Qn(F,le));var Re=U.getDerivedStateFromProps;(Ee=typeof Re=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(oe!==Ce||Te!==le)&&Ml(F,ie,H,le),yn=!1,Te=F.memoizedState,ie.state=Te,Ar(F,H,ie,_);var Fe=F.memoizedState;oe!==Ce||Te!==Fe||Tt.current||yn?(typeof Re=="function"&&(aa(F,U,Re,H),Fe=F.memoizedState),(me=yn||Ol(F,U,me,H,Te,Fe,le)||!1)?(Ee||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(H,Fe,le),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(H,Fe,le)),typeof ie.componentDidUpdate=="function"&&(F.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(F.flags|=1024)):(typeof ie.componentDidUpdate!="function"||oe===O.memoizedProps&&Te===O.memoizedState||(F.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||oe===O.memoizedProps&&Te===O.memoizedState||(F.flags|=1024),F.memoizedProps=H,F.memoizedState=Fe),ie.props=H,ie.state=Fe,ie.context=le,H=me):(typeof ie.componentDidUpdate!="function"||oe===O.memoizedProps&&Te===O.memoizedState||(F.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||oe===O.memoizedProps&&Te===O.memoizedState||(F.flags|=1024),H=!1)}return da(O,F,U,H,q,_)}function da(O,F,U,H,_,q){zl(O,F);var ie=(F.flags&128)!==0;if(!H&&!ie)return _&&Yo(F,U,!1),an(O,F,q);H=F.stateNode,Zh.current=F;var oe=ie&&typeof U.getDerivedStateFromError!="function"?null:H.render();return F.flags|=1,O!==null&&ie?(F.child=ti(F,O.child,null,q),F.child=ti(F,null,oe,q)):xt(O,F,oe,q),F.memoizedState=H.state,_&&Yo(F,U,!0),F.child}function Wl(O){var F=O.stateNode;F.pendingContext?jo(O,F.pendingContext,F.pendingContext!==F.context):F.context&&jo(O,F.context,!1),Zs(O,F.containerInfo)}function Hl(O,F,U,H,_){return ei(),zs(_),F.flags|=256,xt(O,F,U,H),F.child}var fa={dehydrated:null,treeContext:null,retryLane:0};function ca(O){return{baseLanes:O,cachePool:null,transitions:null}}function jl(O,F,U){var H=F.pendingProps,_=tt.current,q=!1,ie=(F.flags&128)!==0,oe;if((oe=ie)||(oe=O!==null&&O.memoizedState===null?!1:(_&2)!==0),oe?(q=!0,F.flags&=-129):(O===null||O.memoizedState!==null)&&(_|=1),Ke(tt,_&1),O===null)return ks(F),O=F.memoizedState,O!==null&&(O=O.dehydrated,O!==null)?(F.mode&1?O.data==="$!"?F.lanes=8:F.lanes=1073741824:F.lanes=1,null):(ie=H.children,O=H.fallback,q?(H=F.mode,q=F.child,ie={mode:"hidden",children:ie},!(H&1)&&q!==null?(q.childLanes=0,q.pendingProps=ie):q=Zr(ie,H,0,null),O=$n(O,H,U,null),q.return=F,O.return=F,q.sibling=O,F.child=q,F.child.memoizedState=ca(U),F.memoizedState=fa,O):pa(F,ie));if(_=O.memoizedState,_!==null&&(oe=_.dehydrated,oe!==null))return Kh(O,F,ie,H,oe,_,U);if(q){q=H.fallback,ie=F.mode,_=O.child,oe=_.sibling;var le={mode:"hidden",children:H.children};return!(ie&1)&&F.child!==_?(H=F.child,H.childLanes=0,H.pendingProps=le,F.deletions=null):(H=bn(_,le),H.subtreeFlags=_.subtreeFlags&14680064),oe!==null?q=bn(oe,q):(q=$n(q,ie,U,null),q.flags|=2),q.return=F,H.return=F,H.sibling=q,F.child=H,H=q,q=F.child,ie=O.child.memoizedState,ie=ie===null?ca(U):{baseLanes:ie.baseLanes|U,cachePool:null,transitions:ie.transitions},q.memoizedState=ie,q.childLanes=O.childLanes&~U,F.memoizedState=fa,H}return q=O.child,O=q.sibling,H=bn(q,{mode:"visible",children:H.children}),!(F.mode&1)&&(H.lanes=U),H.return=F,H.sibling=null,O!==null&&(U=F.deletions,U===null?(F.deletions=[O],F.flags|=16):U.push(O)),F.child=H,F.memoizedState=null,H}function pa(O,F){return F=Zr({mode:"visible",children:F},O.mode,0,null),F.return=O,O.child=F}function Nr(O,F,U,H){return H!==null&&zs(H),ti(F,O.child,null,U),O=pa(F,F.pendingProps.children),O.flags|=2,F.memoizedState=null,O}function Kh(O,F,U,H,_,q,ie){if(U)return F.flags&256?(F.flags&=-257,H=la(Error(n(422))),Nr(O,F,ie,H)):F.memoizedState!==null?(F.child=O.child,F.flags|=128,null):(q=H.fallback,_=F.mode,H=Zr({mode:"visible",children:H.children},_,0,null),q=$n(q,_,ie,null),q.flags|=2,H.return=F,q.return=F,H.sibling=q,F.child=H,F.mode&1&&ti(F,O.child,null,ie),F.child.memoizedState=ca(ie),F.memoizedState=fa,q);if(!(F.mode&1))return Nr(O,F,ie,null);if(_.data==="$!"){if(H=_.nextSibling&&_.nextSibling.dataset,H)var oe=H.dgst;return H=oe,q=Error(n(419)),H=la(q,H,void 0),Nr(O,F,ie,H)}if(oe=(ie&O.childLanes)!==0,Ct||oe){if(H=dt,H!==null){switch(ie&-ie){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(H.suspendedLanes|ie)?0:_,_!==0&&_!==q.retryLane&&(q.retryLane=_,rn(O,_),Yt(H,O,_,-1))}return Ia(),H=la(Error(n(421))),Nr(O,F,ie,H)}return _.data==="$?"?(F.flags|=128,F.child=O.child,F=ud.bind(null,O),_._reactRetry=F,null):(O=q.treeContext,Rt=pn(_.nextSibling),At=F,et=!0,Wt=null,O!==null&&(It[Mt++]=tn,It[Mt++]=nn,It[Mt++]=In,tn=O.id,nn=O.overflow,In=F),F=pa(F,H.children),F.flags|=4096,F)}function Xl(O,F,U){O.lanes|=F;var H=O.alternate;H!==null&&(H.lanes|=F),js(O.return,F,U)}function va(O,F,U,H,_){var q=O.memoizedState;q===null?O.memoizedState={isBackwards:F,rendering:null,renderingStartTime:0,last:H,tail:U,tailMode:_}:(q.isBackwards=F,q.rendering=null,q.renderingStartTime=0,q.last=H,q.tail=U,q.tailMode=_)}function Yl(O,F,U){var H=F.pendingProps,_=H.revealOrder,q=H.tail;if(xt(O,F,H.children,U),H=tt.current,H&2)H=H&1|2,F.flags|=128;else{if(O!==null&&O.flags&128)e:for(O=F.child;O!==null;){if(O.tag===13)O.memoizedState!==null&&Xl(O,U,F);else if(O.tag===19)Xl(O,U,F);else if(O.child!==null){O.child.return=O,O=O.child;continue}if(O===F)break e;for(;O.sibling===null;){if(O.return===null||O.return===F)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}H&=1}if(Ke(tt,H),!(F.mode&1))F.memoizedState=null;else switch(_){case"forwards":for(U=F.child,_=null;U!==null;)O=U.alternate,O!==null&&Rr(O)===null&&(_=U),U=U.sibling;U=_,U===null?(_=F.child,F.child=null):(_=U.sibling,U.sibling=null),va(F,!1,_,U,q);break;case"backwards":for(U=null,_=F.child,F.child=null;_!==null;){if(O=_.alternate,O!==null&&Rr(O)===null){F.child=_;break}O=_.sibling,_.sibling=U,U=_,_=O}va(F,!0,U,null,q);break;case"together":va(F,!1,null,null,void 0);break;default:F.memoizedState=null}return F.child}function Br(O,F){!(F.mode&1)&&O!==null&&(O.alternate=null,F.alternate=null,F.flags|=2)}function an(O,F,U){if(O!==null&&(F.dependencies=O.dependencies),Nn|=F.lanes,!(U&F.childLanes))return null;if(O!==null&&F.child!==O.child)throw Error(n(153));if(F.child!==null){for(O=F.child,U=bn(O,O.pendingProps),F.child=U,U.return=F;O.sibling!==null;)O=O.sibling,U=U.sibling=bn(O,O.pendingProps),U.return=F;U.sibling=null}return F.child}function Jh(O,F,U){switch(F.tag){case 3:Wl(F),ei();break;case 5:ol(F);break;case 1:Et(F.type)&&gr(F);break;case 4:Zs(F,F.stateNode.containerInfo);break;case 10:var H=F.type._context,_=F.memoizedProps.value;Ke(Cr,H._currentValue),H._currentValue=_;break;case 13:if(H=F.memoizedState,H!==null)return H.dehydrated!==null?(Ke(tt,tt.current&1),F.flags|=128,null):U&F.child.childLanes?jl(O,F,U):(Ke(tt,tt.current&1),O=an(O,F,U),O!==null?O.sibling:null);Ke(tt,tt.current&1);break;case 19:if(H=(U&F.childLanes)!==0,O.flags&128){if(H)return Yl(O,F,U);F.flags|=128}if(_=F.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ke(tt,tt.current),H)break;return null;case 22:case 23:return F.lanes=0,kl(O,F,U)}return an(O,F,U)}var Zl,ma,Kl,Jl;Zl=function(O,F){for(var U=F.child;U!==null;){if(U.tag===5||U.tag===6)O.appendChild(U.stateNode);else if(U.tag!==4&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===F)break;for(;U.sibling===null;){if(U.return===null||U.return===F)return;U=U.return}U.sibling.return=U.return,U=U.sibling}},ma=function(){},Kl=function(O,F,U,H){var _=O.memoizedProps;if(_!==H){O=F.stateNode,Ln(Jt.current);var q=null;switch(U){case"input":_=de(O,_),H=de(O,H),q=[];break;case"select":_=Y({},_,{value:void 0}),H=Y({},H,{value:void 0}),q=[];break;case"textarea":_=xe(O,_),H=xe(O,H),q=[];break;default:typeof _.onClick!="function"&&typeof H.onClick=="function"&&(O.onclick=pr)}Bt(U,H);var ie;U=null;for(me in _)if(!H.hasOwnProperty(me)&&_.hasOwnProperty(me)&&_[me]!=null)if(me==="style"){var oe=_[me];for(ie in oe)oe.hasOwnProperty(ie)&&(U||(U={}),U[ie]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(C.hasOwnProperty(me)?q||(q=[]):(q=q||[]).push(me,null));for(me in H){var le=H[me];if(oe=_!=null?_[me]:void 0,H.hasOwnProperty(me)&&le!==oe&&(le!=null||oe!=null))if(me==="style")if(oe){for(ie in oe)!oe.hasOwnProperty(ie)||le&&le.hasOwnProperty(ie)||(U||(U={}),U[ie]="");for(ie in le)le.hasOwnProperty(ie)&&oe[ie]!==le[ie]&&(U||(U={}),U[ie]=le[ie])}else U||(q||(q=[]),q.push(me,U)),U=le;else me==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,oe=oe?oe.__html:void 0,le!=null&&oe!==le&&(q=q||[]).push(me,le)):me==="children"?typeof le!="string"&&typeof le!="number"||(q=q||[]).push(me,""+le):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(C.hasOwnProperty(me)?(le!=null&&me==="onScroll"&&_e("scroll",O),q||oe===le||(q=[])):(q=q||[]).push(me,le))}U&&(q=q||[]).push("style",U);var me=q;(F.updateQueue=me)&&(F.flags|=4)}},Jl=function(O,F,U,H){U!==H&&(F.flags|=4)};function ki(O,F){if(!et)switch(O.tailMode){case"hidden":F=O.tail;for(var U=null;F!==null;)F.alternate!==null&&(U=F),F=F.sibling;U===null?O.tail=null:U.sibling=null;break;case"collapsed":U=O.tail;for(var H=null;U!==null;)U.alternate!==null&&(H=U),U=U.sibling;H===null?F||O.tail===null?O.tail=null:O.tail.sibling=null:H.sibling=null}}function gt(O){var F=O.alternate!==null&&O.alternate.child===O.child,U=0,H=0;if(F)for(var _=O.child;_!==null;)U|=_.lanes|_.childLanes,H|=_.subtreeFlags&14680064,H|=_.flags&14680064,_.return=O,_=_.sibling;else for(_=O.child;_!==null;)U|=_.lanes|_.childLanes,H|=_.subtreeFlags,H|=_.flags,_.return=O,_=_.sibling;return O.subtreeFlags|=H,O.childLanes=U,F}function Qh(O,F,U){var H=F.pendingProps;switch(Us(F),F.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(F),null;case 1:return Et(F.type)&&mr(),gt(F),null;case 3:return H=F.stateNode,ri(),qe(Tt),qe(vt),Qs(),H.pendingContext&&(H.context=H.pendingContext,H.pendingContext=null),(O===null||O.child===null)&&(Tr(F)?F.flags|=4:O===null||O.memoizedState.isDehydrated&&!(F.flags&256)||(F.flags|=1024,Wt!==null&&(Aa(Wt),Wt=null))),ma(O,F),gt(F),null;case 5:Ks(F);var _=Ln(Ni.current);if(U=F.type,O!==null&&F.stateNode!=null)Kl(O,F,U,H,_),O.ref!==F.ref&&(F.flags|=512,F.flags|=2097152);else{if(!H){if(F.stateNode===null)throw Error(n(166));return gt(F),null}if(O=Ln(Jt.current),Tr(F)){H=F.stateNode,U=F.type;var q=F.memoizedProps;switch(H[Kt]=F,H[Ii]=q,O=(F.mode&1)!==0,U){case"dialog":_e("cancel",H),_e("close",H);break;case"iframe":case"object":case"embed":_e("load",H);break;case"video":case"audio":for(_=0;_<Ai.length;_++)_e(Ai[_],H);break;case"source":_e("error",H);break;case"img":case"image":case"link":_e("error",H),_e("load",H);break;case"details":_e("toggle",H);break;case"input":fe(H,q),_e("invalid",H);break;case"select":H._wrapperState={wasMultiple:!!q.multiple},_e("invalid",H);break;case"textarea":be(H,q),_e("invalid",H)}Bt(U,q),_=null;for(var ie in q)if(q.hasOwnProperty(ie)){var oe=q[ie];ie==="children"?typeof oe=="string"?H.textContent!==oe&&(q.suppressHydrationWarning!==!0&&cr(H.textContent,oe,O),_=["children",oe]):typeof oe=="number"&&H.textContent!==""+oe&&(q.suppressHydrationWarning!==!0&&cr(H.textContent,oe,O),_=["children",""+oe]):C.hasOwnProperty(ie)&&oe!=null&&ie==="onScroll"&&_e("scroll",H)}switch(U){case"input":se(H),Se(H,q,!0);break;case"textarea":se(H),Ge(H);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(H.onclick=pr)}H=_,F.updateQueue=H,H!==null&&(F.flags|=4)}else{ie=_.nodeType===9?_:_.ownerDocument,O==="http://www.w3.org/1999/xhtml"&&(O=ze(U)),O==="http://www.w3.org/1999/xhtml"?U==="script"?(O=ie.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild)):typeof H.is=="string"?O=ie.createElement(U,{is:H.is}):(O=ie.createElement(U),U==="select"&&(ie=O,H.multiple?ie.multiple=!0:H.size&&(ie.size=H.size))):O=ie.createElementNS(O,U),O[Kt]=F,O[Ii]=H,Zl(O,F,!1,!1),F.stateNode=O;e:{switch(ie=Gt(U,H),U){case"dialog":_e("cancel",O),_e("close",O),_=H;break;case"iframe":case"object":case"embed":_e("load",O),_=H;break;case"video":case"audio":for(_=0;_<Ai.length;_++)_e(Ai[_],O);_=H;break;case"source":_e("error",O),_=H;break;case"img":case"image":case"link":_e("error",O),_e("load",O),_=H;break;case"details":_e("toggle",O),_=H;break;case"input":fe(O,H),_=de(O,H),_e("invalid",O);break;case"option":_=H;break;case"select":O._wrapperState={wasMultiple:!!H.multiple},_=Y({},H,{value:void 0}),_e("invalid",O);break;case"textarea":be(O,H),_=xe(O,H),_e("invalid",O);break;default:_=H}Bt(U,_),oe=_;for(q in oe)if(oe.hasOwnProperty(q)){var le=oe[q];q==="style"?Qe(O,le):q==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&ke(O,le)):q==="children"?typeof le=="string"?(U!=="textarea"||le!=="")&&Xe(O,le):typeof le=="number"&&Xe(O,""+le):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(C.hasOwnProperty(q)?le!=null&&q==="onScroll"&&_e("scroll",O):le!=null&&y(O,q,le,ie))}switch(U){case"input":se(O),Se(O,H,!1);break;case"textarea":se(O),Ge(O);break;case"option":H.value!=null&&O.setAttribute("value",""+ee(H.value));break;case"select":O.multiple=!!H.multiple,q=H.value,q!=null?Oe(O,!!H.multiple,q,!1):H.defaultValue!=null&&Oe(O,!!H.multiple,H.defaultValue,!0);break;default:typeof _.onClick=="function"&&(O.onclick=pr)}switch(U){case"button":case"input":case"select":case"textarea":H=!!H.autoFocus;break e;case"img":H=!0;break e;default:H=!1}}H&&(F.flags|=4)}F.ref!==null&&(F.flags|=512,F.flags|=2097152)}return gt(F),null;case 6:if(O&&F.stateNode!=null)Jl(O,F,O.memoizedProps,H);else{if(typeof H!="string"&&F.stateNode===null)throw Error(n(166));if(U=Ln(Ni.current),Ln(Jt.current),Tr(F)){if(H=F.stateNode,U=F.memoizedProps,H[Kt]=F,(q=H.nodeValue!==U)&&(O=At,O!==null))switch(O.tag){case 3:cr(H.nodeValue,U,(O.mode&1)!==0);break;case 5:O.memoizedProps.suppressHydrationWarning!==!0&&cr(H.nodeValue,U,(O.mode&1)!==0)}q&&(F.flags|=4)}else H=(U.nodeType===9?U:U.ownerDocument).createTextNode(H),H[Kt]=F,F.stateNode=H}return gt(F),null;case 13:if(qe(tt),H=F.memoizedState,O===null||O.memoizedState!==null&&O.memoizedState.dehydrated!==null){if(et&&Rt!==null&&F.mode&1&&!(F.flags&128))qo(),ei(),F.flags|=98560,q=!1;else if(q=Tr(F),H!==null&&H.dehydrated!==null){if(O===null){if(!q)throw Error(n(318));if(q=F.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[Kt]=F}else ei(),!(F.flags&128)&&(F.memoizedState=null),F.flags|=4;gt(F),q=!1}else Wt!==null&&(Aa(Wt),Wt=null),q=!0;if(!q)return F.flags&65536?F:null}return F.flags&128?(F.lanes=U,F):(H=H!==null,H!==(O!==null&&O.memoizedState!==null)&&H&&(F.child.flags|=8192,F.mode&1&&(O===null||tt.current&1?lt===0&&(lt=3):Ia())),F.updateQueue!==null&&(F.flags|=4),gt(F),null);case 4:return ri(),ma(O,F),O===null&&Ri(F.stateNode.containerInfo),gt(F),null;case 10:return Hs(F.type._context),gt(F),null;case 17:return Et(F.type)&&mr(),gt(F),null;case 19:if(qe(tt),q=F.memoizedState,q===null)return gt(F),null;if(H=(F.flags&128)!==0,ie=q.rendering,ie===null)if(H)ki(q,!1);else{if(lt!==0||O!==null&&O.flags&128)for(O=F.child;O!==null;){if(ie=Rr(O),ie!==null){for(F.flags|=128,ki(q,!1),H=ie.updateQueue,H!==null&&(F.updateQueue=H,F.flags|=4),F.subtreeFlags=0,H=U,U=F.child;U!==null;)q=U,O=H,q.flags&=14680066,ie=q.alternate,ie===null?(q.childLanes=0,q.lanes=O,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=ie.childLanes,q.lanes=ie.lanes,q.child=ie.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=ie.memoizedProps,q.memoizedState=ie.memoizedState,q.updateQueue=ie.updateQueue,q.type=ie.type,O=ie.dependencies,q.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),U=U.sibling;return Ke(tt,tt.current&1|2),F.child}O=O.sibling}q.tail!==null&&rt()>li&&(F.flags|=128,H=!0,ki(q,!1),F.lanes=4194304)}else{if(!H)if(O=Rr(ie),O!==null){if(F.flags|=128,H=!0,U=O.updateQueue,U!==null&&(F.updateQueue=U,F.flags|=4),ki(q,!0),q.tail===null&&q.tailMode==="hidden"&&!ie.alternate&&!et)return gt(F),null}else 2*rt()-q.renderingStartTime>li&&U!==1073741824&&(F.flags|=128,H=!0,ki(q,!1),F.lanes=4194304);q.isBackwards?(ie.sibling=F.child,F.child=ie):(U=q.last,U!==null?U.sibling=ie:F.child=ie,q.last=ie)}return q.tail!==null?(F=q.tail,q.rendering=F,q.tail=F.sibling,q.renderingStartTime=rt(),F.sibling=null,U=tt.current,Ke(tt,H?U&1|2:U&1),F):(gt(F),null);case 22:case 23:return Oa(),H=F.memoizedState!==null,O!==null&&O.memoizedState!==null!==H&&(F.flags|=8192),H&&F.mode&1?Ot&1073741824&&(gt(F),F.subtreeFlags&6&&(F.flags|=8192)):gt(F),null;case 24:return null;case 25:return null}throw Error(n(156,F.tag))}function _h(O,F){switch(Us(F),F.tag){case 1:return Et(F.type)&&mr(),O=F.flags,O&65536?(F.flags=O&-65537|128,F):null;case 3:return ri(),qe(Tt),qe(vt),Qs(),O=F.flags,O&65536&&!(O&128)?(F.flags=O&-65537|128,F):null;case 5:return Ks(F),null;case 13:if(qe(tt),O=F.memoizedState,O!==null&&O.dehydrated!==null){if(F.alternate===null)throw Error(n(340));ei()}return O=F.flags,O&65536?(F.flags=O&-65537|128,F):null;case 19:return qe(tt),null;case 4:return ri(),null;case 10:return Hs(F.type._context),null;case 22:case 23:return Oa(),null;case 24:return null;default:return null}}var Gr=!1,yt=!1,qh=typeof WeakSet=="function"?WeakSet:Set,Me=null;function ai(O,F){var U=O.ref;if(U!==null)if(typeof U=="function")try{U(null)}catch(H){it(O,F,H)}else U.current=null}function ga(O,F,U){try{U()}catch(H){it(O,F,H)}}var Ql=!1;function ed(O,F){if(Os=tr,O=Oo(),Ts(O)){if("selectionStart"in O)var U={start:O.selectionStart,end:O.selectionEnd};else e:{U=(U=O.ownerDocument)&&U.defaultView||window;var H=U.getSelection&&U.getSelection();if(H&&H.rangeCount!==0){U=H.anchorNode;var _=H.anchorOffset,q=H.focusNode;H=H.focusOffset;try{U.nodeType,q.nodeType}catch{U=null;break e}var ie=0,oe=-1,le=-1,me=0,Ee=0,Ce=O,Te=null;t:for(;;){for(var Re;Ce!==U||_!==0&&Ce.nodeType!==3||(oe=ie+_),Ce!==q||H!==0&&Ce.nodeType!==3||(le=ie+H),Ce.nodeType===3&&(ie+=Ce.nodeValue.length),(Re=Ce.firstChild)!==null;)Te=Ce,Ce=Re;for(;;){if(Ce===O)break t;if(Te===U&&++me===_&&(oe=ie),Te===q&&++Ee===H&&(le=ie),(Re=Ce.nextSibling)!==null)break;Ce=Te,Te=Ce.parentNode}Ce=Re}U=oe===-1||le===-1?null:{start:oe,end:le}}else U=null}U=U||{start:0,end:0}}else U=null;for(Is={focusedElem:O,selectionRange:U},tr=!1,Me=F;Me!==null;)if(F=Me,O=F.child,(F.subtreeFlags&1028)!==0&&O!==null)O.return=F,Me=O;else for(;Me!==null;){F=Me;try{var Fe=F.alternate;if(F.flags&1024)switch(F.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Le=Fe.memoizedProps,st=Fe.memoizedState,ce=F.stateNode,he=ce.getSnapshotBeforeUpdate(F.elementType===F.type?Le:Ht(F.type,Le),st);ce.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var pe=F.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(we){it(F,F.return,we)}if(O=F.sibling,O!==null){O.return=F.return,Me=O;break}Me=F.return}return Fe=Ql,Ql=!1,Fe}function zi(O,F,U){var H=F.updateQueue;if(H=H!==null?H.lastEffect:null,H!==null){var _=H=H.next;do{if((_.tag&O)===O){var q=_.destroy;_.destroy=void 0,q!==void 0&&ga(F,U,q)}_=_.next}while(_!==H)}}function Ur(O,F){if(F=F.updateQueue,F=F!==null?F.lastEffect:null,F!==null){var U=F=F.next;do{if((U.tag&O)===O){var H=U.create;U.destroy=H()}U=U.next}while(U!==F)}}function ya(O){var F=O.ref;if(F!==null){var U=O.stateNode;switch(O.tag){case 5:O=U;break;default:O=U}typeof F=="function"?F(O):F.current=O}}function _l(O){var F=O.alternate;F!==null&&(O.alternate=null,_l(F)),O.child=null,O.deletions=null,O.sibling=null,O.tag===5&&(F=O.stateNode,F!==null&&(delete F[Kt],delete F[Ii],delete F[Ds],delete F[Bh],delete F[Gh])),O.stateNode=null,O.return=null,O.dependencies=null,O.memoizedProps=null,O.memoizedState=null,O.pendingProps=null,O.stateNode=null,O.updateQueue=null}function ql(O){return O.tag===5||O.tag===3||O.tag===4}function eu(O){e:for(;;){for(;O.sibling===null;){if(O.return===null||ql(O.return))return null;O=O.return}for(O.sibling.return=O.return,O=O.sibling;O.tag!==5&&O.tag!==6&&O.tag!==18;){if(O.flags&2||O.child===null||O.tag===4)continue e;O.child.return=O,O=O.child}if(!(O.flags&2))return O.stateNode}}function xa(O,F,U){var H=O.tag;if(H===5||H===6)O=O.stateNode,F?U.nodeType===8?U.parentNode.insertBefore(O,F):U.insertBefore(O,F):(U.nodeType===8?(F=U.parentNode,F.insertBefore(O,U)):(F=U,F.appendChild(O)),U=U._reactRootContainer,U!=null||F.onclick!==null||(F.onclick=pr));else if(H!==4&&(O=O.child,O!==null))for(xa(O,F,U),O=O.sibling;O!==null;)xa(O,F,U),O=O.sibling}function Sa(O,F,U){var H=O.tag;if(H===5||H===6)O=O.stateNode,F?U.insertBefore(O,F):U.appendChild(O);else if(H!==4&&(O=O.child,O!==null))for(Sa(O,F,U),O=O.sibling;O!==null;)Sa(O,F,U),O=O.sibling}var ct=null,jt=!1;function Sn(O,F,U){for(U=U.child;U!==null;)tu(O,F,U),U=U.sibling}function tu(O,F,U){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Ki,U)}catch{}switch(U.tag){case 5:yt||ai(U,F);case 6:var H=ct,_=jt;ct=null,Sn(O,F,U),ct=H,jt=_,ct!==null&&(jt?(O=ct,U=U.stateNode,O.nodeType===8?O.parentNode.removeChild(U):O.removeChild(U)):ct.removeChild(U.stateNode));break;case 18:ct!==null&&(jt?(O=ct,U=U.stateNode,O.nodeType===8?Ls(O.parentNode,U):O.nodeType===1&&Ls(O,U),xi(O)):Ls(ct,U.stateNode));break;case 4:H=ct,_=jt,ct=U.stateNode.containerInfo,jt=!0,Sn(O,F,U),ct=H,jt=_;break;case 0:case 11:case 14:case 15:if(!yt&&(H=U.updateQueue,H!==null&&(H=H.lastEffect,H!==null))){_=H=H.next;do{var q=_,ie=q.destroy;q=q.tag,ie!==void 0&&(q&2||q&4)&&ga(U,F,ie),_=_.next}while(_!==H)}Sn(O,F,U);break;case 1:if(!yt&&(ai(U,F),H=U.stateNode,typeof H.componentWillUnmount=="function"))try{H.props=U.memoizedProps,H.state=U.memoizedState,H.componentWillUnmount()}catch(oe){it(U,F,oe)}Sn(O,F,U);break;case 21:Sn(O,F,U);break;case 22:U.mode&1?(yt=(H=yt)||U.memoizedState!==null,Sn(O,F,U),yt=H):Sn(O,F,U);break;default:Sn(O,F,U)}}function nu(O){var F=O.updateQueue;if(F!==null){O.updateQueue=null;var U=O.stateNode;U===null&&(U=O.stateNode=new qh),F.forEach(function(H){var _=hd.bind(null,O,H);U.has(H)||(U.add(H),H.then(_,_))})}}function Xt(O,F){var U=F.deletions;if(U!==null)for(var H=0;H<U.length;H++){var _=U[H];try{var q=O,ie=F,oe=ie;e:for(;oe!==null;){switch(oe.tag){case 5:ct=oe.stateNode,jt=!1;break e;case 3:ct=oe.stateNode.containerInfo,jt=!0;break e;case 4:ct=oe.stateNode.containerInfo,jt=!0;break e}oe=oe.return}if(ct===null)throw Error(n(160));tu(q,ie,_),ct=null,jt=!1;var le=_.alternate;le!==null&&(le.return=null),_.return=null}catch(me){it(_,F,me)}}if(F.subtreeFlags&12854)for(F=F.child;F!==null;)iu(F,O),F=F.sibling}function iu(O,F){var U=O.alternate,H=O.flags;switch(O.tag){case 0:case 11:case 14:case 15:if(Xt(F,O),_t(O),H&4){try{zi(3,O,O.return),Ur(3,O)}catch(Le){it(O,O.return,Le)}try{zi(5,O,O.return)}catch(Le){it(O,O.return,Le)}}break;case 1:Xt(F,O),_t(O),H&512&&U!==null&&ai(U,U.return);break;case 5:if(Xt(F,O),_t(O),H&512&&U!==null&&ai(U,U.return),O.flags&32){var _=O.stateNode;try{Xe(_,"")}catch(Le){it(O,O.return,Le)}}if(H&4&&(_=O.stateNode,_!=null)){var q=O.memoizedProps,ie=U!==null?U.memoizedProps:q,oe=O.type,le=O.updateQueue;if(O.updateQueue=null,le!==null)try{oe==="input"&&q.type==="radio"&&q.name!=null&&ye(_,q),Gt(oe,ie);var me=Gt(oe,q);for(ie=0;ie<le.length;ie+=2){var Ee=le[ie],Ce=le[ie+1];Ee==="style"?Qe(_,Ce):Ee==="dangerouslySetInnerHTML"?ke(_,Ce):Ee==="children"?Xe(_,Ce):y(_,Ee,Ce,me)}switch(oe){case"input":ve(_,q);break;case"textarea":Pe(_,q);break;case"select":var Te=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!q.multiple;var Re=q.value;Re!=null?Oe(_,!!q.multiple,Re,!1):Te!==!!q.multiple&&(q.defaultValue!=null?Oe(_,!!q.multiple,q.defaultValue,!0):Oe(_,!!q.multiple,q.multiple?[]:"",!1))}_[Ii]=q}catch(Le){it(O,O.return,Le)}}break;case 6:if(Xt(F,O),_t(O),H&4){if(O.stateNode===null)throw Error(n(162));_=O.stateNode,q=O.memoizedProps;try{_.nodeValue=q}catch(Le){it(O,O.return,Le)}}break;case 3:if(Xt(F,O),_t(O),H&4&&U!==null&&U.memoizedState.isDehydrated)try{xi(F.containerInfo)}catch(Le){it(O,O.return,Le)}break;case 4:Xt(F,O),_t(O);break;case 13:Xt(F,O),_t(O),_=O.child,_.flags&8192&&(q=_.memoizedState!==null,_.stateNode.isHidden=q,!q||_.alternate!==null&&_.alternate.memoizedState!==null||(Ca=rt())),H&4&&nu(O);break;case 22:if(Ee=U!==null&&U.memoizedState!==null,O.mode&1?(yt=(me=yt)||Ee,Xt(F,O),yt=me):Xt(F,O),_t(O),H&8192){if(me=O.memoizedState!==null,(O.stateNode.isHidden=me)&&!Ee&&O.mode&1)for(Me=O,Ee=O.child;Ee!==null;){for(Ce=Me=Ee;Me!==null;){switch(Te=Me,Re=Te.child,Te.tag){case 0:case 11:case 14:case 15:zi(4,Te,Te.return);break;case 1:ai(Te,Te.return);var Fe=Te.stateNode;if(typeof Fe.componentWillUnmount=="function"){H=Te,U=Te.return;try{F=H,Fe.props=F.memoizedProps,Fe.state=F.memoizedState,Fe.componentWillUnmount()}catch(Le){it(H,U,Le)}}break;case 5:ai(Te,Te.return);break;case 22:if(Te.memoizedState!==null){au(Ce);continue}}Re!==null?(Re.return=Te,Me=Re):au(Ce)}Ee=Ee.sibling}e:for(Ee=null,Ce=O;;){if(Ce.tag===5){if(Ee===null){Ee=Ce;try{_=Ce.stateNode,me?(q=_.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(oe=Ce.stateNode,le=Ce.memoizedProps.style,ie=le!=null&&le.hasOwnProperty("display")?le.display:null,oe.style.display=Ze("display",ie))}catch(Le){it(O,O.return,Le)}}}else if(Ce.tag===6){if(Ee===null)try{Ce.stateNode.nodeValue=me?"":Ce.memoizedProps}catch(Le){it(O,O.return,Le)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===O)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===O)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===O)break e;Ee===Ce&&(Ee=null),Ce=Ce.return}Ee===Ce&&(Ee=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:Xt(F,O),_t(O),H&4&&nu(O);break;case 21:break;default:Xt(F,O),_t(O)}}function _t(O){var F=O.flags;if(F&2){try{e:{for(var U=O.return;U!==null;){if(ql(U)){var H=U;break e}U=U.return}throw Error(n(160))}switch(H.tag){case 5:var _=H.stateNode;H.flags&32&&(Xe(_,""),H.flags&=-33);var q=eu(O);Sa(O,q,_);break;case 3:case 4:var ie=H.stateNode.containerInfo,oe=eu(O);xa(O,oe,ie);break;default:throw Error(n(161))}}catch(le){it(O,O.return,le)}O.flags&=-3}F&4096&&(O.flags&=-4097)}function td(O,F,U){Me=O,ru(O)}function ru(O,F,U){for(var H=(O.mode&1)!==0;Me!==null;){var _=Me,q=_.child;if(_.tag===22&&H){var ie=_.memoizedState!==null||Gr;if(!ie){var oe=_.alternate,le=oe!==null&&oe.memoizedState!==null||yt;oe=Gr;var me=yt;if(Gr=ie,(yt=le)&&!me)for(Me=_;Me!==null;)ie=Me,le=ie.child,ie.tag===22&&ie.memoizedState!==null?ou(_):le!==null?(le.return=ie,Me=le):ou(_);for(;q!==null;)Me=q,ru(q),q=q.sibling;Me=_,Gr=oe,yt=me}su(O)}else _.subtreeFlags&8772&&q!==null?(q.return=_,Me=q):su(O)}}function su(O){for(;Me!==null;){var F=Me;if(F.flags&8772){var U=F.alternate;try{if(F.flags&8772)switch(F.tag){case 0:case 11:case 15:yt||Ur(5,F);break;case 1:var H=F.stateNode;if(F.flags&4&&!yt)if(U===null)H.componentDidMount();else{var _=F.elementType===F.type?U.memoizedProps:Ht(F.type,U.memoizedProps);H.componentDidUpdate(_,U.memoizedState,H.__reactInternalSnapshotBeforeUpdate)}var q=F.updateQueue;q!==null&&al(F,q,H);break;case 3:var ie=F.updateQueue;if(ie!==null){if(U=null,F.child!==null)switch(F.child.tag){case 5:U=F.child.stateNode;break;case 1:U=F.child.stateNode}al(F,ie,U)}break;case 5:var oe=F.stateNode;if(U===null&&F.flags&4){U=oe;var le=F.memoizedProps;switch(F.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&U.focus();break;case"img":le.src&&(U.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(F.memoizedState===null){var me=F.alternate;if(me!==null){var Ee=me.memoizedState;if(Ee!==null){var Ce=Ee.dehydrated;Ce!==null&&xi(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}yt||F.flags&512&&ya(F)}catch(Te){it(F,F.return,Te)}}if(F===O){Me=null;break}if(U=F.sibling,U!==null){U.return=F.return,Me=U;break}Me=F.return}}function au(O){for(;Me!==null;){var F=Me;if(F===O){Me=null;break}var U=F.sibling;if(U!==null){U.return=F.return,Me=U;break}Me=F.return}}function ou(O){for(;Me!==null;){var F=Me;try{switch(F.tag){case 0:case 11:case 15:var U=F.return;try{Ur(4,F)}catch(le){it(F,U,le)}break;case 1:var H=F.stateNode;if(typeof H.componentDidMount=="function"){var _=F.return;try{H.componentDidMount()}catch(le){it(F,_,le)}}var q=F.return;try{ya(F)}catch(le){it(F,q,le)}break;case 5:var ie=F.return;try{ya(F)}catch(le){it(F,ie,le)}}}catch(le){it(F,F.return,le)}if(F===O){Me=null;break}var oe=F.sibling;if(oe!==null){oe.return=F.return,Me=oe;break}Me=F.return}}var nd=Math.ceil,$r=S.ReactCurrentDispatcher,Ta=S.ReactCurrentOwner,Dt=S.ReactCurrentBatchConfig,Ve=0,dt=null,at=null,pt=0,Ot=0,oi=vn(0),lt=0,Vi=null,Nn=0,kr=0,Ea=0,Wi=null,wt=null,Ca=0,li=1/0,on=null,zr=!1,wa=null,Tn=null,Vr=!1,En=null,Wr=0,Hi=0,ba=null,Hr=-1,jr=0;function St(){return Ve&6?rt():Hr!==-1?Hr:Hr=rt()}function Cn(O){return O.mode&1?Ve&2&&pt!==0?pt&-pt:$h.transition!==null?(jr===0&&(jr=qa()),jr):(O=Ye,O!==0||(O=window.event,O=O===void 0?16:lo(O.type)),O):1}function Yt(O,F,U,H){if(50<Hi)throw Hi=0,ba=null,Error(n(185));pi(O,U,H),(!(Ve&2)||O!==dt)&&(O===dt&&(!(Ve&2)&&(kr|=U),lt===4&&wn(O,pt)),bt(O,H),U===1&&Ve===0&&!(F.mode&1)&&(li=rt()+500,yr&&gn()))}function bt(O,F){var U=O.callbackNode;$u(O,F);var H=_i(O,O===dt?pt:0);if(H===0)U!==null&&Ka(U),O.callbackNode=null,O.callbackPriority=0;else if(F=H&-H,O.callbackPriority!==F){if(U!=null&&Ka(U),F===1)O.tag===0?Uh(uu.bind(null,O)):Zo(uu.bind(null,O)),Dh(function(){!(Ve&6)&&gn()}),U=null;else{switch(eo(H)){case 1:U=rs;break;case 4:U=Ja;break;case 16:U=Zi;break;case 536870912:U=Qa;break;default:U=Zi}U=gu(U,lu.bind(null,O))}O.callbackPriority=F,O.callbackNode=U}}function lu(O,F){if(Hr=-1,jr=0,Ve&6)throw Error(n(327));var U=O.callbackNode;if(ui()&&O.callbackNode!==U)return null;var H=_i(O,O===dt?pt:0);if(H===0)return null;if(H&30||H&O.expiredLanes||F)F=Xr(O,H);else{F=H;var _=Ve;Ve|=2;var q=du();(dt!==O||pt!==F)&&(on=null,li=rt()+500,Gn(O,F));do try{ad();break}catch(oe){hu(O,oe)}while(!0);Ws(),$r.current=q,Ve=_,at!==null?F=0:(dt=null,pt=0,F=lt)}if(F!==0){if(F===2&&(_=ss(O),_!==0&&(H=_,F=Pa(O,_))),F===1)throw U=Vi,Gn(O,0),wn(O,H),bt(O,rt()),U;if(F===6)wn(O,H);else{if(_=O.current.alternate,!(H&30)&&!rd(_)&&(F=Xr(O,H),F===2&&(q=ss(O),q!==0&&(H=q,F=Pa(O,q))),F===1))throw U=Vi,Gn(O,0),wn(O,H),bt(O,rt()),U;switch(O.finishedWork=_,O.finishedLanes=H,F){case 0:case 1:throw Error(n(345));case 2:Un(O,wt,on);break;case 3:if(wn(O,H),(H&130023424)===H&&(F=Ca+500-rt(),10<F)){if(_i(O,0)!==0)break;if(_=O.suspendedLanes,(_&H)!==H){St(),O.pingedLanes|=O.suspendedLanes&_;break}O.timeoutHandle=Fs(Un.bind(null,O,wt,on),F);break}Un(O,wt,on);break;case 4:if(wn(O,H),(H&4194240)===H)break;for(F=O.eventTimes,_=-1;0<H;){var ie=31-zt(H);q=1<<ie,ie=F[ie],ie>_&&(_=ie),H&=~q}if(H=_,H=rt()-H,H=(120>H?120:480>H?480:1080>H?1080:1920>H?1920:3e3>H?3e3:4320>H?4320:1960*nd(H/1960))-H,10<H){O.timeoutHandle=Fs(Un.bind(null,O,wt,on),H);break}Un(O,wt,on);break;case 5:Un(O,wt,on);break;default:throw Error(n(329))}}}return bt(O,rt()),O.callbackNode===U?lu.bind(null,O):null}function Pa(O,F){var U=Wi;return O.current.memoizedState.isDehydrated&&(Gn(O,F).flags|=256),O=Xr(O,F),O!==2&&(F=wt,wt=U,F!==null&&Aa(F)),O}function Aa(O){wt===null?wt=O:wt.push.apply(wt,O)}function rd(O){for(var F=O;;){if(F.flags&16384){var U=F.updateQueue;if(U!==null&&(U=U.stores,U!==null))for(var H=0;H<U.length;H++){var _=U[H],q=_.getSnapshot;_=_.value;try{if(!Vt(q(),_))return!1}catch{return!1}}}if(U=F.child,F.subtreeFlags&16384&&U!==null)U.return=F,F=U;else{if(F===O)break;for(;F.sibling===null;){if(F.return===null||F.return===O)return!0;F=F.return}F.sibling.return=F.return,F=F.sibling}}return!0}function wn(O,F){for(F&=~Ea,F&=~kr,O.suspendedLanes|=F,O.pingedLanes&=~F,O=O.expirationTimes;0<F;){var U=31-zt(F),H=1<<U;O[U]=-1,F&=~H}}function uu(O){if(Ve&6)throw Error(n(327));ui();var F=_i(O,0);if(!(F&1))return bt(O,rt()),null;var U=Xr(O,F);if(O.tag!==0&&U===2){var H=ss(O);H!==0&&(F=H,U=Pa(O,H))}if(U===1)throw U=Vi,Gn(O,0),wn(O,F),bt(O,rt()),U;if(U===6)throw Error(n(345));return O.finishedWork=O.current.alternate,O.finishedLanes=F,Un(O,wt,on),bt(O,rt()),null}function Ra(O,F){var U=Ve;Ve|=1;try{return O(F)}finally{Ve=U,Ve===0&&(li=rt()+500,yr&&gn())}}function Bn(O){En!==null&&En.tag===0&&!(Ve&6)&&ui();var F=Ve;Ve|=1;var U=Dt.transition,H=Ye;try{if(Dt.transition=null,Ye=1,O)return O()}finally{Ye=H,Dt.transition=U,Ve=F,!(Ve&6)&&gn()}}function Oa(){Ot=oi.current,qe(oi)}function Gn(O,F){O.finishedWork=null,O.finishedLanes=0;var U=O.timeoutHandle;if(U!==-1&&(O.timeoutHandle=-1,Lh(U)),at!==null)for(U=at.return;U!==null;){var H=U;switch(Us(H),H.tag){case 1:H=H.type.childContextTypes,H!=null&&mr();break;case 3:ri(),qe(Tt),qe(vt),Qs();break;case 5:Ks(H);break;case 4:ri();break;case 13:qe(tt);break;case 19:qe(tt);break;case 10:Hs(H.type._context);break;case 22:case 23:Oa()}U=U.return}if(dt=O,at=O=bn(O.current,null),pt=Ot=F,lt=0,Vi=null,Ea=kr=Nn=0,wt=Wi=null,Fn!==null){for(F=0;F<Fn.length;F++)if(U=Fn[F],H=U.interleaved,H!==null){U.interleaved=null;var _=H.next,q=U.pending;if(q!==null){var ie=q.next;q.next=_,H.next=ie}U.pending=H}Fn=null}return O}function hu(O,F){do{var U=at;try{if(Ws(),Or.current=Lr,Ir){for(var H=nt.memoizedState;H!==null;){var _=H.queue;_!==null&&(_.pending=null),H=H.next}Ir=!1}if(Dn=0,ht=ot=nt=null,Bi=!1,Gi=0,Ta.current=null,U===null||U.return===null){lt=1,Vi=F,at=null;break}e:{var q=O,ie=U.return,oe=U,le=F;if(F=pt,oe.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var me=le,Ee=oe,Ce=Ee.tag;if(!(Ee.mode&1)&&(Ce===0||Ce===11||Ce===15)){var Te=Ee.alternate;Te?(Ee.updateQueue=Te.updateQueue,Ee.memoizedState=Te.memoizedState,Ee.lanes=Te.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var Re=Nl(ie);if(Re!==null){Re.flags&=-257,Bl(Re,ie,oe,q,F),Re.mode&1&&Dl(q,me,F),F=Re,le=me;var Fe=F.updateQueue;if(Fe===null){var Le=new Set;Le.add(le),F.updateQueue=Le}else Fe.add(le);break e}else{if(!(F&1)){Dl(q,me,F),Ia();break e}le=Error(n(426))}}else if(et&&oe.mode&1){var st=Nl(ie);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Bl(st,ie,oe,q,F),zs(si(le,oe));break e}}q=le=si(le,oe),lt!==4&&(lt=2),Wi===null?Wi=[q]:Wi.push(q),q=ie;do{switch(q.tag){case 3:q.flags|=65536,F&=-F,q.lanes|=F;var ce=Fl(q,le,F);sl(q,ce);break e;case 1:oe=le;var he=q.type,pe=q.stateNode;if(!(q.flags&128)&&(typeof he.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Tn===null||!Tn.has(pe)))){q.flags|=65536,F&=-F,q.lanes|=F;var we=Ll(q,oe,F);sl(q,we);break e}}q=q.return}while(q!==null)}cu(U)}catch(De){F=De,at===U&&U!==null&&(at=U=U.return);continue}break}while(!0)}function du(){var O=$r.current;return $r.current=Lr,O===null?Lr:O}function Ia(){(lt===0||lt===3||lt===2)&&(lt=4),dt===null||!(Nn&268435455)&&!(kr&268435455)||wn(dt,pt)}function Xr(O,F){var U=Ve;Ve|=2;var H=du();(dt!==O||pt!==F)&&(on=null,Gn(O,F));do try{sd();break}catch(_){hu(O,_)}while(!0);if(Ws(),Ve=U,$r.current=H,at!==null)throw Error(n(261));return dt=null,pt=0,lt}function sd(){for(;at!==null;)fu(at)}function ad(){for(;at!==null&&!Iu();)fu(at)}function fu(O){var F=mu(O.alternate,O,Ot);O.memoizedProps=O.pendingProps,F===null?cu(O):at=F,Ta.current=null}function cu(O){var F=O;do{var U=F.alternate;if(O=F.return,F.flags&32768){if(U=_h(U,F),U!==null){U.flags&=32767,at=U;return}if(O!==null)O.flags|=32768,O.subtreeFlags=0,O.deletions=null;else{lt=6,at=null;return}}else if(U=Qh(U,F,Ot),U!==null){at=U;return}if(F=F.sibling,F!==null){at=F;return}at=F=O}while(F!==null);lt===0&&(lt=5)}function Un(O,F,U){var H=Ye,_=Dt.transition;try{Dt.transition=null,Ye=1,od(O,F,U,H)}finally{Dt.transition=_,Ye=H}return null}function od(O,F,U,H){do ui();while(En!==null);if(Ve&6)throw Error(n(327));U=O.finishedWork;var _=O.finishedLanes;if(U===null)return null;if(O.finishedWork=null,O.finishedLanes=0,U===O.current)throw Error(n(177));O.callbackNode=null,O.callbackPriority=0;var q=U.lanes|U.childLanes;if(ku(O,q),O===dt&&(at=dt=null,pt=0),!(U.subtreeFlags&2064)&&!(U.flags&2064)||Vr||(Vr=!0,gu(Zi,function(){return ui(),null})),q=(U.flags&15990)!==0,U.subtreeFlags&15990||q){q=Dt.transition,Dt.transition=null;var ie=Ye;Ye=1;var oe=Ve;Ve|=4,Ta.current=null,ed(O,U),iu(U,O),Ph(Is),tr=!!Os,Is=Os=null,O.current=U,td(U),Mu(),Ve=oe,Ye=ie,Dt.transition=q}else O.current=U;if(Vr&&(Vr=!1,En=O,Wr=_),q=O.pendingLanes,q===0&&(Tn=null),Du(U.stateNode),bt(O,rt()),F!==null)for(H=O.onRecoverableError,U=0;U<F.length;U++)_=F[U],H(_.value,{componentStack:_.stack,digest:_.digest});if(zr)throw zr=!1,O=wa,wa=null,O;return Wr&1&&O.tag!==0&&ui(),q=O.pendingLanes,q&1?O===ba?Hi++:(Hi=0,ba=O):Hi=0,gn(),null}function ui(){if(En!==null){var O=eo(Wr),F=Dt.transition,U=Ye;try{if(Dt.transition=null,Ye=16>O?16:O,En===null)var H=!1;else{if(O=En,En=null,Wr=0,Ve&6)throw Error(n(331));var _=Ve;for(Ve|=4,Me=O.current;Me!==null;){var q=Me,ie=q.child;if(Me.flags&16){var oe=q.deletions;if(oe!==null){for(var le=0;le<oe.length;le++){var me=oe[le];for(Me=me;Me!==null;){var Ee=Me;switch(Ee.tag){case 0:case 11:case 15:zi(8,Ee,q)}var Ce=Ee.child;if(Ce!==null)Ce.return=Ee,Me=Ce;else for(;Me!==null;){Ee=Me;var Te=Ee.sibling,Re=Ee.return;if(_l(Ee),Ee===me){Me=null;break}if(Te!==null){Te.return=Re,Me=Te;break}Me=Re}}}var Fe=q.alternate;if(Fe!==null){var Le=Fe.child;if(Le!==null){Fe.child=null;do{var st=Le.sibling;Le.sibling=null,Le=st}while(Le!==null)}}Me=q}}if(q.subtreeFlags&2064&&ie!==null)ie.return=q,Me=ie;else e:for(;Me!==null;){if(q=Me,q.flags&2048)switch(q.tag){case 0:case 11:case 15:zi(9,q,q.return)}var ce=q.sibling;if(ce!==null){ce.return=q.return,Me=ce;break e}Me=q.return}}var he=O.current;for(Me=he;Me!==null;){ie=Me;var pe=ie.child;if(ie.subtreeFlags&2064&&pe!==null)pe.return=ie,Me=pe;else e:for(ie=he;Me!==null;){if(oe=Me,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:Ur(9,oe)}}catch(De){it(oe,oe.return,De)}if(oe===ie){Me=null;break e}var we=oe.sibling;if(we!==null){we.return=oe.return,Me=we;break e}Me=oe.return}}if(Ve=_,gn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Ki,O)}catch{}H=!0}return H}finally{Ye=U,Dt.transition=F}}return!1}function pu(O,F,U){F=si(U,F),F=Fl(O,F,1),O=xn(O,F,1),F=St(),O!==null&&(pi(O,1,F),bt(O,F))}function it(O,F,U){if(O.tag===3)pu(O,O,U);else for(;F!==null;){if(F.tag===3){pu(F,O,U);break}else if(F.tag===1){var H=F.stateNode;if(typeof F.type.getDerivedStateFromError=="function"||typeof H.componentDidCatch=="function"&&(Tn===null||!Tn.has(H))){O=si(U,O),O=Ll(F,O,1),F=xn(F,O,1),O=St(),F!==null&&(pi(F,1,O),bt(F,O));break}}F=F.return}}function ld(O,F,U){var H=O.pingCache;H!==null&&H.delete(F),F=St(),O.pingedLanes|=O.suspendedLanes&U,dt===O&&(pt&U)===U&&(lt===4||lt===3&&(pt&130023424)===pt&&500>rt()-Ca?Gn(O,0):Ea|=U),bt(O,F)}function vu(O,F){F===0&&(O.mode&1?(F=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):F=1);var U=St();O=rn(O,F),O!==null&&(pi(O,F,U),bt(O,U))}function ud(O){var F=O.memoizedState,U=0;F!==null&&(U=F.retryLane),vu(O,U)}function hd(O,F){var U=0;switch(O.tag){case 13:var H=O.stateNode,_=O.memoizedState;_!==null&&(U=_.retryLane);break;case 19:H=O.stateNode;break;default:throw Error(n(314))}H!==null&&H.delete(F),vu(O,U)}var mu;mu=function(O,F,U){if(O!==null)if(O.memoizedProps!==F.pendingProps||Tt.current)Ct=!0;else{if(!(O.lanes&U)&&!(F.flags&128))return Ct=!1,Jh(O,F,U);Ct=!!(O.flags&131072)}else Ct=!1,et&&F.flags&1048576&&Ko(F,Sr,F.index);switch(F.lanes=0,F.tag){case 2:var H=F.type;Br(O,F),O=F.pendingProps;var _=Qn(F,vt.current);ii(F,U),_=ea(null,F,H,O,_,U);var q=ta();return F.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(F.tag=1,F.memoizedState=null,F.updateQueue=null,Et(H)?(q=!0,gr(F)):q=!1,F.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ys(F),_.updater=Dr,F.stateNode=_,_._reactInternals=F,oa(F,H,O,U),F=da(null,F,H,!0,q,U)):(F.tag=0,et&&q&&Gs(F),xt(null,F,_,U),F=F.child),F;case 16:H=F.elementType;e:{switch(Br(O,F),O=F.pendingProps,_=H._init,H=_(H._payload),F.type=H,_=F.tag=fd(H),O=Ht(H,O),_){case 0:F=ha(null,F,H,O,U);break e;case 1:F=Vl(null,F,H,O,U);break e;case 11:F=Gl(null,F,H,O,U);break e;case 14:F=Ul(null,F,H,Ht(H.type,O),U);break e}throw Error(n(306,H,""))}return F;case 0:return H=F.type,_=F.pendingProps,_=F.elementType===H?_:Ht(H,_),ha(O,F,H,_,U);case 1:return H=F.type,_=F.pendingProps,_=F.elementType===H?_:Ht(H,_),Vl(O,F,H,_,U);case 3:e:{if(Wl(F),O===null)throw Error(n(387));H=F.pendingProps,q=F.memoizedState,_=q.element,rl(O,F),Ar(F,H,null,U);var ie=F.memoizedState;if(H=ie.element,q.isDehydrated)if(q={element:H,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},F.updateQueue.baseState=q,F.memoizedState=q,F.flags&256){_=si(Error(n(423)),F),F=Hl(O,F,H,U,_);break e}else if(H!==_){_=si(Error(n(424)),F),F=Hl(O,F,H,U,_);break e}else for(Rt=pn(F.stateNode.containerInfo.firstChild),At=F,et=!0,Wt=null,U=nl(F,null,H,U),F.child=U;U;)U.flags=U.flags&-3|4096,U=U.sibling;else{if(ei(),H===_){F=an(O,F,U);break e}xt(O,F,H,U)}F=F.child}return F;case 5:return ol(F),O===null&&ks(F),H=F.type,_=F.pendingProps,q=O!==null?O.memoizedProps:null,ie=_.children,Ms(H,_)?ie=null:q!==null&&Ms(H,q)&&(F.flags|=32),zl(O,F),xt(O,F,ie,U),F.child;case 6:return O===null&&ks(F),null;case 13:return jl(O,F,U);case 4:return Zs(F,F.stateNode.containerInfo),H=F.pendingProps,O===null?F.child=ti(F,null,H,U):xt(O,F,H,U),F.child;case 11:return H=F.type,_=F.pendingProps,_=F.elementType===H?_:Ht(H,_),Gl(O,F,H,_,U);case 7:return xt(O,F,F.pendingProps,U),F.child;case 8:return xt(O,F,F.pendingProps.children,U),F.child;case 12:return xt(O,F,F.pendingProps.children,U),F.child;case 10:e:{if(H=F.type._context,_=F.pendingProps,q=F.memoizedProps,ie=_.value,Ke(Cr,H._currentValue),H._currentValue=ie,q!==null)if(Vt(q.value,ie)){if(q.children===_.children&&!Tt.current){F=an(O,F,U);break e}}else for(q=F.child,q!==null&&(q.return=F);q!==null;){var oe=q.dependencies;if(oe!==null){ie=q.child;for(var le=oe.firstContext;le!==null;){if(le.context===H){if(q.tag===1){le=sn(-1,U&-U),le.tag=2;var me=q.updateQueue;if(me!==null){me=me.shared;var Ee=me.pending;Ee===null?le.next=le:(le.next=Ee.next,Ee.next=le),me.pending=le}}q.lanes|=U,le=q.alternate,le!==null&&(le.lanes|=U),js(q.return,U,F),oe.lanes|=U;break}le=le.next}}else if(q.tag===10)ie=q.type===F.type?null:q.child;else if(q.tag===18){if(ie=q.return,ie===null)throw Error(n(341));ie.lanes|=U,oe=ie.alternate,oe!==null&&(oe.lanes|=U),js(ie,U,F),ie=q.sibling}else ie=q.child;if(ie!==null)ie.return=q;else for(ie=q;ie!==null;){if(ie===F){ie=null;break}if(q=ie.sibling,q!==null){q.return=ie.return,ie=q;break}ie=ie.return}q=ie}xt(O,F,_.children,U),F=F.child}return F;case 9:return _=F.type,H=F.pendingProps.children,ii(F,U),_=Ft(_),H=H(_),F.flags|=1,xt(O,F,H,U),F.child;case 14:return H=F.type,_=Ht(H,F.pendingProps),_=Ht(H.type,_),Ul(O,F,H,_,U);case 15:return $l(O,F,F.type,F.pendingProps,U);case 17:return H=F.type,_=F.pendingProps,_=F.elementType===H?_:Ht(H,_),Br(O,F),F.tag=1,Et(H)?(O=!0,gr(F)):O=!1,ii(F,U),Il(F,H,_),oa(F,H,_,U),da(null,F,H,!0,O,U);case 19:return Yl(O,F,U);case 22:return kl(O,F,U)}throw Error(n(156,F.tag))};function gu(O,F){return Za(O,F)}function dd(O,F,U,H){this.tag=O,this.key=U,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=F,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(O,F,U,H){return new dd(O,F,U,H)}function Ma(O){return O=O.prototype,!(!O||!O.isReactComponent)}function fd(O){if(typeof O=="function")return Ma(O)?1:0;if(O!=null){if(O=O.$$typeof,O===L)return 11;if(O===D)return 14}return 2}function bn(O,F){var U=O.alternate;return U===null?(U=Nt(O.tag,F,O.key,O.mode),U.elementType=O.elementType,U.type=O.type,U.stateNode=O.stateNode,U.alternate=O,O.alternate=U):(U.pendingProps=F,U.type=O.type,U.flags=0,U.subtreeFlags=0,U.deletions=null),U.flags=O.flags&14680064,U.childLanes=O.childLanes,U.lanes=O.lanes,U.child=O.child,U.memoizedProps=O.memoizedProps,U.memoizedState=O.memoizedState,U.updateQueue=O.updateQueue,F=O.dependencies,U.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext},U.sibling=O.sibling,U.index=O.index,U.ref=O.ref,U}function Yr(O,F,U,H,_,q){var ie=2;if(H=O,typeof O=="function")Ma(O)&&(ie=1);else if(typeof O=="string")ie=5;else e:switch(O){case P:return $n(U.children,_,q,F);case A:ie=8,_|=8;break;case R:return O=Nt(12,U,F,_|2),O.elementType=R,O.lanes=q,O;case N:return O=Nt(13,U,F,_),O.elementType=N,O.lanes=q,O;case G:return O=Nt(19,U,F,_),O.elementType=G,O.lanes=q,O;case $:return Zr(U,_,q,F);default:if(typeof O=="object"&&O!==null)switch(O.$$typeof){case I:ie=10;break e;case M:ie=9;break e;case L:ie=11;break e;case D:ie=14;break e;case B:ie=16,H=null;break e}throw Error(n(130,O==null?O:typeof O,""))}return F=Nt(ie,U,F,_),F.elementType=O,F.type=H,F.lanes=q,F}function $n(O,F,U,H){return O=Nt(7,O,H,F),O.lanes=U,O}function Zr(O,F,U,H){return O=Nt(22,O,H,F),O.elementType=$,O.lanes=U,O.stateNode={isHidden:!1},O}function Fa(O,F,U){return O=Nt(6,O,null,F),O.lanes=U,O}function La(O,F,U){return F=Nt(4,O.children!==null?O.children:[],O.key,F),F.lanes=U,F.stateNode={containerInfo:O.containerInfo,pendingChildren:null,implementation:O.implementation},F}function cd(O,F,U,H,_){this.tag=F,this.containerInfo=O,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=as(0),this.expirationTimes=as(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.identifierPrefix=H,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Da(O,F,U,H,_,q,ie,oe,le){return O=new cd(O,F,U,oe,le),F===1?(F=1,q===!0&&(F|=8)):F=0,q=Nt(3,null,null,F),O.current=q,q.stateNode=O,q.memoizedState={element:H,isDehydrated:U,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ys(q),O}function pd(O,F,U){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:H==null?null:""+H,children:O,containerInfo:F,implementation:U}}function yu(O){if(!O)return mn;O=O._reactInternals;e:{if(An(O)!==O||O.tag!==1)throw Error(n(170));var F=O;do{switch(F.tag){case 3:F=F.stateNode.context;break e;case 1:if(Et(F.type)){F=F.stateNode.__reactInternalMemoizedMergedChildContext;break e}}F=F.return}while(F!==null);throw Error(n(171))}if(O.tag===1){var U=O.type;if(Et(U))return Xo(O,U,F)}return F}function xu(O,F,U,H,_,q,ie,oe,le){return O=Da(U,H,!0,O,_,q,ie,oe,le),O.context=yu(null),U=O.current,H=St(),_=Cn(U),q=sn(H,_),q.callback=F??null,xn(U,q,_),O.current.lanes=_,pi(O,_,H),bt(O,H),O}function Kr(O,F,U,H){var _=F.current,q=St(),ie=Cn(_);return U=yu(U),F.context===null?F.context=U:F.pendingContext=U,F=sn(q,ie),F.payload={element:O},H=H===void 0?null:H,H!==null&&(F.callback=H),O=xn(_,F,ie),O!==null&&(Yt(O,_,ie,q),Pr(O,_,ie)),ie}function Jr(O){if(O=O.current,!O.child)return null;switch(O.child.tag){case 5:return O.child.stateNode;default:return O.child.stateNode}}function Su(O,F){if(O=O.memoizedState,O!==null&&O.dehydrated!==null){var U=O.retryLane;O.retryLane=U!==0&&U<F?U:F}}function Na(O,F){Su(O,F),(O=O.alternate)&&Su(O,F)}function vd(){return null}var Tu=typeof reportError=="function"?reportError:function(O){console.error(O)};function Ba(O){this._internalRoot=O}Qr.prototype.render=Ba.prototype.render=function(O){var F=this._internalRoot;if(F===null)throw Error(n(409));Kr(O,F,null,null)},Qr.prototype.unmount=Ba.prototype.unmount=function(){var O=this._internalRoot;if(O!==null){this._internalRoot=null;var F=O.containerInfo;Bn(function(){Kr(null,O,null,null)}),F[qt]=null}};function Qr(O){this._internalRoot=O}Qr.prototype.unstable_scheduleHydration=function(O){if(O){var F=io();O={blockedOn:null,target:O,priority:F};for(var U=0;U<dn.length&&F!==0&&F<dn[U].priority;U++);dn.splice(U,0,O),U===0&&ao(O)}};function Ga(O){return!(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11)}function _r(O){return!(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11&&(O.nodeType!==8||O.nodeValue!==" react-mount-point-unstable "))}function Eu(){}function md(O,F,U,H,_){if(_){if(typeof H=="function"){var q=H;H=function(){var me=Jr(ie);q.call(me)}}var ie=xu(F,H,O,0,null,!1,!1,"",Eu);return O._reactRootContainer=ie,O[qt]=ie.current,Ri(O.nodeType===8?O.parentNode:O),Bn(),ie}for(;_=O.lastChild;)O.removeChild(_);if(typeof H=="function"){var oe=H;H=function(){var me=Jr(le);oe.call(me)}}var le=Da(O,0,!1,null,null,!1,!1,"",Eu);return O._reactRootContainer=le,O[qt]=le.current,Ri(O.nodeType===8?O.parentNode:O),Bn(function(){Kr(F,le,U,H)}),le}function qr(O,F,U,H,_){var q=U._reactRootContainer;if(q){var ie=q;if(typeof _=="function"){var oe=_;_=function(){var le=Jr(ie);oe.call(le)}}Kr(F,ie,O,_)}else ie=md(U,F,O,_,H);return Jr(ie)}to=function(O){switch(O.tag){case 3:var F=O.stateNode;if(F.current.memoizedState.isDehydrated){var U=ci(F.pendingLanes);U!==0&&(os(F,U|1),bt(F,rt()),!(Ve&6)&&(li=rt()+500,gn()))}break;case 13:Bn(function(){var H=rn(O,1);if(H!==null){var _=St();Yt(H,O,1,_)}}),Na(O,1)}},ls=function(O){if(O.tag===13){var F=rn(O,134217728);if(F!==null){var U=St();Yt(F,O,134217728,U)}Na(O,134217728)}},no=function(O){if(O.tag===13){var F=Cn(O),U=rn(O,F);if(U!==null){var H=St();Yt(U,O,F,H)}Na(O,F)}},io=function(){return Ye},ro=function(O,F){var U=Ye;try{return Ye=O,F()}finally{Ye=U}},kt=function(O,F,U){switch(F){case"input":if(ve(O,U),F=U.name,U.type==="radio"&&F!=null){for(U=O;U.parentNode;)U=U.parentNode;for(U=U.querySelectorAll("input[name="+JSON.stringify(""+F)+'][type="radio"]'),F=0;F<U.length;F++){var H=U[F];if(H!==O&&H.form===O.form){var _=vr(H);if(!_)throw Error(n(90));ae(H),ve(H,_)}}}break;case"textarea":Pe(O,U);break;case"select":F=U.value,F!=null&&Oe(O,!!U.multiple,F,!1)}},za=Ra,Va=Bn;var gd={usingClientEntryPoint:!1,Events:[Mi,Kn,vr,$a,ka,Ra]},ji={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yd={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(O){return O=Xa(O),O===null?null:O.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||vd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!es.isDisabled&&es.supportsFiber)try{Ki=es.inject(yd),Zt=es}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gd,reactDom_production_min.createPortal=function(O,F){var U=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ga(F))throw Error(n(200));return pd(O,F,null,U)},reactDom_production_min.createRoot=function(O,F){if(!Ga(O))throw Error(n(299));var U=!1,H="",_=Tu;return F!=null&&(F.unstable_strictMode===!0&&(U=!0),F.identifierPrefix!==void 0&&(H=F.identifierPrefix),F.onRecoverableError!==void 0&&(_=F.onRecoverableError)),F=Da(O,1,!1,null,null,U,!1,H,_),O[qt]=F.current,Ri(O.nodeType===8?O.parentNode:O),new Ba(F)},reactDom_production_min.findDOMNode=function(O){if(O==null)return null;if(O.nodeType===1)return O;var F=O._reactInternals;if(F===void 0)throw typeof O.render=="function"?Error(n(188)):(O=Object.keys(O).join(","),Error(n(268,O)));return O=Xa(F),O=O===null?null:O.stateNode,O},reactDom_production_min.flushSync=function(O){return Bn(O)},reactDom_production_min.hydrate=function(O,F,U){if(!_r(F))throw Error(n(200));return qr(null,O,F,!0,U)},reactDom_production_min.hydrateRoot=function(O,F,U){if(!Ga(O))throw Error(n(405));var H=U!=null&&U.hydratedSources||null,_=!1,q="",ie=Tu;if(U!=null&&(U.unstable_strictMode===!0&&(_=!0),U.identifierPrefix!==void 0&&(q=U.identifierPrefix),U.onRecoverableError!==void 0&&(ie=U.onRecoverableError)),F=xu(F,null,O,1,U??null,_,!1,q,ie),O[qt]=F.current,Ri(O),H)for(O=0;O<H.length;O++)U=H[O],_=U._getVersion,_=_(U._source),F.mutableSourceEagerHydrationData==null?F.mutableSourceEagerHydrationData=[U,_]:F.mutableSourceEagerHydrationData.push(U,_);return new Qr(F)},reactDom_production_min.render=function(O,F,U){if(!_r(F))throw Error(n(200));return qr(null,O,F,!1,U)},reactDom_production_min.unmountComponentAtNode=function(O){if(!_r(O))throw Error(n(40));return O._reactRootContainer?(Bn(function(){qr(null,null,O,!1,function(){O._reactRootContainer=null,O[qt]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Ra,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(O,F,U,H){if(!_r(U))throw Error(n(200));if(O==null||O._reactInternals===void 0)throw Error(n(38));return qr(O,F,U,!1,H)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client$1;hasRequiredClient=1;var m=requireReactDom();return client$1.createRoot=m.createRoot,client$1.hydrateRoot=m.hydrateRoot,client$1}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var phaser$1={exports:{}},phaser=phaser$1.exports,hasRequiredPhaser;function requirePhaser(){return hasRequiredPhaser||(hasRequiredPhaser=1,function(m,t){(function(p,C){m.exports=C()})(phaser,()=>(()=>{var n={50792:o=>{var E=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function x(s,l,v){this.fn=s,this.context=l,this.once=v||!1}function c(s,l,v,d,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var y=new x(v,d||s,g),S=e?e+l:l;return s._events[S]?s._events[S].fn?s._events[S]=[s._events[S],y]:s._events[S].push(y):(s._events[S]=y,s._eventsCount++),s}function u(s,l){--s._eventsCount===0?s._events=new a:delete s._events[l]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var l=[],v,d;if(this._eventsCount===0)return l;for(d in v=this._events)E.call(v,d)&&l.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(v)):l},h.prototype.listeners=function(l){var v=e?e+l:l,d=this._events[v];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,y=d.length,S=new Array(y);g<y;g++)S[g]=d[g].fn;return S},h.prototype.listenerCount=function(l){var v=e?e+l:l,d=this._events[v];return d?d.fn?1:d.length:0},h.prototype.emit=function(l,v,d,g,y,S){var T=e?e+l:l;if(!this._events[T])return!1;var w=this._events[T],P=arguments.length,A,R;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),P){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,v),!0;case 3:return w.fn.call(w.context,v,d),!0;case 4:return w.fn.call(w.context,v,d,g),!0;case 5:return w.fn.call(w.context,v,d,g,y),!0;case 6:return w.fn.call(w.context,v,d,g,y,S),!0}for(R=1,A=new Array(P-1);R<P;R++)A[R-1]=arguments[R];w.fn.apply(w.context,A)}else{var I=w.length,M;for(R=0;R<I;R++)switch(w[R].once&&this.removeListener(l,w[R].fn,void 0,!0),P){case 1:w[R].fn.call(w[R].context);break;case 2:w[R].fn.call(w[R].context,v);break;case 3:w[R].fn.call(w[R].context,v,d);break;case 4:w[R].fn.call(w[R].context,v,d,g);break;default:if(!A)for(M=1,A=new Array(P-1);M<P;M++)A[M-1]=arguments[M];w[R].fn.apply(w[R].context,A)}}return!0},h.prototype.on=function(l,v,d){return c(this,l,v,d,!1)},h.prototype.once=function(l,v,d){return c(this,l,v,d,!0)},h.prototype.removeListener=function(l,v,d,g){var y=e?e+l:l;if(!this._events[y])return this;if(!v)return u(this,y),this;var S=this._events[y];if(S.fn)S.fn===v&&(!g||S.once)&&(!d||S.context===d)&&u(this,y);else{for(var T=0,w=[],P=S.length;T<P;T++)(S[T].fn!==v||g&&!S[T].once||d&&S[T].context!==d)&&w.push(S[T]);w.length?this._events[y]=w.length===1?w[0]:w:u(this,y)}return this},h.prototype.removeAllListeners=function(l){var v;return l?(v=e?e+l:l,this._events[v]&&u(this,v)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,o.exports=h},11517:(o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38829),x=function(c,u,h,s){for(var l=c[0],v=1;v<c.length;v++){var d=c[v];a(d,l,u,h,s),l=d}return c};o.exports=x},80318:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"angle",u,h,s,l)};o.exports=x},60757:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var c=0;c<e.length;c++){var u=e[c];a.call(x,u)}return e};o.exports=E},69927:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=0);for(var c=x;c<e.length;c++){var u=e[c],h=!0;for(var s in a)u[s]!==a[s]&&(h=!1);if(h)return u}return null};o.exports=E},32265:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=0);for(var c=e.length-1;c>=x;c--){var u=e[c],h=!0;for(var s in a)u[s]!==a[s]&&(h=!1);if(h)return u}return null};o.exports=E},94420:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11879),x=e(60461),c=e(95540),u=e(29747),h=e(41481),s=new h({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0),l=function(v,d){d===void 0&&(d={});var g=d.hasOwnProperty("width"),y=d.hasOwnProperty("height"),S=c(d,"width",-1),T=c(d,"height",-1),w=c(d,"cellWidth",1),P=c(d,"cellHeight",w),A=c(d,"position",x.TOP_LEFT),R=c(d,"x",0),I=c(d,"y",0),M=0,L=0,N=S*w,G=T*P;s.setPosition(R,I),s.setSize(w,P);for(var D=0;D<v.length;D++)if(a(v[D],s,A),g&&S===-1)s.x+=w;else if(y&&T===-1)s.y+=P;else if(y&&!g){if(L+=P,s.y+=P,L===G&&(L=0,M+=w,s.y=I,s.x+=w,M===N))break}else if(M+=w,s.x+=w,M===N&&(M=0,L+=P,s.x=R,s.y+=P,L===G))break;return v};o.exports=l},41721:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"alpha",u,h,s,l)};o.exports=x},67285:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"x",u,h,s,l)};o.exports=x},9074:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"x",u,s,v,d),a(c,"y",h,l,v,d)};o.exports=x},75222:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"y",u,h,s,l)};o.exports=x},22983:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x===void 0&&(x=0),c===void 0&&(c=6.28);for(var u=x,h=(c-x)/e.length,s=a.x,l=a.y,v=a.radius,d=0;d<e.length;d++)e[d].x=s+v*Math.cos(u),e[d].y=l+v*Math.sin(u),u+=h;return e};o.exports=E},95253:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x===void 0&&(x=0),c===void 0&&(c=6.28);for(var u=x,h=(c-x)/e.length,s=a.width/2,l=a.height/2,v=0;v<e.length;v++)e[v].x=a.x+s*Math.cos(u),e[v].y=a.y+l*Math.sin(u),u+=h;return e};o.exports=E},88505:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15258),x=e(26708),c=function(u,h,s){var l;s?l=x(h,s,u.length):l=a(h,u.length);for(var v=0;v<u.length;v++){var d=u[v],g=l[v];d.x=g.x,d.y=g.y}return u};o.exports=c},41346:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14649),x=e(86003),c=e(49498),u=function(h,s,l){l===void 0&&(l=0);var v=a(s,!1,h.length);l>0?x(v,l):l<0&&c(v,Math.abs(l));for(var d=0;d<h.length;d++)h[d].x=v[d].x,h[d].y=v[d].y;return h};o.exports=u},11575:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84993),x=function(c,u,h){var s=a({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},h),l=a({x1:u.x2,y1:u.y2,x2:u.x3,y2:u.y3},h),v=a({x1:u.x3,y1:u.y3,x2:u.x1,y2:u.y1},h);s.pop(),l.pop(),v.pop(),s=s.concat(l,v);for(var d=s.length/c.length,g=0,y=0;y<c.length;y++){var S=c[y],T=s[Math.floor(g)];S.x=T.x,S.y=T.y,g+=d}return c};o.exports=x},29953:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var c=0;c<e.length;c++){var u=e[c];u.anims&&u.anims.play(a,x)}return e};o.exports=E},66979:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h){c===void 0&&(c=0),u===void 0&&(u=0),h===void 0&&(h=1);var s,l=0,v=e.length;if(h===1)for(s=u;s<v;s++)e[s][a]+=x+l*c,l++;else for(s=u;s>=0;s--)e[s][a]+=x+l*c,l++;return e};o.exports=E},43967:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h){c===void 0&&(c=0),u===void 0&&(u=0),h===void 0&&(h=1);var s,l=0,v=e.length;if(h===1)for(s=u;s<v;s++)e[s][a]=x+l*c,l++;else for(s=u;s>=0;s--)e[s][a]=x+l*c,l++;return e};o.exports=E},88926:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28176),x=function(c,u){for(var h=0;h<c.length;h++)a(u,c[h]);return c};o.exports=x},33286:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(24820),x=function(c,u){for(var h=0;h<c.length;h++)a(u,c[h]);return c};o.exports=x},96e3:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65822),x=function(c,u){for(var h=0;h<c.length;h++)a(u,c[h]);return c};o.exports=x},28789:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26597),x=function(c,u){for(var h=0;h<c.length;h++)a(u,c[h]);return c};o.exports=x},97154:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90260),x=function(c,u){for(var h=0;h<c.length;h++)a(u,c[h]);return c};o.exports=x},20510:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"rotation",u,h,s,l)};o.exports=x},91051:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),x=e(20339),c=function(u,h,s){for(var l=h.x,v=h.y,d=0;d<u.length;d++){var g=u[d];a(g,l,v,s,Math.max(1,x(g.x,g.y,l,v)))}return u};o.exports=c},76332:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),x=function(c,u,h,s){var l=u.x,v=u.y;if(s===0)return c;for(var d=0;d<c.length;d++)a(c[d],l,v,h,s);return c};o.exports=x},61619:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"scaleX",u,h,s,l)};o.exports=x},94868:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"scaleX",u,s,v,d),a(c,"scaleY",h,l,v,d)};o.exports=x},95532:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(c,u,h,s,l){return a(c,"scaleY",u,h,s,l)};o.exports=x},8689:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"alpha",u,h,s,l)};o.exports=x},2645:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s){return a(c,"blendMode",u,0,h,s)};o.exports=x},32372:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"depth",u,h,s,l)};o.exports=x},85373:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var c=0;c<e.length;c++)e[c].setInteractive(a,x);return e};o.exports=E},81583:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"originX",u,s,v,d),a(c,"originY",h,l,v,d),c.forEach(function(g){g.updateDisplayOrigin()}),c};o.exports=x},79939:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"rotation",u,h,s,l)};o.exports=x},2699:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"scaleX",u,s,v,d),a(c,"scaleY",h,l,v,d)};o.exports=x},98739:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"scaleX",u,h,s,l)};o.exports=x},98476:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"scaleY",u,h,s,l)};o.exports=x},6207:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"scrollFactorX",u,s,v,d),a(c,"scrollFactorY",h,l,v,d)};o.exports=x},6607:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"scrollFactorX",u,h,s,l)};o.exports=x},72248:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"scrollFactorY",u,h,s,l)};o.exports=x},14036:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){for(var h=0;h<e.length;h++)e[h].setTint(a,x,c,u);return e};o.exports=E},50159:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s){return a(c,"visible",u,0,h,s)};o.exports=x},77597:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"x",u,h,s,l)};o.exports=x},83194:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l,v,d){return h==null&&(h=u),a(c,"x",u,s,v,d),a(c,"y",h,l,v,d)};o.exports=x},67678:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(c,u,h,s,l){return a(c,"y",u,h,s,l)};o.exports=x},35850:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l){s===void 0&&(s=0),l===void 0&&(l=new a);var v,d,g=c.length;if(g===1)v=c[0].x,d=c[0].y,c[0].x=u,c[0].y=h;else{var y=1,S=0;s===0&&(S=g-1,y=g-2),v=c[S].x,d=c[S].y,c[S].x=u,c[S].y=h;for(var T=0;T<g;T++)if(!(y>=g||y===-1)){var w=c[y],P=w.x,A=w.y;w.x=v,w.y=d,v=P,d=A,s===0?y--:y++}}return l.x=v,l.y=d,l};o.exports=x},8628:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33680),x=function(c){return a(c)};o.exports=x},21837:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),x=function(c,u,h,s,l){l===void 0&&(l=!1);var v=Math.abs(s-h)/c.length,d;if(l)for(d=0;d<c.length;d++)c[d][u]+=a(d*v,h,s);else for(d=0;d<c.length;d++)c[d][u]=a(d*v,h,s);return c};o.exports=x},21910:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),x=function(c,u,h,s,l){l===void 0&&(l=!1);var v=Math.abs(s-h)/c.length,d;if(l)for(d=0;d<c.length;d++)c[d][u]+=a(d*v,h,s);else for(d=0;d<c.length;d++)c[d][u]=a(d*v,h,s);return c};o.exports=x},62054:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){if(u===void 0&&(u=!1),e.length===0)return e;if(e.length===1)return u?e[0][a]+=(c+x)/2:e[0][a]=(c+x)/2,e;var h=Math.abs(c-x)/(e.length-1),s;if(u)for(s=0;s<e.length;s++)e[s][a]+=s*h+x;else for(s=0;s<e.length;s++)e[s][a]=s*h+x;return e};o.exports=E},79815:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0;a<e.length;a++)e[a].visible=!e[a].visible;return e};o.exports=E},39665:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(c,u,h){h===void 0&&(h=0);for(var s=0;s<c.length;s++){var l=c[s];l.x=a(l.x,u.left-h,u.right+h),l.y=a(l.y,u.top-h,u.bottom+h)}return c};o.exports=x},61061:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}},42099:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(74943),u=e(81957),h=e(41138),s=e(35154),l=e(90126),v=new x({initialize:function(g,y,S){this.manager=g,this.key=y,this.type="frame",this.frames=this.getFrames(g.textureManager,s(S,"frames",[]),s(S,"defaultTextureKey",null),s(S,"sortFrames",!0)),this.frameRate=s(S,"frameRate",null),this.duration=s(S,"duration",null),this.msPerFrame,this.skipMissedFrames=s(S,"skipMissedFrames",!0),this.delay=s(S,"delay",0),this.repeat=s(S,"repeat",0),this.repeatDelay=s(S,"repeatDelay",0),this.yoyo=s(S,"yoyo",!1),this.showBeforeDelay=s(S,"showBeforeDelay",!1),this.showOnStart=s(S,"showOnStart",!1),this.hideOnComplete=s(S,"hideOnComplete",!1),this.randomFrame=s(S,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(c.PAUSE_ALL,this.pause,this),this.manager.on(c.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,g,y,S){y===null&&S===null?(d.frameRate=24,d.duration=24/g*1e3):y&&S===null?(d.duration=y,d.frameRate=g/(y/1e3)):(d.frameRate=S,d.duration=g/S*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,g){var y=this.getFrames(this.manager.textureManager,g);if(y.length>0){if(d===0)this.frames=y.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(y);else{var S=this.frames.slice(0,d),T=this.frames.slice(d);this.frames=S.concat(y,T)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.currentFrame.duration?d.currentFrame.duration:d.msPerFrame},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,g,y,S){S===void 0&&(S=!0);var T=[],w,P,A=1,R,I;if(typeof g=="string"){if(I=g,!d.exists(I))return console.warn('Texture "%s" not found',I),T;var M=d.get(I),L=M.getFrameNames();S&&l(L),g=[],L.forEach(function(k){g.push({key:I,frame:k})})}if(!Array.isArray(g)||g.length===0)return T;for(R=0;R<g.length;R++){var N=g[R],G=s(N,"key",y);if(G){var D=s(N,"frame",0),B=d.getFrame(G,D);if(!B){console.warn('Texture "%s" not found',G);continue}P=new h(G,D,A,B),P.duration=s(N,"duration",0),P.isFirst=!w,w&&(w.nextFrame=P,P.prevFrame=w),T.push(P),w=P,A++}}if(T.length>0){P.isLast=!0,P.nextFrame=T[0],T[0].prevFrame=P;var $=1/(T.length-1);for(R=0;R<T.length;R++)T[R].progress=R*$}return T},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.currentFrame.duration?d.currentFrame.duration:d.msPerFrame},getFrameByProgress:function(d){return d=a(d,0,1),u(d,this.frames,"progress")},nextFrame:function(d){var g=d.currentFrame;g.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,g.nextFrame)},handleYoyoFrame:function(d,g){if(g||(g=!1),d.inReverse===!g&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=g),this.repeatAnimation(d);return}if(d.inReverse!==g&&d.repeatCounter===0){d.complete();return}d.forward=g;var y=g?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,y)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var g=d.currentFrame;g.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,g.prevFrame)},updateAndGetNextTick:function(d,g){d.setCurrentFrame(g),this.getNextTick(d)},removeFrame:function(d){var g=this.frames.indexOf(d);return g!==-1&&this.removeFrameAt(g),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(g){d.frames.push(g.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,g=1/(d-1),y,S=0;S<d;S++)y=this.frames[S],y.index=S+1,y.isFirst=!1,y.isLast=!1,y.progress=S*g,S===0?(y.isFirst=!0,d===1?(y.isLast=!0,y.nextFrame=y,y.prevFrame=y):(y.isLast=!1,y.prevFrame=this.frames[d-1],y.nextFrame=this.frames[S+1])):S===d-1&&d>1?(y.isLast=!0,y.prevFrame=this.frames[d-2],y.nextFrame=this.frames[0]):d>1&&(y.prevFrame=this.frames[S-1],y.nextFrame=this.frames[S+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(c.PAUSE_ALL,this.pause,this),this.manager.off(c.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});o.exports=v},41138:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l,v){v===void 0&&(v=!1),this.textureKey=u,this.textureFrame=h,this.index=s,this.frame=l,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});o.exports=x},60848:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),x=e(83419),c=e(90330),u=e(50792),h=e(74943),s=e(8443),l=e(95540),v=e(35154),d=e(36383),g=e(20283),y=e(41836),S=new x({Extends:u,initialize:function(w){u.call(this),this.game=w,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.mixes=new c,this.paused=!1,this.name="AnimationManager",w.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},addMix:function(T,w,P){var A=this.anims,R=this.mixes,I=typeof T=="string"?T:T.key,M=typeof w=="string"?w:w.key;if(A.has(I)&&A.has(M)){var L=R.get(I);L||(L={}),L[M]=P,R.set(I,L)}return this},removeMix:function(T,w){var P=this.mixes,A=typeof T=="string"?T:T.key,R=P.get(A);if(R)if(w){var I=typeof w=="string"?w:w.key;R.hasOwnProperty(I)&&delete R[I]}else w||P.delete(A);return this},getMix:function(T,w){var P=this.mixes,A=typeof T=="string"?T:T.key,R=typeof w=="string"?w:w.key,I=P.get(A);return I&&I.hasOwnProperty(R)?I[R]:0},add:function(T,w){return this.anims.has(T)?(console.warn("Animation key exists: "+T),this):(w.key=T,this.anims.set(T,w),this.emit(h.ADD_ANIMATION,T,w),this)},exists:function(T){return this.anims.has(T)},createFromAseprite:function(T,w,P){var A=[],R=this.game.cache.json.get(T);if(!R)return console.warn("No Aseprite data found for: "+T),A;var I=this,M=v(R,"meta",null),L=v(R,"frames",null);if(M&&L){var N=v(M,"frameTags",[]);N.forEach(function(G){var D=[],B=l(G,"name",null),$=l(G,"from",0),k=l(G,"to",0),X=l(G,"direction","forward");if(B&&(!w||w&&w.indexOf(B)>-1)){for(var Y=0,Z=$;Z<=k;Z++){var Q=Z.toString(),j=L[Q];if(j){var K=l(j,"duration",d.MAX_SAFE_INTEGER);D.push({key:T,frame:Q,duration:K}),Y+=K}}X==="reverse"&&(D=D.reverse());var W={key:B,frames:D,duration:Y,yoyo:X==="pingpong"},V;P?P.anims&&(V=P.anims.create(W)):V=I.create(W),V&&A.push(V)}})}return A},create:function(T){var w=T.key,P=!1;return w&&(P=this.get(w),P?console.warn("AnimationManager key already exists: "+w):(P=new a(this,w,T),this.anims.set(w,P),this.emit(h.ADD_ANIMATION,w,P))),P},fromJSON:function(T,w){w===void 0&&(w=!1),w&&this.anims.clear(),typeof T=="string"&&(T=JSON.parse(T));var P=[];if(T.hasOwnProperty("anims")&&Array.isArray(T.anims)){for(var A=0;A<T.anims.length;A++)P.push(this.create(T.anims[A]));T.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=T.globalTimeScale)}else T.hasOwnProperty("key")&&T.type==="frame"&&P.push(this.create(T));return P},generateFrameNames:function(T,w){var P=v(w,"prefix",""),A=v(w,"start",0),R=v(w,"end",0),I=v(w,"suffix",""),M=v(w,"zeroPad",0),L=v(w,"outputArray",[]),N=v(w,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),L;var G=this.textureManager.get(T);if(!G)return L;var D;if(w)for(N||(N=g(A,R)),D=0;D<N.length;D++){var B=P+y(N[D],M,"0",1)+I;G.has(B)?L.push({key:T,frame:B}):console.warn('Frame "%s" not found in texture "%s"',B,T)}else for(N=G.getFrameNames(),D=0;D<N.length;D++)L.push({key:T,frame:N[D]});return L},generateFrameNumbers:function(T,w){var P=v(w,"start",0),A=v(w,"end",-1),R=v(w,"first",!1),I=v(w,"outputArray",[]),M=v(w,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),I;var L=this.textureManager.get(T);if(!L)return I;R&&L.has(R)&&I.push({key:T,frame:R}),M||(A===-1&&(A=L.frameTotal-2),M=g(P,A));for(var N=0;N<M.length;N++){var G=M[N];L.has(G)?I.push({key:T,frame:G}):console.warn('Frame "%s" not found in texture "%s"',G,T)}return I},get:function(T){return this.anims.get(T)},getAnimsFromTexture:function(T){for(var w=this.textureManager.get(T),P=w.key,A=this.anims.getArray(),R=[],I=0;I<A.length;I++)for(var M=A[I],L=M.frames,N=0;N<L.length;N++)if(L[N].textureKey===P){R.push(M.key);break}return R},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(T,w){Array.isArray(w)||(w=[w]);for(var P=0;P<w.length;P++)w[P].anims.play(T);return this},staggerPlay:function(T,w,P,A){P===void 0&&(P=0),A===void 0&&(A=!0),Array.isArray(w)||(w=[w]);var R=w.length;A||R--;for(var I=0;I<w.length;I++){var M=P<0?Math.abs(P)*(R-I):P*I;w[I].anims.playAfterDelay(T,M)}return this},remove:function(T){var w=this.get(T);return w&&(this.emit(h.REMOVE_ANIMATION,T,w),this.anims.delete(T),this.removeMix(T)),w},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(T){var w={anims:[],globalTimeScale:this.globalTimeScale};return T!==void 0&&T!==""?w.anims.push(this.anims.get(T).toJSON()):this.anims.each(function(P,A){w.anims.push(A.toJSON())}),w},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});o.exports=S},9674:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),x=e(30976),c=e(83419),u=e(90330),h=e(74943),s=e(95540),l=new c({initialize:function(d){this.parent=d,this.animationManager=d.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(v){var d=this.parent;if(v===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,d;Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var y=v[g];this.nextAnim?this.nextAnimsQueue.push(y):this.nextAnim=y}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(v){this.isPlaying&&this.stop();var d=this.animationManager,g=typeof v=="string"?v:s(v,"key",null),y=this.exists(g)?this.get(g):d.get(g);if(!y)console.warn("Missing animation: "+g);else{this.currentAnim=y;var S=y.getTotalFrames(),T=s(v,"frameRate",y.frameRate),w=s(v,"duration",y.duration);y.calculateDuration(this,S,w,T),this.delay=s(v,"delay",y.delay),this.repeat=s(v,"repeat",y.repeat),this.repeatDelay=s(v,"repeatDelay",y.repeatDelay),this.yoyo=s(v,"yoyo",y.yoyo),this.showBeforeDelay=s(v,"showBeforeDelay",y.showBeforeDelay),this.showOnStart=s(v,"showOnStart",y.showOnStart),this.hideOnComplete=s(v,"hideOnComplete",y.hideOnComplete),this.skipMissedFrames=s(v,"skipMissedFrames",y.skipMissedFrames),this.randomFrame=s(v,"randomFrame",y.randomFrame),this.timeScale=s(v,"timeScale",this.timeScale);var P=s(v,"startFrame",0);P>S&&(P=0),this.randomFrame&&(P=x(0,S-1));var A=y.frames[P];P===0&&!this.forward&&(A=y.getLastFrame()),this.currentFrame=A}return this.parent},pause:function(v){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),v!==void 0&&this.setCurrentFrame(v),this.parent},resume:function(v){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),v!==void 0&&this.setCurrentFrame(v),this.parent},playAfterDelay:function(v,d){if(!this.isPlaying)this.delayCounter=d,this.play(v,!0);else{var g=this.nextAnim,y=this.nextAnimsQueue;g&&y.unshift(g),this.nextAnim=v,this._pendingStop=1,this._pendingStopValue=d}return this.parent},playAfterRepeat:function(v,d){if(d===void 0&&(d=1),!this.isPlaying)this.play(v);else{var g=this.nextAnim,y=this.nextAnimsQueue;g&&y.unshift(g),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this.nextAnim=v,this._pendingStop=2,this._pendingStopValue=d}return this.parent},play:function(v,d){d===void 0&&(d=!1);var g=this.currentAnim,y=this.parent,S=typeof v=="string"?v:v.key;if(d&&this.isPlaying&&g.key===S)return y;if(g&&this.isPlaying){var T=this.animationManager.getMix(g.key,v);if(T>0)return this.playAfterDelay(v,T)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(v)},playReverse:function(v,d){d===void 0&&(d=!1);var g=typeof v=="string"?v:v.key;return d&&this.isPlaying&&this.currentAnim.key===g?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(v))},startAnimation:function(v){this.load(v);var d=this.currentAnim,g=this.parent;return d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,d.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),g},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(v,d){var g=this.currentAnim;if(g){var y=this.currentFrame,S=this.parent,T=y.textureFrame;S.emit(v,g,y,S,T),d&&S.emit(d+g.key,g,y,S,T)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var v=this.currentFrame;if(!v)return 0;var d=v.progress;return this.inReverse&&(d*=-1),d},setProgress:function(v){return this.forward||(v=1-v),this.setCurrentFrame(this.currentAnim.getFrameByProgress(v)),this.parent},setRepeat:function(v){return this.repeatCounter=v===-1?Number.MAX_VALUE:v,this.parent},globalRemove:function(v,d){d===void 0&&(d=this.currentAnim),this.isPlaying&&d.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(v,d){v===void 0&&(v=!1),d===void 0&&(d=!1);var g=this.currentAnim,y=this.parent;return g?(d&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),g.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!v,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(g.frames[0]),this.parent):y},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var v=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(v)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var v=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(v)}return this.parent},stopAfterDelay:function(v){return this._pendingStop=1,this._pendingStopValue=v,this.parent},stopAfterRepeat:function(v){return v===void 0&&(v=1),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=v,this.parent},stopOnFrame:function(v){return this._pendingStop=3,this._pendingStopValue=v,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(v,d){var g=this.currentAnim;if(!(!this.isPlaying||!g||g.paused)){if(this.accumulator+=d*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=d,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?g.nextFrame(this):g.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var y=0;do this.forward?g.nextFrame(this):g.previousFrame(this),y++;while(this.isPlaying&&this.accumulator>this.nextTick&&y<60)}}},setCurrentFrame:function(v){var d=this.parent;return this.currentFrame=v,d.texture=v.frame.texture,d.frame=v.frame,d.isCropped&&d.frame.updateCropUVs(d._crop,d.flipX,d.flipY),v.setAlpha&&(d.alpha=v.alpha),d.setSizeToFrame(),d._originComponent&&(v.frame.customPivot?d.setOrigin(v.frame.pivotX,v.frame.pivotY):d.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===v&&this.stop()),d},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(v){return this.anims?this.anims.get(v):null},exists:function(v){return this.anims?this.anims.has(v):!1},create:function(v){var d=v.key,g=!1;return d&&(g=this.get(d),g?console.warn("Animation key already exists: "+d):(g=new a(this,d,v),this.anims||(this.anims=new u),this.anims.set(d,g))),g},createFromAseprite:function(v,d){return this.animationManager.createFromAseprite(v,d,this.parent)},generateFrameNames:function(v,d){return this.animationManager.generateFrameNames(v,d)},generateFrameNumbers:function(v,d){return this.animationManager.generateFrameNumbers(v,d)},remove:function(v){var d=this.get(v);return d&&(this.currentAnim===d&&this.stop(),this.anims.delete(v)),d},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});o.exports=l},57090:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},25312:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete"},89580:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete-"},52860:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrepeat"},63850:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrestart"},99085:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstart"},28087:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstop"},1794:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationupdate"},52562:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},57953:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},68339:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},74943:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}},60421:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}},2161:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(90330),c=e(50792),u=e(24736),h=new a({initialize:function(){this.entries=new x,this.events=new c},add:function(s,l){return this.entries.set(s,l),this.events.emit(u.ADD,this,s,l),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var l=this.get(s);return l&&(this.entries.delete(s),this.events.emit(u.REMOVE,this,s,l.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});o.exports=h},24047:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2161),x=e(83419),c=e(8443),u=new x({initialize:function(s){this.game=s,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new a),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<h.length;s++)this[h[s]].destroy(),this[h[s]]=null;for(var l in this.custom)this.custom[l].destroy();this.custom=null,this.game=null}});o.exports=u},51464:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},59261:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},24736:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(51464),REMOVE:e(59261)}},83388:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}},71911:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(39506),u=e(50792),h=e(19715),s=e(87841),l=e(61340),v=e(80333),d=e(26099),g=new a({Extends:u,Mixins:[x.AlphaSingle,x.Visible],initialize:function(S,T,w,P){S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=0),P===void 0&&(P=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=S,this._y=T,this._width=w,this._height=P,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(w/2,P/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(y){this.renderList.push(y)},setOrigin:function(y,S){return y===void 0&&(y=.5),S===void 0&&(S=y),this.originX=y,this.originY=S,this},getScroll:function(y,S,T){T===void 0&&(T=new d);var w=this.width*.5,P=this.height*.5;return T.x=y-w,T.y=S-P,this.useBounds&&(T.x=this.clampX(T.x),T.y=this.clampY(T.y)),T},centerOnX:function(y){var S=this.width*.5;return this.midPoint.x=y,this.scrollX=y-S,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(y){var S=this.height*.5;return this.midPoint.y=y,this.scrollY=y-S,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(y,S){return this.centerOnX(y),this.centerOnY(S),this},centerToBounds:function(){if(this.useBounds){var y=this._bounds,S=this.width*.5,T=this.height*.5;this.midPoint.set(y.centerX,y.centerY),this.scrollX=y.centerX-S,this.scrollY=y.centerY-T}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(y){if(this.disableCull)return y;var S=this.matrix.matrix,T=S[0],w=S[1],P=S[2],A=S[3],R=T*A-w*P;if(!R)return y;var I=S[4],M=S[5],L=this.scrollX,N=this.scrollY,G=this.width,D=this.height,B=this.y,$=B+D,k=this.x,X=k+G,Y=this.culledObjects,Z=y.length;R=1/R,Y.length=0;for(var Q=0;Q<Z;++Q){var j=y[Q];if(!j.hasOwnProperty("width")||j.parentContainer){Y.push(j);continue}var K=j.width,W=j.height,V=j.x-L*j.scrollFactorX-K*j.originX,J=j.y-N*j.scrollFactorY-W*j.originY,ee=V*T+J*P+I,te=V*w+J*A+M,ne=(V+K)*T+(J+W)*P+I,se=(V+K)*w+(J+W)*A+M;ne>k&&ee<X&&se>B&&te<$&&Y.push(j)}return Y},getWorldPoint:function(y,S,T){T===void 0&&(T=new d);var w=this.matrix.matrix,P=w[0],A=w[1],R=w[2],I=w[3],M=w[4],L=w[5],N=P*I-A*R;if(!N)return T.x=y,T.y=S,T;N=1/N;var G=I*N,D=-A*N,B=-R*N,$=P*N,k=(R*L-I*M)*N,X=(A*M-P*L)*N,Y=Math.cos(this.rotation),Z=Math.sin(this.rotation),Q=this.zoomX,j=this.zoomY,K=this.scrollX,W=this.scrollY,V=y+(K*Y-W*Z)*Q,J=S+(K*Z+W*Y)*j;return T.x=V*G+J*B+k,T.y=V*D+J*$+X,T},ignore:function(y){var S=this.id;Array.isArray(y)||(y=[y]);for(var T=0;T<y.length;T++){var w=y[T];Array.isArray(w)?this.ignore(w):w.isParent?this.ignore(w.getChildren()):w.cameraFilter|=S}return this},clampX:function(y){var S=this._bounds,T=this.displayWidth,w=S.x+(T-this.width)/2,P=Math.max(w,w+S.width-T);return y<w?y=w:y>P&&(y=P),y},clampY:function(y){var S=this._bounds,T=this.displayHeight,w=S.y+(T-this.height)/2,P=Math.max(w,w+S.height-T);return y<w?y=w:y>P&&(y=P),y},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(y){return y===void 0&&(y=0),this.rotation=c(y),this},setBackgroundColor:function(y){return y===void 0&&(y="rgba(0,0,0,0)"),this.backgroundColor=v(y),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(y,S,T,w,P){return P===void 0&&(P=!1),this._bounds.setTo(y,S,T,w),this.dirty=!0,this.useBounds=!0,P?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(y){y===void 0&&(y=new s);var S=this._bounds;return y.setTo(S.x,S.y,S.width,S.height),y},setName:function(y){return y===void 0&&(y=""),this.name=y,this},setPosition:function(y,S){return S===void 0&&(S=y),this.x=y,this.y=S,this},setRotation:function(y){return y===void 0&&(y=0),this.rotation=y,this},setRoundPixels:function(y){return this.roundPixels=y,this},setScene:function(y,S){S===void 0&&(S=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=y,this.isSceneCamera=S;var T=y.sys;return this.sceneManager=T.game.scene,this.scaleManager=T.scale,this.cameraManager=T.cameras,this.updateSystem(),this},setScroll:function(y,S){return S===void 0&&(S=y),this.scrollX=y,this.scrollY=S,this},setSize:function(y,S){return S===void 0&&(S=y),this.width=y,this.height=S,this},setViewport:function(y,S,T,w){return this.x=y,this.y=S,this.width=T,this.height=w,this},setZoom:function(y,S){return y===void 0&&(y=1),S===void 0&&(S=y),y===0&&(y=.001),S===0&&(S=.001),this.zoomX=y,this.zoomY=S,this},setMask:function(y,S){return S===void 0&&(S=!0),this.mask=y,this._maskCamera=S?this.cameraManager.default:this,this},clearMask:function(y){return y===void 0&&(y=!1),y&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var y={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(y.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),y},update:function(){},setIsSceneCamera:function(y){return this.isSceneCamera=y,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var y=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,S=this.sceneManager;y&&!this._customViewport?S.customViewports++:!y&&this._customViewport&&S.customViewports--,this.dirty=!0,this._customViewport=y}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(y){this._x=y,this.updateSystem()}},y:{get:function(){return this._y},set:function(y){this._y=y,this.updateSystem()}},width:{get:function(){return this._width},set:function(y){this._width=y,this.updateSystem()}},height:{get:function(){return this._height},set:function(y){this._height=y,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(y){y!==this._scrollX&&(this._scrollX=y,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(y){y!==this._scrollY&&(this._scrollY=y,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(y){this._zoomX=y,this._zoomY=y,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(y){this._zoomX=y,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(y){this._zoomY=y,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(y){this._rotation=y,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});o.exports=g},38058:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),x=e(67502),c=e(45319),u=e(83419),h=e(31401),s=e(20052),l=e(19715),v=e(28915),d=e(87841),g=e(26099),y=new u({Extends:a,Mixins:[h.PostPipeline],initialize:function(T,w,P,A){a.call(this,T,w,P,A),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new s.Fade(this),this.flashEffect=new s.Flash(this),this.shakeEffect=new s.Shake(this),this.panEffect=new s.Pan(this),this.rotateToEffect=new s.RotateTo(this),this.zoomEffect=new s.Zoom(this),this.lerp=new g(1,1),this.followOffset=new g,this.deadzone=null,this._follow=null},setDeadzone:function(S,T){if(S===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=S,this.deadzone.height=T):this.deadzone=new d(0,0,S,T),this._follow){var w=this.width/2,P=this.height/2,A=this._follow.x-this.followOffset.x,R=this._follow.y-this.followOffset.y;this.midPoint.set(A,R),this.scrollX=A-w,this.scrollY=R-P}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(S,T,w,P,A,R){return this.fadeEffect.start(!1,S,T,w,P,!0,A,R)},fadeOut:function(S,T,w,P,A,R){return this.fadeEffect.start(!0,S,T,w,P,!0,A,R)},fadeFrom:function(S,T,w,P,A,R,I){return this.fadeEffect.start(!1,S,T,w,P,A,R,I)},fade:function(S,T,w,P,A,R,I){return this.fadeEffect.start(!0,S,T,w,P,A,R,I)},flash:function(S,T,w,P,A,R,I){return this.flashEffect.start(S,T,w,P,A,R,I)},shake:function(S,T,w,P,A){return this.shakeEffect.start(S,T,w,P,A)},pan:function(S,T,w,P,A,R,I){return this.panEffect.start(S,T,w,P,A,R,I)},rotateTo:function(S,T,w,P,A,R,I){return this.rotateToEffect.start(S,T,w,P,A,R,I)},zoomTo:function(S,T,w,P,A,R){return this.zoomEffect.start(S,T,w,P,A,R)},preRender:function(){this.renderList.length=0;var S=this.width,T=this.height,w=S*.5,P=T*.5,A=this.zoomX,R=this.zoomY,I=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(A)&&Number.isInteger(R);var M=S*this.originX,L=T*this.originY,N=this._follow,G=this.deadzone,D=this.scrollX,B=this.scrollY;G&&x(G,this.midPoint.x,this.midPoint.y);var $=!1;if(N&&!this.panEffect.isRunning){var k=this.lerp,X=N.x-this.followOffset.x,Y=N.y-this.followOffset.y;G?(X<G.x?D=v(D,D-(G.x-X),k.x):X>G.right&&(D=v(D,D+(X-G.right),k.x)),Y<G.y?B=v(B,B-(G.y-Y),k.y):Y>G.bottom&&(B=v(B,B+(Y-G.bottom),k.y))):(D=v(D,X-M,k.x),B=v(B,Y-L,k.y)),$=!0}this.roundPixels&&(D=Math.floor(D),B=Math.floor(B)),this.useBounds&&(D=this.clampX(D),B=this.clampY(B)),this.scrollX=D,this.scrollY=B;var Z=D+w,Q=B+P;this.midPoint.set(Z,Q);var j=Math.floor(S/A+.5),K=Math.floor(T/R+.5),W=Math.floor(Z-j/2+.5),V=Math.floor(Q-K/2+.5);this.worldView.setTo(W,V,j,K),I.applyITRS(Math.floor(this.x+M+.5),Math.floor(this.y+L+.5),this.rotation,A,R),I.translate(-M,-L),this.shakeEffect.preRender(),$&&this.emit(l.FOLLOW_UPDATE,this,N)},setLerp:function(S,T){return S===void 0&&(S=1),T===void 0&&(T=S),this.lerp.set(S,T),this},setFollowOffset:function(S,T){return S===void 0&&(S=0),T===void 0&&(T=0),this.followOffset.set(S,T),this},startFollow:function(S,T,w,P,A,R){T===void 0&&(T=!1),w===void 0&&(w=1),P===void 0&&(P=w),A===void 0&&(A=0),R===void 0&&(R=A),this._follow=S,this.roundPixels=T,w=c(w,0,1),P=c(P,0,1),this.lerp.set(w,P),this.followOffset.set(A,R);var I=this.width/2,M=this.height/2,L=S.x-A,N=S.y-R;return this.midPoint.set(L,N),this.scrollX=L-I,this.scrollY=N-M,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(S,T){this.visible&&(this.rotateToEffect.update(S,T),this.panEffect.update(S,T),this.zoomEffect.update(S,T),this.shakeEffect.update(S,T),this.flashEffect.update(S,T),this.fadeEffect.update(S,T))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});o.exports=y},32743:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38058),x=e(83419),c=e(95540),u=e(37277),h=e(37303),s=e(97480),l=e(44594),v=new x({initialize:function(g){this.scene=g,this.systems=g.sys,this.roundPixels=g.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,g.sys.events.once(l.BOOT,this.boot,this),g.sys.events.on(l.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var g=this.systems.events;g.on(l.UPDATE,this.update,this),g.once(l.SHUTDOWN,this.shutdown,this)},add:function(d,g,y,S,T,w){d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=this.scene.sys.scale.width),S===void 0&&(S=this.scene.sys.scale.height),T===void 0&&(T=!1),w===void 0&&(w="");var P=new a(d,g,y,S);return P.setName(w),P.setScene(this.scene),P.setRoundPixels(this.roundPixels),P.id=this.getNextID(),this.cameras.push(P),T&&(this.main=P),P},addExisting:function(d,g){g===void 0&&(g=!1);var y=this.cameras.indexOf(d);return y===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),g&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,g=1,y=0;y<32;y++){for(var S=!1,T=0;T<d.length;T++){var w=d[T];if(w&&w.id===g){S=!0;continue}}if(S)g=g<<1;else return g}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var g=0,y=this.cameras,S=0;S<y.length;S++){var T=y[S];(!d||d&&T.visible)&&g++}return g},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var g=this.scene.sys.scale.width,y=this.scene.sys.scale.height,S=0;S<d.length;S++){var T=d[S],w=c(T,"x",0),P=c(T,"y",0),A=c(T,"width",g),R=c(T,"height",y),I=this.add(w,P,A,R);I.name=c(T,"name",""),I.zoom=c(T,"zoom",1),I.rotation=c(T,"rotation",0),I.scrollX=c(T,"scrollX",0),I.scrollY=c(T,"scrollY",0),I.roundPixels=c(T,"roundPixels",!1),I.visible=c(T,"visible",!0);var M=c(T,"backgroundColor",!1);M&&I.setBackgroundColor(M);var L=c(T,"bounds",null);if(L){var N=c(L,"x",0),G=c(L,"y",0),D=c(L,"width",g),B=c(L,"height",y);I.setBounds(N,G,D,B)}}return this},getCamera:function(d){for(var g=this.cameras,y=0;y<g.length;y++)if(g[y].name===d)return g[y];return null},getCamerasBelowPointer:function(d){for(var g=this.cameras,y=d.x,S=d.y,T=[],w=0;w<g.length;w++){var P=g[w];P.visible&&P.inputEnabled&&h(P,y,S)&&T.unshift(P)}return T},remove:function(d,g){g===void 0&&(g=!0),Array.isArray(d)||(d=[d]);for(var y=0,S=this.cameras,T=0;T<d.length;T++){var w=S.indexOf(d[T]);w!==-1&&(g?S[w].destroy():S[w].renderList=[],S.splice(w,1),y++)}return!this.main&&S[0]&&(this.main=S[0]),y},render:function(d,g){for(var y=this.scene,S=this.cameras,T=0;T<S.length;T++){var w=S[T];if(w.visible&&w.alpha>0){w.preRender();var P=this.getVisibleChildren(g.getChildren(),w);d.render(y,P,w)}}},getVisibleChildren:function(d,g){return d.filter(function(y){return y.willRender(g)})},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,g){for(var y=0;y<this.cameras.length;y++)this.cameras[y].update(d,g)},onResize:function(d,g,y,S,T){for(var w=0;w<this.cameras.length;w++){var P=this.cameras[w];P._x===0&&P._y===0&&P._width===S&&P._height===T&&P.setSize(g.width,g.height)}},resize:function(d,g){for(var y=0;y<this.cameras.length;y++)this.cameras[y].setSize(d,g)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var g=this.systems.events;g.off(l.UPDATE,this.update,this),g.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(l.START,this.start,this),this.systems.events.off(l.DESTROY,this.destroy,this),this.systems.game.scale.off(s.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",v,"cameras"),o.exports=v},5020:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(19715),u=new x({initialize:function(s){this.camera=s,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,s,l,v,d,g,y,S){if(h===void 0&&(h=!0),s===void 0&&(s=1e3),l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=!1),y===void 0&&(y=null),S===void 0&&(S=this.camera.scene),!g&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=h,this.progress=0,this.red=l,this.green=v,this.blue=d,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=y,this._onUpdateScope=S;var T=h?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(T,this.camera,this,s,l,v,d),this.camera},update:function(h,s){this.isRunning&&(this._elapsed+=s,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(h,s){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera,v=this.red/255,d=this.green/255,g=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,s(g,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=u},10662:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(19715),u=new x({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,s,l,v,d,g,y){return h===void 0&&(h=250),s===void 0&&(s=255),l===void 0&&(l=255),v===void 0&&(v=255),d===void 0&&(d=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=s,this.green=l,this.blue=v,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y,this.camera.emit(c.FLASH_START,this.camera,this,h,s,l,v),this.camera)},update:function(h,s){this.isRunning&&(this._elapsed+=s,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var s=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(h,s){if(!this.isRunning)return!1;var l=this.camera,v=this.red/255,d=this.green/255,g=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,s(g,d,v,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=u},20359:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(62640),u=e(19715),h=e(26099),s=new x({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,v,d,g,y,S,T){d===void 0&&(d=1e3),g===void 0&&(g=c.Linear),y===void 0&&(y=!1),S===void 0&&(S=null),T===void 0&&(T=this.camera.scene);var w=this.camera;return!y&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(w.scrollX,w.scrollY),this.destination.set(l,v),w.getScroll(l,v,this.current),typeof g=="string"&&c.hasOwnProperty(g)?this.ease=c[g]:typeof g=="function"&&(this.ease=g),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=T,this.camera.emit(u.PAN_START,this.camera,this,d,l,v)),w},update:function(l,v){if(this.isRunning){this._elapsed+=v;var d=a(this._elapsed/this.duration,0,1);this.progress=d;var g=this.camera;if(this._elapsed<this.duration){var y=this.ease(d);g.getScroll(this.destination.x,this.destination.y,this.current);var S=this.source.x+(this.current.x-this.source.x)*y,T=this.source.y+(this.current.y-this.source.y)*y;g.setScroll(S,T),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,d,S,T)}else g.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,d,g.scrollX,g.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=s},34208:(o,E,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=e(45319),x=e(83419),c=e(19715),u=e(62640),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,l,v,d,g,y,S){v===void 0&&(v=1e3),d===void 0&&(d=u.Linear),g===void 0&&(g=!1),y===void 0&&(y=null),S===void 0&&(S=this.camera.scene),l===void 0&&(l=!1),this.shortestPath=l;var T=s;s<0?(T=-1*s,this.clockwise=!1):this.clockwise=!0;var w=360*Math.PI/180;T=T-Math.floor(T/w)*w;var P=this.camera;if(!g&&this.isRunning)return P;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=P.rotation,this.destination=T,typeof d=="string"&&u.hasOwnProperty(d)?this.ease=u[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=y,this._onUpdateScope=S,this.shortestPath){var A=0,R=0;this.destination>this.source?A=Math.abs(this.destination-this.source):A=Math.abs(this.destination+w)-this.source,this.source>this.destination?R=Math.abs(this.source-this.destination):R=Math.abs(this.source+w)-this.destination,A<R?this.clockwise=!0:A>R&&(this.clockwise=!1)}return this.camera.emit(c.ROTATE_START,this.camera,this,v,T),P},update:function(s,l){if(this.isRunning){this._elapsed+=l;var v=a(this._elapsed/this.duration,0,1);this.progress=v;var d=this.camera;if(this._elapsed<this.duration){var g=this.ease(v);this.current=d.rotation;var y=0,S=360*Math.PI/180,T=this.destination,w=this.current;this.clockwise===!1&&(T=this.current,w=this.destination),T>=w?y=Math.abs(T-w):y=Math.abs(T+S)-w;var P=0;this.clockwise?P=d.rotation+y*g:P=d.rotation-y*g,d.rotation=P,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,P)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=h},30330:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(19715),u=e(26099),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,l,v,d,g){return s===void 0&&(s=100),l===void 0&&(l=.05),v===void 0&&(v=!1),d===void 0&&(d=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,typeof l=="number"?this.intensity.set(l):this.intensity.set(l.x,l.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=g,this.camera.emit(c.SHAKE_START,this.camera,this,s,l),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,l){if(this.isRunning)if(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,d=this.camera.width,g=this.camera.height,y=this.camera.zoom;this._offsetX=(Math.random()*v.x*d*2-v.x*d)*y,this._offsetY=(Math.random()*v.y*g*2-v.y*g)*y,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});o.exports=h},45641:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(62640),u=e(19715),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,l,v,d,g,y){l===void 0&&(l=1e3),v===void 0&&(v=c.Linear),d===void 0&&(d=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene);var S=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source=S.zoom,this.destination=s,typeof v=="string"&&c.hasOwnProperty(v)?this.ease=c[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y,this.camera.emit(u.ZOOM_START,this.camera,this,l,s)),S},update:function(s,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=h},20052:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}},16438:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameradestroy"},32726:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeincomplete"},87807:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeinstart"},45917:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutcomplete"},95666:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutstart"},47056:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashcomplete"},91261:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashstart"},45047:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="followupdate"},81927:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapancomplete"},74264:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapanstart"},54419:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},79330:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},93183:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatecomplete"},80112:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatestart"},62252:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakecomplete"},86017:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakestart"},539:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomcomplete"},51892:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomstart"},19715:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}},87969:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}},63091:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),c=new a({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var s=x(h,"speed",null);typeof s=="number"?(this.speedX=s,this.speedY=s):(this.speedX=x(h,"speed.x",0),this.speedY=x(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=c},58818:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),c=new a({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var s=x(h,"acceleration",null);typeof s=="number"?(this.accelX=s,this.accelY=s):(this.accelX=x(h,"acceleration.x",0),this.accelY=x(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var l=x(h,"drag",null);typeof l=="number"?(this.dragX=l,this.dragY=l):(this.dragX=x(h,"drag.x",0),this.dragY=x(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=x(h,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=x(h,"maxSpeed.x",0),this.maxSpeedY=x(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*u|0),this._speedY!==0&&(h.scrollY-=this._speedY*u|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=c},38865:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}},26638:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Controls:e(38865),Scene2D:e(87969)}},8054:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.87",LOG_VERSION:"v387",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};o.exports=a},69547:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8054),c=e(42363),u=e(82264),h=e(95540),s=e(35154),l=e(41212),v=e(29747),d=e(75508),g=e(36060),y=e(80333),S=new a({initialize:function(w){w===void 0&&(w={});var P=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],A="#ffffff",R=s(w,"scale",null);this.width=s(R,"width",1024,w),this.height=s(R,"height",768,w),this.zoom=s(R,"zoom",1,w),this.parent=s(R,"parent",void 0,w),this.scaleMode=s(R,R?"mode":"scaleMode",0,w),this.expandParent=s(R,"expandParent",!0,w),this.autoRound=s(R,"autoRound",!1,w),this.autoCenter=s(R,"autoCenter",0,w),this.resizeInterval=s(R,"resizeInterval",500,w),this.fullscreenTarget=s(R,"fullscreenTarget",null,w),this.minWidth=s(R,"min.width",0,w),this.maxWidth=s(R,"max.width",0,w),this.minHeight=s(R,"min.height",0,w),this.maxHeight=s(R,"max.height",0,w),this.snapWidth=s(R,"snap.width",0,w),this.snapHeight=s(R,"snap.height",0,w),this.renderType=s(w,"type",x.AUTO),this.canvas=s(w,"canvas",null),this.context=s(w,"context",null),this.canvasStyle=s(w,"canvasStyle",null),this.customEnvironment=s(w,"customEnvironment",!1),this.sceneConfig=s(w,"scene",null),this.seed=s(w,"seed",[(Date.now()*Math.random()).toString()]),d.RND=new d.RandomDataGenerator(this.seed),this.gameTitle=s(w,"title",""),this.gameURL=s(w,"url","https://phaser.io/"+x.LOG_VERSION),this.gameVersion=s(w,"version",""),this.autoFocus=s(w,"autoFocus",!0),this.stableSort=s(w,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=s(w,"dom.createContainer",!1),this.domPointerEvents=s(w,"dom.pointerEvents","none"),this.inputKeyboard=s(w,"input.keyboard",!0),this.inputKeyboardEventTarget=s(w,"input.keyboard.target",window),this.inputKeyboardCapture=s(w,"input.keyboard.capture",[]),this.inputMouse=s(w,"input.mouse",!0),this.inputMouseEventTarget=s(w,"input.mouse.target",null),this.inputMousePreventDefaultDown=s(w,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=s(w,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=s(w,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=s(w,"input.mouse.preventDefaultWheel",!0),this.inputTouch=s(w,"input.touch",u.input.touch),this.inputTouchEventTarget=s(w,"input.touch.target",null),this.inputTouchCapture=s(w,"input.touch.capture",!0),this.inputActivePointers=s(w,"input.activePointers",1),this.inputSmoothFactor=s(w,"input.smoothFactor",0),this.inputWindowEvents=s(w,"input.windowEvents",!0),this.inputGamepad=s(w,"input.gamepad",!1),this.inputGamepadEventTarget=s(w,"input.gamepad.target",window),this.disableContextMenu=s(w,"disableContextMenu",!1),this.audio=s(w,"audio",{}),this.hideBanner=s(w,"banner",null)===!1,this.hidePhaser=s(w,"banner.hidePhaser",!1),this.bannerTextColor=s(w,"banner.text",A),this.bannerBackgroundColor=s(w,"banner.background",P),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=s(w,"fps",null),this.disablePreFX=s(w,"disablePreFX",!1),this.disablePostFX=s(w,"disablePostFX",!1);var I=s(w,"render",null);this.pipeline=s(I,"pipeline",null,w),this.autoMobilePipeline=s(I,"autoMobilePipeline",!0,w),this.defaultPipeline=s(I,"defaultPipeline",g.MULTI_PIPELINE,w),this.antialias=s(I,"antialias",!0,w),this.antialiasGL=s(I,"antialiasGL",!0,w),this.mipmapFilter=s(I,"mipmapFilter","",w),this.desynchronized=s(I,"desynchronized",!1,w),this.roundPixels=s(I,"roundPixels",!1,w),this.pixelArt=s(I,"pixelArt",this.zoom!==1,w),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=s(I,"transparent",!1,w),this.clearBeforeRender=s(I,"clearBeforeRender",!0,w),this.preserveDrawingBuffer=s(I,"preserveDrawingBuffer",!1,w),this.premultipliedAlpha=s(I,"premultipliedAlpha",!0,w),this.failIfMajorPerformanceCaveat=s(I,"failIfMajorPerformanceCaveat",!1,w),this.powerPreference=s(I,"powerPreference","default",w),this.batchSize=s(I,"batchSize",4096,w),this.maxTextures=s(I,"maxTextures",-1,w),this.maxLights=s(I,"maxLights",10,w);var M=s(w,"backgroundColor",0);this.backgroundColor=y(M),this.transparent&&(this.backgroundColor=y(0),this.backgroundColor.alpha=0),this.preBoot=s(w,"callbacks.preBoot",v),this.postBoot=s(w,"callbacks.postBoot",v),this.physics=s(w,"physics",{}),this.defaultPhysicsSystem=s(this.physics,"default",!1),this.loaderBaseURL=s(w,"loader.baseURL",""),this.loaderPath=s(w,"loader.path",""),this.loaderMaxParallelDownloads=s(w,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=s(w,"loader.crossOrigin",void 0),this.loaderResponseType=s(w,"loader.responseType",""),this.loaderAsync=s(w,"loader.async",!0),this.loaderUser=s(w,"loader.user",""),this.loaderPassword=s(w,"loader.password",""),this.loaderTimeout=s(w,"loader.timeout",0),this.loaderMaxRetries=s(w,"loader.maxRetries",2),this.loaderWithCredentials=s(w,"loader.withCredentials",!1),this.loaderImageLoadType=s(w,"loader.imageLoadType","XHR"),this.loaderLocalScheme=s(w,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=s(w,"fx.glow.quality",.1),this.glowFXDistance=s(w,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var L=s(w,"plugins",null),N=c.DefaultScene;L&&(Array.isArray(L)?this.defaultPlugins=L:l(L)&&(this.installGlobalPlugins=h(L,"global",[]),this.installScenePlugins=h(L,"scene",[]),Array.isArray(L.default)?N=L.default:Array.isArray(L.defaultMerge)&&(N=N.concat(L.defaultMerge)))),this.defaultPlugins=N;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=s(w,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=s(w,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=s(w,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});o.exports=S},86054:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20623),x=e(27919),c=e(8054),u=e(89357),h=function(s){var l=s.config;if((l.customEnvironment||l.canvas)&&l.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!l.customEnvironment&&!l.canvas&&l.renderType!==c.HEADLESS)if(l.renderType===c.AUTO&&(l.renderType=u.webGL?c.WEBGL:c.CANVAS),l.renderType===c.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(l.renderType===c.CANVAS){if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+l.renderType);l.antialias||x.disableSmoothing();var v=s.scale.baseSize,d=v.width,g=v.height;if(l.canvas?(s.canvas=l.canvas,s.canvas.width=d,s.canvas.height=g):s.canvas=x.create(s,d,g,l.renderType),l.canvasStyle&&(s.canvas.style=l.canvasStyle),l.antialias||a.setCrisp(s.canvas),l.renderType!==c.HEADLESS){var y,S;y=e(68627),S=e(74797),l.renderType===c.WEBGL?s.renderer=new S(s):(s.renderer=new y(s),s.context=s.renderer.gameContext)}};o.exports=h},96391:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),x=function(c){var u=c.config;if(!u.hideBanner){var h="WebGL";u.renderType===a.CANVAS?h="Canvas":u.renderType===a.HEADLESS&&(h="Headless");var s=u.audio,l=c.device.audio,v;if(l.webAudio&&!s.disableWebAudio?v="Web Audio":s.noAudio||!l.webAudio&&!l.audioData?v="No Audio":v="HTML5 Audio",c.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var d="",g=[d];if(Array.isArray(u.bannerBackgroundColor)){var y;u.bannerBackgroundColor.forEach(function(T){d=d.concat("%c "),g.push("background: "+T),y=T}),g[g.length-1]="color: "+u.bannerTextColor+"; background: "+y}else d=d.concat("%c "),g.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor);g.push("background: transparent"),u.gameTitle&&(d=d.concat(u.gameTitle),u.gameVersion&&(d=d.concat(" v"+u.gameVersion)),u.hidePhaser||(d=d.concat(" / ")));var S="";u.hidePhaser||(d=d.concat("Phaser v"+a.VERSION+S+" ("+h+" | "+v+")")),d=d.concat(" %c "+u.gameURL),g[0]=d,console.log.apply(console,g)}}};o.exports=x},50127:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=e(60848),c=e(24047),u=e(27919),h=e(83419),s=e(69547),l=e(83719),v=e(86054),d=e(45893),g=e(96391),y=e(82264),S=e(57264),T=e(50792),w=e(8443),P=e(7003),A=e(37277),R=e(77332),I=e(76531),M=e(60903),L=e(69442),N=e(17130),G=e(65898),D=e(51085),B=e(14747),$=new h({initialize:function(X){this.config=new s(X),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new T,this.anims=new x(this),this.textures=new N(this),this.cache=new c(this),this.registry=new d(this,new T),this.input=new P(this,this.config),this.scene=new M(this,this.config.sceneConfig),this.device=y,this.scale=new I(this,this.config),this.sound=null,this.sound=B.create(this),this.loop=new G(this,this.config.fps),this.plugins=new R(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,S(this.boot.bind(this))},boot:function(){if(!A.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),l(this),g(this),a(this.canvas,this.config.parent),this.textures.once(L.READY,this.texturesReady,this),this.events.emit(w.BOOT)},texturesReady:function(){this.events.emit(w.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),D(this);var k=this.events;k.on(w.HIDDEN,this.onHidden,this),k.on(w.VISIBLE,this.onVisible,this),k.on(w.BLUR,this.onBlur,this),k.on(w.FOCUS,this.onFocus,this)},step:function(k,X){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(w.PRE_STEP,k,X),Y.emit(w.STEP,k,X),this.scene.update(k,X),Y.emit(w.POST_STEP,k,X);var Z=this.renderer;Z.preRender(),Y.emit(w.PRE_RENDER,Z,k,X),this.scene.render(Z),Z.postRender(),Y.emit(w.POST_RENDER,Z,k,X)}},headlessStep:function(k,X){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(w.PRE_STEP,k,X),Y.emit(w.STEP,k,X),this.scene.update(k,X),Y.emit(w.POST_STEP,k,X),this.scene.isProcessing=!1,Y.emit(w.PRE_RENDER,null,k,X),Y.emit(w.POST_RENDER,null,k,X)}},onHidden:function(){this.loop.pause(),this.events.emit(w.PAUSE)},pause:function(){var k=this.isPaused;this.isPaused=!0,k||this.events.emit(w.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(w.RESUME,this.loop.pauseDuration)},resume:function(){var k=this.isPaused;this.isPaused=!1,k&&this.events.emit(w.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(k,X){X===void 0&&(X=!1),this.pendingDestroy=!0,this.removeCanvas=k,this.noReturn=X},runDestroy:function(){this.scene.destroy(),this.events.emit(w.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});o.exports=$},65898:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),c=e(29747),u=e(43092),h=new a({initialize:function(l,v){this.game=l,this.raf=new u,this.started=!1,this.running=!1,this.minFps=x(v,"min",5),this.targetFps=x(v,"target",60),this.fpsLimit=x(v,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=x(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(v,"deltaHistory",10),this.panicMax=x(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=Math.min(this._target,this.deltaHistory[l]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s;var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target)},smoothDelta:function(s){var l=this.deltaIndex,v=this.deltaHistory,d=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,s=Math.min(s,this._target)),s>this._min&&(s=v[l],s=Math.min(s,this._min)),v[l]=s,this.deltaIndex++,this.deltaIndex>=d&&(this.deltaIndex=0);for(var g=0,y=0;y<d;y++)g+=v[y];return g/=d,g},updateFPS:function(s){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0},stepLimitFPS:function(s){this.now=s;var l=Math.max(0,s-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta+=l,s>=this.nextFpsUpdate&&this.updateFPS(s),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(s,this.delta),this.delta=0),this.lastTime=s,this.frame++},step:function(s){this.now=s;var l=Math.max(0,s-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta=l,s>=this.nextFpsUpdate&&this.updateFPS(s),this.framesThisSecond++,this.callback(s,l),this.lastTime=s,this.frame++},tick:function(){var s=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(s):this.step(s)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){s===void 0&&(s=!1);var l=window.performance.now();if(!this.running){s&&(this.startTime+=-this.lastTime+(this.lastTime+l));var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});o.exports=h},51085:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8443),x=function(c){var u,h=c.events;if(document.hidden!==void 0)u="visibilitychange";else{var s=["webkit","moz","ms"];s.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},u=v+"visibilitychange")})}var l=function(v){document.hidden||v.type==="pause"?h.emit(a.HIDDEN):h.emit(a.VISIBLE)};u&&document.addEventListener(u,l,!1),window.onblur=function(){h.emit(a.BLUR)},window.onfocus=function(){h.emit(a.FOCUS)},window.focus&&c.config.autoFocus&&window.focus()};o.exports=x},97217:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="blur"},47548:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},19814:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="contextlost"},68446:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},41700:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="focus"},25432:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="hidden"},65942:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},59211:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},47789:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="poststep"},39066:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},460:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prestep"},16175:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},42331:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},11966:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="step"},32969:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="systemready"},94830:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="visible"},8443:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}},42857:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}},99584:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5290),x=e(27919),c=e(35154),u=function(h){var s=c(h,"data",[]),l=c(h,"canvas",null),v=c(h,"palette",a),d=c(h,"pixelWidth",1),g=c(h,"pixelHeight",d),y=c(h,"resizeCanvas",!0),S=c(h,"clearCanvas",!0),T=c(h,"preRender",null),w=c(h,"postRender",null),P=Math.floor(Math.abs(s[0].length*d)),A=Math.floor(Math.abs(s.length*g));l||(l=x.create2D(this,P,A),y=!1,S=!1),y&&(l.width=P,l.height=A);var R=l.getContext("2d",{willReadFrequently:!0});S&&R.clearRect(0,0,P,A),T&&T(l,R);for(var I=0;I<s.length;I++)for(var M=s[I],L=0;L<M.length;L++){var N=M[L];N!=="."&&N!==" "&&(R.fillStyle=v[N],R.fillRect(L*d,I*g,d,g))}return w&&w(l,R),l};o.exports=u},15822:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GenerateTexture:e(99584),Palettes:e(57763)}},5290:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}},46728:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36316),c=e(80021),u=e(26099),h=new a({Extends:c,initialize:function(l,v,d,g){c.call(this,"CubicBezierCurve"),Array.isArray(l)&&(g=new u(l[6],l[7]),d=new u(l[4],l[5]),v=new u(l[2],l[3]),l=new u(l[0],l[1])),this.p0=l,this.p1=v,this.p2=d,this.p3=g},getStartPoint:function(s){return s===void 0&&(s=new u),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,l){l===void 0&&(l=new u);var v=this.p0,d=this.p1,g=this.p2,y=this.p3;return l.set(x(s,v.x,d.x,g.x,y.x),x(s,v.y,d.y,g.y,y.y))},draw:function(s,l){l===void 0&&(l=32);var v=this.getPoints(l);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)s.lineTo(v[d].x,v[d].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(s){var l=s.points,v=new u(l[0],l[1]),d=new u(l[2],l[3]),g=new u(l[4],l[5]),y=new u(l[6],l[7]);return new h(v,d,g,y)},o.exports=h},80021:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(19217),c=e(87841),u=e(26099),h=new a({initialize:function(l){this.type=l,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(s,l){return l===void 0&&(l=32),s.strokePoints(this.getPoints(l))},getBounds:function(s,l){s||(s=new c),l===void 0&&(l=16);var v=this.getLength();l>v&&(l=v/2);var d=Math.max(1,Math.round(v/l));return x(this.getSpacedPoints(d),s)},getDistancePoints:function(s){var l=this.getLength(),v=Math.max(1,l/s);return this.getSpacedPoints(v)},getEndPoint:function(s){return s===void 0&&(s=new u),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l=[],v,d=this.getPoint(0,this._tmpVec2A),g=0;l.push(0);for(var y=1;y<=s;y++)v=this.getPoint(y/s,this._tmpVec2B),g+=v.distance(d),l.push(g),d.copy(v);return this.cacheArcLengths=l,l},getPointAt:function(s,l){var v=this.getUtoTmapping(s);return this.getPoint(v,l)},getPoints:function(s,l,v){v===void 0&&(v=[]),s||(l?s=this.getLength()/l:s=this.defaultDivisions);for(var d=0;d<=s;d++)v.push(this.getPoint(d/s));return v},getRandomPoint:function(s){return s===void 0&&(s=new u),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,l,v){v===void 0&&(v=[]),s||(l?s=this.getLength()/l:s=this.defaultDivisions);for(var d=0;d<=s;d++){var g=this.getUtoTmapping(d/s,null,s);v.push(this.getPoint(g))}return v},getStartPoint:function(s){return s===void 0&&(s=new u),this.getPointAt(0,s)},getTangent:function(s,l){l===void 0&&(l=new u);var v=1e-4,d=s-v,g=s+v;return d<0&&(d=0),g>1&&(g=1),this.getPoint(d,this._tmpVec2A),this.getPoint(g,l),l.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,l){var v=this.getUtoTmapping(s);return this.getTangent(v,l)},getTFromDistance:function(s,l){return s<=0?0:this.getUtoTmapping(0,s,l)},getUtoTmapping:function(s,l,v){var d=this.getLengths(v),g=0,y=d.length,S;l?S=Math.min(l,d[y-1]):S=s*d[y-1];for(var T=0,w=y-1,P;T<=w;)if(g=Math.floor(T+(w-T)/2),P=d[g]-S,P<0)T=g+1;else if(P>0)w=g-1;else{w=g;break}if(g=w,d[g]===S)return g/(y-1);var A=d[g],R=d[g+1],I=R-A,M=(S-A)/I;return(g+M)/(y-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});o.exports=h},73825:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),c=e(39506),u=e(35154),h=e(43396),s=e(26099),l=new a({Extends:x,initialize:function(d,g,y,S,T,w,P,A){if(typeof d=="object"){var R=d;d=u(R,"x",0),g=u(R,"y",0),y=u(R,"xRadius",0),S=u(R,"yRadius",y),T=u(R,"startAngle",0),w=u(R,"endAngle",360),P=u(R,"clockwise",!1),A=u(R,"rotation",0)}else S===void 0&&(S=y),T===void 0&&(T=0),w===void 0&&(w=360),P===void 0&&(P=!1),A===void 0&&(A=0);x.call(this,"EllipseCurve"),this.p0=new s(d,g),this._xRadius=y,this._yRadius=S,this._startAngle=c(T),this._endAngle=c(w),this._clockwise=P,this._rotation=c(A)},getStartPoint:function(v){return v===void 0&&(v=new s),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,d){d===void 0&&(d=new s);for(var g=Math.PI*2,y=this._endAngle-this._startAngle,S=Math.abs(y)<Number.EPSILON;y<0;)y+=g;for(;y>g;)y-=g;y<Number.EPSILON&&(S?y=0:y=g),this._clockwise&&!S&&(y===g?y=-g:y=y-g);var T=this._startAngle+v*y,w=this.p0.x+this._xRadius*Math.cos(T),P=this.p0.y+this._yRadius*Math.sin(T);if(this._rotation!==0){var A=Math.cos(this._rotation),R=Math.sin(this._rotation),I=w-this.p0.x,M=P-this.p0.y;w=I*A-M*R+this.p0.x,P=I*R+M*A+this.p0.y}return d.set(w,P)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return h(this._startAngle)},set:function(v){this._startAngle=c(v)}},endAngle:{get:function(){return h(this._endAngle)},set:function(v){this._endAngle=c(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return h(this._rotation)},set:function(v){this._rotation=c(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});l.fromJSON=function(v){return new l(v)},o.exports=l},33951:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),c=e(19217),u=e(87841),h=e(26099),s=new a({Extends:x,initialize:function(v,d){x.call(this,"LineCurve"),Array.isArray(v)&&(d=new h(v[2],v[3]),v=new h(v[0],v[1])),this.p0=v,this.p1=d,this.arcLengthDivisions=1},getBounds:function(l){return l===void 0&&(l=new u),c([this.p0,this.p1],l)},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l===void 0&&(l=1),l},getPoint:function(l,v){return v===void 0&&(v=new h),l===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(l).add(this.p0),v)},getPointAt:function(l,v){return this.getPoint(l,v)},getTangent:function(l,v){return v===void 0&&(v=new h),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(l,v,d){var g;if(v){var y=this.getLengths(d),S=y[y.length-1],T=Math.min(v,S);g=T/S}else g=l;return g},draw:function(l){return l.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(l){var v=l.points,d=new h(v[0],v[1]),g=new h(v[2],v[3]);return new s(d,g)},o.exports=s},14744:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),c=e(32112),u=e(26099),h=new a({Extends:x,initialize:function(l,v,d){x.call(this,"QuadraticBezierCurve"),Array.isArray(l)&&(d=new u(l[4],l[5]),v=new u(l[2],l[3]),l=new u(l[0],l[1])),this.p0=l,this.p1=v,this.p2=d},getStartPoint:function(s){return s===void 0&&(s=new u),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,l){l===void 0&&(l=new u);var v=this.p0,d=this.p1,g=this.p2;return l.set(c(s,v.x,d.x,g.x),c(s,v.y,d.y,g.y))},draw:function(s,l){l===void 0&&(l=32);var v=this.getPoints(l);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)s.lineTo(v[d].x,v[d].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(s){var l=s.points,v=new u(l[0],l[1]),d=new u(l[2],l[3]),g=new u(l[4],l[5]);return new h(v,d,g)},o.exports=h},42534:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),x=e(83419),c=e(80021),u=e(26099),h=new x({Extends:c,initialize:function(l){l===void 0&&(l=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(l)},addPoints:function(s){for(var l=0;l<s.length;l++){var v=new u;typeof s[l]=="number"?(v.x=s[l],v.y=s[l+1],l++):Array.isArray(s[l])?(v.x=s[l][0],v.y=s[l][1]):(v.x=s[l].x,v.y=s[l].y),this.points.push(v)}return this},addPoint:function(s,l){var v=new u(s,l);return this.points.push(v),v},getStartPoint:function(s){return s===void 0&&(s=new u),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,l){l===void 0&&(l=new u);var v=this.points,d=(v.length-1)*s,g=Math.floor(d),y=d-g,S=v[g===0?g:g-1],T=v[g],w=v[g>v.length-2?v.length-1:g+1],P=v[g>v.length-3?v.length-1:g+2];return l.set(a(y,S.x,T.x,w.x,P.x),a(y,S.y,T.y,w.y,P.y))},toJSON:function(){for(var s=[],l=0;l<this.points.length;l++)s.push(this.points[l].x),s.push(this.points[l].y);return{type:this.type,points:s}}});h.fromJSON=function(s){return new h(s.points)},o.exports=h},25410:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}},68618:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),c=new a({initialize:function(h,s){this.active=!1,this.p0=new x(h,s)},getPoint:function(u,h){return h===void 0&&(h=new x),h.copy(this.p0)},getPointAt:function(u,h){return this.getPoint(u,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});o.exports=c},46669:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(46728),c=e(73825),u=e(39429),h=e(33951),s=e(68618),l=e(14744),v=e(87841),d=e(42534),g=e(26099),y=e(36383),S=new a({initialize:function(w,P){w===void 0&&(w=0),P===void 0&&(P=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new g,this._tmpVec2A=new g,this._tmpVec2B=new g,typeof w=="object"?this.fromJSON(w):this.startPoint.set(w,P)},add:function(T){return this.curves.push(T),this},circleTo:function(T,w,P){return w===void 0&&(w=!1),this.ellipseTo(T,T,0,360,w,P)},closePath:function(){var T=this.curves[0].getPoint(0),w=this.curves[this.curves.length-1].getPoint(1);return T.equals(w)||this.curves.push(new h(w,T)),this},cubicBezierTo:function(T,w,P,A,R,I){var M=this.getEndPoint(),L,N,G;return T instanceof g?(L=T,N=w,G=P):(L=new g(P,A),N=new g(R,I),G=new g(T,w)),this.add(new x(M,L,N,G))},quadraticBezierTo:function(T,w,P,A){var R=this.getEndPoint(),I,M;return T instanceof g?(I=T,M=w):(I=new g(P,A),M=new g(T,w)),this.add(new l(R,I,M))},draw:function(T,w){for(var P=0;P<this.curves.length;P++){var A=this.curves[P];A.active&&A.draw(T,w)}return T},ellipseTo:function(T,w,P,A,R,I){var M=new c(0,0,T,w,P,A,R,I),L=this.getEndPoint(this._tmpVec2A),N=M.getStartPoint(this._tmpVec2B);return L.subtract(N),M.x=L.x,M.y=L.y,this.add(M)},fromJSON:function(T){this.curves=[],this.cacheLengths=[],this.startPoint.set(T.x,T.y),this.autoClose=T.autoClose;for(var w=0;w<T.curves.length;w++){var P=T.curves[w];switch(P.type){case"LineCurve":this.add(h.fromJSON(P));break;case"EllipseCurve":this.add(c.fromJSON(P));break;case"SplineCurve":this.add(d.fromJSON(P));break;case"CubicBezierCurve":this.add(x.fromJSON(P));break;case"QuadraticBezierCurve":this.add(l.fromJSON(P));break}}return this},getBounds:function(T,w){T===void 0&&(T=new v),w===void 0&&(w=16),T.x=Number.MAX_VALUE,T.y=Number.MAX_VALUE;for(var P=new v,A=y.MIN_SAFE_INTEGER,R=y.MIN_SAFE_INTEGER,I=0;I<this.curves.length;I++){var M=this.curves[I];M.active&&(M.getBounds(P,w),T.x=Math.min(T.x,P.x),T.y=Math.min(T.y,P.y),A=Math.max(A,P.right),R=Math.max(R,P.bottom))}return T.right=A,T.bottom=R,T},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var T=[],w=0,P=0;P<this.curves.length;P++)w+=this.curves[P].getLength(),T.push(w);return this.cacheLengths=T,T},getCurveAt:function(T){for(var w=T*this.getLength(),P=this.getCurveLengths(),A=0;A<P.length;){if(P[A]>=w)return this.curves[A];A++}return null},getEndPoint:function(T){return T===void 0&&(T=new g),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,T):T.copy(this.startPoint),T},getLength:function(){var T=this.getCurveLengths();return T[T.length-1]},getPoint:function(T,w){w===void 0&&(w=new g);for(var P=T*this.getLength(),A=this.getCurveLengths(),R=0;R<A.length;){if(A[R]>=P){var I=A[R]-P,M=this.curves[R],L=M.getLength(),N=L===0?0:1-I/L;return M.getPointAt(N,w)}R++}return null},getPoints:function(T,w){!T&&!w&&(T=this.defaultDivisions);for(var P=[],A,R=0;R<this.curves.length;R++){var I=this.curves[R];if(I.active)for(var M=I.getResolution(T),L=I.getPoints(M,w),N=0;N<L.length;N++){var G=L[N];A&&A.equals(G)||(P.push(G),A=G)}}return this.autoClose&&P.length>1&&!P[P.length-1].equals(P[0])&&P.push(P[0]),P},getRandomPoint:function(T){return T===void 0&&(T=new g),this.getPoint(Math.random(),T)},getSpacedPoints:function(T){T===void 0&&(T=40);for(var w=[],P=0;P<=T;P++)w.push(this.getPoint(P/T));return this.autoClose&&w.push(w[0]),w},getStartPoint:function(T){return T===void 0&&(T=new g),T.copy(this.startPoint)},getTangent:function(T,w){w===void 0&&(w=new g);for(var P=T*this.getLength(),A=this.getCurveLengths(),R=0;R<A.length;){if(A[R]>=P){var I=A[R]-P,M=this.curves[R],L=M.getLength(),N=L===0?0:1-I/L;return M.getTangentAt(N,w)}R++}return null},lineTo:function(T,w){T instanceof g?this._tmpVec2B.copy(T):typeof T=="object"?this._tmpVec2B.setFromObject(T):this._tmpVec2B.set(T,w);var P=this.getEndPoint(this._tmpVec2A);return this.add(new h([P.x,P.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(T){return T.unshift(this.getEndPoint()),this.add(new d(T))},moveTo:function(T,w){return T instanceof g?this.add(new s(T.x,T.y)):this.add(new s(T,w))},toJSON:function(){for(var T=[],w=0;w<this.curves.length;w++)T.push(this.curves[w].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:T}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(T,w){return new S(T,w)}),o.exports=S},45893:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(24882),c=new a({initialize:function(h,s){this.parent=h,this.events=s,s||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(u){var h=this.list;if(Array.isArray(u)){for(var s=[],l=0;l<u.length;l++)s.push(h[u[l]]);return s}else return h[u]},getAll:function(){var u={};for(var h in this.list)this.list.hasOwnProperty(h)&&(u[h]=this.list[h]);return u},query:function(u){var h={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(u)&&(h[s]=this.list[s]);return h},set:function(u,h){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,h);for(var s in u)this.setValue(s,u[s]);return this},inc:function(u,h){if(this._frozen)return this;h===void 0&&(h=1);var s=this.get(u);return s===void 0&&(s=0),this.set(u,s+h),this},toggle:function(u){return this._frozen?this:(this.set(u,!this.get(u)),this)},setValue:function(u,h){if(this._frozen)return this;if(this.has(u))this.values[u]=h;else{var s=this,l=this.list,v=this.events,d=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return l[u]},set:function(g){if(!s._frozen){var y=l[u];l[u]=g,v.emit(x.CHANGE_DATA,d,u,g,y),v.emit(x.CHANGE_DATA_KEY+u,d,g,y)}}}),l[u]=h,v.emit(x.SET_DATA,d,u,h)}return this},each:function(u,h){for(var s=[this.parent,null,void 0],l=1;l<arguments.length;l++)s.push(arguments[l]);for(var v in this.list)s[1]=v,s[2]=this.list[v],u.apply(h,s);return this},merge:function(u,h){h===void 0&&(h=!0);for(var s in u)u.hasOwnProperty(s)&&(h||!h&&!this.has(s))&&this.setValue(s,u[s]);return this},remove:function(u){if(this._frozen)return this;if(Array.isArray(u))for(var h=0;h<u.length;h++)this.removeValue(u[h]);else return this.removeValue(u);return this},removeValue:function(u){if(this.has(u)){var h=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(x.REMOVE_DATA,this.parent,u,h)}return this},pop:function(u){var h=void 0;return!this._frozen&&this.has(u)&&(h=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(x.REMOVE_DATA,this.parent,u,h)),h},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var h in this.list)this.list[h]!==void 0&&u++;return u}}});o.exports=c},63646:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45893),c=e(37277),u=e(44594),h=new a({Extends:x,initialize:function(l){x.call(this,l,l.sys.events),this.scene=l,this.systems=l.sys,l.sys.events.once(u.BOOT,this.boot,this),l.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",h,"data"),o.exports=h},10700:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata"},93608:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata-"},60883:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},69780:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedata"},22166:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="setdata"},24882:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}},44965:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}},7098:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function c(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var u=document.createElement("audio"),h=!!u.canPlayType;try{if(h){var s=function(d,g){var y=u.canPlayType("audio/"+d).replace(/^no$/,"");return g?!!(y||u.canPlayType("audio/"+g).replace(/^no$/,"")):!!y};if(x.ogg=s('ogg; codecs="vorbis"'),x.opus=s('ogg; codecs="opus"',"opus"),x.mp3=s("mpeg"),x.wav=s("wav"),x.m4a=s("x-m4a"),x.aac=s("aac"),x.flac=s("flac","x-flac"),x.webm=s('webm; codecs="vorbis"'),u.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)x.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),v=parseInt(RegExp.$2,10);(l===10&&v>=11||l>10)&&(x.dolby=!0)}}}}catch{}return x}o.exports=c()},84148:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function c(){var u=navigator.userAgent;return/Edg\/\d+/.test(u)?(x.edge=!0,x.es2019=!0):/OPR/.test(u)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(u)&&!a.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(u)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(u)&&a.iOS?(x.mobileSafari=!0,x.es2019=!0):/MSIE (\d+\.\d+);/.test(u)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(u)&&!a.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(x.silk=!0),x}o.exports=c()},89289:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function c(){var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",l="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var d=new Image;d.onload=function(){var g=a.create2D(d,6),y=g.getContext("2d",{willReadFrequently:!0});if(y.globalCompositeOperation="multiply",y.drawImage(v,0,0),y.drawImage(d,2,0),!y.getImageData(2,0,1,1))return!1;var S=y.getImageData(2,0,1,1).data;a.remove(d),x.supportNewBlendModes=S[0]===255&&S[1]===0&&S[2]===0},d.src=s+"/wCKxvRF"+l},v.src=s+"AP804Oa6"+l,!1}function u(){var s=a.create2D(this,2),l=s.getContext("2d",{willReadFrequently:!0});l.fillStyle="rgba(10, 20, 30, 0.5)",l.fillRect(0,0,1,1);var v=l.getImageData(0,0,1,1);if(v===null)return!1;l.putImageData(v,1,0);var d=l.getImageData(1,0,1,1),g=d.data[0]===v.data[0]&&d.data[1]===v.data[1]&&d.data[2]===v.data[2]&&d.data[3]===v.data[3];return a.remove(this),g}function h(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=c(),x.supportInverseAlpha=u()),x}o.exports=h()},89357:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x=e(84148),c=e(27919),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var l=new ArrayBuffer(4),v=new Uint8Array(l),d=new Uint32Array(l);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function s(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch{u.localStorage=!1}u.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,u.fileSystem=!!window.requestFileSystem;var l=!1,v=function(){if(window.WebGLRenderingContext)try{var d=c.createWebGL(this),g=d.getContext("webgl")||d.getContext("experimental-webgl"),y=c.create2D(this),S=y.getContext("2d",{willReadFrequently:!0}),T=S.createImageData(1,1);return l=T.data instanceof Uint8ClampedArray,c.remove(d),c.remove(y),!!g}catch{return!1}return!1};return u.webGL=v(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(u.getUserMedia=!1),!a.iOS&&(x.ie||x.firefox||x.chrome)&&(u.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(u.littleEndian=h()),u.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&u.littleEndian!==null&&l,u}o.exports=s()},91639:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return E;var a,x="Fullscreen",c="FullScreen",u=["request"+x,"request"+c,"webkitRequest"+x,"webkitRequest"+c,"msRequest"+x,"msRequest"+c,"mozRequest"+c,"mozRequest"+x];for(a=0;a<u.length;a++)if(document.documentElement[u[a]]){E.available=!0,E.request=u[a];break}var h=["cancel"+c,"exit"+x,"webkitCancel"+c,"webkitExit"+x,"msCancel"+c,"msExit"+x,"mozCancel"+c,"mozExit"+x];if(E.available){for(a=0;a<h.length;a++)if(document[h[a]]){E.cancel=h[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(E.keyboard=!0),Object.defineProperty(E,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),E}o.exports=e()},31784:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function c(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}o.exports=c()},25892:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return E;var a=navigator.userAgent;/Windows/.test(a)?E.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(E.iOS=!0,E.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),E.iOSVersion=parseInt(RegExp.$1,10)):E.macOS=!0:/Android/.test(a)?E.android=!0:/Linux/.test(a)?E.linux=!0:/iP[ao]d|iPhone/i.test(a)?(E.iOS=!0,navigator.appVersion.match(/OS (\d+)/),E.iOSVersion=parseInt(RegExp.$1,10),E.iPhone=a.toLowerCase().indexOf("iphone")!==-1,E.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?E.kindle=!0:/CrOS/.test(a)&&(E.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(E.android=!1,E.iOS=!1,E.macOS=!1,E.windows=!0,E.windowsPhone=!0);var x=/Silk/.test(a);return(E.windows||E.macOS||E.linux&&!x||E.chromeOS)&&(E.desktop=!0),(E.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(E.desktop=!1),navigator.standalone&&(E.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(E.cordova=!0),window.ejecta!==void 0&&(E.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(E.node=!0),E.node&&typeof process.versions=="object"&&(E.nodeWebkit=!!process.versions["node-webkit"],E.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(E.crosswalk=!0),E.pixelRatio=window.devicePixelRatio||1,E}o.exports=e()},43267:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function c(){if(typeof importScripts=="function")return x;var u=document.createElement("video"),h=!!u.canPlayType,s=/^no$/;try{h&&(u.canPlayType('video/ogg; codecs="theora"').replace(s,"")&&(x.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(s,"")&&(x.h264=!0,x.mp4=!0),u.canPlayType("video/x-m4v").replace(s,"")&&(x.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(s,"")&&(x.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(s,"")&&(x.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(s,"")&&(x.hls=!0))}catch{}return u.parentNode&&u.parentNode.removeChild(u),x.getVideoURL=function(l){Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++){var d=a(l[v],"url",l[v]);if(d.indexOf("blob:")===0)return{url:d,type:""};var g;if(d.indexOf("data:")===0?g=d.split(",")[0].match(/\/(.*?);/):g=d.match(/\.([a-zA-Z0-9]+)($|\?)/),g=a(l[v],"type",g?g[1]:"").toLowerCase(),x[g])return{url:d,type:g}}return null},x}o.exports=c()},82264:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}},89422:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new Float32Array(20),c=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,h){u===void 0&&(u=0),h===void 0&&(h=!1);var s=u;return this.multiply([s,0,0,0,0,0,s,0,0,0,0,0,s,0,0,0,0,0,1,0],h)},saturate:function(u,h){u===void 0&&(u=0),h===void 0&&(h=!1);var s=u*2/3+1,l=(s-1)*-.5;return this.multiply([s,l,l,0,0,l,s,l,0,0,l,l,s,0,0,0,0,0,1,0],h)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,h){u===void 0&&(u=0),h===void 0&&(h=!1),u=u/180*Math.PI;var s=Math.cos(u),l=Math.sin(u),v=.213,d=.715,g=.072;return this.multiply([v+s*(1-v)+l*-.213,d+s*-.715+l*-.715,g+s*-.072+l*(1-g),0,0,v+s*-.213+l*.143,d+s*(1-d)+l*.14,g+s*-.072+l*-.283,0,0,v+s*-.213+l*-.787,d+s*-.715+l*d,g+s*(1-g)+l*g,0,0,0,0,0,1,0],h)},grayscale:function(u,h){return u===void 0&&(u=1),h===void 0&&(h=!1),this.saturate(-u,h)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(c.BLACK_WHITE,u)},contrast:function(u,h){u===void 0&&(u=0),h===void 0&&(h=!1);var s=u+1,l=-.5*(s-1);return this.multiply([s,0,0,0,l,0,s,0,0,l,0,0,s,0,l,0,0,0,1,0],h)},negative:function(u){return u===void 0&&(u=!1),this.multiply(c.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(c.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(c.SEPIA,u)},night:function(u,h){return u===void 0&&(u=.1),h===void 0&&(h=!1),this.multiply([u*-2,-u,0,0,0,-u,0,u,0,0,0,u,u*2,0,0,0,0,0,1,0],h)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(c.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(c.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(c.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(c.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(c.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(c.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(c.SHIFT_BGR,u)},multiply:function(u,h){h===void 0&&(h=!1),h||this.reset();var s=this._matrix,l=x;return l.set(s),s.set([l[0]*u[0]+l[1]*u[5]+l[2]*u[10]+l[3]*u[15],l[0]*u[1]+l[1]*u[6]+l[2]*u[11]+l[3]*u[16],l[0]*u[2]+l[1]*u[7]+l[2]*u[12]+l[3]*u[17],l[0]*u[3]+l[1]*u[8]+l[2]*u[13]+l[3]*u[18],l[0]*u[4]+l[1]*u[9]+l[2]*u[14]+l[3]*u[19]+l[4],l[5]*u[0]+l[6]*u[5]+l[7]*u[10]+l[8]*u[15],l[5]*u[1]+l[6]*u[6]+l[7]*u[11]+l[8]*u[16],l[5]*u[2]+l[6]*u[7]+l[7]*u[12]+l[8]*u[17],l[5]*u[3]+l[6]*u[8]+l[7]*u[13]+l[8]*u[18],l[5]*u[4]+l[6]*u[9]+l[7]*u[14]+l[8]*u[19]+l[9],l[10]*u[0]+l[11]*u[5]+l[12]*u[10]+l[13]*u[15],l[10]*u[1]+l[11]*u[6]+l[12]*u[11]+l[13]*u[16],l[10]*u[2]+l[11]*u[7]+l[12]*u[12]+l[13]*u[17],l[10]*u[3]+l[11]*u[8]+l[12]*u[13]+l[13]*u[18],l[10]*u[4]+l[11]*u[9]+l[12]*u[14]+l[13]*u[19]+l[14],l[15]*u[0]+l[16]*u[5]+l[17]*u[10]+l[18]*u[15],l[15]*u[1]+l[16]*u[6]+l[17]*u[11]+l[18]*u[16],l[15]*u[2]+l[16]*u[7]+l[17]*u[12]+l[18]*u[17],l[15]*u[3]+l[16]*u[8]+l[17]*u[13]+l[18]*u[18],l[15]*u[4]+l[16]*u[9]+l[17]*u[14]+l[18]*u[19]+l[19]]),this._dirty=!0,this}});c.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],c.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o.exports=c},51767:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(29747),c=new a({initialize:function(h,s,l){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(h,s,l)},set:function(u,h,s){return u===void 0&&(u=0),h===void 0&&(h=0),s===void 0&&(s=0),this._rgb=[u,h,s],this.onChange(),this},equals:function(u,h,s){var l=this._rgb;return l[0]===u&&l[1]===h&&l[2]===s},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});o.exports=c},60461:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};o.exports=E},54312:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(35893),c=e(86327),u=e(88417),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)+v),c(s,a(l)+d),s};o.exports=h},46768:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),c=e(86327),u=e(385),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)-v),c(s,a(l)+d),s};o.exports=h},35827:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),c=e(86327),u=e(40136),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)+v),c(s,a(l)+d),s};o.exports=h},46871:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66786),x=e(35893),c=e(7702),u=function(h,s,l,v){return l===void 0&&(l=0),v===void 0&&(v=0),a(h,x(s)+l,c(s)+v),h};o.exports=u},5198:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(26541),c=e(20786),u=e(385),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)-v),c(s,a(l)+d),s};o.exports=h},11879:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=[];x[a.BOTTOM_CENTER]=e(54312),x[a.BOTTOM_LEFT]=e(46768),x[a.BOTTOM_RIGHT]=e(35827),x[a.CENTER]=e(46871),x[a.LEFT_CENTER]=e(5198),x[a.RIGHT_CENTER]=e(80503),x[a.TOP_CENTER]=e(89698),x[a.TOP_LEFT]=e(922),x[a.TOP_RIGHT]=e(21373),x[a.LEFT_BOTTOM]=x[a.BOTTOM_LEFT],x[a.LEFT_TOP]=x[a.TOP_LEFT],x[a.RIGHT_BOTTOM]=x[a.BOTTOM_RIGHT],x[a.RIGHT_TOP]=x[a.TOP_RIGHT];var c=function(u,h,s,l,v){return x[s](u,h,l,v)};o.exports=c},80503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(54380),c=e(20786),u=e(40136),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)+v),c(s,a(l)+d),s};o.exports=h},89698:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),x=e(17717),c=e(88417),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,a(l)+v),u(s,x(l)-d),s};o.exports=h},922:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),c=e(385),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,a(l)-v),u(s,x(l)-d),s};o.exports=h},21373:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),c=e(40136),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,a(l)+v),u(s,x(l)-d),s};o.exports=h},91660:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}},71926:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=e(79291),c={In:e(91660),To:e(16694)};c=x(!1,c,a),o.exports=c},21578:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(35893),c=e(88417),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,x(l)+v),u(s,a(l)+d),s};o.exports=h},10210:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),c=e(385),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,x(l)-v),u(s,a(l)+d),s};o.exports=h},82341:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),c=e(40136),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,x(l)+v),u(s,a(l)+d),s};o.exports=h},87958:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),c=e(86327),u=e(40136),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)-v),c(s,a(l)+d),s};o.exports=h},40080:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(26541),c=e(20786),u=e(40136),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)-v),c(s,a(l)+d),s};o.exports=h},88466:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),c=e(40136),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,a(l)-v),u(s,x(l)-d),s};o.exports=h},38829:(o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=[];x[a.BOTTOM_CENTER]=e(21578),x[a.BOTTOM_LEFT]=e(10210),x[a.BOTTOM_RIGHT]=e(82341),x[a.LEFT_BOTTOM]=e(87958),x[a.LEFT_CENTER]=e(40080),x[a.LEFT_TOP]=e(88466),x[a.RIGHT_BOTTOM]=e(19211),x[a.RIGHT_CENTER]=e(34609),x[a.RIGHT_TOP]=e(48741),x[a.TOP_CENTER]=e(49440),x[a.TOP_LEFT]=e(81288),x[a.TOP_RIGHT]=e(61323);var c=function(u,h,s,l,v){return x[s](u,h,l,v)};o.exports=c},19211:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),c=e(86327),u=e(385),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)+v),c(s,a(l)+d),s};o.exports=h},34609:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(54380),c=e(20786),u=e(385),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,x(l)+v),c(s,a(l)+d),s};o.exports=h},48741:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),c=e(385),u=e(66737),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),c(s,a(l)+v),u(s,x(l)-d),s};o.exports=h},49440:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),x=e(17717),c=e(86327),u=e(88417),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,a(l)+v),c(s,x(l)-d),s};o.exports=h},81288:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),c=e(86327),u=e(385),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,a(l)-v),c(s,x(l)-d),s};o.exports=h},61323:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),c=e(86327),u=e(40136),h=function(s,l,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),u(s,a(l)+v),c(s,x(l)-d),s};o.exports=h},16694:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}},66786:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88417),x=e(20786),c=function(u,h,s){return a(u,h),x(u,s)};o.exports=c},62235:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y+e.height-e.height*e.originY};o.exports=E},72873:(o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),c=e(54380),u=e(17717),h=e(87841),s=function(l,v){v===void 0&&(v=new h);var d=x(l),g=u(l);return v.x=d,v.y=g,v.width=c(l)-d,v.height=a(l)-g,v};o.exports=s},35893:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x-e.width*e.originX+e.width*.5};o.exports=E},7702:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y-e.height*e.originY+e.height*.5};o.exports=E},26541:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x-e.width*e.originX};o.exports=E},87431:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.width*e.originX};o.exports=E},46928:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.height*e.originY};o.exports=E},54380:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x+e.width-e.width*e.originX};o.exports=E},17717:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y-e.height*e.originY};o.exports=E},86327:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.y=a-e.height+e.height*e.originY,e};o.exports=E},88417:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.width*e.originX;return e.x=a+x-e.width*.5,e};o.exports=E},20786:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.height*e.originY;return e.y=a+x-e.height*.5,e};o.exports=E},385:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x=a+e.width*e.originX,e};o.exports=E},40136:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x=a-e.width+e.width*e.originX,e};o.exports=E},66737:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.y=a+e.height*e.originY,e};o.exports=E},58724:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}},20623:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCrisp:function(e){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(x){e.style["image-rendering"]=x}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};o.exports=E},27919:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),x=e(68703),c=[],u=!1,h=function(){var s=function(P,A,R,I,M){A===void 0&&(A=1),R===void 0&&(R=1),I===void 0&&(I=a.CANVAS),M===void 0&&(M=!1);var L,N=d(I);return N===null?(N={parent:P,canvas:document.createElement("canvas"),type:I},I===a.CANVAS&&c.push(N),L=N.canvas):(N.parent=P,L=N.canvas),M&&(N.parent=L),L.width=A,L.height=R,u&&I===a.CANVAS&&x.disable(L.getContext("2d",{willReadFrequently:!1})),L},l=function(P,A,R){return s(P,A,R,a.CANVAS)},v=function(P,A,R){return s(P,A,R,a.WEBGL)},d=function(P){if(P===void 0&&(P=a.CANVAS),P===a.WEBGL)return null;for(var A=0;A<c.length;A++){var R=c[A];if(!R.parent&&R.type===P)return R}return null},g=function(P){var A=P instanceof HTMLCanvasElement;c.forEach(function(R){(A&&R.canvas===P||!A&&R.parent===P)&&(R.parent=null,R.canvas.width=1,R.canvas.height=1)})},y=function(){var P=0;return c.forEach(function(A){A.parent&&P++}),P},S=function(){return c.length-y()},T=function(){u=!0},w=function(){u=!1};return{create2D:l,create:s,createWebGL:v,disableSmoothing:T,enableSmoothing:w,first:d,free:S,pool:c,remove:g,total:y}};o.exports=h()},68703:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="",e=function(){var a=function(h){for(var s=["i","webkitI","msI","mozI","oI"],l=0;l<s.length;l++){var v=s[l]+"mageSmoothingEnabled";if(v in h)return v}return null},x=function(h){return E===""&&(E=a(h)),E&&(h[E]=!0),h},c=function(h){return E===""&&(E=a(h)),E&&(h[E]=!1),h},u=function(h){return E!==null?h[E]:null};return{disable:c,enable:x,getPrefix:a,isEnabled:u}};o.exports=e()},65208:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a="none"),e.style.msTouchAction=a,e.style["ms-touch-action"]=a,e.style["touch-action"]=a,e};o.exports=E},91610:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(c){e.style[c+"user-select"]=a}),e.style["-webkit-touch-callout"]=a,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};o.exports=E},26253:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}},40987:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37589),c=e(1e3),u=e(7537),h=e(87837),s=new a({initialize:function(v,d,g,y){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,d,g,y)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(l,v,d,g,y){return g===void 0&&(g=255),y===void 0&&(y=!0),this._locked=!0,this.red=l,this.green=v,this.blue=d,this.alpha=g,this._locked=!1,this.update(y)},setGLTo:function(l,v,d,g){return g===void 0&&(g=1),this._locked=!0,this.redGL=l,this.greenGL=v,this.blueGL=d,this.alphaGL=g,this._locked=!1,this.update(!0)},setFromRGB:function(l){return this._locked=!0,this.red=l.r,this.green=l.g,this.blue=l.b,l.hasOwnProperty("a")&&(this.alpha=l.a),this._locked=!1,this.update(!0)},setFromHSV:function(l,v,d){return u(l,v,d,this)},update:function(l){if(l===void 0&&(l=!1),this._locked)return this;var v=this.r,d=this.g,g=this.b,y=this.a;return this._color=x(v,d,g),this._color32=c(v,d,g,y),this._rgba="rgba("+v+","+d+","+g+","+y/255+")",l&&h(v,d,g,this),this},updateHSV:function(){var l=this.r,v=this.g,d=this.b;return h(l,v,d,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(l){return this.setTo(l,l,l)},random:function(l,v){l===void 0&&(l=0),v===void 0&&(v=255);var d=Math.floor(l+Math.random()*(v-l)),g=Math.floor(l+Math.random()*(v-l)),y=Math.floor(l+Math.random()*(v-l));return this.setTo(d,g,y)},randomGray:function(l,v){l===void 0&&(l=0),v===void 0&&(v=255);var d=Math.floor(l+Math.random()*(v-l));return this.setTo(d,d,d)},saturate:function(l){return this.s+=l/100,this},desaturate:function(l){return this.s-=l/100,this},lighten:function(l){return this.v+=l/100,this},darken:function(l){return this.v-=l/100,this},brighten:function(l){var v=this.r,d=this.g,g=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(l/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(l/100)))),g=Math.max(0,Math.min(255,g-Math.round(255*-(l/100)))),this.setTo(v,d,g)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(l){this.gl[0]=Math.min(Math.abs(l),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(l){this.gl[1]=Math.min(Math.abs(l),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(l){this.gl[2]=Math.min(Math.abs(l),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(l){this.gl[3]=Math.min(Math.abs(l),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(l){l=Math.floor(Math.abs(l)),this.r=Math.min(l,255),this.gl[0]=l/255,this.update(!0)}},green:{get:function(){return this.g},set:function(l){l=Math.floor(Math.abs(l)),this.g=Math.min(l,255),this.gl[1]=l/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(l){l=Math.floor(Math.abs(l)),this.b=Math.min(l,255),this.gl[2]=l/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(l){l=Math.floor(Math.abs(l)),this.a=Math.min(l,255),this.gl[3]=l/255,this.update()}},h:{get:function(){return this._h},set:function(l){this._h=l,u(l,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(l){this._s=l,u(this._h,l,this._v,this)}},v:{get:function(){return this._v},set:function(l){this._v=l,u(this._h,this._s,l,this)}}});o.exports=s},92728:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),x=function(c){c===void 0&&(c=1024);var u=[],h=255,s,l=255,v=0,d=0;for(s=0;s<=h;s++)u.push({r:l,g:s,b:d,color:a(l,s,d)});for(v=255,s=h;s>=0;s--)u.push({r:s,g:v,b:d,color:a(s,v,d)});for(l=0,s=0;s<=h;s++,v--)u.push({r:l,g:v,b:s,color:a(l,v,s)});for(v=0,d=255,s=0;s<=h;s++,d--,l++)u.push({r:l,g:v,b:d,color:a(l,v,d)});if(c===1024)return u;var g=[],y=0,S=1024/c;for(s=0;s<c;s++)g.push(u[Math.floor(y)]),y+=S;return g};o.exports=x},91588:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(a.a=e>>>24),a};o.exports=E},62957:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.toString(16);return a.length===1?"0"+a:a};o.exports=E},37589:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e<<16|a<<8|x};o.exports=E},1e3:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return c<<24|e<<16|a<<8|x};o.exports=E},62183:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=e(89528),c=function(u,h,s){var l=s,v=s,d=s;if(h!==0){var g=s<.5?s*(1+h):s+h-s*h,y=2*s-g;l=x(y,g,u+1/3),v=x(y,g,u),d=x(y,g,u-1/3)}var S=new a;return S.setGLTo(l,v,d,1)};o.exports=c},27939:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7537),x=function(c,u){c===void 0&&(c=1),u===void 0&&(u=1);for(var h=[],s=0;s<=359;s++)h.push(a(s/359,c,u));return h};o.exports=x},7537:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589);function x(u,h,s,l){var v=(u+h*6)%6,d=Math.min(v,4-v,1);return Math.round(255*(l-l*s*Math.max(0,d)))}var c=function(u,h,s,l){h===void 0&&(h=1),s===void 0&&(s=1);var v=x(5,u,h,s),d=x(3,u,h,s),g=x(1,u,h,s);return l?l.setTo?l.setTo(v,d,g,l.alpha,!0):(l.r=v,l.g=d,l.b=g,l.color=a(v,d,g),l):{r:v,g:d,b:g,color:a(v,d,g)}};o.exports=c},70238:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(c){var u=new a;c=c.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,g,y,S){return g+g+y+y+S+S});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(h){var s=parseInt(h[1],16),l=parseInt(h[2],16),v=parseInt(h[3],16);u.setTo(s,l,v)}return u};o.exports=x},89528:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?e+(a-e)*6*x:x<.5?a:x<.6666666666666666?e+(a-e)*(.6666666666666666-x)*6:e};o.exports=E},30100:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=e(90664),c=function(u){var h=x(u);return new a(h.r,h.g,h.b,h.a)};o.exports=c},90664:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};o.exports=E},13699:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),x=function(h,s,l,v,d,g,y,S){y===void 0&&(y=100),S===void 0&&(S=0);var T=S/y;return{r:a(h,v,T),g:a(s,d,T),b:a(l,g,T)}},c=function(h,s,l,v){return l===void 0&&(l=100),v===void 0&&(v=0),x(h.r,h.g,h.b,s.r,s.g,s.b,l,v)},u=function(h,s,l,v,d,g){return d===void 0&&(d=100),g===void 0&&(g=0),x(h.r,h.g,h.b,s,l,v,d,g)};o.exports={RGBWithRGB:x,ColorWithRGB:u,ColorWithColor:c}},68957:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(c){return new a(c.r,c.g,c.b,c.a)};o.exports=x},87388:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(c){var u=new a,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(c.toLowerCase());if(h){var s=parseInt(h[1],10),l=parseInt(h[2],10),v=parseInt(h[3],10),d=h[4]!==void 0?parseFloat(h[4]):1;u.setTo(s,l,v,d*255)}return u};o.exports=x},87837:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){c===void 0&&(c={h:0,s:0,v:0}),e/=255,a/=255,x/=255;var u=Math.min(e,a,x),h=Math.max(e,a,x),s=h-u,l=0,v=h===0?0:s/h,d=h;return h!==u&&(h===e?l=(a-x)/s+(a<x?6:0):h===a?l=(x-e)/s+2:h===x&&(l=(e-a)/s+4),l/=6),c.hasOwnProperty("_h")?(c._h=l,c._s=v,c._v=d):(c.h=l,c.s=v,c.v=d),c};o.exports=E},75723:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62957),x=function(c,u,h,s,l){return s===void 0&&(s=255),l===void 0&&(l="#"),l==="#"?"#"+((1<<24)+(c<<16)+(u<<8)+h).toString(16).slice(1,7):"0x"+a(s)+a(c)+a(u)+a(h)};o.exports=x},85386:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(40987),c=function(u,h){return u===void 0&&(u=0),h===void 0&&(h=255),new x(a(u,h),a(u,h),a(u,h))};o.exports=c},80333:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70238),x=e(30100),c=e(68957),u=e(87388),h=function(s){var l=typeof s;switch(l){case"string":return s.substr(0,3).toLowerCase()==="rgb"?u(s):a(s);case"number":return x(s);case"object":return c(s)}};o.exports=h},3956:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987);a.ColorSpectrum=e(92728),a.ColorToRGBA=e(91588),a.ComponentToHex=e(62957),a.GetColor=e(37589),a.GetColor32=e(1e3),a.HexStringToColor=e(70238),a.HSLToColor=e(62183),a.HSVColorWheel=e(27939),a.HSVToRGB=e(7537),a.HueToComponent=e(89528),a.IntegerToColor=e(30100),a.IntegerToRGB=e(90664),a.Interpolate=e(13699),a.ObjectToColor=e(68957),a.RandomRGB=e(85386),a.RGBStringToColor=e(87388),a.RGBToHSV=e(87837),a.RGBToString=e(75723),a.ValueToColor=e(80333),o.exports=a},27460:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}},6858:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39429),c=new a({initialize:function(h,s,l,v,d,g){s||(s=h.sys.make.image({x:l,y:v,key:d,frame:g,add:!1})),this.bitmapMask=s,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,h,s){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,s)},postRenderWebGL:function(u,h,s){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(u,h,s,l,v){return new c(this.scene,u,h,s,l,v)}),o.exports=c},80661:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(c){return this.geometryMask=c,this},setInvertAlpha:function(c){return c===void 0&&(c=!0),this.invertAlpha=c,this},preRenderWebGL:function(c,u,h){var s=c.gl;c.flush(),c.maskStack.length===0&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),c.maskCount=0),c.currentCameraMask.mask!==this&&(c.currentMask.mask=this),c.maskStack.push({mask:this,camera:h}),this.applyStencil(c,h,!0),c.maskCount++},applyStencil:function(c,u,h){var s=c.gl,l=this.geometryMask,v=c.maskCount,d=255;s.colorMask(!1,!1,!1,!1),h?(s.stencilFunc(s.EQUAL,v,d),s.stencilOp(s.KEEP,s.KEEP,s.INCR),v++):(s.stencilFunc(s.EQUAL,v+1,d),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),this.level=v,l.renderWebGL(c,l,u),c.flush(),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),this.invertAlpha?s.stencilFunc(s.NOTEQUAL,v,d):s.stencilFunc(s.EQUAL,v,d)},postRenderWebGL:function(c){var u=c.gl;c.maskStack.pop(),c.maskCount--,c.flush();var h=c.currentMask;if(c.maskStack.length===0)h.mask=null,u.disable(u.STENCIL_TEST);else{var s=c.maskStack[c.maskStack.length-1];s.mask.applyStencil(c,s.camera,!1),c.currentCameraMask.mask!==s.mask?(h.mask=s.mask,h.camera=s.camera):h.mask=null}},preRenderCanvas:function(c,u,h){var s=this.geometryMask;c.currentContext.save(),s.renderCanvas(c,s,h,null,null,!0),c.currentContext.clip()},postRenderCanvas:function(c){c.currentContext.restore()},destroy:function(){this.geometryMask=null}});o.exports=x},69781:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BitmapMask:e(6858),GeometryMask:e(80661)}},73894:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!s||s==="")&&(s=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),l===void 0&&(l=null),this.key=u,this.fragmentSrc=h,this.vertexSrc=s,this.uniforms=l}});o.exports=x},40366:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x;if(a)typeof a=="string"?x=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(x=a);else if(e.parentElement||a===null)return e;return x||(x=document.body),x.appendChild(e),e};o.exports=E},83719:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=function(c){var u=c.config;if(!(!u.parent||!u.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+c.scale.width+"px;","height: "+c.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+u.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),c.domContainer=h,a(h,u.parent)}};o.exports=x},57264:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x=function(c){if(document.readyState==="complete"||document.readyState==="interactive"){c();return}var u=function(){document.removeEventListener("deviceready",u,!0),document.removeEventListener("DOMContentLoaded",u,!0),window.removeEventListener("load",u,!0),c()};document.body?a.cordova?document.addEventListener("deviceready",u,!1):(document.addEventListener("DOMContentLoaded",u,!0),window.addEventListener("load",u,!0)):window.setTimeout(u,20)};o.exports=x},57811:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!e)return window.innerHeight;var a=Math.abs(window.orientation),x={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),x.w=a===90?c.offsetHeight:window.innerWidth,x.h=a===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?x.h:x.w};o.exports=E},45818:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),x=function(c,u){var h=window.screen,s=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(s&&typeof s.type=="string")return s.type;if(typeof s=="string")return s;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return u>c?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};o.exports=x},74403:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a;return e!==""&&(typeof e=="string"?a=document.getElementById(e):e&&e.nodeType===1&&(a=e)),a||(a=document.body),a};o.exports=E},56836:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a="";try{if(window.DOMParser){var x=new DOMParser;a=x.parseFromString(e,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(e)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};o.exports=E},35846:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){e.parentNode&&e.parentNode.removeChild(e)};o.exports=E},43092:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(29747),c=new a({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function s(l){h.callback(l),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(s))},this.stepTimeout=function s(){h.isRunning&&(h.timeOutID=window.setTimeout(s,h.delay)),h.callback(window.performance.now())}},start:function(u,h,s){this.isRunning||(this.callback=u,this.isSetTimeOut=h,this.delay=s,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});o.exports=c},84902:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};o.exports=a},47565:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(37277),u=new a({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",u,"events"),o.exports=u},93055:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EventEmitter:e(47565)}},20122:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l){l===void 0&&(l=1),x.call(this,c.BARREL,s),this.amount=l}});o.exports=u},32251:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S){v===void 0&&(v=1),d===void 0&&(d=1),g===void 0&&(g=1),y===void 0&&(y=1),S===void 0&&(S=4),x.call(this,c.BLOOM,s),this.steps=S,this.offsetX=v,this.offsetY=d,this.blurStrength=g,this.strength=y,this.glcolor=[1,1,1],l!=null&&(this.color=l)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}}});o.exports=u},9047:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S){l===void 0&&(l=0),v===void 0&&(v=2),d===void 0&&(d=2),g===void 0&&(g=1),S===void 0&&(S=4),x.call(this,c.BLUR,s),this.quality=l,this.x=v,this.y=d,this.steps=S,this.strength=g,this.glcolor=[1,1,1],y!=null&&(this.color=y)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}}});o.exports=u},27885:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S,T){l===void 0&&(l=.5),v===void 0&&(v=1),d===void 0&&(d=.2),g===void 0&&(g=!1),y===void 0&&(y=1),S===void 0&&(S=1),T===void 0&&(T=1),x.call(this,c.BOKEH,s),this.radius=l,this.amount=v,this.contrast=d,this.isTiltShift=g,this.strength=T,this.blurX=y,this.blurY=S}});o.exports=u},12578:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y){l===void 0&&(l=8),g===void 0&&(g=1),y===void 0&&(y=.005),x.call(this,c.CIRCLE,s),this.scale=g,this.feather=y,this.thickness=l,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],v!=null&&(this.color=v),d!=null&&(this.backgroundColor=d)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor2;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(h){this.glcolor2[3]=h}}});o.exports=u},15802:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89422),c=e(14811),u=new a({Extends:x,initialize:function(s){x.call(this),this.type=c.COLOR_MATRIX,this.gameObject=s,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});o.exports=u},72898:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h){this.type=u,this.gameObject=h,this.active=!0},setActive:function(c){return this.active=c,this},destroy:function(){this.gameObject=null,this.active=!1}});o.exports=x},44553:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d){l===void 0&&(l="__WHITE"),v===void 0&&(v=.005),d===void 0&&(d=.005),x.call(this,c.DISPLACEMENT,s),this.x=v,this.y=d,this.glTexture,this.setTexture(l)},setTexture:function(h){var s=this.gameObject.scene.sys.textures.getFrame(h);return s&&(this.glTexture=s.glTexture),this}});o.exports=u},68531:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g){v===void 0&&(v=4),d===void 0&&(d=0),g===void 0&&(g=!1),x.call(this,c.GLOW,s),this.outerStrength=v,this.innerStrength=d,this.knockout=g,this.glcolor=[1,1,1,1],l!==void 0&&(this.color=l)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}}});o.exports=u},37102:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S,T,w){d===void 0&&(d=.2),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=1),w===void 0&&(w=0),x.call(this,c.GRADIENT,s),this.alpha=d,this.size=w,this.fromX=g,this.fromY=y,this.toX=S,this.toY=T,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],l!=null&&(this.color1=l),v!=null&&(this.color2=v)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var s=this.glcolor1;s[0]=h>>16&255,s[1]=h>>8&255,s[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var s=this.glcolor2;s[0]=h>>16&255,s[1]=h>>8&255,s[2]=h&255}}});o.exports=u},86886:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l){l===void 0&&(l=1),x.call(this,c.PIXELATE,s),this.amount=l}});o.exports=u},92322:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S,T){l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=.1),g===void 0&&(g=1),S===void 0&&(S=6),T===void 0&&(T=1),x.call(this,c.SHADOW,s),this.x=l,this.y=v,this.decay=d,this.power=g,this.glcolor=[0,0,0,1],this.samples=S,this.intensity=T,y!==void 0&&(this.color=y)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var s=this.glcolor;s[0]=(h>>16&255)/255,s[1]=(h>>8&255)/255,s[2]=(h&255)/255}}});o.exports=u},39563:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g){l===void 0&&(l=.5),v===void 0&&(v=.5),d===void 0&&(d=3),g===void 0&&(g=!1),x.call(this,c.SHINE,s),this.speed=l,this.lineWidth=v,this.gradient=d,this.reveal=g}});o.exports=u},56448:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g){l===void 0&&(l=.5),v===void 0&&(v=.5),d===void 0&&(d=.5),g===void 0&&(g=.5),x.call(this,c.VIGNETTE,s),this.x=l,this.y=v,this.radius=d,this.strength=g}});o.exports=u},38433:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),c=e(14811),u=new a({Extends:x,initialize:function(s,l,v,d,g){l===void 0&&(l=.1),v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=!1),x.call(this,c.WIPE,s),this.progress=0,this.wipeWidth=l,this.direction=v,this.axis=d,this.reveal=g}});o.exports=u},14811:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};o.exports=E},66064:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(14811),c={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};c=a(!1,c,x),o.exports=c},25305:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(23568),c=function(u,h,s){h.x=x(s,"x",0),h.y=x(s,"y",0),h.depth=x(s,"depth",0),h.flipX=x(s,"flipX",!1),h.flipY=x(s,"flipY",!1);var l=x(s,"scale",null);typeof l=="number"?h.setScale(l):l!==null&&(h.scaleX=x(l,"x",1),h.scaleY=x(l,"y",1));var v=x(s,"scrollFactor",null);typeof v=="number"?h.setScrollFactor(v):v!==null&&(h.scrollFactorX=x(v,"x",1),h.scrollFactorY=x(v,"y",1)),h.rotation=x(s,"rotation",0);var d=x(s,"angle",null);d!==null&&(h.angle=d),h.alpha=x(s,"alpha",1);var g=x(s,"origin",null);if(typeof g=="number")h.setOrigin(g);else if(g!==null){var y=x(g,"x",.5),S=x(g,"y",.5);h.setOrigin(y,S)}h.blendMode=x(s,"blendMode",a.NORMAL),h.visible=x(s,"visible",!0);var T=x(s,"add",!0);return T&&u.sys.displayList.add(h),h.preUpdate&&u.sys.updateList.add(h),h};o.exports=c},13059:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23568),x=function(c,u){var h=a(u,"anims",null);if(h===null)return c;if(typeof h=="string")c.anims.play(h);else if(typeof h=="object"){var s=c.anims,l=a(h,"key",void 0);if(l){var v=a(h,"startFrame",void 0),d=a(h,"delay",0),g=a(h,"repeat",0),y=a(h,"repeatDelay",0),S=a(h,"yoyo",!1),T=a(h,"play",!1),w=a(h,"delayedPlay",0),P={key:l,delay:d,repeat:g,repeatDelay:y,yoyo:S,startFrame:v};T?s.play(P):w>0?s.playAfterDelay(P,w):s.load(P)}}return c};o.exports=x},8050:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(73162),c=e(37277),u=e(51708),h=e(44594),s=e(19186),l=new a({Extends:x,initialize:function(d){x.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.parentContainer&&v.parentContainer.remove(v),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(u.ADDED_TO_SCENE,v,this.scene),this.events.emit(h.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(u.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(s(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,d){return v._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list;v.length;)v[0].destroy(!0);this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});c.register("DisplayList",l,"displayList"),o.exports=l},95643:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(53774),c=e(45893),u=e(50792),h=e(51708),s=e(44594),l=new a({Extends:u,initialize:function(d,g){u.call(this),this.scene=d,this.displayList=null,this.type=g,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(v,d){return this.data||(this.data=new c(this)),this.data.set(v,d),this},incData:function(v,d){return this.data||(this.data=new c(this)),this.data.inc(v,d),this},toggleData:function(v){return this.data||(this.data=new c(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new c(this)),this.data.get(v)},setInteractive:function(v,d,g){return this.scene.sys.input.enable(this,v,d,g),this},disableInteractive:function(v){return v===void 0&&(v=!1),this.scene.sys.input.disable(this,v),this},removeInteractive:function(v){return v===void 0&&(v=!1),this.scene.sys.input.clear(this),v&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(v){var d=this.displayList&&this.displayList.active?this.displayList.willRender(v):!0;return!(!d||l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,d=this.parentContainer,g=[];d&&(g.unshift(d.getIndex(v)),v=d,d.parentContainer);)d=d.parentContainer;return this.displayList?g.unshift(this.displayList.getIndex(v)):g.unshift(this.scene.sys.displayList.getIndex(v)),g},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),v.events.emit(s.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v&&v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(s.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var v=null;return this.parentContainer?v=this.parentContainer.list:this.displayList&&(v=this.displayList.list),v},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,o.exports=l},44603:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),c=e(44594),u=new a({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(h,s){u.prototype.hasOwnProperty(h)||(u.prototype[h]=s)},u.remove=function(h){u.prototype.hasOwnProperty(h)&&delete u.prototype[h]},x.register("GameObjectCreator",u,"make"),o.exports=u},39429:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),c=e(44594),u=new a({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(h,s){u.prototype.hasOwnProperty(h)||(u.prototype[h]=s)},u.remove=function(h){u.prototype.hasOwnProperty(h)&&delete u.prototype[h]},x.register("GameObjectFactory",u,"add"),o.exports=u},91296:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=new a,c=new a,u=new a,h={camera:x,sprite:c,calc:u},s=function(l,v,d){var g=x,y=c,S=u;return y.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),g.copyFrom(v.matrix),d?(g.multiplyWithOffset(d,-v.scrollX*l.scrollFactorX,-v.scrollY*l.scrollFactorY),y.e=l.x,y.f=l.y):(y.e-=v.scrollX*l.scrollFactorX,y.f-=v.scrollY*l.scrollFactorY),g.multiply(y,S),h};o.exports=s},45027:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(25774),c=e(37277),u=e(44594),h=new a({Extends:x,initialize:function(l){x.call(this),this.checkQueue=!0,this.scene=l,this.systems=l.sys,l.sys.events.once(u.BOOT,this.boot,this),l.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(u.PRE_UPDATE,this.update,this),s.on(u.UPDATE,this.sceneUpdate,this),s.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,l){for(var v=this._active,d=v.length,g=0;g<d;g++){var y=v[g];y.active&&y.preUpdate.call(y,s,l)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var l=this.systems.events;l.off(u.PRE_UPDATE,this.update,this),l.off(u.UPDATE,this.sceneUpdate,this),l.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",h,"updateList"),o.exports=h},3217:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h,s,l,v,d,g,y,S,T,w){var P=x.x-a.displayOriginX+u,A=x.y-a.displayOriginY+h,R=P+x.w,I=A+x.h,M=s.a,L=s.b,N=s.c,G=s.d,D=s.e,B=s.f,$=P*M+A*N+D,k=P*L+A*G+B,X=P*M+I*N+D,Y=P*L+I*G+B,Z=R*M+I*N+D,Q=R*L+I*G+B,j=R*M+A*N+D,K=R*L+A*G+B;l&&($=Math.round($),k=Math.round(k),X=Math.round(X),Y=Math.round(Y),Z=Math.round(Z),Q=Math.round(Q),j=Math.round(j),K=Math.round(K)),e.batchQuad(a,$,k,X,Y,Z,Q,j,K,c.u0,c.v0,c.u1,c.v1,v,d,g,y,S,T,w)};o.exports=E},53048:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){if(x===void 0&&(x=!1),c===void 0)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},c;var u=e.text,h=u.length,s=e.maxWidth,l=e.wordWrapCharCode,v=Number.MAX_VALUE,d=Number.MAX_VALUE,g=0,y=0,S=e.fontData.chars,T=e.fontData.lineHeight,w=e.letterSpacing,P=e.lineSpacing,A=0,R=0,I=0,M=null,L=e._align,N=0,G=0,D=e.fontSize/e.fontData.size,B=D*e.scaleX,$=D*e.scaleY,k=null,X=0,Y=[],Z=Number.MAX_VALUE,Q=0,j=0,K=0,W,V,J,ee=[],te=[],ne=null,se=function(Xe,Je){for(var We=0,Ze=0;Ze<Xe.length;Ze++){var Qe=Xe.charCodeAt(Ze),ut=Je.chars[Qe];ut&&(We+=ut.xAdvance)}return We*B};if(s>0){J=u.split(`
`);var ae=[];for(W=0;W<J.length;W++){var ue=J[W],de="",fe="",ye="",ve="";for(V=0;V<ue.length;V++)if(I=ue.charCodeAt(V),de+=ue[V],I===l||V===ue.length-1){ve=ye+de;var Se=se(ve,e.fontData);Se<=s?ye=ve:(fe=fe.slice(0,-1),fe+=(fe?`
`:"")+ye,ye=de),de=""}fe=fe.slice(0,-1),fe+=(fe?`
`:"")+ye,ae.push(fe)}u=ae.join(`
`),c.wrappedText=u,h=u.length}var Ie=0;for(W=0;W<h;W++){if(I=u.charCodeAt(W),I===10){ne!==null&&(ee.push({word:ne.word,i:ne.i,x:ne.x*B,y:ne.y*$,w:ne.w*B,h:ne.h*$}),ne=null),k=null,Y[j]=K,K>Q&&(Q=K),K<Z&&(Z=K),j++,K=0,A=0,R=(T+P)*j;continue}if(M=S[I],!!M){if(N=A,G=R,k!==null){var Ae=M.kerning[X];N+=Ae!==void 0?Ae:0}v>N&&(v=N),d>G&&(d=G);var Oe=N+M.xAdvance,xe=G+T;g<Oe&&(g=Oe),y<xe&&(y=xe);var be=M.xOffset+M.xAdvance+(Ae!==void 0?Ae:0);I===l?ne!==null&&(ee.push({word:ne.word,i:ne.i,x:ne.x*B,y:ne.y*$,w:ne.w*B,h:ne.h*$}),ne=null):(ne===null&&(ne={word:"",i:Ie,x:A,y:R,w:0,h:T}),ne.word=ne.word.concat(u[W]),ne.w+=be),te.push({i:Ie,idx:W,char:u[W],code:I,x:(M.xOffset+N)*D,y:(M.yOffset+R)*D,w:M.width*D,h:M.height*D,t:R*D,r:Oe*D,b:T*D,line:j,glyph:M}),A+=M.xAdvance+w+(Ae!==void 0?Ae:0),k=M,X=I,K=Oe*D,Ie++}}if(ne!==null&&ee.push({word:ne.word,i:ne.i,x:ne.x*B,y:ne.y*$,w:ne.w*B,h:ne.h*$}),Y[j]=K,K>Q&&(Q=K),K<Z&&(Z=K),L>0)for(var Pe=0;Pe<te.length;Pe++){var Ge=te[Pe];if(L===1){var ze=(Q-Y[Ge.line])/2;Ge.x+=ze,Ge.r+=ze}else if(L===2){var je=Q-Y[Ge.line];Ge.x+=je,Ge.r+=je}}var $e=c.local,ke=c.global;return J=c.lines,$e.x=v*D,$e.y=d*D,$e.width=g*D,$e.height=y*D,ke.x=e.x-e._displayOriginX+v*B,ke.y=e.y-e._displayOriginY+d*$,ke.width=g*B,ke.height=y*$,J.shortest=Z,J.longest=Q,J.lengths=Y,a&&($e.x=Math.ceil($e.x),$e.y=Math.ceil($e.y),$e.width=Math.ceil($e.width),$e.height=Math.ceil($e.height),ke.x=Math.ceil(ke.x),ke.y=Math.ceil(ke.y),ke.width=Math.ceil(ke.width),ke.height=Math.ceil(ke.height),J.shortest=Math.ceil(Z),J.longest=Math.ceil(Q)),x&&(e._displayOriginX=e.originX*$e.width,e._displayOriginY=e.originY*$e.height,ke.x=e.x-e._displayOriginX*e.scaleX,ke.y=e.y-e._displayOriginY*e.scaleY,a&&(ke.x=Math.ceil(ke.x),ke.y=Math.ceil(ke.y))),c.words=ee,c.characters=te,c.lines.height=T,c.scale=D,c.scaleX=e.scaleX,c.scaleY=e.scaleY,c};o.exports=E},61327:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21859),x=function(c,u,h,s,l,v,d){var g=c.sys.textures.get(h),y=g.get(s),S=c.sys.cache.xml.get(l);if(y&&S){var T=a(S,y,v,d,g);return c.sys.cache.bitmapFont.add(u,{data:T,texture:h,frame:s,fromAtlas:!0}),!0}else return!1};o.exports=x},6925:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=function(c,u){var h=u.width,s=u.height,l=Math.floor(h/2),v=Math.floor(s/2),d=a(u,"chars","");if(d!==""){var g=a(u,"image",""),y=c.sys.textures.getFrame(g),S=y.cutX,T=y.cutY,w=y.source.width,P=y.source.height,A=a(u,"offset.x",0),R=a(u,"offset.y",0),I=a(u,"spacing.x",0),M=a(u,"spacing.y",0),L=a(u,"lineSpacing",0),N=a(u,"charsPerRow",null);N===null&&(N=w/h,N>d.length&&(N=d.length));for(var G=A,D=R,B={retroFont:!0,font:g,size:h,lineHeight:s+L,chars:{}},$=0,k=0;k<d.length;k++){var X=d.charCodeAt(k),Y=(S+G)/w,Z=(T+D)/P,Q=(S+G+h)/w,j=(T+D+s)/P;B.chars[X]={x:G,y:D,width:h,height:s,centerX:l,centerY:v,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:Y,v0:Z,u1:Q,v1:j},$++,$===N?($=0,G=A,D+=s+M):G+=h+I}var K={data:B,frame:null,texture:g};return K}};o.exports=x},21859:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(a,x){return parseInt(a.getAttribute(x),10)}var e=function(a,x,c,u,h){c===void 0&&(c=0),u===void 0&&(u=0);var s=x.cutX,l=x.cutY,v=x.source.width,d=x.source.height,g=x.sourceIndex,y={},S=a.getElementsByTagName("info")[0],T=a.getElementsByTagName("common")[0];y.font=S.getAttribute("face"),y.size=E(S,"size"),y.lineHeight=E(T,"lineHeight")+u,y.chars={};var w=a.getElementsByTagName("char"),P=x!==void 0&&x.trimmed;if(P)var A=x.height,R=x.width;for(var I=0;I<w.length;I++){var M=w[I],L=E(M,"id"),N=String.fromCharCode(L),G=E(M,"x"),D=E(M,"y"),B=E(M,"width"),$=E(M,"height");P&&(G<R&&(R=G),D<A&&(A=D)),P&&A!==0&&R!==0&&(G-=x.x,D-=x.y);var k=(s+G)/v,X=(l+D)/d,Y=(s+G+B)/v,Z=(l+D+$)/d;if(y.chars[L]={x:G,y:D,width:B,height:$,centerX:Math.floor(B/2),centerY:Math.floor($/2),xOffset:E(M,"xoffset"),yOffset:E(M,"yoffset"),xAdvance:E(M,"xadvance")+c,data:{},kerning:{},u0:k,v0:X,u1:Y,v1:Z},h&&B!==0&&$!==0){var Q=h.add(N,g,G,D,B,$);Q&&Q.setUVs(B,$,k,X,Y,Z)}}var j=a.getElementsByTagName("kerning");for(I=0;I<j.length;I++){var K=j[I],W=E(K,"first"),V=E(K,"second"),J=E(K,"amount");y.chars[V].kerning[W]=J}return y};o.exports=e},196:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87662),x=e(79291),c={Parse:e(6925)};c=x(!1,c,a),o.exports=c},87662:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};o.exports=E},2638:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(83419),c=e(12310),u=new x({Extends:a,Mixins:[c],initialize:function(s,l,v,d,g,y,S){a.call(this,s,l,v,d,g,y,S),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,s){return this.cropWidth=h,this.cropHeight=s,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});o.exports=u},86741:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),x=function(c,u,h,s){var l=u._text,v=l.length,d=c.currentContext;if(!(v===0||!a(c,d,u,h,s))){h.addToRenderList(u);var g=u.fromAtlas?u.frame:u.texture.frames.__BASE,y=u.displayCallback,S=u.callbackData,T=u.fontData.chars,w=u.fontData.lineHeight,P=u._letterSpacing,A=0,R=0,I=0,M=null,L=0,N=0,G=0,D=0,B=0,$=0,k=null,X=0,Y=u.frame.source.image,Z=g.cutX,Q=g.cutY,j=0,K=0,W=u._fontSize/u.fontData.size,V=u._align,J=0,ee=0;u.getTextBounds(!1);var te=u._bounds.lines;V===1?ee=(te.longest-te.lengths[0])/2:V===2&&(ee=te.longest-te.lengths[0]),d.translate(-u.displayOriginX,-u.displayOriginY);var ne=h.roundPixels;u.cropWidth>0&&u.cropHeight>0&&(d.beginPath(),d.rect(0,0,u.cropWidth,u.cropHeight),d.clip());for(var se=0;se<v;se++){if(K=W,j=0,I=l.charCodeAt(se),I===10){J++,V===1?ee=(te.longest-te.lengths[J])/2:V===2&&(ee=te.longest-te.lengths[J]),A=0,R+=w,k=null;continue}if(M=T[I],!!M){if(L=Z+M.x,N=Q+M.y,G=M.width,D=M.height,B=M.xOffset+A-u.scrollX,$=M.yOffset+R-u.scrollY,k!==null){var ae=M.kerning[X];B+=ae!==void 0?ae:0}if(y){S.index=se,S.charCode=I,S.x=B,S.y=$,S.scale=K,S.rotation=j,S.data=M.data;var ue=y(S);B=ue.x,$=ue.y,K=ue.scale,j=ue.rotation}B*=K,$*=K,B+=ee,A+=M.xAdvance+P+(ae!==void 0?ae:0),k=M,X=I,!(G===0||D===0||I===32)&&(ne&&(B=Math.round(B),$=Math.round($)),d.save(),d.translate(B,$),d.rotate(j),d.scale(K,K),d.drawImage(Y,L,N,G,D,0,0,G,D),d.restore())}}d.restore()}};o.exports=x},11164:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),x=e(25305),c=e(44603),u=e(23568);c.register("dynamicBitmapText",function(h,s){h===void 0&&(h={});var l=u(h,"font",""),v=u(h,"text",""),d=u(h,"size",!1),g=new a(this.scene,0,0,l,v,d);return s!==void 0&&(h.add=s),x(this.scene,g,h),g})},72566:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),x=e(39429);x.register("dynamicBitmapText",function(c,u,h,s,l){return this.displayList.add(new a(this.scene,c,u,h,s,l))})},12310:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(73482),c=e(86741),o.exports={renderWebGL:x,renderCanvas:c}},73482:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(61340),c=e(70554),u=new x,h=function(s,l,v,d){var g=l.text,y=g.length;if(y!==0){v.addToRenderList(l);var S=s.pipelines.set(l.pipeline,l),T=a(l,v,d);s.pipelines.preBatch(l);var w=T.sprite,P=T.calc,A=u,R=l.cropWidth>0||l.cropHeight>0;R&&(S.flush(),s.pushScissor(P.tx,P.ty,l.cropWidth*P.scaleX,l.cropHeight*P.scaleY));var I=l.frame,M=I.glTexture,L=l.tintFill,N=c.getTintAppendFloatAlpha(l.tintTopLeft,v.alpha*l._alphaTL),G=c.getTintAppendFloatAlpha(l.tintTopRight,v.alpha*l._alphaTR),D=c.getTintAppendFloatAlpha(l.tintBottomLeft,v.alpha*l._alphaBL),B=c.getTintAppendFloatAlpha(l.tintBottomRight,v.alpha*l._alphaBR),$=S.setGameObject(l),k=0,X=0,Y=0,Z=0,Q=l.letterSpacing,j,K=0,W=0,V,J=l.scrollX,ee=l.scrollY,te=l.fontData,ne=te.chars,se=te.lineHeight,ae=l.fontSize/te.size,ue=0,de=l._align,fe=0,ye=0,ve=l.getTextBounds(!1);l.maxWidth>0&&(g=ve.wrappedText,y=g.length);var Se=l._bounds.lines;de===1?ye=(Se.longest-Se.lengths[0])/2:de===2&&(ye=Se.longest-Se.lengths[0]);for(var Ie=v.roundPixels,Ae=l.displayCallback,Oe=l.callbackData,xe=0;xe<y;xe++){if(Y=g.charCodeAt(xe),Y===10){fe++,de===1?ye=(Se.longest-Se.lengths[fe])/2:de===2&&(ye=Se.longest-Se.lengths[fe]),k=0,X+=se,V=null;continue}if(j=ne[Y],!!j){K=j.width,W=j.height;var be=j.xOffset+k-J,Pe=j.yOffset+X-ee;if(V!==null){var Ge=j.kerning[Z]||0;be+=Ge,k+=Ge}if(k+=j.xAdvance+Q,V=j,Z=Y,!(K===0||W===0||Y===32)){if(ae=l.fontSize/l.fontData.size,ue=0,Ae){Oe.color=0,Oe.tint.topLeft=N,Oe.tint.topRight=G,Oe.tint.bottomLeft=D,Oe.tint.bottomRight=B,Oe.index=xe,Oe.charCode=Y,Oe.x=be,Oe.y=Pe,Oe.scale=ae,Oe.rotation=ue,Oe.data=j.data;var ze=Ae(Oe);be=ze.x,Pe=ze.y,ae=ze.scale,ue=ze.rotation,ze.color?(N=ze.color,G=ze.color,D=ze.color,B=ze.color):(N=ze.tint.topLeft,G=ze.tint.topRight,D=ze.tint.bottomLeft,B=ze.tint.bottomRight),N=c.getTintAppendFloatAlpha(N,v.alpha*l._alphaTL),G=c.getTintAppendFloatAlpha(G,v.alpha*l._alphaTR),D=c.getTintAppendFloatAlpha(D,v.alpha*l._alphaBL),B=c.getTintAppendFloatAlpha(B,v.alpha*l._alphaBR)}be*=ae,Pe*=ae,be-=l.displayOriginX,Pe-=l.displayOriginY,be+=ye,A.applyITRS(be,Pe,ue,ae,ae),P.multiply(A,w);var je=j.u0,$e=j.v0,ke=j.u1,Xe=j.v1,Je=K,We=W,Ze=w.e,Qe=w.f,ut=We*w.c+w.e,Bt=We*w.d+w.f,Gt=Je*w.a+We*w.c+w.e,Ut=Je*w.b+We*w.d+w.f,$t=Je*w.a+w.e,kt=Je*w.b+w.f;Ie&&(Ze=Math.round(Ze),Qe=Math.round(Qe),ut=Math.round(ut),Bt=Math.round(Bt),Gt=Math.round(Gt),Ut=Math.round(Ut),$t=Math.round($t),kt=Math.round(kt)),S.shouldFlush(6)&&(S.flush(),$=S.setGameObject(l)),S.batchQuad(l,Ze,Qe,ut,Bt,Gt,Ut,$t,kt,je,$e,ke,Xe,N,G,D,B,L,M,$)}}}R&&(S.flush(),s.popScissor()),s.pipelines.postBatch(l)}};o.exports=h},22186:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),c=e(31401),u=e(95643),h=e(53048),s=e(61327),l=e(21859),v=e(87841),d=e(18658),g=new a({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Tint,c.Transform,c.Visible,d],initialize:function(S,T,w,P,A,R,I){A===void 0&&(A=""),I===void 0&&(I=0),u.call(this,S,"BitmapText"),this.font=P;var M=this.scene.sys.cache.bitmapFont.get(P);if(!M)throw new Error("Invalid BitmapText key: "+P);this.fontData=M.data,this._text="",this._fontSize=R||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=I,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=M.fromAtlas,this.setTexture(M.texture,M.frame),this.setPosition(T,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(A)},setLeftAlign:function(){return this._align=g.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=g.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=g.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(y){return this._fontSize=y,this._dirty=!0,this},setLetterSpacing:function(y){return y===void 0&&(y=0),this._letterSpacing=y,this._dirty=!0,this},setLineSpacing:function(y){return y===void 0&&(y=0),this.lineSpacing=y,this},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this.text&&(this._text=y.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(y,S,T,w){return y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=.5),this.dropShadowX=y,this.dropShadowY=S,this.dropShadowColor=T,this.dropShadowAlpha=w,this},setCharacterTint:function(y,S,T,w,P,A,R){y===void 0&&(y=0),S===void 0&&(S=1),T===void 0&&(T=!1),w===void 0&&(w=-1),P===void 0&&(P=w,A=w,R=w);var I=this.text.length;S===-1&&(S=I),y<0&&(y=I+y),y=x(y,0,I-1);for(var M=x(y+S,y,I),L=this.charColors,N=y;N<M;N++){var G=L[N];if(w===-1)L[N]=null;else{var D=T?1:0;G?(G.tintEffect=D,G.tintTL=w,G.tintTR=P,G.tintBL=A,G.tintBR=R):L[N]={tintEffect:D,tintTL:w,tintTR:P,tintBL:A,tintBR:R}}}return this},setWordTint:function(y,S,T,w,P,A,R){S===void 0&&(S=1);for(var I=this.getTextBounds(),M=I.words,L=typeof y=="number",N=0,G=0;G<M.length;G++){var D=M[G];if((L&&G===y||!L&&D.word===y)&&(this.setCharacterTint(D.i,D.word.length,T,w,P,A,R),N++,N===S))return this}return this},getTextBounds:function(y){var S=this._bounds;return(this._dirty||y||this.scaleX!==S.scaleX||this.scaleY!==S.scaleY)&&(h(this,y,!0,S),this._dirty=!1),S},getCharacterAt:function(y,S,T){for(var w=this.getLocalPoint(y,S,null,T),P=this.getTextBounds(),A=P.characters,R=new v,I=0;I<A.length;I++){var M=A[I];if(R.setTo(M.x,M.t,M.r-M.x,M.b),R.contains(w.x,w.y))return M}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(y,S,T){S===void 0&&(S=this._fontSize),T===void 0&&(T=this._align);var w=this.scene.sys.cache.bitmapFont.get(y);return w&&(this.font=y,this.fontData=w.data,this._fontSize=S,this._align=T,this.fromAtlas=w.fromAtlas===!0,this.setTexture(w.texture,w.frame),h(this,!1,!0,this._bounds)),this},setMaxWidth:function(y,S){return this._maxWidth=y,this._dirty=!0,S!==void 0&&(this.wordWrapCharCode=S),this},align:{set:function(y){this._align=y,this._dirty=!0},get:function(){return this._align}},text:{set:function(y){this.setText(y)},get:function(){return this._text}},fontSize:{set:function(y){this._fontSize=y,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(y){this._letterSpacing=y,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(y){this._lineSpacing=y,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(y){this._maxWidth=y,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var y=c.ToJSON(this),S={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return y.data=S,y},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});g.ALIGN_LEFT=0,g.ALIGN_CENTER=1,g.ALIGN_RIGHT=2,g.ParseFromAtlas=s,g.ParseXMLBitmapFont=l,o.exports=g},37289:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),x=function(c,u,h,s){var l=u._text,v=l.length,d=c.currentContext;if(!(v===0||!a(c,d,u,h,s))){h.addToRenderList(u);var g=u.fromAtlas?u.frame:u.texture.frames.__BASE,y=u.fontData.chars,S=u.fontData.lineHeight,T=u._letterSpacing,w=u._lineSpacing,P=0,A=0,R=0,I=null,M=0,L=0,N=0,G=0,D=0,B=0,$=null,k=0,X=g.source.image,Y=g.cutX,Z=g.cutY,Q=u._fontSize/u.fontData.size,j=u._align,K=0,W=0,V=u.getTextBounds(!1);u.maxWidth>0&&(l=V.wrappedText,v=l.length);var J=u._bounds.lines;j===1?W=(J.longest-J.lengths[0])/2:j===2&&(W=J.longest-J.lengths[0]),d.translate(-u.displayOriginX,-u.displayOriginY);for(var ee=h.roundPixels,te=0;te<v;te++){if(R=l.charCodeAt(te),R===10){K++,j===1?W=(J.longest-J.lengths[K])/2:j===2&&(W=J.longest-J.lengths[K]),P=0,A+=S+w,$=null;continue}if(I=y[R],!!I){if(M=Y+I.x,L=Z+I.y,N=I.width,G=I.height,D=I.xOffset+P,B=I.yOffset+A,$!==null){var ne=I.kerning[k];D+=ne!==void 0?ne:0}D*=Q,B*=Q,D+=W,P+=I.xAdvance+T+(ne!==void 0?ne:0),$=I,k=R,!(N===0||G===0||R===32)&&(ee&&(D=Math.round(D),B=Math.round(B)),d.save(),d.translate(D,B),d.scale(Q,Q),d.drawImage(X,M,L,N,G,0,0,N,G),d.restore())}}d.restore()}};o.exports=x},57336:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(25305),c=e(44603),u=e(23568),h=e(35154);c.register("bitmapText",function(s,l){s===void 0&&(s={});var v=h(s,"font",""),d=u(s,"text",""),g=u(s,"size",!1),y=h(s,"align",0),S=new a(this.scene,0,0,v,d,g,y);return l!==void 0&&(s.add=l),x(this.scene,S,s),S})},34914:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(39429);x.register("bitmapText",function(c,u,h,s,l,v){return this.displayList.add(new a(this.scene,c,u,h,s,l,v))})},18658:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(33590),c=e(37289),o.exports={renderWebGL:x,renderCanvas:c}},33590:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3217),x=e(91296),c=e(70554),u=function(h,s,l,v){var d=s._text,g=d.length;if(g!==0){l.addToRenderList(s);var y=h.pipelines.set(s.pipeline,s),S=x(s,l,v).calc;h.pipelines.preBatch(s);var T=l.roundPixels,w=l.alpha,P=s.charColors,A=s.tintFill,R=c.getTintAppendFloatAlpha,I=R(s.tintTopLeft,w*s._alphaTL),M=R(s.tintTopRight,w*s._alphaTR),L=R(s.tintBottomLeft,w*s._alphaBL),N=R(s.tintBottomRight,w*s._alphaBR),G=s.frame.glTexture,D=y.setGameObject(s),B=s.getTextBounds(!1),$,k,X,Y=B.characters,Z=s.dropShadowX,Q=s.dropShadowY,j=Z!==0||Q!==0;if(j){var K=s.dropShadowColor,W=s.dropShadowAlpha,V=R(K,w*W*s._alphaTL),J=R(K,w*W*s._alphaTR),ee=R(K,w*W*s._alphaBL),te=R(K,w*W*s._alphaBR);for($=0;$<Y.length;$++)k=Y[$],X=k.glyph,!(k.code===32||X.width===0||X.height===0)&&a(y,s,k,X,Z,Q,S,T,V,J,ee,te,1,G,D)}for($=0;$<Y.length;$++)if(k=Y[$],X=k.glyph,!(k.code===32||X.width===0||X.height===0))if(y.shouldFlush(6)&&(y.flush(),D=y.setGameObject(s)),P[k.i]){var ne=P[k.i],se=ne.tintEffect,ae=R(ne.tintTL,w*s._alphaTL),ue=R(ne.tintTR,w*s._alphaTR),de=R(ne.tintBL,w*s._alphaBL),fe=R(ne.tintBR,w*s._alphaBR);a(y,s,k,X,0,0,S,T,ae,ue,de,fe,se,G,D)}else a(y,s,k,X,0,0,S,T,I,M,L,N,A,G,D);h.pipelines.postBatch(s)}};o.exports=u},6107:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48011),x=e(46590),c=e(83419),u=e(31401),h=e(4327),s=e(95643),l=e(73162),v=new c({Extends:s,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,a],initialize:function(g,y,S,T,w){s.call(this,g,"Blitter"),this.setTexture(T,w),this.setPosition(y,S),this.initPipeline(),this.initPostPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(d,g,y,S,T){S===void 0&&(S=!0),T===void 0&&(T=this.children.length),y===void 0?y=this.frame:y instanceof h||(y=this.texture.get(y));var w=new x(this,d,g,y,S);return this.children.addAt(w,T,!1),this.dirty=!0,w},createFromCallback:function(d,g,y,S){for(var T=this.createMultiple(g,y,S),w=0;w<T.length;w++){var P=T[w];d.call(this,P,w)}return T},createMultiple:function(d,g,y){g===void 0&&(g=this.frame.name),y===void 0&&(y=!0),Array.isArray(g)||(g=[g]);var S=[],T=this;return g.forEach(function(w){for(var P=0;P<d;P++)S.push(T.create(0,0,w,y))}),S},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});o.exports=v},72396:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=a.getRenderList();if(u.length!==0){var h=e.currentContext,s=x.alpha*a.alpha;if(s!==0){x.addToRenderList(a),h.globalCompositeOperation=e.blendModes[a.blendMode],h.imageSmoothingEnabled=!a.frame.source.scaleMode;var l=a.x-x.scrollX*a.scrollFactorX,v=a.y-x.scrollY*a.scrollFactorY;h.save(),c&&c.copyToContext(h);for(var d=x.roundPixels,g=0;g<u.length;g++){var y=u[g],S=y.flipX||y.flipY,T=y.frame,w=T.canvasData,P=T.x,A=T.y,R=1,I=1,M=y.alpha*s;M!==0&&(h.globalAlpha=M,S?(y.flipX&&(R=-1,P-=w.width),y.flipY&&(I=-1,A-=w.height),w.width>0&&w.height>0&&(h.save(),h.translate(y.x+l,y.y+v),h.scale(R,I),h.drawImage(T.source.image,w.x,w.y,w.width,w.height,P,A,w.width,w.height),h.restore())):(d&&(P=Math.round(P),A=Math.round(A)),w.width>0&&w.height>0&&h.drawImage(T.source.image,w.x,w.y,w.width,w.height,P+y.x+l,A+y.y+v,w.width,w.height)))}h.restore()}}};o.exports=E},9403:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),x=e(25305),c=e(44603),u=e(23568);c.register("blitter",function(h,s){h===void 0&&(h={});var l=u(h,"key",null),v=u(h,"frame",null),d=new a(this.scene,0,0,l,v);return s!==void 0&&(h.add=s),x(this.scene,d,h),d})},12709:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),x=e(39429);x.register("blitter",function(c,u,h,s){return this.displayList.add(new a(this.scene,c,u,h,s))})},48011:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(99485),c=e(72396),o.exports={renderWebGL:x,renderCanvas:c}},99485:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=e(70554),c=new a,u=function(h,s,l,v){var d=s.getRenderList(),g=l.alpha*s.alpha;if(!(d.length===0||g===0)){l.addToRenderList(s);var y=h.pipelines.set(this.pipeline,s),S=l.scrollX*s.scrollFactorX,T=l.scrollY*s.scrollFactorY,w=c.copyFrom(l.matrix);v&&(w.multiplyWithOffset(v,-S,-T),S=0,T=0);var P=s.x-S,A=s.y-T,R=-1,I=!1,M=l.roundPixels;h.pipelines.preBatch(s);for(var L=0;L<d.length;L++){var N=d[L],G=N.frame,D=N.alpha*g;if(D!==0){var B=G.width,$=G.height,k=P+N.x+G.x,X=A+N.y+G.y;N.flipX&&(B*=-1,k+=G.width),N.flipY&&($*=-1,X+=G.height);var Y=w.setQuad(k,X,k+B,X+$,M),Z=x.getTintAppendFloatAlpha(N.tint,D);if(G.sourceIndex!==R){var Q=y.setGameObject(s,G);R=G.sourceIndex}y.batchQuad(s,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],G.u0,G.v0,G.u1,G.v1,Z,Z,Z,Z,I,G.glTexture,Q)&&(R=-1)}}h.pipelines.postBatch(s)}};o.exports=u},46590:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(4327),c=new a({initialize:function(h,s,l,v,d){this.parent=h,this.x=s,this.y=l,this.frame=v,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof x&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,h,s){return this.x=u,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,s&&this.setFrame(s),this},setPosition:function(u,h){return this.x=u,this.y=h,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,h){return this.flipX=u,this.flipY=h,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});o.exports=c},16005:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=2,c={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u,h,s,l){return u===void 0&&(u=1),h===void 0?this.alpha=u:(this._alphaTL=a(u,0,1),this._alphaTR=a(h,0,1),this._alphaBL=a(s,0,1),this._alphaBR=a(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(u){var h=a(u,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=-3:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(u){var h=a(u,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(u){var h=a(u,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(u){var h=a(u,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(u){var h=a(u,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=x)}}};o.exports=c},88509:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=2,c={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u){return u===void 0&&(u=1),this.alpha=u,this},alpha:{get:function(){return this._alpha},set:function(u){var h=a(u,0,1);this._alpha=h,h===0?this.renderFlags&=-3:this.renderFlags|=x}}};o.exports=c},90065:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=a[c]),c|=0,c>=-1&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};o.exports=x},94215:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};o.exports=E},61683:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={texture:null,frame:null,isCropped:!1,setCrop:function(e,a,x,c){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,a,x,c,this.flipX,this.flipY);else{var u=e;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=E},89272:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x={_depth:0,depth:{get:function(){return this._depth},set:function(c){this.displayList&&this.displayList.queueDepthSort(),this._depth=c}},setDepth:function(c){return c===void 0&&(c=0),this.depth=c,this},setToTop:function(){var c=this.getDisplayList();return c&&a.BringToTop(c,this),this},setToBack:function(){var c=this.getDisplayList();return c&&a.SendToBack(c,this),this},setAbove:function(c){var u=this.getDisplayList();return u&&c&&a.MoveAbove(u,this,c),this},setBelow:function(c){var u=this.getDisplayList();return u&&c&&a.MoveBelow(u,this,c),this}};o.exports=x},47059:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(66064),c=e(19133),u=new a({initialize:function(s,l){this.gameObject=s,this.isPost=l,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var s=this.gameObject.scene.sys.renderer;s&&s.pipelines?(this.gameObject.pipeline=s.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,s=0;s<h.length;s++)h[s].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var s;if(this.isPost){var l=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(l)||(l=[l]),s=0;s<l.length;s++){var v=l[s];if(v.controller===h){this.gameObject.removePostPipeline(v),h.destroy();break}}}else{var d=this.list;for(s=0;s<d.length;s++)d[s]===h&&(c(d,s),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,s){if(this.isPost){var l=String(h.type);this.gameObject.setPostPipeline(l,s);var v=this.gameObject.getPostPipeline(l);if(v)return Array.isArray(v)&&(v=v.pop()),v&&(v.controller=h),h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,s,l,v,d,g){return this.add(new x.Glow(this.gameObject,h,s,l,v),{quality:d,distance:g})},addShadow:function(h,s,l,v,d,g,y){return this.add(new x.Shadow(this.gameObject,h,s,l,v,d,g,y))},addPixelate:function(h){return this.add(new x.Pixelate(this.gameObject,h))},addVignette:function(h,s,l,v){return this.add(new x.Vignette(this.gameObject,h,s,l,v))},addShine:function(h,s,l,v){return this.add(new x.Shine(this.gameObject,h,s,l,v))},addBlur:function(h,s,l,v,d,g){return this.add(new x.Blur(this.gameObject,h,s,l,v,d,g))},addGradient:function(h,s,l,v,d,g,y,S){return this.add(new x.Gradient(this.gameObject,h,s,l,v,d,g,y,S))},addBloom:function(h,s,l,v,d,g){return this.add(new x.Bloom(this.gameObject,h,s,l,v,d,g))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(h,s,l,v,d){return this.add(new x.Circle(this.gameObject,h,s,l,v,d))},addBarrel:function(h){return this.add(new x.Barrel(this.gameObject,h))},addDisplacement:function(h,s,l){return this.add(new x.Displacement(this.gameObject,h,s,l))},addWipe:function(h,s,l){return this.add(new x.Wipe(this.gameObject,h,s,l))},addReveal:function(h,s,l){return this.add(new x.Wipe(this.gameObject,h,s,l,!0))},addBokeh:function(h,s,l){return this.add(new x.Bokeh(this.gameObject,h,s,l))},addTiltShift:function(h,s,l,v,d,g){return this.add(new x.Bokeh(this.gameObject,h,s,l,!0,v,d,g))},destroy:function(){this.clear(),this.gameObject=null}});o.exports=u},54434:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,a){return this.flipX=e,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};o.exports=E},8004:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(11520),c=e(26099),u={prepareBoundsOutput:function(h,s){if(s===void 0&&(s=!1),this.rotation!==0&&x(h,this.x,this.y,this.rotation),s&&this.parentContainer){var l=this.parentContainer.getBoundsTransformMatrix();l.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,s){return h===void 0&&(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,s)},getTopLeft:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,s)},getTopCenter:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,s)},getTopRight:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,s)},getLeftCenter:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,s)},getRightCenter:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,s)},getBottomLeft:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,s)},getBottomCenter:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,s)},getBottomRight:function(h,s){return h||(h=new c),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,s)},getBounds:function(h){h===void 0&&(h=new a);var s,l,v,d,g,y,S,T;if(this.parentContainer){var w=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),w.transformPoint(h.x,h.y,h),s=h.x,l=h.y,this.getTopRight(h),w.transformPoint(h.x,h.y,h),v=h.x,d=h.y,this.getBottomLeft(h),w.transformPoint(h.x,h.y,h),g=h.x,y=h.y,this.getBottomRight(h),w.transformPoint(h.x,h.y,h),S=h.x,T=h.y}else this.getTopLeft(h),s=h.x,l=h.y,this.getTopRight(h),v=h.x,d=h.y,this.getBottomLeft(h),g=h.x,y=h.y,this.getBottomRight(h),S=h.x,T=h.y;return h.x=Math.min(s,v,g,S),h.y=Math.min(l,d,y,T),h.width=Math.max(s,v,g,S)-h.x,h.height=Math.max(l,d,y,T)-h.y,h}};o.exports=u},8573:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6858),x=e(80661),c={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,h,s,l,v){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new a(this.scene,u,h,s,l,v)},createGeometryMask:function(u){return u===void 0&&(this.type==="Graphics"||this.geom)&&(u=this),new x(this.scene,u)}};o.exports=c},27387:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,a){return e===void 0&&(e=.5),a===void 0&&(a=e),this.originX=e,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,a){return e===void 0&&(e=0),a===void 0&&(a=e),this.displayOriginX=e,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};o.exports=E},37640:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),x=e(57355),c=e(35154),u=e(86353),h=e(26099),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(l,v){v===void 0&&(v=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=l,v&&this.startFollow(v),this},setRotateToPath:function(l,v){return v===void 0&&(v=0),this.rotateToPath=l,this.pathRotationOffset=v,this},isFollowing:function(){var l=this.pathTween;return l&&l.isPlaying()},startFollow:function(l,v){l===void 0&&(l={}),v===void 0&&(v=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof l=="number"&&(l={duration:l}),l.from=c(l,"from",0),l.to=c(l,"to",1);var g=x(l,"positionOnPath",!1);this.rotateToPath=x(l,"rotateToPath",!1),this.pathRotationOffset=c(l,"rotationOffset",0);var y=c(l,"startAt",v);if(y&&(l.onStart=function(T){var w=T.data[0];w.progress=y,w.elapsed=w.duration*y;var P=w.ease(w.progress);w.current=w.start+(w.end-w.start)*P,w.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),l.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(l),this.path.getStartPoint(this.pathOffset),g&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var S=this.path.getPoint(.1);this.rotation=Math.atan2(S.y-this.y,S.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=l,this},pauseFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.pause(),this},resumeFollow:function(){var l=this.pathTween;return l&&l.isPaused()&&l.resume(),this},stopFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this},pathUpdate:function(){var l=this.pathTween;if(l&&l.data){var v=l.data[0],d=this.pathDelta,g=this.pathVector;if(d.copy(g).negate(),v.state===u.COMPLETE){this.path.getPoint(v.end,g),d.add(g),g.add(this.pathOffset),this.setPosition(g.x,g.y);return}else if(v.state!==u.PLAYING_FORWARD&&v.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(l.getValue(),g),d.add(g),g.add(this.pathOffset);var y=this.x,S=this.y;this.setPosition(g.x,g.y);var T=this.x-y,w=this.y-S;if(T===0&&w===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(w,T)+a(this.pathRotationOffset))}}};o.exports=s},72699:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(c){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var h=u.pipelines;if(h){c===void 0&&(c=h.default);var s=h.get(c);if(s)return this.defaultPipeline=s,this.pipeline=s,!0}return!1},setPipeline:function(c,u,h){var s=this.scene.sys.renderer;if(!s)return this;var l=s.pipelines;if(l){var v=l.get(c);v&&(this.pipeline=v),u&&(this.pipelineData=h?a(u):u)}return this},setPipelineData:function(c,u){var h=this.pipelineData;return u===void 0?delete h[c]:h[c]=u,this},resetPipeline:function(c){return c===void 0&&(c=!1),this.pipeline=this.defaultPipeline,c&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};o.exports=x},17581:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x=e(47059),c=e(19133),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),h&&(this.preFX=new x(this,!1))},setPostPipeline:function(h,s,l){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){Array.isArray(h)||(h=[h]);for(var g=0;g<h.length;g++){var y=d.getPostPipeline(h[g],this,s);y&&this.postPipelines.push(y)}s&&(this.postPipelineData=l?a(s):s)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,s){var l=this.postPipelineData;return s===void 0?delete l[h]:l[h]=s,this},getPostPipeline:function(h){for(var s=typeof h=="string",l=this.postPipelines,v=[],d=0;d<l.length;d++){var g=l[d];(s&&g.name===h||!s&&g instanceof h)&&v.push(g)}return v.length===1?v[0]:v},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var s=this.postPipelines,l=0;l<s.length;l++)s[l].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var s=typeof h=="string",l=this.postPipelines,v=l.length-1;v>=0;v--){var d=l[v];(s&&d.name===h||!s&&d===h)&&(d.destroy(),c(l,v))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};o.exports=u},80227:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,a){return a===void 0&&(a=e),this.scrollFactorX=e,this.scrollFactorY=a,this}};o.exports=E},16736:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};o.exports=E},37726:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),x=8,c={texture:null,frame:null,isCropped:!1,setTexture:function(u,h,s,l){return this.texture=this.scene.sys.textures.get(u),this.setFrame(h,s,l)},setFrame:function(u,h,s){return h===void 0&&(h=!0),s===void 0&&(s=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=-9:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};o.exports=c},79812:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),x=8,c={texture:null,frame:null,isCropped:!1,setCrop:function(u,h,s,l){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,h,s,l,this.flipX,this.flipY);else{var v=u;this.frame.setCropUVs(this._crop,v.x,v.y,v.width,v.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,h){return this.texture=this.scene.sys.textures.get(u),this.setFrame(h)},setFrame:function(u,h,s){return h===void 0&&(h=!0),s===void 0&&(s=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=-9:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=c},27472:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,a,x,c){return e===void 0&&(e=16777215),a===void 0&&(a=e,x=e,c=e),this.tintTopLeft=e,this.tintTopRight=a,this.tintBottomLeft=x,this.tintBottomRight=c,this.tintFill=!1,this},setTintFill:function(e,a,x,c){return this.setTint(e,a,x,c),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};o.exports=E},53774:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};o.exports=E},16901:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(61340),c=e(85955),u=e(86554),h=e(30954),s=e(26099),l=4,v={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=-5:this.renderFlags|=l}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=-5:this._scaleY!==0&&(this.renderFlags|=l)}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=-5:this._scaleX!==0&&(this.renderFlags|=l)}},angle:{get:function(){return h(this._rotation*a.RAD_TO_DEG)},set:function(d){this.rotation=h(d)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=u(d)}},setPosition:function(d,g,y,S){return d===void 0&&(d=0),g===void 0&&(g=d),y===void 0&&(y=0),S===void 0&&(S=0),this.x=d,this.y=g,this.z=y,this.w=S,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,g,y,S){return d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=this.scene.sys.scale.width),S===void 0&&(S=this.scene.sys.scale.height),this.x=d+Math.random()*y,this.y=g+Math.random()*S,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,g){return d===void 0&&(d=1),g===void 0&&(g=d),this.scaleX=d,this.scaleY=g,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new x),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,g){d===void 0&&(d=new x);var y=this.parentContainer;if(!y)return this.getLocalTransformMatrix(d);for(g||(g=new x),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);y;)g.applyITRS(y.x,y.y,y._rotation,y._scaleX,y._scaleY),g.multiply(d,d),y=y.parentContainer;return d},getLocalPoint:function(d,g,y,S){y||(y=new s),S||(S=this.scene.sys.cameras.main);var T=S.scrollX,w=S.scrollY,P=d+T*this.scrollFactorX-T,A=g+w*this.scrollFactorY-w;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(P,A,y):c(P,A,this.x,this.y,this.rotation,this.scaleX,this.scaleY,y),this._originComponent&&(y.x+=this._displayOriginX,y.y+=this._displayOriginY),y},getParentRotation:function(){for(var d=0,g=this.parentContainer;g;)d+=g.rotation,g=g.parentContainer;return d}};o.exports=v},61340:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36383),c=e(26099),u=new a({initialize:function(s,l,v,d,g,y){s===void 0&&(s=1),l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=1),g===void 0&&(g=0),y===void 0&&(y=0),this.matrix=new Float32Array([s,l,v,d,g,y,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,s=h[0],l=h[1],v=h[2],d=h[3];return s||l?l>0?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):v||d?x.TAU-(d>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,s){var l=this.matrix;return l[4]=l[0]*h+l[2]*s+l[4],l[5]=l[1]*h+l[3]*s+l[5],this},scale:function(h,s){var l=this.matrix;return l[0]*=h,l[1]*=h,l[2]*=s,l[3]*=s,this},rotate:function(h){var s=Math.sin(h),l=Math.cos(h),v=this.matrix,d=v[0],g=v[1],y=v[2],S=v[3];return v[0]=d*l+y*s,v[1]=g*l+S*s,v[2]=d*-s+y*l,v[3]=g*-s+S*l,this},multiply:function(h,s){var l=this.matrix,v=h.matrix,d=l[0],g=l[1],y=l[2],S=l[3],T=l[4],w=l[5],P=v[0],A=v[1],R=v[2],I=v[3],M=v[4],L=v[5],N=s===void 0?l:s.matrix;return N[0]=P*d+A*y,N[1]=P*g+A*S,N[2]=R*d+I*y,N[3]=R*g+I*S,N[4]=M*d+L*y+T,N[5]=M*g+L*S+w,N},multiplyWithOffset:function(h,s,l){var v=this.matrix,d=h.matrix,g=v[0],y=v[1],S=v[2],T=v[3],w=v[4],P=v[5],A=s*g+l*S+w,R=s*y+l*T+P,I=d[0],M=d[1],L=d[2],N=d[3],G=d[4],D=d[5];return v[0]=I*g+M*S,v[1]=I*y+M*T,v[2]=L*g+N*S,v[3]=L*y+N*T,v[4]=G*g+D*S+A,v[5]=G*y+D*T+R,this},transform:function(h,s,l,v,d,g){var y=this.matrix,S=y[0],T=y[1],w=y[2],P=y[3],A=y[4],R=y[5];return y[0]=h*S+s*w,y[1]=h*T+s*P,y[2]=l*S+v*w,y[3]=l*T+v*P,y[4]=d*S+g*w+A,y[5]=d*T+g*P+R,this},transformPoint:function(h,s,l){l===void 0&&(l={x:0,y:0});var v=this.matrix,d=v[0],g=v[1],y=v[2],S=v[3],T=v[4],w=v[5];return l.x=h*d+s*y+T,l.y=h*g+s*S+w,l},invert:function(){var h=this.matrix,s=h[0],l=h[1],v=h[2],d=h[3],g=h[4],y=h[5],S=s*d-l*v;return h[0]=d/S,h[1]=-l/S,h[2]=-v/S,h[3]=s/S,h[4]=(v*y-d*g)/S,h[5]=-(s*y-l*g)/S,this},copyFrom:function(h){var s=this.matrix;return s[0]=h.a,s[1]=h.b,s[2]=h.c,s[3]=h.d,s[4]=h.e,s[5]=h.f,this},copyFromArray:function(h){var s=this.matrix;return s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s[4]=h[4],s[5]=h[5],this},copyToContext:function(h){var s=this.matrix;return h.transform(s[0],s[1],s[2],s[3],s[4],s[5]),h},setToContext:function(h){return h.setTransform(this),h},copyToArray:function(h){var s=this.matrix;return h===void 0?h=[s[0],s[1],s[2],s[3],s[4],s[5]]:(h[0]=s[0],h[1]=s[1],h[2]=s[2],h[3]=s[3],h[4]=s[4],h[5]=s[5]),h},setTransform:function(h,s,l,v,d,g){var y=this.matrix;return y[0]=h,y[1]=s,y[2]=l,y[3]=v,y[4]=d,y[5]=g,this},decomposeMatrix:function(){var h=this.decomposedMatrix,s=this.matrix,l=s[0],v=s[1],d=s[2],g=s[3],y=l*g-v*d;if(h.translateX=s[4],h.translateY=s[5],l||v){var S=Math.sqrt(l*l+v*v);h.rotation=v>0?Math.acos(l/S):-Math.acos(l/S),h.scaleX=S,h.scaleY=y/S}else if(d||g){var T=Math.sqrt(d*d+g*g);h.rotation=Math.PI*.5-(g>0?Math.acos(-d/T):-Math.acos(d/T)),h.scaleX=y/T,h.scaleY=T}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,s,l,v,d){var g=this.matrix,y=Math.sin(l),S=Math.cos(l);return g[4]=h,g[5]=s,g[0]=S*v,g[1]=y*v,g[2]=-y*d,g[3]=S*d,this},applyInverse:function(h,s,l){l===void 0&&(l=new c);var v=this.matrix,d=v[0],g=v[1],y=v[2],S=v[3],T=v[4],w=v[5],P=1/(d*S+y*-g);return l.x=S*P*h+-y*P*s+(w*y-T*S)*P,l.y=d*P*s+-g*P*h+(-w*d+T*g)*P,l},setQuad:function(h,s,l,v,d,g){d===void 0&&(d=!1),g===void 0&&(g=this.quad);var y=this.matrix,S=y[0],T=y[1],w=y[2],P=y[3],A=y[4],R=y[5],I=h*S+s*w+A,M=h*T+s*P+R,L=h*S+v*w+A,N=h*T+v*P+R,G=l*S+v*w+A,D=l*T+v*P+R,B=l*S+s*w+A,$=l*T+s*P+R;if(d){var k=Math.floor(I+.5),X=Math.floor(M+.5),Y=k-I,Z=X-M;g[0]=k,g[1]=X,g[2]=L+Y,g[3]=N+Z,g[4]=G+Y,g[5]=D+Z,g[6]=B+Y,g[7]=$+Z}else g[0]=I,g[1]=M,g[2]=L,g[3]=N,g[4]=G,g[5]=D,g[6]=B,g[7]=$;return g},getX:function(h,s){return h*this.a+s*this.c+this.e},getY:function(h,s){return h*this.b+s*this.d+this.f},getXRound:function(h,s,l){var v=this.getX(h,s);return l&&(v=Math.floor(v+.5)),v},getYRound:function(h,s,l){var v=this.getY(h,s);return l&&(v=Math.floor(v+.5)),v},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});o.exports=u},59715:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=E):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(a){return this.visible=a,this}};o.exports=e},31401:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}},31559:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x=e(10312),c=e(83419),u=e(31401),h=e(51708),s=e(95643),l=e(87841),v=e(29959),d=e(36899),g=e(26099),y=new u.TransformMatrix,S=new c({Extends:s,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,v],initialize:function(w,P,A,R){s.call(this,w,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this._sortKey="",this._sysEvents=w.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(P,A),this.setBlendMode(x.SKIP_CHECK),R&&this.add(R)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(T){return T===void 0&&(T=!0),this.exclusive=T,this},getBounds:function(T){if(T===void 0&&(T=new l),T.setTo(this.x,this.y,0,0),this.parentContainer){var w=this.parentContainer.getBoundsTransformMatrix(),P=w.transformPoint(this.x,this.y);T.setTo(P.x,P.y,0,0)}if(this.list.length>0){var A=this.list,R=new l,I=!1;T.setEmpty();for(var M=0;M<A.length;M++){var L=A[M];L.getBounds&&(L.getBounds(R),I?d(R,T,T):(T.setTo(R.x,R.y,R.width,R.height),I=!0))}}return T},addHandler:function(T){T.once(h.DESTROY,this.onChildDestroyed,this),this.exclusive&&(T.parentContainer&&T.parentContainer.remove(T),T.parentContainer=this,T.removeFromDisplayList(),T.addedToScene())},removeHandler:function(T){T.off(h.DESTROY,this.remove,this),this.exclusive&&(T.parentContainer=null,T.removedFromScene(),T.addToDisplayList())},pointToContainer:function(T,w){w===void 0&&(w=new g),this.parentContainer?this.parentContainer.pointToContainer(T,w):(w.x=T.x,w.y=T.y);var P=y;return P.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),P.invert(),P.transformPoint(T.x,T.y,w),w},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(y,this.localTransform)},add:function(T){return a.Add(this.list,T,this.maxSize,this.addHandler,this),this},addAt:function(T,w){return a.AddAt(this.list,T,w,this.maxSize,this.addHandler,this),this},getAt:function(T){return this.list[T]},getIndex:function(T){return this.list.indexOf(T)},sort:function(T,w){return T?(w===void 0&&(w=function(P,A){return P[T]-A[T]}),a.StableSort(this.list,w),this):this},getByName:function(T){return a.GetFirst(this.list,"name",T)},getRandom:function(T,w){return a.GetRandom(this.list,T,w)},getFirst:function(T,w,P,A){return a.GetFirst(this.list,T,w,P,A)},getAll:function(T,w,P,A){return a.GetAll(this.list,T,w,P,A)},count:function(T,w,P,A){return a.CountAllMatching(this.list,T,w,P,A)},swap:function(T,w){return a.Swap(this.list,T,w),this},moveTo:function(T,w){return a.MoveTo(this.list,T,w),this},moveAbove:function(T,w){return a.MoveAbove(this.list,T,w),this},moveBelow:function(T,w){return a.MoveBelow(this.list,T,w),this},remove:function(T,w){var P=a.Remove(this.list,T,this.removeHandler,this);if(w&&P){Array.isArray(P)||(P=[P]);for(var A=0;A<P.length;A++)P[A].destroy()}return this},removeAt:function(T,w){var P=a.RemoveAt(this.list,T,this.removeHandler,this);return w&&P&&P.destroy(),this},removeBetween:function(T,w,P){var A=a.RemoveBetween(this.list,T,w,this.removeHandler,this);if(P)for(var R=0;R<A.length;R++)A[R].destroy();return this},removeAll:function(T){var w=this.list;if(T){for(var P=0;P<w.length;P++)w[P]&&w[P].scene&&(w[P].off(h.DESTROY,this.onChildDestroyed,this),w[P].destroy());this.list=[]}else a.RemoveBetween(w,0,w.length,this.removeHandler,this);return this},bringToTop:function(T){return a.BringToTop(this.list,T),this},sendToBack:function(T){return a.SendToBack(this.list,T),this},moveUp:function(T){return a.MoveUp(this.list,T),this},moveDown:function(T){return a.MoveDown(this.list,T),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(T,w,P){var A=a.Replace(this.list,T,w);return A&&(this.addHandler(w),this.removeHandler(T),P&&T.destroy()),this},exists:function(T){return this.list.indexOf(T)>-1},setAll:function(T,w,P,A){return a.SetAll(this.list,T,w,P,A),this},each:function(T,w){var P=[null],A,R=this.list.slice(),I=R.length;for(A=2;A<arguments.length;A++)P.push(arguments[A]);for(A=0;A<I;A++)P[0]=R[A],T.apply(w,P);return this},iterate:function(T,w){var P=[null],A;for(A=2;A<arguments.length;A++)P.push(arguments[A]);for(A=0;A<this.list.length;A++)P[0]=this.list[A],T.apply(w,P);return this},setScrollFactor:function(T,w,P){return w===void 0&&(w=T),P===void 0&&(P=!1),this.scrollFactorX=T,this.scrollFactorY=w,P&&(a.SetAll(this.list,"scrollFactorX",T),a.SetAll(this.list,"scrollFactorY",w)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(T){a.Remove(this.list,T),this.exclusive&&(T.parentContainer=null,T.removedFromScene())}});o.exports=S},53584:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a);var u=a.list;if(u.length!==0){var h=a.localTransform;c?(h.loadIdentity(),h.multiply(c),h.translate(a.x,a.y),h.rotate(a.rotation),h.scale(a.scaleX,a.scaleY)):h.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var s=a.blendMode!==-1;s||e.setBlendMode(0);var l=a._alpha,v=a.scrollFactorX,d=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(e,null,x);for(var g=0;g<u.length;g++){var y=u[g];if(y.willRender(x)){var S=y.alpha,T=y.scrollFactorX,w=y.scrollFactorY;!s&&y.blendMode!==e.currentBlendMode&&e.setBlendMode(y.blendMode),y.setScrollFactor(T*v,w*d),y.setAlpha(S*l),y.renderCanvas(e,y,x,h),y.setAlpha(S),y.setScrollFactor(T,w)}}a.mask&&a.mask.postRenderCanvas(e)}};o.exports=E},77143:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(31559),c=e(44603),u=e(23568),h=e(95540);c.register("container",function(s,l){s===void 0&&(s={});var v=u(s,"x",0),d=u(s,"y",0),g=h(s,"children",null),y=new x(this.scene,v,d,g);return l!==void 0&&(s.add=l),a(this.scene,y,s),y})},24961:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31559),x=e(39429);x.register("container",function(c,u,h){return this.displayList.add(new a(this.scene,c,u,h))})},29959:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(72249),c=e(53584),o.exports={renderWebGL:x,renderCanvas:c}},72249:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a);var u=a.list,h=u.length;if(h!==0){var s=a.localTransform;c?(s.loadIdentity(),s.multiply(c),s.translate(a.x,a.y),s.rotate(a.rotation),s.scale(a.scaleX,a.scaleY)):s.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),e.pipelines.preBatch(a);var l=a.blendMode!==-1;l||e.setBlendMode(0);for(var v=a.alpha,d=a.scrollFactorX,g=a.scrollFactorY,y=0;y<h;y++){var S=u[y];if(S.willRender(x)){var T,w,P,A;if(S.alphaTopLeft!==void 0)T=S.alphaTopLeft,w=S.alphaTopRight,P=S.alphaBottomLeft,A=S.alphaBottomRight;else{var R=S.alpha;T=R,w=R,P=R,A=R}var I=S.scrollFactorX,M=S.scrollFactorY;!l&&S.blendMode!==e.currentBlendMode&&e.setBlendMode(S.blendMode);var L=S.mask;L&&L.preRenderWebGL(e,S,x);var N=S.type;N!==e.currentType&&(e.newType=!0,e.currentType=N),e.nextTypeMatch=y<h-1?u[y+1].type===e.currentType:!1,S.setScrollFactor(I*d,M*g),S.setAlpha(T*v,w*v,P*v,A*v),S.renderWebGL(e,S,x,s,a),S.setAlpha(T,w,P,A),S.setScrollFactor(I,M),L&&L.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(a)}};o.exports=E},47407:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(441),u=e(95643),h=e(41212),s=e(35846),l=e(44594),v=e(61369),d=new a({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,c],initialize:function(y,S,T,w,P,A){u.call(this,y,"DOMElement"),this.parent=y.sys.game.domContainer,this.cache=y.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(S,T),typeof w=="string"?w[0]==="#"?this.setElement(w.substr(1),P,A):this.createElement(w,P,A):w&&this.setElement(w,P,A),y.sys.events.on(l.SLEEP,this.handleSceneEvent,this),y.sys.events.on(l.WAKE,this.handleSceneEvent,this),y.sys.events.on(l.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(g){var y=this.node,S=y.style;y&&(S.display=g.settings.visible?"block":"none")},setSkew:function(g,y){return g===void 0&&(g=0),y===void 0&&(y=g),this.skewX=g,this.skewY=y,this},setPerspective:function(g){return this.parent.style.perspective=g+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(g){this.parent.style.perspective=g+"px"}},addListener:function(g){if(this.node){g=g.split(" ");for(var y=0;y<g.length;y++)this.node.addEventListener(g[y],this.handler,!1)}return this},removeListener:function(g){if(this.node){g=g.split(" ");for(var y=0;y<g.length;y++)this.node.removeEventListener(g[y],this.handler)}return this},dispatchNativeEvent:function(g){this.emit(g.type,g)},createElement:function(g,y,S){return this.setElement(document.createElement(g),y,S)},setElement:function(g,y,S){this.removeElement();var T;if(typeof g=="string"?(g[0]==="#"&&(g=g.substr(1)),T=document.getElementById(g)):typeof g=="object"&&g.nodeType===1&&(T=g),!T)return this;if(this.node=T,y&&h(y))for(var w in y)T.style[w]=y[w];else typeof y=="string"&&(T.style=y);return T.style.zIndex="0",T.style.display="inline",T.style.position="absolute",T.phaser=this,this.parent&&this.parent.appendChild(T),S&&(T.innerText=S),this.updateSize()},createFromCache:function(g,y){var S=this.cache.get(g);return S&&this.createFromHTML(S,y),this},createFromHTML:function(g,y){y===void 0&&(y="div"),this.removeElement();var S=document.createElement(y);return this.node=S,S.style.zIndex="0",S.style.display="inline",S.style.position="absolute",S.phaser=this,this.parent&&this.parent.appendChild(S),S.innerHTML=g,this.updateSize()},removeElement:function(){return this.node&&(s(this.node),this.node=null),this},updateSize:function(){var g=this.node,y=g.getBoundingClientRect();return this.width=g.clientWidth,this.height=g.clientHeight,this.displayWidth=y.width||0,this.displayHeight=y.height||0,this},getChildByProperty:function(g,y){if(this.node){for(var S=this.node.querySelectorAll("*"),T=0;T<S.length;T++)if(S[T][g]===y)return S[T]}return null},getChildByID:function(g){return this.getChildByProperty("id",g)},getChildByName:function(g){return this.getChildByProperty("name",g)},setClassName:function(g){return this.node&&(this.node.className=g,this.updateSize()),this},setText:function(g){return this.node&&(this.node.innerText=g,this.updateSize()),this},setHTML:function(g){return this.node&&(this.node.innerHTML=g,this.updateSize()),this},preRender:function(){var g=this.parentContainer,y=this.node;y&&g&&!g.willRender()&&(y.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(l.PRE_RENDER,this.preRender,this)}});o.exports=d},49381:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47407),x=e(95643),c=e(61340),u=new c,h=new c,s=new c,l=function(v,d,g,y){if(d.node){var S=d.node.style,T=d.scene.sys.settings;if(!S||!T.visible||x.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&g.id||d.parentContainer&&!d.parentContainer.willRender()){S.display="none";return}var w=d.parentContainer,P=g.alpha*d.alpha;w&&(P*=w.alpha);var A=u,R=h,I=s,M=0,L=0,N="0%",G="0%";y?(M=d.width*d.scaleX*d.originX,L=d.height*d.scaleY*d.originY,R.applyITRS(d.x-M,d.y-L,d.rotation,d.scaleX,d.scaleY),A.copyFrom(g.matrix),A.multiplyWithOffset(y,-g.scrollX*d.scrollFactorX,-g.scrollY*d.scrollFactorY),R.e=d.x-M,R.f=d.y-L,A.multiply(R,I)):(M=d.width*d.originX,L=d.height*d.originY,R.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),A.copyFrom(g.matrix),N=100*d.originX+"%",G=100*d.originY+"%",R.e-=g.scrollX*d.scrollFactorX,R.f-=g.scrollY*d.scrollFactorY,A.multiply(R,I),I.e-=M,I.f-=L),d.transformOnly||(S.display="block",S.opacity=P,S.zIndex=d._depth,S.pointerEvents=d.pointerEvents,S.mixBlendMode=a[d._blendMode]),S.transform=I.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",S.transformOrigin=N+" "+G}};o.exports=l},2611:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3069),x=e(39429);x.register("dom",function(c,u,h,s,l){var v=new a(this.scene,c,u,h,s,l);return this.displayList.add(v),v})},441:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(49381),c=e(49381),o.exports={renderWebGL:x,renderCanvas:c}},62980:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},41337:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},44947:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},49358:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},35163:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="created"},97249:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="error"},19483:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="locked"},56059:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},26772:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="metadata"},64437:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="playing"},83411:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},75780:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeked"},67799:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeking"},63500:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stalled"},55541:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},53208:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="textureready"},4992:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},12:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unsupported"},51708:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}},42421:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(64993),h=new a({Extends:c,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,u],initialize:function(l){c.call(this,l,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});o.exports=h},70217:()=>{},56315:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42421),x=e(39429);x.register("extern",function(){var c=new a(this.scene);return this.displayList.add(c),c})},64993:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(80287),c=e(70217),o.exports={renderWebGL:x,renderCanvas:c}},80287:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(c,u,h,s){c.pipelines.clear();var l=a(u,h,s).calc;u.render.call(u,c,h,l),c.pipelines.rebind()};o.exports=x},85592:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),x=e(83419),c=e(85592),u=e(31401),h=e(8497),s=e(95643),l=e(95540),v=e(35154),d=e(36383),g=e(84503),y=new x({Extends:s,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,g],initialize:function(T,w){var P=v(w,"x",0),A=v(w,"y",0);s.call(this,T,"Graphics"),this.setPosition(P,A),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(w)},setDefaultStyles:function(S){return v(S,"lineStyle",null)&&(this.defaultStrokeWidth=v(S,"lineStyle.width",1),this.defaultStrokeColor=v(S,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(S,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(S,"fillStyle",null)&&(this.defaultFillColor=v(S,"fillStyle.color",16777215),this.defaultFillAlpha=v(S,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(S,T,w){return w===void 0&&(w=1),this.commandBuffer.push(c.LINE_STYLE,S,T,w),this._lineWidth=S,this},fillStyle:function(S,T){return T===void 0&&(T=1),this.commandBuffer.push(c.FILL_STYLE,S,T),this},fillGradientStyle:function(S,T,w,P,A,R,I,M){return A===void 0&&(A=1),R===void 0&&(R=A),I===void 0&&(I=A),M===void 0&&(M=A),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,A,R,I,M,S,T,w,P),this},lineGradientStyle:function(S,T,w,P,A,R){return R===void 0&&(R=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,S,R,T,w,P,A),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(S){return this.fillCircle(S.x,S.y,S.radius)},strokeCircleShape:function(S){return this.strokeCircle(S.x,S.y,S.radius)},fillCircle:function(S,T,w){return this.beginPath(),this.arc(S,T,w,0,d.PI2),this.fillPath(),this},strokeCircle:function(S,T,w){return this.beginPath(),this.arc(S,T,w,0,d.PI2),this.strokePath(),this},fillRectShape:function(S){return this.fillRect(S.x,S.y,S.width,S.height)},strokeRectShape:function(S){return this.strokeRect(S.x,S.y,S.width,S.height)},fillRect:function(S,T,w,P){return this.commandBuffer.push(c.FILL_RECT,S,T,w,P),this},strokeRect:function(S,T,w,P){var A=this._lineWidth/2,R=S-A,I=S+A;return this.beginPath(),this.moveTo(S,T),this.lineTo(S,T+P),this.strokePath(),this.beginPath(),this.moveTo(S+w,T),this.lineTo(S+w,T+P),this.strokePath(),this.beginPath(),this.moveTo(R,T),this.lineTo(I+w,T),this.strokePath(),this.beginPath(),this.moveTo(R,T+P),this.lineTo(I+w,T+P),this.strokePath(),this},fillRoundedRect:function(S,T,w,P,A){A===void 0&&(A=20);var R=A,I=A,M=A,L=A;typeof A!="number"&&(R=l(A,"tl",20),I=l(A,"tr",20),M=l(A,"bl",20),L=l(A,"br",20));var N=R>=0,G=I>=0,D=M>=0,B=L>=0;return R=Math.abs(R),I=Math.abs(I),M=Math.abs(M),L=Math.abs(L),this.beginPath(),this.moveTo(S+R,T),this.lineTo(S+w-I,T),G?this.arc(S+w-I,T+I,I,-d.TAU,0):this.arc(S+w,T,I,Math.PI,d.TAU,!0),this.lineTo(S+w,T+P-L),B?this.arc(S+w-L,T+P-L,L,0,d.TAU):this.arc(S+w,T+P,L,-d.TAU,Math.PI,!0),this.lineTo(S+M,T+P),D?this.arc(S+M,T+P-M,M,d.TAU,Math.PI):this.arc(S,T+P,M,0,-d.TAU,!0),this.lineTo(S,T+R),N?this.arc(S+R,T+R,R,-Math.PI,-d.TAU):this.arc(S,T,R,d.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(S,T,w,P,A){A===void 0&&(A=20);var R=A,I=A,M=A,L=A,N=Math.min(w,P)/2;typeof A!="number"&&(R=l(A,"tl",20),I=l(A,"tr",20),M=l(A,"bl",20),L=l(A,"br",20));var G=R>=0,D=I>=0,B=M>=0,$=L>=0;return R=Math.min(Math.abs(R),N),I=Math.min(Math.abs(I),N),M=Math.min(Math.abs(M),N),L=Math.min(Math.abs(L),N),this.beginPath(),this.moveTo(S+R,T),this.lineTo(S+w-I,T),this.moveTo(S+w-I,T),D?this.arc(S+w-I,T+I,I,-d.TAU,0):this.arc(S+w,T,I,Math.PI,d.TAU,!0),this.lineTo(S+w,T+P-L),this.moveTo(S+w,T+P-L),$?this.arc(S+w-L,T+P-L,L,0,d.TAU):this.arc(S+w,T+P,L,-d.TAU,Math.PI,!0),this.lineTo(S+M,T+P),this.moveTo(S+M,T+P),B?this.arc(S+M,T+P-M,M,d.TAU,Math.PI):this.arc(S,T+P,M,0,-d.TAU,!0),this.lineTo(S,T+R),this.moveTo(S,T+R),G?this.arc(S+R,T+R,R,-Math.PI,-d.TAU):this.arc(S,T,R,d.TAU,0,!0),this.strokePath(),this},fillPointShape:function(S,T){return this.fillPoint(S.x,S.y,T)},fillPoint:function(S,T,w){return!w||w<1?w=1:(S-=w/2,T-=w/2),this.commandBuffer.push(c.FILL_RECT,S,T,w,w),this},fillTriangleShape:function(S){return this.fillTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},strokeTriangleShape:function(S){return this.strokeTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},fillTriangle:function(S,T,w,P,A,R){return this.commandBuffer.push(c.FILL_TRIANGLE,S,T,w,P,A,R),this},strokeTriangle:function(S,T,w,P,A,R){return this.commandBuffer.push(c.STROKE_TRIANGLE,S,T,w,P,A,R),this},strokeLineShape:function(S){return this.lineBetween(S.x1,S.y1,S.x2,S.y2)},lineBetween:function(S,T,w,P){return this.beginPath(),this.moveTo(S,T),this.lineTo(w,P),this.strokePath(),this},lineTo:function(S,T){return this.commandBuffer.push(c.LINE_TO,S,T),this},moveTo:function(S,T){return this.commandBuffer.push(c.MOVE_TO,S,T),this},strokePoints:function(S,T,w,P){T===void 0&&(T=!1),w===void 0&&(w=!1),P===void 0&&(P=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var A=1;A<P;A++)this.lineTo(S[A].x,S[A].y);return T&&this.lineTo(S[0].x,S[0].y),w&&this.closePath(),this.strokePath(),this},fillPoints:function(S,T,w,P){T===void 0&&(T=!1),w===void 0&&(w=!1),P===void 0&&(P=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var A=1;A<P;A++)this.lineTo(S[A].x,S[A].y);return T&&this.lineTo(S[0].x,S[0].y),w&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(S,T){T===void 0&&(T=32);var w=S.getPoints(T);return this.strokePoints(w,!0)},strokeEllipse:function(S,T,w,P,A){A===void 0&&(A=32);var R=new h(S,T,w,P),I=R.getPoints(A);return this.strokePoints(I,!0)},fillEllipseShape:function(S,T){T===void 0&&(T=32);var w=S.getPoints(T);return this.fillPoints(w,!0)},fillEllipse:function(S,T,w,P,A){A===void 0&&(A=32);var R=new h(S,T,w,P),I=R.getPoints(A);return this.fillPoints(I,!0)},arc:function(S,T,w,P,A,R,I){return R===void 0&&(R=!1),I===void 0&&(I=0),this.commandBuffer.push(c.ARC,S,T,w,P,A,R,I),this},slice:function(S,T,w,P,A,R,I){return R===void 0&&(R=!1),I===void 0&&(I=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,S,T),this.commandBuffer.push(c.ARC,S,T,w,P,A,R,I),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(S,T){return this.commandBuffer.push(c.TRANSLATE,S,T),this},scaleCanvas:function(S,T){return this.commandBuffer.push(c.SCALE,S,T),this},rotateCanvas:function(S){return this.commandBuffer.push(c.ROTATE,S),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(S,T,w){var P=this.scene.sys,A=P.game.renderer;T===void 0&&(T=P.scale.width),w===void 0&&(w=P.scale.height),y.TargetCamera.setScene(this.scene),y.TargetCamera.setViewport(0,0,T,w),y.TargetCamera.scrollX=this.x,y.TargetCamera.scrollY=this.y;var R,I,M={willReadFrequently:!0};if(typeof S=="string")if(P.textures.exists(S)){R=P.textures.get(S);var L=R.getSourceImage();L instanceof HTMLCanvasElement&&(I=L.getContext("2d",M))}else R=P.textures.createCanvas(S,T,w),I=R.getSourceImage().getContext("2d",M);else S instanceof HTMLCanvasElement&&(I=S.getContext("2d",M));return I&&(this.renderCanvas(A,this,y.TargetCamera,null,I,!1),R&&R.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});y.TargetCamera=new a,o.exports=y},32768:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),x=e(20926),c=function(u,h,s,l,v,d){var g=h.commandBuffer,y=g.length,S=v||u.currentContext;if(!(y===0||!x(u,S,h,s,l))){s.addToRenderList(h);var T=1,w=1,P=0,A=0,R=1,I=0,M=0,L=0;S.beginPath();for(var N=0;N<y;++N){var G=g[N];switch(G){case a.ARC:S.arc(g[N+1],g[N+2],g[N+3],g[N+4],g[N+5],g[N+6]),N+=7;break;case a.LINE_STYLE:R=g[N+1],P=g[N+2],T=g[N+3],I=(P&16711680)>>>16,M=(P&65280)>>>8,L=P&255,S.strokeStyle="rgba("+I+","+M+","+L+","+T+")",S.lineWidth=R,N+=3;break;case a.FILL_STYLE:A=g[N+1],w=g[N+2],I=(A&16711680)>>>16,M=(A&65280)>>>8,L=A&255,S.fillStyle="rgba("+I+","+M+","+L+","+w+")",N+=2;break;case a.BEGIN_PATH:S.beginPath();break;case a.CLOSE_PATH:S.closePath();break;case a.FILL_PATH:d||S.fill();break;case a.STROKE_PATH:d||S.stroke();break;case a.FILL_RECT:d?S.rect(g[N+1],g[N+2],g[N+3],g[N+4]):S.fillRect(g[N+1],g[N+2],g[N+3],g[N+4]),N+=4;break;case a.FILL_TRIANGLE:S.beginPath(),S.moveTo(g[N+1],g[N+2]),S.lineTo(g[N+3],g[N+4]),S.lineTo(g[N+5],g[N+6]),S.closePath(),d||S.fill(),N+=6;break;case a.STROKE_TRIANGLE:S.beginPath(),S.moveTo(g[N+1],g[N+2]),S.lineTo(g[N+3],g[N+4]),S.lineTo(g[N+5],g[N+6]),S.closePath(),d||S.stroke(),N+=6;break;case a.LINE_TO:S.lineTo(g[N+1],g[N+2]),N+=2;break;case a.MOVE_TO:S.moveTo(g[N+1],g[N+2]),N+=2;break;case a.LINE_FX_TO:S.lineTo(g[N+1],g[N+2]),N+=5;break;case a.MOVE_FX_TO:S.moveTo(g[N+1],g[N+2]),N+=5;break;case a.SAVE:S.save();break;case a.RESTORE:S.restore();break;case a.TRANSLATE:S.translate(g[N+1],g[N+2]),N+=2;break;case a.SCALE:S.scale(g[N+1],g[N+2]),N+=2;break;case a.ROTATE:S.rotate(g[N+1]),N+=1;break;case a.GRADIENT_FILL_STYLE:N+=5;break;case a.GRADIENT_LINE_STYLE:N+=6;break}}S.restore()}};o.exports=c},87079:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(43831);a.register("graphics",function(c,u){c===void 0&&(c={}),u!==void 0&&(c.add=u);var h=new x(this.scene,c);return c.add&&this.scene.sys.displayList.add(h),h})},1201:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43831),x=e(39429);x.register("graphics",function(c){return this.displayList.add(new a(this.scene,c))})},84503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(77545),c=e(32768),c=e(32768),o.exports={renderWebGL:x,renderCanvas:c}},77545:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),x=e(91296),c=e(61340),u=e(70554),h=function(g,y,S){this.x=g,this.y=y,this.width=S},s=function(g,y,S){this.points=[],this.pointsLength=1,this.points[0]=new h(g,y,S)},l=[],v=new c,d=function(g,y,S,T){if(y.commandBuffer.length!==0){S.addToRenderList(y);var w=g.pipelines.set(y.pipeline,y);g.pipelines.preBatch(y);for(var P=x(y,S,T).calc,A=v.loadIdentity(),R=y.commandBuffer,I=S.alpha*y.alpha,M=1,L=w.fillTint,N=w.strokeTint,G=0,D=0,B=0,$=.01,k=Math.PI*2,X,Y=[],Z=0,Q=!0,j=null,K=u.getTintAppendFloatAlpha,W=0;W<R.length;W++)switch(X=R[W],X){case a.BEGIN_PATH:{Y.length=0,j=null,Q=!0;break}case a.CLOSE_PATH:{Q=!1,j&&j.points.length&&j.points.push(j.points[0]);break}case a.FILL_PATH:{for(Z=0;Z<Y.length;Z++)w.batchFillPath(Y[Z].points,A,P);break}case a.STROKE_PATH:{for(Z=0;Z<Y.length;Z++)w.batchStrokePath(Y[Z].points,M,Q,A,P);break}case a.LINE_STYLE:{M=R[++W];var V=R[++W],J=R[++W]*I,ee=K(V,J);N.TL=ee,N.TR=ee,N.BL=ee,N.BR=ee;break}case a.FILL_STYLE:{var te=R[++W],ne=R[++W]*I,se=K(te,ne);L.TL=se,L.TR=se,L.BL=se,L.BR=se;break}case a.GRADIENT_FILL_STYLE:{var ae=R[++W]*I,ue=R[++W]*I,de=R[++W]*I,fe=R[++W]*I;L.TL=K(R[++W],ae),L.TR=K(R[++W],ue),L.BL=K(R[++W],de),L.BR=K(R[++W],fe);break}case a.GRADIENT_LINE_STYLE:{M=R[++W];var ye=R[++W]*I;N.TL=K(R[++W],ye),N.TR=K(R[++W],ye),N.BL=K(R[++W],ye),N.BR=K(R[++W],ye);break}case a.ARC:{var ve=0,Se=R[++W],Ie=R[++W],Ae=R[++W],Oe=R[++W],xe=R[++W],be=R[++W],Pe=R[++W];for(xe-=Oe,be?xe<-k?xe=-k:xe>0&&(xe=-k+xe%k):xe>k?xe=k:xe<0&&(xe=k+xe%k),j===null&&(j=new s(Se+Math.cos(Oe)*Ae,Ie+Math.sin(Oe)*Ae,M),Y.push(j),ve+=$);ve<1+Pe;)B=xe*ve+Oe,G=Se+Math.cos(B)*Ae,D=Ie+Math.sin(B)*Ae,j.points.push(new h(G,D,M)),ve+=$;B=xe+Oe,G=Se+Math.cos(B)*Ae,D=Ie+Math.sin(B)*Ae,j.points.push(new h(G,D,M));break}case a.FILL_RECT:{w.batchFillRect(R[++W],R[++W],R[++W],R[++W],A,P);break}case a.FILL_TRIANGLE:{w.batchFillTriangle(R[++W],R[++W],R[++W],R[++W],R[++W],R[++W],A,P);break}case a.STROKE_TRIANGLE:{w.batchStrokeTriangle(R[++W],R[++W],R[++W],R[++W],R[++W],R[++W],M,A,P);break}case a.LINE_TO:{j!==null?j.points.push(new h(R[++W],R[++W],M)):(j=new s(R[++W],R[++W],M),Y.push(j));break}case a.MOVE_TO:{j=new s(R[++W],R[++W],M),Y.push(j);break}case a.SAVE:{l.push(A.copyToArray());break}case a.RESTORE:{A.copyFromArray(l.pop());break}case a.TRANSLATE:{Se=R[++W],Ie=R[++W],A.translate(Se,Ie);break}case a.SCALE:{Se=R[++W],Ie=R[++W],A.scale(Se,Ie);break}case a.ROTATE:{A.rotate(R[++W]);break}}g.pipelines.postBatch(y)}};o.exports=d},26479:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61061),x=e(83419),c=e(51708),u=e(50792),h=e(46710),s=e(95540),l=e(35154),v=e(97022),d=e(41212),g=e(88492),y=e(35072),S=e(68287),T=new x({Extends:u,initialize:function(P,A,R){u.call(this),R?A&&!Array.isArray(A)&&(A=[A]):Array.isArray(A)?d(A[0])&&(R=A,A=null):d(A)&&(R=A,A=null),this.scene=P,this.children=new y,this.isParent=!0,this.type="Group",this.classType=s(R,"classType",S),this.name=s(R,"name",""),this.active=s(R,"active",!0),this.maxSize=s(R,"maxSize",-1),this.defaultKey=s(R,"defaultKey",null),this.defaultFrame=s(R,"defaultFrame",null),this.runChildUpdate=s(R,"runChildUpdate",!1),this.createCallback=s(R,"createCallback",null),this.removeCallback=s(R,"removeCallback",null),this.createMultipleCallback=s(R,"createMultipleCallback",null),this.internalCreateCallback=s(R,"internalCreateCallback",null),this.internalRemoveCallback=s(R,"internalRemoveCallback",null),A&&this.addMultiple(A),R&&this.createMultiple(R),this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(w,P,A,R,I,M){if(w===void 0&&(w=0),P===void 0&&(P=0),A===void 0&&(A=this.defaultKey),R===void 0&&(R=this.defaultFrame),I===void 0&&(I=!0),M===void 0&&(M=!0),this.isFull())return null;var L=new this.classType(this.scene,w,P,A,R);return L.addToDisplayList(this.scene.sys.displayList),L.addToUpdateList(),L.visible=I,L.setActive(M),this.add(L),L},createMultiple:function(w){if(this.isFull())return[];Array.isArray(w)||(w=[w]);var P=[];if(w[0].key)for(var A=0;A<w.length;A++){var R=this.createFromConfig(w[A]);P=P.concat(R)}return P},createFromConfig:function(w){if(this.isFull())return[];this.classType=s(w,"classType",this.classType);var P=s(w,"key",void 0),A=s(w,"frame",null),R=s(w,"visible",!0),I=s(w,"active",!0),M=[];if(P===void 0)return M;Array.isArray(P)||(P=[P]),Array.isArray(A)||(A=[A]);var L=s(w,"repeat",0),N=s(w,"randomKey",!1),G=s(w,"randomFrame",!1),D=s(w,"yoyo",!1),B=s(w,"quantity",!1),$=s(w,"frameQuantity",1),k=s(w,"max",0),X=g(P,A,{max:k,qty:B||$,random:N,randomB:G,repeat:L,yoyo:D});w.createCallback&&(this.createCallback=w.createCallback),w.removeCallback&&(this.removeCallback=w.removeCallback),w.internalCreateCallback&&(this.internalCreateCallback=w.internalCreateCallback),w.internalRemoveCallback&&(this.internalRemoveCallback=w.internalRemoveCallback);for(var Y=0;Y<X.length;Y++){var Z=this.create(0,0,X[Y].a,X[Y].b,R,I);if(!Z)break;M.push(Z)}if(v(w,"setXY")){var Q=l(w,"setXY.x",0),j=l(w,"setXY.y",0),K=l(w,"setXY.stepX",0),W=l(w,"setXY.stepY",0);a.SetXY(M,Q,j,K,W)}if(v(w,"setRotation")){var V=l(w,"setRotation.value",0),J=l(w,"setRotation.step",0);a.SetRotation(M,V,J)}if(v(w,"setScale")){var ee=l(w,"setScale.x",1),te=l(w,"setScale.y",ee),ne=l(w,"setScale.stepX",0),se=l(w,"setScale.stepY",0);a.SetScale(M,ee,te,ne,se)}if(v(w,"setOrigin")){var ae=l(w,"setOrigin.x",.5),ue=l(w,"setOrigin.y",ae),de=l(w,"setOrigin.stepX",0),fe=l(w,"setOrigin.stepY",0);a.SetOrigin(M,ae,ue,de,fe)}if(v(w,"setAlpha")){var ye=l(w,"setAlpha.value",1),ve=l(w,"setAlpha.step",0);a.SetAlpha(M,ye,ve)}if(v(w,"setDepth")){var Se=l(w,"setDepth.value",0),Ie=l(w,"setDepth.step",0);a.SetDepth(M,Se,Ie)}if(v(w,"setScrollFactor")){var Ae=l(w,"setScrollFactor.x",1),Oe=l(w,"setScrollFactor.y",Ae),xe=l(w,"setScrollFactor.stepX",0),be=l(w,"setScrollFactor.stepY",0);a.SetScrollFactor(M,Ae,Oe,xe,be)}var Pe=s(w,"hitArea",null),Ge=s(w,"hitAreaCallback",null);Pe&&a.SetHitArea(M,Pe,Ge);var ze=s(w,"gridAlign",!1);return ze&&a.GridAlign(M,ze),this.createMultipleCallback&&this.createMultipleCallback.call(this,M),M},preUpdate:function(w,P){if(!(!this.runChildUpdate||this.children.size===0))for(var A=this.children.entries.slice(),R=0;R<A.length;R++){var I=A[R];I.active&&I.update(w,P)}},add:function(w,P){return P===void 0&&(P=!1),this.isFull()?this:(this.children.set(w),this.internalCreateCallback&&this.internalCreateCallback.call(this,w),this.createCallback&&this.createCallback.call(this,w),P&&(w.addToDisplayList(this.scene.sys.displayList),w.addToUpdateList()),w.on(c.DESTROY,this.remove,this),this)},addMultiple:function(w,P){if(P===void 0&&(P=!1),Array.isArray(w))for(var A=0;A<w.length;A++)this.add(w[A],P);return this},remove:function(w,P,A){return P===void 0&&(P=!1),A===void 0&&(A=!1),this.children.contains(w)?(this.children.delete(w),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,w),this.removeCallback&&this.removeCallback.call(this,w),w.off(c.DESTROY,this.remove,this),A?w.destroy():P&&(w.removeFromDisplayList(),w.removeFromUpdateList()),this):this},clear:function(w,P){w===void 0&&(w=!1),P===void 0&&(P=!1);for(var A=this.children,R=0;R<A.size;R++){var I=A.entries[R];I.off(c.DESTROY,this.remove,this),P?I.destroy():w&&(I.removeFromDisplayList(),I.removeFromUpdateList())}return this.children.clear(),this},contains:function(w){return this.children.contains(w)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(w,P,A,R){return h(this.children.entries,w,P,A,R)},getFirst:function(w,P,A,R,I,M,L){return this.getHandler(!0,1,w,P,A,R,I,M,L)},getFirstNth:function(w,P,A,R,I,M,L,N){return this.getHandler(!0,w,P,A,R,I,M,L,N)},getLast:function(w,P,A,R,I,M,L){return this.getHandler(!1,1,w,P,A,R,I,M,L)},getLastNth:function(w,P,A,R,I,M,L,N){return this.getHandler(!1,w,P,A,R,I,M,L,N)},getHandler:function(w,P,A,R,I,M,L,N,G){A===void 0&&(A=!1),R===void 0&&(R=!1);var D,B,$=0,k=this.children.entries;if(w)for(B=0;B<k.length;B++)if(D=k[B],D.active===A){if($++,$===P)break}else D=null;else for(B=k.length-1;B>=0;B--)if(D=k[B],D.active===A){if($++,$===P)break}else D=null;return D?(typeof I=="number"&&(D.x=I),typeof M=="number"&&(D.y=M),D):R?this.create(I,M,L,N,G):null},get:function(w,P,A,R,I){return this.getFirst(!1,!0,w,P,A,R,I)},getFirstAlive:function(w,P,A,R,I,M){return this.getFirst(!0,w,P,A,R,I,M)},getFirstDead:function(w,P,A,R,I,M){return this.getFirst(!1,w,P,A,R,I,M)},playAnimation:function(w,P){return a.PlayAnimation(this.children.entries,w,P),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(w){w===void 0&&(w=!0);for(var P=0,A=0;A<this.children.size;A++)this.children.entries[A].active===w&&P++;return P},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var w=this.getTotalUsed(),P=this.maxSize===-1?999999999999:this.maxSize;return P-w},setActive:function(w){return this.active=w,this},setName:function(w){return this.name=w,this},propertyValueSet:function(w,P,A,R,I){return a.PropertyValueSet(this.children.entries,w,P,A,R,I),this},propertyValueInc:function(w,P,A,R,I){return a.PropertyValueInc(this.children.entries,w,P,A,R,I),this},setX:function(w,P){return a.SetX(this.children.entries,w,P),this},setY:function(w,P){return a.SetY(this.children.entries,w,P),this},setXY:function(w,P,A,R){return a.SetXY(this.children.entries,w,P,A,R),this},incX:function(w,P){return a.IncX(this.children.entries,w,P),this},incY:function(w,P){return a.IncY(this.children.entries,w,P),this},incXY:function(w,P,A,R){return a.IncXY(this.children.entries,w,P,A,R),this},shiftPosition:function(w,P,A){return a.ShiftPosition(this.children.entries,w,P,A),this},angle:function(w,P){return a.Angle(this.children.entries,w,P),this},rotate:function(w,P){return a.Rotate(this.children.entries,w,P),this},rotateAround:function(w,P){return a.RotateAround(this.children.entries,w,P),this},rotateAroundDistance:function(w,P,A){return a.RotateAroundDistance(this.children.entries,w,P,A),this},setAlpha:function(w,P){return a.SetAlpha(this.children.entries,w,P),this},setTint:function(w,P,A,R){return a.SetTint(this.children.entries,w,P,A,R),this},setOrigin:function(w,P,A,R){return a.SetOrigin(this.children.entries,w,P,A,R),this},scaleX:function(w,P){return a.ScaleX(this.children.entries,w,P),this},scaleY:function(w,P){return a.ScaleY(this.children.entries,w,P),this},scaleXY:function(w,P,A,R){return a.ScaleXY(this.children.entries,w,P,A,R),this},setDepth:function(w,P){return a.SetDepth(this.children.entries,w,P),this},setBlendMode:function(w){return a.SetBlendMode(this.children.entries,w),this},setHitArea:function(w,P){return a.SetHitArea(this.children.entries,w,P),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(w){this.children.contains(w)&&w.setActive(!1)},killAndHide:function(w){this.children.contains(w)&&(w.setActive(!1),w.setVisible(!1))},setVisible:function(w,P,A){return a.SetVisible(this.children.entries,w,P,A),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(w,P){w===void 0&&(w=!1),P===void 0&&(P=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(c.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(P,w),this.scene=void 0,this.children=void 0)}});o.exports=T},94975:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(26479);a.register("group",function(c){return new x(this.scene,null,c)})},3385:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26479),x=e(39429);x.register("group",function(c,u){return this.updateList.add(new a(this.scene,c,u))})},88571:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(59819),h=new a({Extends:c,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,u],initialize:function(l,v,d,g,y){c.call(this,l,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,y),this.setPosition(v,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=h},40652:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a),e.batchSprite(a,a.frame,x,c)};o.exports=E},82459:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(88571);x.register("image",function(h,s){h===void 0&&(h={});var l=c(h,"key",null),v=c(h,"frame",null),d=new u(this.scene,0,0,l,v);return s!==void 0&&(h.add=s),a(this.scene,d,h),d})},2117:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88571),x=e(39429);x.register("image",function(c,u,h,s){return this.displayList.add(new a(this.scene,c,u,h,s))})},59819:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(99517),c=e(40652),o.exports={renderWebGL:x,renderCanvas:c}},99517:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a),this.pipeline.batchSprite(a,x,c)};o.exports=E},77856:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};a.Shader=e(20071),a.Mesh=e(4703),a.NineSlice=e(28103),a.PointLight=e(80321),a.Plane=e(33663),a.Factories.Shader=e(74177),a.Factories.Mesh=e(9225),a.Factories.NineSlice=e(47521),a.Factories.PointLight=e(71255),a.Factories.Plane=e(30985),a.Creators.Shader=e(54935),a.Creators.Mesh=e(20527),a.Creators.NineSlice=e(28279),a.Creators.PointLight=e(39829),a.Creators.Plane=e(56015),a.Light=e(41432),a.LightsManager=e(61356),a.LightsPlugin=e(88992),o.exports=a},93595:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(83419),c=e(31401),u=e(53774),h=e(45893),s=e(50792),l=e(51708),v=e(73162),d=e(33963),g=e(44594),y=e(19186),S=new x({Extends:v,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.PostPipeline,c.Visible,s,d],initialize:function(w,P){v.call(this,w),s.call(this),this.scene=w,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=w.sys,this.events=w.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),P&&this.add(P),w.sys.queueDepthSort()},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},setState:function(T){return this.state=T,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(T,w){return this.data||(this.data=new h(this)),this.data.set(T,w),this},incData:function(T,w){return this.data||(this.data=new h(this)),this.data.inc(T,w),this},toggleData:function(T){return this.data||(this.data=new h(this)),this.data.toggle(T),this},getData:function(T){return this.data||(this.data=new h(this)),this.data.get(T)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(T){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&T.id)},getIndexList:function(){for(var T=this,w=this.parentContainer,P=[];w&&(P.unshift(w.getIndex(T)),T=w,w.parentContainer);)w=w.parentContainer;return P.unshift(this.displayList.getIndex(T)),P},addChildCallback:function(T){var w=T.displayList;w&&w!==this&&T.removeFromDisplayList(),T.displayList||(this.queueDepthSort(),T.displayList=this,T.emit(l.ADDED_TO_SCENE,T,this.scene),this.events.emit(g.ADDED_TO_SCENE,T,this.scene))},removeChildCallback:function(T){this.queueDepthSort(),T.displayList=null,T.emit(l.REMOVED_FROM_SCENE,T,this.scene),this.events.emit(g.REMOVED_FROM_SCENE,T,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(y(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(T,w){return T._depth-w._depth},getChildren:function(){return this.list},addToDisplayList:function(T){return T===void 0&&(T=this.scene.sys.displayList),this.displayList&&this.displayList!==T&&this.removeFromDisplayList(),T.exists(this)||(this.displayList=T,T.add(this,!0),T.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),T.events.emit(g.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var T=this.displayList||this.scene.sys.displayList;return T.exists(this)&&(T.remove(this,!0),T.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),T.events.emit(g.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(T){if(!(!this.scene||this.ignoreDestroy)){this.emit(l.DESTROY,this);for(var w=this.list;w.length;)w[0].destroy(T);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});o.exports=S},2956:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=a.list;if(c.length!==0){a.depthSort();var u=a.blendMode!==-1;u||e.setBlendMode(0);var h=a._alpha;a.mask&&a.mask.preRenderCanvas(e,null,x);for(var s=0;s<c.length;s++){var l=c[s];if(l.willRender(x)){var v=l.alpha;!u&&l.blendMode!==e.currentBlendMode&&e.setBlendMode(l.blendMode),l.setAlpha(v*h),l.renderCanvas(e,l,x),l.setAlpha(v)}}a.mask&&a.mask.postRenderCanvas(e)}};o.exports=E},25179:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(93595),c=e(44603),u=e(23568);c.register("layer",function(h,s){h===void 0&&(h={});var l=u(h,"children",null),v=new x(this.scene,l);return s!==void 0&&(h.add=s),a(this.scene,v,h),v})},20005:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93595),x=e(39429);x.register("layer",function(c){return this.displayList.add(new a(this.scene,c))})},33963:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(15869),c=e(2956),o.exports={renderWebGL:x,renderCanvas:c}},15869:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=a.list,u=c.length;if(u!==0){a.depthSort(),e.pipelines.preBatch(a);var h=a.blendMode!==-1;h||e.setBlendMode(0);for(var s=a.alpha,l=0;l<u;l++){var v=c[l];if(v.willRender(x)){var d,g,y,S;if(v.alphaTopLeft!==void 0)d=v.alphaTopLeft,g=v.alphaTopRight,y=v.alphaBottomLeft,S=v.alphaBottomRight;else{var T=v.alpha;d=T,g=T,y=T,S=T}!h&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var w=v.mask;w&&w.preRenderWebGL(e,v,x);var P=v.type;P!==e.currentType&&(e.newType=!0,e.currentType=P),e.nextTypeMatch=l<u-1?c[l+1].type===e.currentType:!1,v.setAlpha(d*s,g*s,y*s,S*s),v.renderWebGL(e,v,x),v.setAlpha(d,g,y,S),w&&w.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(a)}};o.exports=E},41432:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=e(83419),c=e(31401),u=e(51767),h=e(70554),s=new x({Extends:a,Mixins:[c.Origin,c.ScrollFactor,c.Visible],initialize:function(v,d,g,y,S,T,w){a.call(this,v,d,g),this.color=new u(y,S,T),this.intensity=w,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(g)},displayWidth:{get:function(){return this.diameter},set:function(l){this.diameter=l}},displayHeight:{get:function(){return this.diameter},set:function(l){this.diameter=l}},width:{get:function(){return this.diameter},set:function(l){this.diameter=l}},height:{get:function(){return this.diameter},set:function(l){this.diameter=l}},willRender:function(l){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setColor:function(l){var v=h.getFloatsFromUintRGB(l);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(l){return this.intensity=l,this},setRadius:function(l){return this.radius=l,this}});s.RENDER_MASK=15,o.exports=s},61356:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81491),x=e(83419),c=e(20339),u=e(41432),h=e(80321),s=e(51767),l=e(19133),v=e(19186),d=e(70554),g=new x({initialize:function(){this.lights=[],this.ambientColor=new s(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(y,S,T,w,P,A){return this.systems.displayList.add(new h(this.scene,y,S,T,w,P,A))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(y){for(var S=this.lights,T=y.worldView,w=[],P=0;P<S.length;P++){var A=S[P];A.willRender(y)&&a(A,T)&&w.push({light:A,distance:c(A.x,A.y,T.centerX,T.centerY)})}return w.length>this.maxLights&&(v(w,this.sortByDistance),w=w.slice(0,this.maxLights)),this.visibleLights=w.length,w},sortByDistance:function(y,S){return y.distance>=S.distance},setAmbientColor:function(y){var S=d.getFloatsFromUintRGB(y);return this.ambientColor.set(S[0],S[1],S[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(y,S,T,w,P){y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=128),w===void 0&&(w=16777215),P===void 0&&(P=1);var A=d.getFloatsFromUintRGB(w),R=new u(y,S,T,A[0],A[1],A[2],P);return this.lights.push(R),R},removeLight:function(y){var S=this.lights.indexOf(y);return S>=0&&l(this.lights,S),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});o.exports=g},88992:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(61356),c=e(37277),u=e(44594),h=new a({Extends:x,initialize:function(l){this.scene=l,this.systems=l.sys,l.sys.settings.isBooted||l.sys.events.once(u.BOOT,this.boot,this),x.call(this)},boot:function(){var s=this.systems.events;s.on(u.SHUTDOWN,this.shutdown,this),s.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});c.register("LightsPlugin",h,"lights"),o.exports=h},4703:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(39506),u=e(83997),h=e(95643),s=e(34684),l=e(92515),v=e(91296),d=e(37867),g=e(29807),y=e(43396),S=e(19186),T=e(25836),w=e(39318),P=new a({Extends:h,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,g],initialize:function(R,I,M,L,N,G,D,B,$,k,X,Y){I===void 0&&(I=0),M===void 0&&(M=0),L===void 0&&(L="__WHITE"),h.call(this,R,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new T,this.modelScale=new T(1,1,1),this.modelRotation=new T,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new T,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Z=R.sys.renderer;this.setPosition(I,M),this.setTexture(L,N),this.setSize(Z.width,Z.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Z.width,Z.height),G&&this.addVertices(G,D,B,$,k,X,Y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(A){return this.viewPosition.addScale(T.LEFT,A),this.dirtyCache[10]=1,this},panY:function(A){return this.viewPosition.y+=T.DOWN.y*A,this.dirtyCache[10]=1,this},panZ:function(A){return this.viewPosition.z+=A,this.dirtyCache[10]=1,this},setPerspective:function(A,R,I,M,L){return I===void 0&&(I=45),M===void 0&&(M=.01),L===void 0&&(L=1e3),this.fov=I,this.projectionMatrix.perspective(c(I),A/R,M,L),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(A,R,I,M){return A===void 0&&(A=this.scene.sys.renderer.getAspectRatio()),R===void 0&&(R=1),I===void 0&&(I=-1e3),M===void 0&&(M=1e3),this.fov=0,this.projectionMatrix.ortho(-A,A,-R,R,I,M),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(A){A.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(A,R,I,M,L,N,G,D,B){var $=this.scene.sys.cache.obj.get(A),k;return $&&(k=s($,this,R,I,M,L,N,G,D,B)),(!k||k.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",A),this},sortByDepth:function(A,R){return A.depth-R.depth},depthSort:function(){return S(this.faces,this.sortByDepth),this},addVertex:function(A,R,I,M,L,N,G){var D=new w(A,R,I,M,L,N,G);return this.vertices.push(D),D},addFace:function(A,R,I){var M=new u(A,R,I);return this.faces.push(M),this.dirtyCache[9]=-1,M},addVertices:function(A,R,I,M,L,N,G){var D=l(A,R,I,M,L,N,G);return D?(this.faces=this.faces.concat(D.faces),this.vertices=this.vertices.concat(D.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(A){return this.faces[A]},hasFaceAt:function(A,R,I){I===void 0&&(I=this.scene.sys.cameras.main);for(var M=v(this,I).calc,L=this.faces,N=0;N<L.length;N++){var G=L[N];if(G.contains(A,R,M))return!0}return!1},getFaceAt:function(A,R,I){I===void 0&&(I=this.scene.sys.cameras.main);for(var M=v(this,I).calc,L=this.faces,N=[],G=0;G<L.length;G++){var D=L[G];D.contains(A,R,M)&&N.push(D)}return S(N,this.sortByDepth)},setDebug:function(A,R){return this.debugGraphic=A,!A&&!R?this.debugCallback=null:R?this.debugCallback=R:this.debugCallback=this.renderDebug,this},isDirty:function(){var A=this.modelPosition,R=this.modelRotation,I=this.modelScale,M=this.dirtyCache,L=A.x,N=A.y,G=A.z,D=R.x,B=R.y,$=R.z,k=I.x,X=I.y,Y=I.z,Z=this.getFaceCount(),Q=M[0],j=M[1],K=M[2],W=M[3],V=M[4],J=M[5],ee=M[6],te=M[7],ne=M[8],se=M[9];return M[0]=L,M[1]=N,M[2]=G,M[3]=D,M[4]=B,M[5]=$,M[6]=k,M[7]=X,M[8]=Y,M[9]=Z,Q!==L||j!==N||K!==G||W!==D||V!==B||J!==$||ee!==k||te!==X||ne!==Y||se!==Z},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var A=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!A[10]&&!this.isDirty())){var R=this.width,I=this.height,M=this.viewMatrix,L=this.viewPosition;A[10]&&(M.identity(),M.translate(L),M.invert(),A[10]=0);var N=this.transformMatrix;N.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var G=L.z,D=this.faces,B=0;B<D.length;B++)D[B].transformCoordinatesLocal(N,R,I,G);this.depthSort()}},renderDebug:function(A,R){for(var I=A.debugGraphic,M=0;M<R.length;M++){var L=R[M],N=L.vertex1.tx,G=L.vertex1.ty,D=L.vertex2.tx,B=L.vertex2.ty,$=L.vertex3.tx,k=L.vertex3.ty;I.strokeTriangle(N,G,D,B,$,k)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(A){A===void 0&&(A={});var R=(function(I,M,L){for(var N=this.faces,G=0;G<N.length;G++){var D=N[G];if(D.contains(M,L))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,A,R),this},setTint:function(A){A===void 0&&(A=16777215);for(var R=this.vertices,I=0;I<R.length;I++)R[I].color=A;return this},uvScroll:function(A,R){for(var I=this.faces,M=0;M<I.length;M++)I[M].scrollUV(A,R);return this},uvScale:function(A,R){for(var I=this.faces,M=0;M<I.length;M++)I[M].scaleUV(A,R);return this},tint:{set:function(A){this.setTint(A)}},rotateX:{get:function(){return y(this.modelRotation.x)},set:function(A){this.modelRotation.x=c(A)}},rotateY:{get:function(){return y(this.modelRotation.y)},set:function(A){this.modelRotation.y=c(A)}},rotateZ:{get:function(){return y(this.modelRotation.z)},set:function(A){this.modelRotation.z=c(A)}}});o.exports=P},36488:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E},20527:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(35154),h=e(4703);x.register("mesh",function(s,l){s===void 0&&(s={});var v=c(s,"key",null),d=c(s,"frame",null),g=u(s,"vertices",[]),y=u(s,"uvs",[]),S=u(s,"indicies",[]),T=u(s,"containsZ",!1),w=u(s,"normals",[]),P=u(s,"colors",16777215),A=u(s,"alphas",1),R=new h(this.scene,0,0,v,d,g,y,S,T,w,P,A);return l!==void 0&&(s.add=l),a(this.scene,R,s),R})},9225:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4703),x=e(39429);x.register("mesh",function(c,u,h,s,l,v,d,g,y,S,T){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d,g,y,S,T))})},29807:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(48833),c=e(36488),o.exports={renderWebGL:x,renderCanvas:c}},48833:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(c,u,h,s){var l=u.faces,v=l.length;if(v!==0){h.addToRenderList(u);var d=c.pipelines.set(u.pipeline,u),g=a(u,h,s).calc;c.pipelines.preBatch(u);for(var y=d.setGameObject(u),S=d.vertexViewF32,T=d.vertexViewU32,w=d.vertexCount*d.currentShader.vertexComponentCount-1,P=u.tintFill,A=[],R=u.debugCallback,I=g.a,M=g.b,L=g.c,N=g.d,G=g.e,D=g.f,B=u.viewPosition.z,$=u.hideCCW,k=h.roundPixels,X=h.alpha*u.alpha,Y=0,Z=0;Z<v;Z++){var Q=l[Z];Q.isInView(h,$,B,X,I,M,L,N,G,D,k)&&(d.shouldFlush(3)&&(d.flush(),y=d.setGameObject(u),w=d.vertexCount*d.currentShader.vertexComponentCount-1),w=Q.load(S,T,w,y,P),Y++,d.vertexCount+=3,d.currentBatch.count=d.vertexCount-d.currentBatch.start,R&&A.push(Q))}u.totalFrame+=Y,R&&R.call(u,u,A),c.pipelines.postBatch(u)}};o.exports=x},28103:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(78023),h=e(39318),s=new a({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,u],initialize:function(v,d,g,y,S,T,w,P,A,R,I){c.call(this,v,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var M=v.textures.getFrame(y,S);this.is3Slice=!R&&!I,M&&M.scale9&&(this.is3Slice=M.is3Slice);for(var L=this.is3Slice?18:54,N=0;N<L;N++)this.vertices.push(new h);this.setPosition(d,g),this.setTexture(y,S),this.setSlices(T,w,P,A,R,I,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(l,v,d,g,y,S,T){d===void 0&&(d=10),g===void 0&&(g=10),y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=!1);var w=this.frame,P=!1;if(this.is3Slice&&T&&y!==0&&S!==0&&(P=!0),P)console.warn("Cannot change 9 slice to 3 slice");else{if(w&&w.scale9&&!T){var A=w.data.scale9Borders,R=A.x,I=A.y;d=R,g=w.width-A.w-R,y=I,S=w.height-A.h-I,l===void 0&&(l=w.width),v===void 0&&(v=w.height)}else l===void 0&&(l=256),v===void 0&&(v=256);this._width=l,this._height=v,this.leftWidth=d,this.rightWidth=g,this.topHeight=y,this.bottomHeight=S,this.is3Slice&&(v=w.height,this._height=v,this.topHeight=v,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var l=this.leftWidth,v=this.rightWidth,d=this.topHeight,g=this.bottomHeight,y=this.frame.width,S=this.frame.height;this.updateQuadUVs(0,0,0,l/y,d/S),this.updateQuadUVs(6,l/y,0,1-v/y,d/S),this.updateQuadUVs(12,1-v/y,0,1,d/S),this.is3Slice||(this.updateQuadUVs(18,0,d/S,l/y,1-g/S),this.updateQuadUVs(24,l/y,d/S,1-v/y,1-g/S),this.updateQuadUVs(30,1-v/y,d/S,1,1-g/S),this.updateQuadUVs(36,0,1-g/S,l/y,1),this.updateQuadUVs(42,l/y,1-g/S,1-v/y,1),this.updateQuadUVs(48,1-v/y,1-g/S,1,1))},updateVertices:function(){var l=this.leftWidth,v=this.rightWidth,d=this.topHeight,g=this.bottomHeight,y=this.width,S=this.height;this.updateQuad(0,-.5,.5,-.5+l/y,.5-d/S),this.updateQuad(6,-.5+l/y,.5,.5-v/y,.5-d/S),this.updateQuad(12,.5-v/y,.5,.5,.5-d/S),this.is3Slice||(this.updateQuad(18,-.5,.5-d/S,-.5+l/y,-.5+g/S),this.updateQuad(24,-.5+l/y,.5-d/S,.5-v/y,-.5+g/S),this.updateQuad(30,.5-v/y,.5-d/S,.5,-.5+g/S),this.updateQuad(36,-.5,-.5+g/S,-.5+l/y,-.5),this.updateQuad(42,-.5+l/y,-.5+g/S,.5-v/y,-.5),this.updateQuad(48,.5-v/y,-.5+g/S,.5,-.5))},updateQuad:function(l,v,d,g,y){var S=this.width,T=this.height,w=this.originX,P=this.originY,A=this.vertices;A[l+0].resize(v,d,S,T,w,P),A[l+1].resize(v,y,S,T,w,P),A[l+2].resize(g,d,S,T,w,P),A[l+3].resize(v,y,S,T,w,P),A[l+4].resize(g,y,S,T,w,P),A[l+5].resize(g,d,S,T,w,P)},updateQuadUVs:function(l,v,d,g,y){var S=this.vertices,T=this.frame,w=T.u0,P=T.v0,A=T.u1,R=T.v1;if(w!==0||A!==1){var I=A-w;v=w+v*I,g=w+g*I}if(P!==0||R!==1){var M=R-P;d=P+d*M,y=P+y*M}S[l+0].setUVs(v,d),S[l+1].setUVs(v,y),S[l+2].setUVs(g,d),S[l+3].setUVs(v,y),S[l+4].setUVs(g,y),S[l+5].setUVs(g,d)},clearTint:function(){return this.setTint(16777215),this},setTint:function(l){return l===void 0&&(l=16777215),this.tint=l,this.tintFill=!1,this},setTintFill:function(l){return this.setTint(l),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(l){this._width=Math.max(l,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(l){this.is3Slice||(this._height=Math.max(l,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,v){this.width=l,this.height=v,this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setDisplaySize:function(l,v){return this.displayWidth=l,this.displayHeight=v,this},originX:{get:function(){return this._originX},set:function(l){this._originX=l,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(l){this._originY=l,this.updateVertices()}},setOrigin:function(l,v){return l===void 0&&(l=.5),v===void 0&&(v=l),this._originX=l,this._originY=v,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var l=this.frame.height;this._height=l,this.topHeight=l,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});o.exports=s},28279:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(35154),h=e(28103);x.register("nineslice",function(s,l){s===void 0&&(s={});var v=c(s,"key",null),d=c(s,"frame",null),g=u(s,"width",256),y=u(s,"height",256),S=u(s,"leftWidth",10),T=u(s,"rightWidth",10),w=u(s,"topHeight",0),P=u(s,"bottomHeight",0),A=new h(this.scene,0,0,v,d,g,y,S,T,w,P);return l!==void 0&&(s.add=l),a(this.scene,A,s),A})},47521:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28103),x=e(39429);x.register("nineslice",function(c,u,h,s,l,v,d,g,y,S){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d,g,y,S))})},78023:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(52230),o.exports={renderWebGL:x,renderCanvas:c}},52230:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){var v=h.vertices,d=v.length;if(d!==0){s.addToRenderList(h);var g=u.pipelines.set(h.pipeline,h),y=a(h,s,l,!1).calc;u.pipelines.preBatch(h);var S=g.setGameObject(h),T=g.vertexViewF32,w=g.vertexViewU32,P=g.vertexCount*g.currentShader.vertexComponentCount-1,A=s.roundPixels,R=h.tintFill,I=s.alpha*h.alpha,M=x.getTintAppendFloatAlpha(h.tint,I),L=g.vertexAvailable(),N=-1;L<d&&(N=L);for(var G=0;G<d;G++){var D=v[G];G===N&&(g.flush(),S=g.setGameObject(h),P=0),T[++P]=y.getXRound(D.vx,D.vy,A),T[++P]=y.getYRound(D.vx,D.vy,A),T[++P]=D.u,T[++P]=D.v,T[++P]=S,T[++P]=R,w[++P]=M,g.vertexCount++,g.currentBatch.count=g.vertexCount-g.currentBatch.start}u.pipelines.postBatch(h)}};o.exports=c},76472:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(44777),c=e(37589),u=e(6113),h=e(91389),s=e(90664),l=new a({Extends:x,initialize:function(d){x.call(this,d,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var v=this.propertyValue,d=v,g=this.defaultEmit,y=this.defaultUpdate;if(this.method===9){this.start=v[0],this.ease=u("Linear"),this.interpolation=h("linear"),g=this.easedValueEmit,y=this.easeValueUpdate,d=v[0],this.active=!0;for(var S=0;S<v.length;S++){var T=s(v[S]);this.r.push(T.r),this.g.push(T.g),this.b.push(T.b)}}return this.onEmit=g,this.onUpdate=y,this.current=d,this},setEase:function(v){this.easeName=v,this.ease=u(v)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(v,d,g){var y=this.ease(g),S=this.interpolation(this.r,y),T=this.interpolation(this.g,y),w=this.interpolation(this.b,y),P=c(S,T,w);return this.current=P,P}});o.exports=l},44777:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(45319),c=e(83419),u=e(99472),h=e(6113),s=e(95540),l=e(91389),v=e(77720),d=e(15994),g=new c({initialize:function(S,T,w){w===void 0&&(w=!1),this.propertyKey=S,this.propertyValue=T,this.defaultValue=T,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=w,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(y,S){y===void 0&&(y={}),S&&(this.propertyKey=S),this.propertyValue=s(y,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(y){var S;switch(this.method){case 1:case 3:case 8:S=y;break;case 2:this.propertyValue.indexOf(y)>=0&&(S=y);break;case 4:var T=(this.end-this.start)/this.steps;S=v(y,T),this.counter=S;break;case 5:case 6:case 7:S=x(y,this.start,this.end);break;case 9:S=this.start[0];break}return this.current=S,this},getMethod:function(){var y=this.propertyValue;if(y===null)return 0;var S=typeof y;if(S==="number")return 1;if(Array.isArray(y))return 2;if(S==="function")return 3;if(S==="object"){if(this.hasBoth(y,"start","end"))return this.has(y,"steps")?4:5;if(this.hasBoth(y,"min","max"))return 6;if(this.has(y,"random"))return 7;if(this.hasEither(y,"onEmit","onUpdate"))return 8;if(this.hasEither(y,"values","interpolation"))return 9}return 0},setMethods:function(){var y=this.propertyValue,S=y,T=this.defaultEmit,w=this.defaultUpdate;switch(this.method){case 1:T=this.staticValueEmit;break;case 2:T=this.randomStaticValueEmit,S=y[0];break;case 3:this._onEmit=y,T=this.proxyEmit;break;case 4:this.start=y.start,this.end=y.end,this.steps=y.steps,this.counter=this.start,this.yoyo=this.has(y,"yoyo")?y.yoyo:!1,this.direction=0,T=this.steppedEmit,S=this.start;break;case 5:this.start=y.start,this.end=y.end;var P=this.has(y,"ease")?y.ease:"Linear";this.ease=h(P,y.easeParams),T=this.has(y,"random")&&y.random?this.randomRangedValueEmit:this.easedValueEmit,w=this.easeValueUpdate,S=this.start;break;case 6:this.start=y.min,this.end=y.max,T=this.has(y,"int")&&y.int?this.randomRangedIntEmit:this.randomRangedValueEmit,S=this.start;break;case 7:var A=y.random;Array.isArray(A)&&(this.start=A[0],this.end=A[1]),T=this.randomRangedIntEmit,S=this.start;break;case 8:this._onEmit=this.has(y,"onEmit")?y.onEmit:this.defaultEmit,this._onUpdate=this.has(y,"onUpdate")?y.onUpdate:this.defaultUpdate,T=this.proxyEmit,w=this.proxyUpdate;break;case 9:this.start=y.values;var R=this.has(y,"ease")?y.ease:"Linear";this.ease=h(R,y.easeParams),this.interpolation=l(y.interpolation),T=this.easedValueEmit,w=this.easeValueUpdate,S=this.start[0];break}return this.onEmit=T,this.onUpdate=w,this.current=S,this},has:function(y,S){return y.hasOwnProperty(S)},hasBoth:function(y,S,T){return y.hasOwnProperty(S)&&y.hasOwnProperty(T)},hasEither:function(y,S,T){return y.hasOwnProperty(S)||y.hasOwnProperty(T)},defaultEmit:function(y,S,T){return T},defaultUpdate:function(y,S,T,w){return w},proxyEmit:function(y,S,T){var w=this._onEmit(y,S,T);return this.current=w,w},proxyUpdate:function(y,S,T,w){var P=this._onUpdate(y,S,T,w);return this.current=P,P},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var y=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[y],this.current},randomRangedValueEmit:function(y,S){var T=u(this.start,this.end);return y&&y.data[S]&&(y.data[S].min=T,y.data[S].max=this.end),this.current=T,T},randomRangedIntEmit:function(y,S){var T=a(this.start,this.end);return y&&y.data[S]&&(y.data[S].min=T,y.data[S].max=this.end),this.current=T,T},steppedEmit:function(){var y=this.counter,S=y,T=(this.end-this.start)/this.steps;if(this.yoyo){var w;this.direction===0?(S+=T,S>=this.end&&(w=S-this.end,S=this.end-w,this.direction=1)):(S-=T,S<=this.start&&(w=this.start-S,S=this.start+w,this.direction=0)),this.counter=S}else this.counter=d(S+T,this.start,this.end);return this.current=y,y},easedValueEmit:function(y,S){if(y&&y.data[S]){var T=y.data[S];T.min=this.start,T.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(y,S,T){var w=y.data[S],P,A=this.ease(T);return this.interpolation?P=this.interpolation(this.start,A):P=(w.max-w.min)*A+w.min,this.current=P,P},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});o.exports=g},24502:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(20286),u=new a({Extends:c,initialize:function(s,l,v,d,g){if(typeof s=="object"){var y=s;s=x(y,"x",0),l=x(y,"y",0),v=x(y,"power",0),d=x(y,"epsilon",100),g=x(y,"gravity",50)}else s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=100),g===void 0&&(g=50);c.call(this,s,l,!0),this._gravity=g,this._power=v*g,this._epsilon=d*d},update:function(h,s){var l=this.x-h.x,v=this.y-h.y,d=l*l+v*v;if(d!==0){var g=Math.sqrt(d);d<this._epsilon&&(d=this._epsilon);var y=this._power*s/(d*g)*100;h.velocityX+=l*y,h.velocityY+=v*y}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var s=this.power;this._gravity=h,this.power=s}}});o.exports=u},56480:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(45319),c=e(83419),u=e(39506),h=e(87841),s=e(11520),l=e(26099),v=new c({initialize:function(g){this.emitter=g,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new l,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=g.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new a(this)),this.bounds=new h},emit:function(d,g,y,S,T,w){return this.emitter.emit(d,g,y,S,T,w)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(d,g){d===void 0&&(d=0),g===void 0&&(g=0),this.x=d,this.y=g},fire:function(d,g){var y=this.emitter,S=y.ops,T=y.getAnim();if(T?this.anims.play(T):(this.frame=y.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(y.getEmitZone(this),d===void 0?this.x+=S.x.onEmit(this,"x"):S.x.steps>0?this.x+=d+S.x.onEmit(this,"x"):this.x+=d,g===void 0?this.y+=S.y.onEmit(this,"y"):S.y.steps>0?this.y+=g+S.y.onEmit(this,"y"):this.y+=g,this.life=S.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=S.delay.onEmit(this,"delay"),this.holdCurrent=S.hold.onEmit(this,"hold"),this.scaleX=S.scaleX.onEmit(this,"scaleX"),this.scaleY=S.scaleY.active?S.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=S.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),y.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&y.getDeathZone(this))return this.lifeCurrent=0,!1;var w=S.speedX.onEmit(this,"speedX"),P=S.speedY.active?S.speedY.onEmit(this,"speedY"):w;if(y.radial){var A=u(S.angle.onEmit(this,"angle"));this.velocityX=Math.cos(A)*Math.abs(w),this.velocityY=Math.sin(A)*Math.abs(P)}else if(y.moveTo){var R=S.moveToX.onEmit(this,"moveToX"),I=S.moveToY.onEmit(this,"moveToY"),M=this.life/1e3;this.velocityX=(R-this.x)/M,this.velocityY=(I-this.y)/M}else this.velocityX=w,this.velocityY=P;return y.acceleration&&(this.accelerationX=S.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=S.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=S.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=S.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=S.bounce.onEmit(this,"bounce"),this.alpha=S.alpha.onEmit(this,"alpha"),S.color.active?this.tint=S.color.onEmit(this,"tint"):this.tint=S.tint.onEmit(this,"tint"),!0},update:function(d,g,y){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=d,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=d,!1;this.anims&&this.anims.update(0,d);var S=this.emitter,T=S.ops,w=1-this.lifeCurrent/this.life;if(this.lifeT=w,this.x=T.x.onUpdate(this,"x",w,this.x),this.y=T.y.onUpdate(this,"y",w,this.y),S.moveTo){var P=T.moveToX.onUpdate(this,"moveToX",w,S.moveToX),A=T.moveToY.onUpdate(this,"moveToY",w,S.moveToY),R=this.lifeCurrent/1e3;this.velocityX=(P-this.x)/R,this.velocityY=(A-this.y)/R}return this.computeVelocity(S,d,g,y,w),this.scaleX=T.scaleX.onUpdate(this,"scaleX",w,this.scaleX),T.scaleY.active?this.scaleY=T.scaleY.onUpdate(this,"scaleY",w,this.scaleY):this.scaleY=this.scaleX,this.angle=T.rotate.onUpdate(this,"rotate",w,this.angle),this.rotation=u(this.angle),S.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x(T.alpha.onUpdate(this,"alpha",w,this.alpha),0,1),T.color.active?this.tint=T.color.onUpdate(this,"color",w,this.tint):this.tint=T.tint.onUpdate(this,"tint",w,this.tint),this.lifeCurrent-=d,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(d,g,y,S,T){var w=d.ops,P=this.velocityX,A=this.velocityY,R=w.accelerationX.onUpdate(this,"accelerationX",T,this.accelerationX),I=w.accelerationY.onUpdate(this,"accelerationY",T,this.accelerationY),M=w.maxVelocityX.onUpdate(this,"maxVelocityX",T,this.maxVelocityX),L=w.maxVelocityY.onUpdate(this,"maxVelocityY",T,this.maxVelocityY);this.bounce=w.bounce.onUpdate(this,"bounce",T,this.bounce),P+=d.gravityX*y+R*y,A+=d.gravityY*y+I*y,P=x(P,-M,M),A=x(A,-L,L),this.velocityX=P,this.velocityY=A,this.x+=P*y,this.y+=A*y,d.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var N=0;N<S.length;N++){var G=S[N];G.active&&G.update(this,g,y,T)}},setSizeToFrame:function(){},getBounds:function(d){d===void 0&&(d=this.emitter.getWorldTransformMatrix());var g=Math.abs(d.scaleX)*this.scaleX,y=Math.abs(d.scaleY)*this.scaleY,S=this.x,T=this.y,w=this.rotation,P=this.frame.width*g/2,A=this.frame.height*y/2,R=this.bounds,I=new l(S-P,T-A),M=new l(S+P,T-A),L=new l(S-P,T+A),N=new l(S+P,T+A);return w!==0&&(s(I,S,T,w),s(M,S,T,w),s(L,S,T,w),s(N,S,T,w)),d.transformPoint(I.x,I.y,I),d.transformPoint(M.x,M.y,M),d.transformPoint(L.x,L.y,L),d.transformPoint(N.x,N.y,N),R.x=Math.min(I.x,M.x,L.x,N.x),R.y=Math.min(I.y,M.y,L.y,N.y),R.width=Math.max(I.x,M.x,L.x,N.x)-R.x,R.height=Math.max(I.y,M.y,L.y,N.y)-R.y,R},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});o.exports=v},69601:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(20286),c=e(87841),u=new a({Extends:x,initialize:function(s,l,v,d,g,y,S,T){g===void 0&&(g=!0),y===void 0&&(y=!0),S===void 0&&(S=!0),T===void 0&&(T=!0),x.call(this,s,l,!0),this.bounds=new c(s,l,v,d),this.collideLeft=g,this.collideRight=y,this.collideTop=S,this.collideBottom=T},update:function(h){var s=this.bounds,l=-h.bounce,v=h.worldPosition;v.x<s.x&&this.collideLeft?(h.x+=s.x-v.x,h.velocityX*=l):v.x>s.right&&this.collideRight&&(h.x-=v.x-s.right,h.velocityX*=l),v.y<s.y&&this.collideTop?(h.y+=s.y-v.y,h.velocityY*=l):v.y>s.bottom&&this.collideBottom&&(h.y-=v.y-s.bottom,h.velocityY*=l)}});o.exports=u},31600:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(53774),u=e(43459),h=e(26388),s=e(19909),l=e(76472),v=e(44777),d=e(20696),g=e(95643),y=e(95540),S=e(26546),T=e(24502),w=e(1985),P=e(97022),A=e(86091),R=e(73162),I=e(20074),M=e(269),L=e(56480),N=e(69601),G=e(68875),D=e(87841),B=e(59996),$=e(72905),k=e(90668),X=e(19186),Y=e(61340),Z=e(26099),Q=e(15994),j=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],K=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],W=new a({Extends:g,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,k],initialize:function(J,ee,te,ne,se){g.call(this,J,"ParticleEmitter"),this.particleClass=L,this.config=null,this.ops={accelerationX:new v("accelerationX",0),accelerationY:new v("accelerationY",0),alpha:new v("alpha",1),angle:new v("angle",{min:0,max:360},!0),bounce:new v("bounce",0),color:new l("color"),delay:new v("delay",0,!0),hold:new v("hold",0,!0),lifespan:new v("lifespan",1e3,!0),maxVelocityX:new v("maxVelocityX",1e4),maxVelocityY:new v("maxVelocityY",1e4),moveToX:new v("moveToX",0),moveToY:new v("moveToY",0),quantity:new v("quantity",1,!0),rotate:new v("rotate",0),scaleX:new v("scaleX",1),scaleY:new v("scaleY",1),speedX:new v("speedX",0,!0),speedY:new v("speedY",0,!0),tint:new v("tint",16777215),x:new v("x",0),y:new v("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new Z,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new Y,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new R(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(ee,te),this.setTexture(ne),se&&this.setConfig(se)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(V){if(!V)return this;this.config=V;var J=0,ee="",te=this.ops;for(J=0;J<K.length;J++)ee=K[J],te[ee].loadConfig(V);for(J=0;J<j.length;J++)ee=j[J],P(V,ee)&&(this[ee]=y(V,ee));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,P(V,"speed")&&(te.speedX.loadConfig(V,"speed"),te.speedY.active=!1),(w(V,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),P(V,"scale")&&(te.scaleX.loadConfig(V,"scale"),te.scaleY.active=!1),P(V,"callbackScope")){var ne=y(V,"callbackScope",null);this.emitCallbackScope=ne,this.deathCallbackScope=ne}if(P(V,"emitZone")&&this.addEmitZone(V.emitZone),P(V,"deathZone")&&this.addDeathZone(V.deathZone),P(V,"bounds")){var se=this.addParticleBounds(V.bounds);se.collideLeft=y(V,"collideLeft",!0),se.collideRight=y(V,"collideRight",!0),se.collideTop=y(V,"collideTop",!0),se.collideBottom=y(V,"collideBottom",!0)}return P(V,"followOffset")&&this.followOffset.setFromObject(y(V,"followOffset",0)),P(V,"texture")&&this.setTexture(V.texture),P(V,"frame")?this.setEmitterFrame(V.frame):P(V,"anim")&&this.setAnim(V.anim),P(V,"reserve")&&this.reserve(V.reserve),P(V,"advance")&&this.fastForward(V.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(d.START,this),this},updateConfig:function(V){return V&&(this.config?this.setConfig(M(this.config,V)):this.setConfig(V)),this},toJSON:function(){var V=c(this),J=0,ee="";for(J=0;J<j.length;J++)ee=j[J],V[ee]=this[ee];var te=this.ops;for(J=0;J<K.length;J++)ee=K[J],te[ee]&&(V[ee]=te[ee].toJSON());return te.speedY.active||(delete V.speedX,V.speed=te.speedX.toJSON()),this.scaleX===this.scaleY&&(delete V.scaleX,delete V.scaleY,V.scale=te.scaleX.toJSON()),V},resetCounters:function(V,J){var ee=this.counters;ee.fill(0),ee[0]=V,J&&(ee[5]=1)},startFollow:function(V,J,ee,te){return J===void 0&&(J=0),ee===void 0&&(ee=0),te===void 0&&(te=!1),this.follow=V,this.followOffset.set(J,ee),this.trackVisible=te,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var V=this.frames,J=V.length,ee;return J===1?ee=V[0]:this.randomFrame?ee=S(V):(ee=V[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===J&&(this.currentFrame=0))),this.texture.get(ee)},setEmitterFrame:function(V,J,ee){J===void 0&&(J=!0),ee===void 0&&(ee=1),this.randomFrame=J,this.frameQuantity=ee,this.currentFrame=0;var te=typeof V;if(this.frames.length=0,Array.isArray(V))this.frames=this.frames.concat(V);else if(te==="string"||te==="number")this.frames.push(V);else if(te==="object"){var ne=V;V=y(ne,"frames",null),V&&(this.frames=this.frames.concat(V));var se=y(ne,"cycle",!1);this.randomFrame=!se,this.frameQuantity=y(ne,"quantity",ee)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var V=this.anims,J=V.length;if(J===0)return null;if(J===1)return V[0];if(this.randomAnim)return S(V);var ee=V[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=Q(this.currentAnim+1,0,J)),ee},setAnim:function(V,J,ee){J===void 0&&(J=!0),ee===void 0&&(ee=1),this.randomAnim=J,this.animQuantity=ee,this.currentAnim=0;var te=typeof V;if(this.anims.length=0,Array.isArray(V))this.anims=this.anims.concat(V);else if(te==="string")this.anims.push(V);else if(te==="object"){var ne=V;V=y(ne,"anims",null),V&&(this.anims=this.anims.concat(V));var se=y(ne,"cycle",!1);this.randomAnim=!se,this.animQuantity=y(ne,"quantity",ee)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(V){return V===void 0&&(V=!0),this.radial=V,this},addParticleBounds:function(V,J,ee,te,ne,se,ae,ue){if(typeof V=="object"){var de=V;V=de.x,J=de.y,ee=P(de,"w")?de.w:de.width,te=P(de,"h")?de.h:de.height}return this.addParticleProcessor(new N(V,J,ee,te,ne,se,ae,ue))},setParticleSpeed:function(V,J){return J===void 0&&(J=V),this.ops.speedX.onChange(V),V===J?this.ops.speedY.active=!1:this.ops.speedY.onChange(J),this.radial=!0,this},setParticleScale:function(V,J){return V===void 0&&(V=1),J===void 0&&(J=V),this.ops.scaleX.onChange(V),this.ops.scaleY.onChange(J),this},setParticleGravity:function(V,J){return this.gravityX=V,this.gravityY=J,this},setParticleAlpha:function(V){return this.ops.alpha.onChange(V),this},setParticleTint:function(V){return this.ops.tint.onChange(V),this},setEmitterAngle:function(V){return this.ops.angle.onChange(V),this},setParticleLifespan:function(V){return this.ops.lifespan.onChange(V),this},setQuantity:function(V){return this.quantity=V,this},setFrequency:function(V,J){return this.frequency=V,this.flowCounter=V>0?V:0,J&&(this.quantity=J),this},addDeathZone:function(V){Array.isArray(V)||(V=[V]);for(var J,ee=[],te=0;te<V.length;te++)if(J=V[te],J instanceof h)ee.push(J);else if(typeof J.contains=="function")J=new h(J,!0),ee.push(J);else{var ne=y(J,"type","onEnter"),se=y(J,"source",null);if(se&&typeof se.contains=="function"){var ae=ne==="onEnter";J=new h(se,ae),ee.push(J)}}return this.deathZones=this.deathZones.concat(ee),ee},removeDeathZone:function(V){return $(this.deathZones,V),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(V){Array.isArray(V)||(V=[V]);for(var J,ee=[],te=0;te<V.length;te++)if(J=V[te],J instanceof G||J instanceof s)ee.push(J);else{var ne=y(J,"source",null);if(ne){var se=y(J,"type","random");if(se==="random"&&typeof ne.getRandomPoint=="function")J=new G(ne),ee.push(J);else if(se==="edge"&&typeof ne.getPoints=="function"){var ae=y(J,"quantity",1),ue=y(J,"stepRate",0),de=y(J,"yoyo",!1),fe=y(J,"seamless",!0),ye=y(J,"total",-1);J=new s(ne,ae,ue,de,fe,ye),ee.push(J)}}}return this.emitZones=this.emitZones.concat(ee),ee},removeEmitZone:function(V){return $(this.emitZones,V),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(V){var J=this.emitZones,ee=J.length;if(ee!==0){var te=J[this.zoneIndex];te.getPoint(V),te.total>-1&&(this.zoneTotal++,this.zoneTotal===te.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===ee&&(this.zoneIndex=0)))}},getDeathZone:function(V){for(var J=this.deathZones,ee=0;ee<J.length;ee++){var te=J[ee];if(te.willKill(V))return this.emit(d.DEATH_ZONE,this,V,te),!0}return!1},setEmitZone:function(V){var J;return isFinite(V)?J=V:J=this.emitZones.indexOf(V),J>=0&&(this.zoneIndex=J),this},addParticleProcessor:function(V){return this.processors.exists(V)||(V.emitter&&V.emitter.removeParticleProcessor(V),this.processors.add(V),V.emitter=this),V},removeParticleProcessor:function(V){return this.processors.exists(V)&&(this.processors.remove(V,!0),V.emitter=null),V},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(V){return this.addParticleProcessor(new T(V))},reserve:function(V){var J=this.dead;if(this.maxParticles>0){var ee=this.getParticleCount();ee+V>this.maxParticles&&(V=this.maxParticles-(ee+V))}for(var te=0;te<V;te++)J.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(V,J){return V===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof V=="function"&&(this.emitCallback=V,J&&(this.emitCallbackScope=J)),this},onParticleDeath:function(V,J){return V===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof V=="function"&&(this.deathCallback=V,J&&(this.deathCallbackScope=J)),this},killAll:function(){for(var V=this.dead,J=this.alive;J.length>0;)V.push(J.pop());return this},forEachAlive:function(V,J){for(var ee=this.alive,te=ee.length,ne=0;ne<te;ne++)V.call(J,ee[ne],this);return this},forEachDead:function(V,J){for(var ee=this.dead,te=ee.length,ne=0;ne<te;ne++)V.call(J,ee[ne],this);return this},start:function(V,J){return V===void 0&&(V=0),this.emitting||(V>0&&this.fastForward(V),this.emitting=!0,this.resetCounters(this.frequency,!0),J!==void 0&&(this.duration=Math.abs(J)),this.emit(d.START,this)),this},stop:function(V){return V===void 0&&(V=!1),this.emitting&&(this.emitting=!1,V&&this.killAll(),this.emit(d.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(V,J){return V===void 0&&(V=""),J===void 0&&(J=this.true),this.sortProperty=V,this.sortOrderAsc=J,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(V){return this.sortProperty!==""?V=this.depthSortCallback:V=null,this.sortCallback=V,this},depthSort:function(){return X(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(V,J){var ee=this.sortProperty;return this.sortOrderAsc?V[ee]-J[ee]:J[ee]-V[ee]},flow:function(V,J,ee){return J===void 0&&(J=1),this.emitting=!1,this.frequency=V,this.quantity=J,ee!==void 0&&(this.stopAfter=ee),this.start()},explode:function(V,J,ee){this.frequency=-1,this.resetCounters(-1,!0);var te=this.emitParticle(V,J,ee);return this.emit(d.EXPLODE,this,te),te},emitParticleAt:function(V,J,ee){return this.emitParticle(ee,V,J)},emitParticle:function(V,J,ee){if(!this.atLimit()){V===void 0&&(V=this.ops.quantity.onEmit());for(var te=this.dead,ne=this.stopAfter,se=this.follow?this.follow.x+this.followOffset.x:J,ae=this.follow?this.follow.y+this.followOffset.y:ee,ue=0;ue<V;ue++){var de=te.pop();if(de||(de=new this.particleClass(this)),de.fire(se,ae)?(this.particleBringToTop?this.alive.push(de):this.alive.unshift(de),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,de,this)):this.dead.push(de),ne>0&&(this.stopCounter++,this.stopCounter>=ne)||this.atLimit())break}return de}},fastForward:function(V,J){J===void 0&&(J=1e3/60);var ee=0;for(this.skipping=!0;ee<Math.abs(V);)this.preUpdate(0,J),ee+=J;return this.skipping=!1,this},preUpdate:function(V,J){J*=this.timeScale;var ee=J/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var te=this.getProcessors(),ne=this.alive,se=this.dead,ae=0,ue=[],de=ne.length;for(ae=0;ae<de;ae++){var fe=ne[ae];fe.update(J,ee,te)&&ue.push({index:ae,particle:fe})}if(de=ue.length,de>0){var ye=this.deathCallback,ve=this.deathCallbackScope;for(ae=de-1;ae>=0;ae--){var Se=ue[ae];ne.splice(Se.index,1),se.push(Se.particle),ye&&ye.call(ve,Se.particle),Se.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&ne.length===0&&(this.completeFlag=0,this.emit(d.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=J;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=J,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(V){for(var J=this.getWorldTransformMatrix(),ee=this.alive,te=ee.length,ne=[],se=0;se<te;se++){var ae=ee[se];B(V,ae.getBounds(J))&&ne.push(ae)}return ne},getBounds:function(V,J,ee,te){V===void 0&&(V=0),J===void 0&&(J=0),ee===void 0&&(ee=1e3/60),te===void 0&&(te=new D);var ne=this.getWorldTransformMatrix(),se,ae,ue=this.alive,de=!1;if(te.setTo(0,0,0,0),J>0){var fe=0;for(this.skipping=!0;fe<Math.abs(J);){for(this.preUpdate(0,ee),se=0;se<ue.length;se++)ae=ue[se].getBounds(ne),de?I(te,ae):(de=!0,u(ae,te));fe+=ee}this.skipping=!1}else for(se=0;se<ue.length;se++)ae=ue[se].getBounds(ne),de?I(te,ae):(de=!0,u(ae,te));return V>0&&A(te,V,V),te},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(V){this.ops.x.onChange(V)}},particleY:{get:function(){return this.ops.y.current},set:function(V){this.ops.y.onChange(V)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(V){this.ops.accelerationX.onChange(V)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(V){this.ops.accelerationY.onChange(V)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(V){this.ops.maxVelocityX.onChange(V)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(V){this.ops.maxVelocityY.onChange(V)}},speed:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V),this.ops.speedY.onChange(V)}},speedX:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V)}},speedY:{get:function(){return this.ops.speedY.current},set:function(V){this.ops.speedY.onChange(V)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(V){this.ops.moveToX.onChange(V)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(V){this.ops.moveToY.onChange(V)}},bounce:{get:function(){return this.ops.bounce.current},set:function(V){this.ops.bounce.onChange(V)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(V){this.ops.scaleX.onChange(V)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(V){this.ops.scaleY.onChange(V)}},particleColor:{get:function(){return this.ops.color.current},set:function(V){this.ops.color.onChange(V)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(V){this.ops.color.setEase(V)}},particleTint:{get:function(){return this.ops.tint.current},set:function(V){this.ops.tint.onChange(V)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(V){this.ops.alpha.onChange(V)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(V){this.ops.lifespan.onChange(V)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(V){this.ops.angle.onChange(V)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(V){this.ops.rotate.onChange(V)}},quantity:{get:function(){return this.ops.quantity.current},set:function(V){this.ops.quantity.onChange(V)}},delay:{get:function(){return this.ops.delay.current},set:function(V){this.ops.delay.onChange(V)}},hold:{get:function(){return this.ops.hold.current},set:function(V){this.ops.hold.onChange(V)}},flowCounter:{get:function(){return this.counters[0]},set:function(V){this.counters[0]=V}},frameCounter:{get:function(){return this.counters[1]},set:function(V){this.counters[1]=V}},animCounter:{get:function(){return this.counters[2]},set:function(V){this.counters[2]=V}},elapsed:{get:function(){return this.counters[3]},set:function(V){this.counters[3]=V}},stopCounter:{get:function(){return this.counters[4]},set:function(V){this.counters[4]=V}},completeFlag:{get:function(){return this.counters[5]},set:function(V){this.counters[5]=V}},zoneIndex:{get:function(){return this.counters[6]},set:function(V){this.counters[6]=V}},zoneTotal:{get:function(){return this.counters[7]},set:function(V){this.counters[7]=V}},currentFrame:{get:function(){return this.counters[8]},set:function(V){this.counters[8]=V}},currentAnim:{get:function(){return this.counters[9]},set:function(V){this.counters[9]=V}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var V,J=this.ops;for(V=0;V<K.length;V++){var ee=K[V];J[ee].destroy()}for(V=0;V<this.alive.length;V++)this.alive[V].destroy();for(V=0;V<this.dead.length;V++)this.dead[V].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});o.exports=W},9871:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),x=e(61340),c=new x,u=new x,h=new x,s=new x,l=function(v,d,g,y){var S=c,T=u,w=h,P=s;y?(P.loadIdentity(),P.multiply(y),P.translate(d.x,d.y),P.rotate(d.rotation),P.scale(d.scaleX,d.scaleY)):P.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var A=v.currentContext,R=g.roundPixels,I=g.alpha,M=d.alpha,L=d.alive,N=L.length,G=d.viewBounds;if(!(!d.visible||N===0||G&&!a(G,g.worldView))){d.sortCallback&&d.depthSort(),g.addToRenderList(d);var D=d.scrollFactorX,B=d.scrollFactorY;A.save(),A.globalCompositeOperation=v.blendModes[d.blendMode];for(var $=0;$<N;$++){var k=L[$],X=k.alpha*M*I;if(!(X<=0||k.scaleX===0||k.scaleY===0)){w.applyITRS(k.x,k.y,k.rotation,k.scaleX,k.scaleY),S.copyFrom(g.matrix),S.multiplyWithOffset(P,-g.scrollX*D,-g.scrollY*B),w.e=k.x,w.f=k.y,S.multiply(w,T);var Y=k.frame,Z=Y.canvasData;if(Z.width>0&&Z.height>0){var Q=-Y.halfWidth,j=-Y.halfHeight;A.globalAlpha=X,A.save(),T.setToContext(A),R&&(Q=Math.round(Q),j=Math.round(j)),A.imageSmoothingEnabled=!Y.source.scaleMode,A.drawImage(Y.source.image,Z.x,Z.y,Z.width,Z.height,Q,j,Z.width,Z.height),A.restore()}}}A.restore()}};o.exports=l},92730:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(95540),h=e(31600);x.register("particles",function(s,l){s===void 0&&(s={});var v=c(s,"key",null),d=u(s,"config",null),g=new h(this.scene,0,0,v);return l!==void 0&&(s.add=l),a(this.scene,g,s),d&&g.setConfig(d),g})},676:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(31600);a.register("particles",function(c,u,h,s){return c!==void 0&&typeof c=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,c,u,h,s))})},90668:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(21188),c=e(9871),o.exports={renderWebGL:x,renderCanvas:c}},21188:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),x=e(61340),c=e(70554),u=new x,h=new x,s=new x,l=new x,v=function(d,g,y,S){var T=d.pipelines.set(g.pipeline),w=u,P=h,A=s,R=l;S?(R.loadIdentity(),R.multiply(S),R.translate(g.x,g.y),R.rotate(g.rotation),R.scale(g.scaleX,g.scaleY)):R.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);var I=c.getTintAppendFloatAlpha,M=y.alpha,L=g.alpha;d.pipelines.preBatch(g);var N=g.alive,G=N.length,D=g.viewBounds;if(!(G===0||D&&!a(D,y.worldView))){g.sortCallback&&g.depthSort(),y.addToRenderList(g),w.copyFrom(y.matrix),w.multiplyWithOffset(R,-y.scrollX*g.scrollFactorX,-y.scrollY*g.scrollFactorY),d.setBlendMode(g.blendMode),g.mask&&(g.mask.preRenderWebGL(d,g,y),d.pipelines.set(g.pipeline));for(var B=g.tintFill,$,k,X=0;X<G;X++){var Y=N[X],Z=Y.alpha*L*M;if(!(Z<=0||Y.scaleX===0||Y.scaleY===0)){A.applyITRS(Y.x,Y.y,Y.rotation,Y.scaleX,Y.scaleY),A.e=Y.x,A.f=Y.y,w.multiply(A,P);var Q=Y.frame;Q.glTexture!==k&&(k=Q.glTexture,$=T.setGameObject(g,Q));var j=-Q.halfWidth,K=-Q.halfHeight,W=P.setQuad(j,K,j+Q.width,K+Q.height),V=I(Y.tint,Z);T.shouldFlush(6)&&(T.flush(),$=T.setGameObject(g,Q)),T.batchQuad(g,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],Q.u0,Q.v0,Q.u1,Q.v1,V,V,V,V,B,k,$)}}g.mask&&g.mask.postRenderWebGL(d,y),d.pipelines.postBatch(g)}};o.exports=v},20286:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s){u===void 0&&(u=0),h===void 0&&(h=0),s===void 0&&(s=!0),this.emitter,this.x=u,this.y=h,this.active=s},update:function(){},destroy:function(){this.emitter=null}});o.exports=x},9774:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},812:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="deathzone"},30522:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="explode"},96695:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},18677:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},20696:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}},18404:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}},26388:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h){this.source=u,this.killOnEnter=h},willKill:function(c){var u=this.source.contains(c.x,c.y);return u&&this.killOnEnter||!u&&!this.killOnEnter}});o.exports=x},19909:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l,v,d){l===void 0&&(l=!1),v===void 0&&(v=!0),d===void 0&&(d=-1),this.source=u,this.points=[],this.quantity=h,this.stepRate=s,this.yoyo=l,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.total=d,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var c=this.points[0],u=this.points[this.points.length-1];c.x===u.x&&c.y===u.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(c){return this.source=c,this.updateSource()},getPoint:function(c){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var u=this.points[this.counter];u&&(c.x=u.x,c.y=u.y)}});o.exports=x},68875:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),c=new a({initialize:function(h){this.source=h,this._tempVec=new x,this.total=-1},getPoint:function(u){var h=this._tempVec;this.source.getRandomPoint(h),u.x=h.x,u.y=h.y}});o.exports=c},21024:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}},1159:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(68287),u=new a({Extends:c,Mixins:[x.PathFollower],initialize:function(s,l,v,d,g,y){c.call(this,s,v,d,g,y),this.path=l},preUpdate:function(h,s){this.anims.update(h,s),this.pathUpdate(h)}});o.exports=u},90145:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(1159);a.register("follower",function(c,u,h,s,l){var v=new x(this.scene,c,u,h,s,l);return this.displayList.add(v),this.updateList.add(v),v})},33663:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),c=e(48803),u=e(90664),h=e(4703),s=e(45650),l=new x({Extends:h,initialize:function(d,g,y,S,T,w,P,A){S||(S="__DEFAULT"),h.call(this,d,g,y,S,T),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(w,P,A),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(v,d,g){v===void 0&&(v=8),d===void 0&&(d=8),g===void 0&&(g=!1);var y=!1;return g&&(y=!0),this.gridWidth=v,this.gridHeight=d,this.isTiled=g,this.clear(),c({mesh:this,widthSegments:v,heightSegments:d,isOrtho:!1,tile:g,flipY:y}),this},setSizeToFrame:function(v){v===void 0&&(v=!0);var d=this.frame;if(this.setPerspective(this.width/d.width,this.height/d.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!v)return this;var g=this.gridWidth,y=this.gridHeight,S=this.vertices,T=d.u0,w=d.u1,P=d.v0,A=d.v1,R,I,M=0;if(this.isTiled)for(P=d.v1,A=d.v0,I=0;I<y;I++)for(R=0;R<g;R++)S[M++].setUVs(T,A),S[M++].setUVs(T,P),S[M++].setUVs(w,A),S[M++].setUVs(T,P),S[M++].setUVs(w,P),S[M++].setUVs(w,A);else{var L=g+1,N=y+1,G=w-T,D=A-P,B=[];for(I=0;I<N;I++)for(R=0;R<L;R++){var $=T+G*(R/g),k=P+D*(I/y);B.push($,k)}for(I=0;I<y;I++)for(R=0;R<g;R++){var X=(R+L*I)*2,Y=(R+L*(I+1))*2,Z=(R+1+L*(I+1))*2,Q=(R+1+L*I)*2;S[M++].setUVs(B[X],B[X+1]),S[M++].setUVs(B[Y],B[Y+1]),S[M++].setUVs(B[Q],B[Q+1]),S[M++].setUVs(B[Y],B[Y+1]),S[M++].setUVs(B[Z],B[Z+1]),S[M++].setUVs(B[Q],B[Q+1])}}return this},setViewHeight:function(v){v===void 0&&(v=this.frame.height);var d=this.fov*(Math.PI/180);this.viewPosition.z=this.height/v/Math.tan(d/2),this.dirtyCache[10]=1},createCheckerboard:function(v,d,g,y,S){v===void 0&&(v=16777215),d===void 0&&(d=255),g===void 0&&(g=255),y===void 0&&(y=255),S===void 0&&(S=128);for(var T=u(v),w=u(d),P=[],A=0;A<16;A++)for(var R=0;R<16;R++)A<8&&R<8||A>7&&R>7?P.push(T.r,T.g,T.b,g):P.push(w.r,w.g,w.b,y);var I=this.scene.sys.textures.addUint8Array(s(),new Uint8Array(P),16,16);return this.removeCheckerboard(),this.setTexture(I),this.setSizeToFrame(),this.setViewHeight(S),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(v,d){return this.anims.play(v,d)},playReverse:function(v,d){return this.anims.playReverse(v,d)},playAfterDelay:function(v,d){return this.anims.playAfterDelay(v,d)},playAfterRepeat:function(v,d){return this.anims.playAfterRepeat(v,d)},stop:function(){return this.anims.stop()},stopAfterDelay:function(v){return this.anims.stopAfterDelay(v)},stopAfterRepeat:function(v){return this.anims.stopAfterRepeat(v)},stopOnFrame:function(v){return this.anims.stopOnFrame(v)},preUpdate:function(v,d){h.prototype.preUpdate.call(this,v,d),this.anims.update(v,d)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});o.exports=l},56015:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(13059),c=e(44603),u=e(23568),h=e(35154),s=e(33663);c.register("plane",function(l,v){l===void 0&&(l={});var d=u(l,"key",null),g=u(l,"frame",null),y=h(l,"width",8),S=h(l,"height",8),T=h(l,"tile",!1),w=new s(this.scene,0,0,d,g,y,S,T);v!==void 0&&(l.add=v);var P=h(l,"checkerboard",null);if(P){var A=h(P,"color1",16777215),R=h(P,"color2",255),I=h(P,"alpha1",255),M=h(P,"alpha2",255),L=h(P,"height",128);w.createCheckerboard(A,R,I,M,L)}return a(this.scene,w,l),x(w,l),w})},30985:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33663),x=e(39429);x.register("plane",function(c,u,h,s,l,v,d){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d))})},80321:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(30100),h=e(36060),s=e(67277),l=new a({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,s],initialize:function(d,g,y,S,T,w,P){S===void 0&&(S=16777215),T===void 0&&(T=128),w===void 0&&(w=1),P===void 0&&(P=.1),c.call(this,d,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(g,y),this.color=u(S),this.intensity=w,this.attenuation=P,this.width=T*2,this.height=T*2,this._radius=T},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});o.exports=l},39829:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(80321);x.register("pointlight",function(h,s){h===void 0&&(h={});var l=c(h,"color",16777215),v=c(h,"radius",128),d=c(h,"intensity",1),g=c(h,"attenuation",.1),y=new u(this.scene,0,0,l,v,d,g);return s!==void 0&&(h.add=s),a(this.scene,y,h),y})},71255:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(80321);a.register("pointlight",function(c,u,h,s,l,v){return this.displayList.add(new x(this.scene,c,u,h,s,l,v))})},67277:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(57787),o.exports={renderWebGL:x,renderCanvas:c}},57787:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(c,u,h,s){h.addToRenderList(u);var l=c.pipelines.set(u.pipeline),v=a(u,h,s).calc,d=u.width,g=u.height,y=-u._radius,S=-u._radius,T=y+d,w=S+g,P=v.getX(0,0),A=v.getY(0,0),R=v.getX(y,S),I=v.getY(y,S),M=v.getX(y,w),L=v.getY(y,w),N=v.getX(T,w),G=v.getY(T,w),D=v.getX(T,S),B=v.getY(T,S);c.pipelines.preBatch(u),l.batchPointLight(u,h,R,I,M,L,N,G,D,B,P,A),c.pipelines.postBatch(u)};o.exports=x},591:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(81320),c=e(88571),u=new a({Extends:c,initialize:function(s,l,v,d,g){l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=32),g===void 0&&(g=32);var y=new x(s.sys.textures,"",d,g);c.call(this,s,l,v,y),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,s){this.width=h,this.height=s,this.texture.setSize(h,s),this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=h,l.hitArea.height=s),this},resize:function(h,s){return this.setSize(h,s),this},saveTexture:function(h){var s=this.texture;return s.key=h,s.manager.addDynamicTexture(s)&&(this._saved=!0),s},fill:function(h,s,l,v,d,g){return this.texture.fill(h,s,l,v,d,g),this},clear:function(){return this.texture.clear(),this},stamp:function(h,s,l,v,d){return this.texture.stamp(h,s,l,v,d),this},erase:function(h,s,l){return this.texture.erase(h,s,l),this},draw:function(h,s,l,v,d){return this.texture.draw(h,s,l,v,d),this},drawFrame:function(h,s,l,v,d,g){return this.texture.drawFrame(h,s,l,v,d,g),this},repeat:function(h,s,l,v,d,g,y,S,T){return this.texture.repeat(h,s,l,v,d,g,y,S,T),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,s,l,v,d){return this.texture.batchDraw(h,s,l,v,d),this},batchDrawFrame:function(h,s,l,v,d,g){return this.texture.batchDrawFrame(h,s,l,v,d,g),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,s,l,v,d,g,y){return this.texture.snapshotArea(h,s,l,v,d,g,y),this},snapshot:function(h,s,l){return this.snapshotArea(0,0,this.width,this.height,h,s,l)},snapshotPixel:function(h,s,l){return this.snapshotArea(h,s,1,1,l,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});o.exports=u},34495:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(591);x.register("renderTexture",function(h,s){h===void 0&&(h={});var l=c(h,"x",0),v=c(h,"y",0),d=c(h,"width",32),g=c(h,"height",32),y=new u(this.scene,l,v,d,g);return s!==void 0&&(h.add=s),a(this.scene,y,h),y})},60505:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(591);a.register("renderTexture",function(c,u,h,s){return this.displayList.add(new x(this.scene,c,u,h,s))})},77757:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),c=e(31401),u=e(95643),h=e(36060),s=e(38745),l=e(26099),v=new x({Extends:u,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Flip,c.Mask,c.Pipeline,c.PostPipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,s],initialize:function(g,y,S,T,w,P,A,R,I){T===void 0&&(T="__DEFAULT"),P===void 0&&(P=2),A===void 0&&(A=!0),u.call(this,g,"Rope"),this.anims=new a(this),this.points=P,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=T==="__DEFAULT",this.dirty=!1,this.horizontal=A,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(T,w),this.setPosition(y,S),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(P)&&this.resizeArrays(P.length),this.setPoints(P,R,I),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,g){var y=this.anims.currentFrame;this.anims.update(d,g),this.anims.currentFrame!==y&&(this.updateUVs(),this.updateVertices())},play:function(d,g,y){return this.anims.play(d,g,y),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,g,y){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,g,y))},setVertical:function(d,g,y){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,g,y)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,g){var y=this.points.length;if(y<1)return this;var S=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&g===void 0&&(d=[d]);var T,w=0;if(g!==void 0)for(T=0;T<y;T++)w=T*2,S[w]=d,S[w+1]=g;else if(d.length===y)for(T=0;T<y;T++)w=T*2,S[w]=d[T],S[w+1]=d[T];else{var P=d[0];for(T=0;T<y;T++)w=T*2,d.length>w&&(P=d[w]),S[w]=P,d.length>w+1&&(P=d[w+1]),S[w+1]=P}return this},setColors:function(d){var g=this.points.length;if(g<1)return this;var y=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var S,T=0;if(d.length===g)for(S=0;S<g;S++)T=S*2,y[T]=d[S],y[T+1]=d[S];else{var w=d[0];for(S=0;S<g;S++)T=S*2,d.length>T&&(w=d[T]),y[T]=w,d.length>T+1&&(w=d[T+1]),y[T+1]=w}return this},setPoints:function(d,g,y){if(d===void 0&&(d=2),typeof d=="number"){var S=d;S<2&&(S=2),d=[];var T,w,P;if(this.horizontal)for(P=-this.frame.halfWidth,w=this.frame.width/(S-1),T=0;T<S;T++)d.push({x:P+T*w,y:0});else for(P=-this.frame.halfHeight,w=this.frame.height/(S-1),T=0;T<S;T++)d.push({x:0,y:P+T*w})}var A=d.length,R=this.points.length;return A<1?(console.warn("Rope: Not enough points given"),this):(A===1&&(d.unshift({x:0,y:0}),A++),R!==A&&this.resizeArrays(A),this.dirty=!0,this.points=d,this.updateUVs(),g!=null&&this.setColors(g),y!=null&&this.setAlphas(y),this)},updateUVs:function(){for(var d=this.uv,g=this.points.length,y=this.frame.u0,S=this.frame.v0,T=this.frame.u1,w=this.frame.v1,P=(T-y)/(g-1),A=(w-S)/(g-1),R=0;R<g;R++){var I=R*4,M,L,N,G;this.horizontal?(this._flipX?(M=T-R*P,N=T-R*P):(M=y+R*P,N=y+R*P),this._flipY?(L=w,G=S):(L=S,G=w)):(this._flipX?(M=y,N=T):(M=T,N=y),this._flipY?(L=w-R*A,G=w-R*A):(L=S+R*A,G=S+R*A)),d[I+0]=M,d[I+1]=L,d[I+2]=N,d[I+3]=G}return this},resizeArrays:function(d){var g=this.colors,y=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),g=new Uint32Array(d*2),y=new Float32Array(d*2);for(var S=0;S<d*2;S++)g[S]=16777215,y[S]=1;return this.colors=g,this.alphas=y,this.dirty=!0,this},updateVertices:function(){var d=this._perp,g=this.points,y=this.vertices,S=g.length;if(this.dirty=!1,!(S<1)){for(var T,w=g[0],P=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,A=0;A<S;A++){var R=g[A],I=A*4;A<S-1?T=g[A+1]:T=R,d.x=T.y-w.y,d.y=-(T.x-w.x);var M=d.length();d.x/=M,d.y/=M,d.x*=P,d.y*=P,y[I]=R.x+d.x,y[I+1]=R.y+d.y,y[I+2]=R.x-d.x,y[I+3]=R.y-d.y,w=R}return this}},setDebug:function(d,g){return this.debugGraphic=d,!d&&!g?this.debugCallback=null:g?this.debugCallback=g:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,g,y){var S=d.debugGraphic,T=y[0],w=y[1],P=y[2],A=y[3];S.lineBetween(T,w,P,A);for(var R=4;R<g;R+=4){var I=y[R+0],M=y[R+1],L=y[R+2],N=y[R+3];S.lineBetween(T,w,I,M),S.lineBetween(P,A,L,N),S.lineBetween(P,A,I,M),S.lineBetween(I,M,L,N),T=I,w=M,P=L,A=N}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});o.exports=v},95262:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E},26209:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(35154),h=e(77757);x.register("rope",function(s,l){s===void 0&&(s={});var v=c(s,"key",null),d=c(s,"frame",null),g=c(s,"horizontal",!0),y=u(s,"points",void 0),S=u(s,"colors",void 0),T=u(s,"alphas",void 0),w=new h(this.scene,0,0,v,d,y,g,S,T);return l!==void 0&&(s.add=l),a(this.scene,w,s),w})},96819:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77757),x=e(39429);x.register("rope",function(c,u,h,s,l,v,d,g){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d,g))})},38745:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(20439),c=e(95262),o.exports={renderWebGL:x,renderCanvas:c}},20439:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){s.addToRenderList(h);var v=u.pipelines.set(h.pipeline,h),d=a(h,s,l).calc,g=h.vertices,y=h.uv,S=h.colors,T=h.alphas,w=h.alpha,P=x.getTintAppendFloatAlpha,A=s.roundPixels,R=g.length,I=Math.floor(R*.5);v.flush(),u.pipelines.preBatch(h);var M=v.setGameObject(h),L=v.vertexViewF32,N=v.vertexViewU32,G=v.vertexCount*v.currentShader.vertexComponentCount-1,D=0,B=h.tintFill;h.dirty&&h.updateVertices();for(var $=h.debugCallback,k=[],X=0;X<R;X+=2){var Y=g[X+0],Z=g[X+1],Q=Y*d.a+Z*d.c+d.e,j=Y*d.b+Z*d.d+d.f;A&&(Q=Math.round(Q),j=Math.round(j)),L[++G]=Q,L[++G]=j,L[++G]=y[X+0],L[++G]=y[X+1],L[++G]=M,L[++G]=B,N[++G]=P(S[D],s.alpha*(T[D]*w)),D++,$&&(k[X+0]=Q,k[X+1]=j)}$&&$.call(h,h,R,k),v.vertexCount+=I,v.currentBatch.count=v.vertexCount-v.currentBatch.start,u.pipelines.postBatch(h)};o.exports=c},20071:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(95540),h=e(79291),s=e(61622),l=e(25479),v=e(61340),d=e(95428),g=e(92503),y=new a({Extends:c,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,l],initialize:function(T,w,P,A,R,I,M,L){P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=128),I===void 0&&(I=128),c.call(this,T,"Shader"),this.blendMode=-1,this.shader;var N=T.sys.renderer;this.renderer=N,this.gl=N.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=N.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=N.width,this._rendererHeight=N.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(P,A),this.setSize(R,I),this.setOrigin(.5,.5),this.setShader(w,M,L),this.renderer.on(g.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(S){return this.renderToTexture?!0:!(c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&S.id)},setRenderToTexture:function(S,T){if(!this.renderToTexture){var w=this.width,P=this.height,A=this.renderer;this.glTexture=A.createTextureFromSource(null,w,P,0),this.framebuffer=A.createFramebuffer(w,P,this.glTexture,!1),this._rendererWidth=w,this._rendererHeight=P,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),S&&(this.texture=this.scene.sys.textures.addGLTexture(S,this.glTexture))}return this.shader&&(A.pipelines.clear(),this.load(),this.flush(),A.pipelines.rebind()),this},setShader:function(S,T,w){if(this.renderer.contextLost)return this._deferSetShader={key:S,textures:T,textureData:w},this;if(T===void 0&&(T=[]),typeof S=="string"){var P=this.scene.sys.cache.shader;if(!P.has(S))return console.warn("Shader missing: "+S),this;this.shader=P.get(S)}else this.shader=S;var A=this.gl,R=this.renderer;this.program&&R.deleteProgram(this.program);var I=R.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);A.uniformMatrix4fv(A.getUniformLocation(I.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),A.uniformMatrix4fv(A.getUniformLocation(I.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),A.uniform2f(A.getUniformLocation(I.webGLProgram,"uResolution"),this.width,this.height),this.program=I;var M=new Date,L={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[M.getFullYear(),M.getMonth(),M.getDate(),M.getHours()*60*60+M.getMinutes()*60+M.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,L):this.uniforms=L;for(var N=0;N<4;N++)T[N]&&this.setSampler2D("iChannel"+N,T[N],N,w);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(S){return this.pointer=S,this},projOrtho:function(S,T,w,P){if(this.renderer.contextLost){this._deferProjOrtho={left:S,right:T,bottom:w,top:P};return}var A=-1e3,R=1e3,I=1/(S-T),M=1/(w-P),L=1/(A-R),N=this.projectionMatrix;N[0]=-2*I,N[5]=-2*M,N[10]=2*L,N[12]=(S+T)*I,N[13]=(P+w)*M,N[14]=(R+A)*L;var G=this.program,D=this.gl,B=this.renderer;B.setProgram(G),D.uniformMatrix4fv(D.getUniformLocation(G.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=T,this._rendererHeight=w},initUniforms:function(){var S=this.renderer.glFuncMap,T=this.program;this._textureCount=0;for(var w in this.uniforms){var P=this.uniforms[w],A=P.type,R=S[A];P.uniformLocation=this.renderer.createUniformLocation(T,w),A!=="sampler2D"&&(P.glMatrix=R.matrix,P.glValueLength=R.length,P.glFunc=R.func)}},setSampler2DBuffer:function(S,T,w,P,A,R){A===void 0&&(A=0),R===void 0&&(R={});var I=this.uniforms[S];return I.value=T,R.width=w,R.height=P,I.textureData=R,this._textureCount=A,this.initSampler2D(I),this},setSampler2D:function(S,T,w,P){w===void 0&&(w=0);var A=this.scene.sys.textures;if(A.exists(T)){var R=A.getFrame(T);if(R.glTexture&&R.glTexture.isRenderTexture)return this.setSampler2DBuffer(S,R.glTexture,R.width,R.height,w,P);var I=this.uniforms[S],M=R.source;I.textureKey=T,I.source=M.image,I.value=R.glTexture,M.isGLTexture&&(P||(P={}),P.width=M.width,P.height=M.height),P&&(I.textureData=P),this._textureCount=w,this.initSampler2D(I)}return this},setUniform:function(S,T){return s(this.uniforms,S,T),this},getUniform:function(S){return u(this.uniforms,S,null)},setChannel0:function(S,T){return this.setSampler2D("iChannel0",S,0,T)},setChannel1:function(S,T){return this.setSampler2D("iChannel1",S,1,T)},setChannel2:function(S,T){return this.setSampler2D("iChannel2",S,2,T)},setChannel3:function(S,T){return this.setSampler2D("iChannel3",S,3,T)},initSampler2D:function(S){if(S.value){var T=S.textureData;if(T&&!S.value.isRenderTexture){var w=this.gl,P=S.value,A=w[u(T,"magFilter","linear").toUpperCase()],R=w[u(T,"minFilter","linear").toUpperCase()],I=w[u(T,"wrapS","repeat").toUpperCase()],M=w[u(T,"wrapT","repeat").toUpperCase()],L=w[u(T,"format","rgba").toUpperCase()],N=u(T,"flipY",!1),G=u(T,"width",P.width),D=u(T,"height",P.height),B=u(T,"source",P.pixels);T.repeat&&(I=w.REPEAT,M=w.REPEAT),T.width&&(B=null),P.update(B,G,D,N,I,M,R,A,L)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var S=this.gl,T=this.uniforms,w,P,A,R,I,M=0;for(var L in T)w=T[L],A=w.glFunc,P=w.glValueLength,R=w.uniformLocation,I=w.value,I!==null&&(P===1?w.glMatrix?A.call(S,R.webGLUniformLocation,w.transpose,I):A.call(S,R.webGLUniformLocation,I):P===2?A.call(S,R.webGLUniformLocation,I.x,I.y):P===3?A.call(S,R.webGLUniformLocation,I.x,I.y,I.z):P===4?A.call(S,R.webGLUniformLocation,I.x,I.y,I.z,I.w):w.type==="sampler2D"&&(S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,I.webGLTexture),S.uniform1i(R.webGLUniformLocation,M),M++))},load:function(S){var T=this.gl,w=this.width,P=this.height,A=this.renderer,R=this.program,I=this.viewMatrix;if(!this.renderToTexture){var M=-this._displayOriginX,L=-this._displayOriginY;I[0]=S[0],I[1]=S[1],I[4]=S[2],I[5]=S[3],I[8]=S[4],I[9]=S[5],I[12]=I[0]*M+I[4]*L,I[13]=I[1]*M+I[5]*L}T.useProgram(R.webGLProgram),T.uniformMatrix4fv(T.getUniformLocation(R.webGLProgram,"uViewMatrix"),!1,I),T.uniformMatrix4fv(T.getUniformLocation(R.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),T.uniform2f(T.getUniformLocation(R.webGLProgram,"uResolution"),this.width,this.height);var N=this.uniforms,G=N.resolution;G.value.x=w,G.value.y=P,N.time.value=A.game.loop.getDuration();var D=this.pointer;if(D){var B=N.mouse,$=D.x/w,k=1-D.y/P;B.value.x=$.toFixed(2),B.value.y=k.toFixed(2)}this.syncUniforms()},flush:function(){var S=this.width,T=this.height,w=this.program,P=this.gl,A=this.vertexBuffer,R=this.renderer,I=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(R.setFramebuffer(this.framebuffer),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT)),P.bindBuffer(P.ARRAY_BUFFER,A.webGLBuffer);var M=P.getAttribLocation(w.webGLProgram,"inPosition");M!==-1&&(P.enableVertexAttribArray(M),P.vertexAttribPointer(M,2,P.FLOAT,!1,I,0));var L=this.vertexViewF32;L[3]=T,L[4]=S,L[5]=T,L[8]=S,L[9]=T,L[10]=S;var N=6;P.bufferSubData(P.ARRAY_BUFFER,0,this.bytes.subarray(0,N*I)),P.drawArrays(P.TRIANGLES,0,N),this.renderToTexture&&R.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var S=this._deferSetShader.key,T=this._deferSetShader.textures,w=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(S,T,w)}if(this._deferProjOrtho!==null){var P=this._deferProjOrtho.left,A=this._deferProjOrtho.right,R=this._deferProjOrtho.bottom,I=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(P,A,R,I)}},preDestroy:function(){var S=this.renderer;S.off(g.RESTORE_WEBGL,this.onContextRestored,this),S.deleteProgram(this.program),S.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(S.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),d(this.uniforms,function(T){S.deleteUniformLocation(T.uniformLocation),T.uniformLocation=null})}});o.exports=y},80464:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E},54935:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(20071);x.register("shader",function(h,s){h===void 0&&(h={});var l=c(h,"key",null),v=c(h,"x",0),d=c(h,"y",0),g=c(h,"width",128),y=c(h,"height",128),S=new u(this.scene,l,v,d,g,y);return s!==void 0&&(h.add=s),a(this.scene,S,h),S})},74177:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20071),x=e(39429);x.register("shader",function(c,u,h,s,l,v,d){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d))})},25479:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(19257),c=e(80464),o.exports={renderWebGL:x,renderCanvas:c}},19257:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(c,u,h,s){if(u.shader){if(h.addToRenderList(u),c.pipelines.clear(),u.renderToTexture)u.load(),u.flush();else{var l=a(u,h,s).calc;(c.width!==u._rendererWidth||c.height!==u._rendererHeight)&&u.projOrtho(0,c.width,c.height,0),u.load(l.matrix),u.flush()}c.pipelines.rebind()}};o.exports=x},10441:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(c,u,h,s,l,v){for(var d=a.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*s),g=h.pathData,y=h.pathIndexes,S=0;S<y.length;S+=3){var T=y[S]*2,w=y[S+1]*2,P=y[S+2]*2,A=g[T+0]-l,R=g[T+1]-v,I=g[w+0]-l,M=g[w+1]-v,L=g[P+0]-l,N=g[P+1]-v,G=u.getX(A,R),D=u.getY(A,R),B=u.getX(I,M),$=u.getY(I,M),k=u.getX(L,N),X=u.getY(L,N);c.batchTri(h,G,D,B,$,k,X,0,0,1,1,d,d,d,2)}};o.exports=x},65960:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=x||a.fillColor,h=c||a.fillAlpha,s=(u&16711680)>>>16,l=(u&65280)>>>8,v=u&255;e.fillStyle="rgba("+s+","+l+","+v+","+h+")"};o.exports=E},75177:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=x||a.strokeColor,h=c||a.strokeAlpha,s=(u&16711680)>>>16,l=(u&65280)>>>8,v=u&255;e.strokeStyle="rgba("+s+","+l+","+v+","+h+")",e.lineWidth=a.lineWidth};o.exports=E},17803:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(95643),u=e(23031),h=new a({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(l,v,d){v===void 0&&(v="Shape"),c.call(this,l,v),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(s,l){return l===void 0&&(l=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=l,this.isFilled=!0),this},setStrokeStyle:function(s,l,v){return v===void 0&&(v=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=l,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},setSize:function(s,l){return this.width=s,this.height=l,this},setDisplaySize:function(s,l){return this.displayWidth=s,this.displayHeight=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}}});o.exports=h},34682:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(c,u,h,s,l){var v=c.strokeTint,d=a.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*h);v.TL=d,v.TR=d,v.BL=d,v.BR=d;var g=u.pathData,y=g.length-1,S=u.lineWidth,T=S/2,w=g[0]-s,P=g[1]-l;u.closePath||(y-=2);for(var A=2;A<y;A+=2){var R=g[A]-s,I=g[A+1]-l;c.batchLine(w,P,R,I,T,T,S,A-2,u.closePath?A===y-1:!1),w=R,P=I}};o.exports=x},23629:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13609),x=e(83419),c=e(39506),u=e(94811),h=e(96503),s=e(36383),l=e(17803),v=new x({Extends:l,Mixins:[a],initialize:function(g,y,S,T,w,P,A,R,I){y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=128),w===void 0&&(w=0),P===void 0&&(P=360),A===void 0&&(A=!1),l.call(this,g,"Arc",new h(0,0,T)),this._startAngle=w,this._endAngle=P,this._anticlockwise=A,this._iterations=.01,this.setPosition(y,S);var M=this.geom.radius*2;this.setSize(M,M),R!==void 0&&this.setFillStyle(R,I),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var g=d*2;this.setSize(g,g),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,g){return this._startAngle=d,g!==void 0&&(this._anticlockwise=g),this.updateData()},setEndAngle:function(d,g){return this._endAngle=d,g!==void 0&&(this._anticlockwise=g),this.updateData()},updateData:function(){var d=this._iterations,g=d,y=this.geom.radius,S=c(this._startAngle),T=c(this._endAngle),w=this._anticlockwise,P=y,A=y;T-=S,w?T<-s.PI2?T=-s.PI2:T>0&&(T=-s.PI2+T%s.PI2):T>s.PI2?T=s.PI2:T<0&&(T=s.PI2+T%s.PI2);for(var R=[P+Math.cos(S)*y,A+Math.sin(S)*y],I;g<1;)I=T*g+S,R.push(P+Math.cos(I)*y,A+Math.sin(I)*y),g+=d;return I=T+S,R.push(P+Math.cos(I)*y,A+Math.sin(I)*y),R.push(P+Math.cos(S)*y,A+Math.sin(S)*y),this.pathIndexes=u(R),this.pathData=R,this}});o.exports=v},42542:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),x=e(65960),c=e(75177),u=e(20926),h=function(s,l,v,d){v.addToRenderList(l);var g=s.currentContext;if(u(s,g,l,v,d)){var y=l.radius;g.beginPath(),g.arc(y-l.originX*(y*2),y-l.originY*(y*2),y,a(l._startAngle),a(l._endAngle),l.anticlockwise),l.closePath&&g.closePath(),l.isFilled&&(x(g,l),g.fill()),l.isStroked&&(c(g,l),g.stroke()),g.restore()}};o.exports=h},42563:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23629),x=e(39429);x.register("arc",function(c,u,h,s,l,v,d,g){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d,g))}),x.register("circle",function(c,u,h,s,l){return this.displayList.add(new a(this.scene,c,u,h,0,360,!1,s,l))})},13609:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(41447),c=e(42542),o.exports={renderWebGL:x,renderCanvas:c}},41447:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(10441),c=e(34682),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=a(s,l,v),y=d.calcMatrix.copyFrom(g.calc),S=s._displayOriginX,T=s._displayOriginY,w=l.alpha*s.alpha;h.pipelines.preBatch(s),s.isFilled&&x(d,y,s,w,S,T),s.isStroked&&c(d,s,w,S,T),h.pipelines.postBatch(s)};o.exports=u},89:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(33141),c=e(94811),u=e(87841),h=e(17803),s=new a({Extends:h,Mixins:[x],initialize:function(v,d,g,y,S,T){d===void 0&&(d=0),g===void 0&&(g=0),h.call(this,v,"Curve",y),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(d,g),S!==void 0&&this.setFillStyle(S,T),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){var l=this._curveBounds,v=this._smoothness;this.geom.getBounds(l,v),this.setSize(l.width,l.height),this.updateDisplayOrigin();for(var d=[],g=this.geom.getPoints(v),y=0;y<g.length;y++)d.push(g[y].x,g[y].y);return d.push(g[0].x,g[0].y),this.pathIndexes=c(d),this.pathData=d,this}});o.exports=s},3170:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX+s._curveBounds.x,y=s._displayOriginY+s._curveBounds.y,S=s.pathData,T=S.length-1,w=S[0]-g,P=S[1]-y;d.beginPath(),d.moveTo(w,P),s.closePath||(T-=2);for(var A=2;A<T;A+=2){var R=S[A]-g,I=S[A+1]-y;d.lineTo(R,I)}s.closePath&&d.closePath(),s.isFilled&&(a(d,s),d.fill()),s.isStroked&&(x(d,s),d.stroke()),d.restore()}};o.exports=u},40511:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(89);a.register("curve",function(c,u,h,s,l){return this.displayList.add(new x(this.scene,c,u,h,s,l))})},33141:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(53987),c=e(3170),o.exports={renderWebGL:x,renderCanvas:c}},53987:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),c=e(34682),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=x(s,l,v),y=d.calcMatrix.copyFrom(g.calc),S=s._displayOriginX+s._curveBounds.x,T=s._displayOriginY+s._curveBounds.y,w=l.alpha*s.alpha;h.pipelines.preBatch(s),s.isFilled&&a(d,y,s,w,S,T),s.isStroked&&c(d,s,w,S,T),h.pipelines.postBatch(s)};o.exports=u},19921:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94811),c=e(54205),u=e(8497),h=e(17803),s=new a({Extends:h,Mixins:[c],initialize:function(v,d,g,y,S,T,w){d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=128),S===void 0&&(S=128),h.call(this,v,"Ellipse",new u(y/2,S/2,y,S)),this._smoothness=64,this.setPosition(d,g),this.width=y,this.height=S,T!==void 0&&this.setFillStyle(T,w),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSize:function(l,v){return this.width=l,this.height=v,this.geom.setPosition(l/2,v/2),this.geom.setSize(l,v),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){for(var l=[],v=this.geom.getPoints(this._smoothness),d=0;d<v.length;d++)l.push(v[d].x,v[d].y);return l.push(v[0].x,v[0].y),this.pathIndexes=x(l),this.pathData=l,this}});o.exports=s},7930:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX,y=s._displayOriginY,S=s.pathData,T=S.length-1,w=S[0]-g,P=S[1]-y;d.beginPath(),d.moveTo(w,P),s.closePath||(T-=2);for(var A=2;A<T;A+=2){var R=S[A]-g,I=S[A+1]-y;d.lineTo(R,I)}d.closePath(),s.isFilled&&(a(d,s),d.fill()),s.isStroked&&(x(d,s),d.stroke()),d.restore()}};o.exports=u},1543:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19921),x=e(39429);x.register("ellipse",function(c,u,h,s,l,v){return this.displayList.add(new a(this.scene,c,u,h,s,l,v))})},54205:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(19467),c=e(7930),o.exports={renderWebGL:x,renderCanvas:c}},19467:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),c=e(34682),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=x(s,l,v),y=d.calcMatrix.copyFrom(g.calc),S=s._displayOriginX,T=s._displayOriginY,w=l.alpha*s.alpha;h.pipelines.preBatch(s),s.isFilled&&a(d,y,s,w,S,T),s.isStroked&&c(d,s,w,S,T),h.pipelines.postBatch(s)};o.exports=u},30479:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),c=e(26015),u=new a({Extends:x,Mixins:[c],initialize:function(s,l,v,d,g,y,S,T,w,P,A){l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=128),g===void 0&&(g=128),y===void 0&&(y=32),S===void 0&&(S=32),x.call(this,s,"Grid",null),this.cellWidth=y,this.cellHeight=S,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(l,v),this.setSize(d,g),this.setFillStyle(T,w),P!==void 0&&this.setOutlineStyle(P,A),this.updateDisplayOrigin()},setFillStyle:function(h,s){return s===void 0&&(s=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=s,this.showCells=!0),this},setAltFillStyle:function(h,s){return s===void 0&&(s=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=s,this.showAltCells=!0),this},setOutlineStyle:function(h,s){return s===void 0&&(s=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=s,this.showOutline=!0),this}});o.exports=u},49912:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=-s._displayOriginX,y=-s._displayOriginY,S=l.alpha*s.alpha,T=s.width,w=s.height,P=s.cellWidth,A=s.cellHeight,R=Math.ceil(T/P),I=Math.ceil(w/A),M=P,L=A,N=P-(R*P-T),G=A-(I*A-w),D=s.showCells,B=s.showAltCells,$=s.showOutline,k=0,X=0,Y=0,Z=0,Q=0;if($&&(M--,L--,N===P&&N--,G===A&&G--),D&&s.fillAlpha>0)for(a(d,s),X=0;X<I;X++)for(B&&(Y=X%2),k=0;k<R;k++){if(B&&Y){Y=0;continue}Y++,Z=k<R-1?M:N,Q=X<I-1?L:G,d.fillRect(g+k*P,y+X*A,Z,Q)}if(B&&s.altFillAlpha>0)for(a(d,s,s.altFillColor,s.altFillAlpha*S),X=0;X<I;X++)for(B&&(Y=X%2),k=0;k<R;k++){if(B&&!Y){Y=1;continue}Y=0,Z=k<R-1?M:N,Q=X<I-1?L:G,d.fillRect(g+k*P,y+X*A,Z,Q)}if($&&s.outlineFillAlpha>0){for(x(d,s,s.outlineFillColor,s.outlineFillAlpha*S),k=1;k<R;k++){var j=k*P;d.beginPath(),d.moveTo(j+g,y),d.lineTo(j+g,w+y),d.stroke()}for(X=1;X<I;X++){var K=X*A;d.beginPath(),d.moveTo(g,K+y),d.lineTo(g+T,K+y),d.stroke()}}d.restore()}};o.exports=u},34137:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(30479);a.register("grid",function(c,u,h,s,l,v,d,g,y,S){return this.displayList.add(new x(this.scene,c,u,h,s,l,v,d,g,y,S))})},26015:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(46161),c=e(49912),o.exports={renderWebGL:x,renderCanvas:c}},46161:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){s.addToRenderList(h);var v=u.pipelines.set(h.pipeline),d=a(h,s,l),g=v.calcMatrix.copyFrom(d.calc);g.translate(-h._displayOriginX,-h._displayOriginY);var y=s.alpha*h.alpha,S=h.width,T=h.height,w=h.cellWidth,P=h.cellHeight,A=Math.ceil(S/w),R=Math.ceil(T/P),I=w,M=P,L=w-(A*w-S),N=P-(R*P-T),G,D,B=h.showCells,$=h.showAltCells,k=h.showOutline,X=0,Y=0,Z=0,Q=0,j=0;if(k&&(I--,M--,L===w&&L--,N===P&&N--),u.pipelines.preBatch(h),B&&h.fillAlpha>0)for(G=v.fillTint,D=x.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*y),G.TL=D,G.TR=D,G.BL=D,G.BR=D,Y=0;Y<R;Y++)for($&&(Z=Y%2),X=0;X<A;X++){if($&&Z){Z=0;continue}Z++,Q=X<A-1?I:L,j=Y<R-1?M:N,v.batchFillRect(X*w,Y*P,Q,j)}if($&&h.altFillAlpha>0)for(G=v.fillTint,D=x.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*y),G.TL=D,G.TR=D,G.BL=D,G.BR=D,Y=0;Y<R;Y++)for($&&(Z=Y%2),X=0;X<A;X++){if($&&!Z){Z=1;continue}Z=0,Q=X<A-1?I:L,j=Y<R-1?M:N,v.batchFillRect(X*w,Y*P,Q,j)}if(k&&h.outlineFillAlpha>0){var K=v.strokeTint,W=x.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*y);for(K.TL=W,K.TR=W,K.BL=W,K.BR=W,X=1;X<A;X++){var V=X*w;v.batchLine(V,0,V,T,1,1,1,0,!1)}for(Y=1;Y<R;Y++){var J=Y*P;v.batchLine(0,J,S,J,1,1,1,0,!1)}}u.pipelines.postBatch(h)};o.exports=c},61475:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99651),x=e(83419),c=e(17803),u=new x({Extends:c,Mixins:[a],initialize:function(s,l,v,d,g,y,S,T){l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=48),g===void 0&&(g=32),y===void 0&&(y=15658734),S===void 0&&(S=10066329),T===void 0&&(T=13421772),c.call(this,s,"IsoBox",null),this.projection=4,this.fillTop=y,this.fillLeft=S,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(l,v),this.setSize(d,g),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,s,l){return h===void 0&&(h=!0),s===void 0&&(s=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=s,this.showRight=l,this},setFillStyle:function(h,s,l){return this.fillTop=h,this.fillLeft=s,this.fillRight=l,this.isFilled=!0,this}});o.exports=u},11508:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(20926),c=function(u,h,s,l){s.addToRenderList(h);var v=u.currentContext;if(x(u,v,h,s,l)&&h.isFilled){var d=h.width,g=h.height,y=d/2,S=d/h.projection;h.showTop&&(a(v,h,h.fillTop),v.beginPath(),v.moveTo(-y,-g),v.lineTo(0,-S-g),v.lineTo(y,-g),v.lineTo(y,-1),v.lineTo(0,S-1),v.lineTo(-y,-1),v.lineTo(-y,-g),v.fill()),h.showLeft&&(a(v,h,h.fillLeft),v.beginPath(),v.moveTo(-y,0),v.lineTo(0,S),v.lineTo(0,S-g),v.lineTo(-y,-g),v.lineTo(-y,0),v.fill()),h.showRight&&(a(v,h,h.fillRight),v.beginPath(),v.moveTo(y,0),v.lineTo(0,S),v.lineTo(0,S-g),v.lineTo(y,-g),v.lineTo(y,0),v.fill()),v.restore()}};o.exports=c},3933:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(61475);a.register("isobox",function(c,u,h,s,l,v,d){return this.displayList.add(new x(this.scene,c,u,h,s,l,v,d))})},99651:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(68149),c=e(11508),o.exports={renderWebGL:x,renderCanvas:c}},68149:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){s.addToRenderList(h);var v=u.pipelines.set(h.pipeline),d=a(h,s,l),g=v.calcMatrix.copyFrom(d.calc),y=h.width,S=h.height,T=y/2,w=y/h.projection,P=s.alpha*h.alpha;if(h.isFilled){var A,R,I,M,L,N,G,D,B;u.pipelines.preBatch(h),h.showTop&&(A=x.getTintAppendFloatAlpha(h.fillTop,P),R=g.getX(-T,-S),I=g.getY(-T,-S),M=g.getX(0,-w-S),L=g.getY(0,-w-S),N=g.getX(T,-S),G=g.getY(T,-S),D=g.getX(0,w-S),B=g.getY(0,w-S),v.batchQuad(h,R,I,M,L,N,G,D,B,0,0,1,1,A,A,A,A,2)),h.showLeft&&(A=x.getTintAppendFloatAlpha(h.fillLeft,P),R=g.getX(-T,0),I=g.getY(-T,0),M=g.getX(0,w),L=g.getY(0,w),N=g.getX(0,w-S),G=g.getY(0,w-S),D=g.getX(-T,-S),B=g.getY(-T,-S),v.batchQuad(h,R,I,M,L,N,G,D,B,0,0,1,1,A,A,A,A,2)),h.showRight&&(A=x.getTintAppendFloatAlpha(h.fillRight,P),R=g.getX(T,0),I=g.getY(T,0),M=g.getX(0,w),L=g.getY(0,w),N=g.getX(0,w-S),G=g.getY(0,w-S),D=g.getX(T,-S),B=g.getY(T,-S),v.batchQuad(h,R,I,M,L,N,G,D,B,0,0,1,1,A,A,A,A,2)),u.pipelines.postBatch(h)}};o.exports=c},16933:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(60561),c=e(17803),u=new a({Extends:c,Mixins:[x],initialize:function(s,l,v,d,g,y,S,T,w){l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d=48),g===void 0&&(g=32),y===void 0&&(y=!1),S===void 0&&(S=15658734),T===void 0&&(T=10066329),w===void 0&&(w=13421772),c.call(this,s,"IsoTriangle",null),this.projection=4,this.fillTop=S,this.fillLeft=T,this.fillRight=w,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=y,this.isFilled=!0,this.setPosition(l,v),this.setSize(d,g),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,s,l){return h===void 0&&(h=!0),s===void 0&&(s=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=s,this.showRight=l,this},setFillStyle:function(h,s,l){return this.fillTop=h,this.fillLeft=s,this.fillRight=l,this.isFilled=!0,this}});o.exports=u},79590:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(20926),c=function(u,h,s,l){s.addToRenderList(h);var v=u.currentContext;if(x(u,v,h,s,l)&&h.isFilled){var d=h.width,g=h.height,y=d/2,S=d/h.projection,T=h.isReversed;h.showTop&&T&&(a(v,h,h.fillTop),v.beginPath(),v.moveTo(-y,-g),v.lineTo(0,-S-g),v.lineTo(y,-g),v.lineTo(0,S-g),v.fill()),h.showLeft&&(a(v,h,h.fillLeft),v.beginPath(),T?(v.moveTo(-y,-g),v.lineTo(0,S),v.lineTo(0,S-g)):(v.moveTo(-y,0),v.lineTo(0,S),v.lineTo(0,S-g)),v.fill()),h.showRight&&(a(v,h,h.fillRight),v.beginPath(),T?(v.moveTo(y,-g),v.lineTo(0,S),v.lineTo(0,S-g)):(v.moveTo(y,0),v.lineTo(0,S),v.lineTo(0,S-g)),v.fill()),v.restore()}};o.exports=c},49803:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(16933);a.register("isotriangle",function(c,u,h,s,l,v,d,g){return this.displayList.add(new x(this.scene,c,u,h,s,l,v,d,g))})},60561:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(51503),c=e(79590),o.exports={renderWebGL:x,renderCanvas:c}},51503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){s.addToRenderList(h);var v=u.pipelines.set(h.pipeline),d=a(h,s,l),g=v.calcMatrix.copyFrom(d.calc),y=h.width,S=h.height,T=y/2,w=y/h.projection,P=h.isReversed,A=s.alpha*h.alpha;if(h.isFilled){u.pipelines.preBatch(h);var R,I,M,L,N,G,D;if(h.showTop&&P){R=x.getTintAppendFloatAlpha(h.fillTop,A),I=g.getX(-T,-S),M=g.getY(-T,-S),L=g.getX(0,-w-S),N=g.getY(0,-w-S),G=g.getX(T,-S),D=g.getY(T,-S);var B=g.getX(0,w-S),$=g.getY(0,w-S);v.batchQuad(h,I,M,L,N,G,D,B,$,0,0,1,1,R,R,R,R,2)}h.showLeft&&(R=x.getTintAppendFloatAlpha(h.fillLeft,A),P?(I=g.getX(-T,-S),M=g.getY(-T,-S),L=g.getX(0,w),N=g.getY(0,w),G=g.getX(0,w-S),D=g.getY(0,w-S)):(I=g.getX(-T,0),M=g.getY(-T,0),L=g.getX(0,w),N=g.getY(0,w),G=g.getX(0,w-S),D=g.getY(0,w-S)),v.batchTri(h,I,M,L,N,G,D,0,0,1,1,R,R,R,2)),h.showRight&&(R=x.getTintAppendFloatAlpha(h.fillRight,A),P?(I=g.getX(T,-S),M=g.getY(T,-S),L=g.getX(0,w),N=g.getY(0,w),G=g.getX(0,w-S),D=g.getY(0,w-S)):(I=g.getX(T,0),M=g.getY(T,0),L=g.getX(0,w),N=g.getY(0,w),G=g.getX(0,w-S),D=g.getY(0,w-S)),v.batchTri(h,I,M,L,N,G,D,0,0,1,1,R,R,R,2)),u.pipelines.postBatch(h)}};o.exports=c},57847:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),c=e(23031),u=e(36823),h=new a({Extends:x,Mixins:[u],initialize:function(l,v,d,g,y,S,T,w,P){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=128),T===void 0&&(T=0),x.call(this,l,"Line",new c(g,y,S,T));var A=Math.max(1,this.geom.right-this.geom.left),R=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,d),this.setSize(A,R),w!==void 0&&this.setStrokeStyle(1,w,P),this.updateDisplayOrigin()},setLineWidth:function(s,l){return l===void 0&&(l=s),this._startWidth=s,this._endWidth=l,this.lineWidth=s,this},setTo:function(s,l,v,d){return this.geom.setTo(s,l,v,d),this}});o.exports=h},17440:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75177),x=e(20926),c=function(u,h,s,l){s.addToRenderList(h);var v=u.currentContext;if(x(u,v,h,s,l)){var d=h._displayOriginX,g=h._displayOriginY;h.isStroked&&(a(v,h),v.beginPath(),v.moveTo(h.geom.x1-d,h.geom.y1-g),v.lineTo(h.geom.x2-d,h.geom.y2-g),v.stroke()),v.restore()}};o.exports=c},2481:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(57847);a.register("line",function(c,u,h,s,l,v,d,g){return this.displayList.add(new x(this.scene,c,u,h,s,l,v,d,g))})},36823:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(77385),c=e(17440),o.exports={renderWebGL:x,renderCanvas:c}},77385:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),c=function(u,h,s,l){s.addToRenderList(h);var v=u.pipelines.set(h.pipeline),d=a(h,s,l);v.calcMatrix.copyFrom(d.calc);var g=h._displayOriginX,y=h._displayOriginY,S=s.alpha*h.alpha;if(u.pipelines.preBatch(h),h.isStroked){var T=v.strokeTint,w=x.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*S);T.TL=w,T.TR=w,T.BL=w,T.BR=w,v.batchLine(h.geom.x1-g,h.geom.y1-y,h.geom.x2-g,h.geom.y2-y,h._startWidth/2,h._endWidth/2,1,0,!1,d.sprite,d.camera)}u.pipelines.postBatch(h)};o.exports=c},24949:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90273),x=e(83419),c=e(94811),u=e(13829),h=e(25717),s=e(17803),l=e(5469),v=new x({Extends:s,Mixins:[a],initialize:function(g,y,S,T,w,P){y===void 0&&(y=0),S===void 0&&(S=0),s.call(this,g,"Polygon",new h(T));var A=u(this.geom);this.setPosition(y,S),this.setSize(A.width,A.height),w!==void 0&&this.setFillStyle(w,P),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var g=0;g<d;g++)l(this.geom);return this.updateData()},setTo:function(d){this.geom.setTo(d);var g=u(this.geom);return this.setSize(g.width,g.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var d=[],g=this.geom.points,y=0;y<g.length;y++)d.push(g[y].x,g[y].y);return d.push(g[0].x,g[0].y),this.pathIndexes=c(d),this.pathData=d,this}});o.exports=v},38710:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX,y=s._displayOriginY,S=s.pathData,T=S.length-1,w=S[0]-g,P=S[1]-y;d.beginPath(),d.moveTo(w,P),s.closePath||(T-=2);for(var A=2;A<T;A+=2){var R=S[A]-g,I=S[A+1]-y;d.lineTo(R,I)}s.closePath&&d.closePath(),s.isFilled&&(a(d,s),d.fill()),s.isStroked&&(x(d,s),d.stroke()),d.restore()}};o.exports=u},64827:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(24949);a.register("polygon",function(c,u,h,s,l){return this.displayList.add(new x(this.scene,c,u,h,s,l))})},90273:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(73695),c=e(38710),o.exports={renderWebGL:x,renderCanvas:c}},73695:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),c=e(34682),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=x(s,l,v),y=d.calcMatrix.copyFrom(g.calc),S=s._displayOriginX,T=s._displayOriginY,w=l.alpha*s.alpha;h.pipelines.preBatch(s),s.isFilled&&a(d,y,s,w,S,T),s.isStroked&&c(d,s,w,S,T),h.pipelines.postBatch(s)};o.exports=u},74561:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(87841),c=e(17803),u=e(95597),h=new a({Extends:c,Mixins:[u],initialize:function(l,v,d,g,y,S,T){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=128),y===void 0&&(y=128),c.call(this,l,"Rectangle",new x(0,0,g,y)),this.setPosition(v,d),this.setSize(g,y),S!==void 0&&this.setFillStyle(S,T),this.updateDisplayOrigin(),this.updateData()},setSize:function(s,l){this.width=s,this.height=l,this.geom.setSize(s,l),this.updateData(),this.updateDisplayOrigin();var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=s,v.hitArea.height=l),this},updateData:function(){var s=[],l=this.geom,v=this._tempLine;return l.getLineA(v),s.push(v.x1,v.y1,v.x2,v.y2),l.getLineB(v),s.push(v.x2,v.y2),l.getLineC(v),s.push(v.x2,v.y2),l.getLineD(v),s.push(v.x2,v.y2),this.pathData=s,this}});o.exports=h},48682:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX,y=s._displayOriginY;s.isFilled&&(a(d,s),d.fillRect(-g,-y,s.width,s.height)),s.isStroked&&(x(d,s),d.beginPath(),d.rect(-g,-y,s.width,s.height),d.stroke()),d.restore()}};o.exports=u},87959:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(74561);a.register("rectangle",function(c,u,h,s,l,v){return this.displayList.add(new x(this.scene,c,u,h,s,l,v))})},95597:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(52059),c=e(48682),o.exports={renderWebGL:x,renderCanvas:c}},52059:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(34682),c=e(70554),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=a(s,l,v);d.calcMatrix.copyFrom(g.calc);var y=s._displayOriginX,S=s._displayOriginY,T=l.alpha*s.alpha;if(h.pipelines.preBatch(s),s.isFilled){var w=d.fillTint,P=c.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*T);w.TL=P,w.TR=P,w.BL=P,w.BR=P,d.batchFillRect(-y,-S,s.width,s.height)}s.isStroked&&x(d,s,T,y,S),h.pipelines.postBatch(s)};o.exports=u},55911:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81991),x=e(83419),c=e(94811),u=e(17803),h=new x({Extends:u,Mixins:[a],initialize:function(l,v,d,g,y,S,T,w){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=5),y===void 0&&(y=32),S===void 0&&(S=64),u.call(this,l,"Star",null),this._points=g,this._innerRadius=y,this._outerRadius=S,this.setPosition(v,d),this.setSize(S*2,S*2),T!==void 0&&this.setFillStyle(T,w),this.updateDisplayOrigin(),this.updateData()},setPoints:function(s){return this._points=s,this.updateData()},setInnerRadius:function(s){return this._innerRadius=s,this.updateData()},setOuterRadius:function(s){return this._outerRadius=s,this.updateData()},points:{get:function(){return this._points},set:function(s){this._points=s,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this.updateData()}},updateData:function(){var s=[],l=this._points,v=this._innerRadius,d=this._outerRadius,g=Math.PI/2*3,y=Math.PI/l,S=d,T=d;s.push(S,T+-d);for(var w=0;w<l;w++)s.push(S+Math.cos(g)*d,T+Math.sin(g)*d),g+=y,s.push(S+Math.cos(g)*v,T+Math.sin(g)*v),g+=y;return s.push(S,T+-d),this.pathIndexes=c(s),this.pathData=s,this}});o.exports=h},64272:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX,y=s._displayOriginY,S=s.pathData,T=S.length-1,w=S[0]-g,P=S[1]-y;d.beginPath(),d.moveTo(w,P),s.closePath||(T-=2);for(var A=2;A<T;A+=2){var R=S[A]-g,I=S[A+1]-y;d.lineTo(R,I)}d.closePath(),s.isFilled&&(a(d,s),d.fill()),s.isStroked&&(x(d,s),d.stroke()),d.restore()}};o.exports=u},93697:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55911),x=e(39429);x.register("star",function(c,u,h,s,l,v,d){return this.displayList.add(new a(this.scene,c,u,h,s,l,v,d))})},81991:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(57017),c=e(64272),o.exports={renderWebGL:x,renderCanvas:c}},57017:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),c=e(34682),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=x(s,l,v),y=d.calcMatrix.copyFrom(g.calc),S=s._displayOriginX,T=s._displayOriginY,w=l.alpha*s.alpha;h.pipelines.preBatch(s),s.isFilled&&a(d,y,s,w,S,T),s.isStroked&&c(d,s,w,S,T),h.pipelines.postBatch(s)};o.exports=u},36931:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),c=e(16483),u=e(96195),h=new a({Extends:x,Mixins:[u],initialize:function(l,v,d,g,y,S,T,w,P,A,R){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=128),S===void 0&&(S=64),T===void 0&&(T=0),w===void 0&&(w=128),P===void 0&&(P=128),x.call(this,l,"Triangle",new c(g,y,S,T,w,P));var I=this.geom.right-this.geom.left,M=this.geom.bottom-this.geom.top;this.setPosition(v,d),this.setSize(I,M),A!==void 0&&this.setFillStyle(A,R),this.updateDisplayOrigin(),this.updateData()},setTo:function(s,l,v,d,g,y){return this.geom.setTo(s,l,v,d,g,y),this.updateData()},updateData:function(){var s=[],l=this.geom,v=this._tempLine;return l.getLineA(v),s.push(v.x1,v.y1,v.x2,v.y2),l.getLineB(v),s.push(v.x2,v.y2),l.getLineC(v),s.push(v.x2,v.y2),this.pathData=s,this}});o.exports=h},85172:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),c=e(20926),u=function(h,s,l,v){l.addToRenderList(s);var d=h.currentContext;if(c(h,d,s,l,v)){var g=s._displayOriginX,y=s._displayOriginY,S=s.geom.x1-g,T=s.geom.y1-y,w=s.geom.x2-g,P=s.geom.y2-y,A=s.geom.x3-g,R=s.geom.y3-y;d.beginPath(),d.moveTo(S,T),d.lineTo(w,P),d.lineTo(A,R),d.closePath(),s.isFilled&&(a(d,s),d.fill()),s.isStroked&&(x(d,s),d.stroke()),d.restore()}};o.exports=u},45245:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(36931);a.register("triangle",function(c,u,h,s,l,v,d,g,y,S){return this.displayList.add(new x(this.scene,c,u,h,s,l,v,d,g,y,S))})},96195:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(83253),c=e(85172),o.exports={renderWebGL:x,renderCanvas:c}},83253:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(34682),c=e(70554),u=function(h,s,l,v){l.addToRenderList(s);var d=h.pipelines.set(s.pipeline),g=a(s,l,v);d.calcMatrix.copyFrom(g.calc);var y=s._displayOriginX,S=s._displayOriginY,T=l.alpha*s.alpha;if(h.pipelines.preBatch(s),s.isFilled){var w=d.fillTint,P=c.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*T);w.TL=P,w.TR=P,w.BL=P,w.BR=P;var A=s.geom.x1-y,R=s.geom.y1-S,I=s.geom.x2-y,M=s.geom.y2-S,L=s.geom.x3-y,N=s.geom.y3-S;d.batchFillTriangle(A,R,I,M,L,N,g.sprite,g.camera)}s.isStroked&&x(d,s,T,y,S),h.pipelines.postBatch(s)};o.exports=u},68287:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),c=e(31401),u=e(95643),h=e(92751),s=new x({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,h],initialize:function(v,d,g,y,S){u.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(y,S),this.setPosition(d,g),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,v){this.anims.update(l,v)},play:function(l,v){return this.anims.play(l,v)},playReverse:function(l,v){return this.anims.playReverse(l,v)},playAfterDelay:function(l,v){return this.anims.playAfterDelay(l,v)},playAfterRepeat:function(l,v){return this.anims.playAfterRepeat(l,v)},chain:function(l){return this.anims.chain(l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(l){return this.anims.stopAfterDelay(l)},stopAfterRepeat:function(l){return this.anims.stopAfterRepeat(l)},stopOnFrame:function(l){return this.anims.stopOnFrame(l)},toJSON:function(){return c.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});o.exports=s},76552:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a),e.batchSprite(a,a.frame,x,c)};o.exports=E},15567:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(13059),c=e(44603),u=e(23568),h=e(68287);c.register("sprite",function(s,l){s===void 0&&(s={});var v=u(s,"key",null),d=u(s,"frame",null),g=new h(this.scene,0,0,v,d);return l!==void 0&&(s.add=l),a(this.scene,g,s),x(g,s),g})},46409:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(68287);a.register("sprite",function(c,u,h,s){return this.displayList.add(new x(this.scene,c,u,h,s))})},92751:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(9409),c=e(76552),o.exports={renderWebGL:x,renderCanvas:c}},9409:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x.addToRenderList(a),a.pipeline.batchSprite(a,x,c)};o.exports=E},14220:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=e.canvas,u=e.context,h=e.style,s=[],l=0,v=x.length;h.maxLines>0&&h.maxLines<x.length&&(v=h.maxLines),h.syncFont(c,u);for(var d=e.letterSpacing,g=0;g<v;g++){var y=h.strokeThickness;if(d===0)y+=u.measureText(x[g]).width;else{for(var S=x[g],T=0;T<S.length;T++)y+=u.measureText(S[T]).width;S.length>1&&(y+=d*(S.length-1))}h.wordWrap&&(y-=u.measureText(" ").width),s[g]=Math.ceil(y),l=Math.max(l,s[g])}var w=a.fontSize+h.strokeThickness,P=w*v,A=e.lineSpacing;return v>1&&(P+=A*(v-1)),{width:l,height:P,lines:v,lineWidths:s,lineSpacing:A,lineHeight:w}};o.exports=E},79557:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=function(c){var u=a.create(this),h=u.getContext("2d",{willReadFrequently:!0});c.syncFont(u,h);var s=h.measureText(c.testString);if("actualBoundingBoxAscent"in s){var l=s.actualBoundingBoxAscent,v=s.actualBoundingBoxDescent;return a.remove(u),{ascent:l,descent:v,fontSize:l+v}}var d=Math.ceil(s.width*c.baselineX),g=d,y=2*g;g=g*c.baselineY|0,u.width=d,u.height=y,h.fillStyle="#f00",h.fillRect(0,0,d,y),h.font=c._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(c.testString,0,g);var S={ascent:0,descent:0,fontSize:0},T=h.getImageData(0,0,d,y);if(!T)return S.ascent=g,S.descent=g+6,S.fontSize=S.ascent+S.descent,a.remove(u),S;var w=T.data,P=w.length,A=d*4,R,I,M=0,L=!1;for(R=0;R<g;R++){for(I=0;I<A;I+=4)if(w[M+I]!==255){L=!0;break}if(!L)M+=A;else break}for(S.ascent=g-R,M=P-A,L=!1,R=y;R>g;R--){for(I=0;I<A;I+=4)if(w[M+I]!==255){L=!0;break}if(!L)M-=A;else break}return S.descent=R-g,S.fontSize=S.ascent+S.descent,a.remove(u),S};o.exports=x},50171:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=e(27919),c=e(83419),u=e(31401),h=e(95643),s=e(14220),l=e(35154),v=e(35846),d=e(61771),g=e(35762),y=e(45650),S=new c({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,d],initialize:function(w,P,A,R,I){P===void 0&&(P=0),A===void 0&&(A=0),h.call(this,w,"Text"),this.renderer=w.sys.renderer,this.setPosition(P,A),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context,this.style=new g(this,I),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=y(),this.texture=w.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(R),I&&I.padding&&this.setPadding(I.padding),I&&I.lineSpacing&&this.setLineSpacing(I.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(T){var w=this.style;if(w.wordWrapCallback){var P=w.wordWrapCallback.call(w.wordWrapCallbackScope,T,this);return Array.isArray(P)&&(P=P.join(`
`)),P}else return w.wordWrapWidth?w.wordWrapUseAdvanced?this.advancedWordWrap(T,this.context,this.style.wordWrapWidth):this.basicWordWrap(T,this.context,this.style.wordWrapWidth):T},advancedWordWrap:function(T,w,P){for(var A="",R=T.replace(/ +/gi," ").split(this.splitRegExp),I=R.length,M=0;M<I;M++){var L=R[M],N="";L=L.replace(/^ *|\s*$/gi,"");var G=w.measureText(L).width;if(G<P){A+=L+`
`;continue}for(var D=P,B=L.split(" "),$=0;$<B.length;$++){var k=B[$],X=k+" ",Y=w.measureText(X).width;if(Y>D){if($===0){for(var Z=X;Z.length&&(Z=Z.slice(0,-1),Y=w.measureText(Z).width,!(Y<=D)););if(!Z.length)throw new Error("wordWrapWidth < a single character");var Q=k.substr(Z.length);B[$]=Q,N+=Z}var j=B[$].length?$:$+1,K=B.slice(j).join(" ").replace(/[ \n]*$/gi,"");R.splice(M+1,0,K),I=R.length;break}else N+=X,D-=Y}A+=N.replace(/[ \n]*$/gi,"")+`
`}return A=A.replace(/[\s|\n]*$/gi,""),A},basicWordWrap:function(T,w,P){for(var A="",R=T.split(this.splitRegExp),I=R.length-1,M=w.measureText(" ").width,L=0;L<=I;L++){for(var N=P,G=R[L].split(" "),D=G.length-1,B=0;B<=D;B++){var $=G[B],k=w.measureText($).width,X=k;B<D&&(X+=M),X>N&&B>0&&(A+=`
`,N=P),A+=$,B<D?(A+=" ",N-=X):N-=k}L<I&&(A+=`
`)}return A},getWrappedText:function(T){T===void 0&&(T=this._text),this.style.syncFont(this.canvas,this.context);var w=this.runWordWrap(T);return w.split(this.splitRegExp)},setText:function(T){return!T&&T!==0&&(T=""),Array.isArray(T)&&(T=T.join(`
`)),T!==this._text&&(this._text=T.toString(),this.updateText()),this},appendText:function(T,w){w===void 0&&(w=!0),!T&&T!==0&&(T=""),Array.isArray(T)&&(T=T.join(`
`)),T=T.toString();var P=this._text.concat(w?`
`+T:T);return P!==this._text&&(this._text=P,this.updateText()),this},setStyle:function(T){return this.style.setStyle(T)},setFont:function(T){return this.style.setFont(T)},setFontFamily:function(T){return this.style.setFontFamily(T)},setFontSize:function(T){return this.style.setFontSize(T)},setFontStyle:function(T){return this.style.setFontStyle(T)},setFixedSize:function(T,w){return this.style.setFixedSize(T,w)},setBackgroundColor:function(T){return this.style.setBackgroundColor(T)},setFill:function(T){return this.style.setFill(T)},setColor:function(T){return this.style.setColor(T)},setStroke:function(T,w){return this.style.setStroke(T,w)},setShadow:function(T,w,P,A,R,I){return this.style.setShadow(T,w,P,A,R,I)},setShadowOffset:function(T,w){return this.style.setShadowOffset(T,w)},setShadowColor:function(T){return this.style.setShadowColor(T)},setShadowBlur:function(T){return this.style.setShadowBlur(T)},setShadowStroke:function(T){return this.style.setShadowStroke(T)},setShadowFill:function(T){return this.style.setShadowFill(T)},setWordWrapWidth:function(T,w){return this.style.setWordWrapWidth(T,w)},setWordWrapCallback:function(T,w){return this.style.setWordWrapCallback(T,w)},setAlign:function(T){return this.style.setAlign(T)},setResolution:function(T){return this.style.setResolution(T)},setLineSpacing:function(T){return this.lineSpacing=T,this.updateText()},setLetterSpacing:function(T){return this.letterSpacing=T,this.updateText()},setPadding:function(T,w,P,A){if(typeof T=="object"){var R=T,I=l(R,"x",null);I!==null?(T=I,P=I):(T=l(R,"left",0),P=l(R,"right",T));var M=l(R,"y",null);M!==null?(w=M,A=M):(w=l(R,"top",0),A=l(R,"bottom",w))}else T===void 0&&(T=0),w===void 0&&(w=T),P===void 0&&(P=T),A===void 0&&(A=w);return this.padding.left=T,this.padding.top=w,this.padding.right=P,this.padding.bottom=A,this.updateText()},setMaxLines:function(T){return this.style.setMaxLines(T)},setRTL:function(T){T===void 0&&(T=!0);var w=this.style;return w.rtl===T?this:(w.rtl=T,T?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),w.align==="left"?w.align="right":w.align==="right"&&(w.align="left"),this)},updateText:function(){var T=this.canvas,w=this.context,P=this.style,A=P.resolution,R=P.metrics;P.syncFont(T,w);var I=this._text;(P.wordWrapWidth||P.wordWrapCallback)&&(I=this.runWordWrap(this._text));var M=I.split(this.splitRegExp),L=s(this,R,M),N=this.padding,G;P.fixedWidth===0?(this.width=L.width+N.left+N.right,G=L.width):(this.width=P.fixedWidth,G=this.width-N.left-N.right,G<L.width&&(G=L.width)),P.fixedHeight===0?this.height=L.height+N.top+N.bottom:this.height=P.fixedHeight;var D=this.width,B=this.height;this.updateDisplayOrigin(),D*=A,B*=A,D=Math.max(D,1),B=Math.max(B,1),T.width!==D||T.height!==B?(T.width=D,T.height=B,this.frame.setSize(D,B),P.syncFont(T,w),P.rtl&&(w.direction="rtl")):w.clearRect(0,0,D,B),w.save(),w.scale(A,A),P.backgroundColor&&(w.fillStyle=P.backgroundColor,w.fillRect(0,0,D,B)),P.syncStyle(T,w),w.translate(N.left,N.top);for(var $,k,X=0;X<L.lines;X++){if($=P.strokeThickness/2,k=P.strokeThickness/2+X*L.lineHeight+R.ascent,X>0&&(k+=L.lineSpacing*X),P.rtl)$=D-$-N.left-N.right;else if(P.align==="right")$+=G-L.lineWidths[X];else if(P.align==="center")$+=(G-L.lineWidths[X])/2;else if(P.align==="justify"){var Y=.85;if(L.lineWidths[X]/L.width>=Y){var Z=L.width-L.lineWidths[X],Q=w.measureText(" ").width,j=M[X].trim(),K=j.split(" ");Z+=(M[X].length-j.length)*Q;for(var W=Math.floor(Z/Q),V=0;W>0;)K[V]+=" ",V=(V+1)%(K.length-1||1),--W;M[X]=K.join(" ")}}this.autoRound&&($=Math.round($),k=Math.round(k));var J=this.letterSpacing;if(P.strokeThickness&&J===0&&(P.syncShadow(w,P.shadowStroke),w.strokeText(M[X],$,k)),P.color)if(P.syncShadow(w,P.shadowFill),J!==0)for(var ee=0,te=M[X].split(""),ne=0;ne<te.length;ne++)P.strokeThickness&&(P.syncShadow(w,P.shadowStroke),w.strokeText(te[ne],$+ee,k),P.syncShadow(w,P.shadowFill)),w.fillText(te[ne],$+ee,k),ee+=w.measureText(te[ne]).width+J;else w.fillText(M[X],$,k)}w.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(T,this.frame.source.glTexture,!0));var se=this.input;return se&&!se.customHitArea&&(se.hitArea.width=this.width,se.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(T){this.setText(T)}},toJSON:function(){var T=u.ToJSON(this),w={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return T.data=w,T},preDestroy:function(){v(this.canvas),x.remove(this.canvas);var T=this.texture;T&&T.destroy()}});o.exports=S},79724:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a.width===0||a.height===0||(x.addToRenderList(a),e.batchSprite(a,a.frame,x,c))};o.exports=E},71259:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(50171);x.register("text",function(h,s){h===void 0&&(h={});var l=c(h,"text",""),v=c(h,"style",null),d=c(h,"padding",null);d!==null&&(v.padding=d);var g=new u(this.scene,0,0,l,v);return s!==void 0&&(h.add=s),a(this.scene,g,h),g.autoRound=c(h,"autoRound",!0),g.resolution=c(h,"resolution",1),g})},68005:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50171),x=e(39429);x.register("text",function(c,u,h,s){return this.displayList.add(new a(this.scene,c,u,h,s))})},61771:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(34397),c=e(79724),o.exports={renderWebGL:x,renderCanvas:c}},35762:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23568),c=e(35154),u=e(79557),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},s=new a({initialize:function(v,d){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0)},setStyle:function(l,v,d){v===void 0&&(v=!0),d===void 0&&(d=!1);for(var g in h){var y=d?h[g][1]:this[g];g==="wordWrapCallback"||g==="wordWrapCallbackScope"?this[g]=c(l,h[g][0],y):l&&g==="fontSize"&&typeof l.fontSize=="number"?this[g]=l.fontSize.toString()+"px":this[g]=x(l,h[g][0],y)}var S=c(l,"font",null);S!==null&&this.setFont(S,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var T=c(l,"fill",null);T!==null&&(this.color=T);var w=c(l,"metrics",!1);return w?this.metrics={ascent:c(w,"ascent",0),descent:c(w,"descent",0),fontSize:c(w,"fontSize",0)}:(v||!this.metrics)&&(this.metrics=u(this)),v?this.parent.updateText():this.parent},syncFont:function(l,v){v.font=this._font},syncStyle:function(l,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(l,v){v?(l.shadowOffsetX=this.shadowOffsetX,l.shadowOffsetY=this.shadowOffsetY,l.shadowColor=this.shadowColor,l.shadowBlur=this.shadowBlur):(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowColor=0,l.shadowBlur=0)},update:function(l){return l&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(l,v){v===void 0&&(v=!0);var d=l,g="",y="";if(typeof l!="string")d=c(l,"fontFamily","Courier"),g=c(l,"fontSize","16px"),y=c(l,"fontStyle","");else{var S=l.split(" "),T=0;y=S.length>2?S[T++]:"",g=S[T++]||"16px",d=S[T++]||"Courier"}return(d!==this.fontFamily||g!==this.fontSize||y!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=g,this.fontStyle=y,v&&this.update(!0)),this.parent},setFontFamily:function(l){return this.fontFamily!==l&&(this.fontFamily=l,this.update(!0)),this.parent},setFontStyle:function(l){return this.fontStyle!==l&&(this.fontStyle=l,this.update(!0)),this.parent},setFontSize:function(l){return typeof l=="number"&&(l=l.toString()+"px"),this.fontSize!==l&&(this.fontSize=l,this.update(!0)),this.parent},setTestString:function(l){return this.testString=l,this.update(!0)},setFixedSize:function(l,v){return this.fixedWidth=l,this.fixedHeight=v,l&&(this.parent.width=l),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(l){return this.backgroundColor=l,this.update(!1)},setFill:function(l){return this.color=l,this.update(!1)},setColor:function(l){return this.color=l,this.update(!1)},setResolution:function(l){return this.resolution=l,this.update(!1)},setStroke:function(l,v){return v===void 0&&(v=this.strokeThickness),l===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==l||this.strokeThickness!==v)&&(this.stroke=l,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(l,v,d,g,y,S){return l===void 0&&(l=0),v===void 0&&(v=0),d===void 0&&(d="#000"),g===void 0&&(g=0),y===void 0&&(y=!1),S===void 0&&(S=!0),this.shadowOffsetX=l,this.shadowOffsetY=v,this.shadowColor=d,this.shadowBlur=g,this.shadowStroke=y,this.shadowFill=S,this.update(!1)},setShadowOffset:function(l,v){return l===void 0&&(l=0),v===void 0&&(v=l),this.shadowOffsetX=l,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(l){return l===void 0&&(l="#000"),this.shadowColor=l,this.update(!1)},setShadowBlur:function(l){return l===void 0&&(l=0),this.shadowBlur=l,this.update(!1)},setShadowStroke:function(l){return this.shadowStroke=l,this.update(!1)},setShadowFill:function(l){return this.shadowFill=l,this.update(!1)},setWordWrapWidth:function(l,v){return v===void 0&&(v=!1),this.wordWrapWidth=l,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(l,v){return v===void 0&&(v=null),this.wordWrapCallback=l,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(l){return l===void 0&&(l="left"),this.align=l,this.update(!1)},setMaxLines:function(l){return l===void 0&&(l=0),this.maxLines=l,this.update(!1)},getTextMetrics:function(){var l=this.metrics;return{ascent:l.ascent,descent:l.descent,fontSize:l.fontSize}},toJSON:function(){var l={};for(var v in h)l[v]=this[v];return l.metrics=this.getTextMetrics(),l},destroy:function(){this.parent=void 0}});o.exports=s},34397:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(c,u,h,s){if(!(u.width===0||u.height===0)){h.addToRenderList(u);var l=u.frame,v=l.width,d=l.height,g=a.getTintAppendFloatAlpha,y=c.pipelines.set(u.pipeline,u),S=y.setTexture2D(l.glTexture,u);y.batchTexture(u,l.glTexture,v,d,u.x,u.y,v/u.style.resolution,d/u.style.resolution,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.displayOriginX,u.displayOriginY,0,0,v,d,g(u.tintTopLeft,h.alpha*u._alphaTL),g(u.tintTopRight,h.alpha*u._alphaTR),g(u.tintBottomLeft,h.alpha*u._alphaBL),g(u.tintBottomRight,h.alpha*u._alphaBR),u.tintFill,0,0,h,s,!1,S)}};o.exports=x},20839:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(83419),c=e(31401),u=e(95643),h=e(98439),s=e(68703),l=e(56295),v=e(45650),d=e(26099),g=8,y=new x({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,l],initialize:function(T,w,P,A,R,I,M){var L=T.sys.renderer;u.call(this,T,"TileSprite");var N=T.sys.textures.get(I),G=N.get(M);G.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),N=T.sys.textures.get("__MISSING"),G=N.get()),N.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),N=T.sys.textures.get("__MISSING"),G=N.get()),!A||!R?(A=A||G.width,R=R||G.height):(A=Math.floor(A),R=Math.floor(R)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=L,this.canvas=a.create(this,A,R),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=N,this.displayFrame=G,this._crop=this.resetCropObject(),this._textureKey=v(),this.texture=T.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=h(G.width),this.potHeight=h(G.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(w,P),this.setSize(A,R),this.setFrame(M),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(S,T){return this.displayTexture=this.scene.sys.textures.get(S),this.setFrame(T)},setFrame:function(S){var T=this.displayTexture.get(S);return this.potWidth=h(T.width),this.potHeight=h(T.height),this.canvas.width=0,!T.cutWidth||!T.cutHeight?this.renderFlags&=-9:this.renderFlags|=g,this.displayFrame=T,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(S,T){return S!==void 0&&(this.tilePositionX=S),T!==void 0&&(this.tilePositionY=T),this},setTileScale:function(S,T){return S===void 0&&(S=this.tileScaleX),T===void 0&&(T=S),this.tileScaleX=S,this.tileScaleY=T,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var S=this.displayFrame;if(S.source.isRenderTexture||S.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var T=this.fillContext,w=this.fillCanvas,P=this.potWidth,A=this.potHeight;(!this.renderer||!this.renderer.gl)&&(P=S.cutWidth,A=S.cutHeight),T.clearRect(0,0,P,A),w.width=P,w.height=A,T.drawImage(S.source.image,S.cutX,S.cutY,S.cutWidth,S.cutHeight,0,0,P,A),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(w,this.fillPattern):this.fillPattern=T.createPattern(w,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var S=this.canvas;if((S.width!==this.width||S.height!==this.height)&&(S.width=this.width,S.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var T=this.context;this.scene.sys.game.config.antialias||s.disable(T);var w=this._tileScale.x,P=this._tileScale.y,A=this._tilePosition.x,R=this._tilePosition.y;T.clearRect(0,0,this.width,this.height),T.save(),T.scale(w,P),T.translate(-A,-R),T.fillStyle=this.fillPattern,T.fillRect(A,R,this.width/w,this.height/P),T.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var S=this.texture;S&&S.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(S){this._tilePosition.x=S,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(S){this._tilePosition.y=S,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(S){this._tileScale.x=S,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(S){this._tileScale.y=S,this.dirty=!0}}});o.exports=y},46992:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a.updateCanvas(),x.addToRenderList(a),e.batchSprite(a,a.frame,x,c)};o.exports=E},14167:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(20839);x.register("tileSprite",function(h,s){h===void 0&&(h={});var l=c(h,"x",0),v=c(h,"y",0),d=c(h,"width",512),g=c(h,"height",512),y=c(h,"key",""),S=c(h,"frame",""),T=new u(this.scene,l,v,d,g,y,S);return s!==void 0&&(h.add=s),a(this.scene,T,h),T})},91681:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20839),x=e(39429);x.register("tileSprite",function(c,u,h,s,l,v){return this.displayList.add(new a(this.scene,c,u,h,s,l,v))})},56295:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(18553),c=e(46992),o.exports={renderWebGL:x,renderCanvas:c}},18553:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(c,u,h,s){u.updateCanvas();var l=u.width,v=u.height;if(!(l===0||v===0)){h.addToRenderList(u);var d=a.getTintAppendFloatAlpha,g=c.pipelines.set(u.pipeline,u),y=g.setTexture2D(u.fillPattern,u);g.batchTexture(u,u.fillPattern,u.displayFrame.width*u.tileScaleX,u.displayFrame.height*u.tileScaleY,u.x,u.y,l,v,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.originX*l,u.originY*v,0,0,l,v,d(u.tintTopLeft,h.alpha*u._alphaTL),d(u.tintTopRight,h.alpha*u._alphaTR),d(u.tintBottomLeft,h.alpha*u._alphaBL),d(u.tintBottomRight,h.alpha*u._alphaBR),u.tintFill,u.tilePositionX%u.displayFrame.width/u.displayFrame.width,u.tilePositionY%u.displayFrame.height/u.displayFrame.height,h,s,!1,y)}};o.exports=x},18471:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(31401),u=e(51708),h=e(8443),s=e(95643),l=e(36383),v=e(14463),d=e(45650),g=e(10247),y=new x({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.TextureCrop,c.Tint,c.Transform,c.Visible,g],initialize:function(T,w,P,A){s.call(this,T,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=d(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var R=T.sys.game;this._device=R.device.video,this.setPosition(w,P),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),R.events.on(h.PAUSE,this.globalPause,this),R.events.on(h.RESUME,this.globalResume,this);var I=T.sys.sound;I&&I.on(v.GLOBAL_MUTE,this.globalMute,this),A&&this.load(A)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(S){var T=this.scene.sys.cache.video.get(S);return T?(this.cacheKey=S,this.loadHandler(T.url,T.noAudio,T.crossOrigin)):console.warn("No video in cache for key: "+S),this},changeSource:function(S,T,w,P,A){T===void 0&&(T=!0),w===void 0&&(w=!1),this.cacheKey!==S&&(this.load(S),T&&this.play(w,P,A))},getVideoKey:function(){return this.cacheKey},loadURL:function(S,T,w){T===void 0&&(T=!1);var P=this._device.getVideoURL(S);return P?(this.cacheKey="",this.loadHandler(P.url,T,w)):console.warn("No supported video format found for "+S),this},loadMediaStream:function(S,T,w){return this.loadHandler(null,T,w,S)},loadHandler:function(S,T,w,P){T||(T=!1);var A=this.video;if(A?(this.removeLoadEventHandlers(),this.stop()):(A=document.createElement("video"),A.controls=!1,A.setAttribute("playsinline","playsinline"),A.setAttribute("preload","auto"),A.setAttribute("disablePictureInPicture","true")),T?(A.muted=!0,A.defaultMuted=!0,A.setAttribute("autoplay","autoplay")):(A.muted=!1,A.defaultMuted=!1,A.removeAttribute("autoplay")),w?A.setAttribute("crossorigin",w):A.removeAttribute("crossorigin"),P)if("srcObject"in A)try{A.srcObject=P}catch(I){if(I.name!=="TypeError")throw I;A.src=URL.createObjectURL(P)}else A.src=URL.createObjectURL(P);else A.src=S;this.retry=0,this.video=A,this._playCalled=!1,A.load(),this.addLoadEventHandlers();var R=this.scene.sys.textures.get(this._key);return this.setTexture(R),this},requestVideoFrame:function(S,T){var w=this.video;if(w){var P=T.width,A=T.height,R=this.videoTexture,I=this.videoTextureSource,M=!R||I.source!==w;M?(this._codePaused=w.paused,this._codeMuted=w.muted,R?(I.source=w,I.width=P,I.height=A,R.get().setSize(P,A)):(R=this.scene.sys.textures.create(this._key,w,P,A),R.add("__BASE",0,0,0,P,A),this.setTexture(R),this.videoTexture=R,this.videoTextureSource=R.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,R)),this.setSizeToFrame(),this.updateDisplayOrigin()):I.update(),this.isStalled=!1,this.metadata=T;var L=T.mediaTime;M&&(this._lastUpdate=L,this.emit(u.VIDEO_CREATED,this,P,A),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?L>=this._markerOut&&(w.loop?(w.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):L<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=L,this._getFrame?(this.removeEventHandlers(),w.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(S,T,w){T===void 0&&(T=-1),w===void 0&&(w=l.MAX_SAFE_INTEGER);var P=this.video;return!P||this.isPlaying()?(P||console.warn("Video not loaded"),this):(S===void 0&&(S=P.loop),P.loop=S,this._markerIn=T,this._markerOut=w,this._playingMarker=T>-1&&w>T&&w<l.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=P.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var S=this.video;return!S||this.isPlaying()?(S||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=S.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var S=this.video;S&&(S.addEventListener("error",this._loadCallbackHandler),S.addEventListener("abort",this._loadCallbackHandler),S.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var S=this.video;S&&(S.removeEventListener("error",this._loadCallbackHandler),S.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var S=this.video;if(S){var T=this._callbacks;for(var w in T)S.addEventListener(w,T[w])}},removeEventHandlers:function(){var S=this.video;if(S){var T=this._callbacks;for(var w in T)S.removeEventListener(w,T[w])}},createPlayPromise:function(S){S===void 0&&(S=!0);var T=this.video,w=T.play();if(w!==void 0){var P=this.playSuccess.bind(this),A=this.playError.bind(this);if(!S){var R=this;A=function(){R.failedPlayAttempts++}}w.then(P).catch(A)}else T.addEventListener("playing",this._callbacks.legacy),S||this.failedPlayAttempts++},addMarker:function(S,T,w){return!isNaN(T)&&T>=0&&!isNaN(w)&&w>T&&(this.markers[S]=[T,w]),this},playMarker:function(S,T){var w=this.markers[S];return w&&this.play(T,w[0],w[1]),this},removeMarker:function(S){return delete this.markers[S],this},snapshot:function(S,T){return S===void 0&&(S=this.width),T===void 0&&(T=this.height),this.snapshotArea(0,0,this.width,this.height,S,T)},snapshotArea:function(S,T,w,P,A,R){S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=this.width),P===void 0&&(P=this.height),A===void 0&&(A=w),R===void 0&&(R=P);var I=this.video,M=this.snapshotTexture;return M?(M.setSize(A,R),I&&M.context.drawImage(I,S,T,w,P,0,0,A,R)):(M=this.scene.sys.textures.createCanvas(d(),A,R),this.snapshotTexture=M,I&&M.context.drawImage(I,S,T,w,P,0,0,A,R)),M.update()},saveSnapshotTexture:function(S){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,S):this.snapshotTexture=this.scene.sys.textures.createCanvas(S,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var S=this.scene.sys.sound;S&&S.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(S){var T=S.name;T==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):T==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,S)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,S))},legacyPlayHandler:function(){var S=this.video;S&&(this.playSuccess(),S.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(S){this.stop(!1),this.emit(u.VIDEO_ERROR,this,S)},metadataHandler:function(S){this.emit(u.VIDEO_METADATA,this,S)},setSizeToFrame:function(S){S||(S=this.frame),this.width=S.realWidth,this.height=S.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var T=this.input;return T&&!T.customHitArea&&(T.hitArea.width=this.width,T.hitArea.height=this.height),this},stalledHandler:function(S){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,S)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(S,T){var w=this.video;!w||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=T,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(S){var T=this.video;if(T){var w=T.duration;if(w!==1/0&&!isNaN(w)){var P=w*S;this.setCurrentTime(P)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(S){var T=this.video;if(T){if(typeof S=="string"){var w=S[0],P=parseFloat(S.substr(1));w==="+"?S=T.currentTime+P:w==="-"&&(S=T.currentTime-P)}T.currentTime=S}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var S=this.video;if(S){var T=S.duration;if(T!==1/0&&!isNaN(T))return S.currentTime/T}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(S){S===void 0&&(S=!0),this._codeMuted=S;var T=this.video;return T&&(T.muted=this._systemMuted?!0:S),this},isMuted:function(){return this._codeMuted},globalMute:function(S,T){this._systemMuted=T;var w=this.video;w&&(w.muted=this._codeMuted?!0:T)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(S){S===void 0&&(S=!0);var T=this.video;return this._codePaused=S,T&&!T.ended&&(S?T.paused||(this.removeEventHandlers(),T.pause()):S||(this._playCalled?T.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(S){return S===void 0&&(S=1),this.video&&(this.video.volume=a(S,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(S){return this.video&&(this.video.playbackRate=S),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(S){return S===void 0&&(S=!0),this.video&&(this.video.loop=S),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(S,T){return T===void 0&&(T=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,S),this.videoTextureSource.setFlipY(T)),this._key=S,this.flipY=T,!!this.videoTexture},stop:function(S){S===void 0&&(S=!0);var T=this.video;return T&&(this.removeEventHandlers(),T.cancelVideoFrameCallback(this._rfvCallbackId),T.pause()),this.retry=0,this._playCalled=!1,S&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var S=this.video;if(S){for(S.parentNode&&S.parentNode.removeChild(S);S.hasChildNodes();)S.removeChild(S.firstChild);S.removeAttribute("autoplay"),S.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var S=this.scene.sys.game.events;S.off(h.PAUSE,this.globalPause,this),S.off(h.RESUME,this.globalResume,this);var T=this.scene.sys.sound;T&&T.off(v.GLOBAL_MUTE,this.globalMute,this)}});o.exports=y},58352:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a.videoTexture&&(x.addToRenderList(a),e.batchSprite(a,a.frame,x,c))};o.exports=E},11511:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),c=e(23568),u=e(18471);x.register("video",function(h,s){h===void 0&&(h={});var l=c(h,"key",null),v=new u(this.scene,0,0,l);return s!==void 0&&(h.add=s),a(this.scene,v,h),v})},89025:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18471),x=e(39429);x.register("video",function(c,u,h){return this.displayList.add(new a(this.scene,c,u,h))})},10247:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(29849),c=e(58352),o.exports={renderWebGL:x,renderCanvas:c}},29849:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a.videoTexture&&(x.addToRenderList(a),a.pipeline.batchSprite(a,x,c))};o.exports=E},41481:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(96503),c=e(87902),u=e(83419),h=e(31401),s=e(95643),l=e(87841),v=e(37303),d=new u({Extends:s,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(y,S,T,w,P){w===void 0&&(w=1),P===void 0&&(P=w),s.call(this,y,"Zone"),this.setPosition(S,T),this.width=w,this.height=P,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(g){this.scaleX=g/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(g){this.scaleY=g/this.height}},setSize:function(g,y,S){S===void 0&&(S=!0),this.width=g,this.height=y,this.updateDisplayOrigin();var T=this.input;return S&&T&&!T.customHitArea&&(T.hitArea.width=g,T.hitArea.height=y),this},setDisplaySize:function(g,y){return this.displayWidth=g,this.displayHeight=y,this},setCircleDropZone:function(g){return this.setDropZone(new x(0,0,g),c)},setRectangleDropZone:function(g,y){return this.setDropZone(new l(0,0,g,y),v)},setDropZone:function(g,y){return this.input||this.setInteractive(g,y,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(g,y,S){S.addToRenderList(y)},renderWebGL:function(g,y,S){S.addToRenderList(y)}});o.exports=d},95261:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(23568),c=e(41481);a.register("zone",function(u){var h=x(u,"x",0),s=x(u,"y",0),l=x(u,"width",1),v=x(u,"height",l);return new c(this.scene,h,s,l,v)})},84175:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41481),x=e(39429);x.register("zone",function(c,u,h,s){return this.displayList.add(new a(this.scene,c,u,h,s))})},95166:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};o.exports=E},96503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(87902),c=e(26241),u=e(79124),h=e(23777),s=e(28176),l=new a({initialize:function(d,g,y){d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),this.type=h.CIRCLE,this.x=d,this.y=g,this._radius=y,this._diameter=y*2},contains:function(v,d){return x(this,v,d)},getPoint:function(v,d){return c(this,v,d)},getPoints:function(v,d,g){return u(this,v,d,g)},getRandomPoint:function(v){return s(this,v)},setTo:function(v,d,g){return this.x=v,this.y=d,this._radius=g,this._diameter=g*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});o.exports=l},71562:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 2*(Math.PI*e.radius)};o.exports=E},92110:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h){return h===void 0&&(h=new a),h.x=c.x+c.radius*Math.cos(u),h.y=c.y+c.radius*Math.sin(u),h};o.exports=x},42250:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=function(c){return new a(c.x,c.y,c.radius)};o.exports=x},87902:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(e.radius>0&&a>=e.left&&a<=e.right&&x>=e.top&&x<=e.bottom){var c=(e.x-a)*(e.x-a),u=(e.y-x)*(e.y-x);return c+u<=e.radius*e.radius}else return!1};o.exports=E},5698:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=function(c,u){return a(c,u.x,u.y)};o.exports=x},70588:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=function(c,u){return a(c,u.x,u.y)&&a(c,u.right,u.y)&&a(c,u.x,u.bottom)&&a(c,u.right,u.bottom)};o.exports=x},26394:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.radius)};o.exports=E},76278:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.radius===a.radius};o.exports=E},2074:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u){return u===void 0&&(u=new a),u.x=c.left,u.y=c.top,u.width=c.diameter,u.height=c.diameter,u};o.exports=x},26241:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92110),x=e(62945),c=e(36383),u=e(2141),h=function(s,l,v){v===void 0&&(v=new u);var d=x(l,0,c.PI2);return a(s,d,v)};o.exports=h},79124:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71562),x=e(92110),c=e(62945),u=e(36383),h=function(s,l,v,d){d===void 0&&(d=[]),!l&&v>0&&(l=a(s)/v);for(var g=0;g<l;g++){var y=c(g/l,0,u.PI2);d.push(x(s,y))}return d};o.exports=h},50884:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E},39212:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E},28176:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){u===void 0&&(u=new a);var h=2*Math.PI*Math.random(),s=Math.random()+Math.random(),l=s>1?2-s:s,v=l*Math.cos(h),d=l*Math.sin(h);return u.x=c.x+v*c.radius,u.y=c.y+d*c.radius,u};o.exports=x},88911:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503);a.Area=e(95166),a.Circumference=e(71562),a.CircumferencePoint=e(92110),a.Clone=e(42250),a.Contains=e(87902),a.ContainsPoint=e(5698),a.ContainsRect=e(70588),a.CopyFrom=e(26394),a.Equals=e(76278),a.GetBounds=e(2074),a.GetPoint=e(26241),a.GetPoints=e(79124),a.Offset=e(50884),a.OffsetPoint=e(39212),a.Random=e(28176),o.exports=a},23777:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};o.exports=E},78874:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};o.exports=E},92990:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.width/2,x=e.height/2,c=Math.pow(a-x,2)/Math.pow(a+x,2);return Math.PI*(a+x)*(1+3*c/(10+Math.sqrt(4-3*c)))};o.exports=E},79522:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h){h===void 0&&(h=new a);var s=c.width/2,l=c.height/2;return h.x=c.x+s*Math.cos(u),h.y=c.y+l*Math.sin(u),h};o.exports=x},58102:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497),x=function(c){return new a(c.x,c.y,c.width,c.height)};o.exports=x},81154:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(e.width<=0||e.height<=0)return!1;var c=(a-e.x)/e.width,u=(x-e.y)/e.height;return c*=c,u*=u,c+u<.25};o.exports=E},46662:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),x=function(c,u){return a(c,u.x,u.y)};o.exports=x},1632:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),x=function(c,u){return a(c,u.x,u.y)&&a(c,u.right,u.y)&&a(c,u.x,u.bottom)&&a(c,u.right,u.bottom)};o.exports=x},65534:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};o.exports=E},8497:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(81154),c=e(90549),u=e(48320),h=e(23777),s=e(24820),l=new a({initialize:function(d,g,y,S){d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),this.type=h.ELLIPSE,this.x=d,this.y=g,this.width=y,this.height=S},contains:function(v,d){return x(this,v,d)},getPoint:function(v,d){return c(this,v,d)},getPoints:function(v,d,g){return u(this,v,d,g)},getRandomPoint:function(v){return s(this,v)},setTo:function(v,d,g,y){return this.x=v,this.y=d,this.width=g,this.height=y,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},setSize:function(v,d){return d===void 0&&(d=v),this.width=v,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});o.exports=l},36146:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};o.exports=E},23694:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u){return u===void 0&&(u=new a),u.x=c.left,u.y=c.top,u.width=c.width,u.height=c.height,u};o.exports=x},90549:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79522),x=e(62945),c=e(36383),u=e(2141),h=function(s,l,v){v===void 0&&(v=new u);var d=x(l,0,c.PI2);return a(s,d,v)};o.exports=h},48320:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92990),x=e(79522),c=e(62945),u=e(36383),h=function(s,l,v,d){d===void 0&&(d=[]),!l&&v>0&&(l=a(s)/v);for(var g=0;g<l;g++){var y=c(g/l,0,u.PI2);d.push(x(s,y))}return d};o.exports=h},73424:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E},44808:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E},24820:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){u===void 0&&(u=new a);var h=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return u.x=c.x+s*Math.cos(h)*c.width/2,u.y=c.y+s*Math.sin(h)*c.height/2,u};o.exports=x},49203:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497);a.Area=e(78874),a.Circumference=e(92990),a.CircumferencePoint=e(79522),a.Clone=e(58102),a.Contains=e(81154),a.ContainsPoint=e(46662),a.ContainsRect=e(1632),a.CopyFrom=e(65534),a.Equals=e(36146),a.GetBounds=e(23694),a.GetPoint=e(90549),a.GetPoints=e(48320),a.Offset=e(73424),a.OffsetPoint=e(44808),a.Random=e(24820),o.exports=a},55738:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23777),x=e(79291),c={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};c=x(!1,c,a),o.exports=c},2044:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20339),x=function(c,u){return a(c.x,c.y,u.x,u.y)<=c.radius+u.radius};o.exports=x},81491:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=a.width/2,c=a.height/2,u=Math.abs(e.x-a.x-x),h=Math.abs(e.y-a.y-c),s=x+e.radius,l=c+e.radius;if(u>s||h>l)return!1;if(u<=x||h<=c)return!0;var v=u-x,d=h-c,g=v*v,y=d*d,S=e.radius*e.radius;return g+y<=S};o.exports=E},63376:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(2044),c=function(u,h,s){if(s===void 0&&(s=[]),x(u,h)){var l=u.x,v=u.y,d=u.radius,g=h.x,y=h.y,S=h.radius,T,w,P,A,R;if(v===y)R=(S*S-d*d-g*g+l*l)/(2*(l-g)),T=1,w=-2*y,P=g*g+R*R-2*g*R+y*y-S*S,A=w*w-4*T*P,A===0?s.push(new a(R,-w/(2*T))):A>0&&(s.push(new a(R,(-w+Math.sqrt(A))/(2*T))),s.push(new a(R,(-w-Math.sqrt(A))/(2*T))));else{var I=(l-g)/(v-y),M=(S*S-d*d-g*g+l*l-y*y+v*v)/(2*(v-y));T=I*I+1,w=2*v*I-2*M*I-2*l,P=l*l+v*v+M*M-d*d-2*v*M,A=w*w-4*T*P,A===0?(R=-w/(2*T),s.push(new a(R,M-R*I))):A>0&&(R=(-w+Math.sqrt(A))/(2*T),s.push(new a(R,M-R*I)),R=(-w-Math.sqrt(A))/(2*T),s.push(new a(R,M-R*I)))}}return s};o.exports=c},97439:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),x=e(81491),c=function(u,h,s){if(s===void 0&&(s=[]),x(u,h)){var l=h.getLineA(),v=h.getLineB(),d=h.getLineC(),g=h.getLineD();a(l,u,s),a(v,u,s),a(d,u,s),a(g,u,s)}return s};o.exports=c},4042:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(80462),c=function(u,h,s){if(s===void 0&&(s=[]),x(u,h)){var l=u.x1,v=u.y1,d=u.x2,g=u.y2,y=h.x,S=h.y,T=h.radius,w=d-l,P=g-v,A=l-y,R=v-S,I=w*w+P*P,M=2*(w*A+P*R),L=A*A+R*R-T*T,N=M*M-4*I*L,G,D;if(N===0){var B=-M/(2*I);G=l+B*w,D=v+B*P,B>=0&&B<=1&&s.push(new a(G,D))}else if(N>0){var $=(-M-Math.sqrt(N))/(2*I);G=l+$*w,D=v+$*P,$>=0&&$<=1&&s.push(new a(G,D));var k=(-M+Math.sqrt(N))/(2*I);G=l+k*w,D=v+k*P,k>=0&&k<=1&&s.push(new a(G,D))}}return s};o.exports=c},36100:(o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=function(c,u,h,s){h===void 0&&(h=!1);var l=c.x1,v=c.y1,d=c.x2,g=c.y2,y=u.x1,S=u.y1,T=u.x2,w=u.y2,P=d-l,A=g-v,R=T-y,I=w-S,M=P*I-A*R;if(M===0)return null;var L,N,G;if(h){if(L=(P*(S-v)+A*(l-y))/(R*A-I*P),P!==0)N=(y+R*L-l)/P;else if(A!==0)N=(S+I*L-v)/A;else return null;if(N<0||L<0||L>1)return null;G=N}else{if(L=((y-l)*I-(S-v)*R)/M,N=((v-S)*P-(l-y)*A)/M,L<0||L>1||N<0||N>1)return null;G=L}return s===void 0&&(s=new a),s.set(l+P*G,v+A*G,G)};o.exports=x},3073:(o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36100),x=e(23031),c=e(25836),u=new x,h=new c,s=function(l,v,d,g){d===void 0&&(d=!1),g===void 0&&(g=new c);var y=!1;g.set(),h.set();for(var S=v[v.length-1],T=0;T<v.length;T++){var w=v[T];u.setTo(S.x,S.y,w.x,w.y),S=w,a(l,u,d,h)&&(!y||h.z<g.z)&&(g.copy(h),y=!0)}return y?g:null};o.exports=s},56362:(o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=e(61369),c=e(3073),u=new a,h=function(s,l,v,d){d===void 0&&(d=new x),Array.isArray(l)||(l=[l]);var g=!1;d.set(),u.set();for(var y=0;y<l.length;y++)c(s,l[y].points,v,u)&&(!g||u.z<d.z)&&(d.set(u.x,u.y,u.z,y),g=!0);return g?d:null};o.exports=h},60646:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(76112),c=e(92773),u=function(h,s,l){if(l===void 0&&(l=[]),c(h,s))for(var v=s.getLineA(),d=s.getLineB(),g=s.getLineC(),y=s.getLineD(),S=[new a,new a,new a,new a],T=[x(v,h,S[0]),x(d,h,S[1]),x(g,h,S[2]),x(y,h,S[3])],w=0;w<4;w++)T[w]&&l.push(S[w]);return l};o.exports=u},71147:(o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61369),x=e(56362),c=e(23031),u=new c;function h(v,d,g,y,S){var T=Math.cos(v),w=Math.sin(v);u.setTo(d,g,d+T,g+w);var P=x(u,y,!0);P&&S.push(new a(P.x,P.y,v,P.w))}function s(v,d){return v.z-d.z}var l=function(v,d,g){Array.isArray(g)||(g=[g]);for(var y=[],S=[],T=0;T<g.length;T++)for(var w=g[T].points,P=0;P<w.length;P++){var A=Math.atan2(w[P].y-d,w[P].x-v);S.indexOf(A)===-1&&(h(A,v,d,g,y),h(A-1e-5,v,d,g,y),h(A+1e-5,v,d,g,y),S.push(A))}return y.sort(s)};o.exports=l},68389:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(59996),c=function(u,h,s){return s===void 0&&(s=new a),x(u,h)&&(s.x=Math.max(u.x,h.x),s.y=Math.max(u.y,h.y),s.width=Math.min(u.right,h.right)-s.x,s.height=Math.min(u.bottom,h.bottom)-s.y),s};o.exports=c},52784:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60646),x=e(59996),c=function(u,h,s){if(s===void 0&&(s=[]),x(u,h)){var l=u.getLineA(),v=u.getLineB(),d=u.getLineC(),g=u.getLineD();a(l,h,s),a(v,h,s),a(d,h,s),a(g,h,s)}return s};o.exports=c},26341:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89265),x=e(60646),c=function(u,h,s){if(s===void 0&&(s=[]),a(u,h)){var l=h.getLineA(),v=h.getLineB(),d=h.getLineC();x(l,u,s),x(v,u,s),x(d,u,s)}return s};o.exports=c},38720:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),x=e(67636),c=function(u,h,s){if(s===void 0&&(s=[]),x(u,h)){var l=u.getLineA(),v=u.getLineB(),d=u.getLineC();a(l,h,s),a(v,h,s),a(d,h,s)}return s};o.exports=c},13882:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(2822),c=e(76112),u=function(h,s,l){if(l===void 0&&(l=[]),x(h,s))for(var v=h.getLineA(),d=h.getLineB(),g=h.getLineC(),y=[new a,new a,new a],S=[c(v,s,y[0]),c(d,s,y[1]),c(g,s,y[2])],T=0;T<3;T++)S[T]&&l.push(y[T]);return l};o.exports=u},75636:(o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82944),x=e(13882),c=function(u,h,s){if(s===void 0&&(s=[]),a(u,h)){var l=h.getLineA(),v=h.getLineB(),d=h.getLineC();x(u,l,s),x(u,v,s),x(u,d,s)}return s};o.exports=c},80462:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=e(2141),c=new x,u=function(h,s,l){if(l===void 0&&(l=c),a(s,h.x1,h.y1))return l.x=h.x1,l.y=h.y1,!0;if(a(s,h.x2,h.y2))return l.x=h.x2,l.y=h.y2,!0;var v=h.x2-h.x1,d=h.y2-h.y1,g=s.x-h.x1,y=s.y-h.y1,S=v*v+d*d,T=v,w=d;if(S>0){var P=(g*v+y*d)/S;T*=P,w*=P}l.x=h.x1+T,l.y=h.y1+w;var A=T*T+w*w;return A<=S&&T*v+w*d>=0&&a(s,l.x,l.y)};o.exports=u},76112:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=e.x1,u=e.y1,h=e.x2,s=e.y2,l=a.x1,v=a.y1,d=a.x2,g=a.y2;if(c===h&&u===s||l===d&&v===g)return!1;var y=(g-v)*(h-c)-(d-l)*(s-u);if(y===0)return!1;var S=((d-l)*(u-v)-(g-v)*(c-l))/y,T=((h-c)*(u-v)-(s-u)*(c-l))/y;return S<0||S>1||T<0||T>1?!1:(x&&(x.x=c+S*(h-c),x.y=u+S*(s-u)),!0)};o.exports=E},92773:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x1,c=e.y1,u=e.x2,h=e.y2,s=a.x,l=a.y,v=a.right,d=a.bottom,g=0;if(x>=s&&x<=v&&c>=l&&c<=d||u>=s&&u<=v&&h>=l&&h<=d)return!0;if(x<s&&u>=s){if(g=c+(h-c)*(s-x)/(u-x),g>l&&g<=d)return!0}else if(x>v&&u<=v&&(g=c+(h-c)*(v-x)/(u-x),g>=l&&g<=d))return!0;if(c<l&&h>=l){if(g=x+(u-x)*(l-c)/(h-c),g>=s&&g<=v)return!0}else if(c>d&&h<=d&&(g=x+(u-x)*(d-c)/(h-c),g>=s&&g<=v))return!0;return!1};o.exports=E},16204:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=1);var c=a.x1,u=a.y1,h=a.x2,s=a.y2,l=e.x,v=e.y,d=(h-c)*(h-c)+(s-u)*(s-u);if(d===0)return!1;var g=((l-c)*(h-c)+(v-u)*(s-u))/d;if(g<0)return Math.sqrt((c-l)*(c-l)+(u-v)*(u-v))<=x;if(g>=0&&g<=1){var y=((u-v)*(h-c)-(c-l)*(s-u))/d;return Math.abs(y)*Math.sqrt(d)<=x}else return Math.sqrt((h-l)*(h-l)+(s-v)*(s-v))<=x};o.exports=E},14199:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16204),x=function(c,u){if(!a(c,u))return!1;var h=Math.min(u.x1,u.x2),s=Math.max(u.x1,u.x2),l=Math.min(u.y1,u.y2),v=Math.max(u.y1,u.y2);return c.x>=h&&c.x<=s&&c.y>=l&&c.y<=v};o.exports=x},59996:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.width<=0||e.height<=0||a.width<=0||a.height<=0?!1:!(e.right<a.x||e.bottom<a.y||e.x>a.right||e.y>a.bottom)};o.exports=E},89265:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),x=e(37303),c=e(48653),u=e(77493),h=function(s,l){if(l.left>s.right||l.right<s.left||l.top>s.bottom||l.bottom<s.top)return!1;var v=l.getLineA(),d=l.getLineB(),g=l.getLineC();if(x(s,v.x1,v.y1)||x(s,v.x2,v.y2)||x(s,d.x1,d.y1)||x(s,d.x2,d.y2)||x(s,g.x1,g.y1)||x(s,g.x2,g.y2))return!0;var y=s.getLineA(),S=s.getLineB(),T=s.getLineC(),w=s.getLineD();if(a(v,y)||a(v,S)||a(v,T)||a(v,w)||a(d,y)||a(d,S)||a(d,T)||a(d,w)||a(g,y)||a(g,S)||a(g,T)||a(g,w))return!0;var P=u(s),A=c(l,P,!0);return A.length>0};o.exports=h},84411:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h){return h===void 0&&(h=0),!(a>e.right+h||x<e.left-h||c>e.bottom+h||u<e.top-h)};o.exports=E},67636:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80462),x=e(10690),c=function(u,h){return u.left>h.right||u.right<h.left||u.top>h.bottom||u.bottom<h.top?!1:!!(x(u,h.x,h.y)||a(u.getLineA(),h)||a(u.getLineB(),h)||a(u.getLineC(),h))};o.exports=c},2822:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),x=function(c,u){return!!(c.contains(u.x1,u.y1)||c.contains(u.x2,u.y2)||a(c.getLineA(),u)||a(c.getLineB(),u)||a(c.getLineC(),u))};o.exports=x},82944:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48653),x=e(71694),c=e(76112),u=function(h,s){if(h.left>s.right||h.right<s.left||h.top>s.bottom||h.bottom<s.top)return!1;var l=h.getLineA(),v=h.getLineB(),d=h.getLineC(),g=s.getLineA(),y=s.getLineB(),S=s.getLineC();if(c(l,g)||c(l,y)||c(l,S)||c(v,g)||c(v,y)||c(v,S)||c(d,g)||c(d,y)||c(d,S))return!0;var T=x(h),w=a(s,T,!0);return w.length>0||(T=x(s),w=a(h,T,!0),w.length>0)};o.exports=u},91865:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}},91938:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};o.exports=E},84993:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=1),x===void 0&&(x=[]);var c=Math.round(e.x1),u=Math.round(e.y1),h=Math.round(e.x2),s=Math.round(e.y2),l=Math.abs(h-c),v=Math.abs(s-u),d=c<h?1:-1,g=u<s?1:-1,y=l-v;x.push({x:c,y:u});for(var S=1;!(c===h&&u===s);){var T=y<<1;T>-v&&(y-=v,c+=d),T<l&&(y+=l,u+=g),S%a===0&&x.push({x:c,y:u}),S++}return x};o.exports=E},36469:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=a-(e.x1+e.x2)/2,u=x-(e.y1+e.y2)/2;return e.x1+=c,e.y1+=u,e.x2+=c,e.y2+=u,e};o.exports=E},31116:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031),x=function(c){return new a(c.x1,c.y1,c.x2,c.y2)};o.exports=x},59944:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2)};o.exports=E},59220:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2};o.exports=E},78177:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=function(c,u,h){h===void 0&&(h=u);var s=a(c),l=c.x2-c.x1,v=c.y2-c.y1;return u&&(c.x1=c.x1-l/s*u,c.y1=c.y1-v/s*u),h&&(c.x2=c.x2+l/s*h,c.y2=c.y2+v/s*h),c};o.exports=x},26708:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),x=e(6113),c=e(2141),u=function(h,s,l,v,d){v===void 0&&(v=0),d===void 0&&(d=[]);var g=[],y=h.x1,S=h.y1,T=h.x2-y,w=h.y2-S,P=x(s,d),A,R,I=l-1;for(A=0;A<I;A++)R=P(A/I),g.push(new c(y+T*R,S+w*R));if(R=P(1),g.push(new c(y+T*R,S+w*R)),v>0){var M=g[0],L=[M];for(A=1;A<g.length-1;A++){var N=g[A];a(M,N)>=v&&(L.push(N),M=N)}var G=g[g.length-1];return a(M,G)<v&&L.pop(),L.push(G),L}else return g};o.exports=u},32125:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.x=(c.x1+c.x2)/2,u.y=(c.y1+c.y2)/2,u};o.exports=x},99569:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h){h===void 0&&(h=new a);var s=c.x1,l=c.y1,v=c.x2,d=c.y2,g=(v-s)*(v-s)+(d-l)*(d-l);if(g===0)return h;var y=((u.x-s)*(v-s)+(u.y-l)*(d-l))/g;return h.x=s+y*(v-s),h.y=l+y*(d-l),h};o.exports=x},34638:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),c=e(2141),u=function(h,s){s===void 0&&(s=new c);var l=x(h)-a.TAU;return s.x=Math.cos(l),s.y=Math.sin(l),s};o.exports=u},13151:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h){return h===void 0&&(h=new a),h.x=c.x1+(c.x2-c.x1)*u,h.y=c.y1+(c.y2-c.y1)*u,h};o.exports=x},15258:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(2141),c=function(u,h,s,l){l===void 0&&(l=[]),!h&&s>0&&(h=a(u)/s);for(var v=u.x1,d=u.y1,g=u.x2,y=u.y2,S=0;S<h;S++){var T=S/h,w=v+(g-v)*T,P=d+(y-d)*T;l.push(new x(w,P))}return l};o.exports=c},26408:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x1,c=e.y1,u=e.x2,h=e.y2,s=(u-x)*(u-x)+(h-c)*(h-c);if(s===0)return!1;var l=((c-a.y)*(u-x)-(x-a.x)*(h-c))/s;return Math.abs(l)*Math.sqrt(s)};o.exports=E},98770:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.abs(e.y1-e.y2)};o.exports=E},35001:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};o.exports=E},23031:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(13151),c=e(15258),u=e(23777),h=e(65822),s=e(26099),l=new a({initialize:function(d,g,y,S){d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),this.type=u.LINE,this.x1=d,this.y1=g,this.x2=y,this.y2=S},getPoint:function(v,d){return x(this,v,d)},getPoints:function(v,d,g){return c(this,v,d,g)},getRandomPoint:function(v){return h(this,v)},setTo:function(v,d,g,y){return v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),this.x1=v,this.y1=d,this.x2=g,this.y2=y,this},setFromObjects:function(v,d){return this.x1=v.x,this.y1=v.y,this.x2=d.x,this.y2=d.y,this},getPointA:function(v){return v===void 0&&(v=new s),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new s),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});o.exports=l},64795:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(15994),c=e(91938),u=function(h){var s=c(h)-a.TAU;return x(s,-Math.PI,Math.PI)};o.exports=u},52616:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),c=function(u){return Math.cos(x(u)-a.TAU)};o.exports=c},87231:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),c=function(u){return Math.sin(x(u)-a.TAU)};o.exports=c},89662:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x1+=a,e.y1+=x,e.x2+=a,e.y2+=x,e};o.exports=E},71165:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};o.exports=E},65822:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){u===void 0&&(u=new a);var h=Math.random();return u.x=c.x1+h*(c.x2-c.x1),u.y=c.y1+h*(c.y2-c.y1),u};o.exports=x},69777:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91938),x=e(64795),c=function(u,h){return 2*x(h)-Math.PI-a(u)};o.exports=c},39706:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),x=function(c,u){var h=(c.x1+c.x2)/2,s=(c.y1+c.y2)/2;return a(c,h,s,u)};o.exports=x},82585:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),x=function(c,u,h){return a(c,u.x,u.y,h)};o.exports=x},64400:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=Math.cos(c),h=Math.sin(c),s=e.x1-a,l=e.y1-x;return e.x1=s*u-l*h+a,e.y1=s*h+l*u+x,s=e.x2-a,l=e.y2-x,e.x2=s*u-l*h+a,e.y2=s*h+l*u+x,e};o.exports=E},62377:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){return e.x1=a,e.y1=x,e.x2=a+Math.cos(c)*u,e.y2=x+Math.sin(c)*u,e};o.exports=E},71366:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};o.exports=E},10809:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.abs(e.x1-e.x2)};o.exports=E},2529:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031);a.Angle=e(91938),a.BresenhamPoints=e(84993),a.CenterOn=e(36469),a.Clone=e(31116),a.CopyFrom=e(59944),a.Equals=e(59220),a.Extend=e(78177),a.GetEasedPoints=e(26708),a.GetMidPoint=e(32125),a.GetNearestPoint=e(99569),a.GetNormal=e(34638),a.GetPoint=e(13151),a.GetPoints=e(15258),a.GetShortestDistance=e(26408),a.Height=e(98770),a.Length=e(35001),a.NormalAngle=e(64795),a.NormalX=e(52616),a.NormalY=e(87231),a.Offset=e(89662),a.PerpSlope=e(71165),a.Random=e(65822),a.ReflectAngle=e(69777),a.Rotate=e(39706),a.RotateAroundPoint=e(82585),a.RotateAroundXY=e(64400),a.SetToAngle=e(62377),a.Slope=e(71366),a.Width=e(10809),o.exports=a},83997:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(87841),c=e(26099);function u(s,l,v,d){var g=s-v,y=l-d,S=g*g+y*y;return Math.sqrt(S)}var h=new a({initialize:function(l,v,d){this.vertex1=l,this.vertex2=v,this.vertex3=d,this.bounds=new x,this._inCenter=new c},getInCenter:function(s){s===void 0&&(s=!0);var l=this.vertex1,v=this.vertex2,d=this.vertex3,g,y,S,T,w,P;s?(g=l.x,y=l.y,S=v.x,T=v.y,w=d.x,P=d.y):(g=l.vx,y=l.vy,S=v.vx,T=v.vy,w=d.vx,P=d.vy);var A=u(w,P,S,T),R=u(g,y,w,P),I=u(S,T,g,y),M=A+R+I;return this._inCenter.set((g*A+S*R+w*I)/M,(y*A+T*R+P*I)/M)},contains:function(s,l,v){var d=this.vertex1,g=this.vertex2,y=this.vertex3,S=d.vx,T=d.vy,w=g.vx,P=g.vy,A=y.vx,R=y.vy;if(v){var I=v.a,M=v.b,L=v.c,N=v.d,G=v.e,D=v.f;S=d.vx*I+d.vy*L+G,T=d.vx*M+d.vy*N+D,w=g.vx*I+g.vy*L+G,P=g.vx*M+g.vy*N+D,A=y.vx*I+y.vy*L+G,R=y.vx*M+y.vy*N+D}var B=A-S,$=R-T,k=w-S,X=P-T,Y=s-S,Z=l-T,Q=B*B+$*$,j=B*k+$*X,K=B*Y+$*Z,W=k*k+X*X,V=k*Y+X*Z,J=Q*W-j*j,ee=J===0?0:1/J,te=(W*K-j*V)*ee,ne=(Q*V-j*K)*ee;return te>=0&&ne>=0&&te+ne<1},isCounterClockwise:function(s){var l=this.vertex1,v=this.vertex2,d=this.vertex3,g=(v.vx-l.vx)*(d.vy-l.vy)-(v.vy-l.vy)*(d.vx-l.vx);return s<=0?g>=0:g<0},load:function(s,l,v,d,g){return v=this.vertex1.load(s,l,v,d,g),v=this.vertex2.load(s,l,v,d,g),v=this.vertex3.load(s,l,v,d,g),v},transformCoordinatesLocal:function(s,l,v,d){return this.vertex1.transformCoordinatesLocal(s,l,v,d),this.vertex2.transformCoordinatesLocal(s,l,v,d),this.vertex3.transformCoordinatesLocal(s,l,v,d),this},updateBounds:function(){var s=this.vertex1,l=this.vertex2,v=this.vertex3,d=this.bounds;return d.x=Math.min(s.vx,l.vx,v.vx),d.y=Math.min(s.vy,l.vy,v.vy),d.width=Math.max(s.vx,l.vx,v.vx)-d.x,d.height=Math.max(s.vy,l.vy,v.vy)-d.y,this},isInView:function(s,l,v,d,g,y,S,T,w,P,A){this.update(d,g,y,S,T,w,P,A);var R=this.vertex1,I=this.vertex2,M=this.vertex3;if(R.ta<=0&&I.ta<=0&&M.ta<=0||l&&!this.isCounterClockwise(v))return!1;var L=this.bounds;L.x=Math.min(R.tx,I.tx,M.tx),L.y=Math.min(R.ty,I.ty,M.ty),L.width=Math.max(R.tx,I.tx,M.tx)-L.x,L.height=Math.max(R.ty,I.ty,M.ty)-L.y;var N=s.x+s.width,G=s.y+s.height;return L.width<=0||L.height<=0||s.width<=0||s.height<=0?!1:!(L.right<s.x||L.bottom<s.y||L.x>N||L.y>G)},scrollUV:function(s,l){return this.vertex1.scrollUV(s,l),this.vertex2.scrollUV(s,l),this.vertex3.scrollUV(s,l),this},scaleUV:function(s,l){return this.vertex1.scaleUV(s,l),this.vertex2.scaleUV(s,l),this.vertex3.scaleUV(s,l),this},setColor:function(s){return this.vertex1.color=s,this.vertex2.color=s,this.vertex3.color=s,this},update:function(s,l,v,d,g,y,S,T){return this.vertex1.update(l,v,d,g,y,S,T,s),this.vertex2.update(l,v,d,g,y,S,T,s),this.vertex3.update(l,v,d,g,y,S,T,s),this},translate:function(s,l){l===void 0&&(l=0);var v=this.vertex1,d=this.vertex2,g=this.vertex3;return v.x+=s,v.y+=l,d.x+=s,d.y+=l,g.x+=s,g.y+=l,this},x:{get:function(){return this.getInCenter().x},set:function(s){var l=this.getInCenter();this.translate(s-l.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(s){var l=this.getInCenter();this.translate(0,s-l.y)}},alpha:{get:function(){var s=this.vertex1,l=this.vertex2,v=this.vertex3;return(s.alpha+l.alpha+v.alpha)/3},set:function(s){this.vertex1.alpha=s,this.vertex2.alpha=s,this.vertex3.alpha=s}},depth:{get:function(){var s=this.vertex1,l=this.vertex2,v=this.vertex3;return(s.vz+l.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});o.exports=h},48803:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(95540),c=e(37867),u=e(25836),h=e(39318),s=new u,l=new u,v=new c,d=function(g){var y=x(g,"mesh"),S=x(g,"texture",null),T=x(g,"frame"),w=x(g,"width",1),P=x(g,"height",w),A=x(g,"widthSegments",1),R=x(g,"heightSegments",A),I=x(g,"x",0),M=x(g,"y",0),L=x(g,"z",0),N=x(g,"rotateX",0),G=x(g,"rotateY",0),D=x(g,"rotateZ",0),B=x(g,"zIsUp",!0),$=x(g,"isOrtho",y?y.dirtyCache[11]:!1),k=x(g,"colors",[16777215]),X=x(g,"alphas",[1]),Y=x(g,"tile",!1),Z=x(g,"flipY",!1),Q=x(g,"width",null),j={faces:[],verts:[]};s.set(I,M,L),l.set(N,G,D),v.fromRotationXYTranslation(l,s,B);var K;if(!S&&y)S=y.texture,T||(K=y.frame);else if(y&&typeof S=="string")S=y.scene.sys.textures.get(S);else if(!S)return j;K||(K=S.get(T)),!Q&&$&&S&&y&&(w=K.width/y.height,P=K.height/y.height);var W=w/2,V=P/2,J=Math.floor(A),ee=Math.floor(R),te=J+1,ne=ee+1,se=w/J,ae=P/ee,ue=[],de=[],fe,ye,ve=0,Se=1,Ie=0,Ae=1;K&&(ve=K.u0,Se=K.u1,Z?(Ie=K.v1,Ae=K.v0):(Ie=K.v0,Ae=K.v1));var Oe=Se-ve,xe=Ae-Ie;for(ye=0;ye<ne;ye++){var be=ye*ae-V;for(fe=0;fe<te;fe++){var Pe=fe*se-W;de.push(Pe,-be);var Ge=ve+Oe*(fe/J),ze=Ie+xe*(ye/ee);ue.push(Ge,ze)}}Array.isArray(k)||(k=[k]),Array.isArray(X)||(X=[X]);var je=0,$e=0;for(ye=0;ye<ee;ye++)for(fe=0;fe<J;fe++){var ke=(fe+te*ye)*2,Xe=(fe+te*(ye+1))*2,Je=(fe+1+te*(ye+1))*2,We=(fe+1+te*ye)*2,Ze=k[$e],Qe=X[je],ut=new h(de[ke],de[ke+1],0,ue[ke],ue[ke+1],Ze,Qe).transformMat4(v),Bt=new h(de[Xe],de[Xe+1],0,ue[Xe],ue[Xe+1],Ze,Qe).transformMat4(v),Gt=new h(de[We],de[We+1],0,ue[We],ue[We+1],Ze,Qe).transformMat4(v),Ut=new h(de[Xe],de[Xe+1],0,ue[Xe],ue[Xe+1],Ze,Qe).transformMat4(v),$t=new h(de[Je],de[Je+1],0,ue[Je],ue[Je+1],Ze,Qe).transformMat4(v),kt=new h(de[We],de[We+1],0,ue[We],ue[We+1],Ze,Qe).transformMat4(v);Y&&(ut.setUVs(ve,Ae),Bt.setUVs(ve,Ie),Gt.setUVs(Se,Ae),Ut.setUVs(ve,Ie),$t.setUVs(Se,Ie),kt.setUVs(Se,Ae)),$e++,$e===k.length&&($e=0),je++,je===X.length&&(je=0),j.verts.push(ut,Bt,Gt,Ut,$t,kt),j.faces.push(new a(ut,Bt,Gt),new a(Ut,$t,kt))}return y&&(y.faces=y.faces.concat(j.faces),y.vertices=y.vertices.concat(j.verts)),j};o.exports=d},34684:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(37867),c=e(25836),u=e(39318),h=new c,s=new c,l=new x,v=function(d,g,y,S,T,w,P,A,R,I){y===void 0&&(y=1),S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=0),P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=0),I===void 0&&(I=!0);var M={faces:[],verts:[]},L=d.materials;h.set(S,T,w),s.set(P,A,R),l.fromRotationXYTranslation(s,h,I);for(var N=0;N<d.models.length;N++)for(var G=d.models[N],D=G.vertices,B=G.textureCoords,$=G.faces,k=0;k<$.length;k++){var X=$[k],Y=X.vertices[0],Z=X.vertices[1],Q=X.vertices[2],j=D[Y.vertexIndex],K=D[Z.vertexIndex],W=D[Q.vertexIndex],V=Y.textureCoordsIndex,J=Z.textureCoordsIndex,ee=Q.textureCoordsIndex,te=V===-1?{u:0,v:1}:B[V],ne=J===-1?{u:0,v:0}:B[J],se=ee===-1?{u:1,v:1}:B[ee],ae=16777215;X.material!==""&&L[X.material]&&(ae=L[X.material]);var ue=new u(j.x*y,j.y*y,j.z*y,te.u,te.v,ae).transformMat4(l),de=new u(K.x*y,K.y*y,K.z*y,ne.u,ne.v,ae).transformMat4(l),fe=new u(W.x*y,W.y*y,W.z*y,se.u,se.v,ae).transformMat4(l);M.verts.push(ue,de,fe),M.faces.push(new a(ue,de,fe))}return g&&(g.faces=g.faces.concat(M.faces),g.vertices=g.vertices.concat(M.verts)),M};o.exports=v},92515:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(39318),c=function(u,h,s,l,v,d,g,y){if(l===void 0&&(l=!1),d===void 0&&(d=16777215),g===void 0&&(g=1),y===void 0&&(y=!1),u.length!==h.length&&!l){console.warn("GenerateVerts: vertices and uvs count not equal");return}var S={faces:[],vertices:[]},T,w,P,A,R,I,M,L,N,G,D,B=l?3:2,$=Array.isArray(d),k=Array.isArray(g);if(Array.isArray(s)&&s.length>0)for(T=0;T<s.length;T++){var X=s[T],Y=s[T]*2,Z=s[T]*B;w=u[Z],P=u[Z+1],A=l?u[Z+2]:0,R=h[Y],I=h[Y+1],y&&(I=1-I),M=$?d[X]:d,L=k?g[X]:g,N=0,G=0,D=0,v&&(N=v[Z],G=v[Z+1],D=l?v[Z+2]:0),S.vertices.push(new x(w,P,A,R,I,M,L,N,G,D))}else{var Q=0,j=0;for(T=0;T<u.length;T+=B)w=u[T],P=u[T+1],A=l?u[T+2]:0,R=h[Q],I=h[Q+1],M=$?d[j]:d,L=k?g[j]:g,N=0,G=0,D=0,v&&(N=v[T],G=v[T+1],D=l?v[T+2]:0),S.vertices.push(new x(w,P,A,R,I,M,L,N,G,D)),Q+=2,j++}for(T=0;T<S.vertices.length;T+=3){var K=S.vertices[T],W=S.vertices[T+1],V=S.vertices[T+2];S.faces.push(new a(K,W,V))}return S};o.exports=c},85048:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=!0,e="untitled",a="",x="";function c(w){var P=w.indexOf("#");return P>-1?w.substring(0,P):w}function u(w){return w.models.length===0&&w.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),a="",w.models[w.models.length-1]}function h(w,P){var A=w.length>=2?w[1]:e;P.models.push({faces:[],name:A,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function s(w){w.length===2&&(a=w[1])}function l(w,P){var A=w.length,R=A>=2?parseFloat(w[1]):0,I=A>=3?parseFloat(w[2]):0,M=A>=4?parseFloat(w[3]):0;u(P).vertices.push({x:R,y:I,z:M})}function v(w,P){var A=w.length,R=A>=2?parseFloat(w[1]):0,I=A>=3?parseFloat(w[2]):0,M=A>=4?parseFloat(w[3]):0;isNaN(R)&&(R=0),isNaN(I)&&(I=0),isNaN(M)&&(M=0),E&&(I=1-I),u(P).textureCoords.push({u:R,v:I,w:M})}function d(w,P){var A=w.length,R=A>=2?parseFloat(w[1]):0,I=A>=3?parseFloat(w[2]):0,M=A>=4?parseFloat(w[3]):0;u(P).vertexNormals.push({x:R,y:I,z:M})}function g(w,P){var A=w.length-1;if(!(A<3)){for(var R={group:a,material:x,vertices:[]},I=0;I<A;I++){var M=w[I+1],L=M.split("/"),N=L.length;if(!(N<1||N>3)){var G=0,D=0,B=0;G=parseInt(L[0],10),N>1&&L[1]!==""&&(D=parseInt(L[1],10)),N>2&&(B=parseInt(L[2],10)),G!==0&&(G<0&&(G=u(P).vertices.length+1+G),D-=1,G-=1,B-=1,R.vertices.push({textureCoordsIndex:D,vertexIndex:G,vertexNormalIndex:B}))}}u(P).faces.push(R)}}function y(w,P){w.length>=2&&P.materialLibraries.push(w[1])}function S(w){w.length>=2&&(x=w[1])}var T=function(w,P){P===void 0&&(P=!0),E=P;var A={materials:{},materialLibraries:[],models:[]};a="",x="";for(var R=w.split(`
`),I=0;I<R.length;I++){var M=c(R[I]),L=M.replace(/\s\s+/g," ").trim().split(" ");switch(L[0].toLowerCase()){case"o":h(L,A);break;case"g":s(L);break;case"v":l(L,A);break;case"vt":v(L,A);break;case"vn":d(L,A);break;case"f":g(L,A);break;case"mtllib":y(L,A);break;case"usemtl":S(L);break}}return A};o.exports=T},61485:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),x=function(c){for(var u={},h=c.split(`
`),s="",l=0;l<h.length;l++){var v=h[l].trim();if(!(v.indexOf("#")===0||v==="")){var d=v.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{s=d[1];break}case"kd":{var g=Math.floor(d[1]*255),y=d.length>=2?Math.floor(d[2]*255):g,S=d.length>=3?Math.floor(d[3]*255):g;u[s]=a(g,y,S);break}}}}return u};o.exports=x},92570:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u,h;if(x===void 0&&c===void 0){var s=e.getInCenter();u=s.x,h=s.y}var l=Math.cos(a),v=Math.sin(a),d=e.vertex1,g=e.vertex2,y=e.vertex3,S=d.x-u,T=d.y-h;d.set(S*l-T*v+u,S*v+T*l+h),S=g.x-u,T=g.y-h,g.set(S*l-T*v+u,S*v+T*l+h),S=y.x-u,T=y.y-h,y.set(S*l-T*v+u,S*v+T*l+h)};o.exports=E},39318:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(70554),c=e(25836),u=new a({Extends:c,initialize:function(s,l,v,d,g,y,S,T,w,P){y===void 0&&(y=16777215),S===void 0&&(S=1),T===void 0&&(T=0),w===void 0&&(w=0),P===void 0&&(P=0),c.call(this,s,l,v),this.vx=0,this.vy=0,this.vz=0,this.nx=T,this.ny=w,this.nz=P,this.u=d,this.v=g,this.color=y,this.alpha=S,this.tx=0,this.ty=0,this.ta=0,this.tu=d,this.tv=g},setUVs:function(h,s){return this.u=h,this.v=s,this.tu=h,this.tv=s,this},scrollUV:function(h,s){return this.tu+=h,this.tv+=s,this},scaleUV:function(h,s){return this.tu=this.u*h,this.tv=this.v*s,this},transformCoordinatesLocal:function(h,s,l,v){var d=this.x,g=this.y,y=this.z,S=h.val,T=d*S[0]+g*S[4]+y*S[8]+S[12],w=d*S[1]+g*S[5]+y*S[9]+S[13],P=d*S[2]+g*S[6]+y*S[10]+S[14],A=d*S[3]+g*S[7]+y*S[11]+S[15];this.vx=T/A*s,this.vy=-(w/A)*l,v<=0?this.vz=P/A:this.vz=-(P/A)},resize:function(h,s,l,v,d,g){return this.x=h,this.y=s,this.vx=this.x*l,this.vy=-this.y*v,this.vz=0,d<.5?this.vx+=l*(.5-d):d>.5&&(this.vx-=l*(d-.5)),g<.5?this.vy+=v*(.5-g):g>.5&&(this.vy-=v*(g-.5)),this},update:function(h,s,l,v,d,g,y,S){var T=this.vx*h+this.vy*l+d,w=this.vx*s+this.vy*v+g;return y&&(T=Math.round(T),w=Math.round(w)),this.tx=T,this.ty=w,this.ta=this.alpha*S,this},load:function(h,s,l,v,d){return h[++l]=this.tx,h[++l]=this.ty,h[++l]=this.tu,h[++l]=this.tv,h[++l]=v,h[++l]=d,s[++l]=x.getTintAppendFloatAlpha(this.color,this.ta),l}});o.exports=u},73090:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};o.exports=a},96550:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};o.exports=E},99706:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c){return new a(c.x,c.y)};o.exports=x},68010:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y)};o.exports=E},27814:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y};o.exports=E},73565:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};o.exports=E},87555:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){if(u===void 0&&(u=new a),!Array.isArray(c))throw new Error("GetCentroid points argument must be an array");var h=c.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)u.x=c[0].x,u.y=c[0].y;else{for(var s=0;s<h;s++)u.x+=c[s].x,u.y+=c[s].y;u.x/=h,u.y/=h}return u};o.exports=x},28793:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};o.exports=E},44405:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x*e.x+e.y*e.y};o.exports=E},20873:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u){u===void 0&&(u=new a);for(var h=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,d=0;d<c.length;d++){var g=c[d];g.x>h&&(h=g.x),g.x<s&&(s=g.x),g.y>l&&(l=g.y),g.y<v&&(v=g.y)}return u.x=s,u.y=v,u.width=h-s,u.height=l-v,u};o.exports=x},26152:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h,s){return h===void 0&&(h=0),s===void 0&&(s=new a),s.x=c.x+(u.x-c.x)*h,s.y=c.y+(u.y-c.y)*h,s};o.exports=x},55767:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(e.y,e.x)};o.exports=E},79432:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.setTo(-c.x,-c.y)};o.exports=x},2141:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23777),c=new a({initialize:function(h,s){h===void 0&&(h=0),s===void 0&&(s=h),this.type=x.POINT,this.x=h,this.y=s},setTo:function(u,h){return u===void 0&&(u=0),h===void 0&&(h=u),this.x=u,this.y=h,this}});o.exports=c},72930:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(44405),c=function(u,h,s){s===void 0&&(s=new a);var l=u.x*h.x+u.y*h.y,v=l/x(h);return v!==0&&(s.x=v*h.x,s.y=v*h.y),s};o.exports=c},62880:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u,h){h===void 0&&(h=new a);var s=c.x*u.x+c.y*u.y;return s!==0&&(h.x=s*u.x,h.y=s*u.y),h};o.exports=x},15093:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28793),x=function(c,u){if(c.x!==0||c.y!==0){var h=a(c);c.x/=h,c.y/=h}return c.x*=u,c.y*=u,c};o.exports=x},43711:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);a.Ceil=e(96550),a.Clone=e(99706),a.CopyFrom=e(68010),a.Equals=e(27814),a.Floor=e(73565),a.GetCentroid=e(87555),a.GetMagnitude=e(28793),a.GetMagnitudeSq=e(44405),a.GetRectangleFromPoints=e(20873),a.Interpolate=e(26152),a.Invert=e(55767),a.Negative=e(79432),a.Project=e(72930),a.ProjectUnit=e(62880),a.SetMagnitude=e(15093),o.exports=a},12306:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717),x=function(c){return new a(c.points)};o.exports=x},63814:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var c=!1,u=-1,h=e.points.length-1;++u<e.points.length;h=u){var s=e.points[u].x,l=e.points[u].y,v=e.points[h].x,d=e.points[h].y;(l<=x&&x<d||d<=x&&x<l)&&a<(v-s)*(x-l)/(d-l)+s&&(c=!c)}return c};o.exports=E},99338:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63814),x=function(c,u){return a(c,u.x,u.y)};o.exports=x},94811:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(j,K,W){W=W||2;var V=K&&K.length,J=V?K[0]*W:j.length,ee=e(j,0,J,W,!0),te=[];if(!ee||ee.next===ee.prev)return te;var ne,se,ae,ue,de,fe,ye;if(V&&(ee=l(j,K,ee,W)),j.length>80*W){ne=ae=j[0],se=ue=j[1];for(var ve=W;ve<J;ve+=W)de=j[ve],fe=j[ve+1],de<ne&&(ne=de),fe<se&&(se=fe),de>ae&&(ae=de),fe>ue&&(ue=fe);ye=Math.max(ae-ne,ue-se),ye=ye!==0?32767/ye:0}return x(ee,te,W,ne,se,ye,0),te}function e(j,K,W,V,J){var ee,te;if(J===Q(j,K,W,V)>0)for(ee=K;ee<W;ee+=V)te=X(ee,j[ee],j[ee+1],te);else for(ee=W-V;ee>=K;ee-=V)te=X(ee,j[ee],j[ee+1],te);return te&&M(te,te.next)&&(Y(te),te=te.next),te}function a(j,K){if(!j)return j;K||(K=j);var W=j,V;do if(V=!1,!W.steiner&&(M(W,W.next)||I(W.prev,W,W.next)===0)){if(Y(W),W=K=W.prev,W===W.next)break;V=!0}else W=W.next;while(V||W!==K);return K}function x(j,K,W,V,J,ee,te){if(j){!te&&ee&&S(j,V,J,ee);for(var ne=j,se,ae;j.prev!==j.next;){if(se=j.prev,ae=j.next,ee?u(j,V,J,ee):c(j)){K.push(se.i/W|0),K.push(j.i/W|0),K.push(ae.i/W|0),Y(j),j=ae.next,ne=ae.next;continue}if(j=ae,j===ne){te?te===1?(j=h(a(j),K,W),x(j,K,W,V,J,ee,2)):te===2&&s(j,K,W,V,J,ee):x(a(j),K,W,V,J,ee,1);break}}}}function c(j){var K=j.prev,W=j,V=j.next;if(I(K,W,V)>=0)return!1;for(var J=K.x,ee=W.x,te=V.x,ne=K.y,se=W.y,ae=V.y,ue=J<ee?J<te?J:te:ee<te?ee:te,de=ne<se?ne<ae?ne:ae:se<ae?se:ae,fe=J>ee?J>te?J:te:ee>te?ee:te,ye=ne>se?ne>ae?ne:ae:se>ae?se:ae,ve=V.next;ve!==K;){if(ve.x>=ue&&ve.x<=fe&&ve.y>=de&&ve.y<=ye&&A(J,ne,ee,se,te,ae,ve.x,ve.y)&&I(ve.prev,ve,ve.next)>=0)return!1;ve=ve.next}return!0}function u(j,K,W,V){var J=j.prev,ee=j,te=j.next;if(I(J,ee,te)>=0)return!1;for(var ne=J.x,se=ee.x,ae=te.x,ue=J.y,de=ee.y,fe=te.y,ye=ne<se?ne<ae?ne:ae:se<ae?se:ae,ve=ue<de?ue<fe?ue:fe:de<fe?de:fe,Se=ne>se?ne>ae?ne:ae:se>ae?se:ae,Ie=ue>de?ue>fe?ue:fe:de>fe?de:fe,Ae=w(ye,ve,K,W,V),Oe=w(Se,Ie,K,W,V),xe=j.prevZ,be=j.nextZ;xe&&xe.z>=Ae&&be&&be.z<=Oe;){if(xe.x>=ye&&xe.x<=Se&&xe.y>=ve&&xe.y<=Ie&&xe!==J&&xe!==te&&A(ne,ue,se,de,ae,fe,xe.x,xe.y)&&I(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,be.x>=ye&&be.x<=Se&&be.y>=ve&&be.y<=Ie&&be!==J&&be!==te&&A(ne,ue,se,de,ae,fe,be.x,be.y)&&I(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;xe&&xe.z>=Ae;){if(xe.x>=ye&&xe.x<=Se&&xe.y>=ve&&xe.y<=Ie&&xe!==J&&xe!==te&&A(ne,ue,se,de,ae,fe,xe.x,xe.y)&&I(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;be&&be.z<=Oe;){if(be.x>=ye&&be.x<=Se&&be.y>=ve&&be.y<=Ie&&be!==J&&be!==te&&A(ne,ue,se,de,ae,fe,be.x,be.y)&&I(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function h(j,K,W){var V=j;do{var J=V.prev,ee=V.next.next;!M(J,ee)&&L(J,V,V.next,ee)&&B(J,ee)&&B(ee,J)&&(K.push(J.i/W|0),K.push(V.i/W|0),K.push(ee.i/W|0),Y(V),Y(V.next),V=j=ee),V=V.next}while(V!==j);return a(V)}function s(j,K,W,V,J,ee){var te=j;do{for(var ne=te.next.next;ne!==te.prev;){if(te.i!==ne.i&&R(te,ne)){var se=k(te,ne);te=a(te,te.next),se=a(se,se.next),x(te,K,W,V,J,ee,0),x(se,K,W,V,J,ee,0);return}ne=ne.next}te=te.next}while(te!==j)}function l(j,K,W,V){var J=[],ee,te,ne,se,ae;for(ee=0,te=K.length;ee<te;ee++)ne=K[ee]*V,se=ee<te-1?K[ee+1]*V:j.length,ae=e(j,ne,se,V,!1),ae===ae.next&&(ae.steiner=!0),J.push(P(ae));for(J.sort(v),ee=0;ee<J.length;ee++)W=d(J[ee],W);return W}function v(j,K){return j.x-K.x}function d(j,K){var W=g(j,K);if(!W)return K;var V=k(W,j);return a(V,V.next),a(W,W.next)}function g(j,K){var W=K,V=j.x,J=j.y,ee=-1/0,te;do{if(J<=W.y&&J>=W.next.y&&W.next.y!==W.y){var ne=W.x+(J-W.y)*(W.next.x-W.x)/(W.next.y-W.y);if(ne<=V&&ne>ee&&(ee=ne,te=W.x<W.next.x?W:W.next,ne===V))return te}W=W.next}while(W!==K);if(!te)return null;var se=te,ae=te.x,ue=te.y,de=1/0,fe;W=te;do V>=W.x&&W.x>=ae&&V!==W.x&&A(J<ue?V:ee,J,ae,ue,J<ue?ee:V,J,W.x,W.y)&&(fe=Math.abs(J-W.y)/(V-W.x),B(W,j)&&(fe<de||fe===de&&(W.x>te.x||W.x===te.x&&y(te,W)))&&(te=W,de=fe)),W=W.next;while(W!==se);return te}function y(j,K){return I(j.prev,j,K.prev)<0&&I(K.next,j,j.next)<0}function S(j,K,W,V){var J=j;do J.z===0&&(J.z=w(J.x,J.y,K,W,V)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==j);J.prevZ.nextZ=null,J.prevZ=null,T(J)}function T(j){var K,W,V,J,ee,te,ne,se,ae=1;do{for(W=j,j=null,ee=null,te=0;W;){for(te++,V=W,ne=0,K=0;K<ae&&(ne++,V=V.nextZ,!!V);K++);for(se=ae;ne>0||se>0&&V;)ne!==0&&(se===0||!V||W.z<=V.z)?(J=W,W=W.nextZ,ne--):(J=V,V=V.nextZ,se--),ee?ee.nextZ=J:j=J,J.prevZ=ee,ee=J;W=V}ee.nextZ=null,ae*=2}while(te>1);return j}function w(j,K,W,V,J){return j=(j-W)*J|0,K=(K-V)*J|0,j=(j|j<<8)&16711935,j=(j|j<<4)&252645135,j=(j|j<<2)&858993459,j=(j|j<<1)&1431655765,K=(K|K<<8)&16711935,K=(K|K<<4)&252645135,K=(K|K<<2)&858993459,K=(K|K<<1)&1431655765,j|K<<1}function P(j){var K=j,W=j;do(K.x<W.x||K.x===W.x&&K.y<W.y)&&(W=K),K=K.next;while(K!==j);return W}function A(j,K,W,V,J,ee,te,ne){return(J-te)*(K-ne)>=(j-te)*(ee-ne)&&(j-te)*(V-ne)>=(W-te)*(K-ne)&&(W-te)*(ee-ne)>=(J-te)*(V-ne)}function R(j,K){return j.next.i!==K.i&&j.prev.i!==K.i&&!D(j,K)&&(B(j,K)&&B(K,j)&&$(j,K)&&(I(j.prev,j,K.prev)||I(j,K.prev,K))||M(j,K)&&I(j.prev,j,j.next)>0&&I(K.prev,K,K.next)>0)}function I(j,K,W){return(K.y-j.y)*(W.x-K.x)-(K.x-j.x)*(W.y-K.y)}function M(j,K){return j.x===K.x&&j.y===K.y}function L(j,K,W,V){var J=G(I(j,K,W)),ee=G(I(j,K,V)),te=G(I(W,V,j)),ne=G(I(W,V,K));return!!(J!==ee&&te!==ne||J===0&&N(j,W,K)||ee===0&&N(j,V,K)||te===0&&N(W,j,V)||ne===0&&N(W,K,V))}function N(j,K,W){return K.x<=Math.max(j.x,W.x)&&K.x>=Math.min(j.x,W.x)&&K.y<=Math.max(j.y,W.y)&&K.y>=Math.min(j.y,W.y)}function G(j){return j>0?1:j<0?-1:0}function D(j,K){var W=j;do{if(W.i!==j.i&&W.next.i!==j.i&&W.i!==K.i&&W.next.i!==K.i&&L(W,W.next,j,K))return!0;W=W.next}while(W!==j);return!1}function B(j,K){return I(j.prev,j,j.next)<0?I(j,K,j.next)>=0&&I(j,j.prev,K)>=0:I(j,K,j.prev)<0||I(j,j.next,K)<0}function $(j,K){var W=j,V=!1,J=(j.x+K.x)/2,ee=(j.y+K.y)/2;do W.y>ee!=W.next.y>ee&&W.next.y!==W.y&&J<(W.next.x-W.x)*(ee-W.y)/(W.next.y-W.y)+W.x&&(V=!V),W=W.next;while(W!==j);return V}function k(j,K){var W=new Z(j.i,j.x,j.y),V=new Z(K.i,K.x,K.y),J=j.next,ee=K.prev;return j.next=K,K.prev=j,W.next=J,J.prev=W,V.next=W,W.prev=V,ee.next=V,V.prev=ee,V}function X(j,K,W,V){var J=new Z(j,K,W);return V?(J.next=V.next,J.prev=V,V.next.prev=J,V.next=J):(J.prev=J,J.next=J),J}function Y(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function Z(j,K,W){this.i=j,this.x=K,this.y=W,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}E.deviation=function(j,K,W,V){var J=K&&K.length,ee=J?K[0]*W:j.length,te=Math.abs(Q(j,0,ee,W));if(J)for(var ne=0,se=K.length;ne<se;ne++){var ae=K[ne]*W,ue=ne<se-1?K[ne+1]*W:j.length;te-=Math.abs(Q(j,ae,ue,W))}var de=0;for(ne=0;ne<V.length;ne+=3){var fe=V[ne]*W,ye=V[ne+1]*W,ve=V[ne+2]*W;de+=Math.abs((j[fe]-j[ve])*(j[ye+1]-j[fe+1])-(j[fe]-j[ye])*(j[ve+1]-j[fe+1]))}return te===0&&de===0?0:Math.abs((de-te)/te)};function Q(j,K,W,V){for(var J=0,ee=K,te=W-V;ee<W;ee+=V)J+=(j[te]-j[ee])*(j[ee+1]+j[te+1]),te=ee;return J}E.flatten=function(j){for(var K=j[0][0].length,W={vertices:[],holes:[],dimensions:K},V=0,J=0;J<j.length;J++){for(var ee=0;ee<j[J].length;ee++)for(var te=0;te<K;te++)W.vertices.push(j[J][ee][te]);J>0&&(V+=j[J-1].length,W.holes.push(V))}return W},o.exports=E},13829:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u){u===void 0&&(u=new a);for(var h=1/0,s=1/0,l=-h,v=-s,d,g=0;g<c.points.length;g++)d=c.points[g],h=Math.min(h,d.x),s=Math.min(s,d.y),l=Math.max(l,d.x),v=Math.max(v,d.y);return u.x=h,u.y=s,u.width=l-h,u.height=v-s,u};o.exports=x},26173:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=[]);for(var x=0;x<e.points.length;x++)a.push(e.points[x].x),a.push(e.points[x].y);return a};o.exports=E},9564:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(23031),c=e(30052),u=function(h,s,l,v){v===void 0&&(v=[]);var d=h.points,g=c(h);!s&&l>0&&(s=g/l);for(var y=0;y<s;y++)for(var S=g*(y/s),T=0,w=0;w<d.length;w++){var P=d[w],A=d[(w+1)%d.length],R=new x(P.x,P.y,A.x,A.y),I=a(R);if(S<T||S>T+I){T+=I;continue}var M=R.getPoint((S-T)/I);v.push(M);break}return v};o.exports=u},30052:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(23031),c=function(u){for(var h=u.points,s=0,l=0;l<h.length;l++){var v=h[l],d=h[(l+1)%h.length],g=new x(v.x,v.y,d.x,d.y);s+=a(g)}return s};o.exports=c},25717:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(63814),c=e(9564),u=e(23777),h=new a({initialize:function(l){this.type=u.POLYGON,this.area=0,this.points=[],l&&this.setTo(l)},contains:function(s,l){return x(this,s,l)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var l,v=0;v<s.length;v++)l={x:0,y:0},typeof s[v]=="number"||typeof s[v]=="string"?(l.x=parseFloat(s[v]),l.y=parseFloat(s[v+1]),v++):Array.isArray(s[v])?(l.x=s[v][0],l.y=s[v][1]):(l.x=s[v].x,l.y=s[v].y),this.points.push(l);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s=0,l,v,d=0;d<this.points.length-1;d++)l=this.points[d],v=this.points[d+1],s+=(v.x-l.x)*(l.y+v.y);return l=this.points[0],v=this.points[this.points.length-1],s+=(l.x-v.x)*(v.y+l.y),this.area=-s*.5,this.area},getPoints:function(s,l,v){return c(this,s,l,v)}});o.exports=h},8133:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.points.reverse(),e};o.exports=E},29524:o=>{function E(h,s){var l=h.x-s.x,v=h.y-s.y;return l*l+v*v}function e(h,s,l){var v=s.x,d=s.y,g=l.x-v,y=l.y-d;if(g!==0||y!==0){var S=((h.x-v)*g+(h.y-d)*y)/(g*g+y*y);S>1?(v=l.x,d=l.y):S>0&&(v+=g*S,d+=y*S)}return g=h.x-v,y=h.y-d,g*g+y*y}function a(h,s){for(var l=h[0],v=[l],d,g=1,y=h.length;g<y;g++)d=h[g],E(d,l)>s&&(v.push(d),l=d);return l!==d&&v.push(d),v}function x(h,s,l,v,d){for(var g=v,y,S=s+1;S<l;S++){var T=e(h[S],h[s],h[l]);T>g&&(y=S,g=T)}g>v&&(y-s>1&&x(h,s,y,v,d),d.push(h[y]),l-y>1&&x(h,y,l,v,d))}function c(h,s){var l=h.length-1,v=[h[0]];return x(h,0,l,s,v),v.push(h[l]),v}var u=function(h,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var v=h.points;if(v.length>2){var d=s*s;l||(v=a(v,d)),h.setTo(c(v,d))}return h};o.exports=u},5469:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(a,x){return a[0]=x[0],a[1]=x[1],a},e=function(a){var x,c=[],u=a.points;for(x=0;x<u.length;x++)c.push([u[x].x,u[x].y]);var h=[];for(c.length>0&&h.push(E([0,0],c[0])),x=0;x<c.length-1;x++){var s=c[x],l=c[x+1],v=s[0],d=s[1],g=l[0],y=l[1];h.push([.85*v+.15*g,.85*d+.15*y]),h.push([.15*v+.85*g,.15*d+.85*y])}return c.length>1&&h.push(E([0,0],c[c.length-1])),a.setTo(h)};o.exports=e},24709:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var c=e.points,u=0;u<c.length;u++)c[u].x+=a,c[u].y+=x;return e};o.exports=E},58423:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717);a.Clone=e(12306),a.Contains=e(63814),a.ContainsPoint=e(99338),a.Earcut=e(94811),a.GetAABB=e(13829),a.GetNumberArray=e(26173),a.GetPoints=e(9564),a.Perimeter=e(30052),a.Reverse=e(8133),a.Simplify=e(29524),a.Smooth=e(5469),a.Translate=e(24709),o.exports=a},62224:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.width*e.height};o.exports=E},98615:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};o.exports=E},31688:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};o.exports=E},67502:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x=a-e.width/2,e.y=x-e.height/2,e};o.exports=E},65085:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c){return new a(c.x,c.y,c.width,c.height)};o.exports=x},37303:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.width<=0||e.height<=0?!1:e.x<=a&&e.x+e.width>=a&&e.y<=x&&e.y+e.height>=x};o.exports=E},96553:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37303),x=function(c,u){return a(c,u.x,u.y)};o.exports=x},70273:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.width*a.height>e.width*e.height?!1:a.x>e.x&&a.x<e.right&&a.right>e.x&&a.right<e.right&&a.y>e.y&&a.y<e.bottom&&a.bottom>e.y&&a.bottom<e.bottom};o.exports=E},43459:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};o.exports=E},77493:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x,y:e.y}),a.push({x:e.right,y:e.y}),a.push({x:e.right,y:e.bottom}),a.push({x:e.x,y:e.bottom}),a};o.exports=E},9219:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};o.exports=E},53751:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),x=function(c,u){var h=a(c);return h<a(u)?c.setSize(u.height*h,u.height):c.setSize(u.width,u.width/h),c.setPosition(u.centerX-c.width/2,u.centerY-c.height/2)};o.exports=x},16088:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),x=function(c,u){var h=a(c);return h>a(u)?c.setSize(u.height*h,u.height):c.setSize(u.width,u.width/h),c.setPosition(u.centerX-c.width/2,u.centerY-c.height/2)};o.exports=x},80774:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};o.exports=E},83859:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};o.exports=E},19217:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(36383),c=function(u,h){if(h===void 0&&(h=new a),u.length===0)return h;for(var s=Number.MAX_VALUE,l=Number.MAX_VALUE,v=x.MIN_SAFE_INTEGER,d=x.MIN_SAFE_INTEGER,g,y,S,T=0;T<u.length;T++)g=u[T],Array.isArray(g)?(y=g[0],S=g[1]):(y=g.x,S=g.y),s=Math.min(s,y),l=Math.min(l,S),v=Math.max(v,y),d=Math.max(d,S);return h.x=s,h.y=l,h.width=v-s,h.height=d-l,h};o.exports=c},9477:(o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u,h,s,l){return l===void 0&&(l=new a),l.setTo(Math.min(c,h),Math.min(u,s),Math.abs(c-h),Math.abs(u-s))};o.exports=x},8249:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.height===0?NaN:e.width/e.height};o.exports=E},27165:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.x=c.centerX,u.y=c.centerY,u};o.exports=x},20812:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),x=e(2141),c=function(u,h,s){if(s===void 0&&(s=new x),h<=0||h>=1)return s.x=u.x,s.y=u.y,s;var l=a(u)*h;return h>.5?(l-=u.width+u.height,l<=u.width?(s.x=u.right-l,s.y=u.bottom):(s.x=u.x,s.y=u.bottom-(l-u.width))):l<=u.width?(s.x=u.x+l,s.y=u.y):(s.x=u.right,s.y=u.y+(l-u.width)),s};o.exports=c},34819:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20812),x=e(13019),c=function(u,h,s,l){l===void 0&&(l=[]),!h&&s>0&&(h=x(u)/s);for(var v=0;v<h;v++){var d=v/h;l.push(a(u,d))}return l};o.exports=c},51313:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.x=c.width,u.y=c.height,u};o.exports=x},86091:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67502),x=function(c,u,h){var s=c.centerX,l=c.centerY;return c.setSize(c.width+u*2,c.height+h*2),a(c,s,l)};o.exports=x},53951:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(59996),c=function(u,h,s){return s===void 0&&(s=new a),x(u,h)?(s.x=Math.max(u.x,h.x),s.y=Math.max(u.y,h.y),s.width=Math.min(u.right,h.right)-s.x,s.height=Math.min(u.bottom,h.bottom)-s.y):s.setEmpty(),s};o.exports=c},14649:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),x=e(2141),c=function(u,h,s,l){if(l===void 0&&(l=[]),!h&&!s)return l;h?s=Math.round(a(u)/h):h=a(u)/s;for(var v=u.x,d=u.y,g=0,y=0;y<s;y++)switch(l.push(new x(v,d)),g){case 0:v+=h,v>=u.right&&(g=1,d+=v-u.right,v=u.right);break;case 1:d+=h,d>=u.bottom&&(g=2,v-=d-u.bottom,d=u.bottom);break;case 2:v-=h,v<=u.left&&(g=3,d-=u.left-v,v=u.left);break;case 3:d-=h,d<=u.top&&(g=0,d=u.top);break}return l};o.exports=c},33595:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=e.x,c=e.right,u=e.y,h=e.bottom,s=0;s<a.length;s++)x=Math.min(x,a[s].x),c=Math.max(c,a[s].x),u=Math.min(u,a[s].y),h=Math.max(h,a[s].y);return e.x=x,e.y=u,e.width=c-x,e.height=h-u,e};o.exports=E},20074:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=Math.min(e.x,a.x),c=Math.max(e.right,a.right);e.x=x,e.width=c-x;var u=Math.min(e.y,a.y),h=Math.max(e.bottom,a.bottom);return e.y=u,e.height=h-u,e};o.exports=E},92171:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=Math.min(e.x,a),u=Math.max(e.right,a);e.x=c,e.width=u-c;var h=Math.min(e.y,x),s=Math.max(e.bottom,x);return e.y=h,e.height=s-h,e};o.exports=E},42981:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E},46907:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E},60170:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x<a.right&&e.right>a.x&&e.y<a.bottom&&e.bottom>a.y};o.exports=E},13019:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 2*(e.width+e.height)};o.exports=E},85133:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(39506),c=function(u,h,s){s===void 0&&(s=new a),h=x(h);var l=Math.sin(h),v=Math.cos(h),d=v>0?u.width/2:u.width/-2,g=l>0?u.height/2:u.height/-2;return Math.abs(d*l)<Math.abs(g*v)?g=d*l/v:d=g*v/l,s.x=d+u.centerX,s.y=g+u.centerY,s};o.exports=c},26597:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.x=c.x+Math.random()*c.width,u.y=c.y+Math.random()*c.height,u};o.exports=x},86470:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(70273),c=e(2141),u=function(h,s,l){if(l===void 0&&(l=new c),x(h,s))switch(a(0,3)){case 0:l.x=h.x+Math.random()*(s.right-h.x),l.y=h.y+Math.random()*(s.top-h.y);break;case 1:l.x=s.x+Math.random()*(h.right-s.x),l.y=s.bottom+Math.random()*(h.bottom-s.bottom);break;case 2:l.x=h.x+Math.random()*(s.x-h.x),l.y=s.y+Math.random()*(h.bottom-s.y);break;case 3:l.x=s.right+Math.random()*(h.right-s.right),l.y=h.y+Math.random()*(s.bottom-h.y);break}return l};o.exports=u},87841:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37303),c=e(20812),u=e(34819),h=e(23777),s=e(23031),l=e(26597),v=new a({initialize:function(g,y,S,T){g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=0),this.type=h.RECTANGLE,this.x=g,this.y=y,this.width=S,this.height=T},contains:function(d,g){return x(this,d,g)},getPoint:function(d,g){return c(this,d,g)},getPoints:function(d,g,y){return u(this,d,g,y)},getRandomPoint:function(d){return l(this,d)},setTo:function(d,g,y,S){return this.x=d,this.y=g,this.width=y,this.height=S,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,g){return g===void 0&&(g=d),this.x=d,this.y=g,this},setSize:function(d,g){return g===void 0&&(g=d),this.width=d,this.height=g,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new s),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new s),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new s),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new s),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});o.exports=v},94845:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.width===a.width&&e.height===a.height};o.exports=E},31730:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=a),e.width*=a,e.height*=x,e};o.exports=E},36899:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(c,u,h){h===void 0&&(h=new a);var s=Math.min(c.x,u.x),l=Math.min(c.y,u.y),v=Math.max(c.right,u.right)-s,d=Math.max(c.bottom,u.bottom)-l;return h.setTo(s,l,v,d)};o.exports=x},93232:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841);a.Area=e(62224),a.Ceil=e(98615),a.CeilAll=e(31688),a.CenterOn=e(67502),a.Clone=e(65085),a.Contains=e(37303),a.ContainsPoint=e(96553),a.ContainsRect=e(70273),a.CopyFrom=e(43459),a.Decompose=e(77493),a.Equals=e(9219),a.FitInside=e(53751),a.FitOutside=e(16088),a.Floor=e(80774),a.FloorAll=e(83859),a.FromPoints=e(19217),a.FromXY=e(9477),a.GetAspectRatio=e(8249),a.GetCenter=e(27165),a.GetPoint=e(20812),a.GetPoints=e(34819),a.GetSize=e(51313),a.Inflate=e(86091),a.Intersection=e(53951),a.MarchingAnts=e(14649),a.MergePoints=e(33595),a.MergeRect=e(20074),a.MergeXY=e(92171),a.Offset=e(42981),a.OffsetPoint=e(46907),a.Overlaps=e(60170),a.Perimeter=e(13019),a.PerimeterPoint=e(85133),a.Random=e(26597),a.RandomOutside=e(86470),a.SameDimensions=e(94845),a.Scale=e(31730),a.Union=e(36899),o.exports=a},41658:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.x1,x=e.y1,c=e.x2,u=e.y2,h=e.x3,s=e.y3;return Math.abs(((h-a)*(u-x)-(c-a)*(s-x))/2)};o.exports=E},39208:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(c,u,h){var s=h*(Math.sqrt(3)/2),l=c,v=u,d=c+h/2,g=u+s,y=c-h/2,S=u+s;return new a(l,v,d,g,y,S)};o.exports=x},39545:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94811),x=e(16483),c=function(u,h,s,l,v){h===void 0&&(h=null),s===void 0&&(s=1),l===void 0&&(l=1),v===void 0&&(v=[]);for(var d=a(u,h),g,y,S,T,w,P,A,R,I,M=0;M<d.length;M+=3)g=d[M],y=d[M+1],S=d[M+2],T=u[g*2]*s,w=u[g*2+1]*l,P=u[y*2]*s,A=u[y*2+1]*l,R=u[S*2]*s,I=u[S*2+1]*l,v.push(new x(T,w,P,A,R,I));return v};o.exports=c},90301:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(c,u,h,s){s===void 0&&(s=h);var l=c,v=u,d=c,g=u-s,y=c+h,S=u;return new a(l,v,d,g,y,S)};o.exports=x},23707:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97523),x=e(13584),c=function(u,h,s,l){l===void 0&&(l=a);var v=l(u),d=h-v.x,g=s-v.y;return x(u,d,g)};o.exports=c},97523:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){return u===void 0&&(u=new a),u.x=(c.x1+c.x2+c.x3)/3,u.y=(c.y1+c.y2+c.y3)/3,u};o.exports=x},24951:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099);function x(u,h,s,l){return u*l-h*s}var c=function(u,h){h===void 0&&(h=new a);var s=u.x3,l=u.y3,v=u.x1-s,d=u.y1-l,g=u.x2-s,y=u.y2-l,S=2*x(v,d,g,y),T=x(d,v*v+d*d,y,g*g+y*y),w=x(v,v*v+d*d,g,g*g+y*y);return h.x=s-T/S,h.y=l+w/S,h};o.exports=c},85614:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=function(c,u){u===void 0&&(u=new a);var h=c.x1,s=c.y1,l=c.x2,v=c.y2,d=c.x3,g=c.y3,y=l-h,S=v-s,T=d-h,w=g-s,P=y*(h+l)+S*(s+v),A=T*(h+d)+w*(s+g),R=2*(y*(g-v)-S*(d-l)),I,M;if(Math.abs(R)<1e-6){var L=Math.min(h,l,d),N=Math.min(s,v,g);I=(Math.max(h,l,d)-L)*.5,M=(Math.max(s,v,g)-N)*.5,u.x=L+I,u.y=N+M,u.radius=Math.sqrt(I*I+M*M)}else u.x=(w*P-S*A)/R,u.y=(y*A-T*P)/R,I=u.x-h,M=u.y-s,u.radius=Math.sqrt(I*I+M*M);return u};o.exports=x},74422:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(c){return new a(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)};o.exports=x},10690:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=e.x3-e.x1,u=e.y3-e.y1,h=e.x2-e.x1,s=e.y2-e.y1,l=a-e.x1,v=x-e.y1,d=c*c+u*u,g=c*h+u*s,y=c*l+u*v,S=h*h+s*s,T=h*l+s*v,w=d*S-g*g,P=w===0?0:1/w,A=(S*y-g*T)*P,R=(d*T-g*y)*P;return A>=0&&R>=0&&A+R<1};o.exports=E},48653:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x===void 0&&(x=!1),c===void 0&&(c=[]);for(var u=e.x3-e.x1,h=e.y3-e.y1,s=e.x2-e.x1,l=e.y2-e.y1,v=u*u+h*h,d=u*s+h*l,g=s*s+l*l,y=v*g-d*d,S=y===0?0:1/y,T,w,P,A,R,I,M=e.x1,L=e.y1,N=0;N<a.length&&(P=a[N].x-M,A=a[N].y-L,R=u*P+h*A,I=s*P+l*A,T=(g*R-d*I)*S,w=(v*I-d*R)*S,!(T>=0&&w>=0&&T+w<1&&(c.push({x:a[N].x,y:a[N].y}),x)));N++);return c};o.exports=E},96006:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10690),x=function(c,u){return a(c,u.x,u.y)};o.exports=x},71326:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};o.exports=E},71694:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x1,y:e.y1}),a.push({x:e.x2,y:e.y2}),a.push({x:e.x3,y:e.y3}),a};o.exports=E},33522:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2&&e.x3===a.x3&&e.y3===a.y3};o.exports=E},20437:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(35001),c=function(u,h,s){s===void 0&&(s=new a);var l=u.getLineA(),v=u.getLineB(),d=u.getLineC();if(h<=0||h>=1)return s.x=l.x1,s.y=l.y1,s;var g=x(l),y=x(v),S=x(d),T=g+y+S,w=T*h,P=0;return w<g?(P=w/g,s.x=l.x1+(l.x2-l.x1)*P,s.y=l.y1+(l.y2-l.y1)*P):w>g+y?(w-=g+y,P=w/S,s.x=d.x1+(d.x2-d.x1)*P,s.y=d.y1+(d.y2-d.y1)*P):(w-=g,P=w/y,s.x=v.x1+(v.x2-v.x1)*P,s.y=v.y1+(v.y2-v.y1)*P),s};o.exports=c},80672:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(2141),c=function(u,h,s,l){l===void 0&&(l=[]);var v=u.getLineA(),d=u.getLineB(),g=u.getLineC(),y=a(v),S=a(d),T=a(g),w=y+S+T;!h&&s>0&&(h=w/s);for(var P=0;P<h;P++){var A=w*(P/h),R=0,I=new x;A<y?(R=A/y,I.x=v.x1+(v.x2-v.x1)*R,I.y=v.y1+(v.y2-v.y1)*R):A>y+S?(A-=y+S,R=A/T,I.x=g.x1+(g.x2-g.x1)*R,I.y=g.y1+(g.y2-g.y1)*R):(A-=y,R=A/S,I.x=d.x1+(d.x2-d.x1)*R,I.y=d.y1+(d.y2-d.y1)*R),l.push(I)}return l};o.exports=c},39757:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);function x(u,h,s,l){var v=u-s,d=h-l,g=v*v+d*d;return Math.sqrt(g)}var c=function(u,h){h===void 0&&(h=new a);var s=u.x1,l=u.y1,v=u.x2,d=u.y2,g=u.x3,y=u.y3,S=x(g,y,v,d),T=x(s,l,g,y),w=x(v,d,s,l),P=S+T+w;return h.x=(s*S+v*T+g*w)/P,h.y=(l*S+d*T+y*w)/P,h};o.exports=c},13584:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x1+=a,e.y1+=x,e.x2+=a,e.y2+=x,e.x3+=a,e.y3+=x,e};o.exports=E},1376:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=function(c){var u=c.getLineA(),h=c.getLineB(),s=c.getLineC();return a(u)+a(h)+a(s)};o.exports=x},90260:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(c,u){u===void 0&&(u=new a);var h=c.x2-c.x1,s=c.y2-c.y1,l=c.x3-c.x1,v=c.y3-c.y1,d=Math.random(),g=Math.random();return d+g>=1&&(d=1-d,g=1-g),u.x=c.x1+(h*d+l*g),u.y=c.y1+(s*d+v*g),u};o.exports=x},52172:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),x=e(39757),c=function(u,h){var s=x(u);return a(u,s.x,s.y,h)};o.exports=c},49907:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),x=function(c,u,h){return a(c,u.x,u.y,h)};o.exports=x},99614:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=Math.cos(c),h=Math.sin(c),s=e.x1-a,l=e.y1-x;return e.x1=s*u-l*h+a,e.y1=s*h+l*u+x,s=e.x2-a,l=e.y2-x,e.x2=s*u-l*h+a,e.y2=s*h+l*u+x,s=e.x3-a,l=e.y3-x,e.x3=s*u-l*h+a,e.y3=s*h+l*u+x,e};o.exports=E},16483:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(10690),c=e(20437),u=e(80672),h=e(23777),s=e(23031),l=e(90260),v=new a({initialize:function(g,y,S,T,w,P){g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=0),P===void 0&&(P=0),this.type=h.TRIANGLE,this.x1=g,this.y1=y,this.x2=S,this.y2=T,this.x3=w,this.y3=P},contains:function(d,g){return x(this,d,g)},getPoint:function(d,g){return c(this,d,g)},getPoints:function(d,g,y){return u(this,d,g,y)},getRandomPoint:function(d){return l(this,d)},setTo:function(d,g,y,S,T,w){return d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=0),w===void 0&&(w=0),this.x1=d,this.y1=g,this.x2=y,this.y2=S,this.x3=T,this.y3=w,this},getLineA:function(d){return d===void 0&&(d=new s),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new s),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new s),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var g=0;this.x1<=this.x2&&this.x1<=this.x3?g=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?g=this.x2-d:g=this.x3-d,this.x1-=g,this.x2-=g,this.x3-=g}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var g=0;this.x1>=this.x2&&this.x1>=this.x3?g=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?g=this.x2-d:g=this.x3-d,this.x1-=g,this.x2-=g,this.x3-=g}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var g=0;this.y1<=this.y2&&this.y1<=this.y3?g=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?g=this.y2-d:g=this.y3-d,this.y1-=g,this.y2-=g,this.y3-=g}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var g=0;this.y1>=this.y2&&this.y1>=this.y3?g=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?g=this.y2-d:g=this.y3-d,this.y1-=g,this.y2-=g,this.y3-=g}}});o.exports=v},84435:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483);a.Area=e(41658),a.BuildEquilateral=e(39208),a.BuildFromPolygon=e(39545),a.BuildRight=e(90301),a.CenterOn=e(23707),a.Centroid=e(97523),a.CircumCenter=e(24951),a.CircumCircle=e(85614),a.Clone=e(74422),a.Contains=e(10690),a.ContainsArray=e(48653),a.ContainsPoint=e(96006),a.CopyFrom=e(71326),a.Decompose=e(71694),a.Equals=e(33522),a.GetPoint=e(20437),a.GetPoints=e(80672),a.InCenter=e(39757),a.Perimeter=e(1376),a.Offset=e(13584),a.Random=e(90260),a.Rotate=e(52172),a.RotateAroundPoint=e(49907),a.RotateAroundXY=e(99614),o.exports=a},74457:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};o.exports=E},84409:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return function(x,c,u,h){var s=e.getPixelAlpha(c,u,h.texture.key,h.frame.name);return s&&s>=a}};o.exports=E},7003:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(93301),c=e(50792),u=e(8214),h=e(8443),s=e(78970),l=e(85098),v=e(42515),d=e(36210),g=e(61340),y=e(85955),S=new a({initialize:function(w,P){this.game=w,this.scaleManager,this.canvas,this.config=P,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=P.inputKeyboard?new s(this):null,this.mouse=P.inputMouse?new l(this):null,this.touch=P.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=P.inputActivePointers;for(var A=0;A<=this.pointersTotal;A++){var R=new v(this,A);R.smoothFactor=P.inputSmoothFactor,this.pointers.push(R)}this.mousePointer=P.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new g,this._tempMatrix2=new g,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],w.events.once(h.BOOT,this.boot,this)},boot:function(){var T=this.game,w=T.events;this.canvas=T.canvas,this.scaleManager=T.scale,this.events.emit(u.MANAGER_BOOT),w.on(h.PRE_RENDER,this.preRender,this),w.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(T){this.isOver=!0,this.events.emit(u.GAME_OVER,T)},setCanvasOut:function(T){this.isOver=!1,this.events.emit(u.GAME_OUT,T)},preRender:function(){var T=this.game.loop.now,w=this.game.loop.delta,P=this.game.scene.getScenes(!0,!0);this.time=T,this.events.emit(u.MANAGER_UPDATE);for(var A=0;A<P.length;A++){var R=P[A];if(R.sys.input&&R.sys.input.updatePoll(T,w)&&this.globalTopOnly)return}},setDefaultCursor:function(T){this.defaultCursor=T,this.canvas.style.cursor!==T&&(this.canvas.style.cursor=T)},setCursor:function(T){T.cursor&&(this.canvas.style.cursor=T.cursor)},resetCursor:function(T,w){(w||T&&T.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(T){T===void 0&&(T=1);var w=[];this.pointersTotal+T>10&&(T=10-this.pointersTotal);for(var P=0;P<T;P++){var A=this.pointers.length,R=new v(this,A);R.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(R),this.pointersTotal++,w.push(R)}return w},updateInputPlugins:function(T,w){var P=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var A=0;A<P.length;A++){var R=P[A];if(R.sys.input){var I=R.sys.input.update(T,w);if(I&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(T){for(var w=this.pointers,P=[],A=0;A<T.changedTouches.length;A++)for(var R=T.changedTouches[A],I=1;I<w.length;I++){var M=w[I];if(!M.active){M.touchstart(R,T),this.activePointer=M,P.push(M);break}}this.updateInputPlugins(x.TOUCH_START,P)},onTouchMove:function(T){for(var w=this.pointers,P=[],A=0;A<T.changedTouches.length;A++)for(var R=T.changedTouches[A],I=1;I<w.length;I++){var M=w[I];if(M.active&&M.identifier===R.identifier){var L=document.elementFromPoint(R.clientX,R.clientY),N=L===this.canvas;!this.isOver&&N?this.setCanvasOver(T):this.isOver&&!N&&this.setCanvasOut(T),this.isOver&&(M.touchmove(R,T),this.activePointer=M,P.push(M));break}}this.updateInputPlugins(x.TOUCH_MOVE,P)},onTouchEnd:function(T){for(var w=this.pointers,P=[],A=0;A<T.changedTouches.length;A++)for(var R=T.changedTouches[A],I=1;I<w.length;I++){var M=w[I];if(M.active&&M.identifier===R.identifier){M.touchend(R,T),P.push(M);break}}this.updateInputPlugins(x.TOUCH_END,P)},onTouchCancel:function(T){for(var w=this.pointers,P=[],A=0;A<T.changedTouches.length;A++)for(var R=T.changedTouches[A],I=1;I<w.length;I++){var M=w[I];if(M.active&&M.identifier===R.identifier){M.touchcancel(R,T),P.push(M);break}}this.updateInputPlugins(x.TOUCH_CANCEL,P)},onMouseDown:function(T){var w=this.mousePointer;w.down(T),w.updateMotion(),this.activePointer=w,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(T){var w=this.mousePointer;w.move(T),w.updateMotion(),this.activePointer=w,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(T){var w=this.mousePointer;w.up(T),w.updateMotion(),this.activePointer=w,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(T){var w=this.mousePointer;w.wheel(T),this.activePointer=w,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(T){var w=this.mouse.locked;this.mousePointer.locked=w,this.events.emit(u.POINTERLOCK_CHANGE,T,w)},inputCandidate:function(T,w){var P=T.input;if(!P||!P.enabled||!T.willRender(w))return!1;var A=!0,R=T.parentContainer;if(R)do{if(!R.willRender(w)){A=!1;break}R=R.parentContainer}while(R);return A},hitTest:function(T,w,P,A){A===void 0&&(A=this._tempHitTest);var R=this._tempPoint,I=P.scrollX,M=P.scrollY;A.length=0;var L=T.x,N=T.y;P.getWorldPoint(L,N,R),T.worldX=R.x,T.worldY=R.y;for(var G={x:0,y:0},D=this._tempMatrix,B=this._tempMatrix2,$=0;$<w.length;$++){var k=w[$];if(this.inputCandidate(k,P)){var X=R.x+I*k.scrollFactorX-I,Y=R.y+M*k.scrollFactorY-M;k.parentContainer?(k.getWorldTransformMatrix(D,B),D.applyInverse(X,Y,G)):y(X,Y,k.x,k.y,k.rotation,k.scaleX,k.scaleY,G),this.pointWithinHitArea(k,G.x,G.y)&&A.push(k)}}return A},pointWithinHitArea:function(T,w,P){w+=T.displayOriginX,P+=T.displayOriginY;var A=T.input;return A&&A.hitAreaCallback(A.hitArea,w,P,T)?(A.localX=w,A.localY=P,!0):!1},pointWithinInteractiveObject:function(T,w,P){return T.hitArea?(w+=T.gameObject.displayOriginX,P+=T.gameObject.displayOriginY,T.localX=w,T.localY=P,T.hitAreaCallback(T.hitArea,w,P,T)):!1},transformPointer:function(T,w,P,A){var R=T.position,I=T.prevPosition;I.x=R.x,I.y=R.y;var M=this.scaleManager.transformX(w),L=this.scaleManager.transformY(P),N=T.smoothFactor;!A||N===0?(R.x=M,R.y=L):(R.x=M*N+I.x*(1-N),R.y=L*N+I.y*(1-N))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var T=0;T<this.pointers.length;T++)this.pointers[T].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});o.exports=S},48205:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=e(87902),c=e(83419),u=e(93301),h=e(74457),s=e(84409),l=e(20339),v=e(8497),d=e(81154),g=e(8214),y=e(50792),S=e(95540),T=e(23777),w=e(89639),P=e(41212),A=e(37277),R=e(87841),I=e(37303),M=e(44594),L=e(16483),N=e(10690),G=new c({Extends:y,initialize:function(B){y.call(this),this.scene=B,this.systems=B.sys,this.settings=B.sys.settings,this.manager=B.sys.game.input,this.pluginEvents=new y,this.enabled=!0,this.displayList,this.cameras,w.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var $={cancelled:!1};this._eventContainer={stopPropagation:function(){$.cancelled=!0}},this._eventData=$,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,B.sys.events.once(M.BOOT,this.boot,this),B.sys.events.on(M.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(M.DESTROY,this.destroy,this),this.pluginEvents.emit(g.BOOT)},start:function(){var D=this.systems.events;D.on(M.TRANSITION_START,this.transitionIn,this),D.on(M.TRANSITION_OUT,this.transitionOut,this),D.on(M.TRANSITION_COMPLETE,this.transitionComplete,this),D.on(M.PRE_UPDATE,this.preUpdate,this),D.once(M.SHUTDOWN,this.shutdown,this),this.manager.events.on(g.GAME_OUT,this.onGameOut,this),this.manager.events.on(g.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(g.START)},onGameOver:function(D){this.isActive()&&this.emit(g.GAME_OVER,D.timeStamp,D)},onGameOut:function(D){this.isActive()&&this.emit(g.GAME_OUT,D.timeStamp,D)},preUpdate:function(){this.pluginEvents.emit(g.PRE_UPDATE);var D=this._pendingRemoval,B=this._pendingInsertion,$=D.length,k=B.length;if(!($===0&&k===0)){for(var X=this._list,Y=0;Y<$;Y++){var Z=D[Y],Q=X.indexOf(Z);Q>-1&&(X.splice(Q,1),this.clear(Z,!0))}this._pendingRemoval.length=0,this._list=X.concat(B.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(D){this.manager&&this.manager.setCursor(D)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(D,B){if(!this.isActive())return!1;if(this.pluginEvents.emit(g.UPDATE,D,B),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var $,k=this.manager,X=k.pointers;for($=0;$<X.length;$++)X[$].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=B,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Z=!1;for($=0;$<X.length;$++){var Q=0,j=X[$];this._tempZones=[],this._temp=this.hitTestPointer(j),this.sortGameObjects(this._temp,j),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),Q+=this.processOverOutEvents(j),this.getDragState(j)===2&&this.processDragThresholdEvent(j,D),Q>0&&(Z=!0)}return Z},update:function(D,B){if(!this.isActive())return!1;for(var $=!1,k=0;k<B.length;k++){var X=0,Y=B[k];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),D){case u.MOUSE_DOWN:X+=this.processDragDownEvent(Y),X+=this.processDownEvents(Y),X+=this.processOverOutEvents(Y);break;case u.MOUSE_UP:X+=this.processDragUpEvent(Y),X+=this.processUpEvents(Y),X+=this.processOverOutEvents(Y);break;case u.TOUCH_START:X+=this.processDragDownEvent(Y),X+=this.processDownEvents(Y),X+=this.processOverEvents(Y);break;case u.TOUCH_END:case u.TOUCH_CANCEL:X+=this.processDragUpEvent(Y),X+=this.processUpEvents(Y),X+=this.processOutEvents(Y);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:X+=this.processDragMoveEvent(Y),X+=this.processMoveEvents(Y),X+=this.processOverOutEvents(Y);break;case u.MOUSE_WHEEL:X+=this.processWheelEvent(Y);break}X>0&&($=!0)}return this._updatedThisFrame=!0,$},clear:function(D,B){B===void 0&&(B=!1),this.disable(D);var $=D.input;$&&(this.removeDebug(D),this.manager.resetCursor($),$.gameObject=void 0,$.target=void 0,$.hitArea=void 0,$.hitAreaCallback=void 0,$.callbackContext=void 0,D.input=null),B||this.queueForRemoval(D);var k=this._draggable.indexOf(D);return k>-1&&this._draggable.splice(k,1),D},disable:function(D,B){B===void 0&&(B=!1);var $=D.input;$&&($.enabled=!1,$.dragState=0);for(var k=this._drag,X=this._over,Y=this.manager,Z=0,Q;Z<Y.pointers.length;Z++)Q=k[Z].indexOf(D),Q>-1&&k[Z].splice(Q,1),Q=X[Z].indexOf(D),Q>-1&&X[Z].splice(Q,1);return B&&this.resetCursor(),this},enable:function(D,B,$,k){return k===void 0&&(k=!1),D.input?D.input.enabled=!0:this.setHitArea(D,B,$),D.input&&k&&!D.input.dropZone&&(D.input.dropZone=k),this},hitTestPointer:function(D){for(var B=this.cameras.getCamerasBelowPointer(D),$=0;$<B.length;$++){for(var k=B[$],X=this.manager.hitTest(D,this._list,k),Y=0;Y<X.length;Y++){var Z=X[Y];Z.input.dropZone&&this._tempZones.push(Z)}if(X.length>0)return D.camera=k,X}return D.camera=B[0],[]},processDownEvents:function(D){var B=0,$=this._temp,k=this._eventData,X=this._eventContainer;k.cancelled=!1;for(var Y=0;Y<$.length;Y++){var Z=$[Y];if(!(!Z.input||!Z.input.enabled)&&(B++,Z.emit(g.GAMEOBJECT_POINTER_DOWN,D,Z.input.localX,Z.input.localY,X),k.cancelled||!this.isActive()||Z.input&&Z.input.enabled&&(this.emit(g.GAMEOBJECT_DOWN,D,Z,X),k.cancelled||!this.isActive())))break}return!k.cancelled&&this.isActive()&&(D.downElement===this.manager.game.canvas?this.emit(g.POINTER_DOWN,D,$):this.emit(g.POINTER_DOWN_OUTSIDE,D)),B},getDragState:function(D){return this._dragState[D.id]},setDragState:function(D,B){this._dragState[D.id]=B},processDragThresholdEvent:function(D,B){var $=!1,k=this.dragTimeThreshold,X=this.dragDistanceThreshold;if((X>0&&l(D.x,D.y,D.downX,D.downY)>=X||k>0&&B>=D.downTime+k)&&($=!0),$)return this.setDragState(D,3),this.processDragStartList(D)},processDragStartList:function(D){if(this.getDragState(D)!==3)return 0;var B=this._drag[D.id];B.length>1&&(B=B.slice(0));for(var $=0;$<B.length;$++){var k=B[$],X=k.input;X.dragState=2,X.dragStartX=k.x,X.dragStartY=k.y,X.dragStartXGlobal=D.worldX,X.dragStartYGlobal=D.worldY,X.dragStartCamera=D.camera,X.dragX=X.dragStartXGlobal-X.dragStartX,X.dragY=X.dragStartYGlobal-X.dragStartY,k.emit(g.GAMEOBJECT_DRAG_START,D,X.dragX,X.dragY),this.emit(g.DRAG_START,D,k)}return this.setDragState(D,4),B.length},processDragDownEvent:function(D){var B=this._temp;if(this._draggable.length===0||B.length===0||!D.primaryDown||this.getDragState(D)!==0)return 0;this.setDragState(D,1);for(var $=[],k=0;k<B.length;k++){var X=B[k];X.input.draggable&&X.input.dragState===0&&$.push(X)}return $.length===0?(this.setDragState(D,0),0):($.length>1&&(this.sortGameObjects($,D),this.topOnly&&$.splice(1)),this._drag[D.id]=$,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(D,3),this.processDragStartList(D)):(this.setDragState(D,2),0))},processDragMoveEvent:function(D){if(this.getDragState(D)===2&&this.processDragThresholdEvent(D,this.manager.game.loop.now),this.getDragState(D)!==4)return 0;var B=this._tempZones,$=this._drag[D.id];$.length>1&&($=$.slice(0));for(var k=0;k<$.length;k++){var X=$[k],Y=X.input,Z=Y.target;if(Z){var Q=B.indexOf(Z);Q===0?(X.emit(g.GAMEOBJECT_DRAG_OVER,D,Z),this.emit(g.DRAG_OVER,D,X,Z)):Q>0?(X.emit(g.GAMEOBJECT_DRAG_LEAVE,D,Z),this.emit(g.DRAG_LEAVE,D,X,Z),Y.target=B[0],Z=Y.target,X.emit(g.GAMEOBJECT_DRAG_ENTER,D,Z),this.emit(g.DRAG_ENTER,D,X,Z)):(X.emit(g.GAMEOBJECT_DRAG_LEAVE,D,Z),this.emit(g.DRAG_LEAVE,D,X,Z),B[0]?(Y.target=B[0],Z=Y.target,X.emit(g.GAMEOBJECT_DRAG_ENTER,D,Z),this.emit(g.DRAG_ENTER,D,X,Z)):Y.target=null)}else!Z&&B[0]&&(Y.target=B[0],Z=Y.target,X.emit(g.GAMEOBJECT_DRAG_ENTER,D,Z),this.emit(g.DRAG_ENTER,D,X,Z));var j,K,W=D.positionToCamera(Y.dragStartCamera);if(!X.parentContainer)j=W.x-Y.dragX,K=W.y-Y.dragY;else{var V=W.x-Y.dragStartXGlobal,J=W.y-Y.dragStartYGlobal,ee=X.getParentRotation(),te=V*Math.cos(ee)+J*Math.sin(ee),ne=J*Math.cos(ee)-V*Math.sin(ee);te*=1/X.parentContainer.scaleX,ne*=1/X.parentContainer.scaleY,j=te+Y.dragStartX,K=ne+Y.dragStartY}X.emit(g.GAMEOBJECT_DRAG,D,j,K),this.emit(g.DRAG,D,X,j,K)}return $.length},processDragUpEvent:function(D){var B=this._drag[D.id];B.length>1&&(B=B.slice(0));for(var $=0;$<B.length;$++){var k=B[$],X=k.input;if(X&&X.dragState===2){X.dragState=0,X.dragX=X.localX-k.displayOriginX,X.dragY=X.localY-k.displayOriginY,X.dragStartCamera=null;var Y=!1,Z=X.target;Z&&(k.emit(g.GAMEOBJECT_DROP,D,Z),this.emit(g.DROP,D,k,Z),X.target=null,Y=!0),k.input&&k.input.enabled&&(k.emit(g.GAMEOBJECT_DRAG_END,D,X.dragX,X.dragY,Y),this.emit(g.DRAG_END,D,k,Y))}}return this.setDragState(D,0),B.splice(0),0},processMoveEvents:function(D){var B=0,$=this._temp,k=this._eventData,X=this._eventContainer;k.cancelled=!1;for(var Y=0;Y<$.length;Y++){var Z=$[Y];if(!(!Z.input||!Z.input.enabled)&&(B++,Z.emit(g.GAMEOBJECT_POINTER_MOVE,D,Z.input.localX,Z.input.localY,X),k.cancelled||!this.isActive()||Z.input&&Z.input.enabled&&(this.emit(g.GAMEOBJECT_MOVE,D,Z,X),k.cancelled||!this.isActive()||this.topOnly)))break}return!k.cancelled&&this.isActive()&&this.emit(g.POINTER_MOVE,D,$),B},processWheelEvent:function(D){var B=0,$=this._temp,k=this._eventData,X=this._eventContainer;k.cancelled=!1;for(var Y=D.deltaX,Z=D.deltaY,Q=D.deltaZ,j=0;j<$.length;j++){var K=$[j];if(!(!K.input||!K.input.enabled)&&(B++,K.emit(g.GAMEOBJECT_POINTER_WHEEL,D,Y,Z,Q,X),k.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(g.GAMEOBJECT_WHEEL,D,K,Y,Z,Q,X),k.cancelled||!this.isActive())))break}return!k.cancelled&&this.isActive()&&this.emit(g.POINTER_WHEEL,D,$,Y,Z,Q),B},processOverEvents:function(D){var B=this._temp,$=0,k=B.length,X=[];if(k>0){var Y=this.manager,Z=this._eventData,Q=this._eventContainer;Z.cancelled=!1;for(var j=0;j<k;j++){var K=B[j];if(!(!K.input||!K.input.enabled)&&(X.push(K),Y.setCursor(K.input),K.emit(g.GAMEOBJECT_POINTER_OVER,D,K.input.localX,K.input.localY,Q),$++,Z.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(g.GAMEOBJECT_OVER,D,K,Q),Z.cancelled||!this.isActive())))break}!Z.cancelled&&this.isActive()&&this.emit(g.POINTER_OVER,D,X)}return this._over[D.id]=X,$},processOutEvents:function(D){var B=this._over[D.id],$=0,k=B.length;if(k>0){var X=this.manager,Y=this._eventData,Z=this._eventContainer;Y.cancelled=!1,this.sortGameObjects(B,D);for(var Q=0;Q<k;Q++){var j=B[Q];if(j=B[Q],!(!j.input||!j.input.enabled)&&(X.resetCursor(j.input),j.emit(g.GAMEOBJECT_POINTER_OUT,D,Z),$++,Y.cancelled||!this.isActive()||j.input&&j.input.enabled&&(this.emit(g.GAMEOBJECT_OUT,D,j,Z),Y.cancelled||!this.isActive())))break}!Y.cancelled&&this.isActive()&&this.emit(g.POINTER_OUT,D,B),this._over[D.id]=[]}return $},processOverOutEvents:function(D){var B=this._temp,$,k,X=[],Y=[],Z=[],Q=this._over[D.id],j=this._drag[D.id],K=this.manager;for($=0;$<Q.length;$++)k=Q[$],B.indexOf(k)===-1&&j.indexOf(k)===-1?X.push(k):Z.push(k);for($=0;$<B.length;$++)k=B[$],Q.indexOf(k)===-1&&Y.push(k);var W=X.length,V=0,J=this._eventData,ee=this._eventContainer;if(J.cancelled=!1,W>0){for(this.sortGameObjects(X,D),$=0;$<W&&(k=X[$],!(!(!k.input||!k.input.enabled)&&(K.resetCursor(k.input),k.emit(g.GAMEOBJECT_POINTER_OUT,D,ee),V++,J.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(g.GAMEOBJECT_OUT,D,k,ee),J.cancelled||!this.isActive()))));$++);(!J.cancelled||this.isActive())&&this.emit(g.POINTER_OUT,D,X)}if(W=Y.length,J.cancelled=!1,W>0){for(this.sortGameObjects(Y,D),$=0;$<W&&(k=Y[$],!(!(!k.input||!k.input.enabled)&&(K.setCursor(k.input),k.emit(g.GAMEOBJECT_POINTER_OVER,D,k.input.localX,k.input.localY,ee),V++,J.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(g.GAMEOBJECT_OVER,D,k,ee),J.cancelled||!this.isActive()))));$++);!J.cancelled&&this.isActive()&&this.emit(g.POINTER_OVER,D,Y)}return Q=Z.concat(Y),this._over[D.id]=this.sortGameObjects(Q,D),V},processUpEvents:function(D){var B=this._temp,$=this._eventData,k=this._eventContainer;$.cancelled=!1;for(var X=0;X<B.length;X++){var Y=B[X];if(!(!Y.input||!Y.input.enabled)&&(Y.emit(g.GAMEOBJECT_POINTER_UP,D,Y.input.localX,Y.input.localY,k),$.cancelled||!this.isActive()||Y.input&&Y.input.enabled&&(this.emit(g.GAMEOBJECT_UP,D,Y,k),$.cancelled||!this.isActive())))break}return!$.cancelled&&this.isActive()&&(D.upElement===this.manager.game.canvas?this.emit(g.POINTER_UP,D,B):this.emit(g.POINTER_UP_OUTSIDE,D)),B.length},forceDownState:function(D,B){this.forceState(D,B,g.GAMEOBJECT_POINTER_DOWN,g.GAMEOBJECT_DOWN,!1)},forceUpState:function(D,B){this.forceState(D,B,g.GAMEOBJECT_POINTER_UP,g.GAMEOBJECT_UP,!1)},forceOverState:function(D,B){this.forceState(D,B,g.GAMEOBJECT_POINTER_OVER,g.GAMEOBJECT_OVER,!0)},forceOutState:function(D,B){this.forceState(D,B,g.GAMEOBJECT_POINTER_OUT,g.GAMEOBJECT_OUT,!1)},forceState:function(D,B,$,k,X){var Y=this._eventData,Z=this._eventContainer;Y.cancelled=!1,B.input&&B.input.enabled&&(B.emit($,D,B.input.localX,B.input.localY,Z),X&&this.setCursor(B.input),!Y.cancelled&&this.isActive()&&B.input&&B.input.enabled&&this.emit(k,D,B,Z))},queueForInsertion:function(D){return this._pendingInsertion.indexOf(D)===-1&&this._list.indexOf(D)===-1&&this._pendingInsertion.push(D),this},queueForRemoval:function(D){return this._pendingRemoval.push(D),this},setDraggable:function(D,B){B===void 0&&(B=!0),Array.isArray(D)||(D=[D]);for(var $=0;$<D.length;$++){var k=D[$];k.input.draggable=B;var X=this._draggable.indexOf(k);B&&X===-1?this._draggable.push(k):!B&&X>-1&&this._draggable.splice(X,1)}return this},makePixelPerfect:function(D){D===void 0&&(D=1);var B=this.systems.textures;return s(B,D)},setHitArea:function(D,B,$){if(B===void 0)return this.setHitAreaFromTexture(D);Array.isArray(D)||(D=[D]);var k=!1,X=!1,Y=!1,Z=!1,Q=!1,j=!0;if(P(B)&&Object.keys(B).length){var K=B,W=D.some(function(ne){return ne.hasOwnProperty("faces")});if(!W){B=S(K,"hitArea",null),$=S(K,"hitAreaCallback",null),Q=S(K,"pixelPerfect",!1);var V=S(K,"alphaTolerance",1);Q&&(B={},$=this.makePixelPerfect(V))}k=S(K,"draggable",!1),X=S(K,"dropZone",!1),Y=S(K,"cursor",!1),Z=S(K,"useHandCursor",!1),(!B||!$)&&(this.setHitAreaFromTexture(D),j=!1)}else typeof B=="function"&&!$&&($=B,B={});for(var J=0;J<D.length;J++){var ee=D[J];if(Q&&ee.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var te=ee.input?ee.input:h(ee,B,$);te.customHitArea=j,te.dropZone=X,te.cursor=Z?"pointer":Y,ee.input=te,k&&this.setDraggable(ee),this.queueForInsertion(ee)}return this},setHitAreaCircle:function(D,B,$,k,X){X===void 0&&(X=x);var Y=new a(B,$,k);return this.setHitArea(D,Y,X)},setHitAreaEllipse:function(D,B,$,k,X,Y){Y===void 0&&(Y=d);var Z=new v(B,$,k,X);return this.setHitArea(D,Z,Y)},setHitAreaFromTexture:function(D,B){B===void 0&&(B=I),Array.isArray(D)||(D=[D]);for(var $=0;$<D.length;$++){var k=D[$],X=k.frame,Y=0,Z=0;if(k.width?(Y=k.width,Z=k.height):X&&(Y=X.realWidth,Z=X.realHeight),k.type==="Container"&&(Y===0||Z===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Y!==0&&Z!==0&&(k.input=h(k,new R(0,0,Y,Z),B),this.queueForInsertion(k))}return this},setHitAreaRectangle:function(D,B,$,k,X,Y){Y===void 0&&(Y=I);var Z=new R(B,$,k,X);return this.setHitArea(D,Z,Y)},setHitAreaTriangle:function(D,B,$,k,X,Y,Z,Q){Q===void 0&&(Q=N);var j=new L(B,$,k,X,Y,Z);return this.setHitArea(D,j,Q)},enableDebug:function(D,B){B===void 0&&(B=65280);var $=D.input;if(!$||!$.hitArea)return this;var k=$.hitArea,X=k.type,Y=$.hitAreaDebug,Z=this.systems.add,Q=this.systems.updateList;Y&&(Q.remove(Y),Y.destroy(),Y=null);var j=0,K=0;switch(X){case T.CIRCLE:Y=Z.arc(0,0,k.radius),j=k.x-k.radius,K=k.y-k.radius;break;case T.ELLIPSE:Y=Z.ellipse(0,0,k.width,k.height),j=k.x-k.width/2,K=k.y-k.height/2;break;case T.LINE:Y=Z.line(0,0,k.x1,k.y1,k.x2,k.y2);break;case T.POLYGON:Y=Z.polygon(0,0,k.points);break;case T.RECTANGLE:Y=Z.rectangle(0,0,k.width,k.height),j=k.x,K=k.y;break;case T.TRIANGLE:Y=Z.triangle(0,0,k.x1,k.y1,k.x2,k.y2,k.x3,k.y3);break}return Y&&(Y.isFilled=!1,Y.strokeColor=B,Y.preUpdate=function(){Y.setVisible(D.visible),Y.setStrokeStyle(1/D.scale,Y.strokeColor),Y.setDisplayOrigin(D.displayOriginX,D.displayOriginY);var W=D.x,V=D.y,J=D.rotation,ee=D.scaleX,te=D.scaleY;if(D.parentContainer){var ne=D.getWorldTransformMatrix();W=ne.tx,V=ne.ty,J=ne.rotation,ee=ne.scaleX,te=ne.scaleY}Y.setRotation(J),Y.setScale(ee,te),Y.setPosition(W+j*ee,V+K*te),Y.setScrollFactor(D.scrollFactorX,D.scrollFactorY),Y.setDepth(D.depth)},Q.add(Y),$.hitAreaDebug=Y),this},removeDebug:function(D){var B=D.input;if(B&&B.hitAreaDebug){var $=B.hitAreaDebug;$.destroy(),B.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(D){return this.pollRate=D,this._pollTimer=0,this},setGlobalTopOnly:function(D){return this.manager.globalTopOnly=D,this},setTopOnly:function(D){return this.topOnly=D,this},sortGameObjects:function(D,B){if(D.length<2||!B.camera)return D;var $=B.camera.renderList;return D.sort(function(k,X){var Y=Math.max($.indexOf(k),0),Z=Math.max($.indexOf(X),0);return Z-Y})},sortDropZones:function(D){return D.length<2?D:(this.scene.sys.depthSort(),D.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(D,B){if(!D.parentContainer&&!B.parentContainer)return this.displayList.getIndex(B)-this.displayList.getIndex(D);if(D.parentContainer===B.parentContainer)return B.parentContainer.getIndex(B)-D.parentContainer.getIndex(D);if(D.parentContainer===B)return-1;if(B.parentContainer===D)return 1;for(var $=D.getIndexList(),k=B.getIndexList(),X=Math.min($.length,k.length),Y=0;Y<X;Y++){var Z=$[Y],Q=k[Y];if(Z!==Q)return Q-Z}return k.length-$.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(D){return this.manager.addPointer(D)},setDefaultCursor:function(D){return this.manager.setDefaultCursor(D),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(g.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var D=0;D<10;D++)this._drag[D]=[],this._over[D]=[];this.removeAllListeners();var B=this.manager;B.canvas.style.cursor=B.defaultCursor;var $=this.systems.events;$.off(M.TRANSITION_START,this.transitionIn,this),$.off(M.TRANSITION_OUT,this.transitionOut,this),$.off(M.TRANSITION_COMPLETE,this.transitionComplete,this),$.off(M.PRE_UPDATE,this.preUpdate,this),B.events.off(g.GAME_OUT,this.onGameOut,this),B.events.off(g.GAME_OVER,this.onGameOver,this),$.off(M.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var D=this.manager.pointers,B=0;B<D.length;B++)D[B].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(g.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(M.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});A.register("InputPlugin",G,"input"),o.exports=G},89639:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x={},c={};c.register=function(u,h,s,l,v){x[u]={plugin:h,mapping:s,settingsKey:l,configKey:v}},c.getPlugin=function(u){return x[u]},c.install=function(u){var h=u.scene.sys,s=h.settings.input,l=h.game.config;for(var v in x){var d=x[v].plugin,g=x[v].mapping,y=x[v].settingsKey,S=x[v].configKey;a(s,y,l[S])&&(u[g]=new d(u))}},c.remove=function(u){x.hasOwnProperty(u)&&delete x[u]},o.exports=c},42515:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31040),x=e(83419),c=e(20339),u=e(43855),h=e(47235),s=e(26099),l=e(25892),v=new x({initialize:function(g,y){this.manager=g,this.id=y,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=y===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var g=d.getWorldPoint(this.x,this.y);return this.worldX=g.x,this.worldY=g.y,this},positionToCamera:function(d,g){return d.getWorldPoint(this.x,this.y,g)},updateMotion:function(){var d=this.position.x,g=this.position.y,y=this.midPoint.x,S=this.midPoint.y;if(!(d===y&&g===S)){var T=h(this.motionFactor,y,d),w=h(this.motionFactor,S,g);u(T,d,.1)&&(T=d),u(w,g,.1)&&(w=g),this.midPoint.set(T,w);var P=d-T,A=g-w;this.velocity.set(P,A),this.angle=a(T,w,d,g),this.distance=Math.sqrt(P*P+A*A)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,g){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=g,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=g.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,g){this.event=g,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=g.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,g){this.buttons=0,this.event=g,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=g.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,g){this.buttons=0,this.event=g,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=g.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,g){d===void 0&&(d=10),g===void 0&&(g=[]);for(var y=this.prevPosition.x,S=this.prevPosition.y,T=this.position.x,w=this.position.y,P=0;P<d;P++){var A=1/d*P;g[P]={x:h(A,y,T),y:h(A,S,w)}}return g},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});o.exports=v},93301:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};o.exports=E},7179:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},85375:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},39843:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},23388:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},16133:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},27829:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},53904:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},56058:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},2642:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},88171:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectdown"},36147:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},71692:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},96149:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},81285:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},74048:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},21322:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},49378:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},86754:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectmove"},86433:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectout"},60709:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectover"},24081:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},11172:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},18907:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},95579:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},35368:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},26972:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},47078:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectup"},73802:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectwheel"},56718:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameout"},25936:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameover"},27503:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},50852:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="process"},96438:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},59152:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerlockchange"},47777:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},27957:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdownoutside"},19444:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},54251:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},18667:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},27192:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},24652:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerupoutside"},45132:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},44512:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},15757:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},41637:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},93802:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},8214:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}},97421:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h){this.pad=u,this.events=u.events,this.index=h,this.value=0,this.threshold=.1},update:function(c){this.value=c},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});o.exports=x},28884:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92734),c=new a({initialize:function(h,s){this.pad=h,this.events=h.manager,this.index=s,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var h=this.pad,s=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,h,this,u),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,s,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,h,this,u),this.pad.emit(x.GAMEPAD_BUTTON_UP,s,u,this))},destroy:function(){this.pad=null,this.events=null}});o.exports=c},99125:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97421),x=e(28884),c=e(83419),u=e(50792),h=e(26099),s=new c({Extends:u,initialize:function(v,d){u.call(this),this.manager=v,this.pad=d,this.id=d.id,this.index=d.index;for(var g=[],y=0;y<d.buttons.length;y++)g.push(new x(this,y));this.buttons=g;var S=[];for(y=0;y<d.axes.length;y++)S.push(new a(this,y));this.axes=S,this.vibration=d.vibrationActuator;var T={value:0,pressed:!1};this._LCLeft=g[14]?g[14]:T,this._LCRight=g[15]?g[15]:T,this._LCTop=g[12]?g[12]:T,this._LCBottom=g[13]?g[13]:T,this._RCLeft=g[2]?g[2]:T,this._RCRight=g[1]?g[1]:T,this._RCTop=g[3]?g[3]:T,this._RCBottom=g[0]?g[0]:T,this._FBLeftTop=g[4]?g[4]:T,this._FBLeftBottom=g[6]?g[6]:T,this._FBRightTop=g[5]?g[5]:T,this._FBRightBottom=g[7]?g[7]:T;var w={value:0};this._HAxisLeft=S[0]?S[0]:w,this._VAxisLeft=S[1]?S[1]:w,this._HAxisRight=S[2]?S[2]:w,this._VAxisRight=S[3]?S[3]:w,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(l){return this.axes[l].getValue()},setAxisThreshold:function(l){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=l},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(l){return this.buttons[l].value},isButtonDown:function(l){return this.buttons[l].pressed},update:function(l){if(!(l.timestamp<this._created)){var v,d=this.buttons,g=l.buttons,y=d.length;for(v=0;v<y;v++)d[v].update(g[v].value);var S=this.axes,T=l.axes;for(y=S.length,v=0;v<y;v++)S[v].update(T[v]);y>=2&&(this.leftStick.set(S[0].getValue(),S[1].getValue()),y>=4&&this.rightStick.set(S[2].getValue(),S[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var l;for(l=0;l<this.buttons.length;l++)this.buttons[l].destroy();for(l=0;l<this.axes.length;l++)this.axes[l].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});o.exports=s},56654:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(92734),u=e(99125),h=e(35154),s=e(89639),l=e(8214),v=new a({Extends:x,initialize:function(g){x.call(this),this.scene=g.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=g,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,g.pluginEvents.once(l.BOOT,this.boot,this),g.pluginEvents.on(l.START,this.start,this)},boot:function(){var d=this.scene.sys.game,g=this.settings.input,y=d.config;this.enabled=h(g,"gamepad",y.inputGamepad)&&d.device.input.gamepads,this.target=h(g,"gamepad.target",y.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,g=this.target,y=function(S){S.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(S))};this.onGamepadHandler=y,g.addEventListener("gamepadconnected",y,!1),g.addEventListener("gamepaddisconnected",y,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var g=this.gamepads,y=0;y<d.length;y++){var S=d[y];if(S){var T=S.id,w=S.index,P=g[w];if(P)P.id!==T?(P.destroy(),g[w]=new u(this,S)):P.update(S);else{var A=new u(this,S);g[w]=A,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=A):this._pad3=A:this._pad2=A:this._pad1=A}}}},getAll:function(){for(var d=[],g=this.gamepads,y=0;y<g.length;y++)g[y]&&d.push(g[y]);return d},getPad:function(d){for(var g=this.gamepads,y=0;y<g.length;y++)if(g[y]&&g[y].index===d)return g[y]},update:function(){if(this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var g=this.queue.splice(0,d),y=0;y<d;y++){var S=g[y],T=this.getPad(S.gamepad.index);S.type==="gamepadconnected"?this.emit(c.CONNECTED,T,S):S.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,T,S)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),o.exports=v},89651:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}},46008:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},7629:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},42206:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="connected"},86544:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="disconnected"},94784:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},14325:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},92734:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}},48646:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}},14350:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93301),x=e(79291),c={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};c=x(!1,c,a),o.exports=c},78970:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(83419),c=e(8443),u=e(8214),h=e(46032),s=e(29747),l=new x({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,d.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(g){if(!(g.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(g),v.manager.events.emit(u.MANAGER_PROCESS);var y=g.altKey||g.ctrlKey||g.shiftKey||g.metaKey;v.preventDefault&&!y&&v.captures.indexOf(g.keyCode)>-1&&g.preventDefault()}},this.onKeyUp=function(g){if(!(g.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(g),v.manager.events.emit(u.MANAGER_PROCESS);var y=g.altKey||g.ctrlKey||g.shiftKey||g.metaKey;v.preventDefault&&!y&&v.captures.indexOf(g.keyCode)>-1&&g.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,g=0;g<v.length;g++){var y=v[g];typeof y=="string"&&(y=h[y.trim().toUpperCase()]),d.indexOf(y)===-1&&d.push(y)}this.preventDefault=d.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,g=0;g<v.length;g++){var y=v[g];typeof y=="string"&&(y=h[y.toUpperCase()]),a(d,y)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});o.exports=l},28846:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(95922),u=e(8443),h=e(35154),s=e(8214),l=e(89639),v=e(30472),d=e(46032),g=e(87960),y=e(74600),S=e(44594),T=e(56583),w=new a({Extends:x,initialize:function(A){x.call(this),this.game=A.systems.game,this.scene=A.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=A,this.manager=A.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,A.pluginEvents.once(s.BOOT,this.boot,this),A.pluginEvents.on(s.START,this.start,this)},boot:function(){var P=this.settings.input;this.enabled=h(P,"keyboard",!0);var A=h(P,"keyboard.capture",null);A&&this.addCaptures(A),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(S.PAUSE,this.resetKeys,this),this.scene.sys.events.on(S.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(P){return this.manager.addCapture(P),this},removeCapture:function(P){return this.manager.removeCapture(P),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(P,A,R){A===void 0&&(A=!0),R===void 0&&(R=!1);var I={};if(typeof P=="string"){P=P.split(",");for(var M=0;M<P.length;M++){var L=P[M].trim();L&&(I[L]=this.addKey(L,A,R))}}else for(var N in P)I[N]=this.addKey(P[N],A,R);return I},addKey:function(P,A,R){A===void 0&&(A=!0),R===void 0&&(R=!1);var I=this.keys;if(P instanceof v){var M=I.indexOf(P);return M>-1?I[M]=P:I[P.keyCode]=P,A&&this.addCapture(P.keyCode),P.setEmitOnRepeat(R),P}return typeof P=="string"&&(P=d[P.toUpperCase()]),I[P]||(I[P]=new v(this,P),A&&this.addCapture(P),I[P].setEmitOnRepeat(R)),I[P]},removeKey:function(P,A,R){A===void 0&&(A=!1),R===void 0&&(R=!1);var I=this.keys,M;if(P instanceof v){var L=I.indexOf(P);L>-1&&(M=this.keys[L],this.keys[L]=void 0)}else typeof P=="string"&&(P=d[P.toUpperCase()]);return I[P]&&(M=I[P],I[P]=void 0),M&&(M.plugin=null,R&&this.removeCapture(M.keyCode),A&&M.destroy()),this},removeAllKeys:function(P,A){P===void 0&&(P=!1),A===void 0&&(A=!1);for(var R=this.keys,I=0;I<R.length;I++){var M=R[I];M&&(R[I]=void 0,A&&this.removeCapture(M.keyCode),P&&M.destroy())}return this},createCombo:function(P,A){return new g(this,P,A)},checkDown:function(P,A){if(A===void 0&&(A=0),this.enabled&&P.isDown){var R=T(this.time-P.timeDown,A);if(R>P._tick)return P._tick=R,!0}return!1},update:function(){var P=this.manager.queue,A=P.length;if(!(!this.isActive()||A===0))for(var R=this.keys,I=0;I<A;I++){var M=P[I],L=M.keyCode,N=R[L],G=!1;M.cancelled===void 0&&(M.cancelled=0,M.stopImmediatePropagation=function(){M.cancelled=1},M.stopPropagation=function(){M.cancelled=-1}),M.cancelled!==-1&&(L===this.prevCode&&M.timeStamp===this.prevTime&&M.type===this.prevType||(this.prevCode=L,this.prevTime=M.timeStamp,this.prevType=M.type,M.type==="keydown"?(N&&(G=N.isDown,N.onDown(M)),!M.cancelled&&(!N||!G)&&(y[L]&&this.emit(c.KEY_DOWN+y[L],M),M.cancelled||this.emit(c.ANY_KEY_DOWN,M))):(N&&N.onUp(M),M.cancelled||(y[L]&&this.emit(c.KEY_UP+y[L],M),M.cancelled||this.emit(c.ANY_KEY_UP,M))),M.cancelled===1&&(M.cancelled=0)))}},resetKeys:function(){for(var P=this.keys,A=0;A<P.length;A++)P[A]&&P[A].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(S.PAUSE,this.resetKeys,this),this.scene.sys.events.off(S.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var P=this.keys,A=0;A<P.length;A++)P[A]&&P[A].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",w,"keyboard","keyboard","inputKeyboard"),o.exports=w},66970:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.timeLastMatched=e.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};o.exports=E},87960:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95922),c=e(95540),u=e(68769),h=e(92803),s=new a({initialize:function(v,d,g){if(g===void 0&&(g={}),d.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var y=0;y<d.length;y++){var S=d[y];typeof S=="string"?this.keyCodes.push(S.toUpperCase().charCodeAt(0)):typeof S=="number"?this.keyCodes.push(S):S.hasOwnProperty("keyCode")&&this.keyCodes.push(S.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(g,"resetOnWrongKey",!0),this.maxKeyDelay=c(g,"maxKeyDelay",0),this.resetOnMatch=c(g,"resetOnMatch",!1),this.deleteOnMatch=c(g,"deleteOnMatch",!1);var T=this,w=function(P){if(!(T.matched||!T.enabled)){var A=u(P,T);A&&(T.manager.emit(x.COMBO_MATCH,T,P),T.resetOnMatch?h(T):T.deleteOnMatch&&T.destroy())}};this.onKeyDown=w,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});o.exports=s},68769:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66970),x=function(c,u){if(u.matched)return!0;var h=!1,s=!1;if(c.keyCode===u.current)if(u.index>0&&u.maxKeyDelay>0){var l=u.timeLastMatched+u.maxKeyDelay;c.timeStamp<=l&&(s=!0,h=a(c,u))}else s=!0,h=a(c,u);return!s&&u.resetOnWrongKey&&(u.index=0,u.current=u.keyCodes[0]),h&&(u.timeLastMatched=c.timeStamp,u.matched=!0,u.timeMatched=c.timeStamp),h};o.exports=x},92803:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};o.exports=E},92612:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown"},23345:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup"},21957:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keycombomatch"},44743:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},3771:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown-"},46358:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup-"},75674:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},95922:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}},51442:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}},37015:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=50);var x=e.plugin.game.loop.time-e.timeDown;return e.isDown&&x<a};o.exports=E},90229:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e._justDown?(e._justDown=!1,!0):!1};o.exports=E},38796:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e._justUp?(e._justUp=!1,!0):!1};o.exports=E},30472:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(95922),u=new a({Extends:x,initialize:function(s,l){x.call(this),this.plugin=s,this.keyCode=l,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});o.exports=u},46032:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};o.exports=E},74600:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(46032),x={};for(var c in a)x[a[c]]=c;o.exports=x},41170:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=50);var x=e.plugin.game.loop.time-e.timeUp;return e.isUp&&x<a};o.exports=E},85098:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89357),c=e(8214),u=e(29747),h=new a({initialize:function(l){this.manager=l,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,l.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.passive=s.inputMousePassive,this.preventDefaultDown=s.inputMousePreventDefaultDown,this.preventDefaultUp=s.inputMousePreventDefaultUp,this.preventDefaultMove=s.inputMousePreventDefaultMove,this.preventDefaultWheel=s.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var s=this.target;s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this.target;if(s){var l=this,v=this.manager,d=v.canvas,g=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(S){!S.defaultPrevented&&l.enabled&&v&&v.enabled&&(v.onMouseMove(S),l.preventDefaultMove&&S.preventDefault())},this.onMouseDown=function(S){g&&window.focus(),!S.defaultPrevented&&l.enabled&&v&&v.enabled&&(v.onMouseDown(S),l.preventDefaultDown&&S.target===d&&S.preventDefault())},this.onMouseDownWindow=function(S){S.sourceCapabilities&&S.sourceCapabilities.firesTouchEvents||!S.defaultPrevented&&l.enabled&&v&&v.enabled&&S.target!==d&&v.onMouseDown(S)},this.onMouseUp=function(S){!S.defaultPrevented&&l.enabled&&v&&v.enabled&&(v.onMouseUp(S),l.preventDefaultUp&&S.target===d&&S.preventDefault())},this.onMouseUpWindow=function(S){S.sourceCapabilities&&S.sourceCapabilities.firesTouchEvents||!S.defaultPrevented&&l.enabled&&v&&v.enabled&&S.target!==d&&v.onMouseUp(S)},this.onMouseOver=function(S){!S.defaultPrevented&&l.enabled&&v&&v.enabled&&v.setCanvasOver(S)},this.onMouseOut=function(S){!S.defaultPrevented&&l.enabled&&v&&v.enabled&&v.setCanvasOut(S)},this.onMouseWheel=function(S){!S.defaultPrevented&&l.enabled&&v&&v.enabled&&v.onMouseWheel(S),l.preventDefaultWheel&&S.target===d&&S.preventDefault()};var y={passive:!0};if(s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),s.addEventListener("mouseover",this.onMouseOver,y),s.addEventListener("mouseout",this.onMouseOut,y),this.preventDefaultWheel?s.addEventListener("wheel",this.onMouseWheel,{passive:!1}):s.addEventListener("wheel",this.onMouseWheel,y),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,y),window.top.addEventListener("mouseup",this.onMouseUpWindow,y)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,y),window.addEventListener("mouseup",this.onMouseUpWindow,y),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(S){var T=l.target;l.locked=document.pointerLockElement===T||document.mozPointerLockElement===T||document.webkitPointerLockElement===T,v.onPointerLockChange(S)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&(s=this.isTop?window.top:window,s.removeEventListener("mousedown",this.onMouseDownWindow),s.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=h},87078:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={MouseManager:e(85098)}},36210:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8214),c=e(29747),u=new a({initialize:function(s){this.manager=s,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.isTop=!0,s.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(h){var s=this,l=this.manager,v=l.canvas,d=window&&window.focus&&l.game.config.autoFocus;this.onTouchMove=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onTouchMove(T),s.capture&&T.cancelable&&T.preventDefault())},this.onTouchStart=function(T){d&&window.focus(),!T.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onTouchStart(T),s.capture&&T.cancelable&&T.target===v&&T.preventDefault())},this.onTouchStartWindow=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&T.target!==v&&l.onTouchStart(T)},this.onTouchEnd=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onTouchEnd(T),s.capture&&T.cancelable&&T.target===v&&T.preventDefault())},this.onTouchEndWindow=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&T.target!==v&&l.onTouchEnd(T)},this.onTouchCancel=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&(l.onTouchCancel(T),s.capture&&T.preventDefault())},this.onTouchCancelWindow=function(T){!T.defaultPrevented&&s.enabled&&l&&l.enabled&&l.onTouchCancel(T)};var g=this.capture,y={passive:!0},S={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,g?S:y),h.addEventListener("touchmove",this.onTouchMove,g?S:y),h.addEventListener("touchend",this.onTouchEnd,g?S:y),h.addEventListener("touchcancel",this.onTouchCancel,g?S:y),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,S),window.top.addEventListener("touchend",this.onTouchEndWindow,S),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,S)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,S),window.addEventListener("touchend",this.onTouchEndWindow,S),window.addEventListener("touchcancel",this.onTouchCancelWindow,S),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=u},95618:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TouchManager:e(36210)}},41299:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(54899),u=e(95540),h=e(98356),s=e(3374),l=e(84376),v=e(92638),d=new a({initialize:function(y,S){if(this.loader=y,this.cache=u(S,"cache",!1),this.type=u(S,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(S,"key",!1);var T=this.key;if(y.prefix&&y.prefix!==""&&(this.key=y.prefix+T),!this.key)throw new Error("Invalid File key: "+this.key);var w=u(S,"url");w===void 0?w=y.path+T+"."+u(S,"extension",""):typeof w=="string"&&!w.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(w=y.path+w),this.url=w,this.src="",this.xhrSettings=v(u(S,"responseType",void 0)),u(S,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,u(S,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(S,"config",{}),this.multiFile,this.linkFile,this.base64=typeof w=="string"&&w.indexOf("data:")===0,this.retryAttempts=u(S,"maxRetries",y.maxRetries)},setLink:function(g){this.linkFile=g,g.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===x.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=x.FILE_LOADING,this.src=h(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=l(this,this.loader.xhr)}},onLoad:function(g,y){var S=g.responseURL&&this.loader.localSchemes.some(function(P){return g.responseURL.indexOf(P)===0}),T=S&&y.target.status===0,w=!(y.target&&y.target.status!==200)||T;g.readyState===4&&g.status>=400&&g.status<=599&&(w=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,w)},onBase64Load:function(g){this.xhrLoader=g,this.state=x.FILE_LOADED,this.percentComplete=1,this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(g){g.lengthComputable&&(this.bytesLoaded=g.loaded,this.bytesTotal=g.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(g){if(this.state!==x.FILE_PENDING_DESTROY){g===void 0&&(g=this.data);var y=this.key,S=this.type;this.loader.emit(c.FILE_COMPLETE,y,S,g),this.loader.emit(c.FILE_KEY_COMPLETE+S+"-"+y,y,S,g),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(g,y,S){if(typeof URL=="function")g.src=URL.createObjectURL(y);else{var T=new FileReader;T.onload=function(){g.removeAttribute("crossOrigin"),g.src="data:"+(y.type||S)+";base64,"+T.result.split(",")[1]},T.onerror=g.onerror,T.readAsDataURL(y)}},d.revokeObjectURL=function(g){typeof URL=="function"&&URL.revokeObjectURL(g.src)},o.exports=d},74099:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},e={install:function(a){for(var x in E)a[x]=E[x]},register:function(a,x){E[a]=x},destroy:function(){E={}}};o.exports=e},98356:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:a+e.url:!1};o.exports=E},74261:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(35072),u=e(50792),h=e(54899),s=e(74099),l=e(95540),v=e(35154),d=e(41212),g=e(37277),y=e(44594),S=e(92638),T=new a({Extends:u,initialize:function(P){u.call(this);var A=P.sys.game.config,R=P.sys.settings.loader;this.scene=P,this.systems=P.sys,this.cacheManager=P.sys.cache,this.textureManager=P.sys.textures,this.sceneManager=P.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(R,"baseURL",A.loaderBaseURL)),this.setPath(l(R,"path",A.loaderPath)),this.setPrefix(l(R,"prefix",A.loaderPrefix)),this.maxParallelDownloads=l(R,"maxParallelDownloads",A.loaderMaxParallelDownloads),this.xhr=S(l(R,"responseType",A.loaderResponseType),l(R,"async",A.loaderAsync),l(R,"user",A.loaderUser),l(R,"password",A.loaderPassword),l(R,"timeout",A.loaderTimeout),l(R,"withCredentials",A.loaderWithCredentials)),this.crossOrigin=l(R,"crossOrigin",A.loaderCrossOrigin),this.imageLoadType=l(R,"imageLoadType",A.loaderImageLoadType),this.localSchemes=l(R,"localScheme",A.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=l(R,"maxRetries",A.loaderMaxRetries),P.sys.events.once(y.BOOT,this.boot,this),P.sys.events.on(y.START,this.pluginStart,this)},boot:function(){this.systems.events.once(y.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(y.SHUTDOWN,this.shutdown,this)},setBaseURL:function(w){return w===void 0&&(w=""),w!==""&&w.substr(-1)!=="/"&&(w=w.concat("/")),this.baseURL=w,this},setPath:function(w){return w===void 0&&(w=""),w!==""&&w.substr(-1)!=="/"&&(w=w.concat("/")),this.path=w,this},setPrefix:function(w){return w===void 0&&(w=""),this.prefix=w,this},setCORS:function(w){return this.crossOrigin=w,this},addFile:function(w){Array.isArray(w)||(w=[w]);for(var P=0;P<w.length;P++){var A=w[P];this.keyExists(A)||(this.list.set(A),this.emit(h.ADD,A.key,A.type,this,A),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(w){var P=w.hasCacheConflict();return P||this.list.iterate(function(A){if(A.type===w.type&&A.key===w.key)return P=!0,!1}),!P&&this.isLoading()&&(this.inflight.iterate(function(A){if(A.type===w.type&&A.key===w.key)return P=!0,!1}),this.queue.iterate(function(A){if(A.type===w.type&&A.key===w.key)return P=!0,!1})),P},addPack:function(w,P){if(typeof P=="string"){var A=v(w,P);A&&(w={packKey:A})}var R=0,I=this.baseURL,M=this.path,L=this.prefix;for(var N in w)if(Object.prototype.hasOwnProperty.call(w,N)){var G=w[N],D=l(G,"baseURL",I),B=l(G,"path",M),$=l(G,"prefix",L),k=l(G,"files",null),X=l(G,"defaultType","void");if(Array.isArray(k)){this.setBaseURL(D),this.setPath(B),this.setPrefix($);for(var Y=0;Y<k.length;Y++){var Z=k[Y],Q=Z.hasOwnProperty("type")?Z.type:X;this[Q]&&(this[Q](Z),R++)}}}return this.setBaseURL(I),this.setPath(M),this.setPrefix(L),R>0},removePack:function(w,P){var A=this.systems.anims,R=this.cacheManager,I=this.textureManager,M={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},L;if(d(w))L=w;else if(L=R.json.get(w),!L){console.warn("Asset Pack not found in JSON cache:",w);return}P&&(L={_:L[P]});for(var N in L){var G=L[N],D=l(G,"prefix",""),B=l(G,"files"),$=l(G,"defaultType");if(Array.isArray(B))for(var k=0;k<B.length;k++){var X=B[k],Y=X.hasOwnProperty("type")?X.type:$;if(!Y){console.warn("No type:",X);continue}var Z=D+X.key;if(Y==="animation"&&A.remove(Z),!((Y==="aseprite"||Y==="atlas"||Y==="atlasXML"||Y==="htmlTexture"||Y==="image"||Y==="multiatlas"||Y==="spritesheet"||Y==="svg"||Y==="texture"||Y==="unityAtlas")&&(I.remove(Z),!M[Y]))){if(Y==="pack"){this.removePack(Z,X.dataKey);continue}if(Y==="spine"){var Q=R.custom.spine.get(Z);if(!Q)continue;var j=Q.prefix===void 0?"":Q.prefix;R.custom.spine.remove(Z);var K=R.custom.spineTextures.get(Z);if(!K)continue;R.custom.spineTextures.remove(Z);for(var W=0;W<K.pages.length;W++){var V=K.pages[W],J=j+V.name,ee=Z+":"+J;I.exists(ee)?I.remove(ee):I.remove(J)}}var te=M[Y];if(te!==null){if(!te){console.warn("Unknown type:",Y);continue}var ne=R[te];ne.remove(Z)}}}}},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(y.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(w){if((w.state===x.FILE_POPULATED||w.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(w),this.list.delete(w),w.crossOrigin||(w.crossOrigin=this.crossOrigin),w.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(w,P){this.inflight&&(this.inflight.delete(w),this.updateProgress(),P?(this.totalComplete++,this.queue.set(w),this.emit(h.FILE_LOAD,w),w.onProcess()):(this.totalFailed++,this._deleteQueue.set(w),this.emit(h.FILE_LOAD_ERROR,w),this.fileProcessComplete(w)))},fileProcessComplete:function(w){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(w.state===x.FILE_ERRORED?w.multiFile&&w.multiFile.onFileFailed(w):w.state===x.FILE_COMPLETE&&(w.multiFile?w.multiFile.isReadyToProcess()&&(w.multiFile.addToCache(),w.multiFile.pendingDestroy()):(w.addToCache(),w.pendingDestroy())),this.queue.delete(w),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(y.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(w){this._deleteQueue.set(w)},saveJSON:function(w,P){return this.save(JSON.stringify(w),P)},save:function(w,P,A){P===void 0&&(P="file.json"),A===void 0&&(A="application/json");var R=new Blob([w],{type:A}),I=URL.createObjectURL(R),M=document.createElement("a");return M.download=P,M.textContent="Download "+P,M.href=I,M.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var w=this.systems.game.config,P=this.systems.settings.loader;this.setBaseURL(l(P,"baseURL",w.loaderBaseURL)),this.setPath(l(P,"path",w.loaderPath)),this.setPrefix(l(P,"prefix",w.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(y.UPDATE,this.update,this),this.systems.events.off(y.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(y.UPDATE,this.update,this),this.systems.events.off(y.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});g.register("Loader",T,"load"),o.exports=T},3374:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(92638),c=function(u,h){var s=u===void 0?x():a({},u);if(h)for(var l in h)h[l]!==void 0&&(s[l]=h[l]);return s};o.exports=c},26430:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(54899),u=new a({initialize:function(s,l,v,d){var g=[];d.forEach(function(T){T&&g.push(T)}),this.loader=s,this.type=l,this.key=v;var y=this.key;s.prefix&&s.prefix!==""&&(this.key=s.prefix+y),this.multiKeyIndex=s.multiKeyIndex++,this.files=g,this.state=x.FILE_PENDING,this.complete=!1,this.pending=g.length,this.failed=0,this.config={},this.baseURL=s.baseURL,this.path=s.path,this.prefix=s.prefix;for(var S=0;S<g.length;S++)g[S].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var s=this.files.indexOf(h);s!==-1&&this.pending--},onFileFailed:function(h){var s=this.files.indexOf(h);s!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var h=this.key,s=this.type;this.loader.emit(c.FILE_COMPLETE,h,s),this.loader.emit(c.FILE_KEY_COMPLETE+s+"-"+h,h,s),this.loader.flagForRemoval(this);for(var l=0;l<this.files.length;l++)this.files[l].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});o.exports=u},84376:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3374),x=function(c,u){var h=a(u,c.xhrSettings);if(c.base64){var s=c.url.split(";base64,").pop()||c.url.split(",").pop(),l={responseText:atob(s)};c.onBase64Load(l);return}var v=new XMLHttpRequest;if(v.open("GET",c.src,h.async,h.user,h.password),v.responseType=c.xhrSettings.responseType,v.timeout=h.timeout,h.headers)for(var d in h.headers)v.setRequestHeader(d,h.headers[d]);return h.header&&h.headerValue&&v.setRequestHeader(h.header,h.headerValue),h.requestedWith&&v.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&v.overrideMimeType(h.overrideMimeType),h.withCredentials&&(v.withCredentials=!0),v.onload=c.onLoad.bind(c,v),v.onerror=c.onError.bind(c,v),v.onprogress=c.onProgress.bind(c),v.ontimeout=c.onError.bind(c,v),v.send(),v};o.exports=x},92638:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h){return e===void 0&&(e=""),a===void 0&&(a=!0),x===void 0&&(x=""),c===void 0&&(c=""),u===void 0&&(u=0),h===void 0&&(h=!1),{responseType:e,async:a,user:x,password:c,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};o.exports=E},23906:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};o.exports=E},42155:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addfile"},38991:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},27540:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete"},87464:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete-"},94486:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loaderror"},13035:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="load"},38144:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fileprogress"},97520:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postprocess"},85595:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="progress"},55680:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},54899:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}},14135:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(518),u=e(54899),h=new a({Extends:c,initialize:function(l,v,d,g,y){c.call(this,l,v,d,g,y),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),c.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(s,l,v,d){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new h(this,s[g]));else this.addFile(new h(this,s,l,d,v));return this}),o.exports=h},76272:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(518),l=e(26430),v=new a({Extends:l,initialize:function(g,y,S,T,w,P){var A,R;if(h(y)){var I=y;y=c(I,"key"),A=new u(g,{key:y,url:c(I,"textureURL"),extension:c(I,"textureExtension","png"),normalMap:c(I,"normalMap"),xhrSettings:c(I,"textureXhrSettings")}),R=new s(g,{key:y,url:c(I,"atlasURL"),extension:c(I,"atlasExtension","json"),xhrSettings:c(I,"atlasXhrSettings")})}else A=new u(g,y,S,w),R=new s(g,y,T,P);A.linkFile?l.call(this,g,"atlasjson",y,[A,R,A.linkFile]):l.call(this,g,"atlasjson",y,[A,R])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],g=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,g.data,y),g.addToCache(),this.complete=!0}}});x.register("aseprite",function(d,g,y,S,T){var w;if(Array.isArray(d))for(var P=0;P<d.length;P++)w=new v(this,d[P]),this.addFile(w.files);else w=new v(this,d,g,y,S,T),this.addFile(w.files);return this}),o.exports=v},38734:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(518),l=e(26430),v=new a({Extends:l,initialize:function(g,y,S,T,w,P){var A,R;if(h(y)){var I=y;y=c(I,"key"),A=new u(g,{key:y,url:c(I,"textureURL"),extension:c(I,"textureExtension","png"),normalMap:c(I,"normalMap"),xhrSettings:c(I,"textureXhrSettings")}),R=new s(g,{key:y,url:c(I,"atlasURL"),extension:c(I,"atlasExtension","json"),xhrSettings:c(I,"atlasXhrSettings")})}else A=new u(g,y,S,w),R=new s(g,y,T,P);A.linkFile?l.call(this,g,"atlasjson",y,[A,R,A.linkFile]):l.call(this,g,"atlasjson",y,[A,R])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],g=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,g.data,y),this.complete=!0}}});x.register("atlas",function(d,g,y,S,T){var w;if(Array.isArray(d))for(var P=0;P<d.length;P++)w=new v(this,d[P]),this.addFile(w.files);else w=new v(this,d,g,y,S,T),this.addFile(w.files);return this}),o.exports=v},74599:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(26430),l=e(57318),v=new a({Extends:s,initialize:function(g,y,S,T,w,P){var A,R;if(h(y)){var I=y;y=c(I,"key"),A=new u(g,{key:y,url:c(I,"textureURL"),extension:c(I,"textureExtension","png"),normalMap:c(I,"normalMap"),xhrSettings:c(I,"textureXhrSettings")}),R=new l(g,{key:y,url:c(I,"atlasURL"),extension:c(I,"atlasExtension","xml"),xhrSettings:c(I,"atlasXhrSettings")})}else A=new u(g,y,S,w),R=new l(g,y,T,P);A.linkFile?s.call(this,g,"atlasxml",y,[A,R,A.linkFile]):s.call(this,g,"atlasxml",y,[A,R])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],g=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,g.data,y),this.complete=!0}}});x.register("atlasXML",function(d,g,y,S,T){var w;if(Array.isArray(d))for(var P=0;P<d.length;P++)w=new v(this,d[P]),this.addFile(w.files);else w=new v(this,d,g,y,S,T),this.addFile(w.files);return this}),o.exports=v},21097:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(89749),l=e(41212),v=new a({Extends:c,initialize:function(g,y,S,T,w){if(l(y)){var P=y;y=h(P,"key"),T=h(P,"xhrSettings"),w=h(P,"context",w)}var A={type:"audio",cache:g.cacheManager.audio,extension:S.type,responseType:"arraybuffer",key:y,url:S.url,xhrSettings:T,config:{context:w}};c.call(this,g,A)},onProcess:function(){this.state=x.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(g){d.data=g,d.onProcessComplete()},function(g){console.error("Error decoding audio: "+d.key+" - ",g?g.message:null),d.onProcessError()}),this.config.context=null}});v.create=function(d,g,y,S,T){var w=d.systems.game,P=w.config.audio,A=w.device.audio;l(g)&&(y=h(g,"url",[]),S=h(g,"config",{}));var R=v.getAudioURL(w,y);return R?A.webAudio&&!P.disableWebAudio?new v(d,g,R,T,w.sound.context):new s(d,g,R,S):(console.warn('No audio URLs for "%s" can play on this device',g),null)},v.getAudioURL=function(d,g){Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++){var S=h(g[y],"url",g[y]);if(S.indexOf("blob:")===0||S.indexOf("data:")===0)return{url:S,type:""};var T=S.match(/\.([a-zA-Z0-9]+)($|\?)/);if(T=h(g[y],"type",T?T[1]:"").toLowerCase(),d.device.audio[T])return{url:S,type:T}}return null},u.register("audio",function(d,g,y,S){var T=this.systems.game,w=T.config.audio,P=T.device.audio;if(w.noAudio||!P.webAudio&&!P.audioData)return this;var A;if(Array.isArray(d))for(var R=0;R<d.length;R++)A=v.create(this,d[R]),A&&this.addFile(A);else A=v.create(this,d,g,y,S),A&&this.addFile(A);return this}),o.exports=v},89524:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21097),x=e(83419),c=e(74099),u=e(95540),h=e(41212),s=e(518),l=e(26430),v=new x({Extends:l,initialize:function(g,y,S,T,w,P,A){if(h(y)){var R=y;y=u(R,"key"),S=u(R,"jsonURL"),T=u(R,"audioURL"),w=u(R,"audioConfig"),P=u(R,"audioXhrSettings"),A=u(R,"jsonXhrSettings")}var I;if(!T)I=new s(g,y,S,A),l.call(this,g,"audiosprite",y,[I]),this.config.resourceLoad=!0,this.config.audioConfig=w,this.config.audioXhrSettings=P;else{var M=a.create(g,y,T,w,P);M&&(I=new s(g,y,S,A),l.call(this,g,"audiosprite",y,[M,I]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var g=this.files.indexOf(d);if(g!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var y=d.data.resources,S=u(this.config,"audioConfig"),T=u(this.config,"audioXhrSettings"),w=a.create(this.loader,d.key,y,S,T);w&&(this.addToMultiFile(w),this.loader.addFile(w))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],g=this.files[1];d.addToCache(),g.addToCache(),this.complete=!0}}});c.register("audioSprite",function(d,g,y,S,T,w){var P=this.systems.game,A=P.config.audio,R=P.device.audio;if(A&&A.noAudio||!R.webAudio&&!R.audioData)return this;var I;if(Array.isArray(d))for(var M=0;M<d.length;M++)I=new v(this,d[M]),I.files&&this.addFile(I.files);else I=new v(this,d,g,y,S,T,w),I.files&&this.addFile(I.files);return this})},85722:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T){var w="bin";if(s(g)){var P=g;g=h(P,"key"),y=h(P,"url"),S=h(P,"xhrSettings"),w=h(P,"extension",w),T=h(P,"dataType",T)}var A={type:"binary",cache:d.cacheManager.binary,extension:w,responseType:"arraybuffer",key:g,url:y,xhrSettings:S,config:{dataType:T}};c.call(this,d,A)},onProcess:function(){this.state=x.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(v,d,g,y){if(Array.isArray(v))for(var S=0;S<v.length;S++)this.addFile(new l(this,v[S]));else this.addFile(new l(this,v,d,y,g));return this}),o.exports=l},97025:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(26430),l=e(21859),v=e(57318),d=new a({Extends:s,initialize:function(y,S,T,w,P,A){var R,I;if(h(S)){var M=S;S=c(M,"key"),R=new u(y,{key:S,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),I=new v(y,{key:S,url:c(M,"fontDataURL"),extension:c(M,"fontDataExtension","xml"),xhrSettings:c(M,"fontDataXhrSettings")})}else R=new u(y,S,T,P),I=new v(y,S,w,A);R.linkFile?s.call(this,y,"bitmapfont",S,[R,I,R.linkFile]):s.call(this,y,"bitmapfont",S,[R,I])},addToCache:function(){if(this.isReadyToProcess()){var g=this.files[0],y=this.files[1];g.addToCache();var S=g.cache.get(g.key),T=l(y.data,g.cache.getFrame(g.key),0,0,S);this.loader.cacheManager.bitmapFont.add(g.key,{data:T,texture:g.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(g,y,S,T,w){var P;if(Array.isArray(g))for(var A=0;A<g.length;A++)P=new d(this,g[A]),this.addFile(P.files);else P=new d(this,g,y,S,T,w),this.addFile(P.files);return this}),o.exports=d},16024:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S){var T="css";if(s(g)){var w=g;g=h(w,"key"),y=h(w,"url"),S=h(w,"xhrSettings"),T=h(w,"extension",T)}var P={type:"script",cache:!1,extension:T,responseType:"text",key:g,url:y,xhrSettings:S};c.call(this,d,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(v,d,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new l(this,v[y]));else this.addFile(new l(this,v,d,g));return this}),o.exports=l},69559:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38734),x=e(85722),c=e(83419),u=e(74099),h=e(95540),s=e(19550),l=e(41212),v=e(518),d=e(31403),g=e(46975),y=e(59327),S=e(26430),T=e(82038),w=e(55222),P=new c({Extends:S,initialize:function(R,I,M,L){if(M.multiAtlasURL){var N=new v(R,{key:I,url:M.multiAtlasURL,xhrSettings:L,config:M});S.call(this,R,"texture",I,[N])}else{var G=M.textureURL.substr(M.textureURL.length-3);M.type||(M.type=G.toLowerCase()==="ktx"?"KTX":"PVR");var D=new x(R,{key:I,url:M.textureURL,extension:G,xhrSettings:L,config:M});if(M.atlasURL){var B=new v(R,{key:I,url:M.atlasURL,xhrSettings:L,config:M});S.call(this,R,"texture",I,[D,B])}else S.call(this,R,"texture",I,[D])}this.config=M},onFileComplete:function(A){var R=this.files.indexOf(A);if(R!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(A.type==="json"&&A.data.hasOwnProperty("textures")){var I=A.data.textures,M=this.config,L=this.loader,N=L.baseURL,G=L.path,D=L.prefix,B=h(M,"multiBaseURL",this.baseURL),$=h(M,"multiPath",this.path),k=h(M,"prefix",this.prefix),X=h(M,"textureXhrSettings");B&&L.setBaseURL(B),$&&L.setPath($),k&&L.setPrefix(k);for(var Y=0;Y<I.length;Y++){var Z=I[Y].image,Q="CMA"+this.multiKeyIndex+"_"+Z,j=new x(L,Q,Z,X);if(this.addToMultiFile(j),L.addFile(j),I[Y].normalMap){var K=new x(L,Q,I[Y].normalMap,X);K.type="normalMap",j.setLink(K),this.addToMultiFile(K),L.addFile(K)}}L.setBaseURL(N),L.setPath(G),L.setPrefix(D)}}},addToCache:function(){function A(B){console.warn('Compressed Texture Invalid: "'+N.key+'". '+B)}if(this.isReadyToProcess()){var R=this.config;if(R.multiAtlasURL)this.addMultiToCache();else{var I=this.loader.systems.renderer,M=this.loader.textureManager,L,N=this.files[0],G=this.files[1];if(R.type==="PVR"?L=T(N.data):R.type==="KTX"&&(L=d(N.data),L||A("KTX file contains unsupported format.")),L&&!w(L)&&(A("Texture dimensions failed verification. Check the texture format specifications for "+R.format+" 0x"+L.internalFormat.toString(16)+"."),L=null),L&&!I.supportsCompressedTexture(R.format,L.internalFormat)&&(A("Texture format "+R.format+" with internal format "+L.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),L=null),L){L.format=I.getCompressedTextureName(R.format,L.internalFormat);var D=G&&G.data?G.data:null;M.addCompressedTexture(N.key,L,D)}}this.complete=!0}},addMultiToCache:function(){for(var A=this.config,R=this.files[0],I=[],M=[],L=[],N=this.loader.systems.renderer,G=this.loader.textureManager,D,B=1;B<this.files.length;B++){var $=this.files[B];if($.type!=="normalMap")for(var k=$.key.indexOf("_"),X=$.key.substr(k+1),Y=$.data,Z=0;Z<R.data.textures.length;Z++){var Q=R.data.textures[Z];if(Q.image===X){A.type==="PVR"?D=T(Y):A.type==="KTX"&&(D=d(Y)),D&&N.supportsCompressedTexture(A.format,D.internalFormat)&&(D.format=N.getCompressedTextureName(A.format,D.internalFormat),M.push(D),I.push(Q),$.linkFile&&L.push($.linkFile.data));break}}}L.length===0&&(L=void 0),G.addAtlasJSONArray(this.key,M,I,L),this.complete=!0}});u.register("texture",function(A,R,I){var M=this.systems.renderer,L=function(G,D,B,$){var k={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(l(D)){var X=D;D=h(X,"key"),B=h(X,"url"),$=h(X,"xhrSettings")}var Y=!1;for(var Z in B)if(M.supportsCompressedTexture(Z)){var Q=B[Z];typeof Q=="string"?k.textureURL=Q:k=g(Q,k),k.format=Z.toUpperCase(),Y=!0;break}if(!Y)console.warn("No supported compressed texture format or IMG fallback",D);else if(k.format==="IMG"){var j,K;k.multiAtlasURL?(K=new y(G,D,k.multiAtlasURL,k.multiPath,k.multiBaseURL,$),j=K.files):k.atlasURL?(K=new a(G,D,k.textureURL,k.atlasURL,$),j=K.files):j=new s(G,D,k.textureURL,$),G.addFile(j)}else{var W=new P(G,D,k,$);G.addFile(W.files)}};if(Array.isArray(A))for(var N=0;N<A.length;N++)L(this,A[N]);else L(this,A,R,I);return this}),o.exports=P},87674:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(98356),l=e(41212),v=new a({Extends:c,initialize:function(g,y,S,T,w,P){var A="ttf";if(l(y)){var R=y;y=h(R,"key"),S=h(R,"url"),T=h(R,"format","truetype"),w=h(R,"descriptors",null),P=h(R,"xhrSettings"),A=h(R,"extension",A)}else T===void 0&&(T="truetype");var I={type:"font",cache:!1,extension:A,responseType:"text",key:y,url:S,xhrSettings:P};c.call(this,g,I),this.data={format:T,descriptors:w},this.state=x.FILE_POPULATED},onProcess:function(){this.state=x.FILE_PROCESSING,this.src=s(this,this.loader.baseURL);var d,g=this.key,y="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?d=new FontFace(g,y,this.data.descriptors):d=new FontFace(g,y);var S=this;d.load().then(function(){document.fonts.add(d),document.body.classList.add("fonts-loaded"),S.onProcessComplete()}).catch(function(){console.warn("Font failed to load",y),S.onProcessComplete()})}});u.register("font",function(d,g,y,S,T){if(Array.isArray(d))for(var w=0;w<d.length;w++)this.addFile(new v(this,d[w]));else this.addFile(new v(this,d,g,y,S,T));return this}),o.exports=v},47931:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=e(73894),v=new a({Extends:c,initialize:function(g,y,S,T,w){var P="glsl";if(s(y)){var A=y;y=h(A,"key"),S=h(A,"url"),T=h(A,"shaderType","fragment"),w=h(A,"xhrSettings"),P=h(A,"extension",P)}else T===void 0&&(T="fragment");var R={type:"glsl",cache:g.cacheManager.shader,extension:P,responseType:"text",key:y,url:S,config:{shaderType:T},xhrSettings:w};c.call(this,g,R)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),g=this.extractBlock(d,0);if(g)for(;g;){var y=this.getShaderName(g.header),S=this.getShaderType(g.header),T=this.getShaderUniforms(g.header),w=g.shader;if(this.cache.has(y)){var P=this.cache.get(y);S==="fragment"?P.fragmentSrc=w:P.vertexSrc=w,P.uniforms||(P.uniforms=T)}else S==="fragment"?this.cache.add(y,new l(y,w,"",T)):this.cache.add(y,new l(y,"",w,T));g=this.extractBlock(d,g.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data))},getShaderName:function(d){for(var g=0;g<d.length;g++){var y=d[g].trim();if(y.substring(0,5)==="name:")return y.substring(5).trim()}return this.key},getShaderType:function(d){for(var g=0;g<d.length;g++){var y=d[g].trim();if(y.substring(0,5)==="type:")return y.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var g={},y=0;y<d.length;y++){var S=d[y].trim();if(S.substring(0,8)==="uniform."){var T=S.indexOf(":");if(T){var w=S.substring(8,T);try{g[w]=JSON.parse(S.substring(T+1))}catch{console.warn("Invalid uniform JSON: "+w)}}}}return g},extractBlock:function(d,g){for(var y=-1,S=-1,T=-1,w=!1,P=!1,A=[],R=[],I=g;I<d.length;I++){var M=d[I].trim();if(M==="---")if(y===-1)y=I,w=!0;else if(w)S=I,w=!1,P=!0;else{P=!1;break}else w?A.push(M):P&&(R.push(M),T=I)}return!w&&S!==-1?{header:A,shader:R.join(`
`),offset:T}:null}});u.register("glsl",function(d,g,y,S){if(Array.isArray(d))for(var T=0;T<d.length;T++)this.addFile(new v(this,d[T]));else this.addFile(new v(this,d,g,y,S));return this}),o.exports=v},89749:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(54899),c=e(41299),u=e(95540),h=e(98356),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S){if(s(g)){var T=g;g=u(T,"key"),S=u(T,"config",S)}var w={type:"audio",cache:d.cacheManager.audio,extension:y.type,key:g,url:y.url,config:S};c.call(this,d,w),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var d=this.data[v];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var d=v.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<v;d++){var g=new Audio;g.dataset||(g.dataset={}),g.dataset.name=this.key+("0"+d).slice(-2),g.dataset.used="false",this.locked?g.dataset.locked="true":(g.dataset.locked="false",g.preload="auto",g.oncanplaythrough=this.onProgress.bind(this),g.onerror=this.onError.bind(this)),this.data.push(g)}for(d=0;d<this.data.length;d++)g=this.data[d],g.src=h(this,this.loader.baseURL),this.locked||g.load();this.locked&&setTimeout(this.onLoad.bind(this))}});o.exports=l},88470:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S){var T="html";if(s(g)){var w=g;g=h(w,"key"),y=h(w,"url"),S=h(w,"xhrSettings"),T=h(w,"extension",T)}var P={type:"text",cache:d.cacheManager.html,extension:T,responseType:"text",key:g,url:y,xhrSettings:S};c.call(this,d,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(v,d,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new l(this,v[y]));else this.addFile(new l(this,v,d,g));return this}),o.exports=l},14643:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T,w){S===void 0&&(S=512),T===void 0&&(T=512);var P="html";if(s(g)){var A=g;g=h(A,"key"),y=h(A,"url"),w=h(A,"xhrSettings"),P=h(A,"extension",P),S=h(A,"width",S),T=h(A,"height",T)}var R={type:"html",cache:d.textureManager,extension:P,responseType:"text",key:g,url:y,xhrSettings:w,config:{width:S,height:T}};c.call(this,d,R)},onProcess:function(){this.state=x.FILE_PROCESSING;var v=this.config.width,d=this.config.height,g=[];g.push('<svg width="'+v+'px" height="'+d+'px" viewBox="0 0 '+v+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),g.push('<foreignObject width="100%" height="100%">'),g.push('<body xmlns="http://www.w3.org/1999/xhtml">'),g.push(this.xhrLoader.responseText),g.push("</body>"),g.push("</foreignObject>"),g.push("</svg>");var y=[g.join(`
`)],S=this;try{var T=new window.Blob(y,{type:"image/svg+xml;charset=utf-8"})}catch{S.state=x.FILE_ERRORED,S.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){c.revokeObjectURL(S.data),S.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(S.data),S.onProcessError()},c.createObjectURL(this.data,T,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(v,d,g,y,S){if(Array.isArray(v))for(var T=0;T<v.length;T++)this.addFile(new l(this,v[T]));else this.addFile(new l(this,v,d,g,y,S));return this}),o.exports=l},19550:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=e(98356),v=new a({Extends:c,initialize:function d(g,y,S,T,w){var P="png",A;if(s(y)){var R=y;y=h(R,"key"),S=h(R,"url"),A=h(R,"normalMap"),T=h(R,"xhrSettings"),P=h(R,"extension",P),w=h(R,"frameConfig")}Array.isArray(S)&&(A=S[1],S=S[0]);var I={type:"image",cache:g.textureManager,extension:P,responseType:"blob",key:y,url:S,xhrSettings:T,config:w};if(c.call(this,g,I),A){var M=new d(g,this.key,A,T,w);M.type="normalMap",this.setLink(M),g.addFile(M)}this.useImageElementLoad=g.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this;this.data.onload=function(){c.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(d.data),d.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var d=this.state;this.state=x.FILE_PROCESSING,d===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=x.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this;this.data.onload=function(){d.state=x.FILE_LOADED,d.loader.nextFile(d,!0)},this.data.onerror=function(){d.loader.nextFile(d,!1)},this.data.src=this.src},addToCache:function(){var d=this.linkFile;d?d.state>=x.FILE_COMPLETE&&(d.type==="spritesheet"?d.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,d.data,this.data):this.cache.addImage(this.key,this.data,d.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(d,g,y){if(Array.isArray(d))for(var S=0;S<d.length;S++)this.addFile(new v(this,d[S]));else this.addFile(new v(this,d,g,y));return this}),o.exports=v},518:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(35154),l=e(41212),v=new a({Extends:c,initialize:function(g,y,S,T,w){var P="json";if(l(y)){var A=y;y=h(A,"key"),S=h(A,"url"),T=h(A,"xhrSettings"),P=h(A,"extension",P),w=h(A,"dataKey",w)}var R={type:"json",cache:g.cacheManager.json,extension:P,responseType:"text",key:y,url:S,xhrSettings:T,config:w};c.call(this,g,R),l(S)&&(w?this.data=s(S,w):this.data=S,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(y){throw this.onProcessError(),y}var g=this.config;typeof g=="string"?this.data=s(d,g,d):this.data=d}this.onProcessComplete()}});u.register("json",function(d,g,y,S){if(Array.isArray(d))for(var T=0;T<d.length;T++)this.addFile(new v(this,d[T]));else this.addFile(new v(this,d,g,S,y));return this}),o.exports=v},59327:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(518),l=e(26430),v=new a({Extends:l,initialize:function(g,y,S,T,w,P,A){if(h(y)){var R=y;y=c(R,"key"),c(R,"url",!1)?S=c(R,"url"):S=c(R,"atlasURL"),P=c(R,"xhrSettings"),T=c(R,"path"),w=c(R,"baseURL"),A=c(R,"textureXhrSettings")}var I=new s(g,y,S,P);l.call(this,g,"multiatlas",y,[I]),this.config.path=T,this.config.baseURL=w,this.config.textureXhrSettings=A},onFileComplete:function(d){var g=this.files.indexOf(d);if(g!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var y=d.data.textures,S=this.config,T=this.loader,w=T.baseURL,P=T.path,A=T.prefix,R=c(S,"baseURL",this.baseURL),I=c(S,"path",this.path),M=c(S,"prefix",this.prefix),L=c(S,"textureXhrSettings");T.setBaseURL(R),T.setPath(I),T.setPrefix(M);for(var N=0;N<y.length;N++){var G=y[N].image,D="MA"+this.multiKeyIndex+"_"+G,B=new u(T,D,G,L);if(this.addToMultiFile(B),T.addFile(B),y[N].normalMap){var $=new u(T,D,y[N].normalMap,L);$.type="normalMap",B.setLink($),this.addToMultiFile($),T.addFile($)}}T.setBaseURL(w),T.setPath(P),T.setPrefix(A)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],g=[],y=[],S=[],T=1;T<this.files.length;T++){var w=this.files[T];if(w.type!=="normalMap")for(var P=w.key.indexOf("_"),A=w.key.substr(P+1),R=w.data,I=0;I<d.data.textures.length;I++){var M=d.data.textures[I];if(M.image===A){y.push(R),g.push(M),w.linkFile&&S.push(w.linkFile.data);break}}}S.length===0&&(S=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,y,g,S),this.complete=!0}}});x.register("multiatlas",function(d,g,y,S,T){var w;if(Array.isArray(d))for(var P=0;P<d.length;P++)w=new v(this,d[P]),this.addFile(w.files);else w=new v(this,d,g,y,S,T),this.addFile(w.files);return this}),o.exports=v},99297:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(41212),h=e(26430),s=e(34328),l=new a({Extends:h,initialize:function(d,g,y,S){var T="js",w=[];if(u(g)){var P=g;g=c(P,"key"),y=c(P,"url"),S=c(P,"xhrSettings"),T=c(P,"extension",T)}Array.isArray(y)||(y=[y]);for(var A=0;A<y.length;A++){var R=new s(d,{key:g+"_"+A.toString(),url:y[A],extension:T,xhrSettings:S});R.onProcess=function(){this.onProcessComplete()},w.push(R)}h.call(this,d,"scripts",g,w)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var d=this.files[v];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});x.register("scripts",function(v,d,g){var y;if(Array.isArray(v))for(var S=0;S<v.length;S++)y=new l(this,v[S]),this.addFile(y.files);else y=new l(this,v,d,g),this.addFile(y.files);return this}),o.exports=l},41846:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(41212),h=e(26430),s=e(85048),l=e(61485),v=e(78776),d=new a({Extends:h,initialize:function(y,S,T,w,P,A){var R,I,M=y.cacheManager.obj;if(u(S)){var L=S;S=c(L,"key"),R=new v(y,{key:S,type:"obj",cache:M,url:c(L,"url"),extension:c(L,"extension","obj"),xhrSettings:c(L,"xhrSettings"),config:{flipUV:c(L,"flipUV",P)}}),w=c(L,"matURL"),w&&(I=new v(y,{key:S,type:"mat",cache:M,url:w,extension:c(L,"matExtension","mat"),xhrSettings:c(L,"xhrSettings")}))}else R=new v(y,{key:S,url:T,type:"obj",cache:M,extension:"obj",xhrSettings:A,config:{flipUV:P}}),w&&(I=new v(y,{key:S,url:w,type:"mat",cache:M,extension:"mat",xhrSettings:A}));h.call(this,y,"obj",S,[R,I])},addToCache:function(){if(this.isReadyToProcess()){var g=this.files[0],y=this.files[1],S=s(g.data,g.config.flipUV);y&&(S.materials=l(y.data)),g.cache.add(g.key,S),this.complete=!0}}});x.register("obj",function(g,y,S,T,w){var P;if(Array.isArray(g))for(var A=0;A<g.length;A++)P=new d(this,g[A]),this.addFile(P.files);else P=new d(this,g,y,S,T,w),this.addFile(P.files);return this}),o.exports=d},58610:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(74099),u=e(518),h=new a({Extends:u,initialize:function(l,v,d,g,y){u.call(this,l,v,d,g,y),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var s={};s[this.config]=this.data,this.data=s}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});c.register("pack",function(s,l,v,d){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new h(this,s[g]));else this.addFile(new h(this,s,l,d,v));return this}),o.exports=h},48988:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T,w){var P="js";if(s(g)){var A=g;g=h(A,"key"),y=h(A,"url"),w=h(A,"xhrSettings"),P=h(A,"extension",P),S=h(A,"start"),T=h(A,"mapping")}var R={type:"plugin",cache:!1,extension:P,responseType:"text",key:g,url:y,xhrSettings:w,config:{start:S,mapping:T}};c.call(this,d,R),typeof y=="function"&&(this.data=y,this.state=x.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,g=h(d,"start",!1),y=h(d,"mapping",null);if(this.state===x.FILE_POPULATED)v.install(this.key,this.data,g,y);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var S=v.install(this.key,window[this.key],g,y);(g||y)&&(this.loader.systems[y]=S,this.loader.scene[y]=S)}this.onProcessComplete()}});u.register("plugin",function(v,d,g,y,S){if(Array.isArray(v))for(var T=0;T<v.length;T++)this.addFile(new l(this,v[T]));else this.addFile(new l(this,v,d,g,y,S));return this}),o.exports=l},67397:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T){var w="svg";if(s(g)){var P=g;g=h(P,"key"),y=h(P,"url"),S=h(P,"svgConfig",{}),T=h(P,"xhrSettings"),w=h(P,"extension",w)}var A={type:"svg",cache:d.textureManager,extension:w,responseType:"text",key:g,url:y,xhrSettings:T,config:{width:h(S,"width"),height:h(S,"height"),scale:h(S,"scale")}};c.call(this,d,A)},onProcess:function(){this.state=x.FILE_PROCESSING;var v=this.xhrLoader.responseText,d=[v],g=this.config.width,y=this.config.height,S=this.config.scale;e:if(g&&y||S){var T=null,w=new DOMParser;T=w.parseFromString(v,"text/xml");var P=T.getElementsByTagName("svg")[0],A=P.hasAttribute("viewBox"),R=parseFloat(P.getAttribute("width")),I=parseFloat(P.getAttribute("height"));if(!A&&R&&I)P.setAttribute("viewBox","0  0 "+R+" "+I);else if(A&&!R&&!I){var M=P.getAttribute("viewBox").split(/\s+|,/);R=M[2],I=M[3]}if(S)if(R&&I)g=R*S,y=I*S;else break e;P.setAttribute("width",g.toString()+"px"),P.setAttribute("height",y.toString()+"px"),d=[new XMLSerializer().serializeToString(P)]}try{var L=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var N=this,G=!1;this.data.onload=function(){G||c.revokeObjectURL(N.data),N.onProcessComplete()},this.data.onerror=function(){G?N.onProcessError():(G=!0,c.revokeObjectURL(N.data),N.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},c.createObjectURL(this.data,L,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(v,d,g,y){if(Array.isArray(v))for(var S=0;S<v.length;S++)this.addFile(new l(this,v[S]));else this.addFile(new l(this,v,d,g,y));return this}),o.exports=l},88423:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S){var T="js";if(s(g)){var w=g;g=h(w,"key"),y=h(w,"url"),S=h(w,"xhrSettings"),T=h(w,"extension",T)}var P={type:"text",extension:T,responseType:"text",key:g,url:y,xhrSettings:S};c.call(this,d,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(v)),this.complete=!0}});u.register("sceneFile",function(v,d,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new l(this,v[y]));else this.addFile(new l(this,v,d,g));return this}),o.exports=l},56812:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T,w){var P="js";if(s(g)){var A=g;g=h(A,"key"),y=h(A,"url"),w=h(A,"xhrSettings"),P=h(A,"extension",P),S=h(A,"systemKey"),T=h(A,"sceneKey")}var R={type:"scenePlugin",cache:!1,extension:P,responseType:"text",key:g,url:y,xhrSettings:w,config:{systemKey:S,sceneKey:T}};c.call(this,d,R),typeof y=="function"&&(this.data=y,this.state=x.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,g=this.key,y=h(d,"systemKey",g),S=h(d,"sceneKey",g);this.state===x.FILE_POPULATED?v.installScenePlugin(y,this.data,S,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(y,window[this.key],S,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(v,d,g,y,S){if(Array.isArray(v))for(var T=0;T<v.length;T++)this.addFile(new l(this,v[T]));else this.addFile(new l(this,v,d,g,y,S));return this}),o.exports=l},34328:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S,T){var w="js";if(s(g)){var P=g;g=h(P,"key"),y=h(P,"url"),S=h(P,"type","script"),T=h(P,"xhrSettings"),w=h(P,"extension",w)}else S===void 0&&(S="script");var A={type:S,cache:!1,extension:w,responseType:"text",key:g,url:y,xhrSettings:T};c.call(this,d,A)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(v,d,g,y){if(Array.isArray(v))for(var S=0;S<v.length;S++)this.addFile(new l(this,v[S]));else this.addFile(new l(this,v,d,g,y));return this}),o.exports=l},85035:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(74099),u=e(19550),h=new a({Extends:u,initialize:function(l,v,d,g,y){u.call(this,l,v,d,y,g),this.type="spritesheet"},addToCache:function(){var s=this.linkFile;s?s.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,s.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,s.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});c.register("spritesheet",function(s,l,v,d){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new h(this,s[g]));else this.addFile(new h(this,s,l,v,d));return this}),o.exports=h},78776:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=new a({Extends:c,initialize:function(d,g,y,S){var T="text",w="txt",P=d.cacheManager.text;if(s(g)){var A=g;g=h(A,"key"),y=h(A,"url"),S=h(A,"xhrSettings"),w=h(A,"extension",w),T=h(A,"type",T),P=h(A,"cache",P)}var R={type:T,cache:P,extension:w,responseType:"text",key:g,url:y,xhrSettings:S};c.call(this,d,R)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(v,d,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new l(this,v[y]));else this.addFile(new l(this,v,d,g));return this}),o.exports=l},49477:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=e(80341),v=new a({Extends:c,initialize:function(g,y,S,T){var w="csv";if(s(y)){var P=y;y=h(P,"key"),S=h(P,"url"),T=h(P,"xhrSettings"),w=h(P,"extension",w)}var A={type:"tilemapCSV",cache:g.cacheManager.tilemap,extension:w,responseType:"text",key:y,url:S,xhrSettings:T};c.call(this,g,A),this.tilemapFormat=l.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d)}});u.register("tilemapCSV",function(d,g,y){if(Array.isArray(d))for(var S=0;S<d.length;S++)this.addFile(new v(this,d[S]));else this.addFile(new v(this,d,g,y));return this}),o.exports=v},40807:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(518),u=e(80341),h=new a({Extends:c,initialize:function(l,v,d,g){c.call(this,l,v,d,g),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var s={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,s)}});x.register("tilemapImpact",function(s,l,v){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new h(this,s[d]));else this.addFile(new h(this,s,l,v));return this}),o.exports=h},56775:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(518),u=e(80341),h=new a({Extends:c,initialize:function(l,v,d,g){c.call(this,l,v,d,g),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var s={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,s)}});x.register("tilemapTiledJSON",function(s,l,v){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new h(this,s[d]));else this.addFile(new h(this,s,l,v));return this}),o.exports=h},25771:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),c=e(95540),u=e(19550),h=e(41212),s=e(26430),l=e(78776),v=new a({Extends:s,initialize:function(g,y,S,T,w,P){var A,R;if(h(y)){var I=y;y=c(I,"key"),A=new u(g,{key:y,url:c(I,"textureURL"),extension:c(I,"textureExtension","png"),normalMap:c(I,"normalMap"),xhrSettings:c(I,"textureXhrSettings")}),R=new l(g,{key:y,url:c(I,"atlasURL"),extension:c(I,"atlasExtension","txt"),xhrSettings:c(I,"atlasXhrSettings")})}else A=new u(g,y,S,w),R=new l(g,y,T,P);A.linkFile?s.call(this,g,"unityatlas",y,[A,R,A.linkFile]):s.call(this,g,"unityatlas",y,[A,R])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],g=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,g.data,y),this.complete=!0}}});x.register("unityAtlas",function(d,g,y,S,T){var w;if(Array.isArray(d))for(var P=0;P<d.length;P++)w=new v(this,d[P]),this.addFile(w.files);else w=new v(this,d,g,y,S,T),this.addFile(w.files);return this}),o.exports=v},33720:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(98356),s=e(95540),l=e(41212),v=new a({Extends:c,initialize:function(g,y,S,T){if(T===void 0&&(T=!1),l(y)){var w=y;y=s(w,"key"),S=s(w,"url",[]),T=s(w,"noAudio",!1)}var P=g.systems.game.device.video.getVideoURL(S);P||console.warn("VideoFile: No supported format for "+y);var A={type:"video",cache:g.cacheManager.video,extension:P.type,key:y,url:P.url,config:{noAudio:T}};c.call(this,g,A)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(d,g,y){if(Array.isArray(d))for(var S=0;S<d.length;S++)this.addFile(new v(this,d[S]));else this.addFile(new v(this,d,g,y));return this}),o.exports=v},57318:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),c=e(41299),u=e(74099),h=e(95540),s=e(41212),l=e(56836),v=new a({Extends:c,initialize:function(g,y,S,T){var w="xml";if(s(y)){var P=y;y=h(P,"key"),S=h(P,"url"),T=h(P,"xhrSettings"),w=h(P,"extension",w)}var A={type:"xml",cache:g.cacheManager.xml,extension:w,responseType:"text",key:y,url:S,xhrSettings:T};c.call(this,g,A)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(d,g,y){if(Array.isArray(d))for(var S=0;S<d.length;S++)this.addFile(new v(this,d[S]));else this.addFile(new v(this,d,g,y));return this}),o.exports=v},64589:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}},57777:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23906),x=e(79291),c={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};c=x(!1,c,a),o.exports=c},53307:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0,x=0;x<e.length;x++)a+=+e[x];return a/e.length};o.exports=E},85710:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6411),x=function(c,u){return a(c)/a(u)/a(c-u)};o.exports=x},30976:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)};o.exports=E},87842:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){var h=(c-a)*.5,s=(u-x)*.5,l=e*e,v=e*l;return(2*x-2*c+h+s)*v+(-3*x+3*c-2*h-s)*l+h*e+x};o.exports=E},26302:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var c=Math.pow(x,-a);return Math.ceil(e*c)/c};o.exports=E},45319:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.max(a,Math.min(x,e))};o.exports=E},39506:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(c){return c*a.DEG_TO_RAD};o.exports=x},61241:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.abs(e-a)};o.exports=E},38857:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(37867),u=e(29747),h=new c,s=new x({initialize:function l(v,d,g,y){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y=l.DefaultOrder),this._x=v,this._y=d,this._z=g,this._order=y,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(l){this._x=l,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(l){this._y=l,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(l){this._z=l,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(l){this._order=l,this.onChangeCallback(this)}},set:function(l,v,d,g){return g===void 0&&(g=this._order),this._x=l,this._y=v,this._z=d,this._order=g,this.onChangeCallback(this),this},copy:function(l){return this.set(l.x,l.y,l.z,l.order)},setFromQuaternion:function(l,v,d){return v===void 0&&(v=this._order),d===void 0&&(d=!1),h.fromQuat(l),this.setFromRotationMatrix(h,v,d)},setFromRotationMatrix:function(l,v,d){v===void 0&&(v=this._order),d===void 0&&(d=!1);var g=l.val,y=g[0],S=g[4],T=g[8],w=g[1],P=g[5],A=g[9],R=g[2],I=g[6],M=g[10],L=0,N=0,G=0,D=.99999;switch(v){case"XYZ":{N=Math.asin(a(T,-1,1)),Math.abs(T)<D?(L=Math.atan2(-A,M),G=Math.atan2(-S,y)):L=Math.atan2(I,P);break}case"YXZ":{L=Math.asin(-a(A,-1,1)),Math.abs(A)<D?(N=Math.atan2(T,M),G=Math.atan2(w,P)):N=Math.atan2(-R,y);break}case"ZXY":{L=Math.asin(a(I,-1,1)),Math.abs(I)<D?(N=Math.atan2(-R,M),G=Math.atan2(-S,P)):G=Math.atan2(w,y);break}case"ZYX":{N=Math.asin(-a(R,-1,1)),Math.abs(R)<D?(L=Math.atan2(I,M),G=Math.atan2(w,y)):G=Math.atan2(-S,P);break}case"YZX":{G=Math.asin(a(w,-1,1)),Math.abs(w)<D?(L=Math.atan2(-A,P),N=Math.atan2(-R,y)):N=Math.atan2(T,M);break}case"XZY":{G=Math.asin(-a(S,-1,1)),Math.abs(S)<D?(L=Math.atan2(I,P),N=Math.atan2(T,y)):L=Math.atan2(-A,M);break}}return this._x=L,this._y=N,this._z=G,this._order=v,d&&this.onChangeCallback(this),this}});s.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],s.DefaultOrder="XYZ",o.exports=s},6411:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(e===0)return 1;for(var a=e;--e;)a*=e;return a};o.exports=E},99472:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.random()*(a-e)+e};o.exports=E},77623:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var c=Math.pow(x,-a);return Math.floor(e*c)/c};o.exports=E},62945:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=function(c,u,h){return c=a(c,0,1),(h-u)*c+u};o.exports=x},38265:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e/a/1e3};o.exports=E},78702:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e==parseFloat(e)?!(e%2):void 0};o.exports=E},94883:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===parseFloat(e)?!(e%2):void 0};o.exports=E},28915:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return(a-e)*x+e};o.exports=E},94908:o=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=0),e.clone().lerp(a,x)};o.exports=E},94434:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new x(this)},set:function(c){return this.copy(c)},copy:function(c){var u=this.val,h=c.val;return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=h[6],u[7]=h[7],u[8]=h[8],this},fromMat4:function(c){var u=c.val,h=this.val;return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[4],h[4]=u[5],h[5]=u[6],h[6]=u[8],h[7]=u[9],h[8]=u[10],this},fromArray:function(c){var u=this.val;return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],this},identity:function(){var c=this.val;return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=1,c[5]=0,c[6]=0,c[7]=0,c[8]=1,this},transpose:function(){var c=this.val,u=c[1],h=c[2],s=c[5];return c[1]=c[3],c[2]=c[6],c[3]=u,c[5]=c[7],c[6]=h,c[7]=s,this},invert:function(){var c=this.val,u=c[0],h=c[1],s=c[2],l=c[3],v=c[4],d=c[5],g=c[6],y=c[7],S=c[8],T=S*v-d*y,w=-S*l+d*g,P=y*l-v*g,A=u*T+h*w+s*P;return A?(A=1/A,c[0]=T*A,c[1]=(-S*h+s*y)*A,c[2]=(d*h-s*v)*A,c[3]=w*A,c[4]=(S*u-s*g)*A,c[5]=(-d*u+s*l)*A,c[6]=P*A,c[7]=(-y*u+h*g)*A,c[8]=(v*u-h*l)*A,this):null},adjoint:function(){var c=this.val,u=c[0],h=c[1],s=c[2],l=c[3],v=c[4],d=c[5],g=c[6],y=c[7],S=c[8];return c[0]=v*S-d*y,c[1]=s*y-h*S,c[2]=h*d-s*v,c[3]=d*g-l*S,c[4]=u*S-s*g,c[5]=s*l-u*d,c[6]=l*y-v*g,c[7]=h*g-u*y,c[8]=u*v-h*l,this},determinant:function(){var c=this.val,u=c[0],h=c[1],s=c[2],l=c[3],v=c[4],d=c[5],g=c[6],y=c[7],S=c[8];return u*(S*v-d*y)+h*(-S*l+d*g)+s*(y*l-v*g)},multiply:function(c){var u=this.val,h=u[0],s=u[1],l=u[2],v=u[3],d=u[4],g=u[5],y=u[6],S=u[7],T=u[8],w=c.val,P=w[0],A=w[1],R=w[2],I=w[3],M=w[4],L=w[5],N=w[6],G=w[7],D=w[8];return u[0]=P*h+A*v+R*y,u[1]=P*s+A*d+R*S,u[2]=P*l+A*g+R*T,u[3]=I*h+M*v+L*y,u[4]=I*s+M*d+L*S,u[5]=I*l+M*g+L*T,u[6]=N*h+G*v+D*y,u[7]=N*s+G*d+D*S,u[8]=N*l+G*g+D*T,this},translate:function(c){var u=this.val,h=c.x,s=c.y;return u[6]=h*u[0]+s*u[3]+u[6],u[7]=h*u[1]+s*u[4]+u[7],u[8]=h*u[2]+s*u[5]+u[8],this},rotate:function(c){var u=this.val,h=u[0],s=u[1],l=u[2],v=u[3],d=u[4],g=u[5],y=Math.sin(c),S=Math.cos(c);return u[0]=S*h+y*v,u[1]=S*s+y*d,u[2]=S*l+y*g,u[3]=S*v-y*h,u[4]=S*d-y*s,u[5]=S*g-y*l,this},scale:function(c){var u=this.val,h=c.x,s=c.y;return u[0]=h*u[0],u[1]=h*u[1],u[2]=h*u[2],u[3]=s*u[3],u[4]=s*u[4],u[5]=s*u[5],this},fromQuat:function(c){var u=c.x,h=c.y,s=c.z,l=c.w,v=u+u,d=h+h,g=s+s,y=u*v,S=u*d,T=u*g,w=h*d,P=h*g,A=s*g,R=l*v,I=l*d,M=l*g,L=this.val;return L[0]=1-(w+A),L[3]=S+M,L[6]=T-I,L[1]=S-M,L[4]=1-(y+A),L[7]=P+R,L[2]=T+I,L[5]=P-R,L[8]=1-(y+w),this},normalFromMat4:function(c){var u=c.val,h=this.val,s=u[0],l=u[1],v=u[2],d=u[3],g=u[4],y=u[5],S=u[6],T=u[7],w=u[8],P=u[9],A=u[10],R=u[11],I=u[12],M=u[13],L=u[14],N=u[15],G=s*y-l*g,D=s*S-v*g,B=s*T-d*g,$=l*S-v*y,k=l*T-d*y,X=v*T-d*S,Y=w*M-P*I,Z=w*L-A*I,Q=w*N-R*I,j=P*L-A*M,K=P*N-R*M,W=A*N-R*L,V=G*W-D*K+B*j+$*Q-k*Z+X*Y;return V?(V=1/V,h[0]=(y*W-S*K+T*j)*V,h[1]=(S*Q-g*W-T*Z)*V,h[2]=(g*K-y*Q+T*Y)*V,h[3]=(v*K-l*W-d*j)*V,h[4]=(s*W-v*Q+d*Z)*V,h[5]=(l*Q-s*K-d*Y)*V,h[6]=(M*X-L*k+N*$)*V,h[7]=(L*B-I*X-N*D)*V,h[8]=(I*k-M*B+N*G)*V,this):null}});o.exports=x},37867:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(25836),c=1e-6,u=new a({initialize:function(y){this.val=new Float32Array(16),y?this.copy(y):this.identity()},clone:function(){return new u(this)},set:function(g){return this.copy(g)},setValues:function(g,y,S,T,w,P,A,R,I,M,L,N,G,D,B,$){var k=this.val;return k[0]=g,k[1]=y,k[2]=S,k[3]=T,k[4]=w,k[5]=P,k[6]=A,k[7]=R,k[8]=I,k[9]=M,k[10]=L,k[11]=N,k[12]=G,k[13]=D,k[14]=B,k[15]=$,this},copy:function(g){var y=g.val;return this.setValues(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15])},fromArray:function(g){return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(g,y,S){var T=h.fromQuat(S),w=T.val,P=y.x,A=y.y,R=y.z;return this.setValues(w[0]*P,w[1]*P,w[2]*P,0,w[4]*A,w[5]*A,w[6]*A,0,w[8]*R,w[9]*R,w[10]*R,0,g.x,g.y,g.z,1)},xyz:function(g,y,S){this.identity();var T=this.val;return T[12]=g,T[13]=y,T[14]=S,this},scaling:function(g,y,S){this.zero();var T=this.val;return T[0]=g,T[5]=y,T[10]=S,T[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var g=this.val,y=g[1],S=g[2],T=g[3],w=g[6],P=g[7],A=g[11];return g[1]=g[4],g[2]=g[8],g[3]=g[12],g[4]=y,g[6]=g[9],g[7]=g[13],g[8]=S,g[9]=w,g[11]=g[14],g[12]=T,g[13]=P,g[14]=A,this},getInverse:function(g){return this.copy(g),this.invert()},invert:function(){var g=this.val,y=g[0],S=g[1],T=g[2],w=g[3],P=g[4],A=g[5],R=g[6],I=g[7],M=g[8],L=g[9],N=g[10],G=g[11],D=g[12],B=g[13],$=g[14],k=g[15],X=y*A-S*P,Y=y*R-T*P,Z=y*I-w*P,Q=S*R-T*A,j=S*I-w*A,K=T*I-w*R,W=M*B-L*D,V=M*$-N*D,J=M*k-G*D,ee=L*$-N*B,te=L*k-G*B,ne=N*k-G*$,se=X*ne-Y*te+Z*ee+Q*J-j*V+K*W;return se?(se=1/se,this.setValues((A*ne-R*te+I*ee)*se,(T*te-S*ne-w*ee)*se,(B*K-$*j+k*Q)*se,(N*j-L*K-G*Q)*se,(R*J-P*ne-I*V)*se,(y*ne-T*J+w*V)*se,($*Z-D*K-k*Y)*se,(M*K-N*Z+G*Y)*se,(P*te-A*J+I*W)*se,(S*J-y*te-w*W)*se,(D*j-B*Z+k*X)*se,(L*Z-M*j-G*X)*se,(A*V-P*ee-R*W)*se,(y*ee-S*V+T*W)*se,(B*Y-D*Q-$*X)*se,(M*Q-L*Y+N*X)*se)):this},adjoint:function(){var g=this.val,y=g[0],S=g[1],T=g[2],w=g[3],P=g[4],A=g[5],R=g[6],I=g[7],M=g[8],L=g[9],N=g[10],G=g[11],D=g[12],B=g[13],$=g[14],k=g[15];return this.setValues(A*(N*k-G*$)-L*(R*k-I*$)+B*(R*G-I*N),-(S*(N*k-G*$)-L*(T*k-w*$)+B*(T*G-w*N)),S*(R*k-I*$)-A*(T*k-w*$)+B*(T*I-w*R),-(S*(R*G-I*N)-A*(T*G-w*N)+L*(T*I-w*R)),-(P*(N*k-G*$)-M*(R*k-I*$)+D*(R*G-I*N)),y*(N*k-G*$)-M*(T*k-w*$)+D*(T*G-w*N),-(y*(R*k-I*$)-P*(T*k-w*$)+D*(T*I-w*R)),y*(R*G-I*N)-P*(T*G-w*N)+M*(T*I-w*R),P*(L*k-G*B)-M*(A*k-I*B)+D*(A*G-I*L),-(y*(L*k-G*B)-M*(S*k-w*B)+D*(S*G-w*L)),y*(A*k-I*B)-P*(S*k-w*B)+D*(S*I-w*A),-(y*(A*G-I*L)-P*(S*G-w*L)+M*(S*I-w*A)),-(P*(L*$-N*B)-M*(A*$-R*B)+D*(A*N-R*L)),y*(L*$-N*B)-M*(S*$-T*B)+D*(S*N-T*L),-(y*(A*$-R*B)-P*(S*$-T*B)+D*(S*R-T*A)),y*(A*N-R*L)-P*(S*N-T*L)+M*(S*R-T*A))},determinant:function(){var g=this.val,y=g[0],S=g[1],T=g[2],w=g[3],P=g[4],A=g[5],R=g[6],I=g[7],M=g[8],L=g[9],N=g[10],G=g[11],D=g[12],B=g[13],$=g[14],k=g[15],X=y*A-S*P,Y=y*R-T*P,Z=y*I-w*P,Q=S*R-T*A,j=S*I-w*A,K=T*I-w*R,W=M*B-L*D,V=M*$-N*D,J=M*k-G*D,ee=L*$-N*B,te=L*k-G*B,ne=N*k-G*$;return X*ne-Y*te+Z*ee+Q*J-j*V+K*W},multiply:function(g){var y=this.val,S=y[0],T=y[1],w=y[2],P=y[3],A=y[4],R=y[5],I=y[6],M=y[7],L=y[8],N=y[9],G=y[10],D=y[11],B=y[12],$=y[13],k=y[14],X=y[15],Y=g.val,Z=Y[0],Q=Y[1],j=Y[2],K=Y[3];return y[0]=Z*S+Q*A+j*L+K*B,y[1]=Z*T+Q*R+j*N+K*$,y[2]=Z*w+Q*I+j*G+K*k,y[3]=Z*P+Q*M+j*D+K*X,Z=Y[4],Q=Y[5],j=Y[6],K=Y[7],y[4]=Z*S+Q*A+j*L+K*B,y[5]=Z*T+Q*R+j*N+K*$,y[6]=Z*w+Q*I+j*G+K*k,y[7]=Z*P+Q*M+j*D+K*X,Z=Y[8],Q=Y[9],j=Y[10],K=Y[11],y[8]=Z*S+Q*A+j*L+K*B,y[9]=Z*T+Q*R+j*N+K*$,y[10]=Z*w+Q*I+j*G+K*k,y[11]=Z*P+Q*M+j*D+K*X,Z=Y[12],Q=Y[13],j=Y[14],K=Y[15],y[12]=Z*S+Q*A+j*L+K*B,y[13]=Z*T+Q*R+j*N+K*$,y[14]=Z*w+Q*I+j*G+K*k,y[15]=Z*P+Q*M+j*D+K*X,this},multiplyLocal:function(g){var y=this.val,S=g.val;return this.setValues(y[0]*S[0]+y[1]*S[4]+y[2]*S[8]+y[3]*S[12],y[0]*S[1]+y[1]*S[5]+y[2]*S[9]+y[3]*S[13],y[0]*S[2]+y[1]*S[6]+y[2]*S[10]+y[3]*S[14],y[0]*S[3]+y[1]*S[7]+y[2]*S[11]+y[3]*S[15],y[4]*S[0]+y[5]*S[4]+y[6]*S[8]+y[7]*S[12],y[4]*S[1]+y[5]*S[5]+y[6]*S[9]+y[7]*S[13],y[4]*S[2]+y[5]*S[6]+y[6]*S[10]+y[7]*S[14],y[4]*S[3]+y[5]*S[7]+y[6]*S[11]+y[7]*S[15],y[8]*S[0]+y[9]*S[4]+y[10]*S[8]+y[11]*S[12],y[8]*S[1]+y[9]*S[5]+y[10]*S[9]+y[11]*S[13],y[8]*S[2]+y[9]*S[6]+y[10]*S[10]+y[11]*S[14],y[8]*S[3]+y[9]*S[7]+y[10]*S[11]+y[11]*S[15],y[12]*S[0]+y[13]*S[4]+y[14]*S[8]+y[15]*S[12],y[12]*S[1]+y[13]*S[5]+y[14]*S[9]+y[15]*S[13],y[12]*S[2]+y[13]*S[6]+y[14]*S[10]+y[15]*S[14],y[12]*S[3]+y[13]*S[7]+y[14]*S[11]+y[15]*S[15])},premultiply:function(g){return this.multiplyMatrices(g,this)},multiplyMatrices:function(g,y){var S=g.val,T=y.val,w=S[0],P=S[4],A=S[8],R=S[12],I=S[1],M=S[5],L=S[9],N=S[13],G=S[2],D=S[6],B=S[10],$=S[14],k=S[3],X=S[7],Y=S[11],Z=S[15],Q=T[0],j=T[4],K=T[8],W=T[12],V=T[1],J=T[5],ee=T[9],te=T[13],ne=T[2],se=T[6],ae=T[10],ue=T[14],de=T[3],fe=T[7],ye=T[11],ve=T[15];return this.setValues(w*Q+P*V+A*ne+R*de,I*Q+M*V+L*ne+N*de,G*Q+D*V+B*ne+$*de,k*Q+X*V+Y*ne+Z*de,w*j+P*J+A*se+R*fe,I*j+M*J+L*se+N*fe,G*j+D*J+B*se+$*fe,k*j+X*J+Y*se+Z*fe,w*K+P*ee+A*ae+R*ye,I*K+M*ee+L*ae+N*ye,G*K+D*ee+B*ae+$*ye,k*K+X*ee+Y*ae+Z*ye,w*W+P*te+A*ue+R*ve,I*W+M*te+L*ue+N*ve,G*W+D*te+B*ue+$*ve,k*W+X*te+Y*ue+Z*ve)},translate:function(g){return this.translateXYZ(g.x,g.y,g.z)},translateXYZ:function(g,y,S){var T=this.val;return T[12]=T[0]*g+T[4]*y+T[8]*S+T[12],T[13]=T[1]*g+T[5]*y+T[9]*S+T[13],T[14]=T[2]*g+T[6]*y+T[10]*S+T[14],T[15]=T[3]*g+T[7]*y+T[11]*S+T[15],this},scale:function(g){return this.scaleXYZ(g.x,g.y,g.z)},scaleXYZ:function(g,y,S){var T=this.val;return T[0]=T[0]*g,T[1]=T[1]*g,T[2]=T[2]*g,T[3]=T[3]*g,T[4]=T[4]*y,T[5]=T[5]*y,T[6]=T[6]*y,T[7]=T[7]*y,T[8]=T[8]*S,T[9]=T[9]*S,T[10]=T[10]*S,T[11]=T[11]*S,this},makeRotationAxis:function(g,y){var S=Math.cos(y),T=Math.sin(y),w=1-S,P=g.x,A=g.y,R=g.z,I=w*P,M=w*A;return this.setValues(I*P+S,I*A-T*R,I*R+T*A,0,I*A+T*R,M*A+S,M*R-T*P,0,I*R-T*A,M*R+T*P,w*R*R+S,0,0,0,0,1)},rotate:function(g,y){var S=this.val,T=y.x,w=y.y,P=y.z,A=Math.sqrt(T*T+w*w+P*P);if(Math.abs(A)<c)return this;A=1/A,T*=A,w*=A,P*=A;var R=Math.sin(g),I=Math.cos(g),M=1-I,L=S[0],N=S[1],G=S[2],D=S[3],B=S[4],$=S[5],k=S[6],X=S[7],Y=S[8],Z=S[9],Q=S[10],j=S[11],K=S[12],W=S[13],V=S[14],J=S[15],ee=T*T*M+I,te=w*T*M+P*R,ne=P*T*M-w*R,se=T*w*M-P*R,ae=w*w*M+I,ue=P*w*M+T*R,de=T*P*M+w*R,fe=w*P*M-T*R,ye=P*P*M+I;return this.setValues(L*ee+B*te+Y*ne,N*ee+$*te+Z*ne,G*ee+k*te+Q*ne,D*ee+X*te+j*ne,L*se+B*ae+Y*ue,N*se+$*ae+Z*ue,G*se+k*ae+Q*ue,D*se+X*ae+j*ue,L*de+B*fe+Y*ye,N*de+$*fe+Z*ye,G*de+k*fe+Q*ye,D*de+X*fe+j*ye,K,W,V,J)},rotateX:function(g){var y=this.val,S=Math.sin(g),T=Math.cos(g),w=y[4],P=y[5],A=y[6],R=y[7],I=y[8],M=y[9],L=y[10],N=y[11];return y[4]=w*T+I*S,y[5]=P*T+M*S,y[6]=A*T+L*S,y[7]=R*T+N*S,y[8]=I*T-w*S,y[9]=M*T-P*S,y[10]=L*T-A*S,y[11]=N*T-R*S,this},rotateY:function(g){var y=this.val,S=Math.sin(g),T=Math.cos(g),w=y[0],P=y[1],A=y[2],R=y[3],I=y[8],M=y[9],L=y[10],N=y[11];return y[0]=w*T-I*S,y[1]=P*T-M*S,y[2]=A*T-L*S,y[3]=R*T-N*S,y[8]=w*S+I*T,y[9]=P*S+M*T,y[10]=A*S+L*T,y[11]=R*S+N*T,this},rotateZ:function(g){var y=this.val,S=Math.sin(g),T=Math.cos(g),w=y[0],P=y[1],A=y[2],R=y[3],I=y[4],M=y[5],L=y[6],N=y[7];return y[0]=w*T+I*S,y[1]=P*T+M*S,y[2]=A*T+L*S,y[3]=R*T+N*S,y[4]=I*T-w*S,y[5]=M*T-P*S,y[6]=L*T-A*S,y[7]=N*T-R*S,this},fromRotationTranslation:function(g,y){var S=g.x,T=g.y,w=g.z,P=g.w,A=S+S,R=T+T,I=w+w,M=S*A,L=S*R,N=S*I,G=T*R,D=T*I,B=w*I,$=P*A,k=P*R,X=P*I;return this.setValues(1-(G+B),L+X,N-k,0,L-X,1-(M+B),D+$,0,N+k,D-$,1-(M+G),0,y.x,y.y,y.z,1)},fromQuat:function(g){var y=g.x,S=g.y,T=g.z,w=g.w,P=y+y,A=S+S,R=T+T,I=y*P,M=y*A,L=y*R,N=S*A,G=S*R,D=T*R,B=w*P,$=w*A,k=w*R;return this.setValues(1-(N+D),M+k,L-$,0,M-k,1-(I+D),G+B,0,L+$,G-B,1-(I+N),0,0,0,0,1)},frustum:function(g,y,S,T,w,P){var A=1/(y-g),R=1/(T-S),I=1/(w-P);return this.setValues(w*2*A,0,0,0,0,w*2*R,0,0,(y+g)*A,(T+S)*R,(P+w)*I,-1,0,0,P*w*2*I,0)},perspective:function(g,y,S,T){var w=1/Math.tan(g/2),P=1/(S-T);return this.setValues(w/y,0,0,0,0,w,0,0,0,0,(T+S)*P,-1,0,0,2*T*S*P,0)},perspectiveLH:function(g,y,S,T){return this.setValues(2*S/g,0,0,0,0,2*S/y,0,0,0,0,-T/(S-T),1,0,0,S*T/(S-T),0)},ortho:function(g,y,S,T,w,P){var A=g-y,R=S-T,I=w-P;return A=A===0?A:1/A,R=R===0?R:1/R,I=I===0?I:1/I,this.setValues(-2*A,0,0,0,0,-2*R,0,0,0,0,2*I,0,(g+y)*A,(T+S)*R,(P+w)*I,1)},lookAtRH:function(g,y,S){var T=this.val;return d.subVectors(g,y),d.lengthSq()===0&&(d.z=1),d.normalize(),l.crossVectors(S,d),l.lengthSq()===0&&(Math.abs(S.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),l.crossVectors(S,d)),l.normalize(),v.crossVectors(d,l),T[0]=l.x,T[1]=l.y,T[2]=l.z,T[4]=v.x,T[5]=v.y,T[6]=v.z,T[8]=d.x,T[9]=d.y,T[10]=d.z,this},lookAt:function(g,y,S){var T=g.x,w=g.y,P=g.z,A=S.x,R=S.y,I=S.z,M=y.x,L=y.y,N=y.z;if(Math.abs(T-M)<c&&Math.abs(w-L)<c&&Math.abs(P-N)<c)return this.identity();var G=T-M,D=w-L,B=P-N,$=1/Math.sqrt(G*G+D*D+B*B);G*=$,D*=$,B*=$;var k=R*B-I*D,X=I*G-A*B,Y=A*D-R*G;$=Math.sqrt(k*k+X*X+Y*Y),$?($=1/$,k*=$,X*=$,Y*=$):(k=0,X=0,Y=0);var Z=D*Y-B*X,Q=B*k-G*Y,j=G*X-D*k;return $=Math.sqrt(Z*Z+Q*Q+j*j),$?($=1/$,Z*=$,Q*=$,j*=$):(Z=0,Q=0,j=0),this.setValues(k,Z,G,0,X,Q,D,0,Y,j,B,0,-(k*T+X*w+Y*P),-(Z*T+Q*w+j*P),-(G*T+D*w+B*P),1)},yawPitchRoll:function(g,y,S){this.zero(),h.zero(),s.zero();var T=this.val,w=h.val,P=s.val,A=Math.sin(S),R=Math.cos(S);return T[10]=1,T[15]=1,T[0]=R,T[1]=A,T[4]=-A,T[5]=R,A=Math.sin(y),R=Math.cos(y),w[0]=1,w[15]=1,w[5]=R,w[10]=R,w[9]=-A,w[6]=A,A=Math.sin(g),R=Math.cos(g),P[5]=1,P[15]=1,P[0]=R,P[2]=-A,P[8]=A,P[10]=R,this.multiplyLocal(h),this.multiplyLocal(s),this},setWorldMatrix:function(g,y,S,T,w){return this.yawPitchRoll(g.y,g.x,g.z),h.scaling(S.x,S.y,S.z),s.xyz(y.x,y.y,y.z),this.multiplyLocal(h),this.multiplyLocal(s),T&&this.multiplyLocal(T),w&&this.multiplyLocal(w),this},multiplyToMat4:function(g,y){var S=this.val,T=g.val,w=S[0],P=S[1],A=S[2],R=S[3],I=S[4],M=S[5],L=S[6],N=S[7],G=S[8],D=S[9],B=S[10],$=S[11],k=S[12],X=S[13],Y=S[14],Z=S[15],Q=T[0],j=T[1],K=T[2],W=T[3],V=T[4],J=T[5],ee=T[6],te=T[7],ne=T[8],se=T[9],ae=T[10],ue=T[11],de=T[12],fe=T[13],ye=T[14],ve=T[15];return y.setValues(Q*w+j*I+K*G+W*k,j*P+j*M+K*D+W*X,K*A+j*L+K*B+W*Y,W*R+j*N+K*$+W*Z,V*w+J*I+ee*G+te*k,V*P+J*M+ee*D+te*X,V*A+J*L+ee*B+te*Y,V*R+J*N+ee*$+te*Z,ne*w+se*I+ae*G+ue*k,ne*P+se*M+ae*D+ue*X,ne*A+se*L+ae*B+ue*Y,ne*R+se*N+ae*$+ue*Z,de*w+fe*I+ye*G+ve*k,de*P+fe*M+ye*D+ve*X,de*A+fe*L+ye*B+ve*Y,de*R+fe*N+ye*$+ve*Z)},fromRotationXYTranslation:function(g,y,S){var T=y.x,w=y.y,P=y.z,A=Math.sin(g.x),R=Math.cos(g.x),I=Math.sin(g.y),M=Math.cos(g.y),L=T,N=w,G=P,D=-A,B=0-D*I,$=0-R*I,k=D*M,X=R*M;return S||(L=M*T+I*P,N=B*T+R*w+k*P,G=$*T+A*w+X*P),this.setValues(M,B,$,0,0,R,A,0,I,k,X,0,L,N,G,1)},getMaxScaleOnAxis:function(){var g=this.val,y=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],S=g[4]*g[4]+g[5]*g[5]+g[6]*g[6],T=g[8]*g[8]+g[9]*g[9]+g[10]*g[10];return Math.sqrt(Math.max(y,S,T))}}),h=new u,s=new u,l=new x,v=new x,d=new x;o.exports=u},86883:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.min(e+a,x)};o.exports=E},50040:o=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.length;if(a===0)return 0;e.sort(function(c,u){return c-u});var x=Math.floor(a/2);return a%2===0?(e[x]+e[x-1])/2:e[x]};o.exports=E},37204:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.max(e-a,x)};o.exports=E},65201:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){x===void 0&&(x=a+1);var u=(e-a)/(x-a);return u>1?c!==void 0?(u=(c-e)/(c-x),u<0&&(u=0)):u=1:u<0&&(u=0),u};o.exports=E},15746:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94434),c=e(29747),u=e(25836),h=1e-6,s=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),v=new u(1,0,0),d=new u(0,1,0),g=new u,y=new x,S=new a({initialize:function(w,P,A,R){this.onChangeCallback=c,this.set(w,P,A,R)},x:{get:function(){return this._x},set:function(T){this._x=T,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(T){this._y=T,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(T){this._z=T,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(T){this._w=T,this.onChangeCallback(this)}},copy:function(T){return this.set(T)},set:function(T,w,P,A,R){return R===void 0&&(R=!0),typeof T=="object"?(this._x=T.x||0,this._y=T.y||0,this._z=T.z||0,this._w=T.w||0):(this._x=T||0,this._y=w||0,this._z=P||0,this._w=A||0),R&&this.onChangeCallback(this),this},add:function(T){return this._x+=T.x,this._y+=T.y,this._z+=T.z,this._w+=T.w,this.onChangeCallback(this),this},subtract:function(T){return this._x-=T.x,this._y-=T.y,this._z-=T.z,this._w-=T.w,this.onChangeCallback(this),this},scale:function(T){return this._x*=T,this._y*=T,this._z*=T,this._w*=T,this.onChangeCallback(this),this},length:function(){var T=this.x,w=this.y,P=this.z,A=this.w;return Math.sqrt(T*T+w*w+P*P+A*A)},lengthSq:function(){var T=this.x,w=this.y,P=this.z,A=this.w;return T*T+w*w+P*P+A*A},normalize:function(){var T=this.x,w=this.y,P=this.z,A=this.w,R=T*T+w*w+P*P+A*A;return R>0&&(R=1/Math.sqrt(R),this._x=T*R,this._y=w*R,this._z=P*R,this._w=A*R),this.onChangeCallback(this),this},dot:function(T){return this.x*T.x+this.y*T.y+this.z*T.z+this.w*T.w},lerp:function(T,w){w===void 0&&(w=0);var P=this.x,A=this.y,R=this.z,I=this.w;return this.set(P+w*(T.x-P),A+w*(T.y-A),R+w*(T.z-R),I+w*(T.w-I))},rotationTo:function(T,w){var P=T.x*w.x+T.y*w.y+T.z*w.z;return P<-.999999?(g.copy(v).cross(T).length()<h&&g.copy(d).cross(T),g.normalize(),this.setAxisAngle(g,Math.PI)):P>.999999?this.set(0,0,0,1):(g.copy(T).cross(w),this._x=g.x,this._y=g.y,this._z=g.z,this._w=1+P,this.normalize())},setAxes:function(T,w,P){var A=y.val;return A[0]=w.x,A[3]=w.y,A[6]=w.z,A[1]=P.x,A[4]=P.y,A[7]=P.z,A[2]=-T.x,A[5]=-T.y,A[8]=-T.z,this.fromMat3(y).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(T,w){w=w*.5;var P=Math.sin(w);return this.set(P*T.x,P*T.y,P*T.z,Math.cos(w))},multiply:function(T){var w=this.x,P=this.y,A=this.z,R=this.w,I=T.x,M=T.y,L=T.z,N=T.w;return this.set(w*N+R*I+P*L-A*M,P*N+R*M+A*I-w*L,A*N+R*L+w*M-P*I,R*N-w*I-P*M-A*L)},slerp:function(T,w){var P=this.x,A=this.y,R=this.z,I=this.w,M=T.x,L=T.y,N=T.z,G=T.w,D=P*M+A*L+R*N+I*G;D<0&&(D=-D,M=-M,L=-L,N=-N,G=-G);var B=1-w,$=w;if(1-D>h){var k=Math.acos(D),X=Math.sin(k);B=Math.sin((1-w)*k)/X,$=Math.sin(w*k)/X}return this.set(B*P+$*M,B*A+$*L,B*R+$*N,B*I+$*G)},invert:function(){var T=this.x,w=this.y,P=this.z,A=this.w,R=T*T+w*w+P*P+A*A,I=R?1/R:0;return this.set(-T*I,-w*I,-P*I,A*I)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(T){T*=.5;var w=this.x,P=this.y,A=this.z,R=this.w,I=Math.sin(T),M=Math.cos(T);return this.set(w*M+R*I,P*M+A*I,A*M-P*I,R*M-w*I)},rotateY:function(T){T*=.5;var w=this.x,P=this.y,A=this.z,R=this.w,I=Math.sin(T),M=Math.cos(T);return this.set(w*M-A*I,P*M+R*I,A*M+w*I,R*M-P*I)},rotateZ:function(T){T*=.5;var w=this.x,P=this.y,A=this.z,R=this.w,I=Math.sin(T),M=Math.cos(T);return this.set(w*M+P*I,P*M-w*I,A*M+R*I,R*M-A*I)},calculateW:function(){var T=this.x,w=this.y,P=this.z;return this.w=-Math.sqrt(1-T*T-w*w-P*P),this},setFromEuler:function(T,w){var P=T.x/2,A=T.y/2,R=T.z/2,I=Math.cos(P),M=Math.cos(A),L=Math.cos(R),N=Math.sin(P),G=Math.sin(A),D=Math.sin(R);switch(T.order){case"XYZ":{this.set(N*M*L+I*G*D,I*G*L-N*M*D,I*M*D+N*G*L,I*M*L-N*G*D,w);break}case"YXZ":{this.set(N*M*L+I*G*D,I*G*L-N*M*D,I*M*D-N*G*L,I*M*L+N*G*D,w);break}case"ZXY":{this.set(N*M*L-I*G*D,I*G*L+N*M*D,I*M*D+N*G*L,I*M*L-N*G*D,w);break}case"ZYX":{this.set(N*M*L-I*G*D,I*G*L+N*M*D,I*M*D-N*G*L,I*M*L+N*G*D,w);break}case"YZX":{this.set(N*M*L+I*G*D,I*G*L+N*M*D,I*M*D-N*G*L,I*M*L-N*G*D,w);break}case"XZY":{this.set(N*M*L-I*G*D,I*G*L-N*M*D,I*M*D+N*G*L,I*M*L+N*G*D,w);break}}return this},setFromRotationMatrix:function(T){var w=T.val,P=w[0],A=w[4],R=w[8],I=w[1],M=w[5],L=w[9],N=w[2],G=w[6],D=w[10],B=P+M+D,$;return B>0?($=.5/Math.sqrt(B+1),this.set((G-L)*$,(R-N)*$,(I-A)*$,.25/$)):P>M&&P>D?($=2*Math.sqrt(1+P-M-D),this.set(.25*$,(A+I)/$,(R+N)/$,(G-L)/$)):M>D?($=2*Math.sqrt(1+M-P-D),this.set((A+I)/$,.25*$,(L+G)/$,(R-N)/$)):($=2*Math.sqrt(1+D-P-M),this.set((R+N)/$,(L+G)/$,.25*$,(I-A)/$)),this},fromMat3:function(T){var w=T.val,P=w[0]+w[4]+w[8],A;if(P>0)A=Math.sqrt(P+1),this.w=.5*A,A=.5/A,this._x=(w[7]-w[5])*A,this._y=(w[2]-w[6])*A,this._z=(w[3]-w[1])*A;else{var R=0;w[4]>w[0]&&(R=1),w[8]>w[R*3+R]&&(R=2);var I=s[R],M=s[I];A=Math.sqrt(w[R*3+R]-w[I*3+I]-w[M*3+M]+1),l[R]=.5*A,A=.5/A,l[I]=(w[I*3+R]+w[R*3+I])*A,l[M]=(w[M*3+R]+w[R*3+M])*A,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(w[M*3+I]-w[I*3+M])*A}return this.onChangeCallback(this),this}});o.exports=S},43396:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(c){return c*a.RAD_TO_DEG};o.exports=x},74362:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);var x=Math.random()*2*Math.PI;return e.x=Math.cos(x)*a,e.y=Math.sin(x)*a,e};o.exports=E},60706:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);var x=Math.random()*2*Math.PI,c=Math.random()*2-1,u=Math.sqrt(1-c*c)*a;return e.x=Math.cos(x)*u,e.y=Math.sin(x)*u,e.z=c*a,e};o.exports=E},67421:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1),e.x=(Math.random()*2-1)*a,e.y=(Math.random()*2-1)*a,e.z=(Math.random()*2-1)*a,e.w=(Math.random()*2-1)*a,e};o.exports=E},36305:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x,c=e.y;return e.x=x*Math.cos(a)-c*Math.sin(a),e.y=x*Math.sin(a)+c*Math.cos(a),e};o.exports=E},11520:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=Math.cos(c),h=Math.sin(c),s=e.x-a,l=e.y-x;return e.x=s*u-l*h+a,e.y=s*h+l*u+x,e};o.exports=E},1163:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){var h=c+Math.atan2(e.y-x,e.x-a);return e.x=a+u*Math.cos(h),e.y=x+u*Math.sin(h),e};o.exports=E},70336:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){return e.x=a+u*Math.cos(c),e.y=x+u*Math.sin(c),e};o.exports=E},72678:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=e(37867),c=e(15746),u=new x,h=new c,s=new a,l=function(v,d,g){return h.setAxisAngle(d,g),u.fromRotationTranslation(h,s.set(0,0,0)),v.transformMat4(u)};o.exports=l},2284:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>0?Math.ceil(e):Math.floor(e)};o.exports=E},41013:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var c=Math.pow(x,-a);return Math.round(e*c)/c};o.exports=E},16922:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a===void 0&&(a=1),x===void 0&&(x=1),c===void 0&&(c=1),c*=Math.PI/e;for(var u=[],h=[],s=0;s<e;s++)x-=a*c,a+=x*c,u[s]=x,h[s]=a;return{sin:h,cos:u,length:e}};o.exports=E},7602:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e<=a?0:e>=x?1:(e=(e-a)/(x-a),e*e*(3-2*e))};o.exports=E},54261:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e=Math.max(0,Math.min(1,(e-a)/(x-a))),e*e*e*(e*(e*6-15)+10)};o.exports=E},44408:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s){s===void 0&&(s=new a);var l=0,v=0,d=u*h;return c>0&&c<=d&&(c>u-1?(v=Math.floor(c/u),l=c-v*u):l=c),s.set(l,v)};o.exports=x},85955:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l,v,d,g){g===void 0&&(g=new a);var y=Math.sin(l),S=Math.cos(l),T=S*v,w=y*v,P=-y*d,A=S*d,R=1/(T*A+P*-w);return g.x=A*R*c+-P*R*u+(s*P-h*A)*R,g.y=T*R*u+-w*R*c+(-s*T+h*w)*R,g};o.exports=x},26099:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(43855),c=new a({initialize:function(h,s){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(s===void 0&&(s=h),this.x=h||0,this.y=s||0)},clone:function(){return new c(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,h){return h===void 0&&(h=u),this.x=u,this.y=h,this},setTo:function(u,h){return this.set(u,h)},setToPolar:function(u,h){return h==null&&(h=1),this.x=Math.cos(u)*h,this.y=Math.sin(u)*h,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,h){return x(this.x,u.x,h)&&x(this.y,u.y,h)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var h=u.x-this.x,s=u.y-this.y;return Math.sqrt(h*h+s*s)},distanceSq:function(u){var h=u.x-this.x,s=u.y-this.y;return h*h+s*s},length:function(){var u=this.x,h=this.y;return Math.sqrt(u*u+h*h)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,h=this.y;return u*u+h*h},normalize:function(){var u=this.x,h=this.y,s=u*u+h*h;return s>0&&(s=1/Math.sqrt(s),this.x=u*s,this.y=h*s),this},normalizeRightHand:function(){var u=this.x;return this.x=this.y*-1,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=u*-1,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,h){h===void 0&&(h=0);var s=this.x,l=this.y;return this.x=s+h*(u.x-s),this.y=l+h*(u.y-l),this},transformMat3:function(u){var h=this.x,s=this.y,l=u.val;return this.x=l[0]*h+l[3]*s+l[6],this.y=l[1]*h+l[4]*s+l[7],this},transformMat4:function(u){var h=this.x,s=this.y,l=u.val;return this.x=l[0]*h+l[4]*s+l[12],this.y=l[1]*h+l[5]*s+l[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var h=this.length();return h&&h>u&&this.scale(u/h),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var h=Math.cos(u),s=Math.sin(u);return this.set(h*this.x-s*this.y,s*this.x+h*this.y)},project:function(u){var h=this.dot(u)/u.dot(u);return this.copy(u).scale(h)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),o.exports=c},25836:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=h||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(c,u){return this.x=c.x+u.x,this.y=c.y+u.y,this.z=c.z+u.z,this},subVectors:function(c,u){return this.x=c.x-u.x,this.y=c.y-u.y,this.z=c.z-u.z,this},crossVectors:function(c,u){var h=c.x,s=c.y,l=c.z,v=u.x,d=u.y,g=u.z;return this.x=s*g-l*d,this.y=l*v-h*g,this.z=h*d-s*v,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this},set:function(c,u,h){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=u||0,this.z=h||0),this},setFromMatrixPosition:function(c){return this.fromArray(c.val,12)},setFromMatrixColumn:function(c,u){return this.fromArray(c.val,u*4)},fromArray:function(c,u){return u===void 0&&(u=0),this.x=c[u],this.y=c[u+1],this.z=c[u+2],this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this},addScalar:function(c){return this.x+=c,this.y+=c,this.z+=c,this},addScale:function(c,u){return this.x+=c.x*u,this.y+=c.y*u,this.z+=c.z*u||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this},scale:function(c){return isFinite(c)?(this.x*=c,this.y*=c,this.z*=c):(this.x=0,this.y=0,this.z=0),this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(c){var u=c.x-this.x,h=c.y-this.y,s=c.z-this.z||0;return Math.sqrt(u*u+h*h+s*s)},distanceSq:function(c){var u=c.x-this.x,h=c.y-this.y,s=c.z-this.z||0;return u*u+h*h+s*s},length:function(){var c=this.x,u=this.y,h=this.z;return Math.sqrt(c*c+u*u+h*h)},lengthSq:function(){var c=this.x,u=this.y,h=this.z;return c*c+u*u+h*h},normalize:function(){var c=this.x,u=this.y,h=this.z,s=c*c+u*u+h*h;return s>0&&(s=1/Math.sqrt(s),this.x=c*s,this.y=u*s,this.z=h*s),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z},cross:function(c){var u=this.x,h=this.y,s=this.z,l=c.x,v=c.y,d=c.z;return this.x=h*d-s*v,this.y=s*l-u*d,this.z=u*v-h*l,this},lerp:function(c,u){u===void 0&&(u=0);var h=this.x,s=this.y,l=this.z;return this.x=h+u*(c.x-h),this.y=s+u*(c.y-s),this.z=l+u*(c.z-l),this},applyMatrix3:function(c){var u=this.x,h=this.y,s=this.z,l=c.val;return this.x=l[0]*u+l[3]*h+l[6]*s,this.y=l[1]*u+l[4]*h+l[7]*s,this.z=l[2]*u+l[5]*h+l[8]*s,this},applyMatrix4:function(c){var u=this.x,h=this.y,s=this.z,l=c.val,v=1/(l[3]*u+l[7]*h+l[11]*s+l[15]);return this.x=(l[0]*u+l[4]*h+l[8]*s+l[12])*v,this.y=(l[1]*u+l[5]*h+l[9]*s+l[13])*v,this.z=(l[2]*u+l[6]*h+l[10]*s+l[14])*v,this},transformMat3:function(c){var u=this.x,h=this.y,s=this.z,l=c.val;return this.x=u*l[0]+h*l[3]+s*l[6],this.y=u*l[1]+h*l[4]+s*l[7],this.z=u*l[2]+h*l[5]+s*l[8],this},transformMat4:function(c){var u=this.x,h=this.y,s=this.z,l=c.val;return this.x=l[0]*u+l[4]*h+l[8]*s+l[12],this.y=l[1]*u+l[5]*h+l[9]*s+l[13],this.z=l[2]*u+l[6]*h+l[10]*s+l[14],this},transformCoordinates:function(c){var u=this.x,h=this.y,s=this.z,l=c.val,v=u*l[0]+h*l[4]+s*l[8]+l[12],d=u*l[1]+h*l[5]+s*l[9]+l[13],g=u*l[2]+h*l[6]+s*l[10]+l[14],y=u*l[3]+h*l[7]+s*l[11]+l[15];return this.x=v/y,this.y=d/y,this.z=g/y,this},transformQuat:function(c){var u=this.x,h=this.y,s=this.z,l=c.x,v=c.y,d=c.z,g=c.w,y=g*u+v*s-d*h,S=g*h+d*u-l*s,T=g*s+l*h-v*u,w=-l*u-v*h-d*s;return this.x=y*g+w*-l+S*-d-T*-v,this.y=S*g+w*-v+T*-l-y*-d,this.z=T*g+w*-d+y*-v-S*-l,this},project:function(c){var u=this.x,h=this.y,s=this.z,l=c.val,v=l[0],d=l[1],g=l[2],y=l[3],S=l[4],T=l[5],w=l[6],P=l[7],A=l[8],R=l[9],I=l[10],M=l[11],L=l[12],N=l[13],G=l[14],D=l[15],B=1/(u*y+h*P+s*M+D);return this.x=(u*v+h*S+s*A+L)*B,this.y=(u*d+h*T+s*R+N)*B,this.z=(u*g+h*w+s*I+G)*B,this},projectViewMatrix:function(c,u){return this.applyMatrix4(c).applyMatrix4(u)},unprojectViewMatrix:function(c,u){return this.applyMatrix4(c).applyMatrix4(u)},unproject:function(c,u){var h=c.x,s=c.y,l=c.z,v=c.w,d=this.x-h,g=v-this.y-1-s,y=this.z;return this.x=2*d/l-1,this.y=2*g/v-1,this.z=2*y-1,this.project(u)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),o.exports=x},61369:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=h||0,this.z=s||0,this.w=l||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this.w=c.w||0,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z&&this.w===c.w},set:function(c,u,h,s){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=u||0,this.z=h||0,this.w=s||0),this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this.w+=c.w||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this.w-=c.w||0,this},scale:function(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this},length:function(){var c=this.x,u=this.y,h=this.z,s=this.w;return Math.sqrt(c*c+u*u+h*h+s*s)},lengthSq:function(){var c=this.x,u=this.y,h=this.z,s=this.w;return c*c+u*u+h*h+s*s},normalize:function(){var c=this.x,u=this.y,h=this.z,s=this.w,l=c*c+u*u+h*h+s*s;return l>0&&(l=1/Math.sqrt(l),this.x=c*l,this.y=u*l,this.z=h*l,this.w=s*l),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,u){u===void 0&&(u=0);var h=this.x,s=this.y,l=this.z,v=this.w;return this.x=h+u*(c.x-h),this.y=s+u*(c.y-s),this.z=l+u*(c.z-l),this.w=v+u*(c.w-v),this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this.w*=c.w||1,this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this.w/=c.w||1,this},distance:function(c){var u=c.x-this.x,h=c.y-this.y,s=c.z-this.z||0,l=c.w-this.w||0;return Math.sqrt(u*u+h*h+s*s+l*l)},distanceSq:function(c){var u=c.x-this.x,h=c.y-this.y,s=c.z-this.z||0,l=c.w-this.w||0;return u*u+h*h+s*s+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(c){var u=this.x,h=this.y,s=this.z,l=this.w,v=c.val;return this.x=v[0]*u+v[4]*h+v[8]*s+v[12]*l,this.y=v[1]*u+v[5]*h+v[9]*s+v[13]*l,this.z=v[2]*u+v[6]*h+v[10]*s+v[14]*l,this.w=v[3]*u+v[7]*h+v[11]*s+v[15]*l,this},transformQuat:function(c){var u=this.x,h=this.y,s=this.z,l=c.x,v=c.y,d=c.z,g=c.w,y=g*u+v*s-d*h,S=g*h+d*u-l*s,T=g*s+l*h-v*u,w=-l*u-v*h-d*s;return this.x=y*g+w*-l+S*-d-T*-v,this.y=S*g+w*-v+T*-l-y*-d,this.z=T*g+w*-d+y*-v-S*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,o.exports=x},60417:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.abs(e-a)<=x};o.exports=E},15994:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=x-a;return a+((e-a)%c+c)%c};o.exports=E},31040:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return Math.atan2(c-a,x-e)};o.exports=E},55495:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)};o.exports=E},128:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.atan2(a.x-e.x,a.y-e.y)};o.exports=E},41273:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return Math.atan2(x-e,c-a)};o.exports=E},1432:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(c){return c>Math.PI&&(c-=a.PI2),Math.abs(((c+a.TAU)%a.PI2-a.PI2)%a.PI2)};o.exports=x},12407:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};o.exports=E},53993:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),x=function(){return a(-Math.PI,Math.PI)};o.exports=x},86564:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),x=function(){return a(-180,180)};o.exports=x},90154:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),x=function(c){return a(c+Math.PI)};o.exports=x},48736:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(c,u,h){return h===void 0&&(h=.05),c===u||(Math.abs(u-c)<=h||Math.abs(u-c)>=a.PI2-h?c=u:(Math.abs(u-c)>Math.PI&&(u<c?u+=a.PI2:u-=a.PI2),u>c?c+=h:u<c&&(c-=h))),c};o.exports=x},61430:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=a-e;if(x===0)return 0;var c=Math.floor((x- -180)/360);return x-c*360};o.exports=E},86554:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(c){return a(c,-Math.PI,Math.PI)};o.exports=x},30954:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(c){return a(c,-180,180)};o.exports=x},25588:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}},36383:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};o.exports=E},20339:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=e-x,h=a-c;return Math.sqrt(u*u+h*h)};o.exports=E},52816:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x-a.x,c=e.y-a.y;return Math.sqrt(x*x+c*c)};o.exports=E},64559:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x-a.x,c=e.y-a.y;return x*x+c*c};o.exports=E},82340:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return Math.max(Math.abs(e-x),Math.abs(a-c))};o.exports=E},14390:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(x-e,u)+Math.pow(c-a,u))};o.exports=E},2243:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return Math.abs(e-x)+Math.abs(a-c)};o.exports=E},89774:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=e-x,h=a-c;return u*u+h*h};o.exports=E},50994:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}},62640:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54178),x=e(41521),c=e(79980),u=e(85433),h=e(99140),s=e(48857),l=e(81596),v=e(59133),d=e(98516),g=e(35248),y=e(82500),S=e(49752);o.exports={Power0:l,Power1:v.Out,Power2:u.Out,Power3:d.Out,Power4:g.Out,Linear:l,Quad:v.Out,Cubic:u.Out,Quart:d.Out,Quint:g.Out,Sine:y.Out,Expo:s.Out,Circ:c.Out,Elastic:h.Out,Back:a.Out,Bounce:x.Out,Stepped:S,"Quad.easeIn":v.In,"Cubic.easeIn":u.In,"Quart.easeIn":d.In,"Quint.easeIn":g.In,"Sine.easeIn":y.In,"Expo.easeIn":s.In,"Circ.easeIn":c.In,"Elastic.easeIn":h.In,"Back.easeIn":a.In,"Bounce.easeIn":x.In,"Quad.easeOut":v.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":d.Out,"Quint.easeOut":g.Out,"Sine.easeOut":y.Out,"Expo.easeOut":s.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":h.Out,"Back.easeOut":a.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":g.InOut,"Sine.easeInOut":y.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":x.InOut}},1639:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1.70158),e*e*((a+1)*e-a)};o.exports=E},50099:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1.70158);var x=a*1.525;return(e*=2)<1?.5*(e*e*((x+1)*e-x)):.5*((e-=2)*e*((x+1)*e+x)+2)};o.exports=E},41286:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1.70158),--e*e*((a+1)*e+a)+1};o.exports=E},54178:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(1639),Out:e(41286),InOut:e(50099)}},59590:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};o.exports=E},41788:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=!1;return e<.5?(e=1-e*2,a=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,a?(1-e)*.5:e*.5+.5};o.exports=E},69905:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};o.exports=E},41521:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(59590),Out:e(69905),InOut:e(41788)}},91861:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1-Math.sqrt(1-e*e)};o.exports=E},4177:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};o.exports=E},57512:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt(1- --e*e)};o.exports=E},79980:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(91861),Out:e(57512),InOut:e(4177)}},51150:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e};o.exports=E},82820:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};o.exports=E},35033:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return--e*e*e+1};o.exports=E},85433:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(51150),Out:e(35033),InOut:e(82820)}},69965:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var c=x/4;return a<1?a=1:c=x*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/x))};o.exports=E},50665:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var c=x/4;return a<1?a=1:c=x*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/x)):a*Math.pow(2,-10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/x)*.5+1};o.exports=E},7744:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var c=x/4;return a<1?a=1:c=x*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-c)*(2*Math.PI)/x)+1};o.exports=E},99140:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(69965),Out:e(7744),InOut:e(50665)}},24590:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.pow(2,10*(e-1))-.001};o.exports=E},87844:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};o.exports=E},89433:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1-Math.pow(2,-10*e)};o.exports=E},48857:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(24590),Out:e(89433),InOut:e(87844)}},48820:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}},7147:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e};o.exports=E},81596:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(7147)},34826:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e};o.exports=E},20544:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};o.exports=E},92029:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*(2-e)};o.exports=E},59133:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(34826),Out:e(92029),InOut:e(20544)}},64413:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e*e};o.exports=E},78137:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};o.exports=E},45840:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1- --e*e*e*e};o.exports=E},98516:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(64413),Out:e(45840),InOut:e(78137)}},87745:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e*e*e};o.exports=E},16509:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};o.exports=E},17868:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return--e*e*e*e*e+1};o.exports=E},35248:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(87745),Out:e(17868),InOut:e(16509)}},80461:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};o.exports=E},34025:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};o.exports=E},52768:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};o.exports=E},82500:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(80461),Out:e(52768),InOut:e(34025)}},72251:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1),e<=0?0:e>=1?1:((a*e|0)+1)*(1/a)};o.exports=E},49752:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(72251)},75698:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1e-4),Math.ceil(e-a)};o.exports=E},43855:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),Math.abs(e-a)<x};o.exports=E},25777:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1e-4),Math.floor(e+a)};o.exports=E},5470:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),e>a-x};o.exports=E},94977:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),e<a+x};o.exports=E},48379:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}},75508:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(79291),c={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};c=x(!1,c,a),o.exports=c},89318:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85710),x=function(c,u){for(var h=0,s=c.length-1,l=0;l<=s;l++)h+=Math.pow(1-u,s-l)*Math.pow(u,l)*c[l]*a(s,l);return h};o.exports=x},77259:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),x=function(c,u){var h=c.length-1,s=h*u,l=Math.floor(s);return c[0]===c[h]?(u<0&&(l=Math.floor(s=h*(1+u))),a(s-l,c[(l-1+h)%h],c[l],c[(l+1)%h],c[(l+2)%h])):u<0?c[0]-(a(-s,c[0],c[0],c[1],c[1])-c[0]):u>1?c[h]-(a(s-h,c[h],c[h],c[h-1],c[h-1])-c[h]):a(s-l,c[l?l-1:0],c[l],c[h<l+1?h:l+1],c[h<l+2?h:l+2])};o.exports=x},36316:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(u,h){var s=1-u;return s*s*s*h}function e(u,h){var s=1-u;return 3*s*s*u*h}function a(u,h){return 3*(1-u)*u*u*h}function x(u,h){return u*u*u*h}var c=function(u,h,s,l,v){return E(u,h)+e(u,s)+a(u,l)+x(u,v)};o.exports=c},28392:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),x=function(c,u){var h=c.length-1,s=h*u,l=Math.floor(s);return u<0?a(c[0],c[1],s):u>1?a(c[h],c[h-1],h-s):a(c[l],c[l+1>h?h:l+1],s-l)};o.exports=x},32112:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(c,u){var h=1-c;return h*h*u}function e(c,u){return 2*(1-c)*c*u}function a(c,u){return c*c*u}var x=function(c,u,h,s){return E(c,u)+e(c,h)+a(c,s)};o.exports=x},47235:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),x=function(c,u,h){return u+(h-u)*a(c,0,1)};o.exports=x},50178:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),x=function(c,u,h){return u+(h-u)*a(c,0,1)};o.exports=x},38289:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}},98439:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=Math.log(e)/.6931471805599453;return 1<<Math.ceil(a)};o.exports=E},50030:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e>0&&(e&e-1)===0&&a>0&&(a&a-1)===0};o.exports=E},81230:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>0&&(e&e-1)===0};o.exports=E},49001:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}},28453:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var c=2091639*this.s0+this.c*23283064365386963e-26;return this.c=c|0,this.s0=this.s1,this.s1=this.s2,this.s2=c-this.c,this.s2},hash:function(c){var u,h=this.n;c=c.toString();for(var s=0;s<c.length;s++)h+=c.charCodeAt(s),u=.02519603282416938*h,h=u>>>0,u-=h,u*=h,h=u>>>0,u-=h,h+=u*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(c){typeof c=="string"?this.state(c):this.sow(c)},sow:function(c){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!c)for(var u=0;u<c.length&&c[u]!=null;u++){var h=c[u];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(c,u){return Math.floor(this.realInRange(0,u-c+1)+c)},between:function(c,u){return Math.floor(this.realInRange(0,u-c+1)+c)},realInRange:function(c,u){return this.frac()*(u-c)+c},normal:function(){return 1-2*this.frac()},uuid:function(){var c="",u="";for(u=c="";c++<36;u+=~c%5|c*3&4?(c^15?8^this.frac()*(c^20?16:4):4).toString(16):"-");return u},pick:function(c){return c[this.integerInRange(0,c.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(c){return c[~~(Math.pow(this.frac(),2)*(c.length-.5)+.5)]},timestamp:function(c,u){return this.realInRange(c||9466848e5,u||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(c){return typeof c=="string"&&c.match(/^!rnd/)&&(c=c.split(","),this.c=parseFloat(c[1]),this.s0=parseFloat(c[2]),this.s1=parseFloat(c[3]),this.s2=parseFloat(c[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(c){for(var u=c.length-1,h=u;h>0;h--){var s=Math.floor(this.frac()*(h+1)),l=c[s];c[s]=c[h],c[h]=l}return c}});o.exports=x},63448:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.ceil(e/a),c?(x+e)/a:x+e)};o.exports=E},56583:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.floor(e/a),c?(x+e)/a:x+e)};o.exports=E},77720:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.round(e/a),c?(x+e)/a:x+e)};o.exports=E},73697:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}},85454:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(63595);var a=e(8054),x=e(79291),c={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};c.Sound=e(23717),c=x(!1,c,a),o.exports=c,e.g.Phaser=c},71289:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92209),c=e(88571),u=new a({Extends:c,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(s,l,v,d,g){c.call(this,s,l,v,d,g),this.body=null}});o.exports=u},86689:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39506),c=e(20339),u=e(89774),h=e(66022),s=e(95540),l=e(46975),v=e(72441),d=e(47956),g=e(37277),y=e(44594),S=e(26099),T=e(82248),w=new a({initialize:function(A){this.scene=A,this.systems=A.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,A.sys.events.once(y.BOOT,this.boot,this),A.sys.events.on(y.START,this.start,this)},boot:function(){this.world=new T(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new T(this.scene,this.config),this.add=new h(this.world));var P=this.systems.events;s(this.config,"customUpdate",!1)||P.on(y.UPDATE,this.world.update,this.world),P.on(y.POST_UPDATE,this.world.postUpdate,this.world),P.once(y.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(y.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(y.UPDATE,this.world.update,this.world)},getConfig:function(){var P=this.systems.game.config.physics,A=this.systems.settings.physics,R=l(s(A,"arcade",{}),s(P,"arcade",{}));return R},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(P,A,R,I,M){return R===void 0&&(R=null),I===void 0&&(I=null),M===void 0&&(M=R),this.world.collideObjects(P,A,R,I,M,!0)},collide:function(P,A,R,I,M){return R===void 0&&(R=null),I===void 0&&(I=null),M===void 0&&(M=R),this.world.collideObjects(P,A,R,I,M,!1)},collideTiles:function(P,A,R,I,M){return this.world.collideTiles(P,A,R,I,M)},overlapTiles:function(P,A,R,I,M){return this.world.overlapTiles(P,A,R,I,M)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(P,A,R,I,M,L){I===void 0&&(I=60);var N=Math.atan2(R-P.y,A-P.x);return P.body.acceleration.setToPolar(N,I),M!==void 0&&L!==void 0&&P.body.maxVelocity.set(M,L),N},accelerateToObject:function(P,A,R,I,M){return this.accelerateTo(P,A.x,A.y,R,I,M)},closest:function(P,A){A||(A=this.world.bodies.entries);for(var R=Number.MAX_VALUE,I=null,M=P.x,L=P.y,N=A.length,G=0;G<N;G++){var D=A[G],B=D.body||D;if(!(P===D||P===B||P===B.gameObject||P===B.center)){var $=u(M,L,B.center.x,B.center.y);$<R&&(I=D,R=$)}}return I},furthest:function(P,A){A||(A=this.world.bodies.entries);for(var R=-1,I=null,M=P.x,L=P.y,N=A.length,G=0;G<N;G++){var D=A[G],B=D.body||D;if(!(P===D||P===B||P===B.gameObject||P===B.center)){var $=u(M,L,B.center.x,B.center.y);$>R&&(I=D,R=$)}}return I},moveTo:function(P,A,R,I,M){I===void 0&&(I=60),M===void 0&&(M=0);var L=Math.atan2(R-P.y,A-P.x);return M>0&&(I=c(P.x,P.y,A,R)/(M/1e3)),P.body.velocity.setToPolar(L,I),L},moveToObject:function(P,A,R,I){return this.moveTo(P,A.x,A.y,R,I)},velocityFromAngle:function(P,A,R){return A===void 0&&(A=60),R===void 0&&(R=new S),R.setToPolar(x(P),A)},velocityFromRotation:function(P,A,R){return A===void 0&&(A=60),R===void 0&&(R=new S),R.setToPolar(P,A)},overlapRect:function(P,A,R,I,M,L){return d(this.world,P,A,R,I,M,L)},overlapCirc:function(P,A,R,I,M){return v(this.world,P,A,R,I,M)},shutdown:function(){if(this.world){var P=this.systems.events;P.off(y.UPDATE,this.world.update,this.world),P.off(y.POST_UPDATE,this.world.postUpdate,this.world),P.off(y.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(y.START,this.start,this),this.scene=null,this.systems=null}});g.register("ArcadePhysics",w,"arcadePhysics"),o.exports=w},13759:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92209),c=e(68287),u=new a({Extends:c,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(s,l,v,d,g){c.call(this,s,l,v,d,g),this.body=null}});o.exports=u},37742:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(78389),c=e(37747),u=e(63012),h=e(43396),s=e(87841),l=e(37303),v=e(95829),d=e(26099),g=new a({Mixins:[x],initialize:function(S,T){var w=64,P=64,A={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},R=T!==void 0;R&&T.displayWidth&&(w=T.displayWidth,P=T.displayHeight),R||(T=A),this.world=S,this.gameObject=R?T:void 0,this.isBody=!0,this.transform={x:T.x,y:T.y,rotation:T.angle,scaleX:T.scaleX,scaleY:T.scaleY,displayOriginX:T.displayOriginX,displayOriginY:T.displayOriginY},this.debugShowBody=S.defaults.debugShowBody,this.debugShowVelocity=S.defaults.debugShowVelocity,this.debugBodyColor=S.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(T.x-T.scaleX*T.displayOriginX,T.y-T.scaleY*T.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=T.angle,this.preRotation=T.angle,this.width=w,this.height=P,this.sourceWidth=w,this.sourceHeight=P,T.frame&&(this.sourceWidth=T.frame.realWidth,this.sourceHeight=T.frame.realHeight),this.halfWidth=Math.abs(w/2),this.halfHeight=Math.abs(P/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new d,this.newVelocity=new d,this.deltaMax=new d,this.acceleration=new d,this.allowDrag=!0,this.drag=new d,this.allowGravity=!0,this.gravity=new d,this.bounce=new d,this.worldBounce=null,this.customBoundsRectangle=S.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new d(1e4,1e4),this.maxSpeed=-1,this.friction=new d(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=c.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new d(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=v(!1),this.touching=v(!0),this.wasTouching=v(!0),this.blocked=v(!0),this.syncBounds=!1,this.physicsType=c.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=T.scaleX,this._sy=T.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new s,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var y=this.gameObject,S=this.transform;if(y.parentContainer){var T=y.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);S.x=T.tx,S.y=T.ty,S.rotation=h(T.rotation),S.scaleX=T.scaleX,S.scaleY=T.scaleY,S.displayOriginX=y.displayOriginX,S.displayOriginY=y.displayOriginY}else S.x=y.x,S.y=y.y,S.rotation=y.angle,S.scaleX=y.scaleX,S.scaleY=y.scaleY,S.displayOriginX=y.displayOriginX,S.displayOriginY=y.displayOriginY;var w=!1;if(this.syncBounds){var P=y.getBounds(this._bounds);this.width=P.width,this.height=P.height,w=!0}else{var A=Math.abs(S.scaleX),R=Math.abs(S.scaleY);(this._sx!==A||this._sy!==R)&&(this.width=this.sourceWidth*A,this.height=this.sourceHeight*R,this._sx=A,this._sy=R,w=!0)}w&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var y=this.transform;this.position.x=y.x+y.scaleX*(this.offset.x-y.displayOriginX),this.position.y=y.y+y.scaleY*(this.offset.y-y.displayOriginY),this.updateCenter()},resetFlags:function(y){y===void 0&&(y=!1);var S=this.wasTouching,T=this.touching,w=this.blocked;y?v(!0,S):(S.none=T.none,S.up=T.up,S.down=T.down,S.left=T.left,S.right=T.right),v(!0,T),v(!0,w),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(y,S){if(y&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var T=this.position;this.prev.x=T.x,this.prev.y=T.y,this.prevFrame.x=T.x,this.prevFrame.y=T.y}y&&this.update(S)},update:function(y){var S=this.prev,T=this.position,w=this.velocity;if(S.set(T.x,T.y),!this.moves){this._dx=T.x-S.x,this._dy=T.y-S.y;return}if(this.directControl){var P=this.autoFrame;w.set((T.x-P.x)/y,(T.y-P.y)/y),this.world.updateMotion(this,y),this._dx=T.x-P.x,this._dy=T.y-P.y}else this.world.updateMotion(this,y),this.newVelocity.set(w.x*y,w.y*y),T.add(this.newVelocity),this._dx=T.x-S.x,this._dy=T.y-S.y;var A=w.x,R=w.y;if(this.updateCenter(),this.angle=Math.atan2(R,A),this.speed=Math.sqrt(A*A+R*R),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var I=this.blocked;this.world.emit(u.WORLD_BOUNDS,this,I.up,I.down,I.left,I.right)}},postUpdate:function(){var y=this.position,S=y.x-this.prevFrame.x,T=y.y-this.prevFrame.y,w=this.gameObject;if(this.moves){var P=this.deltaMax.x,A=this.deltaMax.y;P!==0&&S!==0&&(S<0&&S<-P?S=-P:S>0&&S>P&&(S=P)),A!==0&&T!==0&&(T<0&&T<-A?T=-A:T>0&&T>A&&(T=A)),w&&(w.x+=S,w.y+=T)}S<0?this.facing=c.FACING_LEFT:S>0&&(this.facing=c.FACING_RIGHT),T<0?this.facing=c.FACING_UP:T>0&&(this.facing=c.FACING_DOWN),this.allowRotation&&w&&(w.angle+=this.deltaZ()),this._tx=S,this._ty=T,this.autoFrame.set(y.x,y.y)},setBoundsRectangle:function(y){return this.customBoundsRectangle=y||this.world.bounds,this},checkWorldBounds:function(){var y=this.position,S=this.velocity,T=this.blocked,w=this.customBoundsRectangle,P=this.world.checkCollision,A=this.worldBounce?-this.worldBounce.x:-this.bounce.x,R=this.worldBounce?-this.worldBounce.y:-this.bounce.y,I=!1;return y.x<w.x&&P.left?(y.x=w.x,S.x*=A,T.left=!0,I=!0):this.right>w.right&&P.right&&(y.x=w.right-this.width,S.x*=A,T.right=!0,I=!0),y.y<w.y&&P.up?(y.y=w.y,S.y*=R,T.up=!0,I=!0):this.bottom>w.bottom&&P.down&&(y.y=w.bottom-this.height,S.y*=R,T.down=!0,I=!0),I&&(this.blocked.none=!1,this.updateCenter()),I},setOffset:function(y,S){return S===void 0&&(S=y),this.offset.set(y,S),this},setGameObject:function(y,S){return S===void 0&&(S=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=y,y.body&&(y.body=this),this.setSize(),this.world.add(this),this.enable=S,this},setSize:function(y,S,T){T===void 0&&(T=!0);var w=this.gameObject;if(w&&(!y&&w.frame&&(y=w.frame.realWidth),!S&&w.frame&&(S=w.frame.realHeight)),this.sourceWidth=y,this.sourceHeight=S,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),T&&w&&w.getCenter){var P=(w.width-y)/2,A=(w.height-S)/2;this.offset.set(P,A)}return this.isCircle=!1,this.radius=0,this},setCircle:function(y,S,T){return S===void 0&&(S=this.offset.x),T===void 0&&(T=this.offset.y),y>0?(this.isCircle=!0,this.radius=y,this.sourceWidth=y*2,this.sourceHeight=y*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(S,T),this.updateCenter()):this.isCircle=!1,this},reset:function(y,S){this.stop();var T=this.gameObject;T&&(T.setPosition(y,S),this.rotation=T.angle,this.preRotation=T.angle);var w=this.position;T&&T.getTopLeft?T.getTopLeft(w):w.set(y,S),this.prev.copy(w),this.prevFrame.copy(w),this.autoFrame.copy(w),T&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(y){return y.x=this.x,y.y=this.y,y.right=this.right,y.bottom=this.bottom,y},hitTest:function(y,S){if(!this.isCircle)return l(this,y,S);if(this.radius>0&&y>=this.left&&y<=this.right&&S>=this.top&&S<=this.bottom){var T=(this.center.x-y)*(this.center.x-y),w=(this.center.y-S)*(this.center.y-S);return T+w<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(y){var S=this.position,T=S.x+this.halfWidth,w=S.y+this.halfHeight;this.debugShowBody&&(y.lineStyle(y.defaultStrokeWidth,this.debugBodyColor),this.isCircle?y.strokeCircle(T,w,this.width/2):(this.checkCollision.up&&y.lineBetween(S.x,S.y,S.x+this.width,S.y),this.checkCollision.right&&y.lineBetween(S.x+this.width,S.y,S.x+this.width,S.y+this.height),this.checkCollision.down&&y.lineBetween(S.x,S.y+this.height,S.x+this.width,S.y+this.height),this.checkCollision.left&&y.lineBetween(S.x,S.y,S.x,S.y+this.height))),this.debugShowVelocity&&(y.lineStyle(y.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),y.lineBetween(T,w,T+this.velocity.x/2,w+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(y){return y===void 0&&(y=!0),this.directControl=y,this},setCollideWorldBounds:function(y,S,T,w){y===void 0&&(y=!0),this.collideWorldBounds=y;var P=S!==void 0,A=T!==void 0;return(P||A)&&(this.worldBounce||(this.worldBounce=new d),P&&(this.worldBounce.x=S),A&&(this.worldBounce.y=T)),w!==void 0&&(this.onWorldBounds=w),this},setVelocity:function(y,S){return this.velocity.set(y,S),y=this.velocity.x,S=this.velocity.y,this.speed=Math.sqrt(y*y+S*S),this},setVelocityX:function(y){return this.setVelocity(y,this.velocity.y)},setVelocityY:function(y){return this.setVelocity(this.velocity.x,y)},setMaxVelocity:function(y,S){return this.maxVelocity.set(y,S),this},setMaxVelocityX:function(y){return this.maxVelocity.x=y,this},setMaxVelocityY:function(y){return this.maxVelocity.y=y,this},setMaxSpeed:function(y){return this.maxSpeed=y,this},setSlideFactor:function(y,S){return this.slideFactor.set(y,S),this},setBounce:function(y,S){return this.bounce.set(y,S),this},setBounceX:function(y){return this.bounce.x=y,this},setBounceY:function(y){return this.bounce.y=y,this},setAcceleration:function(y,S){return this.acceleration.set(y,S),this},setAccelerationX:function(y){return this.acceleration.x=y,this},setAccelerationY:function(y){return this.acceleration.y=y,this},setAllowDrag:function(y){return y===void 0&&(y=!0),this.allowDrag=y,this},setAllowGravity:function(y){return y===void 0&&(y=!0),this.allowGravity=y,this},setAllowRotation:function(y){return y===void 0&&(y=!0),this.allowRotation=y,this},setDrag:function(y,S){return this.drag.set(y,S),this},setDamping:function(y){return this.useDamping=y,this},setDragX:function(y){return this.drag.x=y,this},setDragY:function(y){return this.drag.y=y,this},setGravity:function(y,S){return this.gravity.set(y,S),this},setGravityX:function(y){return this.gravity.x=y,this},setGravityY:function(y){return this.gravity.y=y,this},setFriction:function(y,S){return this.friction.set(y,S),this},setFrictionX:function(y){return this.friction.x=y,this},setFrictionY:function(y){return this.friction.y=y,this},setAngularVelocity:function(y){return this.angularVelocity=y,this},setAngularAcceleration:function(y){return this.angularAcceleration=y,this},setAngularDrag:function(y){return this.angularDrag=y,this},setMass:function(y){return this.mass=y,this},setImmovable:function(y){return y===void 0&&(y=!0),this.immovable=y,this},setEnable:function(y){return y===void 0&&(y=!0),this.enable=y,this},processX:function(y,S,T,w){this.x+=y,this.updateCenter(),S!==null&&(this.velocity.x=S*this.slideFactor.x);var P=this.blocked;T&&(P.left=!0,P.none=!1),w&&(P.right=!0,P.none=!1)},processY:function(y,S,T,w){this.y+=y,this.updateCenter(),S!==null&&(this.velocity.y=S*this.slideFactor.y);var P=this.blocked;T&&(P.up=!0,P.none=!1),w&&(P.down=!0,P.none=!1)},x:{get:function(){return this.position.x},set:function(y){this.position.x=y}},y:{get:function(){return this.position.y},set:function(y){this.position.y=y}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=g},79342:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l,v,d,g){this.world=u,this.name="",this.active=!0,this.overlapOnly=h,this.object1=s,this.object2=l,this.collideCallback=v,this.processCallback=d,this.callbackContext=g},setName:function(c){return this.name=c,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});o.exports=x},66022:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71289),x=e(13759),c=e(37742),u=e(83419),h=e(37747),s=e(60758),l=e(72624),v=e(71464),d=new u({initialize:function(y){this.world=y,this.scene=y.scene,this.sys=y.scene.sys},collider:function(g,y,S,T,w){return this.world.addCollider(g,y,S,T,w)},overlap:function(g,y,S,T,w){return this.world.addOverlap(g,y,S,T,w)},existing:function(g,y){var S=y?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(g,S),g},staticImage:function(g,y,S,T){var w=new a(this.scene,g,y,S,T);return this.sys.displayList.add(w),this.world.enableBody(w,h.STATIC_BODY),w},image:function(g,y,S,T){var w=new a(this.scene,g,y,S,T);return this.sys.displayList.add(w),this.world.enableBody(w,h.DYNAMIC_BODY),w},staticSprite:function(g,y,S,T){var w=new x(this.scene,g,y,S,T);return this.sys.displayList.add(w),this.sys.updateList.add(w),this.world.enableBody(w,h.STATIC_BODY),w},sprite:function(g,y,S,T){var w=new x(this.scene,g,y,S,T);return this.sys.displayList.add(w),this.sys.updateList.add(w),this.world.enableBody(w,h.DYNAMIC_BODY),w},staticGroup:function(g,y){return this.sys.updateList.add(new v(this.world,this.world.scene,g,y))},group:function(g,y){return this.sys.updateList.add(new s(this.world,this.world.scene,g,y))},body:function(g,y,S,T){var w=new c(this.world);return w.position.set(g,y),S&&T&&w.setSize(S,T),this.world.add(w,h.DYNAMIC_BODY),w},staticBody:function(g,y,S,T){var w=new l(this.world);return w.position.set(g,y),S&&T&&w.setSize(S,T),this.world.add(w,h.STATIC_BODY),w},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=d},79599:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=0;if(!Array.isArray(e))a=e;else for(var x=0;x<e.length;x++)a|=e[x];return a};o.exports=E},64897:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=function(c,u,h,s){var l=0,v=c.deltaAbsX()+u.deltaAbsX()+s;return c._dx===0&&u._dx===0?(c.embedded=!0,u.embedded=!0):c._dx>u._dx?(l=c.right-u.x,l>v&&!h||c.checkCollision.right===!1||u.checkCollision.left===!1?l=0:(c.touching.none=!1,c.touching.right=!0,u.touching.none=!1,u.touching.left=!0,u.physicsType===a.STATIC_BODY&&!h&&(c.blocked.none=!1,c.blocked.right=!0),c.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.left=!0))):c._dx<u._dx&&(l=c.x-u.width-u.x,-l>v&&!h||c.checkCollision.left===!1||u.checkCollision.right===!1?l=0:(c.touching.none=!1,c.touching.left=!0,u.touching.none=!1,u.touching.right=!0,u.physicsType===a.STATIC_BODY&&!h&&(c.blocked.none=!1,c.blocked.left=!0),c.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.right=!0))),c.overlapX=l,u.overlapX=l,l};o.exports=x},45170:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=function(c,u,h,s){var l=0,v=c.deltaAbsY()+u.deltaAbsY()+s;return c._dy===0&&u._dy===0?(c.embedded=!0,u.embedded=!0):c._dy>u._dy?(l=c.bottom-u.y,l>v&&!h||c.checkCollision.down===!1||u.checkCollision.up===!1?l=0:(c.touching.none=!1,c.touching.down=!0,u.touching.none=!1,u.touching.up=!0,u.physicsType===a.STATIC_BODY&&!h&&(c.blocked.none=!1,c.blocked.down=!0),c.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.up=!0))):c._dy<u._dy&&(l=c.y-u.bottom,-l>v&&!h||c.checkCollision.up===!1||u.checkCollision.down===!1?l=0:(c.touching.none=!1,c.touching.up=!0,u.touching.none=!1,u.touching.down=!0,u.physicsType===a.STATIC_BODY&&!h&&(c.blocked.none=!1,c.blocked.up=!0),c.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.down=!0))),c.overlapY=l,u.overlapY=l,l};o.exports=x},60758:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),x=e(83419),c=e(78389),u=e(37747),h=e(95540),s=e(26479),l=e(41212),v=new x({Extends:s,Mixins:[c],initialize:function(g,y,S,T){if(!S&&!T)T={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(S))T=S,S=null,T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(S)&&l(S[0])){var w=this;S.forEach(function(P){P.internalCreateCallback=w.createCallbackHandler,P.internalRemoveCallback=w.removeCallbackHandler,P.classType=h(P,"classType",a)}),T=null}else T={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=g,T&&(T.classType=h(T,"classType",a)),this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:h(T,"collideWorldBounds",!1),setBoundsRectangle:h(T,"customBoundsRectangle",null),setAccelerationX:h(T,"accelerationX",0),setAccelerationY:h(T,"accelerationY",0),setAllowDrag:h(T,"allowDrag",!0),setAllowGravity:h(T,"allowGravity",!0),setAllowRotation:h(T,"allowRotation",!0),setDamping:h(T,"useDamping",!1),setBounceX:h(T,"bounceX",0),setBounceY:h(T,"bounceY",0),setDragX:h(T,"dragX",0),setDragY:h(T,"dragY",0),setEnable:h(T,"enable",!0),setGravityX:h(T,"gravityX",0),setGravityY:h(T,"gravityY",0),setFrictionX:h(T,"frictionX",0),setFrictionY:h(T,"frictionY",0),setMaxSpeed:h(T,"maxSpeed",-1),setMaxVelocityX:h(T,"maxVelocityX",1e4),setMaxVelocityY:h(T,"maxVelocityY",1e4),setVelocityX:h(T,"velocityX",0),setVelocityY:h(T,"velocityY",0),setAngularVelocity:h(T,"angularVelocity",0),setAngularAcceleration:h(T,"angularAcceleration",0),setAngularDrag:h(T,"angularDrag",0),setMass:h(T,"mass",1),setImmovable:h(T,"immovable",!1)},s.call(this,y,S,T),this.type="PhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,u.DYNAMIC_BODY);var g=d.body;for(var y in this.defaults)g[y](this.defaults[y])},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},setVelocity:function(d,g,y){y===void 0&&(y=0);for(var S=this.getChildren(),T=0;T<S.length;T++)S[T].body.velocity.set(d+T*y,g+T*y);return this},setVelocityX:function(d,g){g===void 0&&(g=0);for(var y=this.getChildren(),S=0;S<y.length;S++)y[S].body.velocity.x=d+S*g;return this},setVelocityY:function(d,g){g===void 0&&(g=0);for(var y=this.getChildren(),S=0;S<y.length;S++)y[S].body.velocity.y=d+S*g;return this}});o.exports=v},3017:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,e,a,x,c,u,h,s,l,v,d,g,y,S,T,w,P,A=function(G,D,B){E=G,e=D;var $=E.velocity.x,k=e.velocity.x;return a=E.pushable,l=E._dx<0,v=E._dx>0,d=E._dx===0,T=Math.abs(E.right-e.x)<=Math.abs(e.right-E.x),h=k-$*E.bounce.x,x=e.pushable,g=e._dx<0,y=e._dx>0,S=e._dx===0,w=!T,s=$-k*e.bounce.x,P=Math.abs(B),R()},R=function(){return v&&T&&e.blocked.right?(E.processX(-P,h,!1,!0),1):l&&w&&e.blocked.left?(E.processX(P,h,!0),1):y&&w&&E.blocked.right?(e.processX(-P,s,!1,!0),2):g&&T&&E.blocked.left?(e.processX(P,s,!0),2):0},I=function(){var G=E.velocity.x,D=e.velocity.x,B=Math.sqrt(D*D*e.mass/E.mass)*(D>0?1:-1),$=Math.sqrt(G*G*E.mass/e.mass)*(G>0?1:-1),k=(B+$)*.5;return B-=k,$-=k,c=k+B*E.bounce.x,u=k+$*e.bounce.x,l&&w?M(0):g&&T?M(1):v&&T?M(2):y&&w?M(3):!1},M=function(G){if(a&&x)P*=.5,G===0||G===3?(E.processX(P,c),e.processX(-P,u)):(E.processX(-P,c),e.processX(P,u));else if(a&&!x)G===0||G===3?E.processX(P,h,!0):E.processX(-P,h,!1,!0);else if(!a&&x)G===0||G===3?e.processX(-P,s,!1,!0):e.processX(P,s,!0);else{var D=P*.5;G===0?S?(E.processX(P,0,!0),e.processX(0,null,!1,!0)):y?(E.processX(D,0,!0),e.processX(-D,0,!1,!0)):(E.processX(D,e.velocity.x,!0),e.processX(-D,null,!1,!0)):G===1?d?(E.processX(0,null,!1,!0),e.processX(P,0,!0)):v?(E.processX(-D,0,!1,!0),e.processX(D,0,!0)):(E.processX(-D,null,!1,!0),e.processX(D,E.velocity.x,!0)):G===2?S?(E.processX(-P,0,!1,!0),e.processX(0,null,!0)):g?(E.processX(-D,0,!1,!0),e.processX(D,0,!0)):(E.processX(-D,e.velocity.x,!1,!0),e.processX(D,null,!0)):G===3&&(d?(E.processX(0,null,!0),e.processX(-P,0,!1,!0)):l?(E.processX(D,0,!0),e.processX(-D,0,!1,!0)):(E.processX(D,e.velocity.y,!0),e.processX(-D,null,!1,!0)))}return!0},L=function(G){if(G===1?e.velocity.x=0:T?e.processX(P,s,!0):e.processX(-P,s,!1,!0),E.moves){var D=E.directControl?E.y-E.autoFrame.y:E.y-E.prev.y;e.y+=D*E.friction.y,e._dy=e.y-e.prev.y}},N=function(G){if(G===2?E.velocity.x=0:w?E.processX(P,h,!0):E.processX(-P,h,!1,!0),e.moves){var D=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;E.y+=D*e.friction.y,E._dy=E.y-E.prev.y}};o.exports={BlockCheck:R,Check:I,Set:A,Run:M,RunImmovableBody1:L,RunImmovableBody2:N}},47962:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,e,a,x,c,u,h,s,l,v,d,g,y,S,T,w,P,A=function(G,D,B){E=G,e=D;var $=E.velocity.y,k=e.velocity.y;return a=E.pushable,l=E._dy<0,v=E._dy>0,d=E._dy===0,T=Math.abs(E.bottom-e.y)<=Math.abs(e.bottom-E.y),h=k-$*E.bounce.y,x=e.pushable,g=e._dy<0,y=e._dy>0,S=e._dy===0,w=!T,s=$-k*e.bounce.y,P=Math.abs(B),R()},R=function(){return v&&T&&e.blocked.down?(E.processY(-P,h,!1,!0),1):l&&w&&e.blocked.up?(E.processY(P,h,!0),1):y&&w&&E.blocked.down?(e.processY(-P,s,!1,!0),2):g&&T&&E.blocked.up?(e.processY(P,s,!0),2):0},I=function(){var G=E.velocity.y,D=e.velocity.y,B=Math.sqrt(D*D*e.mass/E.mass)*(D>0?1:-1),$=Math.sqrt(G*G*E.mass/e.mass)*(G>0?1:-1),k=(B+$)*.5;return B-=k,$-=k,c=k+B*E.bounce.y,u=k+$*e.bounce.y,l&&w?M(0):g&&T?M(1):v&&T?M(2):y&&w?M(3):!1},M=function(G){if(a&&x)P*=.5,G===0||G===3?(E.processY(P,c),e.processY(-P,u)):(E.processY(-P,c),e.processY(P,u));else if(a&&!x)G===0||G===3?E.processY(P,h,!0):E.processY(-P,h,!1,!0);else if(!a&&x)G===0||G===3?e.processY(-P,s,!1,!0):e.processY(P,s,!0);else{var D=P*.5;G===0?S?(E.processY(P,0,!0),e.processY(0,null,!1,!0)):y?(E.processY(D,0,!0),e.processY(-D,0,!1,!0)):(E.processY(D,e.velocity.y,!0),e.processY(-D,null,!1,!0)):G===1?d?(E.processY(0,null,!1,!0),e.processY(P,0,!0)):v?(E.processY(-D,0,!1,!0),e.processY(D,0,!0)):(E.processY(-D,null,!1,!0),e.processY(D,E.velocity.y,!0)):G===2?S?(E.processY(-P,0,!1,!0),e.processY(0,null,!0)):g?(E.processY(-D,0,!1,!0),e.processY(D,0,!0)):(E.processY(-D,e.velocity.y,!1,!0),e.processY(D,null,!0)):G===3&&(d?(E.processY(0,null,!0),e.processY(-P,0,!1,!0)):l?(E.processY(D,0,!0),e.processY(-D,0,!1,!0)):(E.processY(D,e.velocity.y,!0),e.processY(-D,null,!1,!0)))}return!0},L=function(G){if(G===1?e.velocity.y=0:T?e.processY(P,s,!0):e.processY(-P,s,!1,!0),E.moves){var D=E.directControl?E.x-E.autoFrame.x:E.x-E.prev.x;e.x+=D*E.friction.x,e._dx=e.x-e.prev.x}},N=function(G){if(G===2?E.velocity.y=0:w?E.processY(P,h,!0):E.processY(-P,h,!1,!0),e.moves){var D=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;E.x+=D*e.friction.x,E._dx=E.x-E.prev.x}};o.exports={BlockCheck:R,Check:I,Set:A,Run:M,RunImmovableBody1:L,RunImmovableBody2:N}},14087:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64897),x=e(3017),c=function(u,h,s,l,v){v===void 0&&(v=a(u,h,s,l));var d=u.immovable,g=h.immovable;if(s||v===0||d&&g||u.customSeparateX||h.customSeparateX)return v!==0||u.embedded&&h.embedded;var y=x.Set(u,h,v);return!d&&!g?y>0?!0:x.Check():(d?x.RunImmovableBody1(y):g&&x.RunImmovableBody2(y),!0)};o.exports=c},89936:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45170),x=e(47962),c=function(u,h,s,l,v){v===void 0&&(v=a(u,h,s,l));var d=u.immovable,g=h.immovable;if(s||v===0||d&&g||u.customSeparateY||h.customSeparateY)return v!==0||u.embedded&&h.embedded;var y=x.Set(u,h,v);return!d&&!g?y>0?!0:x.Check():(d?x.RunImmovableBody1(y):g&&x.RunImmovableBody2(y),!0)};o.exports=c},95829:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a={}),a.none=e,a.up=!1,a.down=!1,a.left=!1,a.right=!1,e||(a.up=!0,a.down=!0,a.left=!0,a.right=!0),a};o.exports=E},72624:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=e(83419),c=e(78389),u=e(37747),h=e(37303),s=e(95829),l=e(26099),v=new x({Mixins:[c],initialize:function(g,y){var S=64,T=64,w={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},P=y!==void 0;P&&y.displayWidth&&(S=y.displayWidth,T=y.displayHeight),P||(y=w),this.world=g,this.gameObject=P?y:void 0,this.isBody=!0,this.debugShowBody=g.defaults.debugShowStaticBody,this.debugBodyColor=g.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(y.x-S*y.originX,y.y-T*y.originY),this.width=S,this.height=T,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=s(!1),this.touching=s(!0),this.wasTouching=s(!0),this.blocked=s(!0),this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(d,g){return d&&d!==this.gameObject&&(this.gameObject.body=null,d.body=this,this.gameObject=d),g&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var d=this.gameObject;return d.getTopLeft(this.position),this.width=d.displayWidth,this.height=d.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(d,g){return g===void 0&&(g=d),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(d,g),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(d,g,y){y===void 0&&(y=!0);var S=this.gameObject;if(S&&S.frame&&(d||(d=S.frame.realWidth),g||(g=S.frame.realHeight)),this.world.staticTree.remove(this),this.width=d,this.height=g,this.halfWidth=Math.floor(d/2),this.halfHeight=Math.floor(g/2),y&&S&&S.getCenter){var T=S.displayWidth/2,w=S.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(T-this.halfWidth,w-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(d,g,y){return g===void 0&&(g=this.offset.x),y===void 0&&(y=this.offset.y),d>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=d,this.width=d*2,this.height=d*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(g,y),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(d,g){var y=this.gameObject;d===void 0&&(d=y.x),g===void 0&&(g=y.y),this.world.staticTree.remove(this),y.setPosition(d,g),y.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,g){return this.isCircle?a(this,d,g):h(this,d,g)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(d){var g=this.position,y=g.x+this.halfWidth,S=g.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?d.strokeCircle(y,S,this.width/2):d.strokeRect(g.x,g.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(d){return d<=0&&(d=.1),this.mass=d,this},x:{get:function(){return this.position.x},set:function(d){this.world.staticTree.remove(this),this.position.x=d,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(d){this.world.staticTree.remove(this),this.position.y=d,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=v},71464:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),x=e(83419),c=e(78389),u=e(37747),h=e(95540),s=e(26479),l=e(41212),v=new x({Extends:s,Mixins:[c],initialize:function(g,y,S,T){!S&&!T?T={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:l(S)?(T=S,S=null,T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=h(T,"classType",a)):Array.isArray(S)&&l(S[0])?(T=S,S=null,T.forEach(function(w){w.internalCreateCallback=this.createCallbackHandler,w.internalRemoveCallback=this.removeCallbackHandler,w.createMultipleCallback=this.createMultipleCallbackHandler,w.classType=h(w,"classType",a)})):T={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=g,this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,s.call(this,y,S,T),this.type="StaticPhysicsGroup"},createCallbackHandler:function(d){d.body||this.world.enableBody(d,u.STATIC_BODY)},removeCallbackHandler:function(d){d.body&&this.world.disableBody(d)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var d=this.children.entries,g=0;g<d.length;g++)d[g].body.reset();return this}});o.exports=v},82248:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55495),x=e(37742),c=e(45319),u=e(83419),h=e(79342),s=e(37747),l=e(20339),v=e(52816),d=e(50792),g=e(63012),y=e(43855),S=e(5470),T=e(94977),w=e(64897),P=e(45170),A=e(96523),R=e(35154),I=e(36383),M=e(25774),L=e(96602),N=e(87841),G=e(59542),D=e(40012),B=e(14087),$=e(89936),k=e(35072),X=e(72624),Y=e(2483),Z=e(61340),Q=e(26099),j=e(15994),K=new u({Extends:d,initialize:function(V,J){d.call(this),this.scene=V,this.bodies=new k,this.staticBodies=new k,this.pendingDestroy=new k,this.colliders=new M,this.gravity=new Q(R(J,"gravity.x",0),R(J,"gravity.y",0)),this.bounds=new N(R(J,"x",0),R(J,"y",0),R(J,"width",V.sys.scale.width),R(J,"height",V.sys.scale.height)),this.checkCollision={up:R(J,"checkCollision.up",!0),down:R(J,"checkCollision.down",!0),left:R(J,"checkCollision.left",!0),right:R(J,"checkCollision.right",!0)},this.fps=R(J,"fps",60),this.fixedStep=R(J,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=R(J,"timeScale",1),this.OVERLAP_BIAS=R(J,"overlapBias",4),this.TILE_BIAS=R(J,"tileBias",16),this.forceX=R(J,"forceX",!1),this.isPaused=R(J,"isPaused",!1),this._total=0,this.drawDebug=R(J,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:R(J,"debugShowBody",!0),debugShowStaticBody:R(J,"debugShowStaticBody",!0),debugShowVelocity:R(J,"debugShowVelocity",!0),bodyDebugColor:R(J,"debugBodyColor",16711935),staticBodyDebugColor:R(J,"debugStaticBodyColor",255),velocityDebugColor:R(J,"debugVelocityColor",65280)},this.maxEntries=R(J,"maxEntries",16),this.useTree=R(J,"useTree",!0),this.tree=new G(this.maxEntries),this.staticTree=new G(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Z,this._tempMatrix2=new Z,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(W,V){V===void 0&&(V=s.DYNAMIC_BODY),Array.isArray(W)||(W=[W]);for(var J=0;J<W.length;J++){var ee=W[J];if(ee.isParent)for(var te=ee.getChildren(),ne=0;ne<te.length;ne++){var se=te[ne];se.isParent?this.enable(se,V):this.enableBody(se,V)}else this.enableBody(ee,V)}},enableBody:function(W,V){return V===void 0&&(V=s.DYNAMIC_BODY),W.hasTransformComponent&&(W.body||(V===s.DYNAMIC_BODY?W.body=new x(this,W):V===s.STATIC_BODY&&(W.body=new X(this,W))),this.add(W.body)),W},add:function(W){return W.physicsType===s.DYNAMIC_BODY?this.bodies.set(W):W.physicsType===s.STATIC_BODY&&(this.staticBodies.set(W),this.staticTree.insert(W)),W.enable=!0,W},disable:function(W){Array.isArray(W)||(W=[W]);for(var V=0;V<W.length;V++){var J=W[V];if(J.isParent)for(var ee=J.getChildren(),te=0;te<ee.length;te++){var ne=ee[te];ne.isParent?this.disable(ne):this.disableBody(ne.body)}else this.disableBody(J.body)}},disableBody:function(W){this.remove(W),W.enable=!1},remove:function(W){W.physicsType===s.DYNAMIC_BODY?(this.tree.remove(W),this.bodies.delete(W)):W.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(W),this.staticTree.remove(W))},createDebugGraphic:function(){var W=this.scene.sys.add.graphics({x:0,y:0});return W.setDepth(Number.MAX_VALUE),this.debugGraphic=W,this.drawDebug=!0,W},setBounds:function(W,V,J,ee,te,ne,se,ae){return this.bounds.setTo(W,V,J,ee),te!==void 0&&this.setBoundsCollision(te,ne,se,ae),this},setBoundsCollision:function(W,V,J,ee){return W===void 0&&(W=!0),V===void 0&&(V=!0),J===void 0&&(J=!0),ee===void 0&&(ee=!0),this.checkCollision.left=W,this.checkCollision.right=V,this.checkCollision.up=J,this.checkCollision.down=ee,this},pause:function(){return this.isPaused=!0,this.emit(g.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(g.RESUME),this},addCollider:function(W,V,J,ee,te){J===void 0&&(J=null),ee===void 0&&(ee=null),te===void 0&&(te=J);var ne=new h(this,!1,W,V,J,ee,te);return this.colliders.add(ne),ne},addOverlap:function(W,V,J,ee,te){J===void 0&&(J=null),ee===void 0&&(ee=null),te===void 0&&(te=J);var ne=new h(this,!0,W,V,J,ee,te);return this.colliders.add(ne),ne},removeCollider:function(W){return this.colliders.remove(W),this},setFPS:function(W){return this.fps=W,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(W,V){if(!(this.isPaused||this.bodies.size===0)){var J,ee=this._frameTime,te=this._frameTimeMS*this.timeScale;this._elapsed+=V;var ne,se=this.bodies.entries,ae=this._elapsed>=te;for(this.fixedStep||(ee=V*.001,ae=!0,this._elapsed=0),J=0;J<se.length;J++)ne=se[J],ne.enable&&ne.preUpdate(ae,ee);if(ae){this._elapsed-=te,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(se));var ue=this.colliders.update();for(J=0;J<ue.length;J++){var de=ue[J];de.active&&de.update()}this.emit(g.WORLD_STEP,ee)}for(;this._elapsed>=te;)this._elapsed-=te,this.step(ee)}},step:function(W){var V,J,ee=this.bodies.entries,te=ee.length;for(V=0;V<te;V++)J=ee[V],J.enable&&J.update(W);this.useTree&&(this.tree.clear(),this.tree.load(ee));var ne=this.colliders.update();for(V=0;V<ne.length;V++){var se=ne[V];se.active&&se.update()}this.emit(g.WORLD_STEP,W),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var W,V,J=this.bodies.entries,ee=J.length,te=this.bodies,ne=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,W=0;W<ee;W++)V=J[W],V.enable&&V.postUpdate();if(this.drawDebug){var se=this.debugGraphic;for(se.clear(),W=0;W<ee;W++)V=J[W],V.willDrawDebug()&&V.drawDebug(se);for(J=ne.entries,ee=J.length,W=0;W<ee;W++)V=J[W],V.willDrawDebug()&&V.drawDebug(se)}var ae=this.pendingDestroy;if(ae.size>0){var ue=this.tree,de=this.staticTree;for(J=ae.entries,ee=J.length,W=0;W<ee;W++)V=J[W],V.physicsType===s.DYNAMIC_BODY?(ue.remove(V),te.delete(V)):V.physicsType===s.STATIC_BODY&&(de.remove(V),ne.delete(V)),V.world=void 0,V.gameObject=void 0;ae.clear()}},updateMotion:function(W,V){W.allowRotation&&this.computeAngularVelocity(W,V),this.computeVelocity(W,V)},computeAngularVelocity:function(W,V){var J=W.angularVelocity,ee=W.angularAcceleration,te=W.angularDrag,ne=W.maxAngular;ee?J+=ee*V:W.allowDrag&&te&&(te*=V,S(J-te,0,.1)?J-=te:T(J+te,0,.1)?J+=te:J=0),J=c(J,-ne,ne);var se=J-W.angularVelocity;W.angularVelocity+=se,W.rotation+=W.angularVelocity*V},computeVelocity:function(W,V){var J=W.velocity.x,ee=W.acceleration.x,te=W.drag.x,ne=W.maxVelocity.x,se=W.velocity.y,ae=W.acceleration.y,ue=W.drag.y,de=W.maxVelocity.y,fe=W.speed,ye=W.maxSpeed,ve=W.allowDrag,Se=W.useDamping;W.allowGravity&&(J+=(this.gravity.x+W.gravity.x)*V,se+=(this.gravity.y+W.gravity.y)*V),ee?J+=ee*V:ve&&te&&(Se?(te=Math.pow(te,V),J*=te,fe=Math.sqrt(J*J+se*se),y(fe,0,.001)&&(J=0)):(te*=V,S(J-te,0,.01)?J-=te:T(J+te,0,.01)?J+=te:J=0)),ae?se+=ae*V:ve&&ue&&(Se?(ue=Math.pow(ue,V),se*=ue,fe=Math.sqrt(J*J+se*se),y(fe,0,.001)&&(se=0)):(ue*=V,S(se-ue,0,.01)?se-=ue:T(se+ue,0,.01)?se+=ue:se=0)),J=c(J,-ne,ne),se=c(se,-de,de),W.velocity.set(J,se),ye>-1&&W.velocity.length()>ye&&(W.velocity.normalize().scale(ye),fe=ye),W.speed=fe},separate:function(W,V,J,ee,te){var ne,se,ae=!1,ue=!0;if(!W.enable||!V.enable||W.checkCollision.none||V.checkCollision.none||!this.intersects(W,V)||J&&J.call(ee,W.gameObject||W,V.gameObject||V)===!1)return ae;if(W.isCircle||V.isCircle){var de=this.separateCircle(W,V,te);de.result?(ae=!0,ue=!1):(ne=de.x,se=de.y,ue=!0)}if(ue){var fe=!1,ye=!1,ve=this.OVERLAP_BIAS;te?(fe=B(W,V,te,ve,ne),ye=$(W,V,te,ve,se)):this.forceX||Math.abs(this.gravity.y+W.gravity.y)<Math.abs(this.gravity.x+W.gravity.x)?(fe=B(W,V,te,ve,ne),this.intersects(W,V)&&(ye=$(W,V,te,ve,se))):(ye=$(W,V,te,ve,se),this.intersects(W,V)&&(fe=B(W,V,te,ve,ne))),ae=fe||ye}return ae&&(te?(W.onOverlap||V.onOverlap)&&this.emit(g.OVERLAP,W.gameObject,V.gameObject,W,V):(W.onCollide||V.onCollide)&&this.emit(g.COLLIDE,W.gameObject,V.gameObject,W,V)),ae},separateCircle:function(W,V,J){w(W,V,!1,0),P(W,V,!1,0);var ee=W.isCircle,te=V.isCircle,ne=W.center,se=V.center,ae=W.immovable,ue=V.immovable,de=W.velocity,fe=V.velocity,ye=0,ve=!0;if(ee!==te){ve=!1;var Se=ne.x,Ie=ne.y,Ae=W.halfWidth,Oe=V.position.x,xe=V.position.y,be=V.right,Pe=V.bottom;te&&(Se=se.x,Ie=se.y,Ae=V.halfWidth,Oe=W.position.x,xe=W.position.y,be=W.right,Pe=W.bottom),Ie<xe?Se<Oe?ye=l(Se,Ie,Oe,xe)-Ae:Se>be&&(ye=l(Se,Ie,be,xe)-Ae):Ie>Pe&&(Se<Oe?ye=l(Se,Ie,Oe,Pe)-Ae:Se>be&&(ye=l(Se,Ie,be,Pe)-Ae)),ye*=-1}else ye=W.halfWidth+V.halfWidth-v(ne,se);W.overlapR=ye,V.overlapR=ye;var Ge=a(ne,se),ze=(ye+I.EPSILON)*Math.cos(Ge),je=(ye+I.EPSILON)*Math.sin(Ge),$e={overlap:ye,result:!1,x:ze,y:je};if(J&&(!ve||ve&&ye!==0))return $e.result=!0,$e;if(!ve&&ye===0||ae&&ue||W.customSeparateX||V.customSeparateX)return $e.x=void 0,$e.y=void 0,$e;var ke=!W.pushable&&!V.pushable;if(ve){var Xe=ne.x-se.x,Je=ne.y-se.y,We=Math.sqrt(Math.pow(Xe,2)+Math.pow(Je,2)),Ze=(se.x-ne.x)/We||0,Qe=(se.y-ne.y)/We||0,ut=2*(de.x*Ze+de.y*Qe-fe.x*Ze-fe.y*Qe)/(W.mass+V.mass);(ae||ue||!W.pushable||!V.pushable)&&(ut*=2),!ae&&W.pushable&&(de.x=de.x-ut/W.mass*Ze,de.y=de.y-ut/W.mass*Qe,de.multiply(W.bounce)),!ue&&V.pushable&&(fe.x=fe.x+ut/V.mass*Ze,fe.y=fe.y+ut/V.mass*Qe,fe.multiply(V.bounce)),!ae&&!ue&&(ze*=.5,je*=.5),!ae||W.pushable||ke?(W.x-=ze,W.y-=je,W.updateCenter()):(!ue||V.pushable||ke)&&(V.x+=ze,V.y+=je,V.updateCenter()),$e.result=!0}else!ae||W.pushable||ke?(W.x-=ze,W.y-=je,W.updateCenter()):(!ue||V.pushable||ke)&&(V.x+=ze,V.y+=je,V.updateCenter()),$e.x=void 0,$e.y=void 0;return $e},intersects:function(W,V){return W===V?!1:!W.isCircle&&!V.isCircle?!(W.right<=V.left||W.bottom<=V.top||W.left>=V.right||W.top>=V.bottom):W.isCircle?V.isCircle?v(W.center,V.center)<=W.halfWidth+V.halfWidth:this.circleBodyIntersects(W,V):this.circleBodyIntersects(V,W)},circleBodyIntersects:function(W,V){var J=c(W.center.x,V.left,V.right),ee=c(W.center.y,V.top,V.bottom),te=(W.center.x-J)*(W.center.x-J),ne=(W.center.y-ee)*(W.center.y-ee);return te+ne<=W.halfWidth*W.halfWidth},overlap:function(W,V,J,ee,te){return J===void 0&&(J=null),ee===void 0&&(ee=null),te===void 0&&(te=J),this.collideObjects(W,V,J,ee,te,!0)},collide:function(W,V,J,ee,te){return J===void 0&&(J=null),ee===void 0&&(ee=null),te===void 0&&(te=J),this.collideObjects(W,V,J,ee,te,!1)},collideObjects:function(W,V,J,ee,te,ne){var se,ae;W.isParent&&(W.physicsType===void 0||V===void 0||W===V)&&(W=W.children.entries),V&&V.isParent&&V.physicsType===void 0&&(V=V.children.entries);var ue=Array.isArray(W),de=Array.isArray(V);if(this._total=0,!ue&&!de)this.collideHandler(W,V,J,ee,te,ne);else if(!ue&&de)for(se=0;se<V.length;se++)this.collideHandler(W,V[se],J,ee,te,ne);else if(ue&&!de)if(V)for(se=0;se<W.length;se++)this.collideHandler(W[se],V,J,ee,te,ne);else for(se=0;se<W.length;se++){var fe=W[se];for(ae=se+1;ae<W.length;ae++)se!==ae&&this.collideHandler(fe,W[ae],J,ee,te,ne)}else for(se=0;se<W.length;se++)for(ae=0;ae<V.length;ae++)this.collideHandler(W[se],V[ae],J,ee,te,ne);return this._total>0},collideHandler:function(W,V,J,ee,te,ne){if(V===void 0&&W.isParent)return this.collideGroupVsGroup(W,W,J,ee,te,ne);if(!W||!V)return!1;if(W.body||W.isBody){if(V.body||V.isBody)return this.collideSpriteVsSprite(W,V,J,ee,te,ne);if(V.isParent)return this.collideSpriteVsGroup(W,V,J,ee,te,ne);if(V.isTilemap)return this.collideSpriteVsTilemapLayer(W,V,J,ee,te,ne)}else if(W.isParent){if(V.body||V.isBody)return this.collideSpriteVsGroup(V,W,J,ee,te,ne);if(V.isParent)return this.collideGroupVsGroup(W,V,J,ee,te,ne);if(V.isTilemap)return this.collideGroupVsTilemapLayer(W,V,J,ee,te,ne)}else if(W.isTilemap){if(V.body||V.isBody)return this.collideSpriteVsTilemapLayer(V,W,J,ee,te,ne);if(V.isParent)return this.collideGroupVsTilemapLayer(V,W,J,ee,te,ne)}},canCollide:function(W,V){return W&&V&&(W.collisionMask&V.collisionCategory)!==0&&(V.collisionMask&W.collisionCategory)!==0},collideSpriteVsSprite:function(W,V,J,ee,te,ne){var se=W.isBody?W:W.body,ae=V.isBody?V:V.body;return this.canCollide(se,ae)?(this.separate(se,ae,ee,te,ne)&&(J&&J.call(te,W,V),this._total++),!0):!1},collideSpriteVsGroup:function(W,V,J,ee,te,ne){var se=W.isBody?W:W.body;if(!(V.getLength()===0||!se||!se.enable||se.checkCollision.none||!this.canCollide(se,V))){var ae,ue,de;if(this.useTree||V.physicsType===s.STATIC_BODY){var fe=this.treeMinMax;fe.minX=se.left,fe.minY=se.top,fe.maxX=se.right,fe.maxY=se.bottom;var ye=V.physicsType===s.DYNAMIC_BODY?this.tree.search(fe):this.staticTree.search(fe);for(ue=ye.length,ae=0;ae<ue;ae++)de=ye[ae],!(se===de||!de.enable||de.checkCollision.none||!V.contains(de.gameObject))&&this.separate(se,de,ee,te,ne)&&(J&&J.call(te,se.gameObject,de.gameObject),this._total++)}else{var ve=V.getChildren(),Se=V.children.entries.indexOf(W);for(ue=ve.length,ae=0;ae<ue;ae++)de=ve[ae].body,!(!de||ae===Se||!de.enable)&&this.separate(se,de,ee,te,ne)&&(J&&J.call(te,se.gameObject,de.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(W,V,J,ee,te,ne){if(!this.canCollide(W,V))return!1;var se=W.getChildren();if(se.length===0)return!1;for(var ae=!1,ue=0;ue<se.length;ue++)(se[ue].body||se[ue].isBody)&&this.collideSpriteVsTilemapLayer(se[ue],V,J,ee,te,ne)&&(ae=!0);return ae},collideTiles:function(W,V,J,ee,te){return V.length===0||W.body&&!W.body.enable||W.isBody&&!W.enable?!1:this.collideSpriteVsTilesHandler(W,V,J,ee,te,!1,!1)},overlapTiles:function(W,V,J,ee,te){return V.length===0||W.body&&!W.body.enable||W.isBody&&!W.enable?!1:this.collideSpriteVsTilesHandler(W,V,J,ee,te,!0,!1)},collideSpriteVsTilemapLayer:function(W,V,J,ee,te,ne){var se=W.isBody?W:W.body;if(!se.enable||se.checkCollision.none||!this.canCollide(se,V))return!1;var ae=V.layer,ue=se.x-ae.tileWidth*V.scaleX,de=se.y-ae.tileHeight*V.scaleY,fe=se.width+ae.tileWidth*V.scaleX,ye=se.height+ae.tileHeight*V.scaleY,ve=ne?null:this.tileFilterOptions,Se=A(ue,de,fe,ye,ve,V.scene.cameras.main,V.layer);return Se.length===0?!1:this.collideSpriteVsTilesHandler(W,Se,J,ee,te,ne,!0)},collideSpriteVsTilesHandler:function(W,V,J,ee,te,ne,se){for(var ae=W.isBody?W:W.body,ue,de={left:0,right:0,top:0,bottom:0},fe,ye=!1,ve=0;ve<V.length;ve++){ue=V[ve],fe=ue.tilemapLayer;var Se=fe.tileToWorldXY(ue.x,ue.y);de.left=Se.x,de.top=Se.y,de.right=de.left+ue.width*fe.scaleX,de.bottom=de.top+ue.height*fe.scaleY,Y(de,ae)&&(!ee||ee.call(te,W,ue))&&L(ue,W)&&(ne||D(ve,ae,ue,de,fe,this.TILE_BIAS,se))&&(this._total++,ye=!0,J&&J.call(te,W,ue),ne&&ae.onOverlap?this.emit(g.TILE_OVERLAP,W,ue,ae):ae.onCollide&&this.emit(g.TILE_COLLIDE,W,ue,ae))}return ye},collideGroupVsGroup:function(W,V,J,ee,te,ne){if(!(W.getLength()===0||V.getLength()===0||!this.canCollide(W,V)))for(var se=W.getChildren(),ae=0;ae<se.length;ae++)this.collideSpriteVsGroup(se[ae],V,J,ee,te,ne)},wrap:function(W,V){W.body?this.wrapObject(W,V):W.getChildren?this.wrapArray(W.getChildren(),V):Array.isArray(W)?this.wrapArray(W,V):this.wrapObject(W,V)},wrapArray:function(W,V){for(var J=0;J<W.length;J++)this.wrapObject(W[J],V)},wrapObject:function(W,V){V===void 0&&(V=0),W.x=j(W.x,this.bounds.left-V,this.bounds.right+V),W.y=j(W.y,this.bounds.top-V,this.bounds.bottom+V)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});o.exports=K},1093:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAcceleration:function(e,a){return this.body.acceleration.set(e,a),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};o.exports=E},59023:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};o.exports=E},62069:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(e,a){return this.body.bounce.set(e,a),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,a,x,c){return this.body.setCollideWorldBounds(e,a,x,c),this}};o.exports=E},78389:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79599),x={setCollisionCategory:function(c){var u=this.body?this.body:this;return u.collisionCategory=c,this},willCollideWith:function(c){var u=this.body?this.body:this;return(u.collisionMask&c)!==0},addCollidesWith:function(c){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask|c,this},removeCollidesWith:function(c){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask&~c,this},setCollidesWith:function(c){var u=this.body?this.body:this;return u.collisionMask=a(c),this},resetCollisionCategory:function(){var c=this.body?this.body:this;return c.collisionCategory=1,c.collisionMask=2147483647,this}};o.exports=x},87118:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDebug:function(e,a,x){return this.debugShowBody=e,this.debugShowVelocity=a,this.debugBodyColor=x,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};o.exports=E},52819:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDrag:function(e,a){return this.body.drag.set(e,a),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};o.exports=E},4074:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,a,x,c,u){return e&&this.body.reset(a,x),c&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};o.exports=E},40831:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(e,a){return this.body.friction.set(e,a),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};o.exports=E},26775:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setGravity:function(e,a){return this.body.gravity.set(e,a),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};o.exports=E},9437:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};o.exports=E},30621:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setMass:function(e){return this.body.mass=e,this}};o.exports=E},72441:(o,E,e)=>{var a=e(47956),x=e(96503),c=e(2044),u=e(81491),h=function(s,l,v,d,g,y){var S=a(s,l-d,v-d,2*d,2*d,g,y);if(S.length===0)return S;for(var T=new x(l,v,d),w=new x,P=[],A=0;A<S.length;A++){var R=S[A];R.isCircle?(w.setTo(R.center.x,R.center.y,R.halfWidth),c(T,w)&&P.push(R)):u(T,R)&&P.push(R)}return P};o.exports=h},47956:o=>{var E=function(e,a,x,c,u,h,s){h===void 0&&(h=!0),s===void 0&&(s=!1);var l=[],v=[],d=e.treeMinMax;if(d.minX=a,d.minY=x,d.maxX=a+c,d.maxY=x+u,s&&(v=e.staticTree.search(d)),h&&e.useTree)l=e.tree.search(d);else if(h){var g=e.bodies,y={position:{x:a,y:x},left:a,top:x,right:a+c,bottom:x+u,isCircle:!1},S=e.intersects;g.iterate(function(T){S(T,y)&&l.push(T)})}return v.concat(l)};o.exports=E},62121:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};o.exports=E},29384:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setOffset:function(e,a){return this.body.setOffset(e,a),this},setSize:function(e,a,x){return this.body.setSize(e,a,x),this},setBodySize:function(e,a,x){return this.body.setSize(e,a,x),this},setCircle:function(e,a,x){return this.body.setCircle(e,a,x),this}};o.exports=E},15098:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setVelocity:function(e,a){return this.body.setVelocity(e,a),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,a){return this.body.maxVelocity.set(e,a),this}};o.exports=E},92209:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}},37747:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};o.exports=E},20009:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collide"},36768:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="overlap"},60473:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},89954:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},61804:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tilecollide"},7161:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tileoverlap"},34689:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldbounds"},16006:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldstep"},63012:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}},27064:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=e(79291),c={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};c=x(!1,c,a),o.exports=c},96602:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,a,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,a,e):!0};o.exports=E},36294:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a<0?(e.blocked.none=!1,e.blocked.left=!0):a>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=a,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};o.exports=E},67013:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a<0?(e.blocked.none=!1,e.blocked.up=!0):a>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=a,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};o.exports=E},40012:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21329),x=e(53442),c=e(2483),u=function(h,s,l,v,d,g,y){var S=v.left,T=v.top,w=v.right,P=v.bottom,A=l.faceLeft||l.faceRight,R=l.faceTop||l.faceBottom;if(y||(A=!0,R=!0),!A&&!R)return!1;var I=0,M=0,L=0,N=1;if(s.deltaAbsX()>s.deltaAbsY()?L=-1:s.deltaAbsX()<s.deltaAbsY()&&(N=-1),s.deltaX()!==0&&s.deltaY()!==0&&A&&R&&(L=Math.min(Math.abs(s.position.x-w),Math.abs(s.right-S)),N=Math.min(Math.abs(s.position.y-P),Math.abs(s.bottom-T))),L<N){if(A&&(I=a(s,l,S,w,g,y),I!==0&&!c(v,s)))return!0;R&&(M=x(s,l,T,P,g,y))}else{if(R&&(M=x(s,l,T,P,g,y),M!==0&&!c(v,s)))return!0;A&&(I=a(s,l,S,w,g,y))}return I!==0||M!==0};o.exports=u},21329:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36294),x=function(c,u,h,s,l,v){var d=0,g=u.faceLeft,y=u.faceRight,S=u.collideLeft,T=u.collideRight;return v||(g=!0,y=!0,S=!0,T=!0),c.deltaX()<0&&T&&c.checkCollision.left?y&&c.x<s&&(d=c.x-s,d<-l&&(d=0)):c.deltaX()>0&&S&&c.checkCollision.right&&g&&c.right>h&&(d=c.right-h,d>l&&(d=0)),d!==0&&(c.customSeparateX?c.overlapX=d:a(c,d)),d};o.exports=x},53442:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67013),x=function(c,u,h,s,l,v){var d=0,g=u.faceTop,y=u.faceBottom,S=u.collideUp,T=u.collideDown;return v||(g=!0,y=!0,S=!0,T=!0),c.deltaY()<0&&T&&c.checkCollision.up?y&&c.y<s&&(d=c.y-s,d<-l&&(d=0)):c.deltaY()>0&&S&&c.checkCollision.down&&g&&c.bottom>h&&(d=c.bottom-h,d>l&&(d=0)),d!==0&&(c.customSeparateY?c.overlapY=d:a(c,d)),d};o.exports=x},2483:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return!(a.right<=e.left||a.bottom<=e.top||a.position.x>=e.right||a.position.y>=e.bottom)};o.exports=E},55173:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};o.exports=a},44563:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Arcade:e(27064),Matter:e(3875)}},68174:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),c=new a({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(u){if(u=u.hasOwnProperty("body")?u.body:u,!u.hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,s=this.centerDiff,l=u.bounds.max.x-u.bounds.min.x,v=u.bounds.max.y-u.bounds.min.y,d=l*u.centerOfMass.x,g=v*u.centerOfMass.y;return h.set(l/2,v/2),s.set(d-h.x,g-h.y),!0},getTopLeft:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h+l.x+v.x,s+l.y+v.y)}return!1},getTopCenter:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h+v.x,s+l.y+v.y)}return!1},getTopRight:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h-(l.x-v.x),s+l.y+v.y)}return!1},getLeftCenter:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h+l.x+v.x,s+v.y)}return!1},getCenter:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.centerDiff;return new x(h+l.x,s+l.y)}return!1},getRightCenter:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h-(l.x-v.x),s+v.y)}return!1},getBottomLeft:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h+l.x+v.x,s-(l.y-v.y))}return!1},getBottomCenter:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h+v.x,s-(l.y-v.y))}return!1},getBottomRight:function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),this.parseBody(u)){var l=this.boundsCenter,v=this.centerDiff;return new x(h-(l.x-v.x),s-(l.y-v.y))}return!1}});o.exports=c},19933:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6790);a.Body=e(22562),a.Composite=e(69351),a.World=e(4372),a.Collision=e(52284),a.Detector=e(81388),a.Pairs=e(99561),a.Pair=e(4506),a.Query=e(73296),a.Resolver=e(66272),a.Constraint=e(48140),a.Common=e(53402),a.Engine=e(48413),a.Events=e(35810),a.Sleeping=e(53614),a.Plugin=e(73832),a.Bodies=e(66280),a.Composites=e(74116),a.Axes=e(66615),a.Bounds=e(15647),a.Svg=e(74058),a.Vector=e(31725),a.Vertices=e(41598),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,o.exports=a},28137:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(83419),c=e(74116),u=e(48140),h=e(74058),s=e(75803),l=e(23181),v=e(34803),d=e(73834),g=e(19496),y=e(85791),S=e(98713),T=e(41598),w=new x({initialize:function(A){this.world=A,this.scene=A.scene,this.sys=A.scene.sys},rectangle:function(P,A,R,I,M){var L=a.rectangle(P,A,R,I,M);return this.world.add(L),L},trapezoid:function(P,A,R,I,M,L){var N=a.trapezoid(P,A,R,I,M,L);return this.world.add(N),N},circle:function(P,A,R,I,M){var L=a.circle(P,A,R,I,M);return this.world.add(L),L},polygon:function(P,A,R,I,M){var L=a.polygon(P,A,R,I,M);return this.world.add(L),L},fromVertices:function(P,A,R,I,M,L,N){typeof R=="string"&&(R=T.fromPath(R));var G=a.fromVertices(P,A,R,I,M,L,N);return this.world.add(G),G},fromPhysicsEditor:function(P,A,R,I,M){M===void 0&&(M=!0);var L=g.parseBody(P,A,R,I);return M&&!this.world.has(L)&&this.world.add(L),L},fromSVG:function(P,A,R,I,M,L){I===void 0&&(I=1),M===void 0&&(M={}),L===void 0&&(L=!0);for(var N=R.getElementsByTagName("path"),G=[],D=0;D<N.length;D++){var B=h.pathToVertices(N[D],30);I!==1&&T.scale(B,I,I),G.push(B)}var $=a.fromVertices(P,A,G,M);return L&&this.world.add($),$},fromJSON:function(P,A,R,I,M){I===void 0&&(I={}),M===void 0&&(M=!0);var L=y.parseBody(P,A,R,I);return L&&M&&this.world.add(L),L},imageStack:function(P,A,R,I,M,L,N,G,D){N===void 0&&(N=0),G===void 0&&(G=0),D===void 0&&(D={});var B=this.world,$=this.sys.displayList;D.addToWorld=!1;var k=c.stack(R,I,M,L,N,G,function(X,Y){var Z=new l(B,X,Y,P,A,D);return $.add(Z),Z.body});return B.add(k),k},stack:function(P,A,R,I,M,L,N){var G=c.stack(P,A,R,I,M,L,N);return this.world.add(G),G},pyramid:function(P,A,R,I,M,L,N){var G=c.pyramid(P,A,R,I,M,L,N);return this.world.add(G),G},chain:function(P,A,R,I,M,L){return c.chain(P,A,R,I,M,L)},mesh:function(P,A,R,I,M){return c.mesh(P,A,R,I,M)},newtonsCradle:function(P,A,R,I,M){var L=c.newtonsCradle(P,A,R,I,M);return this.world.add(L),L},car:function(P,A,R,I,M){var L=c.car(P,A,R,I,M);return this.world.add(L),L},softBody:function(P,A,R,I,M,L,N,G,D,B){var $=c.softBody(P,A,R,I,M,L,N,G,D,B);return this.world.add($),$},joint:function(P,A,R,I,M){return this.constraint(P,A,R,I,M)},spring:function(P,A,R,I,M){return this.constraint(P,A,R,I,M)},constraint:function(P,A,R,I,M){I===void 0&&(I=1),M===void 0&&(M={}),M.bodyA=P.type==="body"?P:P.body,M.bodyB=A.type==="body"?A:A.body,isNaN(R)||(M.length=R),M.stiffness=I;var L=u.create(M);return this.world.add(L),L},worldConstraint:function(P,A,R,I){R===void 0&&(R=1),I===void 0&&(I={}),I.bodyB=P.type==="body"?P:P.body,isNaN(A)||(I.length=A),I.stiffness=R;var M=u.create(I);return this.world.add(M),M},mouseSpring:function(P){return this.pointerConstraint(P)},pointerConstraint:function(P){P===void 0&&(P={}),P.hasOwnProperty("render")||(P.render={visible:!1});var A=new S(this.scene,this.world,P);return this.world.add(A.constraint),A},image:function(P,A,R,I,M){var L=new l(this.world,P,A,R,I,M);return this.sys.displayList.add(L),L},tileBody:function(P,A){return new d(this.world,P,A)},sprite:function(P,A,R,I,M){var L=new v(this.world,P,A,R,I,M);return this.sys.displayList.add(L),this.sys.updateList.add(L),L},gameObject:function(P,A,R){return s(this.world,P,A,R)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=w},75803:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31884),x=e(95540),c=e(26099);function u(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}var h=function(s,l,v,d){v===void 0&&(v={}),d===void 0&&(d=!0);var g=l.x,y=l.y;l.body={temp:!0,position:{x:g,y}};var S=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(S.forEach(function(w){for(var P in w)u(w[P])?Object.defineProperty(l,P,{get:w[P].get,set:w[P].set}):Object.defineProperty(l,P,{value:w[P]})}),l.world=s,l._tempVec2=new c(g,y),v.hasOwnProperty("type")&&v.type==="body")l.setExistingBody(v,d);else{var T=x(v,"shape",null);T||(T="rectangle"),v.addToWorld=d,l.setBody(T,v)}return l};o.exports=h},23181:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31884),c=e(95643),u=e(95540),h=e(88571),s=e(72699),l=e(26099),v=new a({Extends:h,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,s],initialize:function(g,y,S,T,w,P){c.call(this,g.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(T,w),this.setSizeToFrame(),this.setOrigin(),this.world=g,this._tempVec2=new l(y,S);var A=u(P,"shape",null);A?this.setBody(A,P):this.setRectangle(this.width,this.height,P),this.setPosition(y,S),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=v},42045:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=e(66615),c=e(66280),u=e(22562),h=e(68174),s=e(15647),l=e(83419),v=e(52284),d=e(53402),g=e(69351),y=e(74116),S=e(48140),T=e(81388),w=e(20339),P=e(28137),A=e(95540),R=e(35154),I=e(46975),M=e(4506),L=e(99561),N=e(37277),G=e(73296),D=e(66272),B=e(44594),$=e(74058),k=e(31725),X=e(41598),Y=e(68243);d.setDecomp(e(55973));var Z=new l({initialize:function(j){this.scene=j,this.systems=j.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=g,this.collision=v,this.detector=T,this.pair=M,this.pairs=L,this.query=G,this.resolver=D,this.constraint=S,this.bodies=c,this.composites=y,this.axes=x,this.bounds=s,this.svg=$,this.vector=k,this.vertices=X,this.verts=X,this._tempVec2=k.create(),D._restingThresh=R(this.config,"restingThresh",4),D._restingThreshTangent=R(this.config,"restingThreshTangent",6),D._positionDampen=R(this.config,"positionDampen",.9),D._positionWarming=R(this.config,"positionWarming",.8),D._frictionNormalMultiplier=R(this.config,"frictionNormalMultiplier",5),j.sys.events.once(B.BOOT,this.boot,this),j.sys.events.on(B.START,this.start,this)},boot:function(){this.world=new Y(this.scene,this.config),this.add=new P(this.world),this.bodyBounds=new h,this.systems.events.once(B.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Y(this.scene,this.config),this.add=new P(this.world));var Q=this.systems.events;Q.on(B.UPDATE,this.world.update,this.world),Q.on(B.POST_UPDATE,this.world.postUpdate,this.world),Q.once(B.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Q=this.systems.game.config.physics,j=this.systems.settings.physics,K=I(A(j,"matter",{}),A(Q,"matter",{}));return K},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(Q,j){this.world.step(Q,j)},containsPoint:function(Q,j,K){Q=this.getMatterBodies(Q);var W=k.create(j,K),V=G.point(Q,W);return V.length>0},intersectPoint:function(Q,j,K){K=this.getMatterBodies(K);var W=k.create(Q,j),V=[],J=G.point(K,W);return J.forEach(function(ee){V.indexOf(ee)===-1&&V.push(ee)}),V},intersectRect:function(Q,j,K,W,V,J){V===void 0&&(V=!1),J=this.getMatterBodies(J);var ee={min:{x:Q,y:j},max:{x:Q+K,y:j+W}},te=[],ne=G.region(J,ee,V);return ne.forEach(function(se){te.indexOf(se)===-1&&te.push(se)}),te},intersectRay:function(Q,j,K,W,V,J){V===void 0&&(V=1),J=this.getMatterBodies(J);for(var ee=[],te=G.ray(J,k.create(Q,j),k.create(K,W),V),ne=0;ne<te.length;ne++)ee.push(te[ne].body);return ee},intersectBody:function(Q,j){j=this.getMatterBodies(j);for(var K=[],W=G.collides(Q,j),V=0;V<W.length;V++){var J=W[V];J.bodyA===Q?K.push(J.bodyB):K.push(J.bodyA)}return K},overlap:function(Q,j,K,W,V){K===void 0&&(K=null),W===void 0&&(W=null),V===void 0&&(V=K),Array.isArray(Q)||(Q=[Q]),Q=this.getMatterBodies(Q),j=this.getMatterBodies(j);for(var J=!1,ee=0;ee<Q.length;ee++)for(var te=Q[ee],ne=G.collides(te,j),se=0;se<ne.length;se++){var ae=ne[se],ue=ae.bodyA.id===te.id?ae.bodyB:ae.bodyA;if(!W||W.call(V,te,ue,ae)){if(J=!0,K)K.call(V,te,ue,ae);else if(!W)return!0}}return J},setCollisionCategory:function(Q,j){return Q=this.getMatterBodies(Q),Q.forEach(function(K){K.collisionFilter.category=j}),this},setCollisionGroup:function(Q,j){return Q=this.getMatterBodies(Q),Q.forEach(function(K){K.collisionFilter.group=j}),this},setCollidesWith:function(Q,j){Q=this.getMatterBodies(Q);var K=0;if(!Array.isArray(j))K=j;else for(var W=0;W<j.length;W++)K|=j[W];return Q.forEach(function(V){V.collisionFilter.mask=K}),this},getMatterBodies:function(Q){if(!Q)return this.world.getAllBodies();Array.isArray(Q)||(Q=[Q]);for(var j=[],K=0;K<Q.length;K++){var W=Q[K].hasOwnProperty("body")?Q[K].body:Q[K];j.push(W)}return j},setVelocity:function(Q,j,K){Q=this.getMatterBodies(Q);var W=this._tempVec2;return W.x=j,W.y=K,Q.forEach(function(V){u.setVelocity(V,W)}),this},setVelocityX:function(Q,j){Q=this.getMatterBodies(Q);var K=this._tempVec2;return K.x=j,Q.forEach(function(W){K.y=W.velocity.y,u.setVelocity(W,K)}),this},setVelocityY:function(Q,j){Q=this.getMatterBodies(Q);var K=this._tempVec2;return K.y=j,Q.forEach(function(W){K.x=W.velocity.x,u.setVelocity(W,K)}),this},setAngularVelocity:function(Q,j){return Q=this.getMatterBodies(Q),Q.forEach(function(K){u.setAngularVelocity(K,j)}),this},applyForce:function(Q,j){Q=this.getMatterBodies(Q);var K=this._tempVec2;return Q.forEach(function(W){K.x=W.position.x,K.y=W.position.y,u.applyForce(W,K,j)}),this},applyForceFromPosition:function(Q,j,K,W){Q=this.getMatterBodies(Q);var V=this._tempVec2;return Q.forEach(function(J){W===void 0&&(W=J.angle),V.x=K*Math.cos(W),V.y=K*Math.sin(W),u.applyForce(J,j,V)}),this},applyForceFromAngle:function(Q,j,K){Q=this.getMatterBodies(Q);var W=this._tempVec2;return Q.forEach(function(V){K===void 0&&(K=V.angle),W.x=j*Math.cos(K),W.y=j*Math.sin(K),u.applyForce(V,{x:V.position.x,y:V.position.y},W)}),this},getConstraintLength:function(Q){var j=Q.pointA.x,K=Q.pointA.y,W=Q.pointB.x,V=Q.pointB.y;return Q.bodyA&&(j+=Q.bodyA.position.x,K+=Q.bodyA.position.y),Q.bodyB&&(W+=Q.bodyB.position.x,V+=Q.bodyB.position.y),w(j,K,W,V)},alignBody:function(Q,j,K,W){Q=Q.hasOwnProperty("body")?Q.body:Q;var V;switch(W){case a.TOP_LEFT:case a.LEFT_TOP:V=this.bodyBounds.getTopLeft(Q,j,K);break;case a.TOP_CENTER:V=this.bodyBounds.getTopCenter(Q,j,K);break;case a.TOP_RIGHT:case a.RIGHT_TOP:V=this.bodyBounds.getTopRight(Q,j,K);break;case a.LEFT_CENTER:V=this.bodyBounds.getLeftCenter(Q,j,K);break;case a.CENTER:V=this.bodyBounds.getCenter(Q,j,K);break;case a.RIGHT_CENTER:V=this.bodyBounds.getRightCenter(Q,j,K);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:V=this.bodyBounds.getBottomLeft(Q,j,K);break;case a.BOTTOM_CENTER:V=this.bodyBounds.getBottomCenter(Q,j,K);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:V=this.bodyBounds.getBottomRight(Q,j,K);break}return V&&u.setPosition(Q,V),this},shutdown:function(){var Q=this.systems.events;this.world&&(Q.off(B.UPDATE,this.world.update,this.world),Q.off(B.POST_UPDATE,this.world.postUpdate,this.world)),Q.off(B.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.systems=null}});N.register("MatterPhysics",Z,"matterPhysics"),o.exports=Z},34803:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),c=e(31884),u=e(95643),h=e(95540),s=e(72699),l=e(68287),v=e(26099),d=new x({Extends:l,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,s],initialize:function(y,S,T,w,P,A){u.call(this,y.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(w,P),this.setSizeToFrame(),this.setOrigin(),this.world=y,this._tempVec2=new v(S,T);var R=h(A,"shape",null);R?this.setBody(R,A):this.setRectangle(this.width,this.height,A),this.setPosition(S,T),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=d},73834:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),c=e(83419),u=e(31884),h=e(62644),s=e(50792),l=e(95540),v=e(97022),d=e(41598),g=new c({Extends:s,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(S,T,w){s.call(this),this.tile=T,this.world=S,T.physics.matterBody&&T.physics.matterBody.destroy(),T.physics.matterBody=this;var P=l(w,"body",null),A=l(w,"addToWorld",!0);if(P)this.setBody(P,A);else{var R=T.getCollisionGroup(),I=l(R,"objects",[]);I.length>0?this.setFromTileCollision(w):this.setFromTileRectangle(w)}if(T.flipX||T.flipY){var M={x:T.getCenterX(),y:T.getCenterY()},L=T.flipX?-1:1,N=T.flipY?-1:1;x.scale(P,L,N,M)}},setFromTileRectangle:function(y){y===void 0&&(y={}),v(y,"isStatic")||(y.isStatic=!0),v(y,"addToWorld")||(y.addToWorld=!0);var S=this.tile.getBounds(),T=S.x+S.width/2,w=S.y+S.height/2,P=a.rectangle(T,w,S.width,S.height,y);return this.setBody(P,y.addToWorld),this},setFromTileCollision:function(y){y===void 0&&(y={}),v(y,"isStatic")||(y.isStatic=!0),v(y,"addToWorld")||(y.addToWorld=!0);for(var S=this.tile.tilemapLayer.scaleX,T=this.tile.tilemapLayer.scaleY,w=this.tile.getLeft(),P=this.tile.getTop(),A=this.tile.getCollisionGroup(),R=l(A,"objects",[]),I=[],M=0;M<R.length;M++){var L=R[M],N=w+L.x*S,G=P+L.y*T,D=L.width*S,B=L.height*T,$=null;if(L.rectangle)$=a.rectangle(N+D/2,G+B/2,D,B,y);else if(L.ellipse)$=a.circle(N+D/2,G+B/2,D/2,y);else if(L.polygon||L.polyline){var k=L.polygon?L.polygon:L.polyline,X=k.map(function(j){return{x:j.x*S,y:j.y*T}}),Y=d.create(X),Z=d.centre(Y);N+=Z.x,G+=Z.y,$=a.fromVertices(N,G,Y,y)}$&&I.push($)}if(I.length===1)this.setBody(I[0],y.addToWorld);else if(I.length>1){var Q=h(y);Q.parts=I,this.setBody(x.create(Q),Q.addToWorld)}return this},setBody:function(y,S){return S===void 0&&(S=!0),this.body&&this.removeBody(),this.body=y,this.body.gameObject=this,S&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});o.exports=g},19496:(o,E,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),c=e(53402),u=e(95540),h=e(41598),s={parseBody:function(l,v,d,g){g===void 0&&(g={});for(var y=u(d,"fixtures",[]),S=[],T=0;T<y.length;T++)for(var w=this.parseFixture(y[T]),P=0;P<w.length;P++)S.push(w[P]);var A=c.clone(d,!0);c.extend(A,g,!0),delete A.fixtures,delete A.type;var R=x.create(A);return x.setParts(R,S),x.setPosition(R,{x:l,y:v}),R},parseFixture:function(l){var v=c.extend({},!1,l);delete v.circle,delete v.vertices;var d;if(l.circle){var g=u(l.circle,"x"),y=u(l.circle,"y"),S=u(l.circle,"radius");d=[a.circle(g,y,S,v)]}else l.vertices&&(d=this.parseVertices(l.vertices,v));return d},parseVertices:function(l,v){v===void 0&&(v={});for(var d=[],g=0;g<l.length;g++)h.clockwiseSort(l[g]),d.push(x.create(c.extend({position:h.centre(l[g]),vertices:l[g]},v)));return a.flagCoincidentParts(d)}};o.exports=s},85791:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),c={parseBody:function(u,h,s,l){l===void 0&&(l={});var v,d=s.vertices;if(d.length===1)l.vertices=d[0],v=x.create(l),a.flagCoincidentParts(v.parts);else{for(var g=[],y=0;y<d.length;y++){var S=x.create({vertices:d[y]});g.push(S)}a.flagCoincidentParts(g),l.parts=g,v=x.create(l)}return v.label=s.label,x.setPosition(v,{x:u,y:h}),v}};o.exports=c},98713:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15647),x=e(83419),c=e(69351),u=e(48140),h=e(81388),s=e(1121),l=e(8214),v=e(46975),d=e(53614),g=e(26099),y=e(41598),S=new x({initialize:function(w,P,A){A===void 0&&(A={});var R={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=w,this.world=P,this.camera=null,this.pointer=null,this.active=!0,this.position=new g,this.body=null,this.part=null,this.constraint=u.create(v(A,R)),this.world.on(s.BEFORE_UPDATE,this.update,this),w.sys.input.on(l.POINTER_DOWN,this.onDown,this),w.sys.input.on(l.POINTER_UP,this.onUp,this)},onDown:function(T){this.pointer||(this.pointer=T,this.camera=T.camera)},onUp:function(T){T===this.pointer&&(this.pointer=null)},getBody:function(T){var w=this.position,P=this.constraint;this.camera.getWorldPoint(T.x,T.y,w);for(var A=c.allBodies(this.world.localWorld),R=0;R<A.length;R++){var I=A[R];if(!I.ignorePointer&&a.contains(I.bounds,w)&&h.canCollide(I.collisionFilter,P.collisionFilter)&&this.hitTestBody(I,w))return this.world.emit(s.DRAG_START,I,this.part,this),!0}return!1},hitTestBody:function(T,w){for(var P=this.constraint,A=T.parts.length,R=A>1?1:0,I=R;I<A;I++){var M=T.parts[I];if(y.contains(M.vertices,w))return P.pointA=w,P.pointB={x:w.x-T.position.x,y:w.y-T.position.y},P.bodyB=T,P.angleB=T.angle,d.set(T,!1),this.part=M,this.body=T,!0}return!1},update:function(){var T=this.pointer,w=this.body;if(!this.active||!T){w&&this.stopDrag();return}if(!T.isDown&&w){this.stopDrag();return}else if(T.isDown){if(!this.camera||!w&&!this.getBody(T))return;w=this.body;var P=this.position,A=this.constraint;this.camera.getWorldPoint(T.x,T.y,P),A.pointA.x=P.x,A.pointA.y=P.y,d.set(w,!1),this.world.emit(s.DRAG,w,this)}},stopDrag:function(){var T=this.body,w=this.constraint;w.bodyB=null,w.pointB=null,this.pointer=null,this.body=null,this.part=null,T&&this.world.emit(s.DRAG_END,T,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(s.BEFORE_UPDATE,this.update),this.scene.sys.input.off(l.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(l.POINTER_UP,this.onUp,this)}});o.exports=S},68243:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),c=e(83419),u=e(53402),h=e(69351),s=e(48413),l=e(50792),v=e(1121),d=e(95540),g=e(35154),y=e(22562),S=e(35810),T=e(73834),w=e(4372),P=e(13037),A=e(31725),R=new c({Extends:l,initialize:function(M,L){l.call(this),this.scene=M,this.engine=s.create(L),this.localWorld=this.engine.world;var N=g(L,"gravity",null);N?this.setGravity(N.x,N.y,N.scale):N===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=g(L,"enabled",!0),this.getDelta=g(L,"getDelta",this.update60Hz);var G=d(L,"runner",{}),D=d(G,"fps",!1),B=d(G,"fps",60),$=d(G,"delta",1e3/B),k=d(G,"deltaMin",1e3/B),X=d(G,"deltaMax",1e3/(B*.5));D||(B=1e3/$),this.runner={fps:B,deltaSampleSize:d(G,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,timeBuffer:0,isFixed:d(G,"isFixed",!1),delta:$,deltaMin:k,deltaMax:X},this.autoUpdate=g(L,"autoUpdate",!0);var Y=g(L,"debug",!1);if(this.drawDebug=typeof Y=="object"?!0:Y,this.debugGraphic,this.debugConfig={showAxes:d(Y,"showAxes",!1),showAngleIndicator:d(Y,"showAngleIndicator",!1),angleColor:d(Y,"angleColor",15208787),showBroadphase:d(Y,"showBroadphase",!1),broadphaseColor:d(Y,"broadphaseColor",16757760),showBounds:d(Y,"showBounds",!1),boundsColor:d(Y,"boundsColor",16777215),showVelocity:d(Y,"showVelocity",!1),velocityColor:d(Y,"velocityColor",44783),showCollisions:d(Y,"showCollisions",!1),collisionColor:d(Y,"collisionColor",16094476),showSeparations:d(Y,"showSeparations",!1),separationColor:d(Y,"separationColor",16753920),showBody:d(Y,"showBody",!0),showStaticBody:d(Y,"showStaticBody",!0),showInternalEdges:d(Y,"showInternalEdges",!1),renderFill:d(Y,"renderFill",!1),renderLine:d(Y,"renderLine",!0),fillColor:d(Y,"fillColor",1075465),fillOpacity:d(Y,"fillOpacity",1),lineColor:d(Y,"lineColor",2678297),lineOpacity:d(Y,"lineOpacity",1),lineThickness:d(Y,"lineThickness",1),staticFillColor:d(Y,"staticFillColor",857979),staticLineColor:d(Y,"staticLineColor",1255396),showSleeping:d(Y,"showSleeping",!1),staticBodySleepOpacity:d(Y,"staticBodySleepOpacity",.7),sleepFillColor:d(Y,"sleepFillColor",4605510),sleepLineColor:d(Y,"sleepLineColor",10066585),showSensors:d(Y,"showSensors",!0),sensorFillColor:d(Y,"sensorFillColor",857979),sensorLineColor:d(Y,"sensorLineColor",1255396),showPositions:d(Y,"showPositions",!0),positionSize:d(Y,"positionSize",4),positionColor:d(Y,"positionColor",14697178),showJoint:d(Y,"showJoint",!0),jointColor:d(Y,"jointColor",14737474),jointLineOpacity:d(Y,"jointLineOpacity",1),jointLineThickness:d(Y,"jointLineThickness",2),pinSize:d(Y,"pinSize",4),pinColor:d(Y,"pinColor",4382944),springColor:d(Y,"springColor",14697184),anchorColor:d(Y,"anchorColor",15724527),anchorSize:d(Y,"anchorSize",4),showConvexHulls:d(Y,"showConvexHulls",!1),hullColor:d(Y,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(L,"setBounds",!1)){var Z=L.setBounds;if(typeof Z=="boolean")this.setBounds();else{var Q=d(Z,"x",0),j=d(Z,"y",0),K=d(Z,"width",M.sys.scale.width),W=d(Z,"height",M.sys.scale.height),V=d(Z,"thickness",64),J=d(Z,"left",!0),ee=d(Z,"right",!0),te=d(Z,"top",!0),ne=d(Z,"bottom",!0);this.setBounds(Q,j,K,W,V,J,ee,te,ne)}}},setCompositeRenderStyle:function(I){var M=I.bodies,L=I.constraints,N=I.composites,G,D,B;for(G=0;G<M.length;G++)D=M[G],B=D.render,this.setBodyRenderStyle(D,B.lineColor,B.lineOpacity,B.lineThickness,B.fillColor,B.fillOpacity);for(G=0;G<L.length;G++)D=L[G],B=D.render,this.setConstraintRenderStyle(D,B.lineColor,B.lineOpacity,B.lineThickness,B.pinSize,B.anchorColor,B.anchorSize);for(G=0;G<N.length;G++)D=N[G],this.setCompositeRenderStyle(D);return this},setBodyRenderStyle:function(I,M,L,N,G,D){var B=I.render,$=this.debugConfig;return B?(M==null&&(M=I.isStatic?$.staticLineColor:$.lineColor),L==null&&(L=$.lineOpacity),N==null&&(N=$.lineThickness),G==null&&(G=I.isStatic?$.staticFillColor:$.fillColor),D==null&&(D=$.fillOpacity),M!==!1&&(B.lineColor=M),L!==!1&&(B.lineOpacity=L),N!==!1&&(B.lineThickness=N),G!==!1&&(B.fillColor=G),D!==!1&&(B.fillOpacity=D),this):this},setConstraintRenderStyle:function(I,M,L,N,G,D,B){var $=I.render,k=this.debugConfig;if(!$)return this;if(M==null){var X=$.type;X==="line"?M=k.jointColor:X==="pin"?M=k.pinColor:X==="spring"&&(M=k.springColor)}return L==null&&(L=k.jointLineOpacity),N==null&&(N=k.jointLineThickness),G==null&&(G=k.pinSize),D==null&&(D=k.anchorColor),B==null&&(B=k.anchorSize),M!==!1&&($.lineColor=M),L!==!1&&($.lineOpacity=L),N!==!1&&($.lineThickness=N),G!==!1&&($.pinSize=G),D!==!1&&($.anchorColor=D),B!==!1&&($.anchorSize=B),this},setEventsProxy:function(){var I=this,M=this.engine,L=this.localWorld;this.drawDebug&&(S.on(L,"compositeModified",function(N){I.setCompositeRenderStyle(N)}),S.on(L,"beforeAdd",function(N){for(var G=[].concat(N.object),D=0;D<G.length;D++){var B=G[D],$=B.render;B.type==="body"?I.setBodyRenderStyle(B,$.lineColor,$.lineOpacity,$.lineThickness,$.fillColor,$.fillOpacity):B.type==="composite"?I.setCompositeRenderStyle(B):B.type==="constraint"&&I.setConstraintRenderStyle(B,$.lineColor,$.lineOpacity,$.lineThickness,$.pinSize,$.anchorColor,$.anchorSize)}})),S.on(L,"beforeAdd",function(N){I.emit(v.BEFORE_ADD,N)}),S.on(L,"afterAdd",function(N){I.emit(v.AFTER_ADD,N)}),S.on(L,"beforeRemove",function(N){I.emit(v.BEFORE_REMOVE,N)}),S.on(L,"afterRemove",function(N){I.emit(v.AFTER_REMOVE,N)}),S.on(M,"beforeUpdate",function(N){I.emit(v.BEFORE_UPDATE,N)}),S.on(M,"afterUpdate",function(N){I.emit(v.AFTER_UPDATE,N)}),S.on(M,"collisionStart",function(N){var G=N.pairs,D,B;G.length>0&&G.map(function($){D=$.bodyA,B=$.bodyB,D.gameObject&&D.gameObject.emit("collide",D,B,$),B.gameObject&&B.gameObject.emit("collide",B,D,$),S.trigger(D,"onCollide",{pair:$}),S.trigger(B,"onCollide",{pair:$}),D.onCollideCallback&&D.onCollideCallback($),B.onCollideCallback&&B.onCollideCallback($),D.onCollideWith[B.id]&&D.onCollideWith[B.id](B,$),B.onCollideWith[D.id]&&B.onCollideWith[D.id](D,$)}),I.emit(v.COLLISION_START,N,D,B)}),S.on(M,"collisionActive",function(N){var G=N.pairs,D,B;G.length>0&&G.map(function($){D=$.bodyA,B=$.bodyB,D.gameObject&&D.gameObject.emit("collideActive",D,B,$),B.gameObject&&B.gameObject.emit("collideActive",B,D,$),S.trigger(D,"onCollideActive",{pair:$}),S.trigger(B,"onCollideActive",{pair:$}),D.onCollideActiveCallback&&D.onCollideActiveCallback($),B.onCollideActiveCallback&&B.onCollideActiveCallback($)}),I.emit(v.COLLISION_ACTIVE,N,D,B)}),S.on(M,"collisionEnd",function(N){var G=N.pairs,D,B;G.length>0&&G.map(function($){D=$.bodyA,B=$.bodyB,D.gameObject&&D.gameObject.emit("collideEnd",D,B,$),B.gameObject&&B.gameObject.emit("collideEnd",B,D,$),S.trigger(D,"onCollideEnd",{pair:$}),S.trigger(B,"onCollideEnd",{pair:$}),D.onCollideEndCallback&&D.onCollideEndCallback($),B.onCollideEndCallback&&B.onCollideEndCallback($)}),I.emit(v.COLLISION_END,N,D,B)})},setBounds:function(I,M,L,N,G,D,B,$,k){return I===void 0&&(I=0),M===void 0&&(M=0),L===void 0&&(L=this.scene.sys.scale.width),N===void 0&&(N=this.scene.sys.scale.height),G===void 0&&(G=64),D===void 0&&(D=!0),B===void 0&&(B=!0),$===void 0&&($=!0),k===void 0&&(k=!0),this.updateWall(D,"left",I-G,M-G,G,N+G*2),this.updateWall(B,"right",I+L,M-G,G,N+G*2),this.updateWall($,"top",I,M-G,L,G),this.updateWall(k,"bottom",I,M+N,L,G),this},updateWall:function(I,M,L,N,G,D){var B=this.walls[M];I?(B&&w.remove(this.localWorld,B),L+=G/2,N+=D/2,this.walls[M]=this.create(L,N,G,D,{isStatic:!0,friction:0,frictionStatic:0})):(B&&w.remove(this.localWorld,B),this.walls[M]=null)},createDebugGraphic:function(){var I=this.scene.sys.add.graphics({x:0,y:0});return I.setDepth(Number.MAX_VALUE),this.debugGraphic=I,this.drawDebug=!0,I},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(I,M,L){return I===void 0&&(I=0),M===void 0&&(M=1),L===void 0&&(L=.001),this.localWorld.gravity.x=I,this.localWorld.gravity.y=M,this.localWorld.gravity.scale=L,this},create:function(I,M,L,N,G){var D=a.rectangle(I,M,L,N,G);return w.add(this.localWorld,D),D},add:function(I){return w.add(this.localWorld,I),this},remove:function(I,M){Array.isArray(I)||(I=[I]);for(var L=0;L<I.length;L++){var N=I[L],G=N.body?N.body:N;h.remove(this.localWorld,G,M)}return this},removeConstraint:function(I,M){return h.remove(this.localWorld,I,M),this},convertTilemapLayer:function(I,M){var L=I.layer,N=I.getTilesWithin(0,0,L.width,L.height,{isColliding:!0});return this.convertTiles(N,M),this},convertTiles:function(I,M){if(I.length===0)return this;for(var L=0;L<I.length;L++)new T(this,I[L],M);return this},nextGroup:function(I){return y.nextGroup(I)},nextCategory:function(){return y.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=u.now(),this.emit(v.RESUME),this},update:function(I){if(!(!this.enabled||!this.autoUpdate)){var M=this.engine,L=this.runner,N=u.now(),G=L.delta,D=0,B=I-L.timeLastTick;if((!B||!L.timeLastTick||B>Math.max(P._maxFrameDelta,L.maxFrameTime))&&(B=L.frameDelta||P._frameDeltaFallback),L.frameDeltaSmoothing){L.frameDeltaHistory.push(B),L.frameDeltaHistory=L.frameDeltaHistory.slice(-L.frameDeltaHistorySize);var $=L.frameDeltaHistory.slice(0).sort(),k=L.frameDeltaHistory.slice($.length*P._smoothingLowerBound,$.length*P._smoothingUpperBound),X=P._mean(k);B=X||B}L.frameDeltaSnapping&&(B=1e3/Math.round(1e3/B)),L.frameDelta=B,L.timeLastTick=I,L.timeBuffer+=L.frameDelta,L.timeBuffer=u.clamp(L.timeBuffer,0,L.frameDelta+G*P._timeBufferMargin),L.lastUpdatesDeferred=0;for(var Y=L.maxUpdates||Math.ceil(L.maxFrameTime/G),Z=u.now();G>0&&L.timeBuffer>=G*P._timeBufferMargin;){s.update(M,G),L.timeBuffer-=G,D+=1;var Q=u.now()-N,j=u.now()-Z,K=Q+P._elapsedNextEstimate*j/D;if(D>=Y||K>L.maxFrameTime){L.lastUpdatesDeferred=Math.round(Math.max(0,L.timeBuffer/G-P._timeBufferMargin));break}}}},step:function(I){s.update(this.engine,I)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(I){var M=I.hasOwnProperty("body")?I.body:I;return h.get(this.localWorld,M.id,M.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var I=this.debugConfig,M=this.engine,L=this.debugGraphic,N=h.allBodies(this.localWorld);this.debugGraphic.clear(),I.showBroadphase&&M.broadphase.controller&&this.renderGrid(M.broadphase,L,I.broadphaseColor,.5),I.showBounds&&this.renderBodyBounds(N,L,I.boundsColor,.5),(I.showBody||I.showStaticBody)&&this.renderBodies(N),I.showJoint&&this.renderJoints(),(I.showAxes||I.showAngleIndicator)&&this.renderBodyAxes(N,L,I.showAxes,I.angleColor,.5),I.showVelocity&&this.renderBodyVelocity(N,L,I.velocityColor,1,2),I.showSeparations&&this.renderSeparations(M.pairs.list,L,I.separationColor),I.showCollisions&&this.renderCollisions(M.pairs.list,L,I.collisionColor)}},renderGrid:function(I,M,L,N){M.lineStyle(1,L,N);for(var G=u.keys(I.buckets),D=0;D<G.length;D++){var B=G[D];if(!(I.buckets[B].length<2)){var $=B.split(/C|R/);M.strokeRect(parseInt($[1],10)*I.bucketWidth,parseInt($[2],10)*I.bucketHeight,I.bucketWidth,I.bucketHeight)}}return this},renderSeparations:function(I,M,L){M.lineStyle(1,L,1);for(var N=0;N<I.length;N++){var G=I[N];if(G.isActive){var D=G.collision,B=D.bodyA,$=D.bodyB,k=B.position,X=$.position,Y=D.penetration,Z=!B.isStatic&&!$.isStatic?4:1;$.isStatic&&(Z=0),M.lineBetween(X.x,X.y,X.x-Y.x*Z,X.y-Y.y*Z),Z=!B.isStatic&&!$.isStatic?4:1,B.isStatic&&(Z=0),M.lineBetween(k.x,k.y,k.x-Y.x*Z,k.y-Y.y*Z)}}return this},renderCollisions:function(I,M,L){M.lineStyle(1,L,.5),M.fillStyle(L,1);var N,G;for(N=0;N<I.length;N++)if(G=I[N],!!G.isActive)for(var D=0;D<G.contactCount;D++){var B=G.contacts[D],$=B.vertex;$&&M.fillRect($.x-2,$.y-2,5,5)}for(N=0;N<I.length;N++)if(G=I[N],!!G.isActive){var k=G.collision,X=G.contacts;if(G.contactCount>0){var Y=X[0].vertex.x,Z=X[0].vertex.y;G.contactCount===2&&(Y=(X[0].vertex.x+X[1].vertex.x)/2,Z=(X[0].vertex.y+X[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic?M.lineBetween(Y-k.normal.x*8,Z-k.normal.y*8,Y,Z):M.lineBetween(Y+k.normal.x*8,Z+k.normal.y*8,Y,Z)}}return this},renderBodyBounds:function(I,M,L,N){M.lineStyle(1,L,N);for(var G=0;G<I.length;G++){var D=I[G];if(D.render.visible){var B=D.bounds;if(B)M.strokeRect(B.min.x,B.min.y,B.max.x-B.min.x,B.max.y-B.min.y);else for(var $=D.parts,k=$.length>1?1:0;k<$.length;k++){var X=$[k];M.strokeRect(X.bounds.min.x,X.bounds.min.y,X.bounds.max.x-X.bounds.min.x,X.bounds.max.y-X.bounds.min.y)}}}return this},renderBodyAxes:function(I,M,L,N,G){M.lineStyle(1,N,G);for(var D=0;D<I.length;D++){var B=I[D],$=B.parts;if(B.render.visible){var k,X,Y;if(L)for(X=$.length>1?1:0;X<$.length;X++)for(k=$[X],Y=0;Y<k.axes.length;Y++){var Z=k.axes[Y];M.lineBetween(k.position.x,k.position.y,k.position.x+Z.x*20,k.position.y+Z.y*20)}else for(X=$.length>1?1:0;X<$.length;X++)for(k=$[X],Y=0;Y<k.axes.length;Y++)M.lineBetween(k.position.x,k.position.y,(k.vertices[0].x+k.vertices[k.vertices.length-1].x)/2,(k.vertices[0].y+k.vertices[k.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(I,M,L,N,G){M.lineStyle(G,L,N);for(var D=0;D<I.length;D++){var B=I[D];B.render.visible&&M.lineBetween(B.position.x,B.position.y,B.position.x+(B.position.x-B.positionPrev.x)*2,B.position.y+(B.position.y-B.positionPrev.y)*2)}return this},renderBodies:function(I){for(var M=this.debugGraphic,L=this.debugConfig,N=L.showBody,G=L.showStaticBody,D=L.showSleeping,B=L.showInternalEdges,$=L.showConvexHulls,k=L.renderFill,X=L.renderLine,Y=L.staticBodySleepOpacity,Z=L.sleepFillColor,Q=L.sleepLineColor,j=L.hullColor,K=0;K<I.length;K++){var W=I[K];if(W.render.visible&&!(!G&&W.isStatic||!N&&!W.isStatic)){var V=W.render.lineColor,J=W.render.lineOpacity,ee=W.render.lineThickness,te=W.render.fillColor,ne=W.render.fillOpacity;D&&W.isSleeping&&(W.isStatic?(J*=Y,ne*=Y):(V=Q,te=Z)),k||(te=null),X||(V=null),this.renderBody(W,M,B,V,J,ee,te,ne);var se=W.parts.length;$&&se>1&&this.renderConvexHull(W,M,j,ee)}}},renderBody:function(I,M,L,N,G,D,B,$){N===void 0&&(N=null),G===void 0&&(G=null),D===void 0&&(D=1),B===void 0&&(B=null),$===void 0&&($=null);for(var k=this.debugConfig,X=k.sensorFillColor,Y=k.sensorLineColor,Z=I.parts,Q=Z.length,j=Q>1?1:0;j<Q;j++){var K=Z[j],W=K.render,V=W.opacity;if(!(!W.visible||V===0||K.isSensor&&!k.showSensors)){var J=K.circleRadius;if(M.beginPath(),K.isSensor?(B!==null&&M.fillStyle(X,$*V),N!==null&&M.lineStyle(D,Y,G*V)):(B!==null&&M.fillStyle(B,$*V),N!==null&&M.lineStyle(D,N,G*V)),J)M.arc(K.position.x,K.position.y,J,0,2*Math.PI);else{var ee=K.vertices,te=ee.length;M.moveTo(ee[0].x,ee[0].y);for(var ne=1;ne<te;ne++){var se=ee[ne];if(!ee[ne-1].isInternal||L?M.lineTo(se.x,se.y):M.moveTo(se.x,se.y),ne<te&&se.isInternal&&!L){var ae=(ne+1)%te;M.moveTo(ee[ae].x,ee[ae].y)}}M.closePath()}B!==null&&M.fillPath(),N!==null&&M.strokePath()}}if(k.showPositions&&!I.isStatic){var ue=I.position.x,de=I.position.y,fe=Math.ceil(k.positionSize/2);M.fillStyle(k.positionColor,1),M.fillRect(ue-fe,de-fe,k.positionSize,k.positionSize)}return this},renderConvexHull:function(I,M,L,N){N===void 0&&(N=1);var G=I.parts,D=G.length;if(D>1){var B=I.vertices;M.lineStyle(N,L),M.beginPath(),M.moveTo(B[0].x,B[0].y);for(var $=1;$<B.length;$++)M.lineTo(B[$].x,B[$].y);M.lineTo(B[0].x,B[0].y),M.strokePath()}return this},renderJoints:function(){for(var I=this.debugGraphic,M=h.allConstraints(this.localWorld),L=0;L<M.length;L++){var N=M[L].render,G=N.lineColor,D=N.lineOpacity,B=N.lineThickness,$=N.pinSize,k=N.anchorColor,X=N.anchorSize;this.renderConstraint(M[L],I,G,D,B,$,k,X)}},renderConstraint:function(I,M,L,N,G,D,B,$){var k=I.render;if(!k.visible||!I.pointA||!I.pointB)return this;M.lineStyle(G,L,N);var X=I.bodyA,Y=I.bodyB,Z,Q;if(X?Z=A.add(X.position,I.pointA):Z=I.pointA,k.type==="pin")M.strokeCircle(Z.x,Z.y,D);else{if(Y?Q=A.add(Y.position,I.pointB):Q=I.pointB,M.beginPath(),M.moveTo(Z.x,Z.y),k.type==="spring")for(var j=A.sub(Q,Z),K=A.perp(A.normalise(j)),W=Math.ceil(u.clamp(I.length/5,12,20)),V,J=1;J<W;J+=1)V=J%2===0?1:-1,M.lineTo(Z.x+j.x*(J/W)+K.x*V*4,Z.y+j.y*(J/W)+K.y*V*4);M.lineTo(Q.x,Q.y)}return M.strokePath(),k.anchors&&$>0&&(M.fillStyle(B),M.fillCircle(Z.x,Z.y,$),M.fillCircle(Q.x,Q.y,$)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){S.off(this.engine),this.removeAllListeners(),w.clear(this.localWorld,!1),s.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});o.exports=R},70410:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(e){return this.body.restitution=e,this}};o.exports=E},66968:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var a=0;if(!Array.isArray(e))a=e;else for(var x=0;x<e.length;x++)a|=e[x];return this.body.collisionFilter.mask=a,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,a){Array.isArray(e)||(e=[e]);for(var x=0;x<e.length;x++){var c=e[x].hasOwnProperty("body")?e[x].body:e[x];this.body.setOnCollideWith(c,a)}return this}};o.exports=E},51607:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={applyForce:function(c){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,c),this},applyForceFrom:function(c,u){return a.applyForce(this.body,c,u),this},thrust:function(c){var u=this.body.angle;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(c){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(c){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(c){var u=this.body.angle-Math.PI;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};o.exports=x},5436:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(e,a,x){return this.body.friction=e,a!==void 0&&(this.body.frictionAir=a),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};o.exports=E},39858:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};o.exports=E},37302:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x=e(26099),c={setMass:function(u){return a.setMass(this.body,u),this},setDensity:function(u){return a.setDensity(this.body,u),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};o.exports=c},39132:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};o.exports=E},57772:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),c=e(43855),u=e(95540),h=e(19496),s=e(85791),l=e(41598),v={setRectangle:function(d,g,y){return this.setBody({type:"rectangle",width:d,height:g},y)},setCircle:function(d,g){return this.setBody({type:"circle",radius:d},g)},setPolygon:function(d,g,y){return this.setBody({type:"polygon",sides:g,radius:d},y)},setTrapezoid:function(d,g,y,S){return this.setBody({type:"trapezoid",width:d,height:g,slope:y},S)},setExistingBody:function(d,g){g===void 0&&(g=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var y=0;y<d.parts.length;y++)d.parts[y].gameObject=this;var S=this;if(d.destroy=function(){S.world.remove(S.body,!0),S.body.gameObject=null},g&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var T=d.render.sprite.xOffset,w=d.render.sprite.yOffset,P=d.centerOfMass.x,A=d.centerOfMass.y;if(c(P,.5)&&c(A,.5))this.setOrigin(T+.5,w+.5);else{var R=d.centerOffset.x,I=d.centerOffset.y;this.setOrigin(T+R/this.displayWidth,w+I/this.displayHeight)}}return this},setBody:function(d,g){if(!d)return this;var y;typeof d=="string"&&(d={type:d});var S=u(d,"type","rectangle"),T=u(d,"x",this._tempVec2.x),w=u(d,"y",this._tempVec2.y),P=u(d,"width",this.width),A=u(d,"height",this.height);switch(S){case"rectangle":y=a.rectangle(T,w,P,A,g);break;case"circle":var R=u(d,"radius",Math.max(P,A)/2),I=u(d,"maxSides",25);y=a.circle(T,w,R,g,I);break;case"trapezoid":var M=u(d,"slope",.5);y=a.trapezoid(T,w,P,A,M,g);break;case"polygon":var L=u(d,"sides",5),N=u(d,"radius",Math.max(P,A)/2);y=a.polygon(T,w,L,N,g);break;case"fromVertices":case"fromVerts":var G=u(d,"verts",null);if(G)if(typeof G=="string"&&(G=l.fromPath(G)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,G),y=this.body;else{var D=u(d,"flagInternal",!1),B=u(d,"removeCollinear",.01),$=u(d,"minimumArea",10);y=a.fromVertices(T,w,G,g,D,B,$)}break;case"fromPhysicsEditor":y=h.parseBody(T,w,d,g);break;case"fromPhysicsTracer":y=s.parseBody(T,w,d,g);break}return y&&this.setExistingBody(y,d.addToWorld),this}};o.exports=v},38083:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1121),x=e(53614),c=e(35810),u={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,s){return this.setSleepStartEvent(h),this.setSleepEndEvent(s),this},setSleepStartEvent:function(h){if(h){var s=this.world;c.on(this.body,"sleepStart",function(l){s.emit(a.SLEEP_START,l,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var s=this.world;c.on(this.body,"sleepEnd",function(l){s.emit(a.SLEEP_END,l,this)})}else c.off(this.body,"sleepEnd");return this}};o.exports=u},90556:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={setStatic:function(c){return a.setStatic(this.body,c),this},isStatic:function(){return this.body.isStatic}};o.exports=x},85436:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x=e(36383),c=e(86554),u=e(30954),h=4,s={x:{get:function(){return this.body.position.x},set:function(l){this._tempVec2.set(l,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(l){this._tempVec2.set(this.x,l),a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(l){var v=1/this._scaleX,d=1/this._scaleY;this._scaleX=l,this._scaleX===0?this.renderFlags&=-5:this.renderFlags|=h,a.scale(this.body,v,d),a.scale(this.body,l,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(l){var v=1/this._scaleX,d=1/this._scaleY;this._scaleY=l,this._scaleY===0?this.renderFlags&=-5:this.renderFlags|=h,a.scale(this.body,v,d),a.scale(this.body,this._scaleX,l)}},angle:{get:function(){return u(this.body.angle*x.RAD_TO_DEG)},set:function(l){this.rotation=u(l)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(l){this._rotation=c(l),a.setAngle(this.body,this._rotation)}},setPosition:function(l,v){return l===void 0&&(l=0),v===void 0&&(v=l),this._tempVec2.set(l,v),a.setPosition(this.body,this._tempVec2),this},setRotation:function(l){return l===void 0&&(l=0),this._rotation=c(l),a.setAngle(this.body,l),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,a.setAngle(this.body,this.rotation),this},setScale:function(l,v,d){l===void 0&&(l=1),v===void 0&&(v=l);var g=1/this._scaleX,y=1/this._scaleY;return this._scaleX=l,this._scaleY=v,a.scale(this.body,g,y,d),a.scale(this.body,l,v,d),this}};o.exports=s},42081:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={setVelocityX:function(c){return this._tempVec2.set(c,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(c){return this._tempVec2.set(this.body.velocity.x,c),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(c,u){return this._tempVec2.set(c,u),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(c){return a.setAngularVelocity(this.body,c),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(c){return a.setAngularSpeed(this.body,c),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};o.exports=x},31884:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}},85608:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afteradd"},1213:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterremove"},25968:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterupdate"},67205:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeadd"},39438:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeremove"},44823:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeupdate"},92593:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionactive"},60128:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionend"},76861:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionstart"},92362:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},76408:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},93971:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},5656:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},47861:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},79099:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepend"},35906:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepstart"},1121:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}},3875:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}},22562:(o,E,e)=>{var a={};o.exports=a;var x=e(41598),c=e(31725),u=e(53614),h=e(53402),s=e(15647),l=e(66615);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(d){var g={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:d.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=x.centre(d.vertices):d.hasOwnProperty("vertices")||(g.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var y=h.extend(g,d);return v(y,d),y.setOnCollideWith=function(S,T){return T?this.onCollideWith[S.id]=T:delete this.onCollideWith[S.id],this},y},a.nextGroup=function(d){return d?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var v=function(d,g){if(g=g||{},a.set(d,{bounds:d.bounds||s.create(d.vertices),positionPrev:d.positionPrev||c.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d}),x.rotate(d.vertices,d.angle,d.position),l.rotate(d.axes,d.angle),s.update(d.bounds,d.vertices,d.velocity),a.set(d,{axes:g.axes||d.axes,area:g.area||d.area,mass:g.mass||d.mass,inertia:g.inertia||d.inertia}),d.parts.length===1){var y=d.bounds,S=d.centerOfMass,T=d.centerOffset,w=y.max.x-y.min.x,P=y.max.y-y.min.y;S.x=-(y.min.x-d.position.x)/w,S.y=-(y.min.y-d.position.y)/P,T.x=w*S.x,T.y=P*S.y}};a.set=function(d,g,y){var S;typeof g=="string"&&(S=g,g={},g[S]=y);for(S in g)if(Object.prototype.hasOwnProperty.call(g,S))switch(y=g[S],S){case"isStatic":a.setStatic(d,y);break;case"isSleeping":u.set(d,y);break;case"mass":a.setMass(d,y);break;case"density":a.setDensity(d,y);break;case"inertia":a.setInertia(d,y);break;case"vertices":a.setVertices(d,y);break;case"position":a.setPosition(d,y);break;case"angle":a.setAngle(d,y);break;case"velocity":a.setVelocity(d,y);break;case"angularVelocity":a.setAngularVelocity(d,y);break;case"speed":a.setSpeed(d,y);break;case"angularSpeed":a.setAngularSpeed(d,y);break;case"parts":a.setParts(d,y);break;case"centre":a.setCentre(d,y);break;default:d[S]=y}},a.setStatic=function(d,g){for(var y=0;y<d.parts.length;y++){var S=d.parts[y];g?(S.isStatic||(S._original={restitution:S.restitution,friction:S.friction,mass:S.mass,inertia:S.inertia,density:S.density,inverseMass:S.inverseMass,inverseInertia:S.inverseInertia}),S.restitution=0,S.friction=1,S.mass=S.inertia=S.density=1/0,S.inverseMass=S.inverseInertia=0,S.positionPrev.x=S.position.x,S.positionPrev.y=S.position.y,S.anglePrev=S.angle,S.angularVelocity=0,S.speed=0,S.angularSpeed=0,S.motion=0):S._original&&(S.restitution=S._original.restitution,S.friction=S._original.friction,S.mass=S._original.mass,S.inertia=S._original.inertia,S.density=S._original.density,S.inverseMass=S._original.inverseMass,S.inverseInertia=S._original.inverseInertia,S._original=null),S.isStatic=g}},a.setMass=function(d,g){var y=d.inertia/(d.mass/6);d.inertia=y*(g/6),d.inverseInertia=1/d.inertia,d.mass=g,d.inverseMass=1/d.mass,d.density=d.mass/d.area},a.setDensity=function(d,g){a.setMass(d,g*d.area),d.density=g},a.setInertia=function(d,g){d.inertia=g,d.inverseInertia=1/d.inertia},a.setVertices=function(d,g){g[0].body===d?d.vertices=g:d.vertices=x.create(g,d),d.axes=l.fromVertices(d.vertices),d.area=x.area(d.vertices),a.setMass(d,d.density*d.area);var y=x.centre(d.vertices);x.translate(d.vertices,y,-1),a.setInertia(d,a._inertiaScale*x.inertia(d.vertices,d.mass)),x.translate(d.vertices,d.position),s.update(d.bounds,d.vertices,d.velocity)},a.setParts=function(d,g,y){var S;for(g=g.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,S=0;S<g.length;S++){var T=g[S];T!==d&&(T.parent=d,d.parts.push(T))}if(d.parts.length!==1){if(y=typeof y<"u"?y:!0,y){var w=[];for(S=0;S<g.length;S++)w=w.concat(g[S].vertices);x.clockwiseSort(w);var P=x.hull(w),A=x.centre(P);a.setVertices(d,P),x.translate(d.vertices,A)}var R=a._totalProperties(d),I=R.centre.x,M=R.centre.y,L=d.bounds,N=d.centerOfMass,G=d.centerOffset;s.update(L,d.vertices,d.velocity),N.x=-(L.min.x-I)/(L.max.x-L.min.x),N.y=-(L.min.y-M)/(L.max.y-L.min.y),G.x=I,G.y=M,d.area=R.area,d.parent=d,d.position.x=I,d.position.y=M,d.positionPrev.x=I,d.positionPrev.y=M,a.setMass(d,R.mass),a.setInertia(d,R.inertia),a.setPosition(d,R.centre)}},a.setCentre=function(d,g,y){y?(d.positionPrev.x+=g.x,d.positionPrev.y+=g.y,d.position.x+=g.x,d.position.y+=g.y):(d.positionPrev.x=g.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=g.y-(d.position.y-d.positionPrev.y),d.position.x=g.x,d.position.y=g.y)},a.setPosition=function(d,g,y){var S=c.sub(g,d.position);y?(d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.velocity.x=S.x,d.velocity.y=S.y,d.speed=c.magnitude(S)):(d.positionPrev.x+=S.x,d.positionPrev.y+=S.y);for(var T=0;T<d.parts.length;T++){var w=d.parts[T];w.position.x+=S.x,w.position.y+=S.y,x.translate(w.vertices,S),s.update(w.bounds,w.vertices,d.velocity)}},a.setAngle=function(d,g,y){var S=g-d.angle;y?(d.anglePrev=d.angle,d.angularVelocity=S,d.angularSpeed=Math.abs(S)):d.anglePrev+=S;for(var T=0;T<d.parts.length;T++){var w=d.parts[T];w.angle+=S,x.rotate(w.vertices,S,d.position),l.rotate(w.axes,S),s.update(w.bounds,w.vertices,d.velocity),T>0&&c.rotateAbout(w.position,S,d.position,w.position)}},a.setVelocity=function(d,g){var y=d.deltaTime/a._baseDelta;d.positionPrev.x=d.position.x-g.x*y,d.positionPrev.y=d.position.y-g.y*y,d.velocity.x=(d.position.x-d.positionPrev.x)/y,d.velocity.y=(d.position.y-d.positionPrev.y)/y,d.speed=c.magnitude(d.velocity)},a.getVelocity=function(d){var g=a._baseDelta/d.deltaTime;return{x:(d.position.x-d.positionPrev.x)*g,y:(d.position.y-d.positionPrev.y)*g}},a.getSpeed=function(d){return c.magnitude(a.getVelocity(d))},a.setSpeed=function(d,g){a.setVelocity(d,c.mult(c.normalise(a.getVelocity(d)),g))},a.setAngularVelocity=function(d,g){var y=d.deltaTime/a._baseDelta;d.anglePrev=d.angle-g*y,d.angularVelocity=(d.angle-d.anglePrev)/y,d.angularSpeed=Math.abs(d.angularVelocity)},a.getAngularVelocity=function(d){return(d.angle-d.anglePrev)*a._baseDelta/d.deltaTime},a.getAngularSpeed=function(d){return Math.abs(a.getAngularVelocity(d))},a.setAngularSpeed=function(d,g){a.setAngularVelocity(d,h.sign(a.getAngularVelocity(d))*g)},a.translate=function(d,g,y){a.setPosition(d,c.add(d.position,g),y)},a.rotate=function(d,g,y,S){if(!y)a.setAngle(d,d.angle+g,S);else{var T=Math.cos(g),w=Math.sin(g),P=d.position.x-y.x,A=d.position.y-y.y;a.setPosition(d,{x:y.x+(P*T-A*w),y:y.y+(P*w+A*T)},S),a.setAngle(d,d.angle+g,S)}},a.scale=function(d,g,y,S){var T=0,w=0;S=S||d.position;for(var P=d.inertia===1/0,A=0;A<d.parts.length;A++){var R=d.parts[A];R.scale.x=g,R.scale.y=y,x.scale(R.vertices,g,y,S),R.axes=l.fromVertices(R.vertices),R.area=x.area(R.vertices),a.setMass(R,d.density*R.area),x.translate(R.vertices,{x:-R.position.x,y:-R.position.y}),a.setInertia(R,a._inertiaScale*x.inertia(R.vertices,R.mass)),x.translate(R.vertices,{x:R.position.x,y:R.position.y}),A>0&&(T+=R.area,w+=R.inertia),R.position.x=S.x+(R.position.x-S.x)*g,R.position.y=S.y+(R.position.y-S.y)*y,s.update(R.bounds,R.vertices,d.velocity)}d.parts.length>1&&(d.area=T,d.isStatic||(a.setMass(d,d.density*T),a.setInertia(d,w))),d.circleRadius&&(g===y?d.circleRadius*=g:d.circleRadius=null),P&&a.setInertia(d,1/0)},a.update=function(d,g){g=(typeof g<"u"?g:16.666666666666668)*d.timeScale;var y=g*g,S=a._timeCorrection?g/(d.deltaTime||g):1,T=1-d.frictionAir*(g/h._baseDelta),w=(d.position.x-d.positionPrev.x)*S,P=(d.position.y-d.positionPrev.y)*S;d.velocity.x=w*T+d.force.x/d.mass*y,d.velocity.y=P*T+d.force.y/d.mass*y,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.deltaTime=g,d.angularVelocity=(d.angle-d.anglePrev)*T*S+d.torque/d.inertia*y,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=c.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var A=0;A<d.parts.length;A++){var R=d.parts[A];x.translate(R.vertices,d.velocity),A>0&&(R.position.x+=d.velocity.x,R.position.y+=d.velocity.y),d.angularVelocity!==0&&(x.rotate(R.vertices,d.angularVelocity,d.position),l.rotate(R.axes,d.angularVelocity),A>0&&c.rotateAbout(R.position,d.angularVelocity,d.position,R.position)),s.update(R.bounds,R.vertices,d.velocity)}},a.updateVelocities=function(d){var g=a._baseDelta/d.deltaTime,y=d.velocity;y.x=(d.position.x-d.positionPrev.x)*g,y.y=(d.position.y-d.positionPrev.y)*g,d.speed=Math.sqrt(y.x*y.x+y.y*y.y),d.angularVelocity=(d.angle-d.anglePrev)*g,d.angularSpeed=Math.abs(d.angularVelocity)},a.applyForce=function(d,g,y){var S={x:g.x-d.position.x,y:g.y-d.position.y};d.force.x+=y.x,d.force.y+=y.y,d.torque+=S.x*y.y-S.y*y.x},a._totalProperties=function(d){for(var g={mass:0,area:0,inertia:0,centre:{x:0,y:0}},y=d.parts.length===1?0:1;y<d.parts.length;y++){var S=d.parts[y],T=S.mass!==1/0?S.mass:1;g.mass+=T,g.area+=S.area,g.inertia+=S.inertia,g.centre=c.add(g.centre,c.mult(S.position,T))}return g.centre=c.div(g.centre,g.mass),g},a.wrap=function(d,g){var y=s.wrap(d.bounds,g);return y&&a.translate(d,y),y}})()},69351:(o,E,e)=>{var a={};o.exports=a;var x=e(35810),c=e(53402),u=e(15647),h=e(22562);(function(){a.create=function(s){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},s)},a.setModified=function(s,l,v,d){if(x.trigger(s,"compositeModified",s),s.isModified=l,l&&s.cache&&(s.cache.allBodies=null,s.cache.allConstraints=null,s.cache.allComposites=null),v&&s.parent&&a.setModified(s.parent,l,v,d),d)for(var g=0;g<s.composites.length;g++){var y=s.composites[g];a.setModified(y,l,v,d)}},a.add=function(s,l){var v=[].concat(l);x.trigger(s,"beforeAdd",{object:l});for(var d=0;d<v.length;d++){var g=v[d];switch(g.type){case"body":if(g.parent!==g){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(s,g);break;case"constraint":a.addConstraint(s,g);break;case"composite":a.addComposite(s,g);break;case"mouseConstraint":a.addConstraint(s,g.constraint);break}}return x.trigger(s,"afterAdd",{object:l}),s},a.remove=function(s,l,v){var d=[].concat(l);x.trigger(s,"beforeRemove",{object:l});for(var g=0;g<d.length;g++){var y=d[g];switch(y.type){case"body":a.removeBody(s,y,v);break;case"constraint":a.removeConstraint(s,y,v);break;case"composite":a.removeComposite(s,y,v);break;case"mouseConstraint":a.removeConstraint(s,y.constraint);break}}return x.trigger(s,"afterRemove",{object:l}),s},a.addComposite=function(s,l){return s.composites.push(l),l.parent=s,a.setModified(s,!0,!0,!1),s},a.removeComposite=function(s,l,v){var d=c.indexOf(s.composites,l);if(d!==-1){var g=a.allBodies(l);a.removeCompositeAt(s,d);for(var y=0;y<g.length;y++)g[y].sleepCounter=0}if(v)for(var y=0;y<s.composites.length;y++)a.removeComposite(s.composites[y],l,!0);return s},a.removeCompositeAt=function(s,l){return s.composites.splice(l,1),a.setModified(s,!0,!0,!1),s},a.addBody=function(s,l){return s.bodies.push(l),a.setModified(s,!0,!0,!1),s},a.removeBody=function(s,l,v){var d=c.indexOf(s.bodies,l);if(d!==-1&&(a.removeBodyAt(s,d),l.sleepCounter=0),v)for(var g=0;g<s.composites.length;g++)a.removeBody(s.composites[g],l,!0);return s},a.removeBodyAt=function(s,l){return s.bodies.splice(l,1),a.setModified(s,!0,!0,!1),s},a.addConstraint=function(s,l){return s.constraints.push(l),a.setModified(s,!0,!0,!1),s},a.removeConstraint=function(s,l,v){var d=c.indexOf(s.constraints,l);if(d!==-1&&a.removeConstraintAt(s,d),v)for(var g=0;g<s.composites.length;g++)a.removeConstraint(s.composites[g],l,!0);return s},a.removeConstraintAt=function(s,l){return s.constraints.splice(l,1),a.setModified(s,!0,!0,!1),s},a.clear=function(s,l,v){if(v)for(var d=0;d<s.composites.length;d++)a.clear(s.composites[d],l,!0);return l?s.bodies=s.bodies.filter(function(g){return g.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,a.setModified(s,!0,!0,!1),s},a.allBodies=function(s){if(s.cache&&s.cache.allBodies)return s.cache.allBodies;for(var l=[].concat(s.bodies),v=0;v<s.composites.length;v++)l=l.concat(a.allBodies(s.composites[v]));return s.cache&&(s.cache.allBodies=l),l},a.allConstraints=function(s){if(s.cache&&s.cache.allConstraints)return s.cache.allConstraints;for(var l=[].concat(s.constraints),v=0;v<s.composites.length;v++)l=l.concat(a.allConstraints(s.composites[v]));return s.cache&&(s.cache.allConstraints=l),l},a.allComposites=function(s){if(s.cache&&s.cache.allComposites)return s.cache.allComposites;for(var l=[].concat(s.composites),v=0;v<s.composites.length;v++)l=l.concat(a.allComposites(s.composites[v]));return s.cache&&(s.cache.allComposites=l),l},a.get=function(s,l,v){var d,g;switch(v){case"body":d=a.allBodies(s);break;case"constraint":d=a.allConstraints(s);break;case"composite":d=a.allComposites(s).concat(s);break}return d?(g=d.filter(function(y){return y.id.toString()===l.toString()}),g.length===0?null:g[0]):null},a.move=function(s,l,v){return a.remove(s,l),a.add(v,l),s},a.rebase=function(s){for(var l=a.allBodies(s).concat(a.allConstraints(s)).concat(a.allComposites(s)),v=0;v<l.length;v++)l[v].id=c.nextId();return s},a.translate=function(s,l,v){for(var d=v?a.allBodies(s):s.bodies,g=0;g<d.length;g++)h.translate(d[g],l);return s},a.rotate=function(s,l,v,d){for(var g=Math.cos(l),y=Math.sin(l),S=d?a.allBodies(s):s.bodies,T=0;T<S.length;T++){var w=S[T],P=w.position.x-v.x,A=w.position.y-v.y;h.setPosition(w,{x:v.x+(P*g-A*y),y:v.y+(P*y+A*g)}),h.rotate(w,l)}return s},a.scale=function(s,l,v,d,g){for(var y=g?a.allBodies(s):s.bodies,S=0;S<y.length;S++){var T=y[S],w=T.position.x-d.x,P=T.position.y-d.y;h.setPosition(T,{x:d.x+w*l,y:d.y+P*v}),h.scale(T,l,v)}return s},a.bounds=function(s){for(var l=a.allBodies(s),v=[],d=0;d<l.length;d+=1){var g=l[d];v.push(g.bounds.min,g.bounds.max)}return u.create(v)},a.wrap=function(s,l){var v=u.wrap(a.bounds(s),l);return v&&a.translate(s,v),v}})()},4372:(o,E,e)=>{var a={};o.exports=a;var x=e(69351);(function(){a.create=x.create,a.add=x.add,a.remove=x.remove,a.clear=x.clear,a.addComposite=x.addComposite,a.addBody=x.addBody,a.addConstraint=x.addConstraint})()},52284:(o,E,e)=>{var a={};o.exports=a;var x=e(41598),c=e(4506);(function(){var u=[],h={overlap:0,axis:null},s={overlap:0,axis:null};a.create=function(l,v){return{pair:null,collided:!1,bodyA:l,bodyB:v,parentA:l.parent,parentB:v.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(l,v,d){if(a._overlapAxes(h,l.vertices,v.vertices,l.axes),h.overlap<=0||(a._overlapAxes(s,v.vertices,l.vertices,v.axes),s.overlap<=0))return null;var g=d&&d.table[c.id(l,v)],y;g?y=g.collision:(y=a.create(l,v),y.collided=!0,y.bodyA=l.id<v.id?l:v,y.bodyB=l.id<v.id?v:l,y.parentA=y.bodyA.parent,y.parentB=y.bodyB.parent),l=y.bodyA,v=y.bodyB;var S;h.overlap<s.overlap?S=h:S=s;var T=y.normal,w=y.tangent,P=y.penetration,A=y.supports,R=S.overlap,I=S.axis,M=I.x,L=I.y,N=v.position.x-l.position.x,G=v.position.y-l.position.y;M*N+L*G>=0&&(M=-M,L=-L),T.x=M,T.y=L,w.x=-L,w.y=M,P.x=M*R,P.y=L*R,y.depth=R;var D=a._findSupports(l,v,T,1),B=0;if(x.contains(l.vertices,D[0])&&(A[B++]=D[0]),x.contains(l.vertices,D[1])&&(A[B++]=D[1]),B<2){var $=a._findSupports(v,l,T,-1);x.contains(v.vertices,$[0])&&(A[B++]=$[0]),B<2&&x.contains(v.vertices,$[1])&&(A[B++]=$[1])}return B===0&&(A[B++]=D[0]),y.supportCount=B,y},a._overlapAxes=function(l,v,d,g){var y=v.length,S=d.length,T=v[0].x,w=v[0].y,P=d[0].x,A=d[0].y,R=g.length,I=Number.MAX_VALUE,M=0,L,N,G,D,B,$;for(B=0;B<R;B++){var k=g[B],X=k.x,Y=k.y,Z=T*X+w*Y,Q=P*X+A*Y,j=Z,K=Q;for($=1;$<y;$+=1)D=v[$].x*X+v[$].y*Y,D>j?j=D:D<Z&&(Z=D);for($=1;$<S;$+=1)D=d[$].x*X+d[$].y*Y,D>K?K=D:D<Q&&(Q=D);if(N=j-Q,G=K-Z,L=N<G?N:G,L<I&&(I=L,M=B,L<=0))break}l.axis=g[M],l.overlap=I},a._findSupports=function(l,v,d,g){var y=v.vertices,S=y.length,T=l.position.x,w=l.position.y,P=d.x*g,A=d.y*g,R=y[0],I=R,M=P*(T-I.x)+A*(w-I.y),L,N,G;for(G=1;G<S;G+=1)I=y[G],N=P*(T-I.x)+A*(w-I.y),N<M&&(M=N,R=I);return L=y[(S+R.index-1)%S],M=P*(T-L.x)+A*(w-L.y),I=y[(R.index+1)%S],P*(T-I.x)+A*(w-I.y)<M?(u[0]=R,u[1]=I,u):(u[0]=R,u[1]=L,u)}})()},43424:o=>{var E={};o.exports=E,function(){E.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},81388:(o,E,e)=>{var a={};o.exports=a;var x=e(53402),c=e(52284);(function(){a.create=function(u){var h={bodies:[],collisions:[],pairs:null};return x.extend(h,u)},a.setBodies=function(u,h){u.bodies=h.slice(0)},a.clear=function(u){u.bodies=[],u.collisions=[]},a.collisions=function(u){var h=u.pairs,s=u.bodies,l=s.length,v=a.canCollide,d=c.collides,g=u.collisions,y=0,S,T;for(s.sort(a._compareBoundsX),S=0;S<l;S++){var w=s[S],P=w.bounds,A=w.bounds.max.x,R=w.bounds.max.y,I=w.bounds.min.y,M=w.isStatic||w.isSleeping,L=w.parts.length,N=L===1;for(T=S+1;T<l;T++){var G=s[T],D=G.bounds;if(D.min.x>A)break;if(!(R<D.min.y||I>D.max.y)&&!(M&&(G.isStatic||G.isSleeping))&&v(w.collisionFilter,G.collisionFilter)){var B=G.parts.length;if(N&&B===1){var $=d(w,G,h);$&&(g[y++]=$)}else for(var k=L>1?1:0,X=B>1?1:0,Y=k;Y<L;Y++)for(var Z=w.parts[Y],P=Z.bounds,Q=X;Q<B;Q++){var j=G.parts[Q],D=j.bounds;if(!(P.min.x>D.max.x||P.max.x<D.min.x||P.max.y<D.min.y||P.min.y>D.max.y)){var $=d(Z,j,h);$&&(g[y++]=$)}}}}}return g.length!==y&&(g.length=y),g},a.canCollide=function(u,h){return u.group===h.group&&u.group!==0?u.group>0:(u.mask&h.category)!==0&&(h.mask&u.category)!==0},a._compareBoundsX=function(u,h){return u.bounds.min.x-h.bounds.min.x}})()},4506:(o,E,e)=>{var a={};o.exports=a;var x=e(43424);(function(){a.create=function(c,u){var h=c.bodyA,s=c.bodyB,l={id:a.id(h,s),bodyA:h,bodyB:s,collision:c,contacts:[x.create(),x.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||s.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(l,c,u),l},a.update=function(c,u,h){var s=u.supports,l=u.supportCount,v=c.contacts,d=u.parentA,g=u.parentB;c.isActive=!0,c.timeUpdated=h,c.collision=u,c.separation=u.depth,c.inverseMass=d.inverseMass+g.inverseMass,c.friction=d.friction<g.friction?d.friction:g.friction,c.frictionStatic=d.frictionStatic>g.frictionStatic?d.frictionStatic:g.frictionStatic,c.restitution=d.restitution>g.restitution?d.restitution:g.restitution,c.slop=d.slop>g.slop?d.slop:g.slop,c.contactCount=l,u.pair=c;var y=s[0],S=v[0],T=s[1],w=v[1];(w.vertex===y||S.vertex===T)&&(v[1]=S,v[0]=S=w,w=v[1]),S.vertex=y,w.vertex=T},a.setActive=function(c,u,h){u?(c.isActive=!0,c.timeUpdated=h):(c.isActive=!1,c.contactCount=0)},a.id=function(c,u){return c.id<u.id?c.id.toString(36)+":"+u.id.toString(36):u.id.toString(36)+":"+c.id.toString(36)}})()},99561:(o,E,e)=>{var a={};o.exports=a;var x=e(4506),c=e(53402);(function(){a.create=function(u){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},a.update=function(u,h,s){var l=x.update,v=x.create,d=x.setActive,g=u.table,y=u.list,S=y.length,T=S,w=u.collisionStart,P=u.collisionEnd,A=u.collisionActive,R=h.length,I=0,M=0,L=0,N,G,D;for(D=0;D<R;D++)N=h[D],G=N.pair,G?(G.isActive&&(A[L++]=G),l(G,N,s)):(G=v(N,s),g[G.id]=G,w[I++]=G,y[T++]=G);for(T=0,S=y.length,D=0;D<S;D++)G=y[D],G.timeUpdated>=s?y[T++]=G:(d(G,!1,s),G.collision.bodyA.sleepCounter>0&&G.collision.bodyB.sleepCounter>0?y[T++]=G:(P[M++]=G,delete g[G.id]));y.length!==T&&(y.length=T),w.length!==I&&(w.length=I),P.length!==M&&(P.length=M),A.length!==L&&(A.length=L)},a.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},73296:(o,E,e)=>{var a={};o.exports=a;var x=e(31725),c=e(52284),u=e(15647),h=e(66280),s=e(41598);(function(){a.collides=function(l,v){for(var d=[],g=v.length,y=l.bounds,S=c.collides,T=u.overlaps,w=0;w<g;w++){var P=v[w],A=P.parts.length,R=A===1?0:1;if(l!==P&&T(P.bounds,y))for(var I=R;I<A;I++){var M=P.parts[I];if(T(M.bounds,y)){var L=S(M,l);if(L){d.push(L);break}}}}return d},a.ray=function(l,v,d,g){g=g||1e-100;for(var y=x.angle(v,d),S=x.magnitude(x.sub(v,d)),T=(d.x+v.x)*.5,w=(d.y+v.y)*.5,P=h.rectangle(T,w,S,g,{angle:y}),A=a.collides(P,l),R=0;R<A.length;R+=1){var I=A[R];I.body=I.bodyB=I.bodyA}return A},a.region=function(l,v,d){for(var g=[],y=0;y<l.length;y++){var S=l[y],T=u.overlaps(S.bounds,v);(T&&!d||!T&&d)&&g.push(S)}return g},a.point=function(l,v){for(var d=[],g=0;g<l.length;g++){var y=l[g];if(u.contains(y.bounds,v))for(var S=y.parts.length===1?0:1;S<y.parts.length;S++){var T=y.parts[S];if(u.contains(T.bounds,v)&&s.contains(T.vertices,v)){d.push(y);break}}}return d}})()},66272:(o,E,e)=>{var a={};o.exports=a;var x=e(41598),c=e(53402),u=e(15647);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(h){var s,l,v,d=h.length;for(s=0;s<d;s++)l=h[s],l.isActive&&(v=l.contactCount,l.collision.parentA.totalContacts+=v,l.collision.parentB.totalContacts+=v)},a.solvePosition=function(h,s,l){var v,d,g,y,S,T,w,P,A=a._positionDampen*(l||1),R=c.clamp(s/c._baseDelta,0,1),I=h.length;for(v=0;v<I;v++)d=h[v],!(!d.isActive||d.isSensor)&&(g=d.collision,y=g.parentA,S=g.parentB,T=g.normal,d.separation=g.depth+T.x*(S.positionImpulse.x-y.positionImpulse.x)+T.y*(S.positionImpulse.y-y.positionImpulse.y));for(v=0;v<I;v++)d=h[v],!(!d.isActive||d.isSensor)&&(g=d.collision,y=g.parentA,S=g.parentB,T=g.normal,P=d.separation-d.slop*R,(y.isStatic||S.isStatic)&&(P*=2),y.isStatic||y.isSleeping||(w=A/y.totalContacts,y.positionImpulse.x+=T.x*P*w,y.positionImpulse.y+=T.y*P*w),S.isStatic||S.isSleeping||(w=A/S.totalContacts,S.positionImpulse.x-=T.x*P*w,S.positionImpulse.y-=T.y*P*w))},a.postSolvePosition=function(h){for(var s=a._positionWarming,l=h.length,v=x.translate,d=u.update,g=0;g<l;g++){var y=h[g],S=y.positionImpulse,T=S.x,w=S.y,P=y.velocity;if(y.totalContacts=0,T!==0||w!==0){for(var A=0;A<y.parts.length;A++){var R=y.parts[A];v(R.vertices,S),d(R.bounds,R.vertices,P),R.position.x+=T,R.position.y+=w}y.positionPrev.x+=T,y.positionPrev.y+=w,T*P.x+w*P.y<0?(S.x=0,S.y=0):(S.x*=s,S.y*=s)}}},a.preSolveVelocity=function(h){var s=h.length,l,v;for(l=0;l<s;l++){var d=h[l];if(!(!d.isActive||d.isSensor)){var g=d.contacts,y=d.contactCount,S=d.collision,T=S.parentA,w=S.parentB,P=S.normal,A=S.tangent;for(v=0;v<y;v++){var R=g[v],I=R.vertex,M=R.normalImpulse,L=R.tangentImpulse;if(M!==0||L!==0){var N=P.x*M+A.x*L,G=P.y*M+A.y*L;T.isStatic||T.isSleeping||(T.positionPrev.x+=N*T.inverseMass,T.positionPrev.y+=G*T.inverseMass,T.anglePrev+=T.inverseInertia*((I.x-T.position.x)*G-(I.y-T.position.y)*N)),w.isStatic||w.isSleeping||(w.positionPrev.x-=N*w.inverseMass,w.positionPrev.y-=G*w.inverseMass,w.anglePrev-=w.inverseInertia*((I.x-w.position.x)*G-(I.y-w.position.y)*N))}}}}},a.solveVelocity=function(h,s){var l=s/c._baseDelta,v=l*l,d=v*l,g=-a._restingThresh*l,y=a._restingThreshTangent,S=a._frictionNormalMultiplier*l,T=a._frictionMaxStatic,w=h.length,P,A,R,I;for(R=0;R<w;R++){var M=h[R];if(!(!M.isActive||M.isSensor)){var L=M.collision,N=L.parentA,G=L.parentB,D=L.normal.x,B=L.normal.y,$=L.tangent.x,k=L.tangent.y,X=M.inverseMass,Y=M.friction*M.frictionStatic*S,Z=M.contacts,Q=M.contactCount,j=1/Q,K=N.position.x-N.positionPrev.x,W=N.position.y-N.positionPrev.y,V=N.angle-N.anglePrev,J=G.position.x-G.positionPrev.x,ee=G.position.y-G.positionPrev.y,te=G.angle-G.anglePrev;for(I=0;I<Q;I++){var ne=Z[I],se=ne.vertex,ae=se.x-N.position.x,ue=se.y-N.position.y,de=se.x-G.position.x,fe=se.y-G.position.y,ye=K-ue*V,ve=W+ae*V,Se=J-fe*te,Ie=ee+de*te,Ae=ye-Se,Oe=ve-Ie,xe=D*Ae+B*Oe,be=$*Ae+k*Oe,Pe=M.separation+xe,Ge=Math.min(Pe,1);Ge=Pe<0?0:Ge;var ze=Ge*Y;be<-ze||be>ze?(A=be>0?be:-be,P=M.friction*(be>0?1:-1)*d,P<-A?P=-A:P>A&&(P=A)):(P=be,A=T);var je=ae*B-ue*D,$e=de*B-fe*D,ke=j/(X+N.inverseInertia*je*je+G.inverseInertia*$e*$e),Xe=(1+M.restitution)*xe*ke;if(P*=ke,xe<g)ne.normalImpulse=0;else{var Je=ne.normalImpulse;ne.normalImpulse+=Xe,ne.normalImpulse>0&&(ne.normalImpulse=0),Xe=ne.normalImpulse-Je}if(be<-y||be>y)ne.tangentImpulse=0;else{var We=ne.tangentImpulse;ne.tangentImpulse+=P,ne.tangentImpulse<-A&&(ne.tangentImpulse=-A),ne.tangentImpulse>A&&(ne.tangentImpulse=A),P=ne.tangentImpulse-We}var Ze=D*Xe+$*P,Qe=B*Xe+k*P;N.isStatic||N.isSleeping||(N.positionPrev.x+=Ze*N.inverseMass,N.positionPrev.y+=Qe*N.inverseMass,N.anglePrev+=(ae*Qe-ue*Ze)*N.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=Ze*G.inverseMass,G.positionPrev.y-=Qe*G.inverseMass,G.anglePrev-=(de*Qe-fe*Ze)*G.inverseInertia)}}}}})()},48140:(o,E,e)=>{var a={};o.exports=a;var x=e(41598),c=e(31725),u=e(53614),h=e(15647),s=e(66615),l=e(53402);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(v){var d=v;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var g=d.bodyA?c.add(d.bodyA.position,d.pointA):d.pointA,y=d.bodyB?c.add(d.bodyB.position,d.pointB):d.pointB,S=c.magnitude(c.sub(g,y));d.length=typeof d.length<"u"?d.length:S,d.id=d.id||l.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var T={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(T.type="pin",T.anchors=!1):d.stiffness<.9&&(T.type="spring"),d.render=l.extend(T,d.render),d},a.preSolveAll=function(v){for(var d=0;d<v.length;d+=1){var g=v[d],y=g.constraintImpulse;g.isStatic||y.x===0&&y.y===0&&y.angle===0||(g.position.x+=y.x,g.position.y+=y.y,g.angle+=y.angle)}},a.solveAll=function(v,d){for(var g=l.clamp(d/l._baseDelta,0,1),y=0;y<v.length;y+=1){var S=v[y],T=!S.bodyA||S.bodyA&&S.bodyA.isStatic,w=!S.bodyB||S.bodyB&&S.bodyB.isStatic;(T||w)&&a.solve(v[y],g)}for(y=0;y<v.length;y+=1)S=v[y],T=!S.bodyA||S.bodyA&&S.bodyA.isStatic,w=!S.bodyB||S.bodyB&&S.bodyB.isStatic,!T&&!w&&a.solve(v[y],g)},a.solve=function(v,d){var g=v.bodyA,y=v.bodyB,S=v.pointA,T=v.pointB;if(!(!g&&!y)){g&&!g.isStatic&&(c.rotate(S,g.angle-v.angleA,S),v.angleA=g.angle),y&&!y.isStatic&&(c.rotate(T,y.angle-v.angleB,T),v.angleB=y.angle);var w=S,P=T;if(g&&(w=c.add(g.position,S)),y&&(P=c.add(y.position,T)),!(!w||!P)){var A=c.sub(w,P),R=c.magnitude(A);R<a._minLength&&(R=a._minLength);var I=(R-v.length)/R,M=v.stiffness>=1||v.length===0,L=M?v.stiffness*d:v.stiffness*d*d,N=v.damping*d,G=c.mult(A,I*L),D=(g?g.inverseMass:0)+(y?y.inverseMass:0),B=(g?g.inverseInertia:0)+(y?y.inverseInertia:0),$=D+B,k,X,Y,Z,Q;if(N>0){var j=c.create();Y=c.div(A,R),Q=c.sub(y&&c.sub(y.position,y.positionPrev)||j,g&&c.sub(g.position,g.positionPrev)||j),Z=c.dot(Y,Q)}g&&!g.isStatic&&(X=g.inverseMass/D,g.constraintImpulse.x-=G.x*X,g.constraintImpulse.y-=G.y*X,g.position.x-=G.x*X,g.position.y-=G.y*X,N>0&&(g.positionPrev.x-=N*Y.x*Z*X,g.positionPrev.y-=N*Y.y*Z*X),k=c.cross(S,G)/$*a._torqueDampen*g.inverseInertia*(1-v.angularStiffness),g.constraintImpulse.angle-=k,g.angle-=k),y&&!y.isStatic&&(X=y.inverseMass/D,y.constraintImpulse.x+=G.x*X,y.constraintImpulse.y+=G.y*X,y.position.x+=G.x*X,y.position.y+=G.y*X,N>0&&(y.positionPrev.x+=N*Y.x*Z*X,y.positionPrev.y+=N*Y.y*Z*X),k=c.cross(T,G)/$*a._torqueDampen*y.inverseInertia*(1-v.angularStiffness),y.constraintImpulse.angle+=k,y.angle+=k)}}},a.postSolveAll=function(v){for(var d=0;d<v.length;d++){var g=v[d],y=g.constraintImpulse;if(!(g.isStatic||y.x===0&&y.y===0&&y.angle===0)){u.set(g,!1);for(var S=0;S<g.parts.length;S++){var T=g.parts[S];x.translate(T.vertices,y),S>0&&(T.position.x+=y.x,T.position.y+=y.y),y.angle!==0&&(x.rotate(T.vertices,y.angle,g.position),s.rotate(T.axes,y.angle),S>0&&c.rotateAbout(T.position,y.angle,g.position,T.position)),h.update(T.bounds,T.vertices,g.velocity)}y.angle*=a._warming,y.x*=a._warming,y.y*=a._warming}}},a.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),y:(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0)}},a.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),y:(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0)}},a.currentLength=function(v){var d=(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),g=(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0),y=(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),S=(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0),T=d-y,w=g-S;return Math.sqrt(T*T+w*w)}})()},53402:(o,E,e)=>{var a={};o.exports=a,function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(c,u){var h,s;typeof u=="boolean"?(h=2,s=u):(h=1,s=!0);for(var l=h;l<arguments.length;l++){var v=arguments[l];if(v)for(var d in v)s&&v[d]&&v[d].constructor===Object&&(!c[d]||c[d].constructor===Object)?(c[d]=c[d]||{},a.extend(c[d],s,v[d])):c[d]=v[d]}return c},a.clone=function(c,u){return a.extend({},u,c)},a.keys=function(c){if(Object.keys)return Object.keys(c);var u=[];for(var h in c)u.push(h);return u},a.values=function(c){var u=[];if(Object.keys){for(var h=Object.keys(c),s=0;s<h.length;s++)u.push(c[h[s]]);return u}for(var l in c)u.push(c[l]);return u},a.get=function(c,u,h,s){u=u.split(".").slice(h,s);for(var l=0;l<u.length;l+=1)c=c[u[l]];return c},a.set=function(c,u,h,s,l){var v=u.split(".").slice(s,l);return a.get(c,u,0,-1)[v[v.length-1]]=h,h},a.shuffle=function(c){for(var u=c.length-1;u>0;u--){var h=Math.floor(a.random()*(u+1)),s=c[u];c[u]=c[h],c[h]=s}return c},a.choose=function(c){return c[Math.floor(a.random()*c.length)]},a.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},a.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},a.isFunction=function(c){return typeof c=="function"},a.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},a.isString=function(c){return toString.call(c)==="[object String]"},a.clamp=function(c,u,h){return c<u?u:c>h?h:c},a.sign=function(c){return c<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(c,u){return c=typeof c<"u"?c:0,u=typeof u<"u"?u:1,c+x()*(u-c)};var x=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[c]||(a.warn(c),a._warnedOnce[c]=!0)},a.deprecated=function(c,u,h){c[u]=a.chain(function(){a.warnOnce("🔅 deprecated 🔅",h)},c[u])},a.nextId=function(){return a._nextId++},a.indexOf=function(c,u){if(c.indexOf)return c.indexOf(u);for(var h=0;h<c.length;h++)if(c[h]===u)return h;return-1},a.map=function(c,u){if(c.map)return c.map(u);for(var h=[],s=0;s<c.length;s+=1)h.push(u(c[s]));return h},a.topologicalSort=function(c){var u=[],h=[],s=[];for(var l in c)!h[l]&&!s[l]&&a._topologicalSort(l,h,s,c,u);return u},a._topologicalSort=function(c,u,h,s,l){var v=s[c]||[];h[c]=!0;for(var d=0;d<v.length;d+=1){var g=v[d];h[g]||u[g]||a._topologicalSort(g,u,h,s,l)}h[c]=!1,u[c]=!0,l.push(c)},a.chain=function(){for(var c=[],u=0;u<arguments.length;u+=1){var h=arguments[u];h._chained?c.push.apply(c,h._chained):c.push(h)}var s=function(){for(var l,v=new Array(arguments.length),d=0,g=arguments.length;d<g;d++)v[d]=arguments[d];for(d=0;d<c.length;d+=1){var y=c[d].apply(l,v);typeof y<"u"&&(l=y)}return l};return s._chained=c,s},a.chainPathBefore=function(c,u,h){return a.set(c,u,a.chain(h,a.get(c,u)))},a.chainPathAfter=function(c,u,h){return a.set(c,u,a.chain(a.get(c,u),h))},a.setDecomp=function(c){a._decomp=c},a.getDecomp=function(){var c=a._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof e.g<"u"&&(c=e.g.decomp)}catch{c=null}return c}}()},48413:(o,E,e)=>{var a={};o.exports=a;var x=e(53614),c=e(66272),u=e(81388),h=e(99561),s=e(35810),l=e(69351),v=e(48140),d=e(53402),g=e(22562);(function(){a._deltaMax=16.666666666666668,a.create=function(y){y=y||{};var S={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},T=d.extend(S,y);return T.world=y.world||l.create({label:"World"}),T.pairs=y.pairs||h.create(),T.detector=y.detector||u.create(),T.detector.pairs=T.pairs,T.grid={buckets:[]},T.world.gravity=T.gravity,T.broadphase=T.grid,T.metrics={},T},a.update=function(y,S){var T=d.now(),w=y.world,P=y.detector,A=y.pairs,R=y.timing,I=R.timestamp,M;S>a._deltaMax&&d.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",a._deltaMax.toFixed(3),"ms."),S=typeof S<"u"?S:d._baseDelta,S*=R.timeScale,R.timestamp+=S,R.lastDelta=S;var L={timestamp:R.timestamp,delta:S};s.trigger(y,"beforeUpdate",L);var N=l.allBodies(w),G=l.allConstraints(w),D=l.allComposites(w);for(w.isModified&&(u.setBodies(P,N),l.setModified(w,!1,!1,!0)),y.enableSleeping&&x.update(N,S),a._bodiesApplyGravity(N,y.gravity),a.wrap(N,D),a.attractors(N),S>0&&a._bodiesUpdate(N,S),s.trigger(y,"beforeSolve",L),v.preSolveAll(N),M=0;M<y.constraintIterations;M++)v.solveAll(G,S);v.postSolveAll(N);var B=u.collisions(P);h.update(A,B,I),y.enableSleeping&&x.afterCollisions(A.list),A.collisionStart.length>0&&s.trigger(y,"collisionStart",{pairs:A.collisionStart,timestamp:R.timestamp,delta:S});var $=d.clamp(20/y.positionIterations,0,1);for(c.preSolvePosition(A.list),M=0;M<y.positionIterations;M++)c.solvePosition(A.list,S,$);for(c.postSolvePosition(N),v.preSolveAll(N),M=0;M<y.constraintIterations;M++)v.solveAll(G,S);for(v.postSolveAll(N),c.preSolveVelocity(A.list),M=0;M<y.velocityIterations;M++)c.solveVelocity(A.list,S);return a._bodiesUpdateVelocities(N),A.collisionActive.length>0&&s.trigger(y,"collisionActive",{pairs:A.collisionActive,timestamp:R.timestamp,delta:S}),A.collisionEnd.length>0&&s.trigger(y,"collisionEnd",{pairs:A.collisionEnd,timestamp:R.timestamp,delta:S}),a._bodiesClearForces(N),s.trigger(y,"afterUpdate",L),y.timing.lastElapsed=d.now()-T,y},a.merge=function(y,S){if(d.extend(y,S),S.world){y.world=S.world,a.clear(y);for(var T=l.allBodies(y.world),w=0;w<T.length;w++){var P=T[w];x.set(P,!1),P.id=d.nextId()}}},a.clear=function(y){h.clear(y.pairs),u.clear(y.detector)},a._bodiesClearForces=function(y){for(var S=y.length,T=0;T<S;T++){var w=y[T];w.force.x=0,w.force.y=0,w.torque=0}},a._bodiesApplyGravity=function(y,S){var T=typeof S.scale<"u"?S.scale:.001,w=y.length;if(!(S.x===0&&S.y===0||T===0))for(var P=0;P<w;P++){var A=y[P];A.ignoreGravity||A.isStatic||A.isSleeping||(A.force.y+=A.mass*S.y*T,A.force.x+=A.mass*S.x*T)}},a._bodiesUpdate=function(y,S){for(var T=y.length,w=0;w<T;w++){var P=y[w];P.isStatic||P.isSleeping||g.update(P,S)}},a._bodiesUpdateVelocities=function(y){for(var S=y.length,T=0;T<S;T++)g.updateVelocities(y[T])},a.wrap=function(y,S){for(var T=0;T<y.length;T+=1){var w=y[T];w.wrapBounds!==null&&g.wrap(w,w.wrapBounds)}for(T=0;T<S.length;T+=1){var P=S[T];P.wrapBounds!==null&&l.wrap(P,P.wrapBounds)}},a.attractors=function(y){for(var S=0;S<y.length;S++){var T=y[S],w=T.attractors;if(w&&w.length>0)for(var P=0;P<y.length;P++){var A=y[P];if(S!==P)for(var R=0;R<w.length;R++){var I=w[R],M=I;d.isFunction(I)&&(M=I(T,A)),M&&g.applyForce(A,A.position,M)}}}}})()},35810:(o,E,e)=>{var a={};o.exports=a;var x=e(53402);(function(){a.on=function(c,u,h){for(var s=u.split(" "),l,v=0;v<s.length;v++)l=s[v],c.events=c.events||{},c.events[l]=c.events[l]||[],c.events[l].push(h);return h},a.off=function(c,u,h){if(!u){c.events={};return}typeof u=="function"&&(h=u,u=x.keys(c.events).join(" "));for(var s=u.split(" "),l=0;l<s.length;l++){var v=c.events[s[l]],d=[];if(h&&v)for(var g=0;g<v.length;g++)v[g]!==h&&d.push(v[g]);c.events[s[l]]=d}},a.trigger=function(c,u,h){var s,l,v,d,g=c.events;if(g&&x.keys(g).length>0){h||(h={}),s=u.split(" ");for(var y=0;y<s.length;y++)if(l=s[y],v=g[l],v){d=x.clone(h,!1),d.name=l,d.source=c;for(var S=0;S<v.length;S++)v[S].apply(c,[d])}}}})()},6790:(o,E,e)=>{var a={};o.exports=a;var x=e(73832),c=e(53402);(function(){a.name="matter-js",a.version="0.20.0",a.uses=[],a.used=[],a.use=function(){x.use(a,Array.prototype.slice.call(arguments))},a.before=function(u,h){return u=u.replace(/^Matter./,""),c.chainPathBefore(a,u,h)},a.after=function(u,h){return u=u.replace(/^Matter./,""),c.chainPathAfter(a,u,h)}})()},73832:(o,E,e)=>{var a={};o.exports=a;var x=e(53402);(function(){a._registry={},a.register=function(c){if(a.isPlugin(c)||x.warn("Plugin.register:",a.toString(c),"does not implement all required fields."),c.name in a._registry){var u=a._registry[c.name],h=a.versionParse(c.version).number,s=a.versionParse(u.version).number;h>s?(x.warn("Plugin.register:",a.toString(u),"was upgraded to",a.toString(c)),a._registry[c.name]=c):h<s?x.warn("Plugin.register:",a.toString(u),"can not be downgraded to",a.toString(c)):c!==u&&x.warn("Plugin.register:",a.toString(c),"is already registered to different plugin object")}else a._registry[c.name]=c;return c},a.resolve=function(c){return a._registry[a.dependencyParse(c).name]},a.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},a.isPlugin=function(c){return c&&c.name&&c.version&&c.install},a.isUsed=function(c,u){return c.used.indexOf(u)>-1},a.isFor=function(c,u){var h=c.for&&a.dependencyParse(c.for);return!c.for||u.name===h.name&&a.versionSatisfies(u.version,h.range)},a.use=function(c,u){if(c.uses=(c.uses||[]).concat(u||[]),c.uses.length===0){x.warn("Plugin.use:",a.toString(c),"does not specify any dependencies to install.");return}for(var h=a.dependencies(c),s=x.topologicalSort(h),l=[],v=0;v<s.length;v+=1)if(s[v]!==c.name){var d=a.resolve(s[v]);if(!d){l.push("❌ "+s[v]);continue}a.isUsed(c,d.name)||(a.isFor(d,c)||(x.warn("Plugin.use:",a.toString(d),"is for",d.for,"but installed on",a.toString(c)+"."),d._warned=!0),d.install?d.install(c):(x.warn("Plugin.use:",a.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(l.push("🔶 "+a.toString(d)),delete d._warned):l.push("✅ "+a.toString(d)),c.used.push(d.name))}l.length>0&&!d.silent&&x.info(l.join("  "))},a.dependencies=function(c,u){var h=a.dependencyParse(c),s=h.name;if(u=u||{},!(s in u)){c=a.resolve(c)||c,u[s]=x.map(c.uses||[],function(v){a.isPlugin(v)&&a.register(v);var d=a.dependencyParse(v),g=a.resolve(v);return g&&!a.versionSatisfies(g.version,d.range)?(x.warn("Plugin.dependencies:",a.toString(g),"does not satisfy",a.toString(d),"used by",a.toString(h)+"."),g._warned=!0,c._warned=!0):g||(x.warn("Plugin.dependencies:",a.toString(v),"used by",a.toString(h),"could not be resolved."),c._warned=!0),d.name});for(var l=0;l<u[s].length;l+=1)a.dependencies(u[s][l],u);return u}},a.dependencyParse=function(c){if(x.isString(c)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(c)||x.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},a.versionParse=function(c){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(c)||x.warn("Plugin.versionParse:",c,"is not a valid version or range.");var h=u.exec(c),s=Number(h[4]),l=Number(h[5]),v=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:c,operator:h[1]||h[2]||"",major:s,minor:l,patch:v,parts:[s,l,v],prerelease:h[7],number:s*1e8+l*1e4+v}},a.versionSatisfies=function(c,u){u=u||"*";var h=a.versionParse(u),s=a.versionParse(c);if(h.isRange){if(h.operator==="*"||c==="*")return!0;if(h.operator===">")return s.number>h.number;if(h.operator===">=")return s.number>=h.number;if(h.operator==="~")return s.major===h.major&&s.minor===h.minor&&s.patch>=h.patch;if(h.operator==="^")return h.major>0?s.major===h.major&&s.number>=h.number:h.minor>0?s.minor===h.minor&&s.patch>=h.patch:s.patch===h.patch}return c===u||c==="*"}})()},13037:(o,E,e)=>{var a={};o.exports=a;var x=e(35810),c=e(48413),u=e(53402);(function(){a._maxFrameDelta=66.66666666666667,a._frameDeltaFallback=16.666666666666668,a._timeBufferMargin=1.5,a._elapsedNextEstimate=1,a._smoothingLowerBound=.1,a._smoothingUpperBound=.9,a.create=function(s){var l={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},v=u.extend(l,s);return v.fps=0,v},a.run=function(s,l){return s.timeBuffer=a._frameDeltaFallback,function v(d){s.frameRequestId=a._onNextFrame(s,v),d&&s.enabled&&a.tick(s,l,d)}(),s},a.tick=function(s,l,v){var d=u.now(),g=s.delta,y=0,S=v-s.timeLastTick;if((!S||!s.timeLastTick||S>Math.max(a._maxFrameDelta,s.maxFrameTime))&&(S=s.frameDelta||a._frameDeltaFallback),s.frameDeltaSmoothing){s.frameDeltaHistory.push(S),s.frameDeltaHistory=s.frameDeltaHistory.slice(-s.frameDeltaHistorySize);var T=s.frameDeltaHistory.slice(0).sort(),w=s.frameDeltaHistory.slice(T.length*a._smoothingLowerBound,T.length*a._smoothingUpperBound),P=h(w);S=P||S}s.frameDeltaSnapping&&(S=1e3/Math.round(1e3/S)),s.frameDelta=S,s.timeLastTick=v,s.timeBuffer+=s.frameDelta,s.timeBuffer=u.clamp(s.timeBuffer,0,s.frameDelta+g*a._timeBufferMargin),s.lastUpdatesDeferred=0;var A=s.maxUpdates||Math.ceil(s.maxFrameTime/g),R={timestamp:l.timing.timestamp};x.trigger(s,"beforeTick",R),x.trigger(s,"tick",R);for(var I=u.now();g>0&&s.timeBuffer>=g*a._timeBufferMargin;){x.trigger(s,"beforeUpdate",R),c.update(l,g),x.trigger(s,"afterUpdate",R),s.timeBuffer-=g,y+=1;var M=u.now()-d,L=u.now()-I,N=M+a._elapsedNextEstimate*L/y;if(y>=A||N>s.maxFrameTime){s.lastUpdatesDeferred=Math.round(Math.max(0,s.timeBuffer/g-a._timeBufferMargin));break}}l.timing.lastUpdatesPerFrame=y,x.trigger(s,"afterTick",R),s.frameDeltaHistory.length>=100&&(s.lastUpdatesDeferred&&Math.round(s.frameDelta/g)>A?u.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):s.lastUpdatesDeferred&&u.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof s.isFixed<"u"&&u.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(s.deltaMin||s.deltaMax)&&u.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),s.fps!==0&&u.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},a.stop=function(s){a._cancelNextFrame(s)},a._onNextFrame=function(s,l){if(typeof window<"u"&&window.requestAnimationFrame)s.frameRequestId=window.requestAnimationFrame(l);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return s.frameRequestId},a._cancelNextFrame=function(s){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(s.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(s){for(var l=0,v=s.length,d=0;d<v;d+=1)l+=s[d];return l/v||0}})()},53614:(o,E,e)=>{var a={};o.exports=a;var x=e(22562),c=e(35810),u=e(53402);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(h,s){for(var l=s/u._baseDelta,v=a._motionSleepThreshold,d=0;d<h.length;d++){var g=h[d],y=x.getSpeed(g),S=x.getAngularSpeed(g),T=y*y+S*S;if(g.force.x!==0||g.force.y!==0){a.set(g,!1);continue}var w=Math.min(g.motion,T),P=Math.max(g.motion,T);g.motion=a._minBias*w+(1-a._minBias)*P,g.sleepThreshold>0&&g.motion<v?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold/l&&a.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},a.afterCollisions=function(h){for(var s=a._motionSleepThreshold,l=0;l<h.length;l++){var v=h[l];if(v.isActive){var d=v.collision,g=d.bodyA.parent,y=d.bodyB.parent;if(!(g.isSleeping&&y.isSleeping||g.isStatic||y.isStatic)&&(g.isSleeping||y.isSleeping)){var S=g.isSleeping&&!g.isStatic?g:y,T=S===g?y:g;!S.isStatic&&T.motion>s&&a.set(S,!1)}}}},a.set=function(h,s){var l=h.isSleeping;s?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,l||c.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,l&&c.trigger(h,"sleepEnd"))}})()},66280:(o,E,e)=>{var a={};o.exports=a;var x=e(41598),c=e(53402),u=e(22562),h=e(15647),s=e(31725);(function(){a.rectangle=function(l,v,d,g,y){y=y||{};var S={label:"Rectangle Body",position:{x:l,y:v},vertices:x.fromPath("L 0 0 L "+d+" 0 L "+d+" "+g+" L 0 "+g)};if(y.chamfer){var T=y.chamfer;S.vertices=x.chamfer(S.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete y.chamfer}return u.create(c.extend({},S,y))},a.trapezoid=function(l,v,d,g,y,S){S=S||{},y>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),y*=.5;var T=(1-y*2)*d,w=d*y,P=w+T,A=P+w,R;y<.5?R="L 0 0 L "+w+" "+-g+" L "+P+" "+-g+" L "+A+" 0":R="L 0 0 L "+P+" "+-g+" L "+A+" 0";var I={label:"Trapezoid Body",position:{x:l,y:v},vertices:x.fromPath(R)};if(S.chamfer){var M=S.chamfer;I.vertices=x.chamfer(I.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete S.chamfer}return u.create(c.extend({},I,S))},a.circle=function(l,v,d,g,y){g=g||{};var S={label:"Circle Body",circleRadius:d};y=y||25;var T=Math.ceil(Math.max(10,Math.min(y,d)));return T%2===1&&(T+=1),a.polygon(l,v,T,d,c.extend({},S,g))},a.polygon=function(l,v,d,g,y){if(y=y||{},d<3)return a.circle(l,v,g,y);for(var S=2*Math.PI/d,T="",w=S*.5,P=0;P<d;P+=1){var A=w+P*S,R=Math.cos(A)*g,I=Math.sin(A)*g;T+="L "+R.toFixed(3)+" "+I.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:l,y:v},vertices:x.fromPath(T)};if(y.chamfer){var L=y.chamfer;M.vertices=x.chamfer(M.vertices,L.radius,L.quality,L.qualityMin,L.qualityMax),delete y.chamfer}return u.create(c.extend({},M,y))},a.fromVertices=function(l,v,d,g,y,S,T,w){var P=c.getDecomp(),A,R,I,M,L,N,G,D,B,$,k;for(A=!!(P&&P.quickDecomp),g=g||{},I=[],y=typeof y<"u"?y:!1,S=typeof S<"u"?S:.01,T=typeof T<"u"?T:10,w=typeof w<"u"?w:.01,c.isArray(d[0])||(d=[d]),$=0;$<d.length;$+=1)if(N=d[$],M=x.isConvex(N),L=!M,L&&!A&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),M||!A)M?N=x.clockwiseSort(N):N=x.hull(N),I.push({position:{x:l,y:v},vertices:N});else{var X=N.map(function(ne){return[ne.x,ne.y]});P.makeCCW(X),S!==!1&&P.removeCollinearPoints(X,S),w!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(X,w);var Y=P.quickDecomp(X);for(G=0;G<Y.length;G++){var Z=Y[G],Q=Z.map(function(ne){return{x:ne[0],y:ne[1]}});T>0&&x.area(Q)<T||I.push({position:x.centre(Q),vertices:Q})}}for(G=0;G<I.length;G++)I[G]=u.create(c.extend(I[G],g));if(y){var j=5;for(G=0;G<I.length;G++){var K=I[G];for(D=G+1;D<I.length;D++){var W=I[D];if(h.overlaps(K.bounds,W.bounds)){var V=K.vertices,J=W.vertices;for(B=0;B<K.vertices.length;B++)for(k=0;k<W.vertices.length;k++){var ee=s.magnitudeSquared(s.sub(V[(B+1)%V.length],J[k])),te=s.magnitudeSquared(s.sub(V[B],J[(k+1)%J.length]));ee<j&&te<j&&(V[B].isInternal=!0,J[k].isInternal=!0)}}}}}return I.length>1?(R=u.create(c.extend({parts:I.slice(0)},g)),u.setPosition(R,{x:l,y:v}),R):I[0]},a.flagCoincidentParts=function(l,v){v===void 0&&(v=5);for(var d=0;d<l.length;d++)for(var g=l[d],y=d+1;y<l.length;y++){var S=l[y];if(h.overlaps(g.bounds,S.bounds))for(var T=g.vertices,w=S.vertices,P=0;P<g.vertices.length;P++)for(var A=0;A<S.vertices.length;A++){var R=s.magnitudeSquared(s.sub(T[(P+1)%T.length],w[A])),I=s.magnitudeSquared(s.sub(T[P],w[(A+1)%w.length]));R<v&&I<v&&(T[P].isInternal=!0,w[A].isInternal=!0)}}return l}})()},74116:(o,E,e)=>{var a={};o.exports=a;var x=e(69351),c=e(48140),u=e(53402),h=e(22562),s=e(66280);(function(){a.stack=function(l,v,d,g,y,S,T){for(var w=x.create({label:"Stack"}),P=l,A=v,R,I=0,M=0;M<g;M++){for(var L=0,N=0;N<d;N++){var G=T(P,A,N,M,R,I);if(G){var D=G.bounds.max.y-G.bounds.min.y,B=G.bounds.max.x-G.bounds.min.x;D>L&&(L=D),h.translate(G,{x:B*.5,y:D*.5}),P=G.bounds.max.x+y,x.addBody(w,G),R=G,I+=1}else P+=y}A+=L+S,P=l}return w},a.chain=function(l,v,d,g,y,S){for(var T=l.bodies,w=1;w<T.length;w++){var P=T[w-1],A=T[w],R=P.bounds.max.y-P.bounds.min.y,I=P.bounds.max.x-P.bounds.min.x,M=A.bounds.max.y-A.bounds.min.y,L=A.bounds.max.x-A.bounds.min.x,N={bodyA:P,pointA:{x:I*v,y:R*d},bodyB:A,pointB:{x:L*g,y:M*y}},G=u.extend(N,S);x.addConstraint(l,c.create(G))}return l.label+=" Chain",l},a.mesh=function(l,v,d,g,y){var S=l.bodies,T,w,P,A,R;for(T=0;T<d;T++){for(w=1;w<v;w++)P=S[w-1+T*v],A=S[w+T*v],x.addConstraint(l,c.create(u.extend({bodyA:P,bodyB:A},y)));if(T>0)for(w=0;w<v;w++)P=S[w+(T-1)*v],A=S[w+T*v],x.addConstraint(l,c.create(u.extend({bodyA:P,bodyB:A},y))),g&&w>0&&(R=S[w-1+(T-1)*v],x.addConstraint(l,c.create(u.extend({bodyA:R,bodyB:A},y)))),g&&w<v-1&&(R=S[w+1+(T-1)*v],x.addConstraint(l,c.create(u.extend({bodyA:R,bodyB:A},y))))}return l.label+=" Mesh",l},a.pyramid=function(l,v,d,g,y,S,T){return a.stack(l,v,d,g,y,S,function(w,P,A,R,I,M){var L=Math.min(g,Math.ceil(d/2)),N=I?I.bounds.max.x-I.bounds.min.x:0;if(!(R>L)){R=L-R;var G=R,D=d-1-R;if(!(A<G||A>D)){M===1&&h.translate(I,{x:(A+(d%2===1?1:-1))*N,y:0});var B=I?A*N:0;return T(l+B+A*y,P,A,R,I,M)}}})},a.newtonsCradle=function(l,v,d,g,y){for(var S=x.create({label:"Newtons Cradle"}),T=0;T<d;T++){var w=1.9,P=s.circle(l+T*(g*w),v+y,g,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),A=c.create({pointA:{x:l+T*(g*w),y:v},bodyB:P});x.addBody(S,P),x.addConstraint(S,A)}return S},a.car=function(l,v,d,g,y){var S=h.nextGroup(!0),T=20,w=-d*.5+T,P=d*.5-T,A=0,R=x.create({label:"Car"}),I=s.rectangle(l,v,d,g,{collisionFilter:{group:S},chamfer:{radius:g*.5},density:2e-4}),M=s.circle(l+w,v+A,y,{collisionFilter:{group:S},friction:.8}),L=s.circle(l+P,v+A,y,{collisionFilter:{group:S},friction:.8}),N=c.create({bodyB:I,pointB:{x:w,y:A},bodyA:M,stiffness:1,length:0}),G=c.create({bodyB:I,pointB:{x:P,y:A},bodyA:L,stiffness:1,length:0});return x.addBody(R,I),x.addBody(R,M),x.addBody(R,L),x.addConstraint(R,N),x.addConstraint(R,G),R},a.softBody=function(l,v,d,g,y,S,T,w,P,A){P=u.extend({inertia:1/0},P),A=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},A);var R=a.stack(l,v,d,g,y,S,function(I,M){return s.circle(I,M,w,P)});return a.mesh(R,d,g,T,A),R.label="Soft Body",R}})()},66615:(o,E,e)=>{var a={};o.exports=a;var x=e(31725),c=e(53402);(function(){a.fromVertices=function(u){for(var h={},s=0;s<u.length;s++){var l=(s+1)%u.length,v=x.normalise({x:u[l].y-u[s].y,y:u[s].x-u[l].x}),d=v.y===0?1/0:v.x/v.y;d=d.toFixed(3).toString(),h[d]=v}return c.values(h)},a.rotate=function(u,h){if(h!==0)for(var s=Math.cos(h),l=Math.sin(h),v=0;v<u.length;v++){var d=u[v],g;g=d.x*s-d.y*l,d.y=d.x*l+d.y*s,d.x=g}}})()},15647:o=>{var E={};o.exports=E,function(){E.create=function(e){var a={min:{x:0,y:0},max:{x:0,y:0}};return e&&E.update(a,e),a},E.update=function(e,a,x){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var c=0;c<a.length;c++){var u=a[c];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}x&&(x.x>0?e.max.x+=x.x:e.min.x+=x.x,x.y>0?e.max.y+=x.y:e.min.y+=x.y)},E.contains=function(e,a){return a.x>=e.min.x&&a.x<=e.max.x&&a.y>=e.min.y&&a.y<=e.max.y},E.overlaps=function(e,a){return e.min.x<=a.max.x&&e.max.x>=a.min.x&&e.max.y>=a.min.y&&e.min.y<=a.max.y},E.translate=function(e,a){e.min.x+=a.x,e.max.x+=a.x,e.min.y+=a.y,e.max.y+=a.y},E.shift=function(e,a){var x=e.max.x-e.min.x,c=e.max.y-e.min.y;e.min.x=a.x,e.max.x=a.x+x,e.min.y=a.y,e.max.y=a.y+c},E.wrap=function(e,a,x){var c=null,u=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(e.min.x>a.max.x?c=a.min.x-e.max.x:e.max.x<a.min.x&&(c=a.max.x-e.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(e.min.y>a.max.y?u=a.min.y-e.max.y:e.max.y<a.min.y&&(u=a.max.y-e.min.y)),c!==null||u!==null)return{x:c||0,y:u||0}}}()},74058:(o,E,e)=>{var a={};o.exports=a,e(15647);var x=e(53402);(function(){a.pathToVertices=function(c,u){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,s,l,v,d,g,y,S,T,w,P=[],A,R,I=0,M=0,L=0;u=u||15;var N=function(D,B,$){var k=$%2===1&&$>1;if(!T||D!=T.x||B!=T.y){T&&k?(A=T.x,R=T.y):(A=0,R=0);var X={x:A+D,y:R+B};(k||!T)&&(T=X),P.push(X),M=A+D,L=R+B}},G=function(D){var B=D.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":M=D.x,L=D.y;break;case"H":M=D.x;break;case"V":L=D.y;break}N(M,L,D.pathSegType)}};for(a._svgPathToAbsolute(c),l=c.getTotalLength(),g=[],h=0;h<c.pathSegList.numberOfItems;h+=1)g.push(c.pathSegList.getItem(h));for(y=g.concat();I<l;){if(w=c.getPathSegAtLength(I),d=g[w],d!=S){for(;y.length&&y[0]!=d;)G(y.shift());S=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=c.getPointAtLength(I),N(v.x,v.y,0);break}I+=u}for(h=0,s=y.length;h<s;++h)G(y[h]);return P},a._svgPathToAbsolute=function(c){for(var u,h,s,l,v,d,g=c.pathSegList,y=0,S=0,T=g.numberOfItems,w=0;w<T;++w){var P=g.getItem(w),A=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in P&&(y=P.x),"y"in P&&(S=P.y);else switch("x1"in P&&(s=y+P.x1),"x2"in P&&(v=y+P.x2),"y1"in P&&(l=S+P.y1),"y2"in P&&(d=S+P.y2),"x"in P&&(y+=P.x),"y"in P&&(S+=P.y),A){case"m":g.replaceItem(c.createSVGPathSegMovetoAbs(y,S),w);break;case"l":g.replaceItem(c.createSVGPathSegLinetoAbs(y,S),w);break;case"h":g.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(y),w);break;case"v":g.replaceItem(c.createSVGPathSegLinetoVerticalAbs(S),w);break;case"c":g.replaceItem(c.createSVGPathSegCurvetoCubicAbs(y,S,s,l,v,d),w);break;case"s":g.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(y,S,v,d),w);break;case"q":g.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(y,S,s,l),w);break;case"t":g.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(y,S),w);break;case"a":g.replaceItem(c.createSVGPathSegArcAbs(y,S,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),w);break;case"z":case"Z":y=u,S=h;break}(A=="M"||A=="m")&&(u=y,h=S)}}})()},31725:o=>{var E={};o.exports=E,function(){E.create=function(e,a){return{x:e||0,y:a||0}},E.clone=function(e){return{x:e.x,y:e.y}},E.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},E.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},E.rotate=function(e,a,x){var c=Math.cos(a),u=Math.sin(a);x||(x={});var h=e.x*c-e.y*u;return x.y=e.x*u+e.y*c,x.x=h,x},E.rotateAbout=function(e,a,x,c){var u=Math.cos(a),h=Math.sin(a);c||(c={});var s=x.x+((e.x-x.x)*u-(e.y-x.y)*h);return c.y=x.y+((e.x-x.x)*h+(e.y-x.y)*u),c.x=s,c},E.normalise=function(e){var a=E.magnitude(e);return a===0?{x:0,y:0}:{x:e.x/a,y:e.y/a}},E.dot=function(e,a){return e.x*a.x+e.y*a.y},E.cross=function(e,a){return e.x*a.y-e.y*a.x},E.cross3=function(e,a,x){return(a.x-e.x)*(x.y-e.y)-(a.y-e.y)*(x.x-e.x)},E.add=function(e,a,x){return x||(x={}),x.x=e.x+a.x,x.y=e.y+a.y,x},E.sub=function(e,a,x){return x||(x={}),x.x=e.x-a.x,x.y=e.y-a.y,x},E.mult=function(e,a){return{x:e.x*a,y:e.y*a}},E.div=function(e,a){return{x:e.x/a,y:e.y/a}},E.perp=function(e,a){return a=a===!0?-1:1,{x:a*-e.y,y:a*e.x}},E.neg=function(e){return{x:-e.x,y:-e.y}},E.angle=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)},E._temp=[E.create(),E.create(),E.create(),E.create(),E.create(),E.create()]}()},41598:(o,E,e)=>{var a={};o.exports=a;var x=e(31725),c=e(53402);(function(){a.create=function(u,h){for(var s=[],l=0;l<u.length;l++){var v=u[l],d={x:v.x,y:v.y,index:l,body:h,isInternal:!1};s.push(d)}return s},a.fromPath=function(u,h){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,l=[];return u.replace(s,function(v,d,g){l.push({x:parseFloat(d),y:parseFloat(g)})}),a.create(l,h)},a.centre=function(u){for(var h=a.area(u,!0),s={x:0,y:0},l,v,d,g=0;g<u.length;g++)d=(g+1)%u.length,l=x.cross(u[g],u[d]),v=x.mult(x.add(u[g],u[d]),l),s=x.add(s,v);return x.div(s,6*h)},a.mean=function(u){for(var h={x:0,y:0},s=0;s<u.length;s++)h.x+=u[s].x,h.y+=u[s].y;return x.div(h,u.length)},a.area=function(u,h){for(var s=0,l=u.length-1,v=0;v<u.length;v++)s+=(u[l].x-u[v].x)*(u[l].y+u[v].y),l=v;return h?s/2:Math.abs(s)/2},a.inertia=function(u,h){for(var s=0,l=0,v=u,d,g,y=0;y<v.length;y++)g=(y+1)%v.length,d=Math.abs(x.cross(v[g],v[y])),s+=d*(x.dot(v[g],v[g])+x.dot(v[g],v[y])+x.dot(v[y],v[y])),l+=d;return h/6*(s/l)},a.translate=function(u,h,s){s=typeof s<"u"?s:1;var l=u.length,v=h.x*s,d=h.y*s,g;for(g=0;g<l;g++)u[g].x+=v,u[g].y+=d;return u},a.rotate=function(u,h,s){if(h!==0){var l=Math.cos(h),v=Math.sin(h),d=s.x,g=s.y,y=u.length,S,T,w,P;for(P=0;P<y;P++)S=u[P],T=S.x-d,w=S.y-g,S.x=d+(T*l-w*v),S.y=g+(T*v+w*l);return u}},a.contains=function(u,h){for(var s=h.x,l=h.y,v=u.length,d=u[v-1],g,y=0;y<v;y++){if(g=u[y],(s-d.x)*(g.y-d.y)+(l-d.y)*(d.x-g.x)>0)return!1;d=g}return!0},a.scale=function(u,h,s,l){if(h===1&&s===1)return u;l=l||a.centre(u);for(var v,d,g=0;g<u.length;g++)v=u[g],d=x.sub(v,l),u[g].x=l.x+d.x*h,u[g].y=l.y+d.y*s;return u},a.chamfer=function(u,h,s,l,v){typeof h=="number"?h=[h]:h=h||[8],s=typeof s<"u"?s:-1,l=l||2,v=v||14;for(var d=[],g=0;g<u.length;g++){var y=u[g-1>=0?g-1:u.length-1],S=u[g],T=u[(g+1)%u.length],w=h[g<h.length?g:h.length-1];if(w===0){d.push(S);continue}var P=x.normalise({x:S.y-y.y,y:y.x-S.x}),A=x.normalise({x:T.y-S.y,y:S.x-T.x}),R=Math.sqrt(2*Math.pow(w,2)),I=x.mult(c.clone(P),w),M=x.normalise(x.mult(x.add(P,A),.5)),L=x.sub(S,x.mult(M,R)),N=s;s===-1&&(N=Math.pow(w,.32)*1.75),N=c.clamp(N,l,v),N%2===1&&(N+=1);for(var G=Math.acos(x.dot(P,A)),D=G/N,B=0;B<N;B++)d.push(x.add(x.rotate(I,D*B),L))}return d},a.clockwiseSort=function(u){var h=a.mean(u);return u.sort(function(s,l){return x.angle(h,s)-x.angle(h,l)}),u},a.isConvex=function(u){var h=0,s=u.length,l,v,d,g;if(s<3)return null;for(l=0;l<s;l++)if(v=(l+1)%s,d=(l+2)%s,g=(u[v].x-u[l].x)*(u[d].y-u[v].y),g-=(u[v].y-u[l].y)*(u[d].x-u[v].x),g<0?h|=1:g>0&&(h|=2),h===3)return!1;return h!==0?!0:null},a.hull=function(u){var h=[],s=[],l,v;for(u=u.slice(0),u.sort(function(d,g){var y=d.x-g.x;return y!==0?y:d.y-g.y}),v=0;v<u.length;v+=1){for(l=u[v];s.length>=2&&x.cross3(s[s.length-2],s[s.length-1],l)<=0;)s.pop();s.push(l)}for(v=u.length-1;v>=0;v-=1){for(l=u[v];h.length>=2&&x.cross3(h[h.length-2],h[h.length-1],l)<=0;)h.pop();h.push(l)}return h.pop(),s.pop(),h.concat(s)}})()},55973:o=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={decomp:G,quickDecomp:k,isSimple:B,removeCollinearPoints:X,removeDuplicatePoints:Y,makeCCW:T};function E(j,K,W){W=W||0;var V=[0,0],J,ee,te,ne,se,ae,ue;return J=j[1][1]-j[0][1],ee=j[0][0]-j[1][0],te=J*j[0][0]+ee*j[0][1],ne=K[1][1]-K[0][1],se=K[0][0]-K[1][0],ae=ne*K[0][0]+se*K[0][1],ue=J*se-ne*ee,Z(ue,0,W)||(V[0]=(se*te-ee*ae)/ue,V[1]=(J*ae-ne*te)/ue),V}function e(j,K,W,V){var J=K[0]-j[0],ee=K[1]-j[1],te=V[0]-W[0],ne=V[1]-W[1];if(te*ee-ne*J===0)return!1;var se=(J*(W[1]-j[1])+ee*(j[0]-W[0]))/(te*ee-ne*J),ae=(te*(j[1]-W[1])+ne*(W[0]-j[0]))/(ne*J-te*ee);return se>=0&&se<=1&&ae>=0&&ae<=1}function a(j,K,W){return(K[0]-j[0])*(W[1]-j[1])-(W[0]-j[0])*(K[1]-j[1])}function x(j,K,W){return a(j,K,W)>0}function c(j,K,W){return a(j,K,W)>=0}function u(j,K,W){return a(j,K,W)<0}function h(j,K,W){return a(j,K,W)<=0}var s=[],l=[];function v(j,K,W,V){if(V){var J=s,ee=l;J[0]=K[0]-j[0],J[1]=K[1]-j[1],ee[0]=W[0]-K[0],ee[1]=W[1]-K[1];var te=J[0]*ee[0]+J[1]*ee[1],ne=Math.sqrt(J[0]*J[0]+J[1]*J[1]),se=Math.sqrt(ee[0]*ee[0]+ee[1]*ee[1]),ae=Math.acos(te/(ne*se));return ae<V}else return a(j,K,W)===0}function d(j,K){var W=K[0]-j[0],V=K[1]-j[1];return W*W+V*V}function g(j,K){var W=j.length;return j[K<0?K%W+W:K%W]}function y(j){j.length=0}function S(j,K,W,V){for(var J=W;J<V;J++)j.push(K[J])}function T(j){for(var K=0,W=j,V=1;V<j.length;++V)(W[V][1]<W[K][1]||W[V][1]===W[K][1]&&W[V][0]>W[K][0])&&(K=V);return x(g(j,K-1),g(j,K),g(j,K+1))?!1:(w(j),!0)}function w(j){for(var K=[],W=j.length,V=0;V!==W;V++)K.push(j.pop());for(var V=0;V!==W;V++)j[V]=K[V]}function P(j,K){return u(g(j,K-1),g(j,K),g(j,K+1))}var A=[],R=[];function I(j,K,W){var V,J,ee=A,te=R;if(c(g(j,K+1),g(j,K),g(j,W))&&h(g(j,K-1),g(j,K),g(j,W)))return!1;J=d(g(j,K),g(j,W));for(var ne=0;ne!==j.length;++ne)if(!((ne+1)%j.length===K||ne===K)&&c(g(j,K),g(j,W),g(j,ne+1))&&h(g(j,K),g(j,W),g(j,ne))&&(ee[0]=g(j,K),ee[1]=g(j,W),te[0]=g(j,ne),te[1]=g(j,ne+1),V=E(ee,te),d(g(j,K),V)<J))return!1;return!0}function M(j,K,W){for(var V=0;V!==j.length;++V)if(!(V===K||V===W||(V+1)%j.length===K||(V+1)%j.length===W)&&e(g(j,K),g(j,W),g(j,V),g(j,V+1)))return!1;return!0}function L(j,K,W,V){var J=V||[];if(y(J),K<W)for(var ee=K;ee<=W;ee++)J.push(j[ee]);else{for(var ee=0;ee<=W;ee++)J.push(j[ee]);for(var ee=K;ee<j.length;ee++)J.push(j[ee])}return J}function N(j){for(var K=[],W=[],V=[],J=[],ee=Number.MAX_VALUE,te=0;te<j.length;++te)if(P(j,te)){for(var ne=0;ne<j.length;++ne)if(I(j,te,ne)){W=N(L(j,te,ne,J)),V=N(L(j,ne,te,J));for(var se=0;se<V.length;se++)W.push(V[se]);W.length<ee&&(K=W,ee=W.length,K.push([g(j,te),g(j,ne)]))}}return K}function G(j){var K=N(j);return K.length>0?D(j,K):[j]}function D(j,K){if(K.length===0)return[j];if(K instanceof Array&&K.length&&K[0]instanceof Array&&K[0].length===2&&K[0][0]instanceof Array){for(var W=[j],V=0;V<K.length;V++)for(var J=K[V],ee=0;ee<W.length;ee++){var te=W[ee],ne=D(te,J);if(ne){W.splice(ee,1),W.push(ne[0],ne[1]);break}}return W}else{var J=K,V=j.indexOf(J[0]),ee=j.indexOf(J[1]);return V!==-1&&ee!==-1?[L(j,V,ee),L(j,ee,V)]:!1}}function B(j){var K=j,W;for(W=0;W<K.length-1;W++)for(var V=0;V<W-1;V++)if(e(K[W],K[W+1],K[V],K[V+1]))return!1;for(W=1;W<K.length-2;W++)if(e(K[0],K[K.length-1],K[W],K[W+1]))return!1;return!0}function $(j,K,W,V,J){J=J||0;var ee=K[1]-j[1],te=j[0]-K[0],ne=ee*j[0]+te*j[1],se=V[1]-W[1],ae=W[0]-V[0],ue=se*W[0]+ae*W[1],de=ee*ae-se*te;return Z(de,0,J)?[0,0]:[(ae*ne-te*ue)/de,(ee*ue-se*ne)/de]}function k(j,K,W,V,J,ee,te){ee=ee||100,te=te||0,J=J||25,K=typeof K<"u"?K:[],W=W||[],V=V||[];var ne=[0,0],se=[0,0],ae=[0,0],ue=0,de=0,fe=0,ye=0,ve=0,Se=0,Ie=0,Ae=[],Oe=[],xe=j,be=j;if(be.length<3)return K;if(te++,te>ee)return console.warn("quickDecomp: max level ("+ee+") reached."),K;for(var Pe=0;Pe<j.length;++Pe)if(P(xe,Pe)){W.push(xe[Pe]),ue=de=Number.MAX_VALUE;for(var Ge=0;Ge<j.length;++Ge)x(g(xe,Pe-1),g(xe,Pe),g(xe,Ge))&&h(g(xe,Pe-1),g(xe,Pe),g(xe,Ge-1))&&(ae=$(g(xe,Pe-1),g(xe,Pe),g(xe,Ge),g(xe,Ge-1)),u(g(xe,Pe+1),g(xe,Pe),ae)&&(fe=d(xe[Pe],ae),fe<de&&(de=fe,se=ae,Se=Ge))),x(g(xe,Pe+1),g(xe,Pe),g(xe,Ge+1))&&h(g(xe,Pe+1),g(xe,Pe),g(xe,Ge))&&(ae=$(g(xe,Pe+1),g(xe,Pe),g(xe,Ge),g(xe,Ge+1)),x(g(xe,Pe-1),g(xe,Pe),ae)&&(fe=d(xe[Pe],ae),fe<ue&&(ue=fe,ne=ae,ve=Ge)));if(Se===(ve+1)%j.length)ae[0]=(se[0]+ne[0])/2,ae[1]=(se[1]+ne[1])/2,V.push(ae),Pe<ve?(S(Ae,xe,Pe,ve+1),Ae.push(ae),Oe.push(ae),Se!==0&&S(Oe,xe,Se,xe.length),S(Oe,xe,0,Pe+1)):(Pe!==0&&S(Ae,xe,Pe,xe.length),S(Ae,xe,0,ve+1),Ae.push(ae),Oe.push(ae),S(Oe,xe,Se,Pe+1));else{if(Se>ve&&(ve+=j.length),ye=Number.MAX_VALUE,ve<Se)return K;for(var Ge=Se;Ge<=ve;++Ge)c(g(xe,Pe-1),g(xe,Pe),g(xe,Ge))&&h(g(xe,Pe+1),g(xe,Pe),g(xe,Ge))&&(fe=d(g(xe,Pe),g(xe,Ge)),fe<ye&&M(xe,Pe,Ge)&&(ye=fe,Ie=Ge%j.length));Pe<Ie?(S(Ae,xe,Pe,Ie+1),Ie!==0&&S(Oe,xe,Ie,be.length),S(Oe,xe,0,Pe+1)):(Pe!==0&&S(Ae,xe,Pe,be.length),S(Ae,xe,0,Ie+1),S(Oe,xe,Ie,Pe+1))}return Ae.length<Oe.length?(k(Ae,K,W,V,J,ee,te),k(Oe,K,W,V,J,ee,te)):(k(Oe,K,W,V,J,ee,te),k(Ae,K,W,V,J,ee,te)),K}return K.push(j),K}function X(j,K){for(var W=0,V=j.length-1;j.length>3&&V>=0;--V)v(g(j,V-1),g(j,V),g(j,V+1),K)&&(j.splice(V%j.length,1),W++);return W}function Y(j,K){for(var W=j.length-1;W>=1;--W)for(var V=j[W],J=W-1;J>=0;--J)if(Q(V,j[J],K)){j.splice(W,1);continue}}function Z(j,K,W){return W=W||0,Math.abs(j-K)<=W}function Q(j,K,W){return Z(j[0],K[0],W)&&Z(j[1],K[1],W)}},52018:(o,E,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(83419),x=new a({initialize:function(u){this.pluginManager=u,this.game=u.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=x},42363:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};o.exports=E},37277:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},e={},a={};a.register=function(x,c,u,h){h===void 0&&(h=!1),E[x]={plugin:c,mapping:u,custom:h}},a.registerCustom=function(x,c,u,h){e[x]={plugin:c,mapping:u,data:h}},a.hasCore=function(x){return E.hasOwnProperty(x)},a.hasCustom=function(x){return e.hasOwnProperty(x)},a.getCore=function(x){return E[x]},a.getCustom=function(x){return e[x]},a.getCustomClass=function(x){return e.hasOwnProperty(x)?e[x].plugin:null},a.remove=function(x){E.hasOwnProperty(x)&&delete E[x]},a.removeCustom=function(x){e.hasOwnProperty(x)&&delete e[x]},a.destroyCorePlugins=function(){for(var x in E)E.hasOwnProperty(x)&&delete E[x]},a.destroyCustomPlugins=function(){for(var x in e)e.hasOwnProperty(x)&&delete e[x]},o.exports=a},77332:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8443),c=e(50792),u=e(74099),h=e(44603),s=e(39429),l=e(95540),v=e(37277),d=e(72905),g=new a({Extends:c,initialize:function(S){c.call(this),this.game=S,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],S.isBooted?this.boot():S.events.once(x.BOOT,this.boot,this)},boot:function(){var y,S,T,w,P,A,R,I=this.game.config,M=I.installGlobalPlugins;for(M=M.concat(this._pendingGlobal),y=0;y<M.length;y++)S=M[y],T=l(S,"key",null),w=l(S,"plugin",null),P=l(S,"start",!1),A=l(S,"mapping",null),R=l(S,"data",null),T&&(w?this.install(T,w,P,A,R):console.warn("Missing `plugin` for key: "+T));for(M=I.installScenePlugins,M=M.concat(this._pendingScene),y=0;y<M.length;y++)S=M[y],T=l(S,"key",null),w=l(S,"plugin",null),A=l(S,"mapping",null),T&&(w?this.installScenePlugin(T,w,A):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(y,S,T){var w,P,A,R=this.game,I=y.scene,M=y.settings.map,L=y.settings.isBooted;for(w=0;w<S.length;w++)P=S[w],R[P]?(y[P]=R[P],M.hasOwnProperty(P)&&(I[M[P]]=y[P])):P==="game"&&M.hasOwnProperty(P)&&(I[M[P]]=R);for(var N=0;N<T.length;N++)for(A=T[N],w=0;w<A.length;w++)if(P=A[w],!!v.hasCore(P)){var G=v.getCore(P),D=G.mapping,B=new G.plugin(I,this,D);y[D]=B,G.custom?I[D]=B:M.hasOwnProperty(D)&&(I[M[D]]=B),L&&B.boot()}for(A=this.plugins,w=0;w<A.length;w++){var $=A[w];$.mapping&&(I[$.mapping]=$.plugin)}},getDefaultScenePlugins:function(){var y=this.game.config.defaultPlugins;return y=y.concat(this.scenePlugins),y},installScenePlugin:function(y,S,T,w,P){if(P===void 0&&(P=!1),typeof S!="function"){console.warn("Invalid Scene Plugin: "+y);return}if(v.hasCore(y)||v.register(y,S,T,!0),this.scenePlugins.indexOf(y)===-1)this.scenePlugins.push(y);else if(!P&&v.hasCore(y)){console.warn("Scene Plugin key in use: "+y);return}if(w){var A=new S(w,this,y);w.sys[y]=A,T&&T!==""&&(w[T]=A),A.boot()}},install:function(y,S,T,w,P){if(T===void 0&&(T=!1),w===void 0&&(w=null),P===void 0&&(P=null),typeof S!="function")return console.warn("Invalid Plugin: "+y),null;if(v.hasCustom(y))return console.warn("Plugin key in use: "+y),null;if(w!==null&&(T=!0),!this.game.isBooted)this._pendingGlobal.push({key:y,plugin:S,start:T,mapping:w,data:P});else if(v.registerCustom(y,S,w,P),T)return this.start(y);return null},getIndex:function(y){for(var S=this.plugins,T=0;T<S.length;T++){var w=S[T];if(w.key===y)return T}return-1},getEntry:function(y){var S=this.getIndex(y);if(S!==-1)return this.plugins[S]},isActive:function(y){var S=this.getEntry(y);return S&&S.active},start:function(y,S){S===void 0&&(S=y);var T=this.getEntry(S);return T&&!T.active?(T.active=!0,T.plugin.start()):T||(T=this.createEntry(y,S)),T?T.plugin:null},createEntry:function(y,S){var T=v.getCustom(y);if(T){var w=new T.plugin(this);T={key:S,plugin:w,active:!0,mapping:T.mapping,data:T.data},this.plugins.push(T),w.init(T.data),w.start()}return T},stop:function(y){var S=this.getEntry(y);return S&&S.active&&(S.active=!1,S.plugin.stop()),this},get:function(y,S){S===void 0&&(S=!0);var T=this.getEntry(y);if(T)return T.plugin;var w=this.getClass(y);return w&&S?(T=this.createEntry(y,y),T?T.plugin:null):w||null},getClass:function(y){return v.getCustomClass(y)},removeGlobalPlugin:function(y){var S=this.getEntry(y);S&&d(this.plugins,S),v.removeCustom(y)},removeScenePlugin:function(y){d(this.scenePlugins,y),v.remove(y)},registerGameObject:function(y,S,T){return S&&s.register(y,S),T&&h.register(y,T),this},removeGameObject:function(y,S,T){return S===void 0&&(S=!0),T===void 0&&(T=!0),S&&s.remove(y),T&&h.remove(y),this},registerFileType:function(y,S,T){u.register(y,S),T&&T.sys.load&&(T.sys.load[y]=S)},destroy:function(){for(var y=0;y<this.plugins.length;y++)this.plugins[y].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});o.exports=g},45145:(o,E,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(52018),x=e(83419),c=e(44594),u=new x({Extends:a,initialize:function(s,l,v){a.call(this,l),this.scene=s,this.systems=s.sys,this.pluginKey=v,s.sys.events.once(c.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=u},18922:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(o){const E=performance.now(),e=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,x=(c,u)=>{const h=this.getVideoPlaybackQuality(),s=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(s>a){const l=this.mozFrameDelay||h.totalFrameDelay-e.totalFrameDelay||0,v=u-c;o(u,{presentationTime:u+l*1e3,expectedDisplayTime:u+v,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+v/1e3,presentedFrames:s,processingDuration:l}),delete this._rvfcpolyfillmap[E]}else this._rvfcpolyfillmap[E]=requestAnimationFrame(l=>x(u,l))};return this._rvfcpolyfillmap[E]=requestAnimationFrame(c=>x(E,c)),E},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(o){cancelAnimationFrame(this._rvfcpolyfillmap[o]),delete this._rvfcpolyfillmap[o]})},10312:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DEFAULT:0,LINEAR:0,NEAREST:1};o.exports=E},68627:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19715),x=e(32880),c=e(83419),u=e(8054),h=e(50792),s=e(92503),l=e(56373),v=e(97480),d=e(69442),g=e(61340),y=new c({Extends:h,initialize:function(T){h.call(this);var w=T.config;this.config={clearBeforeRender:w.clearBeforeRender,backgroundColor:w.backgroundColor,antialias:w.antialias,roundPixels:w.roundPixels},this.game=T,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=T.canvas;var P={alpha:T.config.transparent,desynchronized:T.config.desynchronized,willReadFrequently:!1};this.gameContext=w.context?w.context:this.gameCanvas.getContext("2d",P),this.currentContext=this.gameContext,this.antialias=T.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new g,this._tempMatrix2=new g,this._tempMatrix3=new g,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var S=this.game,T=S.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,S.scale.on(v.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(S,T){(T.width!==this.width||T.height!==this.height)&&this.resize(T.width,T.height)},resize:function(S,T){this.width=S,this.height=T,this.emit(s.RESIZE,S,T)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(S){return this.currentContext.globalCompositeOperation=S,this},setContext:function(S){return this.currentContext=S||this.gameContext,this},setAlpha:function(S){return this.currentContext.globalAlpha=S,this},preRender:function(){var S=this.gameContext,T=this.config,w=this.width,P=this.height;S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),this.emit(s.PRE_RENDER_CLEAR),T.clearBeforeRender&&(S.clearRect(0,0,w,P),T.transparent||(S.fillStyle=T.backgroundColor.rgba,S.fillRect(0,0,w,P))),S.save(),this.drawCount=0,this.emit(s.PRE_RENDER)},render:function(S,T,w){var P=T.length;this.emit(s.RENDER,S,w);var A=w.x,R=w.y,I=w.width,M=w.height,L=w.renderToTexture?w.context:S.sys.context;L.save(),this.game.scene.customViewports&&(L.beginPath(),L.rect(A,R,I,M),L.clip()),w.emit(a.PRE_RENDER,w),this.currentContext=L;var N=w.mask;N&&N.preRenderCanvas(this,null,w._maskCamera),w.transparent||(L.fillStyle=w.backgroundColor.rgba,L.fillRect(A,R,I,M)),L.globalAlpha=w.alpha,L.globalCompositeOperation="source-over",this.drawCount+=P,w.renderToTexture&&w.emit(a.PRE_RENDER,w),w.matrix.copyToContext(L);for(var G=0;G<P;G++){var D=T[G];D.mask&&D.mask.preRenderCanvas(this,D,w),D.renderCanvas(this,D,w),D.mask&&D.mask.postRenderCanvas(this,D,w)}L.setTransform(1,0,0,1,0,0),L.globalCompositeOperation="source-over",L.globalAlpha=1,w.flashEffect.postRenderCanvas(L),w.fadeEffect.postRenderCanvas(L),w.dirty=!1,N&&N.postRenderCanvas(this),L.restore(),w.renderToTexture&&(w.emit(a.POST_RENDER,w),w.renderToGame&&S.sys.context.drawImage(w.canvas,A,R)),w.emit(a.POST_RENDER,w)},postRender:function(){var S=this.gameContext;S.restore(),this.emit(s.POST_RENDER);var T=this.snapshotState;T.callback&&(x(this.gameCanvas,T),T.callback=null)},snapshotCanvas:function(S,T,w,P,A,R,I,M,L){w===void 0&&(w=!1),this.snapshotArea(P,A,R,I,T,M,L);var N=this.snapshotState;return N.getPixel=w,x(S,N),N.callback=null,this},snapshot:function(S,T,w){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,S,T,w)},snapshotArea:function(S,T,w,P,A,R,I){var M=this.snapshotState;return M.callback=A,M.type=R,M.encoder=I,M.getPixel=!1,M.x=S,M.y=T,M.width=Math.min(w,this.gameCanvas.width),M.height=Math.min(P,this.gameCanvas.height),this},snapshotPixel:function(S,T,w){return this.snapshotArea(S,T,1,1,w),this.snapshotState.getPixel=!0,this},batchSprite:function(S,T,w,P){var A=w.alpha*S.alpha;if(A!==0){var R=this.currentContext,I=this._tempMatrix1,M=this._tempMatrix2,L=T.canvasData,N=L.x,G=L.y,D=T.cutWidth,B=T.cutHeight,$=T.customPivot,k=T.source.resolution,X=S.displayOriginX,Y=S.displayOriginY,Z=-X+T.x,Q=-Y+T.y;if(S.isCropped){var j=S._crop;(j.flipX!==S.flipX||j.flipY!==S.flipY)&&T.updateCropUVs(j,S.flipX,S.flipY),D=j.cw,B=j.ch,N=j.cx,G=j.cy,Z=-X+j.x,Q=-Y+j.y,S.flipX&&(Z>=0?Z=-(Z+D):Z<0&&(Z=Math.abs(Z)-D)),S.flipY&&(Q>=0?Q=-(Q+B):Q<0&&(Q=Math.abs(Q)-B))}var K=1,W=1;S.flipX&&($||(Z+=-T.realWidth+X*2),K=-1),S.flipY&&($||(Q+=-T.realHeight+Y*2),W=-1);var V=S.x,J=S.y;if(w.roundPixels&&(V=Math.floor(V),J=Math.floor(J)),M.applyITRS(V,J,S.rotation,S.scaleX*K,S.scaleY*W),I.copyFrom(w.matrix),P?(I.multiplyWithOffset(P,-w.scrollX*S.scrollFactorX,-w.scrollY*S.scrollFactorY),M.e=V,M.f=J):(M.e-=w.scrollX*S.scrollFactorX,M.f-=w.scrollY*S.scrollFactorY),I.multiply(M),w.renderRoundPixels&&(I.e=Math.floor(I.e+.5),I.f=Math.floor(I.f+.5)),R.save(),I.setToContext(R),R.globalCompositeOperation=this.blendModes[S.blendMode],R.globalAlpha=A,R.imageSmoothingEnabled=!T.source.scaleMode,S.mask&&S.mask.preRenderCanvas(this,S,w),D>0&&B>0){var ee=D/k,te=B/k;w.roundPixels&&(Z=Math.floor(Z+.5),Q=Math.floor(Q+.5),ee+=.5,te+=.5),R.drawImage(T.source.image,N,G,D,B,Z,Q,ee,te)}S.mask&&S.mask.postRenderCanvas(this,S,w),R.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});o.exports=y},55830:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}},56373:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(89289),c=function(){var u=[],h=x.supportNewBlendModes,s="source-over";return u[a.NORMAL]=s,u[a.ADD]="lighter",u[a.MULTIPLY]=h?"multiply":s,u[a.SCREEN]=h?"screen":s,u[a.OVERLAY]=h?"overlay":s,u[a.DARKEN]=h?"darken":s,u[a.LIGHTEN]=h?"lighten":s,u[a.COLOR_DODGE]=h?"color-dodge":s,u[a.COLOR_BURN]=h?"color-burn":s,u[a.HARD_LIGHT]=h?"hard-light":s,u[a.SOFT_LIGHT]=h?"soft-light":s,u[a.DIFFERENCE]=h?"difference":s,u[a.EXCLUSION]=h?"exclusion":s,u[a.HUE]=h?"hue":s,u[a.SATURATION]=h?"saturation":s,u[a.COLOR]=h?"color":s,u[a.LUMINOSITY]=h?"luminosity":s,u[a.ERASE]="destination-out",u[a.SOURCE_IN]="source-in",u[a.SOURCE_OUT]="source-out",u[a.SOURCE_ATOP]="source-atop",u[a.DESTINATION_OVER]="destination-over",u[a.DESTINATION_IN]="destination-in",u[a.DESTINATION_OUT]="destination-out",u[a.DESTINATION_ATOP]="destination-atop",u[a.LIGHTER]="lighter",u[a.COPY]="copy",u[a.XOR]="xor",u};o.exports=c},20926:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(c,u,h,s,l){var v=s.alpha*h.alpha;if(v<=0)return!1;var d=a(h,s,l).calc;return u.globalCompositeOperation=c.blendModes[h.blendMode],u.globalAlpha=v,u.save(),d.setToContext(u),u.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:c.antialias,!0};o.exports=x},63899:o=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="losewebgl"},6119:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},48070:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},15640:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},8912:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},87124:o=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="restorewebgl"},92503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}},36909:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(92503),Snapshot:e(89966)},o.exports.Canvas=e(55830),o.exports.WebGL=e(4159)},32880:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(40987),c=e(95540),u=function(h,s){var l=c(s,"callback"),v=c(s,"type","image/png"),d=c(s,"encoder",.92),g=Math.abs(Math.round(c(s,"x",0))),y=Math.abs(Math.round(c(s,"y",0))),S=Math.floor(c(s,"width",h.width)),T=Math.floor(c(s,"height",h.height)),w=c(s,"getPixel",!1);if(w){var P=h.getContext("2d",{willReadFrequently:!1}),A=P.getImageData(g,y,1,1),R=A.data;l.call(null,new x(R[0],R[1],R[2],R[3]))}else if(g!==0||y!==0||S!==h.width||T!==h.height){var I=a.createWebGL(this,S,T),M=I.getContext("2d",{willReadFrequently:!0});S>0&&T>0&&M.drawImage(h,g,y,S,T,0,0,S,T);var L=new Image;L.onerror=function(){l.call(null),a.remove(I)},L.onload=function(){l.call(null,L),a.remove(I)},L.src=I.toDataURL(v,d)}else{var N=new Image;N.onerror=function(){l.call(null)},N.onload=function(){l.call(null,N)},N.src=h.toDataURL(v,d)}};o.exports=u},88815:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(40987),c=e(95540),u=function(h,s){var l=h,v=c(s,"callback"),d=c(s,"type","image/png"),g=c(s,"encoder",.92),y=Math.abs(Math.round(c(s,"x",0))),S=Math.abs(Math.round(c(s,"y",0))),T=c(s,"getPixel",!1),w=c(s,"isFramebuffer",!1),P=w?c(s,"bufferWidth",1):l.drawingBufferWidth,A=w?c(s,"bufferHeight",1):l.drawingBufferHeight;if(T){var R=new Uint8Array(4),I=w?S:A-S;l.readPixels(y,I,1,1,l.RGBA,l.UNSIGNED_BYTE,R),v.call(null,new x(R[0],R[1],R[2],R[3]))}else{var M=Math.floor(c(s,"width",P)),L=Math.floor(c(s,"height",A)),N=M*L*4,G=new Uint8Array(N);l.readPixels(y,A-S-L,M,L,l.RGBA,l.UNSIGNED_BYTE,G);for(var D=a.createWebGL(this,M,L),B=D.getContext("2d",{willReadFrequently:!0}),$=B.getImageData(0,0,M,L),k=$.data,X=0;X<L;X++)for(var Y=0;Y<M;Y++){var Z=((L-X-1)*M+Y)*4,Q=w?N-(X*M+(M-Y))*4:(X*M+Y)*4;k[Q+0]=G[Z+0],k[Q+1]=G[Z+1],k[Q+2]=G[Z+2],k[Q+3]=G[Z+3]}B.putImageData($,0,0);var j=new Image;j.onerror=function(){v.call(null),a.remove(D)},j.onload=function(){v.call(null,j),a.remove(D)},j.src=D.toDataURL(d,g)}};o.exports=u},89966:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:e(32880),WebGL:e(88815)}},7530:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36060),c=e(90330),u=e(82264),h=e(95540),s=e(32302),l=e(63448),v=e(31302),d=e(58918),g=e(14811),y=e(92651),S=e(96569),T=e(56527),w=e(57516),P=e(43439),A=e(81041),R=e(12385),I=e(7589),M=e(95428),L=e(72905),N=new a({initialize:function(D){this.game=D.game,this.renderer=D,this.classes=new c([[x.UTILITY_PIPELINE,I],[x.MULTI_PIPELINE,w],[x.BITMAPMASK_PIPELINE,v],[x.SINGLE_PIPELINE,R],[x.ROPE_PIPELINE,A],[x.LIGHT_PIPELINE,S],[x.POINTLIGHT_PIPELINE,P],[x.MOBILE_PIPELINE,T]]),this.postPipelineClasses=new c,this.pipelines=new c,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(G,D,B){var $=this.renderer,k=this.renderTargets;this.frameInc=Math.floor(h(G,"frameInc",32));var X=$.width,Y=$.height,Z=this.game.config.disablePreFX,Q=this.game.config.disablePostFX;if(Q||this.postPipelineClasses.setAll([[String(g.BARREL),d.Barrel],[String(g.BLOOM),d.Bloom],[String(g.BLUR),d.Blur],[String(g.BOKEH),d.Bokeh],[String(g.CIRCLE),d.Circle],[String(g.COLOR_MATRIX),d.ColorMatrix],[String(g.DISPLACEMENT),d.Displacement],[String(g.GLOW),d.Glow],[String(g.GRADIENT),d.Gradient],[String(g.PIXELATE),d.Pixelate],[String(g.SHADOW),d.Shadow],[String(g.SHINE),d.Shine],[String(g.VIGNETTE),d.Vignette],[String(g.WIPE),d.Wipe]]),!Z){this.classes.set(x.FX_PIPELINE,y);for(var j=Math.min(X,Y),K=Math.ceil(j/this.frameInc),W=1;W<K;W++){var V=W*this.frameInc;k.push(new s($,V,V)),k.push(new s($,V,V)),k.push(new s($,V,V)),this.maxDimension=V}k.push(new s($,X,Y,1,0,!0,!0)),k.push(new s($,X,Y,1,0,!0,!0)),k.push(new s($,X,Y,1,0,!0,!0))}var J,ee,te=this,ne=this.game;if(this.classes.each(function(ae,ue){J=te.add(ae,new ue({game:ne})),ae===x.UTILITY_PIPELINE&&(te.UTILITY_PIPELINE=J,te.fullFrame1=J.fullFrame1,te.fullFrame2=J.fullFrame2,te.halfFrame1=J.halfFrame1,te.halfFrame2=J.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),Z||(this.FX_PIPELINE=this.get(x.FX_PIPELINE)),G)for(ee in G){var se=G[ee];J=new se(ne),J.name=ee,J.isPostFX?this.postPipelineClasses.set(ee,se):this.has(ee)||(this.classes.set(ee,se),this.add(ee,J))}this.default=this.get(D),B&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(G){var D=this.get(G);return D&&(this.default=D),D},add:function(G,D){if(D.isPostFX){console.warn(G+" is a Post Pipeline. Use `addPostPipeline` instead");return}var B=this.pipelines,$=this.renderer;return B.has(G)?console.warn("Pipeline exists: "+G):(D.name=G,D.manager=this,B.set(G,D)),D.hasBooted||D.boot(),$.width!==0&&$.height!==0&&!D.isPreFX&&D.resize($.width,$.height),D},addPostPipeline:function(G,D){this.postPipelineClasses.has(G)||this.postPipelineClasses.set(G,D)},flush:function(){this.current&&this.current.flush()},has:function(G){var D=this.pipelines;return typeof G=="string"?D.has(G):!!D.contains(G)},get:function(G){var D=this.pipelines;if(typeof G=="string")return D.get(G);if(D.contains(G))return G},getPostPipeline:function(G,D,B){var $=this.postPipelineClasses,k,X="",Y=typeof G;if(Y==="string"||Y==="number"?(k=$.get(G),X=G):Y==="function"?($.contains(G)&&(k=G),X=G.name):Y==="object"&&(k=$.get(G.name),X=G.name),k){var Z=new k(this.game,B);return Z.name=X,D&&(Z.gameObject=D),this.postPipelineInstances.push(Z),Z}},removePostPipeline:function(G){L(this.postPipelineInstances,G)},remove:function(G,D,B){D===void 0&&(D=!0),B===void 0&&(B=!0),this.pipelines.delete(G),D&&this.classes.delete(G),B&&this.postPipelineClasses.delete(G)},set:function(G,D,B){if(!G.isPostFX)return this.isCurrent(G,B)||(this.flush(),this.current&&this.current.unbind(),this.current=G,G.bind(B)),G.updateProjectionMatrix(),G.onBind(D),G},preBatch:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,B=D.length-1;B>=0;B--){var $=D[B];$.active&&$.preBatch(G)}}},postBatch:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,B=0;B<D.length;B++){var $=D[B];$.active&&$.postBatch(G)}}},preBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,B=D.length-1;B>=0;B--){var $=D[B];$.active&&$.preBatch(G)}}},postBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,B=0;B<D.length;B++){var $=D[B];$.active&&$.postBatch(G)}}},isCurrent:function(G,D){var B=this.renderer,$=this.current;return $&&!D&&(D=$.currentShader),!($!==G||D.program!==B.currentProgram)},copyFrame:function(G,D,B,$,k){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(G,D,B,$,k),this},copyToGame:function(G){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(G),this},drawFrame:function(G,D,B,$){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(G,D,B,$),this},blendFrames:function(G,D,B,$,k){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(G,D,B,$,k),this},blendFramesAdditive:function(G,D,B,$,k){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(G,D,B,$,k),this},clearFrame:function(G,D){return this.UTILITY_PIPELINE.clearFrame(G,D),this},blitFrame:function(G,D,B,$,k,X){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(G,D,B,$,k,X),this},copyFrameRect:function(G,D,B,$,k,X,Y,Z){return this.UTILITY_PIPELINE.copyFrameRect(G,D,B,$,k,X,Y,Z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(G){return this.UTILITY_PIPELINE.bind(G)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(G,D){D.restoreContext()}),M(this.postPipelineInstances,function(G){G.restoreContext()})},rebind:function(G){G===void 0&&this.previous&&(G=this.previous);var D=this.renderer,B=D.gl;B.disable(B.DEPTH_TEST),B.disable(B.CULL_FACE),D.hasActiveStencilMask()?B.clear(B.DEPTH_BUFFER_BIT):(B.disable(B.STENCIL_TEST),B.clear(B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)),B.viewport(0,0,D.width,D.height),D.currentProgram=null,D.setBlendMode(0,!0);var $=D.vaoExtension;$&&$.bindVertexArrayOES(null);var k=this.pipelines.entries;for(var X in k)k[X].glReset=!0;G&&(this.current=G,G.rebind())},clear:function(){var G=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,G.currentProgram=null,G.setBlendMode(0,!0);var D=G.vaoExtension;D&&D.bindVertexArrayOES(null)},getRenderTarget:function(G){var D=this.renderTargets,B=3;if(G>this.maxDimension)return this.targetIndex=D.length-B,D[this.targetIndex];var $=(l(G,this.frameInc,0,!0)-1)*B;return this.targetIndex=$,D[$]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});o.exports=N},32302:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92503),c=new a({initialize:function(h,s,l,v,d,g,y,S,T){v===void 0&&(v=1),d===void 0&&(d=0),g===void 0&&(g=!0),y===void 0&&(y=!1),S===void 0&&(S=!0),T===void 0&&(T=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=d,this.autoClear=g,this.autoResize=!0,this.hasDepthBuffer=S,this.forceClamp=T,this.init(s,l),y?this.renderer.on(x.RESIZE,this.resize,this):this.autoResize=!1},init:function(u,h){var s=this.renderer;this.texture=s.createTextureFromSource(null,u,h,this.minFilter,this.forceClamp),this.framebuffer=s.createFramebuffer(u,h,this.texture,this.hasDepthBuffer),this.width=u,this.height=h},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,h){if(this.autoResize&&this.willResize(u,h)){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),this.texture=s.createTextureFromSource(null,u,h,this.minFilter,this.forceClamp),this.framebuffer=s.createFramebuffer(u,h,this.texture,this.hasDepthBuffer),this.width=u,this.height=h}return this},willResize:function(u,h){return typeof u!="number"||typeof h!="number"?!1:(u=Math.round(u*this.scale),h=Math.round(h*this.scale),u=Math.max(u,1),h=Math.max(h,1),u!==this.width||h!==this.height)},bind:function(u,h,s){u===void 0&&(u=!1);var l=this.renderer;if(u&&l.flush(),h&&s&&this.resize(h,s),l.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var v=this.renderer.gl;v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)}l.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(u,h,s,l){var v=this.renderer,d=v.gl;v.pushFramebuffer(this.framebuffer),u!==void 0&&h!==void 0&&s!==void 0&&l!==void 0?(d.enable(d.SCISSOR_TEST),d.scissor(u,h,s,l)):d.disable(d.SCISSOR_TEST),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),v.popFramebuffer(),v.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var h=this.renderer;return u&&h.flush(),h.popFramebuffer()},destroy:function(){var u=this.renderer;u.off(x.RESIZE,this.resize,this),u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});o.exports=c},70554:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={getTintFromFloats:function(E,e,a,x){var c=(E*255|0)&255,u=(e*255|0)&255,h=(a*255|0)&255,s=(x*255|0)&255;return(s<<24|c<<16|u<<8|h)>>>0},getTintAppendFloatAlpha:function(E,e){var a=(e*255|0)&255;return(a<<24|E)>>>0},getTintAppendFloatAlphaAndSwap:function(E,e){var a=(E>>16|0)&255,x=(E>>8|0)&255,c=(E|0)&255,u=(e*255|0)&255;return(u<<24|c<<16|x<<8|a)>>>0},getFloatsFromUintRGB:function(E){var e=(E>>16|0)&255,a=(E>>8|0)&255,x=(E|0)&255;return[e/255,a/255,x/255]},checkShaderMax:function(E,e){var a=Math.min(16,E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?a:Math.min(a,e)},parseFragmentShaderMaxTextures:function(E,e){if(!E)return"";for(var a="",x=0;x<e;x++)x>0&&(a+=`
	else `),x<e-1&&(a+="if (outTexId < "+x+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",a+=`
	}`;return E=E.replace(/%count%/gi,e.toString()),E.replace(/%forloop%/gi,a)},setGlowQuality:function(E,e,a,x){return a===void 0&&(a=e.config.glowFXQuality),x===void 0&&(x=e.config.glowFXDistance),E=E.replace(/__SIZE__/gi,(1/a/x).toFixed(7)),E=E.replace(/__DIST__/gi,x.toFixed(0)+".0"),E}}},29100:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(62644),c=e(50792),u=e(77085),h=e(95540),s=e(37867),l=e(92503),v=e(32302),d=e(70554),g=e(38683),y=new a({Extends:c,initialize:function(T){c.call(this);var w=T.game,P=w.renderer,A=P.gl;this.name=h(T,"name","WebGLPipeline"),this.game=w,this.renderer=P,this.manager,this.gl=A,this.view=w.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(T,"topology",A.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(T,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=T,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=h(T,"resizeUniform","")},boot:function(){var S,T=this.gl,w=this.config,P=this.renderer;this.isPostFX||(this.projectionMatrix=new s().identity());var A=this.renderTargets,R=h(w,"renderTarget",!1);typeof R=="boolean"&&R&&(R=1);var I=P.width,M=P.height;if(typeof R=="number")for(S=0;S<R;S++)A.push(new v(P,I,M,1,0,!0));else if(Array.isArray(R))for(S=0;S<R.length;S++){var L=h(R[S],"scale",1),N=h(R[S],"minFilter",0),G=h(R[S],"autoClear",1),D=h(R[S],"autoResize",!1),B=h(R[S],"width",null),$=h(R[S],"height",B);B?A.push(new v(P,B,$,1,N,G,D)):A.push(new v(P,I,M,L,N,G,D))}A.length&&(this.currentRenderTarget=A[0]),this.setShadersFromConfig(w);var k=this.shaders,X=0;for(S=0;S<k.length;S++)k[S].vertexSize>X&&(X=k[S].vertexSize);var Y=h(w,"batchSize",P.config.batchSize);this.vertexCapacity=Y*6;var Z=new ArrayBuffer(this.vertexCapacity*X);this.vertexData=Z,this.bytes=new Uint8Array(Z),this.vertexViewF32=new Float32Array(Z),this.vertexViewU32=new Uint32Array(Z);var Q=h(w,"vertices",null);for(Q?(this.vertexViewF32.set(Q),this.vertexBuffer=P.createVertexBuffer(Z,T.STATIC_DRAW)):this.vertexBuffer=P.createVertexBuffer(Z.byteLength,T.DYNAMIC_DRAW),this.setVertexBuffer(),S=k.length-1;S>=0;S--)k[S].rebind();this.hasBooted=!0,P.on(l.RESIZE,this.resize,this),P.on(l.PRE_RENDER,this.onPreRender,this),P.on(l.RENDER,this.onRender,this),P.on(l.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(S,T,w){var P=this.renderer;if(S!==this.currentShader||P.currentProgram!==this.currentShader.program){this.flush();var A=this.setVertexBuffer(w);A&&!T&&(T=!0),S.bind(T,!1),this.currentShader=S}return this},getShaderByName:function(S){for(var T=this.shaders,w=0;w<T.length;w++)if(T[w].name===S)return T[w]},setShadersFromConfig:function(S){var T,w=this.shaders,P=this.renderer;for(T=0;T<w.length;T++)w[T].destroy();var A="vertShader",R="fragShader",I="attributes",M=h(S,A,null),L=d.parseFragmentShaderMaxTextures(h(S,R,null),P.maxTextures),N=h(S,I,null),G=h(S,"shaders",[]),D=G.length;if(D===0)M&&L&&(this.shaders=[new g(this,"default",M,L,x(N))]);else{var B=[];for(T=0;T<D;T++){var $=G[T],k,X,Y,Z;if(typeof $=="string"?(k="default",X=M,Y=d.parseFragmentShaderMaxTextures($,P.maxTextures),Z=N):(k=h($,"name","default"),X=h($,A,M),Y=d.parseFragmentShaderMaxTextures(h($,R,L),P.maxTextures),Z=h($,I,N)),k==="default"){var Q=Y.split(`
`),j=Q[0].trim();j.indexOf("#define SHADER_NAME")>-1&&(k=j.substring(20))}X&&Y&&B.push(new g(this,k,X,Y,x(Z)))}this.shaders=B}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(S){return this.currentBatch={start:this.vertexCount,count:0,texture:[S],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=S,this.batch.push(this.currentBatch),0},addTextureToBatch:function(S){var T=this.currentBatch;T&&(T.texture.push(S),T.unit++,T.maxUnit++)},pushBatch:function(S){if(!this.currentBatch||this.forceZero&&S!==this.currentTexture)return this.createBatch(S);if(S===this.currentTexture)return this.currentUnit;var T=this.currentBatch,w=T.texture.indexOf(S);return w===-1?T.texture.length===this.renderer.maxTextures?this.createBatch(S):(T.unit++,T.maxUnit++,T.texture.push(S),this.currentUnit=T.unit,this.currentTexture=S,T.unit):(this.currentUnit=w,this.currentTexture=S,w)},setGameObject:function(S,T){return T===void 0&&(T=S.frame),this.pushBatch(T.source.glTexture)},shouldFlush:function(S){return S===void 0&&(S=0),this.vertexCount+S>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(S,T){(S!==this.width||T!==this.height)&&this.flush(),this.width=S,this.height=T;for(var w=this.renderTargets,P=0;P<w.length;P++)w[P].resize(S,T);return this.setProjectionMatrix(S,T),this.resizeUniform&&this.set2f(this.resizeUniform,S,T),this.emit(u.RESIZE,S,T,this),this.onResize(S,T),this},setProjectionMatrix:function(S,T){var w=this.projectionMatrix;if(!w)return this;this.projectionWidth=S,this.projectionHeight=T,w.ortho(0,S,T,0,-1e3,1e3);for(var P=this.shaders,A="uProjectionMatrix",R=0;R<P.length;R++){var I=P[R];I.hasUniform(A)&&(I.resetUniform(A),I.setMatrix4fv(A,!1,w.val,I))}return this},flipProjectionMatrix:function(S){S===void 0&&(S=!0);var T=this.projectionMatrix;if(!T)return this;var w=this.projectionWidth,P=this.projectionHeight;S?T.ortho(0,w,0,P,-1e3,1e3):T.ortho(0,w,P,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,T.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var S=this.renderer.projectionWidth,T=this.renderer.projectionHeight;(this.projectionWidth!==S||this.projectionHeight!==T)&&this.setProjectionMatrix(S,T)}},bind:function(S){if(S===void 0&&(S=this.currentShader),this.glReset)return this.rebind(S);var T=!1,w=this.gl;return w.getParameter(w.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(w.bindBuffer(w.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,T=!0),S.bind(T),this.currentShader=S,this.activeTextures.length=0,this.emit(u.BIND,this,S),this.onActive(S),this},rebind:function(S){this.activeBuffer=null,this.setVertexBuffer();for(var T=this.shaders,w=T.length-1;w>=0;w--){var P=T[w].rebind();(!S||P===S)&&(this.currentShader=P)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var S=this.shaders,T=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,T&&this.setVertexBuffer();for(var w=0;w<S.length;w++){var P=S[w];P.syncUniforms(),T&&P.rebind()}},setVertexBuffer:function(S){if(S===void 0&&(S=this.vertexBuffer),S!==this.activeBuffer){var T=this.gl;return this.gl.bindBuffer(T.ARRAY_BUFFER,S.webGLBuffer),this.activeBuffer=S,!0}return!1},preBatch:function(S){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(S),this},postBatch:function(S){return this.onDraw(this.currentRenderTarget),this.onPostBatch(S),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(S){if(S===void 0&&(S=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,S),this.onBeforeFlush(S);var T=this.gl,w=this.vertexCount,P=this.currentShader.vertexSize,A=this.topology;if(this.active){this.setVertexBuffer(),w===this.vertexCapacity?T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.DYNAMIC_DRAW):T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,w*P));var R,I,M,L=this.batch,N=this.activeTextures;if(this.forceZero)for(N[0]||T.activeTexture(T.TEXTURE0),R=0;R<L.length;R++)I=L[R],M=I.texture[0],N[0]!==M&&(T.bindTexture(T.TEXTURE_2D,M.webGLTexture),N[0]=M),T.drawArrays(A,I.start,I.count);else for(R=0;R<L.length;R++){I=L[R];for(var G=0;G<=I.maxUnit;G++)M=I.texture[G],N[G]!==M&&(T.activeTexture(T.TEXTURE0+G),T.bindTexture(T.TEXTURE_2D,M.webGLTexture),N[G]=M);T.drawArrays(A,I.start,I.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,S),this.onAfterFlush(S)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(S,T,w,P,A,R,I){var M=this.vertexViewF32,L=this.vertexViewU32,N=this.vertexCount*this.currentShader.vertexComponentCount-1;M[++N]=S,M[++N]=T,M[++N]=w,M[++N]=P,M[++N]=A,M[++N]=R,L[++N]=I,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j){j===void 0&&(j=this.currentUnit);var K=!1;this.shouldFlush(6)&&(this.flush(),K=!0),this.currentBatch||(j=this.setTexture2D(Q));var W=this.vertexViewF32,V=this.vertexViewU32,J=this.vertexCount*this.currentShader.vertexComponentCount-1;return W[++J]=T,W[++J]=w,W[++J]=N,W[++J]=G,W[++J]=j,W[++J]=Z,V[++J]=$,W[++J]=P,W[++J]=A,W[++J]=N,W[++J]=B,W[++J]=j,W[++J]=Z,V[++J]=X,W[++J]=R,W[++J]=I,W[++J]=D,W[++J]=B,W[++J]=j,W[++J]=Z,V[++J]=Y,W[++J]=T,W[++J]=w,W[++J]=N,W[++J]=G,W[++J]=j,W[++J]=Z,V[++J]=$,W[++J]=R,W[++J]=I,W[++J]=D,W[++J]=B,W[++J]=j,W[++J]=Z,V[++J]=Y,W[++J]=M,W[++J]=L,W[++J]=D,W[++J]=G,W[++J]=j,W[++J]=Z,V[++J]=k,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(S),K},batchTri:function(S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y){Y===void 0&&(Y=this.currentUnit);var Z=!1;this.shouldFlush(3)&&(this.flush(),Z=!0),this.currentBatch||(Y=this.setTexture2D(X));var Q=this.vertexViewF32,j=this.vertexViewU32,K=this.vertexCount*this.currentShader.vertexComponentCount-1;return Q[++K]=T,Q[++K]=w,Q[++K]=M,Q[++K]=L,Q[++K]=Y,Q[++K]=k,j[++K]=D,Q[++K]=P,Q[++K]=A,Q[++K]=M,Q[++K]=G,Q[++K]=Y,Q[++K]=k,j[++K]=B,Q[++K]=R,Q[++K]=I,Q[++K]=N,Q[++K]=G,Q[++K]=Y,Q[++K]=k,j[++K]=$,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(S),Z},drawFillRect:function(S,T,w,P,A,R,I,M){I===void 0&&(I=this.renderer.whiteTexture),M===void 0&&(M=!0),S=Math.floor(S),T=Math.floor(T);var L=Math.floor(S+w),N=Math.floor(T+P),G=this.setTexture2D(I),D=d.getTintAppendFloatAlphaAndSwap(A,R),B=0,$=0,k=1,X=1;M&&($=1,X=0),this.batchQuad(null,S,T,S,N,L,N,L,T,B,$,k,X,D,D,D,D,0,I,G)},setTexture2D:function(S){return S===void 0&&(S=this.renderer.whiteTexture),this.pushBatch(S)},bindTexture:function(S,T){T===void 0&&(T=0);var w=this.gl;return w.activeTexture(w.TEXTURE0+T),w.bindTexture(w.TEXTURE_2D,S.webGLTexture),this},bindRenderTarget:function(S,T){return this.bindTexture(S.texture,T)},setTime:function(S,T){return this.set1f(S,this.game.loop.getDuration(),T),this},setBoolean:function(S,T,w){return w===void 0&&(w=this.currentShader),w.setBoolean(S,T),this},set1f:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set1f(S,T),this},set2f:function(S,T,w,P){return P===void 0&&(P=this.currentShader),P.set2f(S,T,w),this},set3f:function(S,T,w,P,A){return A===void 0&&(A=this.currentShader),A.set3f(S,T,w,P),this},set4f:function(S,T,w,P,A,R){return R===void 0&&(R=this.currentShader),R.set4f(S,T,w,P,A),this},set1fv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set1fv(S,T),this},set2fv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set2fv(S,T),this},set3fv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set3fv(S,T),this},set4fv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set4fv(S,T),this},set1iv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set1iv(S,T),this},set2iv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set2iv(S,T),this},set3iv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set3iv(S,T),this},set4iv:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set4iv(S,T),this},set1i:function(S,T,w){return w===void 0&&(w=this.currentShader),w.set1i(S,T),this},set2i:function(S,T,w,P){return P===void 0&&(P=this.currentShader),P.set2i(S,T,w),this},set3i:function(S,T,w,P,A){return A===void 0&&(A=this.currentShader),A.set3i(S,T,w,P),this},set4i:function(S,T,w,P,A,R){return R===void 0&&(R=this.currentShader),R.set4i(S,T,w,P,A),this},setMatrix2fv:function(S,T,w,P){return P===void 0&&(P=this.currentShader),P.setMatrix2fv(S,T,w),this},setMatrix3fv:function(S,T,w,P){return P===void 0&&(P=this.currentShader),P.setMatrix3fv(S,T,w),this},setMatrix4fv:function(S,T,w,P){return P===void 0&&(P=this.currentShader),P.setMatrix4fv(S,T,w),this},destroy:function(){this.emit(u.DESTROY,this);var S,T=this.shaders;for(S=0;S<T.length;S++)T[S].destroy();var w=this.renderTargets;for(S=0;S<w.length;S++)w[S].destroy();var P=this.renderer;return P.deleteBuffer(this.vertexBuffer),P.off(l.RESIZE,this.resize,this),P.off(l.PRE_RENDER,this.onPreRender,this),P.off(l.RENDER,this.onRender,this),P.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});o.exports=y},74797:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95428),x=e(72905),c=e(19715),u=e(83419),h=e(8054),s=e(50792),l=e(92503),v=e(50030),d=e(37867),g=e(29747),y=e(7530),S=e(32302),T=e(97480),w=e(69442),P=e(70554),A=e(88815),R=e(26128),I=e(1482),M=e(82751),L=e(84387),N=e(93567),G=e(57183),D=new u({Extends:s,initialize:function($){s.call(this);var k=$.config,X={alpha:k.transparent,desynchronized:k.desynchronized,depth:!0,antialias:k.antialiasGL,premultipliedAlpha:k.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:k.failIfMajorPerformanceCaveat,powerPreference:k.powerPreference,preserveDrawingBuffer:k.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:k.clearBeforeRender,antialias:k.antialias,backgroundColor:k.backgroundColor,contextCreation:X,roundPixels:k.roundPixels,maxTextures:k.maxTextures,maxTextureSize:k.maxTextureSize,batchSize:k.batchSize,maxLights:k.maxLights,mipmapFilter:k.mipmapFilter},this.game=$,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=$.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=g,this.contextRestoredHandler=g,this.previousContextLostHandler=g,this.previousContextRestoredHandler=g,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(B){var $,k=this.game,X=this.canvas,Y=B.backgroundColor;if(k.config.context?$=k.config.context:$=X.getContext("webgl",B.contextCreation)||X.getContext("experimental-webgl",B.contextCreation),!$||$.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=$,this.setExtensions(),this.setContextHandlers(),k.context=$;for(var Z=0;Z<=27;Z++)this.blendModes.push({func:[$.ONE,$.ONE_MINUS_SRC_ALPHA],equation:$.FUNC_ADD});this.blendModes[1].func=[$.ONE,$.DST_ALPHA],this.blendModes[2].func=[$.DST_COLOR,$.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[$.ONE,$.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[$.ZERO,$.ONE_MINUS_SRC_ALPHA],equation:$.FUNC_REVERSE_SUBTRACT},this.glFormats=[$.BYTE,$.SHORT,$.UNSIGNED_BYTE,$.UNSIGNED_SHORT,$.FLOAT],this.glFuncMap={mat2:{func:$.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:$.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:$.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:$.uniform1f,length:1},"1fv":{func:$.uniform1fv,length:1},"1i":{func:$.uniform1i,length:1},"1iv":{func:$.uniform1iv,length:1},"2f":{func:$.uniform2f,length:2},"2fv":{func:$.uniform2fv,length:1},"2i":{func:$.uniform2i,length:2},"2iv":{func:$.uniform2iv,length:1},"3f":{func:$.uniform3f,length:3},"3fv":{func:$.uniform3fv,length:1},"3i":{func:$.uniform3i,length:3},"3iv":{func:$.uniform3iv,length:1},"4f":{func:$.uniform4f,length:4},"4fv":{func:$.uniform4fv,length:1},"4i":{func:$.uniform4i,length:4},"4iv":{func:$.uniform4iv,length:1}},(!B.maxTextures||B.maxTextures===-1)&&(B.maxTextures=$.getParameter($.MAX_TEXTURE_IMAGE_UNITS)),B.maxTextureSize||(B.maxTextureSize=$.getParameter($.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),$.disable($.DEPTH_TEST),$.disable($.CULL_FACE),$.enable($.BLEND),$.clearColor(Y.redGL,Y.greenGL,Y.blueGL,Y.alphaGL);var Q=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return Q.indexOf(B.mipmapFilter)!==-1&&(this.mipmapFilter=$[B.mipmapFilter]),this.maxTextures=P.checkShaderMax($,B.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new y(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),k.textures.once(w.READY,this.boot,this),this},boot:function(){var B=this.game,$=this.pipelines,k=B.scale.baseSize,X=k.width,Y=k.height;this.width=X,this.height=Y,this.isBooted=!0,this.renderTarget=new S(this,X,Y,1,0,!0,!0),this.maskTarget=new S(this,X,Y,1,0,!0,!0),this.maskSource=new S(this,X,Y,1,0,!0,!0);var Z=B.config;$.boot(Z.pipeline,Z.defaultPipeline,Z.autoMobilePipeline),this.blankTexture=B.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=B.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=B.textures.getFrame("__WHITE").glTexture;var Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,null),Q.enable(Q.SCISSOR_TEST),B.scale.on(T.RESIZE,this.onResize,this),this.resize(X,Y)},setExtensions:function(){var B=this.gl,$=B.getSupportedExtensions();this.supportedExtensions=$;var k="ANGLE_instanced_arrays";this.instancedArraysExtension=$.indexOf(k)>-1?B.getExtension(k):null;var X="OES_vertex_array_object";this.vaoExtension=$.indexOf(X)>-1?B.getExtension(X):null},setContextHandlers:function(B,$){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof B=="function"?this.contextLostHandler=B.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof $=="function"?this.contextRestoredHandler=$.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(B){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(l.LOSE_WEBGL,this),B.preventDefault()},dispatchContextRestored:function(B){var $=this.gl;if($.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(h.BlendModes.NORMAL),$.disable($.BLEND),$.disable($.DEPTH_TEST),$.enable($.CULL_FACE),this.compression=this.getCompressedTextures();var k=function(X){X.createResource()};a(this.glTextureWrappers,k),a(this.glBufferWrappers,k),a(this.glFramebufferWrappers,k),a(this.glProgramWrappers,k),a(this.glAttribLocationWrappers,k),a(this.glUniformLocationWrappers,k),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(l.RESTORE_WEBGL,this),B.preventDefault()},createTemporaryTextures:function(){for(var B=this.gl,$=0;$<this.maxTextures;$++){var k=B.createTexture();B.activeTexture(B.TEXTURE0+$),B.bindTexture(B.TEXTURE_2D,k),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push($)}},captureFrame:function(B,$){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(B,$,k){},stopCapture:function(){},onCapture:function(B){},onResize:function(B,$){($.width!==this.width||$.height!==this.height)&&this.resize($.width,$.height)},beginCapture:function(B,$){B===void 0&&(B=this.width),$===void 0&&($=this.height),this.renderTarget.bind(!0,B,$),this.setProjectionMatrix(B,$)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(B,$){var k=this.gl;return this.width=B,this.height=$,this.setProjectionMatrix(B,$),k.viewport(0,0,B,$),this.drawingBufferHeight=k.drawingBufferHeight,k.scissor(0,k.drawingBufferHeight-$,B,$),this.defaultScissor[2]=B,this.defaultScissor[3]=$,this.emit(l.RESIZE,B,$),this},getCompressedTextures:function(){var B="WEBGL_compressed_texture_",$="WEBKIT_"+B,k="EXT_texture_compression_",X=function(Z,Q){var j=Z.getExtension(B+Q)||Z.getExtension($+Q)||Z.getExtension(k+Q);if(j){var K={};for(var W in j)K[j[W]]=W;return K}},Y=this.gl;return{ETC:X(Y,"etc"),ETC1:X(Y,"etc1"),ATC:X(Y,"atc"),ASTC:X(Y,"astc"),BPTC:X(Y,"bptc"),RGTC:X(Y,"rgtc"),PVRTC:X(Y,"pvrtc"),S3TC:X(Y,"s3tc"),S3TCSRGB:X(Y,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(B,$){var k=this.compression[B.toUpperCase()];if($ in k)return k[$]},supportsCompressedTexture:function(B,$){var k=this.compression[B.toUpperCase()];return k?$?$ in k:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(B,$){return(B!==this.projectionWidth||$!==this.projectionHeight)&&(this.projectionWidth=B,this.projectionHeight=$,this.projectionMatrix.ortho(0,B,$,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(B){return this.supportedExtensions?this.supportedExtensions.indexOf(B):!1},getExtension:function(B){return this.hasExtension(B)?(B in this.extensions||(this.extensions[B]=this.gl.getExtension(B)),this.extensions[B]):null},flush:function(){this.pipelines.flush()},pushScissor:function(B,$,k,X,Y){Y===void 0&&(Y=this.drawingBufferHeight);var Z=this.scissorStack,Q=[B,$,k,X];return Z.push(Q),this.setScissor(B,$,k,X,Y),this.currentScissor=Q,Q},setScissor:function(B,$,k,X,Y){Y===void 0&&(Y=this.drawingBufferHeight);var Z=this.gl,Q=this.currentScissor,j=k>0&&X>0;if(Q&&j){var K=Q[0],W=Q[1],V=Q[2],J=Q[3];j=K!==B||W!==$||V!==k||J!==X}j&&(this.flush(),Z.scissor(B,Y-$-X,k,X))},resetScissor:function(){var B=this.gl;B.enable(B.SCISSOR_TEST);var $=this.currentScissor;if($){var k=$[0],X=$[1],Y=$[2],Z=$[3];Y>0&&Z>0&&B.scissor(k,this.drawingBufferHeight-X-Z,Y,Z)}},popScissor:function(){var B=this.scissorStack;B.pop();var $=B[B.length-1];$&&this.setScissor($[0],$[1],$[2],$[3]),this.currentScissor=$},hasActiveStencilMask:function(){var B=this.currentMask.mask,$=this.currentCameraMask.mask;return B&&B.isStencil||$&&$.isStencil},resetViewport:function(){var B=this.gl;B.viewport(0,0,this.width,this.height),this.drawingBufferHeight=B.drawingBufferHeight},setBlendMode:function(B,$){$===void 0&&($=!1);var k=this.gl,X=this.blendModes[B];return $||B!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==B?(this.flush(),k.enable(k.BLEND),k.blendEquation(X.equation),X.func.length>2?k.blendFuncSeparate(X.func[0],X.func[1],X.func[2],X.func[3]):k.blendFunc(X.func[0],X.func[1]),this.currentBlendMode=B,!0):!1},addBlendMode:function(B,$){var k=this.blendModes.push({func:B,equation:$});return k-1},updateBlendMode:function(B,$,k){return this.blendModes[B]&&(this.blendModes[B].func=$,k&&(this.blendModes[B].equation=k)),this},removeBlendMode:function(B){return B>17&&this.blendModes[B]&&this.blendModes.splice(B,1),this},pushFramebuffer:function(B,$,k,X,Y){return B===this.currentFramebuffer?this:(this.fboStack.push(B),this.setFramebuffer(B,$,k,X,Y))},setFramebuffer:function(B,$,k,X,Y){if($===void 0&&($=!1),k===void 0&&(k=!0),X===void 0&&(X=null),Y===void 0&&(Y=!1),B===this.currentFramebuffer)return this;var Z=this.gl,Q=this.width,j=this.height;return B&&B.renderTexture&&k?(Q=B.renderTexture.width,j=B.renderTexture.height):this.flush(),B?Z.bindFramebuffer(Z.FRAMEBUFFER,B.webGLFramebuffer):Z.bindFramebuffer(Z.FRAMEBUFFER,null),k&&Z.viewport(0,0,Q,j),X&&Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,X.webGLTexture,0),Y&&(Z.clearColor(0,0,0,0),Z.clear(Z.COLOR_BUFFER_BIT)),$&&(B?(this.drawingBufferHeight=j,this.pushScissor(0,0,Q,j)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=B,this},popFramebuffer:function(B,$){B===void 0&&(B=!1),$===void 0&&($=!0);var k=this.fboStack;k.pop();var X=k[k.length-1];return X||(X=null),this.setFramebuffer(X,B,$),X},restoreFramebuffer:function(B,$){B===void 0&&(B=!1),$===void 0&&($=!0);var k=this.fboStack,X=k[k.length-1];X||(X=null),this.currentFramebuffer=null,this.setFramebuffer(X,B,$)},setProgram:function(B){return B!==this.currentProgram?(this.flush(),this.gl.useProgram(B.webGLProgram),this.currentProgram=B,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(B,$,k,X,Y){Y===void 0&&(Y=!1);var Z=this.gl,Q=Z.NEAREST,j=Z.NEAREST,K=Z.CLAMP_TO_EDGE,W=null;$=B?B.width:$,k=B?B.height:k;var V=v($,k);if(V&&!Y&&(K=Z.REPEAT),X===h.ScaleModes.LINEAR&&this.config.antialias){var J=B&&B.compressed,ee=!J&&V||J&&B.mipmaps.length>1;Q=this.mipmapFilter&&ee?this.mipmapFilter:Z.LINEAR,j=Z.LINEAR}return!B&&typeof $=="number"&&typeof k=="number"?W=this.createTexture2D(0,Q,j,K,K,Z.RGBA,null,$,k):W=this.createTexture2D(0,Q,j,K,K,Z.RGBA,B),W},createTexture2D:function(B,$,k,X,Y,Z,Q,j,K,W,V,J){typeof j!="number"&&(j=Q?Q.width:1),typeof K!="number"&&(K=Q?Q.height:1);var ee=new M(this.gl,B,$,k,X,Y,Z,Q,j,K,W,V,J);return this.glTextureWrappers.push(ee),ee},createFramebuffer:function(B,$,k,X){this.currentFramebuffer=null;var Y=new L(this.gl,B,$,k,X);return this.glFramebufferWrappers.push(Y),Y},beginBitmapMask:function(B,$){var k=this.gl;k&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==B&&(this.currentMask.mask=B,this.currentMask.camera=$))},drawBitmapMask:function(B,$,k){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),B.renderWebGL(this,B,$),this.maskSource.unbind(!0),this.maskTarget.unbind();var X=this.gl,Y=this.getCurrentStencilMask();Y?(X.enable(X.STENCIL_TEST),Y.mask.applyStencil(this,Y.camera,!0)):this.currentMask.mask=null,this.pipelines.set(k),X.activeTexture(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,this.maskTarget.texture.webGLTexture),X.activeTexture(X.TEXTURE1),X.bindTexture(X.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(B,$){var k=new I(this.gl,B,$);return this.glProgramWrappers.push(k),k},createVertexBuffer:function(B,$){var k=this.gl,X=new R(k,B,k.ARRAY_BUFFER,$);return this.glBufferWrappers.push(X),X},createAttribLocation:function(B,$){var k=new N(this.gl,B,$);return this.glAttribLocationWrappers.push(k),k},createUniformLocation:function(B,$){var k=new G(this.gl,B,$);return this.glUniformLocationWrappers.push(k),k},createIndexBuffer:function(B,$){var k=this.gl,X=new R(k,B,k.ELEMENT_ARRAY_BUFFER,$);return this.glBufferWrappers.push(X),X},deleteTexture:function(B){if(B)return x(this.glTextureWrappers,B),B.destroy(),this},deleteFramebuffer:function(B){return B?(x(this.fboStack,B),x(this.glFramebufferWrappers,B),B.destroy(),this):this},deleteProgram:function(B){return B&&(x(this.glProgramWrappers,B),B.destroy()),this},deleteAttribLocation:function(B){return B&&(x(this.glAttribLocationWrappers,B),B.destroy()),this},deleteUniformLocation:function(B){return B&&(x(this.glUniformLocationWrappers,B),B.destroy()),this},deleteBuffer:function(B){return B?(x(this.glBufferWrappers,B),B.destroy(),this):this},preRenderCamera:function(B){var $=B.x,k=B.y,X=B.width,Y=B.height,Z=B.backgroundColor;if(B.emit(c.PRE_RENDER,B),this.pipelines.preBatchCamera(B),this.pushScissor($,k,X,Y),B.mask&&(this.currentCameraMask.mask=B.mask,this.currentCameraMask.camera=B._maskCamera,B.mask.preRenderWebGL(this,B,B._maskCamera)),Z.alphaGL>0){var Q=this.pipelines.setMulti();Q.drawFillRect($,k,X,Y,P.getTintFromFloats(Z.blueGL,Z.greenGL,Z.redGL,1),Z.alphaGL)}},getCurrentStencilMask:function(){var B=null,$=this.maskStack,k=this.currentCameraMask;return $.length>0?B=$[$.length-1]:k.mask&&k.mask.isStencil&&(B=k),B},postRenderCamera:function(B){var $=B.flashEffect,k=B.fadeEffect;if($.isRunning||k.isRunning||k.isComplete){var X=this.pipelines.setMulti();$.postRenderWebGL(X,P.getTintFromFloats),k.postRenderWebGL(X,P.getTintFromFloats)}B.dirty=!1,this.popScissor(),B.mask&&(this.currentCameraMask.mask=null,B.mask.postRenderWebGL(this,B._maskCamera)),this.pipelines.postBatchCamera(B),B.emit(c.POST_RENDER,B)},preRender:function(){if(!this.contextLost){var B=this.gl;if(B.bindFramebuffer(B.FRAMEBUFFER,null),this.emit(l.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var $=this.config.backgroundColor;B.clearColor($.redGL,$.greenGL,$.blueGL,$.alphaGL),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)}B.enable(B.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&B.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(l.PRE_RENDER)}},render:function(B,$,k){if(!this.contextLost){var X=$.length;if(this.emit(l.RENDER,B,k),this.preRenderCamera(k),X===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(k);return}this.currentType="";for(var Y=this.currentMask,Z=0;Z<X;Z++){this.finalType=Z===X-1;var Q=$[Z],j=Q.mask;Y=this.currentMask,Y.mask&&Y.mask!==j&&Y.mask.postRenderWebGL(this,Y.camera),j&&Y.mask!==j&&j.preRenderWebGL(this,Q,k),Q.blendMode!==this.currentBlendMode&&this.setBlendMode(Q.blendMode);var K=Q.type;K!==this.currentType&&(this.newType=!0,this.currentType=K),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=$[Z+1].type===this.currentType,Q.renderWebGL(this,Q,k),this.newType=!1}Y=this.currentMask,Y.mask&&Y.mask.postRenderWebGL(this,Y.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(k)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var B=this.snapshotState;B.callback&&(A(this.gl,B),B.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var B=this.gl,$=this.getCurrentStencilMask();if($){var k=$.mask;B.enable(B.STENCIL_TEST),k.invertAlpha?B.stencilFunc(B.NOTEQUAL,k.level,255):B.stencilFunc(B.EQUAL,k.level,255)}},snapshot:function(B,$,k){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,B,$,k)},snapshotArea:function(B,$,k,X,Y,Z,Q){var j=this.snapshotState;return j.callback=Y,j.type=Z,j.encoder=Q,j.getPixel=!1,j.x=B,j.y=$,j.width=k,j.height=X,this},snapshotPixel:function(B,$,k){return this.snapshotArea(B,$,1,1,k),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(B,$,k,X,Y,Z,Q,j,K,W,V){Y===void 0&&(Y=!1),Z===void 0&&(Z=0),Q===void 0&&(Q=0),j===void 0&&(j=$),K===void 0&&(K=k),W==="pixel"&&(Y=!0,W="image/png");var J=this.currentFramebuffer;this.snapshotArea(Z,Q,j,K,X,W,V);var ee=this.snapshotState;return ee.getPixel=Y,ee.isFramebuffer=!0,ee.bufferWidth=$,ee.bufferHeight=k,ee.width=Math.min(ee.width,$),ee.height=Math.min(ee.height,k),this.setFramebuffer(B),A(this.gl,ee),this.setFramebuffer(J),ee.callback=null,ee.isFramebuffer=!1,this},canvasToTexture:function(B,$,k,X){k===void 0&&(k=!1),X===void 0&&(X=!1);var Y=this.gl,Z=Y.NEAREST,Q=Y.NEAREST,j=B.width,K=B.height,W=Y.CLAMP_TO_EDGE,V=v(j,K);return!k&&V&&(W=Y.REPEAT),this.config.antialias&&(Z=V&&this.mipmapFilter?this.mipmapFilter:Y.LINEAR,Q=Y.LINEAR),$?($.update(B,j,K,X,W,W,Z,Q,$.format),$):this.createTexture2D(0,Z,Q,W,W,Y.RGBA,B,j,K,!0,!1,X)},createCanvasTexture:function(B,$,k){return $===void 0&&($=!1),k===void 0&&(k=!1),this.canvasToTexture(B,null,$,k)},updateCanvasTexture:function(B,$,k,X){return k===void 0&&(k=!1),X===void 0&&(X=!1),this.canvasToTexture(B,$,X,k)},videoToTexture:function(B,$,k,X){k===void 0&&(k=!1),X===void 0&&(X=!1);var Y=this.gl,Z=Y.NEAREST,Q=Y.NEAREST,j=B.videoWidth,K=B.videoHeight,W=Y.CLAMP_TO_EDGE,V=v(j,K);return!k&&V&&(W=Y.REPEAT),this.config.antialias&&(Z=V&&this.mipmapFilter?this.mipmapFilter:Y.LINEAR,Q=Y.LINEAR),$?($.update(B,j,K,X,W,W,Z,Q,$.format),$):this.createTexture2D(0,Z,Q,W,W,Y.RGBA,B,j,K,!0,!0,X)},createVideoTexture:function(B,$,k){return $===void 0&&($=!1),k===void 0&&(k=!1),this.videoToTexture(B,null,$,k)},updateVideoTexture:function(B,$,k,X){return k===void 0&&(k=!1),X===void 0&&(X=!1),this.videoToTexture(B,$,X,k)},createUint8ArrayTexture:function(B,$,k){var X=this.gl,Y=X.NEAREST,Z=X.NEAREST,Q=X.CLAMP_TO_EDGE,j=v($,k);return j&&(Q=X.REPEAT),this.createTexture2D(0,Y,Z,Q,Q,X.RGBA,B,$,k)},setTextureFilter:function(B,$){var k=this.gl,X=$===0?k.LINEAR:k.NEAREST;k.activeTexture(k.TEXTURE0);var Y=k.getParameter(k.TEXTURE_BINDING_2D);return k.bindTexture(k.TEXTURE_2D,B.webGLTexture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,X),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,X),B.minFilter=X,B.magFilter=X,Y&&k.bindTexture(k.TEXTURE_2D,Y),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var B=function($){$.destroy()};a(this.glAttribLocationWrappers,B),a(this.glBufferWrappers,B),a(this.glFramebufferWrappers,B),a(this.glProgramWrappers,B),a(this.glTextureWrappers,B),a(this.glUniformLocationWrappers,B),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});o.exports=D},38683:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95428),c=e(95540),u=e(14500),h=new a({initialize:function(l,v,d,g,y){this.pipeline=l,this.name=v,this.renderer=l.renderer,this.gl=this.renderer.gl,this.fragSrc=g,this.vertSrc=d,this.program=this.renderer.createProgram(d,g),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(y),this.createUniforms()},createAttributes:function(s){var l=0,v=0,d=[];this.vertexComponentCount=0;for(var g=0;g<s.length;g++){var y=s[g],S=y.name,T=c(y,"size",1),w=c(y,"type",u.FLOAT),P=w.enum,A=w.size,R=!!y.normalized;d.push({name:S,size:T,type:P,normalized:R,offset:v,enabled:!1,location:-1}),A===4?l+=T:l++,v+=T*A}this.vertexSize=v,this.vertexComponentCount=l,this.attributes=d},bind:function(s,l){return s===void 0&&(s=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),s&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(s){s===void 0&&(s=!1);for(var l=this.gl,v=this.renderer,d=this.vertexSize,g=this.attributes,y=this.program,S=0;S<g.length;S++){var T=g[S],w=T.size,P=T.type,A=T.offset,R=T.enabled,I=T.location,M=!!T.normalized;if(s){I!==-1&&v.deleteAttribLocation(I);var L=this.renderer.createAttribLocation(y,T.name);L.webGLAttribLocation>=0?(l.enableVertexAttribArray(L.webGLAttribLocation),l.vertexAttribPointer(L.webGLAttribLocation,w,P,M,d,A),T.enabled=!0,T.location=L):L.webGLAttribLocation!==-1&&l.disableVertexAttribArray(L.webGLAttribLocation)}else R?l.vertexAttribPointer(I.webGLAttribLocation,w,P,M,d,A):!R&&I!==-1&&I.webGLAttribLocation>-1&&(l.disableVertexAttribArray(I.webGLAttribLocation),T.location=-1)}return this},createUniforms:function(){var s=this.gl,l=this.program,v=this.uniforms,d,g,y,S=s.getProgramParameter(l.webGLProgram,s.ACTIVE_UNIFORMS);for(d=0;d<S;d++){var T=s.getActiveUniform(l.webGLProgram,d);if(T){g=T.name,y=this.renderer.createUniformLocation(l,g),y!==null&&(v[g]={name:g,location:y,setter:null,value1:null,value2:null,value3:null,value4:null});var w=g.indexOf("[");w>0&&(g=g.substr(0,w),v.hasOwnProperty(g)||(y=this.renderer.createUniformLocation(l,g),y!==null&&(v[g]={name:g,location:y,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var s=this.gl;this.renderer.setProgram(this.program);for(var l in this.uniforms){var v=this.uniforms[l];v.setter&&v.setter.call(s,v.location.webGLUniformLocation,v.value1,v.value2,v.value3,v.value4)}},hasUniform:function(s){return this.uniforms.hasOwnProperty(s)},resetUniform:function(s){var l=this.uniforms[s];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(s,l,v,d){var g=this.uniforms[l];return g?((d||g.value1!==v)&&(g.setter||(g.setter=s),g.value1=v,this.renderer.setProgram(this.program),s.call(this.gl,g.location.webGLUniformLocation,v),this.pipeline.currentShader=this),this):this},setUniform2:function(s,l,v,d,g){var y=this.uniforms[l];return y?((g||y.value1!==v||y.value2!==d)&&(y.setter||(y.setter=s),y.value1=v,y.value2=d,this.renderer.setProgram(this.program),s.call(this.gl,y.location.webGLUniformLocation,v,d),this.pipeline.currentShader=this),this):this},setUniform3:function(s,l,v,d,g,y){var S=this.uniforms[l];return S?((y||S.value1!==v||S.value2!==d||S.value3!==g)&&(S.setter||(S.setter=s),S.value1=v,S.value2=d,S.value3=g,this.renderer.setProgram(this.program),s.call(this.gl,S.location.webGLUniformLocation,v,d,g),this.pipeline.currentShader=this),this):this},setUniform4:function(s,l,v,d,g,y,S){var T=this.uniforms[l];return T?((S||T.value1!==v||T.value2!==d||T.value3!==g||T.value4!==y)&&(T.setter||(T.setter=s),T.value1=v,T.value2=d,T.value3=g,T.value4=y,this.renderer.setProgram(this.program),s.call(this.gl,T.location.webGLUniformLocation,v,d,g,y),this.pipeline.currentShader=this),this):this},setBoolean:function(s,l){return this.setUniform1(this.gl.uniform1i,s,Number(l))},set1f:function(s,l){return this.setUniform1(this.gl.uniform1f,s,l)},set2f:function(s,l,v){return this.setUniform2(this.gl.uniform2f,s,l,v)},set3f:function(s,l,v,d){return this.setUniform3(this.gl.uniform3f,s,l,v,d)},set4f:function(s,l,v,d,g){return this.setUniform4(this.gl.uniform4f,s,l,v,d,g)},set1fv:function(s,l){return this.setUniform1(this.gl.uniform1fv,s,l,!0)},set2fv:function(s,l){return this.setUniform1(this.gl.uniform2fv,s,l,!0)},set3fv:function(s,l){return this.setUniform1(this.gl.uniform3fv,s,l,!0)},set4fv:function(s,l){return this.setUniform1(this.gl.uniform4fv,s,l,!0)},set1iv:function(s,l){return this.setUniform1(this.gl.uniform1iv,s,l,!0)},set2iv:function(s,l){return this.setUniform1(this.gl.uniform2iv,s,l,!0)},set3iv:function(s,l){return this.setUniform1(this.gl.uniform3iv,s,l,!0)},set4iv:function(s,l){return this.setUniform1(this.gl.uniform4iv,s,l,!0)},set1i:function(s,l){return this.setUniform1(this.gl.uniform1i,s,l)},set2i:function(s,l,v){return this.setUniform2(this.gl.uniform2i,s,l,v)},set3i:function(s,l,v,d){return this.setUniform3(this.gl.uniform3i,s,l,v,d)},set4i:function(s,l,v,d,g){return this.setUniform4(this.gl.uniform4i,s,l,v,d,g)},setMatrix2fv:function(s,l,v){return this.setUniform2(this.gl.uniformMatrix2fv,s,l,v,!0)},setMatrix3fv:function(s,l,v){return this.setUniform2(this.gl.uniformMatrix3fv,s,l,v,!0)},setMatrix4fv:function(s,l,v){return this.setUniform2(this.gl.uniformMatrix4fv,s,l,v,!0)},createProgram:function(s,l){return s===void 0&&(s=this.vertSrc),l===void 0&&(l=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=s,this.fragSrc=l,this.program=this.renderer.createProgram(s,l),this.createUniforms(),this.rebind()},destroy:function(){var s=this.renderer;x(this.uniforms,function(l){s.deleteUniformLocation(l.location)}),this.uniforms=null,x(this.attributes,function(l){s.deleteAttribLocation(l.location)}),this.attributes=null,s.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});o.exports=h},14500:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};o.exports=E},4159:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14500),x=e(79291),c={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};c=x(!1,c,a),o.exports=c},31302:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(78908),u=e(85191),h=e(14500),s=e(29100),l=new a({Extends:s,initialize:function(d){d.fragShader=x(d,"fragShader",c),d.vertShader=x(d,"vertShader",u),d.batchSize=x(d,"batchSize",1),d.vertices=x(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=x(d,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),s.call(this,d)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,d){s.prototype.resize.call(this,v,d),this.set2f("uResolution",v,d)},beginMask:function(v,d,g){this.renderer.beginBitmapMask(v,g)},endMask:function(v,d,g){var y=this.gl,S=this.renderer,T=v.bitmapMask;T&&y&&(S.drawBitmapMask(T,d,this),g&&this.set2f("uResolution",g.width,g.height),this.set1i("uInvertMaskAlpha",v.invertAlpha),y.drawArrays(this.topology,0,3),g&&this.set2f("uResolution",this.width,this.height),y.bindTexture(y.TEXTURE_2D,null))}});o.exports=l},92651:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(58918),c=e(14811),u=e(95540),h=e(43558),s=e(89350),l=e(70554),v=new a({Extends:h,initialize:function(g){g.shaders=[l.setGlowQuality(s.FXGlowFrag,g.game),s.FXShadowFrag,s.FXPixelateFrag,s.FXVignetteFrag,s.FXShineFrag,s.FXBlurLowFrag,s.FXBlurMedFrag,s.FXBlurHighFrag,s.FXGradientFrag,s.FXBloomFrag,s.ColorMatrixFrag,s.FXCircleFrag,s.FXBarrelFrag,s.FXDisplacementFrag,s.FXWipeFrag,s.FXBokehFrag],h.call(this,g);var y=this.game;this.glow=new x.Glow(y),this.shadow=new x.Shadow(y),this.pixelate=new x.Pixelate(y),this.vignette=new x.Vignette(y),this.shine=new x.Shine(y),this.gradient=new x.Gradient(y),this.circle=new x.Circle(y),this.barrel=new x.Barrel(y),this.wipe=new x.Wipe(y),this.bokeh=new x.Bokeh(y);var S=[];S[c.GLOW]=this.onGlow,S[c.SHADOW]=this.onShadow,S[c.PIXELATE]=this.onPixelate,S[c.VIGNETTE]=this.onVignette,S[c.SHINE]=this.onShine,S[c.BLUR]=this.onBlur,S[c.GRADIENT]=this.onGradient,S[c.BLOOM]=this.onBloom,S[c.COLOR_MATRIX]=this.onColorMatrix,S[c.CIRCLE]=this.onCircle,S[c.BARREL]=this.onBarrel,S[c.DISPLACEMENT]=this.onDisplacement,S[c.WIPE]=this.onWipe,S[c.BOKEH]=this.onBokeh,this.fxHandlers=S,this.source,this.target,this.swap},onDraw:function(d,g,y){this.source=d,this.target=g,this.swap=y;var S=d.width,T=d.height,w=this.tempSprite,P=this.fxHandlers;if(w&&w.preFX)for(var A=w.preFX.list,R=0;R<A.length;R++){var I=A[R];I.active&&P[I.type].call(this,I,S,T)}this.drawToGame(this.source)},runDraw:function(){var d=this.source,g=this.target;this.copy(d,g),this.source=g,this.target=d},onGlow:function(d,g,y){var S=this.shaders[c.GLOW];this.setShader(S),this.glow.onPreRender(d,S,g,y),this.runDraw()},onShadow:function(d){var g=this.shaders[c.SHADOW];this.setShader(g),this.shadow.onPreRender(d,g),this.runDraw()},onPixelate:function(d,g,y){var S=this.shaders[c.PIXELATE];this.setShader(S),this.pixelate.onPreRender(d,S,g,y),this.runDraw()},onVignette:function(d){var g=this.shaders[c.VIGNETTE];this.setShader(g),this.vignette.onPreRender(d,g),this.runDraw()},onShine:function(d,g,y){var S=this.shaders[c.SHINE];this.setShader(S),this.shine.onPreRender(d,S,g,y),this.runDraw()},onBlur:function(d,g,y){var S=u(d,"quality"),T=this.shaders[c.BLUR+S];this.setShader(T),this.set1i("uMainSampler",0),this.set2f("resolution",g,y),this.set1f("strength",u(d,"strength")),this.set3fv("color",u(d,"glcolor"));for(var w=u(d,"x"),P=u(d,"y"),A=u(d,"steps"),R=0;R<A;R++)this.set2f("offset",w,0),this.runDraw(),this.set2f("offset",0,P),this.runDraw()},onGradient:function(d){var g=this.shaders[c.GRADIENT];this.setShader(g),this.gradient.onPreRender(d,g),this.runDraw()},onBloom:function(d,g,y){var S=this.shaders[c.BLOOM];this.copySprite(this.source,this.swap),this.setShader(S),this.set1i("uMainSampler",0),this.set1f("strength",u(d,"blurStrength")),this.set3fv("color",u(d,"glcolor"));for(var T=2/g*u(d,"offsetX"),w=2/y*u(d,"offsetY"),P=u(d,"steps"),A=0;A<P;A++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,w),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(d,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(d){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",d.getData()),this.set1f("uAlpha",d.alpha),this.runDraw()},onCircle:function(d,g,y){var S=this.shaders[c.CIRCLE];this.setShader(S),this.circle.onPreRender(d,S,g,y),this.runDraw()},onBarrel:function(d){var g=this.shaders[c.BARREL];this.setShader(g),this.barrel.onPreRender(d,g),this.runDraw()},onDisplacement:function(d){this.setShader(this.shaders[c.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",d.x,d.y),this.bindTexture(d.glTexture,1),this.runDraw()},onWipe:function(d){var g=this.shaders[c.WIPE];this.setShader(g),this.wipe.onPreRender(d,g),this.runDraw()},onBokeh:function(d,g,y){var S=this.shaders[c.BOKEH];this.setShader(S),this.bokeh.onPreRender(d,S,g,y),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});o.exports=v},96569:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(31063),u=e(57516),h=e(61340),s=e(26099),l=e(29100),v=new a({Extends:u,initialize:function(g){var y=x(g,"fragShader",c);g.fragShader=y.replace("%LIGHT_COUNT%",g.game.renderer.config.maxLights),u.call(this,g),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new s,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){l.prototype.boot.call(this)},onRender:function(d,g){var y=d.sys.lights;if(this.lightsActive=!1,!(!y||!y.active)){var S=y.getLights(g),T=S.length;this.lightsActive=!0;var w,P=this.renderer,A=P.height,R=g.matrix,I=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",g.x,g.y,g.rotation,g.zoom),this.set3f("uAmbientLightColor",y.ambientColor.r,y.ambientColor.g,y.ambientColor.b),this.set1i("uLightCount",T),w=0;w<T;w++){var M=S[w].light,L=M.color,N="uLights["+w+"].";R.transformPoint(M.x,M.y,I),this.set2f(N+"position",I.x-g.scrollX*M.scrollFactorX*g.zoom,A-(I.y-g.scrollY*M.scrollFactorY*g.zoom)),this.set3f(N+"color",L.r,L.g,L.b),this.set1f(N+"intensity",M.intensity),this.set1f(N+"radius",M.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(d){if(d!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var g=this.inverseRotationMatrix;if(d){var y=-d,S=Math.cos(y),T=Math.sin(y);g[1]=T,g[3]=-T,g[0]=g[4]=S}else g[0]=g[4]=1,g[1]=g[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,g),this.currentNormalMapRotation=d}},setTexture2D:function(d,g){var y=this.renderer;d===void 0&&(d=y.whiteTexture);var S=this.getNormalMap(g);this.isNewNormalMap(d,S)&&(this.flush(),this.createBatch(d),this.addTextureToBatch(S),this.currentNormalMap=S);var T=0;if(g&&g.parentContainer){var w=g.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);T=w.rotationNormalized}else g&&(T=g.rotation);return this.currentBatch===null&&(this.createBatch(d),this.addTextureToBatch(S)),this.setNormalMapRotation(T),0},setGameObject:function(d,g){g===void 0&&(g=d.frame);var y=g.glTexture,S=this.getNormalMap(d);if(this.isNewNormalMap(y,S)&&(this.flush(),this.createBatch(y),this.addTextureToBatch(S),this.currentNormalMap=S),d.parentContainer){var T=d.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(T.rotationNormalized)}else this.setNormalMapRotation(d.rotation);return this.currentBatch===null&&(this.createBatch(y),this.addTextureToBatch(S)),0},isNewNormalMap:function(d,g){return this.currentTexture!==d||this.currentNormalMap!==g},getNormalMap:function(d){var g;if(d)d.displayTexture?g=d.displayTexture.dataSource[d.displayFrame.sourceIndex]:d.texture?g=d.texture.dataSource[d.frame.sourceIndex]:d.tileset&&(Array.isArray(d.tileset)?g=d.tileset[0].image.dataSource[0]:g=d.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return g?g.glTexture:this.renderer.normalTexture},batchSprite:function(d,g,y){this.lightsActive&&u.prototype.batchSprite.call(this,d,g,y)},batchTexture:function(d,g,y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j,K,W,V,J,ee,te,ne,se,ae){this.lightsActive&&u.prototype.batchTexture.call(this,d,g,y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j,K,W,V,J,ee,te,ne,se,ae)},batchTextureFrame:function(d,g,y,S,T,w,P){this.lightsActive&&u.prototype.batchTextureFrame.call(this,d,g,y,S,T,w,P)}});o.exports=v},56527:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(57516),u=e(45561),h=e(60722),s=e(14500),l=e(29100),v=new a({Extends:c,initialize:function(g){g.fragShader=x(g,"fragShader",u),g.vertShader=x(g,"vertShader",h),g.attributes=x(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:s.UNSIGNED_BYTE,normalized:!0}]),g.forceZero=!0,g.resizeUniform="uResolution",c.call(this,g)},boot:function(){l.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height)}});o.exports=v},57516:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94811),c=e(95540),u=e(98840),h=e(44667),s=e(61340),l=e(70554),v=e(14500),d=e(29100),g=new a({Extends:d,initialize:function(S){var T=S.game.renderer,w=c(S,"fragShader",u);S.fragShader=l.parseFragmentShaderMaxTextures(w,T.maxTextures),S.vertShader=c(S,"vertShader",h),S.attributes=c(S,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),S.resizeUniform="uResolution",d.call(this,S),this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this);var y=this.renderer;this.set1iv("uMainSampler",y.textureIndexes),this.set2f("uResolution",y.width,y.height)},batchSprite:function(y,S,T){this.manager.set(this,y);var w=this._tempMatrix1,P=this._tempMatrix2,A=this._tempMatrix3,R=y.frame,I=R.glTexture,M=R.u0,L=R.v0,N=R.u1,G=R.v1,D=R.x,B=R.y,$=R.cutWidth,k=R.cutHeight,X=R.customPivot,Y=y.displayOriginX,Z=y.displayOriginY,Q=-Y+D,j=-Z+B;if(y.isCropped){var K=y._crop;(K.flipX!==y.flipX||K.flipY!==y.flipY)&&R.updateCropUVs(K,y.flipX,y.flipY),M=K.u0,L=K.v0,N=K.u1,G=K.v1,$=K.width,k=K.height,D=K.x,B=K.y,Q=-Y+D,j=-Z+B}var W=1,V=1;y.flipX&&(X||(Q+=-R.realWidth+Y*2),W=-1),y.flipY&&(X||(j+=-R.realHeight+Z*2),V=-1);var J=y.x,ee=y.y;S.roundPixels&&(J=Math.floor(J),ee=Math.floor(ee)),P.applyITRS(J,ee,y.rotation,y.scaleX*W,y.scaleY*V),w.copyFrom(S.matrix),T?(w.multiplyWithOffset(T,-S.scrollX*y.scrollFactorX,-S.scrollY*y.scrollFactorY),P.e=J,P.f=ee):(P.e-=S.scrollX*y.scrollFactorX,P.f-=S.scrollY*y.scrollFactorY),w.multiply(P,A);var te=A.setQuad(Q,j,Q+$,j+k,S.renderRoundPixels),ne=l.getTintAppendFloatAlpha,se=S.alpha,ae=ne(y.tintTopLeft,se*y._alphaTL),ue=ne(y.tintTopRight,se*y._alphaTR),de=ne(y.tintBottomLeft,se*y._alphaBL),fe=ne(y.tintBottomRight,se*y._alphaBR);this.shouldFlush(6)&&this.flush();var ye=this.setGameObject(y,R);this.manager.preBatch(y),this.batchQuad(y,te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],M,L,N,G,ae,ue,de,fe,y.tintFill,I,ye),this.manager.postBatch(y)},batchTexture:function(y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j,K,W,V,J,ee,te,ne,se,ae,ue,de,fe){fe===void 0&&(fe=!1),this.manager.set(this,y);var ye=this._tempMatrix1,ve=this._tempMatrix2,Se=this._tempMatrix3,Ie=Y/T+te,Ae=Z/w+ne,Oe=(Y+Q)/T+te,xe=(Z+j)/w+ne,be=R,Pe=I,Ge=-k,ze=-X;if(y.isCropped){var je=y._crop,$e=je.width,ke=je.height;be=$e,Pe=ke,R=$e,I=ke,Y=je.x,Z=je.y;var Xe=Y,Je=Z;G&&(Xe=Q-je.x-$e),D&&(Je=j-je.y-ke),Ie=Xe/T+te,Ae=Je/w+ne,Oe=(Xe+$e)/T+te,xe=(Je+ke)/w+ne,Ge=-k+Y,ze=-X+Z}D=D^(!ue&&S.isRenderTexture?1:0),G&&(be*=-1,Ge+=R),D&&(Pe*=-1,ze+=I),se.roundPixels&&(P=Math.floor(P),A=Math.floor(A)),ve.applyITRS(P,A,N,M,L),ye.copyFrom(se.matrix),ae?(ye.multiplyWithOffset(ae,-se.scrollX*B,-se.scrollY*$),ve.e=P,ve.f=A):(ve.e-=se.scrollX*B,ve.f-=se.scrollY*$),ye.multiply(ve,Se);var We=Se.setQuad(Ge,ze,Ge+be,ze+Pe,se.renderRoundPixels);de==null&&(de=this.setTexture2D(S)),y&&!fe&&this.manager.preBatch(y),this.batchQuad(y,We[0],We[1],We[2],We[3],We[4],We[5],We[6],We[7],Ie,Ae,Oe,xe,K,W,V,J,ee,S,de),y&&!fe&&this.manager.postBatch(y)},batchTextureFrame:function(y,S,T,w,P,A,R){this.manager.set(this);var I=this._tempMatrix1.copyFrom(A),M=this._tempMatrix2;R?I.multiply(R,M):M=I;var L=M.setQuad(S,T,S+y.width,T+y.height),N=this.setTexture2D(y.source.glTexture);w=l.getTintAppendFloatAlpha(w,P),this.batchQuad(null,L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],y.u0,y.v0,y.u1,y.v1,w,w,w,w,0,y.glTexture,N)},batchFillRect:function(y,S,T,w,P,A){this.renderer.pipelines.set(this);var R=this.calcMatrix;A&&A.multiply(P,R);var I=R.setQuad(y,S,y+T,S+w),M=this.fillTint;this.batchQuad(null,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],0,0,1,1,M.TL,M.TR,M.BL,M.BR,2)},batchFillTriangle:function(y,S,T,w,P,A,R,I){this.renderer.pipelines.set(this);var M=this.calcMatrix;I&&I.multiply(R,M);var L=M.getX(y,S),N=M.getY(y,S),G=M.getX(T,w),D=M.getY(T,w),B=M.getX(P,A),$=M.getY(P,A),k=this.fillTint;this.batchTri(null,L,N,G,D,B,$,0,0,1,1,k.TL,k.TR,k.BL,2)},batchStrokeTriangle:function(y,S,T,w,P,A,R,I,M){var L=this.tempTriangle;L[0].x=y,L[0].y=S,L[0].width=R,L[1].x=T,L[1].y=w,L[1].width=R,L[2].x=P,L[2].y=A,L[2].width=R,L[3].x=y,L[3].y=S,L[3].width=R,this.batchStrokePath(L,R,!1,I,M)},batchFillPath:function(y,S,T){this.renderer.pipelines.set(this);var w=this.calcMatrix;T&&T.multiply(S,w);for(var P=y.length,A=this.polygonCache,R,I,M=this.fillTint.TL,L=this.fillTint.TR,N=this.fillTint.BL,G=0;G<P;++G)I=y[G],A.push(I.x,I.y);R=x(A),P=R.length;for(var D=0;D<P;D+=3){var B=R[D+0]*2,$=R[D+1]*2,k=R[D+2]*2,X=A[B+0],Y=A[B+1],Z=A[$+0],Q=A[$+1],j=A[k+0],K=A[k+1],W=w.getX(X,Y),V=w.getY(X,Y),J=w.getX(Z,Q),ee=w.getY(Z,Q),te=w.getX(j,K),ne=w.getY(j,K);this.batchTri(null,W,V,J,ee,te,ne,0,0,1,1,M,L,N,2)}A.length=0},batchStrokePath:function(y,S,T,w,P){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var A=y.length-1,R=0;R<A;R++){var I=y[R],M=y[R+1];this.batchLine(I.x,I.y,M.x,M.y,I.width/2,M.width/2,S,R,!T&&R===A-1,w,P)}},batchLine:function(y,S,T,w,P,A,R,I,M,L,N){this.renderer.pipelines.set(this);var G=this.calcMatrix;N&&N.multiply(L,G);var D=T-y,B=w-S,$=Math.sqrt(D*D+B*B);if($!==0){var k=P*(w-S)/$,X=P*(y-T)/$,Y=A*(w-S)/$,Z=A*(y-T)/$,Q=T-Y,j=w-Z,K=y-k,W=S-X,V=T+Y,J=w+Z,ee=y+k,te=S+X,ne=G.getX(Q,j),se=G.getY(Q,j),ae=G.getX(K,W),ue=G.getY(K,W),de=G.getX(V,J),fe=G.getY(V,J),ye=G.getX(ee,te),ve=G.getY(ee,te),Se=this.strokeTint,Ie=Se.TL,Ae=Se.TR,Oe=Se.BL,xe=Se.BR;if(this.batchQuad(null,ye,ve,ae,ue,ne,se,de,fe,0,0,1,1,Ie,Ae,Oe,xe,2),!(R<=2)){var be=this.prevQuad,Pe=this.firstQuad;I>0&&be[4]?this.batchQuad(null,ye,ve,ae,ue,be[0],be[1],be[2],be[3],0,0,1,1,Ie,Ae,Oe,xe,2):(Pe[0]=ye,Pe[1]=ve,Pe[2]=ae,Pe[3]=ue,Pe[4]=1),M&&Pe[4]?this.batchQuad(null,ne,se,de,fe,Pe[0],Pe[1],Pe[2],Pe[3],0,0,1,1,Ie,Ae,Oe,xe,2):(be[0]=ne,be[1]=se,be[2]=de,be[3]=fe,be[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,d.prototype.destroy.call(this),this}});o.exports=g},43439:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(4127),u=e(89924),h=e(29100),s=new a({Extends:h,initialize:function(v){v.vertShader=x(v,"vertShader",u),v.fragShader=x(v,"fragShader",c),v.attributes=x(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,v)},onRender:function(l,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(l,v,d,g,y,S,T,w,P,A,R,I){var M=l.color,L=l.intensity,N=l.radius,G=l.attenuation,D=M.r*L,B=M.g*L,$=M.b*L,k=v.alpha*l.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(d,g,R,I,N,G,D,B,$,k),this.batchLightVert(y,S,R,I,N,G,D,B,$,k),this.batchLightVert(T,w,R,I,N,G,D,B,$,k),this.batchLightVert(d,g,R,I,N,G,D,B,$,k),this.batchLightVert(T,w,R,I,N,G,D,B,$,k),this.batchLightVert(P,A,R,I,N,G,D,B,$,k),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(l,v,d,g,y,S,T,w,P,A){var R=this.vertexViewF32,I=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++I]=l,R[++I]=v,R[++I]=d,R[++I]=g,R[++I]=y,R[++I]=S,R[++I]=T,R[++I]=w,R[++I]=P,R[++I]=A,this.vertexCount++}});o.exports=s},84057:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89422),c=e(95540),u=e(27681),h=e(49627),s=e(29100),l=new a({Extends:s,initialize:function(d){d.renderTarget=c(d,"renderTarget",1),d.fragShader=c(d,"fragShader",u),d.vertShader=c(d,"vertShader",h),d.attributes=c(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],s.call(this,d),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){s.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2;var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height);for(var g=this.renderTargets,y=0;y<g.length;y++)g[y].autoResize=!0},postBatch:function(v){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(v){this.bindAndDraw(v)},getController:function(v){return v!==void 0?v:this.controller?this.controller:this},copySprite:function(v,d,g){g===void 0&&(g=!1);var y=this.gl;y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,v.texture.webGLTexture);var S=y.getParameter(y.FRAMEBUFFER_BINDING);y.bindFramebuffer(y.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d.texture.webGLTexture,0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),g&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,S))},copyFrame:function(v,d,g,y,S){this.manager.copyFrame(v,d,g,y,S)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,d,g){this.manager.drawFrame(v,d,g,this.colorMatrix)},blendFrames:function(v,d,g,y,S){this.manager.blendFrames(v,d,g,y,S)},blendFramesAdditive:function(v,d,g,y,S){this.manager.blendFramesAdditive(v,d,g,y,S)},clearFrame:function(v,d){this.manager.clearFrame(v,d)},blitFrame:function(v,d,g,y,S,T){this.manager.blitFrame(v,d,g,y,S,T)},copyFrameRect:function(v,d,g,y,S,T,w,P){this.manager.copyFrameRect(v,d,g,y,S,T,w,P)},bindAndDraw:function(v,d,g,y,S){g===void 0&&(g=!0),y===void 0&&(y=!0);var T=this.gl,w=this.renderer;this.bind(S),this.set1i("uMainSampler",0),d?(T.viewport(0,0,d.width,d.height),T.bindFramebuffer(T.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,d.texture.webGLTexture,0),g&&(y?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT))):(w.popFramebuffer(!1,!1),w.currentFramebuffer||T.viewport(0,0,w.width,w.height)),w.restoreStencilMask(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,v.texture.webGLTexture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),d&&(T.bindTexture(T.TEXTURE_2D,null),T.bindFramebuffer(T.FRAMEBUFFER,w.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),s.prototype.destroy.call(this),this}});o.exports=l},43558:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(67502),c=e(83419),u=e(96293),h=e(95540),s=e(57516),l=e(27681),v=e(87841),d=e(32302),g=e(45561),y=e(60722),S=e(29100),T=new c({Extends:s,initialize:function(P){var A=h(P,"fragShader",l),R=h(P,"vertShader",y),I=h(P,"drawShader",l),M=[{name:"DrawSprite",fragShader:g,vertShader:y},{name:"CopySprite",fragShader:A,vertShader:R},{name:"DrawGame",fragShader:I,vertShader:y},{name:"ColorMatrix",fragShader:u}],L=h(P,"shaders",[]);P.shaders=M.concat(L),P.vertShader||(P.vertShader=R),P.batchSize=1,s.call(this,P),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new v,this.targetBounds=new v,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){S.prototype.boot.call(this);var w=this.shaders,P=this.renderer;this.drawSpriteShader=w[0],this.copyShader=w[1],this.gameShader=w[2],this.colorMatrixShader=w[3],this.fsTarget=new d(P,P.width,P.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var A=new ArrayBuffer(168);this.quadVertexData=A,this.quadVertexViewF32=new Float32Array(A),this.quadVertexBuffer=P.createVertexBuffer(A,this.gl.STATIC_DRAW),this.onResize(P.width,P.height),this.currentShader=this.copyShader,this.set2f("uResolution",P.width,P.height)},onResize:function(w,P){var A=this.quadVertexViewF32;A[1]=P,A[22]=P,A[14]=w,A[28]=w,A[35]=w,A[36]=P},batchQuad:function(w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j,K){var W=Math.min(P,R,M,N),V=Math.min(A,I,L,G),J=Math.max(P,R,M,N),ee=Math.max(A,I,L,G),te=J-W,ne=ee-V,se=this.spriteBounds.setTo(W,V,te,ne),ae=w?w.preFX.padding:0,ue=te+ae*2,de=ne+ae*2,fe=Math.abs(Math.max(ue,de)),ye=this.manager.getRenderTarget(fe),ve=this.targetBounds.setTo(0,0,ye.width,ye.height);x(ve,Math.round(se.centerX),Math.round(se.centerY)),this.tempSprite=w;var Se=this.gl,Ie=this.renderer;Ie.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Ie.width,Ie.height),this.flipProjectionMatrix(!0),w&&(this.onDrawSprite(w,ye),w.preFX.onFX(this));var Ae=this.fsTarget;return this.flush(),Se.viewport(0,0,Ie.width,Ie.height),Se.bindFramebuffer(Se.FRAMEBUFFER,Ae.framebuffer.webGLFramebuffer),Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,Ae.texture.webGLTexture,0),Se.clearColor(0,0,0,0),Se.clear(Se.COLOR_BUFFER_BIT),this.setTexture2D(K),this.batchVert(P,A,D,B,0,j,X),this.batchVert(R,I,D,k,0,j,Z),this.batchVert(M,L,$,k,0,j,Q),this.batchVert(P,A,D,B,0,j,X),this.batchVert(M,L,$,k,0,j,Q),this.batchVert(N,G,$,B,0,j,Y),this.flush(),this.flipProjectionMatrix(!1),Se.activeTexture(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ye.texture.webGLTexture),Se.copyTexSubImage2D(Se.TEXTURE_2D,0,0,0,ve.x,ve.y,ve.width,ve.height),Se.bindFramebuffer(Se.FRAMEBUFFER,null),Se.bindTexture(Se.TEXTURE_2D,null),this.onBatch(w),this.currentShader=this.copyShader,this.onDraw(ye,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(w,P,A,R,I,M,L){A===void 0&&(A=!0),R===void 0&&(R=!0),I===void 0&&(I=!1),L===void 0&&(L=this.copyShader);var N=this.gl,G=this.tempSprite;M&&(L=this.colorMatrixShader),this.currentShader=L;var D=this.setVertexBuffer(this.quadVertexBuffer);L.bind(D,!1);var B=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",B.width,B.height),G.preFX.onFXCopy(this),this.onCopySprite(w,P,G),M&&(this.set1fv("uColorMatrix",M.getData()),this.set1f("uAlpha",M.alpha)),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,w.texture.webGLTexture),w.height>P.height)N.viewport(0,0,w.width,w.height),this.setTargetUVs(w,P);else{var $=P.height-w.height;N.viewport(0,$,w.width,w.height),this.resetUVs()}if(N.bindFramebuffer(N.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,P.texture.webGLTexture,0),A&&(N.clearColor(0,0,0,+!R),N.clear(N.COLOR_BUFFER_BIT)),I){var k=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}N.bufferData(N.ARRAY_BUFFER,this.quadVertexData,N.STATIC_DRAW),N.drawArrays(N.TRIANGLES,0,6),I&&this.renderer.setBlendMode(k),N.bindFramebuffer(N.FRAMEBUFFER,null)},copy:function(w,P){var A=this.gl;this.set1i("uMainSampler",0),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,w.texture.webGLTexture),A.viewport(0,0,w.width,w.height),this.setUVs(0,0,0,1,1,1,1,0),A.bindFramebuffer(A.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,P.texture.webGLTexture,0),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.quadVertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null)},blendFrames:function(w,P,A,R,I){this.manager.blendFrames(w,P,A,R,I)},blendFramesAdditive:function(w,P,A,R,I){this.manager.blendFramesAdditive(w,P,A,R,I)},drawToGame:function(w){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(w)},copyToGame:function(w){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(w)},bindAndDraw:function(w){var P=this.gl,A=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(w.texture);var R=this._tempMatrix1.loadIdentity(),I=this.targetBounds.x,M=this.targetBounds.y,L=I+w.width,N=M+w.height,G=R.getX(I,M),D=R.getX(I,N),B=R.getX(L,N),$=R.getX(L,M),k=R.getY(I,M),X=R.getY(I,N),Y=R.getY(L,N),Z=R.getY(L,M),Q=16777215;this.batchVert(G,k,0,0,0,0,Q),this.batchVert(D,X,0,1,0,0,Q),this.batchVert(B,Y,1,1,0,0,Q),this.batchVert(G,k,0,0,0,0,Q),this.batchVert(B,Y,1,1,0,0,Q),this.batchVert($,Z,1,0,0,0,Q),A.restoreFramebuffer(!1,!0),A.currentFramebuffer||P.viewport(0,0,A.width,A.height),A.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(w){this.drawToGame(w)},setUVs:function(w,P,A,R,I,M,L,N){var G=this.quadVertexViewF32;G[2]=w,G[3]=P,G[9]=A,G[10]=R,G[16]=I,G[17]=M,G[23]=w,G[24]=P,G[30]=I,G[31]=M,G[37]=L,G[38]=N},setTargetUVs:function(w,P){var A=P.height/w.height;A>.5?A=.5-(A-.5):A=.5+(.5-A),this.setUVs(0,A,0,1+A,1,1+A,1,A)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,s.prototype.destroy.call(this),this}});o.exports=T},81041:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(57516),u=new a({Extends:c,initialize:function(s){s.topology=5,s.batchSize=x(s,"batchSize",256),c.call(this,s)}});o.exports=u},12385:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(57516),u=e(45561),h=e(60722),s=e(29100),l=new a({Extends:c,initialize:function(d){d.fragShader=x(d,"fragShader",u),d.vertShader=x(d,"vertShader",h),d.forceZero=!0,c.call(this,d)},boot:function(){s.prototype.boot.call(this);var v=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",v.width,v.height)}});o.exports=l},7589:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35407),x=e(10312),c=e(83419),u=e(89422),h=e(96293),s=e(36682),l=e(95540),v=e(48247),d=e(49627),g=e(29100),y=new c({Extends:g,initialize:function(T){T.renderTarget=l(T,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),T.vertShader=l(T,"vertShader",d),T.shaders=l(T,"shaders",[{name:"Copy",fragShader:s},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:h}]),T.attributes=l(T,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),T.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],T.batchSize=1,g.call(this,T),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){g.prototype.boot.call(this);var S=this.shaders,T=this.renderTargets;this.copyShader=S[0],this.addShader=S[1],this.linearShader=S[2],this.colorMatrixShader=S[3],this.fullFrame1=T[0],this.fullFrame2=T[1],this.halfFrame1=T[2],this.halfFrame2=T[3]},copyFrame:function(S,T,w,P,A){w===void 0&&(w=1),P===void 0&&(P=!0),A===void 0&&(A=!0);var R=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",w),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,S.texture.webGLTexture),T?(R.viewport(0,0,T.width,T.height),R.bindFramebuffer(R.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,T.texture.webGLTexture,0)):R.viewport(0,0,S.width,S.height),P&&(A?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},blitFrame:function(S,T,w,P,A,R,I){w===void 0&&(w=1),P===void 0&&(P=!0),A===void 0&&(A=!0),R===void 0&&(R=!1),I===void 0&&(I=!1);var M=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",w),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,S.texture.webGLTexture),S.height>T.height)M.viewport(0,0,S.width,S.height),this.setTargetUVs(S,T);else{var L=T.height-S.height;M.viewport(0,L,S.width,S.height)}if(M.bindFramebuffer(M.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,T.texture.webGLTexture,0),P&&(A?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),R){var N=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}I&&this.flipY(),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),R&&this.renderer.setBlendMode(N),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(S,T,w,P,A,R,I,M){I===void 0&&(I=!0),M===void 0&&(M=!0);var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,S.texture.webGLTexture,0),I&&(M?L.clearColor(0,0,0,0):L.clearColor(0,0,0,1),L.clear(L.COLOR_BUFFER_BIT)),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,T.texture.webGLTexture),L.copyTexSubImage2D(L.TEXTURE_2D,0,0,0,w,P,A,R),L.bindFramebuffer(L.FRAMEBUFFER,null),L.bindTexture(L.TEXTURE_2D,null)},copyToGame:function(S){var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,S.texture.webGLTexture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6)},drawFrame:function(S,T,w,P){w===void 0&&(w=!0),P===void 0&&(P=this.colorMatrix);var A=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,S.texture.webGLTexture),T?(A.viewport(0,0,T.width,T.height),A.bindFramebuffer(A.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,T.texture.webGLTexture,0)):A.viewport(0,0,S.width,S.height),w?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFrames:function(S,T,w,P,A,R){P===void 0&&(P=1),A===void 0&&(A=!0),R===void 0&&(R=this.linearShader);var I=this.gl;this.setShader(R),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",P),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,S.texture.webGLTexture),I.activeTexture(I.TEXTURE1),I.bindTexture(I.TEXTURE_2D,T.texture.webGLTexture),w?(I.bindFramebuffer(I.FRAMEBUFFER,w.framebuffer.webGLFramebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,w.texture.webGLTexture,0),I.viewport(0,0,w.width,w.height)):I.viewport(0,0,S.width,S.height),A?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT),I.bufferData(I.ARRAY_BUFFER,this.vertexData,I.STATIC_DRAW),I.drawArrays(I.TRIANGLES,0,6),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null)},blendFramesAdditive:function(S,T,w,P,A){this.blendFrames(S,T,w,P,A,this.addShader)},clearFrame:function(S,T){T===void 0&&(T=!0);var w=this.gl;w.viewport(0,0,S.width,S.height),w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),T?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT);var P=this.renderer.currentFramebuffer;w.bindFramebuffer(w.FRAMEBUFFER,P.webGLFramebuffer)},setUVs:function(S,T,w,P,A,R,I,M){var L=this.vertexViewF32;L[2]=S,L[3]=T,L[6]=w,L[7]=P,L[10]=A,L[11]=R,L[14]=S,L[15]=T,L[18]=A,L[19]=R,L[22]=I,L[23]=M},setTargetUVs:function(S,T){var w=T.height/S.height;w>.5?w=.5-(w-.5):w=.5+(.5-w),this.setUVs(0,w,0,1+w,1,1+w,1,w)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});o.exports=y},36060:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};o.exports=E},84817:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineafterflush"},36712:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebeforeflush"},40285:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebind"},65918:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineboot"},92852:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinedestroy"},56072:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinerebind"},57566:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineresize"},77085:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}},54812:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(99155),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.amount=1},onPreRender:function(h,s){h=this.getController(h),this.set1f("amount",h.amount,s)}});o.exports=u},67329:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(24400),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var s=this.getController(),l=this.fullFrame1,v=this.fullFrame2;this.copyFrame(h,v);for(var d=2/h.width*s.offsetX,g=2/h.height*s.offsetY,y=0;y<s.steps;y++)this.set2f("offset",d,0),this.copySprite(h,l),this.set2f("offset",0,g),this.copySprite(l,h);this.blendFrames(v,h,l,s.strength),this.copyToGame(l)}});o.exports=u},8861:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(41514),c=e(51078),u=e(94328),h=e(84057),s=new a({Extends:h,initialize:function(v){h.call(this,{game:v,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:c},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(l){var v=this.getController(),d=this.gl,g=this.fullFrame1,y=d.getParameter(d.FRAMEBUFFER_BINDING);this.bind(this.shaders[v.quality]),d.activeTexture(d.TEXTURE0),d.viewport(0,0,l.width,l.height),this.set1i("uMainSampler",0),this.set2f("resolution",l.width,l.height),this.set1f("strength",v.strength),this.set3fv("color",v.glcolor);for(var S=0;S<v.steps;S++)this.set2f("offset",v.x,0),this.copySprite(l,g),this.set2f("offset",0,v.y),this.copySprite(g,l);d.bindFramebuffer(d.FRAMEBUFFER,y),d.bindTexture(d.TEXTURE_2D,null),this.copyToGame(l)}});o.exports=s},51051:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(90610),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,s,l,v){h=this.getController(h),this.set1f("radius",h.radius,s),this.set1f("amount",h.amount,s),this.set1f("contrast",h.contrast,s),this.set1f("strength",h.strength,s),this.set2f("blur",h.blurX,h.blurY,s),this.setBoolean("isTiltShift",h.isTiltShift,s),l&&v&&this.set2f("resolution",l,v,s)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=u},89428:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91899),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,s,l,v){h=this.getController(h),this.set1f("scale",h.scale,s),this.set1f("feather",h.feather,s),this.set1f("thickness",h.thickness,s),this.set3fv("color",h.glcolor,s),this.set4fv("backgroundColor",h.glcolor2,s),l&&v&&this.set2f("resolution",l,v,s)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=u},88904:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(84057),c=new a({Extends:x,initialize:function(h){x.call(this,{game:h})},onDraw:function(u){var h=this.fullFrame1;this.controller?this.manager.drawFrame(u,h,!0,this.controller):this.drawFrame(u,h),this.copyToGame(h)}});o.exports=c},63563:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(47838),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var s=this.game.textures.getFrame(h);s&&(this.glTexture=s.glTexture)},onDraw:function(h){var s=this.getController(),l=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",s.x,s.y),this.bindTexture(s.glTexture,1),this.copySprite(h,l),this.copyToGame(l)}});o.exports=u},94045:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=e(98656),u=e(84057),h=e(70554),s=new a({Extends:u,initialize:function(v,d){var g=x(d,"quality",.1),y=x(d,"distance",10);u.call(this,{game:v,fragShader:h.setGlowQuality(c,v,g,y)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(l,v,d,g){l=this.getController(l),this.set1f("outerStrength",l.outerStrength,v),this.set1f("innerStrength",l.innerStrength,v),this.set4fv("glowColor",l.glcolor,v),this.setBoolean("knockout",l.knockout,v),d&&g&&this.set2f("resolution",d,g,v)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});o.exports=s},74088:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(70463),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,s){h=this.getController(h),this.set1f("alpha",h.alpha,s),this.set1i("size",h.size,s),this.set3fv("color1",h.glcolor1,s),this.set3fv("color2",h.glcolor2,s),this.set2f("positionFrom",h.fromX,h.fromY,s),this.set2f("positionTo",h.toX,h.toY,s)}});o.exports=u},99636:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50831),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.amount=1},onPreRender:function(h,s,l,v){h=this.getController(h),this.set1f("amount",h.amount,s),l&&v&&this.set2f("resolution",l,v,s)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=u},34700:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92595),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,s){h=this.getController(h);var l=h.samples;this.set1i("samples",l,s),this.set1f("intensity",h.intensity,s),this.set1f("decay",h.decay,s),this.set1f("power",h.power/l,s),this.set2f("lightPosition",h.x,h.y,s),this.set4fv("color",h.glcolor,s)}});o.exports=u},91157:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72464),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,s,l,v){h=this.getController(h),this.setTime("time",s),this.set1f("speed",h.speed,s),this.set1f("lineWidth",h.lineWidth,s),this.set1f("gradient",h.gradient,s),this.setBoolean("reveal",h.reveal,s),l&&v&&this.set2f("resolution",l,v,s)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=u},27797:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39249),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,s){h=this.getController(h),this.set1f("radius",h.radius,s),this.set1f("strength",h.strength,s),this.set2f("position",h.x,h.y,s)}});o.exports=u},67603:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(2878),c=e(84057),u=new a({Extends:c,initialize:function(s){c.call(this,{game:s,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,s){h=this.getController(h);var l=h.progress,v=h.wipeWidth,d=h.direction,g=h.axis;this.set4f("config",l,v,d,g,s),this.setBoolean("reveal",h.reveal,s)}});o.exports=u},58918:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};o.exports=a},96615:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36060),x=e(79291),c={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};c=x(!1,c,a),o.exports=c},35407:o=>{o.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:o=>{o.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:o=>{o.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:o=>{o.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:o=>{o.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:o=>{o.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:o=>{o.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:o=>{o.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:o=>{o.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:o=>{o.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:o=>{o.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:o=>{o.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:o=>{o.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:o=>{o.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:o=>{o.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:o=>{o.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:o=>{o.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:o=>{o.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:o=>{o.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:o=>{o.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:o=>{o.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:o=>{o.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(o,E,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}},93567:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s){this.webGLAttribLocation=-1,this.gl=u,this.program=h,this.name=s,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var c=this.gl;c.isContextLost()||(this.webGLAttribLocation=c.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});o.exports=x},26128:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l){this.webGLBuffer=null,this.gl=u,this.initialDataOrSize=h,this.bufferType=s,this.bufferUsage=l,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var c=this.gl;if(!c.isContextLost()){var u=this.bufferType,h=c.createBuffer();this.webGLBuffer=h,c.bindBuffer(u,this.webGLBuffer),c.bufferData(u,this.initialDataOrSize,this.bufferUsage),c.bindBuffer(u,null)}}},destroy:function(){var c=this.gl;c.isContextLost()||c.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});o.exports=x},84387:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},c=new a({initialize:function(h,s,l,v,d){this.webGLFramebuffer=null,this.gl=h,this.width=s,this.height=l,this.renderTexture=v,this.addDepthStencilBuffer=!!d,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var h=this.renderTexture,s=0,l=u.createFramebuffer();if(this.webGLFramebuffer=l,u.bindFramebuffer(u.FRAMEBUFFER,l),h.isRenderTexture=!0,h.isAlphaPremultiplied=!1,u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,h.webGLTexture,0),s=u.checkFramebufferStatus(u.FRAMEBUFFER),s!==u.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(x[s]||s));if(this.addDepthStencilBuffer){var v=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,v),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,this.width,this.height),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,v)}u.bindFramebuffer(u.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var u=this.gl;if(!u.isContextLost()){u.bindFramebuffer(u.FRAMEBUFFER,this.webGLFramebuffer);var h=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);h!==null&&(u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,null,0),u.deleteTexture(h));var s=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);s!==null&&u.deleteRenderbuffer(s),u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});o.exports=c},1482:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s){this.webGLProgram=null,this.gl=u,this.vertexSource=h,this.fragmentSource=s,this.createResource()},createResource:function(){var c=this.gl;if(!c.isContextLost()){var u=c.createProgram(),h=c.createShader(c.VERTEX_SHADER),s=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(h,this.vertexSource),c.shaderSource(s,this.fragmentSource),c.compileShader(h),c.compileShader(s);var l=`Shader failed:
`;if(!c.getShaderParameter(h,c.COMPILE_STATUS))throw new Error("Vertex "+l+c.getShaderInfoLog(h));if(!c.getShaderParameter(s,c.COMPILE_STATUS))throw new Error("Fragment "+l+c.getShaderInfoLog(s));if(c.attachShader(u,h),c.attachShader(u,s),c.linkProgram(u),!c.getProgramParameter(u,c.LINK_STATUS))throw new Error("Link "+l+c.getProgramInfoLog(u));c.useProgram(u),this.webGLProgram=u}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});o.exports=x},82751:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50030),c=new a({initialize:function(h,s,l,v,d,g,y,S,T,w,P,A,R){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=h,this.mipLevel=s,this.minFilter=l,this.magFilter=v,this.wrapT=d,this.wrapS=g,this.format=y,this.pixels=S,this.width=T,this.height=w,this.pma=P??!0,this.forceSize=!!A,this.flipY=!!R,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){if(this.pixels instanceof c){this.webGLTexture=this.pixels.webGLTexture;return}var h=u.createTexture();h.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=h,this._processTexture()}},update:function(u,h,s,l,v,d,g,y,S){if(!(h===0||s===0)){this.pixels=u,this.width=h,this.height=s,this.flipY=l,this.wrapS=v,this.wrapT=d,this.minFilter=g,this.magFilter=y,this.format=S;var T=this.gl;T.isContextLost()||this._processTexture()}},_processTexture:function(){var u=this.gl;u.activeTexture(u.TEXTURE0);var h=u.getParameter(u.TEXTURE_BINDING_2D);u.bindTexture(u.TEXTURE_2D,this.webGLTexture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.minFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.magFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.wrapS),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.wrapT),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,this.flipY);var s=this.pixels,l=this.mipLevel,v=this.width,d=this.height,g=this.format,y=!1;if(s==null)u.texImage2D(u.TEXTURE_2D,l,g,v,d,0,g,u.UNSIGNED_BYTE,null),y=x(v,d);else if(s.compressed){v=s.width,d=s.height,y=s.generateMipmap;for(var S=0;S<s.mipmaps.length;S++)u.compressedTexImage2D(u.TEXTURE_2D,S,s.internalFormat,s.mipmaps[S].width,s.mipmaps[S].height,0,s.mipmaps[S].data)}else s instanceof Uint8Array?(u.texImage2D(u.TEXTURE_2D,l,g,v,d,0,g,u.UNSIGNED_BYTE,s),y=x(v,d)):(this.forceSize||(v=s.width,d=s.height),u.texImage2D(u.TEXTURE_2D,l,g,g,u.UNSIGNED_BYTE,s),y=x(v,d));y&&u.generateMipmap(u.TEXTURE_2D),h?u.bindTexture(u.TEXTURE_2D,h):u.bindTexture(u.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(u){this.__SPECTOR_Metadata=u,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=u)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof c||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});o.exports=c},57183:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s){this.webGLUniformLocation=null,this.gl=u,this.program=h,this.name=s,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var c=this.gl;c.isContextLost()||(this.webGLUniformLocation=c.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});o.exports=x},9503:(o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};o.exports=a},76531:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),x=e(83419),c=e(50792),u=e(97480),h=e(8443),s=e(57811),l=e(74403),v=e(45818),d=e(29747),g=e(87841),y=e(86555),S=e(56583),T=e(26099),w=e(38058),P=new x({Extends:c,initialize:function(R){c.call(this),this.game=R,this.canvas,this.canvasBounds=new g,this.parent=null,this.parentIsWindow=!1,this.parentSize=new y,this.gameSize=new y,this.baseSize=new y,this.displaySize=new y,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var A=this.game;this.canvas=A.canvas,this.fullscreen=A.device.fullscreen;var R=this.scaleMode;R!==a.SCALE_MODE.RESIZE&&R!==a.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(R),R===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),A.events.on(h.PRE_STEP,this.step,this),A.events.once(h.READY,this.refresh,this),A.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(A){this.getParent(A),this.getParentBounds();var R=A.width,I=A.height,M=A.scaleMode,L=A.zoom,N=A.autoRound;if(typeof R=="string")if(R.substr(-1)!=="%")R=parseInt(R,10);else{var G=this.parentSize.width;G===0&&(G=window.innerWidth);var D=parseInt(R,10)/100;R=Math.floor(G*D)}if(typeof I=="string")if(I.substr(-1)!=="%")I=parseInt(I,10);else{var B=this.parentSize.height;B===0&&(B=window.innerHeight);var $=parseInt(I,10)/100;I=Math.floor(B*$)}this.scaleMode=M,this.autoRound=N,this.autoCenter=A.autoCenter,this.resizeInterval=A.resizeInterval,N&&(R=Math.floor(R),I=Math.floor(I)),this.gameSize.setSize(R,I),L===a.ZOOM.MAX_ZOOM&&(L=this.getMaxZoom()),this.zoom=L,L!==1&&(this._resetZoom=!0),this.baseSize.setSize(R,I),N&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),A.minWidth>0&&this.displaySize.setMin(A.minWidth*L,A.minHeight*L),A.maxWidth>0&&this.displaySize.setMax(A.maxWidth*L,A.maxHeight*L),this.displaySize.setSize(R,I),(A.snapWidth>0||A.snapHeight>0)&&this.displaySize.setSnap(A.snapWidth,A.snapHeight),this.orientation=v(R,I)},getParent:function(A){var R=A.parent;if(R!==null){if(this.parent=l(R),this.parentIsWindow=this.parent===document.body,A.expandParent&&A.scaleMode!==a.SCALE_MODE.NONE){var I=this.parent.getBoundingClientRect();(this.parentIsWindow||I.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",I=this.parent.getBoundingClientRect(),!this.parentIsWindow&&I.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}A.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(A.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var A=this.parentSize,R=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(R.height=s(!0));var I=R.width,M=R.height;if(A.width!==I||A.height!==M)return A.setSize(I,M),!0;if(this.canvas){var L=this.canvasBounds,N=this.canvas.getBoundingClientRect();if(N.x!==L.x||N.y!==L.y)return!0}return!1},lockOrientation:function(A){var R=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return R?R.call(screen,A):!1},setParentSize:function(A,R){return this.parentSize.setSize(A,R),this.refresh()},setGameSize:function(A,R){var I=this.autoRound;I&&(A=Math.floor(A),R=Math.floor(R));var M=this.width,L=this.height;return this.gameSize.resize(A,R),this.baseSize.resize(A,R),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(A/R),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(M,L)},resize:function(A,R){var I=this.zoom,M=this.autoRound;M&&(A=Math.floor(A),R=Math.floor(R));var L=this.width,N=this.height;this.gameSize.resize(A,R),this.baseSize.resize(A,R),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(A*I,R*I),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var G=this.canvas.style,D=A*I,B=R*I;return M&&(D=Math.floor(D),B=Math.floor(B)),(D!==A||B!==R)&&(G.width=D+"px",G.height=B+"px"),this.refresh(L,N)},setZoom:function(A){return this.zoom=A,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(A,R){return A===void 0&&(A=0),R===void 0&&(R=A),this.displaySize.setSnap(A,R),this.refresh()},refresh:function(A,R){A===void 0&&(A=this.width),R===void 0&&(R=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var I=this.game.domContainer;if(I){this.baseSize.setCSS(I);var M=this.canvas.style,L=I.style;L.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",L.marginLeft=M.marginLeft,L.marginTop=M.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,A,R),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var A=v(this.width,this.height);A!==this.orientation&&(this.orientation=A,this.emit(u.ORIENTATION_CHANGE,A))}},updateScale:function(){var A=this.canvas.style,R=this.gameSize.width,I=this.gameSize.height,M,L,N=this.zoom,G=this.autoRound;if(this.scaleMode===a.SCALE_MODE.NONE)this.displaySize.setSize(R*N,I*N),M=this.displaySize.width,L=this.displaySize.height,G&&(M=Math.floor(M),L=Math.floor(L)),this._resetZoom&&(A.width=M+"px",A.height=L+"px",this._resetZoom=!1);else if(this.scaleMode===a.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),M=this.displaySize.width,L=this.displaySize.height,G&&(M=Math.floor(M),L=Math.floor(L)),this.canvas.width=M,this.canvas.height=L;else if(this.scaleMode===a.SCALE_MODE.EXPAND){var D=this.game.config.width,B=this.game.config.height;this.displaySize.setSize(this.parentSize.width,this.parentSize.height),M=this.displaySize.width,L=this.displaySize.height,G&&(M=Math.floor(M),L=Math.floor(L)),A.width=M+"px",A.height=L+"px";var $=this.parentSize.width/D,k=this.parentSize.height/B;$<k&&$!==0?this.baseSize.setSize(D,this.parentSize.height/$):k!==0&&this.baseSize.setSize(this.displaySize.width/k,B),this.gameSize.setSize(this.baseSize.width,this.baseSize.height),M=this.baseSize.width,L=this.baseSize.height,G&&(M=Math.floor(M),L=Math.floor(L)),this.canvas.width=M,this.canvas.height=L}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),M=this.displaySize.width,L=this.displaySize.height,G&&(M=Math.floor(M),L=Math.floor(L)),A.width=M+"px",A.height=L+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var A=S(this.parentSize.width,this.gameSize.width,0,!0),R=S(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(A,R),1)},updateCenter:function(){var A=this.autoCenter;if(A!==a.CENTER.NO_CENTER){var R=this.canvas,I=R.style,M=R.getBoundingClientRect(),L=M.width,N=M.height,G=Math.floor((this.parentSize.width-L)/2),D=Math.floor((this.parentSize.height-N)/2);A===a.CENTER.CENTER_HORIZONTALLY?D=0:A===a.CENTER.CENTER_VERTICALLY&&(G=0),I.marginLeft=G+"px",I.marginTop=D+"px"}},updateBounds:function(){var A=this.canvasBounds,R=this.canvas.getBoundingClientRect();A.x=R.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),A.y=R.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),A.width=R.width,A.height=R.height},transformX:function(A){return(A-this.canvasBounds.left)*this.displayScale.x},transformY:function(A){return(A-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(A){A===void 0&&(A={navigationUI:"hide"});var R=this.fullscreen;if(!R.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!R.active){var I=this.getFullscreenTarget();R.keyboard?I[R.request](Element.ALLOW_KEYBOARD_INPUT):I[R.request](A)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(A){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,A)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var A=document.createElement("div");A.style.margin="0",A.style.padding="0",A.style.width="100%",A.style.height="100%",this.fullscreenTarget=A,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var R=this.canvas.parentNode;R.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var A=this.fullscreenTarget;if(A&&A.parentNode){var R=A.parentNode;R.insertBefore(this.canvas,A),R.removeChild(A)}}},stopFullscreen:function(){var A=this.fullscreen;if(!A.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;A.active&&document[A.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(A){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(A)},startListeners:function(){var A=this,R=this.domlisteners;if(R.orientationChange=function(){A.updateBounds(),A._checkOrientation=!0,A.dirty=!0,A.refresh()},R.windowResize=function(){A.updateBounds(),A.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",R.orientationChange,!1):window.addEventListener("orientationchange",R.orientationChange,!1),window.addEventListener("resize",R.windowResize,!1),this.fullscreen.available){R.fullScreenChange=function(M){return A.onFullScreenChange(M)},R.fullScreenError=function(M){return A.onFullScreenError(M)};var I=["webkit","moz",""];I.forEach(function(M){document.addEventListener(M+"fullscreenchange",R.fullScreenChange,!1),document.addEventListener(M+"fullscreenerror",R.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",R.fullScreenChange,!1),document.addEventListener("MSFullscreenError",R.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(A,R){A instanceof w||(R=A,A=void 0),R===void 0&&(R=new g);var I=this.baseSize,M=this.parentSize,L=this.canvasBounds,N=this.displayScale,G=L.x>=0?0:-(L.x*N.x),D=L.y>=0?0:-(L.y*N.y),B;M.width>=L.width?B=I.width:B=I.width-(L.width-M.width)*N.x;var $;return M.height>=L.height?$=I.height:$=I.height-(L.height-M.height)*N.y,R.setTo(G,D,B,$),A&&(R.width/=A.zoomX,R.height/=A.zoomY,R.centerX=A.centerX+A.scrollX,R.centerY=A.centerY+A.scrollY),R},step:function(A,R){this.parent&&(this._lastCheck+=R,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var A=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",A.orientationChange,!1):window.removeEventListener("orientationchange",A.orientationChange,!1),window.removeEventListener("resize",A.windowResize,!1);var R=["webkit","moz",""];R.forEach(function(I){document.removeEventListener(I+"fullscreenchange",A.fullScreenChange,!1),document.removeEventListener(I+"fullscreenerror",A.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",A.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});o.exports=P},64743:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};o.exports=a},56139:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="enterfullscreen"},2336:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenfailed"},47412:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenunsupported"},51452:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="leavefullscreen"},20666:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="orientationchange"},47945:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},97480:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}},93364:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(13560),c={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};c=a(!1,c,x.CENTER),c=a(!1,c,x.ORIENTATION),c=a(!1,c,x.SCALE_MODE),c=a(!1,c,x.ZOOM),o.exports=c},27397:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(35355),c=function(u){var h=u.game.config.defaultPhysicsSystem,s=a(u.settings,"physics",!1);if(!(!h&&!s)){var l=[];if(h&&l.push(x(h+"Physics")),s)for(var v in s)v=x(v.concat("Physics")),l.indexOf(v)===-1&&l.push(v);return l}};o.exports=c},52106:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(c){var u=c.plugins.getDefaultScenePlugins(),h=a(c.settings,"plugins",!1);return Array.isArray(h)?h:u||[]};o.exports=x},87033:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};o.exports=E},97482:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(2368),c=new a({initialize:function(h){this.sys=new x(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});o.exports=c},60903:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89993),c=e(44594),u=e(8443),h=e(35154),s=e(54899),l=e(29747),v=e(97482),d=e(2368),g=new a({initialize:function(S,T){if(this.game=S,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,T){Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)this._pending.push({key:"default",scene:T[w],autoStart:w===0,data:{}})}S.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new v),this.game.events.emit(u.SYSTEM_READY,this.systemScene,this);var y,S,T,w;for(y=0;y<this._pending.length;y++){S=this._pending[y],T=S.key,w=S.scene;var P;w instanceof v?P=this.createSceneFromInstance(T,w):typeof w=="object"?P=this.createSceneFromObject(T,w):typeof w=="function"&&(P=this.createSceneFromFunction(T,w)),T=P.sys.settings.key,this.keys[T]=P,this.scenes.push(P),this._data[T]&&(P.sys.settings.data=this._data[T].data,this._data[T].autoStart&&(S.autoStart=!0)),(S.autoStart||P.sys.settings.active)&&this._start.push(T)}for(this._pending.length=0,this._data={},this.isBooted=!0,y=0;y<this._start.length;y++)S=this._start[y],this.start(S);this._start.length=0}},processQueue:function(){var y=this._pending.length,S=this._queue.length;if(!(y===0&&S===0)){var T,w;if(y){for(T=0;T<y;T++)w=this._pending[T],this.add(w.key,w.scene,w.autoStart,w.data);for(T=0;T<this._start.length;T++)w=this._start[T],this.start(w);this._start.length=0,this._pending.length=0}for(T=0;T<this._queue.length;T++)w=this._queue[T],this[w.op](w.keyA,w.keyB,w.data);this._queue.length=0}},add:function(y,S,T,w){if(T===void 0&&(T=!1),w===void 0&&(w={}),this.isProcessing||!this.isBooted)return this._pending.push({key:y,scene:S,autoStart:T,data:w}),this.isBooted||(this._data[y]={data:w}),null;y=this.getKey(y,S);var P;return S instanceof v?P=this.createSceneFromInstance(y,S):typeof S=="object"?(S.key=y,P=this.createSceneFromObject(y,S)):typeof S=="function"&&(P=this.createSceneFromFunction(y,S)),P.sys.settings.data=w,y=P.sys.settings.key,this.keys[y]=P,this.scenes.push(P),(T||P.sys.settings.active)&&(this._pending.length?this._start.push(y):this.start(y)),P},remove:function(y){if(this.isProcessing)return this.queueOp("remove",y);var S=this.getScene(y);if(!S||S.sys.isTransitioning())return this;var T=this.scenes.indexOf(S),w=S.sys.settings.key;return T>-1&&(delete this.keys[w],this.scenes.splice(T,1),this._start.indexOf(w)>-1&&(T=this._start.indexOf(w),this._start.splice(T,1)),S.sys.destroy()),this},bootScene:function(y){var S=y.sys,T=S.settings;S.sceneUpdate=l,y.init&&(y.init.call(y,T.data),T.status=x.INIT,T.isTransition&&S.events.emit(c.TRANSITION_INIT,T.transitionFrom,T.transitionDuration));var w;S.load&&(w=S.load,w.reset()),w&&y.preload?(y.preload.call(y),T.status=x.LOADING,w.once(s.COMPLETE,this.loadComplete,this),w.start()):this.create(y)},loadComplete:function(y){this.create(y.scene)},payloadComplete:function(y){this.bootScene(y.scene)},update:function(y,S){this.processQueue(),this.isProcessing=!0;for(var T=this.scenes.length-1;T>=0;T--){var w=this.scenes[T].sys;w.settings.status>x.START&&w.settings.status<=x.RUNNING&&w.step(y,S),w.scenePlugin&&w.scenePlugin._target&&w.scenePlugin.step(y,S)}},render:function(y){for(var S=0;S<this.scenes.length;S++){var T=this.scenes[S].sys;T.settings.visible&&T.settings.status>=x.LOADING&&T.settings.status<x.SLEEPING&&T.render(y)}this.isProcessing=!1},create:function(y){var S=y.sys,T=S.settings;y.create&&(T.status=x.CREATING,y.create.call(y,T.data),T.status===x.DESTROYED)||(T.isTransition&&S.events.emit(c.TRANSITION_START,T.transitionFrom,T.transitionDuration),y.update&&(S.sceneUpdate=y.update),T.status=x.RUNNING,S.events.emit(c.CREATE,y))},createSceneFromFunction:function(y,S){var T=new S;if(T instanceof v){var w=T.sys.settings.key;if(w!==""&&(y=w),this.keys.hasOwnProperty(y))throw new Error("Cannot add Scene with duplicate key: "+y);return this.createSceneFromInstance(y,T)}else return T.sys=new d(T),T.sys.settings.key=y,T.sys.init(this.game),T},createSceneFromInstance:function(y,S){var T=S.sys.settings.key;return T===""&&(S.sys.settings.key=y),S.sys.init(this.game),S},createSceneFromObject:function(y,S){var T=new v(S),w=T.sys.settings.key;w!==""?y=w:T.sys.settings.key=y,T.sys.init(this.game);for(var P=["init","preload","create","update","render"],A=0;A<P.length;A++){var R=h(S,P[A],null);R&&(T[P[A]]=R)}if(S.hasOwnProperty("extend")){for(var I in S.extend)if(S.extend.hasOwnProperty(I)){var M=S.extend[I];I==="data"&&T.hasOwnProperty("data")&&typeof M=="object"?T.data.merge(M):I!=="sys"&&(T[I]=M)}}return T},getKey:function(y,S){if(y||(y="default"),typeof S=="function")return y;if(S instanceof v?y=S.sys.settings.key:typeof S=="object"&&S.hasOwnProperty("key")&&(y=S.key),this.keys.hasOwnProperty(y))throw new Error("Cannot add Scene with duplicate key: "+y);return y},getScenes:function(y,S){y===void 0&&(y=!0),S===void 0&&(S=!1);for(var T=[],w=this.scenes,P=0;P<w.length;P++){var A=w[P];A&&(!y||y&&A.sys.isActive())&&T.push(A)}return S?T.reverse():T},getScene:function(y){if(typeof y=="string"){if(this.keys[y])return this.keys[y]}else for(var S=0;S<this.scenes.length;S++)if(y===this.scenes[S])return y;return null},isActive:function(y){var S=this.getScene(y);return S?S.sys.isActive():null},isPaused:function(y){var S=this.getScene(y);return S?S.sys.isPaused():null},isVisible:function(y){var S=this.getScene(y);return S?S.sys.isVisible():null},isSleeping:function(y){var S=this.getScene(y);return S?S.sys.isSleeping():null},pause:function(y,S){var T=this.getScene(y);return T&&T.sys.pause(S),this},resume:function(y,S){var T=this.getScene(y);return T&&T.sys.resume(S),this},sleep:function(y,S){var T=this.getScene(y);return T&&!T.sys.isTransitioning()&&T.sys.sleep(S),this},wake:function(y,S){var T=this.getScene(y);return T&&T.sys.wake(S),this},run:function(y,S){var T=this.getScene(y);if(!T){for(var w=0;w<this._pending.length;w++)if(this._pending[w].key===y){this.queueOp("start",y,S);break}return this}T.sys.isSleeping()?T.sys.wake(S):T.sys.isPaused()?T.sys.resume(S):this.start(y,S)},start:function(y,S){if(!this.isBooted)return this._data[y]={autoStart:!0,data:S},this;var T=this.getScene(y);if(!T)return console.warn("Scene key not found: "+y),this;var w=T.sys,P=w.settings.status;if(P>=x.START&&P<=x.CREATING)return this;if(P>=x.RUNNING&&P<=x.SLEEPING)w.shutdown(),w.sceneUpdate=l,w.start(S);else{w.sceneUpdate=l,w.start(S);var A;if(w.load&&(A=w.load),A&&w.settings.hasOwnProperty("pack")&&(A.reset(),A.addPack({payload:w.settings.pack})))return w.settings.status=x.LOADING,A.once(s.COMPLETE,this.payloadComplete,this),A.start(),this}return this.bootScene(T),this},stop:function(y,S){var T=this.getScene(y);if(T&&!T.sys.isTransitioning()&&T.sys.settings.status!==x.SHUTDOWN){var w=T.sys.load;w&&(w.off(s.COMPLETE,this.loadComplete,this),w.off(s.COMPLETE,this.payloadComplete,this)),T.sys.shutdown(S)}return this},switch:function(y,S,T){var w=this.getScene(y),P=this.getScene(S);return w&&P&&w!==P&&(this.sleep(y),this.isSleeping(S)?this.wake(S,T):this.start(S,T)),this},getAt:function(y){return this.scenes[y]},getIndex:function(y){var S=this.getScene(y);return this.scenes.indexOf(S)},bringToTop:function(y){if(this.isProcessing)return this.queueOp("bringToTop",y);var S=this.getIndex(y),T=this.scenes;if(S!==-1&&S<T.length){var w=this.getScene(y);T.splice(S,1),T.push(w)}return this},sendToBack:function(y){if(this.isProcessing)return this.queueOp("sendToBack",y);var S=this.getIndex(y);if(S!==-1&&S>0){var T=this.getScene(y);this.scenes.splice(S,1),this.scenes.unshift(T)}return this},moveDown:function(y){if(this.isProcessing)return this.queueOp("moveDown",y);var S=this.getIndex(y);if(S>0){var T=S-1,w=this.getScene(y),P=this.getAt(T);this.scenes[S]=P,this.scenes[T]=w}return this},moveUp:function(y){if(this.isProcessing)return this.queueOp("moveUp",y);var S=this.getIndex(y);if(S<this.scenes.length-1){var T=S+1,w=this.getScene(y),P=this.getAt(T);this.scenes[S]=P,this.scenes[T]=w}return this},moveAbove:function(y,S){if(y===S)return this;if(this.isProcessing)return this.queueOp("moveAbove",y,S);var T=this.getIndex(y),w=this.getIndex(S);if(T!==-1&&w!==-1&&w<T){var P=this.getAt(w);this.scenes.splice(w,1),this.scenes.splice(T+(w>T),0,P)}return this},moveBelow:function(y,S){if(y===S)return this;if(this.isProcessing)return this.queueOp("moveBelow",y,S);var T=this.getIndex(y),w=this.getIndex(S);if(T!==-1&&w!==-1&&w>T){var P=this.getAt(w);this.scenes.splice(w,1),T===0?this.scenes.unshift(P):this.scenes.splice(T-(w<T),0,P)}return this},queueOp:function(y,S,T,w){return this._queue.push({op:y,keyA:S,keyB:T,data:w}),this},swapPosition:function(y,S){if(y===S)return this;if(this.isProcessing)return this.queueOp("swapPosition",y,S);var T=this.getIndex(y),w=this.getIndex(S);if(T!==w&&T!==-1&&w!==-1){var P=this.getAt(T);this.scenes[T]=this.scenes[w],this.scenes[w]=P}return this},dump:function(){for(var y=[],S=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],T=0;T<this.scenes.length;T++){var w=this.scenes[T].sys,P=w.settings.visible&&(w.settings.status===x.RUNNING||w.settings.status===x.PAUSED)?"[*] ":"[-] ";P+=w.settings.key+" ("+S[w.settings.status]+")",y.push(P)}console.log(y.join(`
`))},destroy:function(){for(var y=0;y<this.scenes.length;y++){var S=this.scenes[y].sys;S.destroy()}this.systemScene.sys.destroy(),this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});o.exports=g},52209:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(44594),u=e(95540),h=e(37277),s=new x({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",l,v),this},restart:function(l){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,l),this},transition:function(l){l===void 0&&(l={});var v=u(l,"target",!1),d=this.manager.getScene(v);if(!v||!this.checkValidTransition(d))return!1;var g=u(l,"duration",1e3);this._elapsed=0,this._target=d,this._duration=g,this._willSleep=u(l,"sleep",!1),this._willRemove=u(l,"remove",!1);var y=u(l,"onUpdate",null);y&&(this._onUpdate=y,this._onUpdateScope=u(l,"onUpdateScope",this.scene));var S=u(l,"allowInput",!1);this.settings.transitionAllowInput=S;var T=d.sys.settings;T.isTransition=!0,T.transitionFrom=this.scene,T.transitionDuration=g,T.transitionAllowInput=S,u(l,"moveAbove",!1)?this.manager.moveAbove(this.key,v):u(l,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),d.sys.isSleeping()?d.sys.wake(u(l,"data")):this.manager.start(v,u(l,"data"));var w=u(l,"onStart",null),P=u(l,"onStartScope",this.scene);return w&&w.call(P,this.scene,d,g),this.systems.events.emit(c.TRANSITION_OUT,d,g),!0},checkValidTransition:function(l){return!(!l||l.sys.isActive()||l.sys.isTransitioning()||l===this.scene||this.systems.isTransitioning())},step:function(l,v){this._elapsed+=v,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var l=this._target.sys,v=this._target.sys.settings;l.events.emit(c.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(l,v,d,g){return this.manager.add(l,v,d,g)},launch:function(l,v){return l&&l!==this.key&&this.manager.queueOp("start",l,v),this},run:function(l,v){return l&&l!==this.key&&this.manager.queueOp("run",l,v),this},pause:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("pause",l,v),this},resume:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("resume",l,v),this},sleep:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("sleep",l,v),this},wake:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("wake",l,v),this},switch:function(l,v){return l!==this.key&&this.manager.queueOp("switch",this.key,l,v),this},stop:function(l,v){return l===void 0&&(l=this.key),this.manager.queueOp("stop",l,v),this},setActive:function(l,v,d){v===void 0&&(v=this.key);var g=this.manager.getScene(v);return g&&g.sys.setActive(l,d),this},setVisible:function(l,v){v===void 0&&(v=this.key);var d=this.manager.getScene(v);return d&&d.sys.setVisible(l),this},isSleeping:function(l){return l===void 0&&(l=this.key),this.manager.isSleeping(l)},isActive:function(l){return l===void 0&&(l=this.key),this.manager.isActive(l)},isPaused:function(l){return l===void 0&&(l=this.key),this.manager.isPaused(l)},isVisible:function(l){return l===void 0&&(l=this.key),this.manager.isVisible(l)},swapPosition:function(l,v){return v===void 0&&(v=this.key),l!==v&&this.manager.swapPosition(l,v),this},moveAbove:function(l,v){return v===void 0&&(v=this.key),l!==v&&this.manager.moveAbove(l,v),this},moveBelow:function(l,v){return v===void 0&&(v=this.key),l!==v&&this.manager.moveBelow(l,v),this},remove:function(l){return l===void 0&&(l=this.key),this.manager.remove(l),this},moveUp:function(l){return l===void 0&&(l=this.key),this.manager.moveUp(l),this},moveDown:function(l){return l===void 0&&(l=this.key),this.manager.moveDown(l),this},bringToTop:function(l){return l===void 0&&(l=this.key),this.manager.bringToTop(l),this},sendToBack:function(l){return l===void 0&&(l=this.key),this.manager.sendToBack(l),this},get:function(l){return this.manager.getScene(l)},getStatus:function(l){var v=this.manager.getScene(l);if(v)return v.sys.getStatus()},getIndex:function(l){return l===void 0&&(l=this.key),this.manager.getIndex(l)},shutdown:function(){var l=this.systems.events;l.off(c.SHUTDOWN,this.shutdown,this),l.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",s,"scenePlugin"),o.exports=s},55681:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),x=e(35154),c=e(46975),u=e(87033),h={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:a.PENDING,key:x(s,"key",""),active:x(s,"active",!1),visible:x(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(s,"pack",!1),cameras:x(s,"cameras",null),map:x(s,"map",c(u,x(s,"mapAdd",{}))),physics:x(s,"physics",{}),loader:x(s,"loader",{}),plugins:x(s,"plugins",!1),input:x(s,"input",{})}}};o.exports=h},2368:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89993),c=e(42363),u=e(44594),h=e(27397),s=e(52106),l=e(29747),v=e(55681),d=new a({initialize:function(y,S){this.scene=y,this.game,this.renderer,this.config=S,this.settings=v.create(S),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(g){this.settings.status=x.INIT,this.sceneUpdate=l,this.game=g,this.renderer=g.renderer,this.canvas=g.canvas,this.context=g.context;var y=g.plugins;this.plugins=y,y.addToScene(this,c.Global,[c.CoreScene,s(this),h(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(g,y){var S=this.events;S.emit(u.PRE_UPDATE,g,y),S.emit(u.UPDATE,g,y),this.sceneUpdate.call(this.scene,g,y),S.emit(u.POST_UPDATE,g,y)},render:function(g){var y=this.displayList;y.depthSort(),this.events.emit(u.PRE_RENDER,g),this.cameras.render(g,y),this.events.emit(u.RENDER,g)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(g){var y=this.settings,S=this.getStatus();return S!==x.CREATING&&S!==x.RUNNING?console.warn("Cannot pause non-running Scene",y.key):this.settings.active&&(y.status=x.PAUSED,y.active=!1,this.events.emit(u.PAUSE,this,g)),this},resume:function(g){var y=this.events,S=this.settings;return this.settings.active||(S.status=x.RUNNING,S.active=!0,y.emit(u.RESUME,this,g)),this},sleep:function(g){var y=this.settings,S=this.getStatus();return S!==x.CREATING&&S!==x.RUNNING?console.warn("Cannot sleep non-running Scene",y.key):(y.status=x.SLEEPING,y.active=!1,y.visible=!1,this.events.emit(u.SLEEP,this,g)),this},wake:function(g){var y=this.events,S=this.settings;return S.status=x.RUNNING,S.active=!0,S.visible=!0,y.emit(u.WAKE,this,g),S.isTransition&&y.emit(u.TRANSITION_WAKE,S.transitionFrom,S.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var g=this.settings.status;return g>x.PENDING&&g<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(g){return this.settings.visible=g,this},setActive:function(g,y){return g?this.resume(y):this.pause(y)},start:function(g){var y=this.events,S=this.settings;g&&(S.data=g),S.status=x.START,S.active=!0,S.visible=!0,y.emit(u.START,this),y.emit(u.READY,this,g)},shutdown:function(g){var y=this.events,S=this.settings;y.off(u.TRANSITION_INIT),y.off(u.TRANSITION_START),y.off(u.TRANSITION_COMPLETE),y.off(u.TRANSITION_OUT),S.status=x.SHUTDOWN,S.active=!1,S.visible=!1,y.emit(u.SHUTDOWN,this,g)},destroy:function(){var g=this.events,y=this.settings;y.status=x.DESTROYED,y.active=!1,y.visible=!1,g.emit(u.DESTROY,this),g.removeAllListeners();for(var S=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],T=0;T<S.length;T++)this[S[T]]=null}});o.exports=d},89993:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};o.exports=E},69830:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},7919:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},46763:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="create"},11763:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},71555:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},36735:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postupdate"},3809:o=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},90716:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},58262:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},91633:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},10319:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},87132:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},81961:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},90194:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleep"},6265:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},33178:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioncomplete"},43063:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioninit"},11259:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionout"},61611:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionstart"},45209:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionwake"},22966:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},21747:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wake"},44594:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}},62194:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),x=e(79291),c={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};c=x(!1,c,a),o.exports=c},30341:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(14463),u=e(79291),h=e(29747),s=new a({Extends:x,initialize:function(v,d,g){x.call(this),this.manager=v,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,g),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(console.error("addMarker "+l.name+" already exists in Sound"),!1):(l=u(!0,{name:"",start:0,duration:this.totalDuration-(l.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},l),this.markers[l.name]=l,!0)},updateMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(this.markers[l.name]=u(!0,this.markers[l.name],l),!0):(console.warn("Audio Marker: "+l.name+" missing in Sound: "+this.key),!1)},removeMarker:function(l){var v=this.markers[l];return v?(this.markers[l]=null,v):null},play:function(l,v){if(l===void 0&&(l=""),typeof l=="object"&&(v=l,l=""),typeof l!="string")return!1;if(!l)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[l])return console.warn("Marker: "+l+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[l],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=u(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var l=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,d=Math.pow(l,v);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.stop(),this.emit(c.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});o.exports=s},85034:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(41786),c=e(50792),u=e(14463),h=e(8443),s=e(46710),l=e(58731),v=e(29747),d=e(26099),g=new a({Extends:c,initialize:function(S){c.call(this),this.game=S,this.jsonCache=S.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new d,S.events.on(h.BLUR,this.onGameBlur,this),S.events.on(h.FOCUS,this.onGameFocus,this),S.events.on(h.PRE_STEP,this.update,this),S.events.once(h.DESTROY,this.destroy,this)},add:v,addAudioSprite:function(y,S){S===void 0&&(S={});var T=this.add(y,S);T.spritemap=this.jsonCache.get(y).spritemap;for(var w in T.spritemap)if(T.spritemap.hasOwnProperty(w)){var P=x(S),A=T.spritemap[w];P.loop=A.hasOwnProperty("loop")?A.loop:!1,T.addMarker({name:w,start:A.start,duration:A.end-A.start,config:P})}return T},get:function(y){return l(this.sounds,"key",y)},getAll:function(y){return y?s(this.sounds,"key",y):s(this.sounds)},getAllPlaying:function(){return s(this.sounds,"isPlaying",!0)},play:function(y,S){var T=this.add(y);return T.once(u.COMPLETE,T.destroy,T),S?S.name?(T.addMarker(S),T.play(S.name)):T.play(S):T.play()},playAudioSprite:function(y,S,T){var w=this.addAudioSprite(y);return w.once(u.COMPLETE,w.destroy,w),w.play(S,T)},remove:function(y){var S=this.sounds.indexOf(y);return S!==-1?(y.destroy(),this.sounds.splice(S,1),!0):!1},removeAll:function(){this.sounds.forEach(function(y){y.destroy()}),this.sounds.length=0},removeByKey:function(y){for(var S=0,T=this.sounds.length-1;T>=0;T--){var w=this.sounds[T];w.key===y&&(w.destroy(),this.sounds.splice(T,1),S++)}return S},pauseAll:function(){this.forEachActiveSound(function(y){y.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(y){y.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:v,stopAll:function(){this.forEachActiveSound(function(y){y.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(y){var S=0;return this.getAll(y).forEach(function(T){T.stop()&&S++}),S},isPlaying:function(y){var S=this.sounds,T=S.length-1,w;if(y===void 0){for(;T>=0;T--)if(w=this.sounds[T],w.isPlaying)return!0}else for(;T>=0;T--)if(w=this.sounds[T],w.key===y&&w.isPlaying)return!0;return!1},unlock:v,onBlur:v,onFocus:v,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(y,S){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var T=this.sounds.length-1;T>=0;T--)this.sounds[T].pendingRemove&&this.sounds.splice(T,1);this.sounds.forEach(function(w){w.update(y,S)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(y,S){var T=this;this.sounds.forEach(function(w,P){w&&!w.pendingRemove&&y.call(S||T,w,P,T.sounds)})},setRate:function(y){return this.rate=y,this},rate:{get:function(){return this._rate},set:function(y){this._rate=y,this.forEachActiveSound(function(S){S.calculateRate()}),this.emit(u.GLOBAL_RATE,this,y)}},setDetune:function(y){return this.detune=y,this},detune:{get:function(){return this._detune},set:function(y){this._detune=y,this.forEachActiveSound(function(S){S.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,y)}}});o.exports=g},14747:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33684),x=e(25960),c=e(57490),u={create:function(h){var s=h.config.audio,l=h.device.audio;return s.noAudio||!l.webAudio&&!l.audioData?new x(h):l.webAudio&&!s.disableWebAudio?new c(h):new a(h)}};o.exports=u},19723:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},98882:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decodedall"},57506:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decoded"},73146:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},11305:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},40577:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},30333:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},20394:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},21802:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},1299:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="looped"},99190:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},97125:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},89259:o=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pan"},79986:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},17586:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},19618:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},42306:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},10387:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},48959:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},9960:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seek"},19180:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stopall"},98328:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},50401:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},52498:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},14463:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}},64895:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),c=e(14463),u=e(45319),h=new x({Extends:a,initialize:function(l,v,d){if(d===void 0&&(d={}),this.tags=l.game.cache.audio.get(v),!this.tags)throw new Error('No cached audio asset with key "'+v);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,l,v,d)},play:function(s,l){return this.manager.isLocked(this,"play",[s,l])||!a.prototype.play.call(this,s,l)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,l=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),l===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+l*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var l=this.tags[s];if(l.dataset.used==="false")return l.dataset.used="true",this.audio=l,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(g){g.key===this.key&&g.audio&&v.push(g)},this),v.sort(function(g,y){return g.loop===y.loop?y.seek/y.duration-g.seek/g.duration:g.loop?1:-1});var d=v[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(l){console.warn(l)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s){if(this.isPlaying){if(this.startTime>0){this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var l=this.currentMarker?this.currentMarker.start:0,v=l+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=v-this.manager.loopEndOffset?(this.audio.currentTime=l+Math.max(0,d-v),d=this.audio.currentTime):d<l&&(this.audio.currentTime+=l,d=this.audio.currentTime),d<this.previousTime&&this.emit(c.LOOPED,this);else if(d>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(c.COMPLETE,this);return}this.previousTime=d}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,!this.manager.isLocked(this,"mute",s)&&(this.updateMute(),this.emit(c.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,!this.manager.isLocked(this,"volume",s)&&(this.updateVolume(),this.emit(c.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,!this.manager.isLocked(this,c.RATE,s)&&(this.calculateRate(),this.emit(c.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,!this.manager.isLocked(this,c.DETUNE,s)&&(this.calculateRate(),this.emit(c.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||this.startTime>0||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(c.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,!this.manager.isLocked(this,"loop",s)&&(this.audio&&(this.audio.loop=s),this.emit(c.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.currentConfig.pan},set:function(s){this.currentConfig.pan=s,this.emit(c.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});o.exports=h},33684:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),x=e(83419),c=e(14463),u=e(64895),h=new x({Extends:a,initialize:function(l){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,l)},add:function(s,l){var v=new u(this,s,l);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var s=this;if(this.game.cache.audio.entries.each(function(g,y){for(var S=0;S<y.length;S++)if(y[S].dataset.locked==="true")return s.locked=!0,!1;return!0}),!!this.locked){var l=!1,v=function(){l=!0},d=function(){if(l){l=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",d);var g=[];if(s.game.cache.audio.entries.each(function(S,T){for(var w=0;w<T.length;w++){var P=T[w];P.dataset.locked==="true"&&g.push(P)}return!0}),g.length!==0){var y=g[g.length-1];y.oncanplaythrough=function(){y.oncanplaythrough=null,g.forEach(function(S){S.dataset.locked="false"}),s.unlocked=!0},g.forEach(function(S){S.load()})}};this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(y){y.currentMarker===null&&y.duration===0&&(y.duration=y.tags[0].duration),y.totalDuration=y.tags[0].duration});this.lockedActionsQueue.length;){var g=this.lockedActionsQueue.shift();g.sound[g.prop].apply?g.sound[g.prop].apply(g.sound,g.value||[]):g.sound[g.prop]=g.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,l,v){return s.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:s,prop:l,value:v}),!0):!1},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(l){l.updateMute()}),this.emit(c.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(l){l.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,s)}}});o.exports=h},23717:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}},4603:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),c=e(50792),u=e(79291),h=e(29747),s=function(){return!1},l=function(){return null},v=function(){return this},d=new x({Extends:c,initialize:function(y,S,T){T===void 0&&(T={}),c.call(this),this.manager=y,this.key=S,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},T),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:s,updateMarker:s,removeMarker:l,play:s,pause:s,resume:s,stop:s,setMute:v,setVolume:v,setRate:v,setDetune:v,setSeek:v,setLoop:v,setPan:v,applyConfig:l,resetConfig:l,update:h,calculateRate:l,destroy:function(){a.prototype.destroy.call(this)}});o.exports=d},25960:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),x=e(83419),c=e(50792),u=e(4603),h=e(29747),s=new x({Extends:c,initialize:function(v){c.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(l,v){var d=new u(this,l,v);return this.sounds.push(d),d},addAudioSprite:function(l,v){var d=this.add(l,v);return d.spritemap={},d},get:function(l){return a.prototype.get.call(this,l)},getAll:function(l){return a.prototype.getAll.call(this,l)},play:function(l,v){return!1},playAudioSprite:function(l,v,d){return!1},remove:function(l){return a.prototype.remove.call(this,l)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(l){return a.prototype.removeByKey.call(this,l)},stopByKey:function(l){return a.prototype.stopByKey.call(this,l)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(l,v){a.prototype.forEachActiveSound.call(this,l,v)},destroy:function(){a.prototype.destroy.call(this)}});o.exports=s},71741:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),c=e(14463),u=e(95540),h=new x({Extends:a,initialize:function(l,v,d){if(d===void 0&&(d={}),this.audioBuffer=l.game.cache.audio.get(v),!this.audioBuffer)throw new Error('Audio key "'+v+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createPanner&&(this.spatialNode=l.context.createPanner(),this.volumeNode.connect(this.spatialNode)),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),l.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):l.context.createPanner?this.spatialNode.connect(l.destination):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,l,v,d)},play:function(s,l){return a.prototype.play.call(this,s,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0):!1},createAndStartBufferSource:function(){var s=this.currentConfig.seek,l=this.currentConfig.delay,v=this.manager.context.currentTime+l,d=(this.currentMarker?this.currentMarker.start:0)+s,g=this.duration-s;this.playTime=v-s,this.startTime=v,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,v),Math.max(0,d),Math.max(0,g)),this.resetConfig()},createAndStartLoopBufferSource:function(){var s=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,v=this.duration;this.loopTime=s,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,s),Math.max(0,l),Math.max(0,v))},createBufferSource:function(){var s=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(v){var d=v.target;(d===s.source||d===s.loopSource)&&(s.currentConfig.loop?s.hasLooped=!0:s.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){if(this.source){var s=this.source;this.source=null,s.stop(),s.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var s=this.currentConfig.source;if(s&&this.manager.context.createPanner){var l=this.spatialNode;l.panningModel=u(s,"panningModel","equalpower"),l.distanceModel=u(s,"distanceModel","inverse"),l.orientationX.value=u(s,"orientationX",0),l.orientationY.value=u(s,"orientationY",0),l.orientationZ.value=u(s,"orientationZ",-1),l.refDistance=u(s,"refDistance",1),l.maxDistance=u(s,"maxDistance",1e4),l.rolloffFactor=u(s,"rolloffFactor",1),l.coneInnerAngle=u(s,"coneInnerAngle",360),l.coneOuterAngle=u(s,"coneOuterAngle",0),l.coneOuterGain=u(s,"coneOuterGain",0),this.spatialSource=u(s,"follow",null),this.spatialSource||(l.positionX.value=u(s,"x",0),l.positionY.value=u(s,"y",0),l.positionZ.value=u(s,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(s){this.spatialNode&&(this.spatialNode.positionX.value=s)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(s){this.spatialNode&&(this.spatialNode.positionY.value=s)}},update:function(){if(this.isPlaying&&this.spatialSource){var s=u(this.spatialSource,"x",null),l=u(this.spatialSource,"y",null);s&&s!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=s),l&&l!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=l)}this.hasEnded?(a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var s=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,s),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,s)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var s=0,l=0;l<this.rateUpdates.length;l++){var v=0;l<this.rateUpdates.length-1?v=this.rateUpdates[l+1].time:v=this.manager.context.currentTime-this.playTime,s+=(v-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return s},getLoopTime:function(){for(var s=0,l=0;l<this.rateUpdates.length-1;l++)s+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var v=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+v.time+(this.duration-s)/v.rate},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,this.calculateRate(),this.emit(c.RATE,this,s)}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,this.calculateRate(),this.emit(c.DETUNE,this,s)}},setDetune:function(s){return this.detune=s,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(s){this.currentConfig.mute=s,this.muteNode.gain.setValueAtTime(s?0:1,0),this.emit(c.MUTE,this,s)}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(s){this.currentConfig.volume=s,this.volumeNode.gain.setValueAtTime(s,0),this.emit(c.VOLUME,this,s)}},setVolume:function(s){return this.volume=s,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.currentConfig.seek=s,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),s&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,s)}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(s){this.currentConfig.pan=s,this.pannerNode&&this.pannerNode.pan.setValueAtTime(s,this.manager.context.currentTime),this.emit(c.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});o.exports=h},57490:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53134),x=e(85034),c=e(83419),u=e(14463),h=e(8443),s=e(71741),l=e(95540),v=new c({Extends:x,initialize:function(g){this.context=this.createAudioContext(g),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),x.call(this,g),this.locked&&g.isBooted?this.unlock():g.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(d){var g=d.config.audio;if(g.context)return g.context.resume(),g.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(d){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=d,this.masterMuteNode=d.createGain(),this.masterVolumeNode=d.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(d.destination),this.destination=this.masterMuteNode,this},add:function(d,g){var y=new s(this,d,g);return this.sounds.push(y),y},decodeAudio:function(d,g){var y;Array.isArray(d)?y=d:y=[{key:d,data:g}];for(var S=this.game.cache.audio,T=y.length,w=0;w<y.length;w++){var P=y[w],A=P.key,R=P.data;typeof R=="string"&&(R=a(R));var I=(function(L,N){S.add(L,N),this.emit(u.DECODED,L),T--,T===0&&this.emit(u.DECODED_ALL)}).bind(this,A),M=(function(L,N){console.error("Error decoding audio: "+L+" - ",N?N.message:""),T--,T===0&&this.emit(u.DECODED_ALL)}).bind(this,A);this.context.decodeAudioData(R,I,M)}},setListenerPosition:function(d,g){return d===void 0&&(d=this.game.scale.width/2),g===void 0&&(g=this.game.scale.height/2),this.listenerPosition.set(d,g),this},unlock:function(){var d=this,g=document.body,y=function S(){if(d.context&&g){var T=g.removeEventListener.bind(g);d.context.resume().then(function(){T("touchstart",S),T("touchend",S),T("click",S),T("keydown",S),d.unlocked=!0},function(){T("touchstart",S),T("touchend",S),T("click",S),T("keydown",S)})}};g&&(g.addEventListener("touchstart",y,!1),g.addEventListener("touchend",y,!1),g.addEventListener("click",y,!1),g.addEventListener("keydown",y,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var d=this.context;d&&!this.locked&&(d.state==="suspended"||d.state==="interrupted")&&d.resume()},update:function(d,g){var y=this.context.listener;if(y&&y.positionX!==void 0){var S=l(this.listenerPosition,"x",null),T=l(this.listenerPosition,"y",null);S&&S!==this._spatialx&&(this._spatialx=y.positionX.value=S),T&&T!==this._spatialy&&(this._spatialy=y.positionY.value=T)}x.prototype.update.call(this,d,g),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var d=this;this.context.close().then(function(){d.context=null})}x.prototype.destroy.call(this)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(d){this.masterMuteNode.gain.setValueAtTime(d?0:1,0),this.emit(u.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(d){this.masterVolumeNode.gain.setValueAtTime(d,0),this.emit(u.GLOBAL_VOLUME,this,d)}}});o.exports=v},73162:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x=e(83419),c=e(29747),u=e(19186),h=new x({initialize:function(l){this.parent=l,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(s,l){return l?a.Add(this.list,s):a.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,l,v){return v?a.AddAt(this.list,s,l):a.AddAt(this.list,s,l,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,l){return s?(l===void 0&&(l=function(v,d){return v[s]-d[s]}),u(this.list,l),this):this},getByName:function(s){return a.GetFirst(this.list,"name",s)},getRandom:function(s,l){return a.GetRandom(this.list,s,l)},getFirst:function(s,l,v,d){return a.GetFirst(this.list,s,l,v,d)},getAll:function(s,l,v,d){return a.GetAll(this.list,s,l,v,d)},count:function(s,l){return a.CountAllMatching(this.list,s,l)},swap:function(s,l){a.Swap(this.list,s,l)},moveTo:function(s,l){return a.MoveTo(this.list,s,l)},moveAbove:function(s,l){return a.MoveAbove(this.list,s,l)},moveBelow:function(s,l){return a.MoveBelow(this.list,s,l)},remove:function(s,l){return l?a.Remove(this.list,s):a.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,l){return l?a.RemoveAt(this.list,s):a.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,l,v){return v?a.RemoveBetween(this.list,s,l):a.RemoveBetween(this.list,s,l,this.removeCallback,this)},removeAll:function(s){for(var l=this.list.length;l--;)this.remove(this.list[l],s);return this},bringToTop:function(s){return a.BringToTop(this.list,s)},sendToBack:function(s){return a.SendToBack(this.list,s)},moveUp:function(s){return a.MoveUp(this.list,s),s},moveDown:function(s){return a.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(s,l){return a.Replace(this.list,s,l)},exists:function(s){return this.list.indexOf(s)>-1},setAll:function(s,l,v,d){return a.SetAll(this.list,s,l,v,d),this},each:function(s,l){for(var v=[null],d=2;d<arguments.length;d++)v.push(arguments[d]);for(d=0;d<this.list.length;d++)v[0]=this.list[d],s.apply(l,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});o.exports=h},90330:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u){this.entries={},this.size=0,this.setAll(u)},setAll:function(c){if(Array.isArray(c))for(var u=0;u<c.length;u++)this.set(c[u][0],c[u][1]);return this},set:function(c,u){return this.has(c)||this.size++,this.entries[c]=u,this},get:function(c){if(this.has(c))return this.entries[c]},getArray:function(){var c=[],u=this.entries;for(var h in u)c.push(u[h]);return c},has:function(c){return this.entries.hasOwnProperty(c)},delete:function(c){return this.has(c)&&(delete this.entries[c],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(c){delete this.entries[c]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var c=[],u=this.entries;for(var h in u)c.push(u[h]);return c},dump:function(){var c=this.entries;console.group("Map");for(var u in c)console.log(u,c[u]);console.groupEnd()},each:function(c){var u=this.entries;for(var h in u)if(c(h,u[h])===!1)break;return this},contains:function(c){var u=this.entries;for(var h in u)if(u[h]===c)return!0;return!1},merge:function(c,u){u===void 0&&(u=!1);var h=this.entries,s=c.entries;for(var l in s)h.hasOwnProperty(l)&&u?h[l]=s[l]:this.set(l,s[l]);return this}});o.exports=x},25774:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(82348),u=new a({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive(h)&&!this.isDestroying(h)||this.isPending(h)||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var s=this._pending,l=s.indexOf(h);l!==-1&&s.splice(l,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,s=this._destroy,l=h.length;l--;)s.push(h[l]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,s=this._active,l,v;for(l=0;l<h.length;l++){v=h[l];var d=s.indexOf(v);d!==-1&&(s.splice(d,1),this.emit(c.PROCESS_QUEUE_REMOVE,v))}for(h.length=0,h=this._pending,l=0;l<h.length;l++)v=h[l],(!this.checkQueue||this.checkQueue&&s.indexOf(v)===-1)&&(s.push(v),this.emit(c.PROCESS_QUEUE_ADD,v));return h.length=0,this._toProcess=0,s},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});o.exports=u},59542:(o,E,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43886);function x(R){if(!(this instanceof x))return new x(R);this._maxEntries=Math.max(4,R||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(R){var I=this.data,M=[],L=this.toBBox;if(!w(R,I))return M;for(var N=[],G,D,B,$;I;){for(G=0,D=I.children.length;G<D;G++)B=I.children[G],$=I.leaf?L(B):B,w(R,$)&&(I.leaf?M.push(B):T(R,$)?this._all(B,M):N.push(B));I=N.pop()}return M},collides:function(R){var I=this.data,M=this.toBBox;if(!w(R,I))return!1;for(var L=[],N,G,D,B;I;){for(N=0,G=I.children.length;N<G;N++)if(D=I.children[N],B=I.leaf?M(D):D,w(R,B)){if(I.leaf||T(R,B))return!0;L.push(D)}I=L.pop()}return!1},load:function(R){if(!(R&&R.length))return this;if(R.length<this._minEntries){for(var I=0,M=R.length;I<M;I++)this.insert(R[I]);return this}var L=this._build(R.slice(),0,R.length-1,0);if(!this.data.children.length)this.data=L;else if(this.data.height===L.height)this._splitRoot(this.data,L);else{if(this.data.height<L.height){var N=this.data;this.data=L,L=N}this._insert(L,this.data.height-L.height-1,!0)}return this},insert:function(R){return R&&this._insert(R,this.data.height-1),this},clear:function(){return this.data=P([]),this},remove:function(R,I){if(!R)return this;for(var M=this.data,L=this.toBBox(R),N=[],G=[],D,B,$,k;M||N.length;){if(M||(M=N.pop(),B=N[N.length-1],D=G.pop(),k=!0),M.leaf&&($=c(R,M.children,I),$!==-1))return M.children.splice($,1),N.push(M),this._condense(N),this;!k&&!M.leaf&&T(M,L)?(N.push(M),G.push(D),D=0,B=M,M=M.children[0]):B?(D++,M=B.children[D],k=!1):M=null}return this},toBBox:function(R){return R},compareMinX:l,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(R){return this.data=R,this},_all:function(R,I){for(var M=[];R;)R.leaf?I.push.apply(I,R.children):M.push.apply(M,R.children),R=M.pop();return I},_build:function(R,I,M,L){var N=M-I+1,G=this._maxEntries,D;if(N<=G)return D=P(R.slice(I,M+1)),u(D,this.toBBox),D;L||(L=Math.ceil(Math.log(N)/Math.log(G)),G=Math.ceil(N/Math.pow(G,L-1))),D=P([]),D.leaf=!1,D.height=L;var B=Math.ceil(N/G),$=B*Math.ceil(Math.sqrt(G)),k,X,Y,Z;for(A(R,I,M,$,this.compareMinX),k=I;k<=M;k+=$)for(Y=Math.min(k+$-1,M),A(R,k,Y,B,this.compareMinY),X=k;X<=Y;X+=B)Z=Math.min(X+B-1,Y),D.children.push(this._build(R,X,Z,L-1));return u(D,this.toBBox),D},_chooseSubtree:function(R,I,M,L){for(var N,G,D,B,$,k,X,Y;L.push(I),!(I.leaf||L.length-1===M);){for(X=Y=1/0,N=0,G=I.children.length;N<G;N++)D=I.children[N],$=d(D),k=y(R,D)-$,k<Y?(Y=k,X=$<X?$:X,B=D):k===Y&&$<X&&(X=$,B=D);I=B||I.children[0]}return I},_insert:function(R,I,M){var L=this.toBBox,N=M?R:L(R),G=[],D=this._chooseSubtree(N,this.data,I,G);for(D.children.push(R),s(D,N);I>=0&&G[I].children.length>this._maxEntries;)this._split(G,I),I--;this._adjustParentBBoxes(N,G,I)},_split:function(R,I){var M=R[I],L=M.children.length,N=this._minEntries;this._chooseSplitAxis(M,N,L);var G=this._chooseSplitIndex(M,N,L),D=P(M.children.splice(G,M.children.length-G));D.height=M.height,D.leaf=M.leaf,u(M,this.toBBox),u(D,this.toBBox),I?R[I-1].children.push(D):this._splitRoot(M,D)},_splitRoot:function(R,I){this.data=P([R,I]),this.data.height=R.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(R,I,M){var L,N,G,D,B,$,k,X;for($=k=1/0,L=I;L<=M-I;L++)N=h(R,0,L,this.toBBox),G=h(R,L,M,this.toBBox),D=S(N,G),B=d(N)+d(G),D<$?($=D,X=L,k=B<k?B:k):D===$&&B<k&&(k=B,X=L);return X},_chooseSplitAxis:function(R,I,M){var L=R.leaf?this.compareMinX:l,N=R.leaf?this.compareMinY:v,G=this._allDistMargin(R,I,M,L),D=this._allDistMargin(R,I,M,N);G<D&&R.children.sort(L)},_allDistMargin:function(R,I,M,L){R.children.sort(L);var N=this.toBBox,G=h(R,0,I,N),D=h(R,M-I,M,N),B=g(G)+g(D),$,k;for($=I;$<M-I;$++)k=R.children[$],s(G,R.leaf?N(k):k),B+=g(G);for($=M-I-1;$>=I;$--)k=R.children[$],s(D,R.leaf?N(k):k),B+=g(D);return B},_adjustParentBBoxes:function(R,I,M){for(var L=M;L>=0;L--)s(I[L],R)},_condense:function(R){for(var I=R.length-1,M;I>=0;I--)R[I].children.length===0?I>0?(M=R[I-1].children,M.splice(M.indexOf(R[I]),1)):this.clear():u(R[I],this.toBBox)},compareMinX:function(R,I){return R.left-I.left},compareMinY:function(R,I){return R.top-I.top},toBBox:function(R){return{minX:R.left,minY:R.top,maxX:R.right,maxY:R.bottom}}};function c(R,I,M){if(!M)return I.indexOf(R);for(var L=0;L<I.length;L++)if(M(R,I[L]))return L;return-1}function u(R,I){h(R,0,R.children.length,I,R)}function h(R,I,M,L,N){N||(N=P(null)),N.minX=1/0,N.minY=1/0,N.maxX=-1/0,N.maxY=-1/0;for(var G=I,D;G<M;G++)D=R.children[G],s(N,R.leaf?L(D):D);return N}function s(R,I){return R.minX=Math.min(R.minX,I.minX),R.minY=Math.min(R.minY,I.minY),R.maxX=Math.max(R.maxX,I.maxX),R.maxY=Math.max(R.maxY,I.maxY),R}function l(R,I){return R.minX-I.minX}function v(R,I){return R.minY-I.minY}function d(R){return(R.maxX-R.minX)*(R.maxY-R.minY)}function g(R){return R.maxX-R.minX+(R.maxY-R.minY)}function y(R,I){return(Math.max(I.maxX,R.maxX)-Math.min(I.minX,R.minX))*(Math.max(I.maxY,R.maxY)-Math.min(I.minY,R.minY))}function S(R,I){var M=Math.max(R.minX,I.minX),L=Math.max(R.minY,I.minY),N=Math.min(R.maxX,I.maxX),G=Math.min(R.maxY,I.maxY);return Math.max(0,N-M)*Math.max(0,G-L)}function T(R,I){return R.minX<=I.minX&&R.minY<=I.minY&&I.maxX<=R.maxX&&I.maxY<=R.maxY}function w(R,I){return I.minX<=R.maxX&&I.minY<=R.maxY&&I.maxX>=R.minX&&I.maxY>=R.minY}function P(R){return{children:R,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(R,I,M,L,N){for(var G=[I,M],D;G.length;)M=G.pop(),I=G.pop(),!(M-I<=L)&&(D=I+Math.ceil((M-I)/L/2)*L,a(R,D,I,M,N),G.push(I,D,D,M))}o.exports=x},35072:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var h=0;h<u.length;h++)this.set(u[h])},set:function(c){return this.entries.indexOf(c)===-1&&this.entries.push(c),this},get:function(c,u){for(var h=0;h<this.entries.length;h++){var s=this.entries[h];if(s[c]===u)return s}},getArray:function(){return this.entries.slice(0)},delete:function(c){var u=this.entries.indexOf(c);return u>-1&&this.entries.splice(u,1),this},dump:function(){console.group("Set");for(var c=0;c<this.entries.length;c++){var u=this.entries[c];console.log(u)}console.groupEnd()},each:function(c,u){var h,s=this.entries.slice(),l=s.length;if(u)for(h=0;h<l&&c.call(u,s[h],h)!==!1;h++);else for(h=0;h<l&&c(s[h],h)!==!1;h++);return this},iterate:function(c,u){var h,s=this.entries.length;if(u)for(h=0;h<s&&c.call(u,this.entries[h],h)!==!1;h++);else for(h=0;h<s&&c(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(c){var u,h=[];for(u=1;u<arguments.length;u++)h.push(arguments[u]);var s=this.entries.length;for(u=0;u<s;u++){var l=this.entries[u];l[c].apply(l,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(c){return this.entries.indexOf(c)>-1},union:function(c){var u=new x;return c.entries.forEach(function(h){u.set(h)}),this.entries.forEach(function(h){u.set(h)}),u},intersect:function(c){var u=new x;return this.entries.forEach(function(h){c.contains(h)&&u.set(h)}),u},difference:function(c){var u=new x;return this.entries.forEach(function(h){c.contains(h)||u.set(h)}),u},size:{get:function(){return this.entries.length},set:function(c){return c<this.entries.length?this.entries.length=c:this.entries.length}}});o.exports=x},86555:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),c=e(56583),u=e(26099),h=new x({initialize:function(l,v,d,g){l===void 0&&(l=0),v===void 0&&(v=l),d===void 0&&(d=0),g===void 0&&(g=null),this._width=l,this._height=v,this._parent=g,this.aspectMode=d,this.aspectRatio=v===0?1:l/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,l){return s===void 0&&(s=0),l===void 0&&(l=s),this.snapTo.set(s,l),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,l){return s===void 0&&(s=0),l===void 0&&(l=s),this.minWidth=a(s,0,this.maxWidth),this.minHeight=a(l,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,l){return s===void 0&&(s=Number.MAX_VALUE),l===void 0&&(l=s),this.maxWidth=a(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(l,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,l){switch(s===void 0&&(s=0),l===void 0&&(l=s),this.aspectMode){case h.NONE:this._width=this.getNewWidth(c(s,this.snapTo.x)),this._height=this.getNewHeight(c(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(l,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(s,l,!0);break;case h.ENVELOP:this.constrain(s,l,!1);break}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,l){return this._width=this.getNewWidth(c(s,this.snapTo.x)),this._height=this.getNewHeight(c(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,l){return l===void 0&&(l=!0),s=a(s,this.minWidth,this.maxWidth),l&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,l){return l===void 0&&(l=!0),s=a(s,this.minHeight,this.maxHeight),l&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,l,v){s===void 0&&(s=0),l===void 0&&(l=s),v===void 0&&(v=!0),s=this.getNewWidth(s),l=this.getNewHeight(l);var d=this.snapTo,g=l===0?1:s/l;return v&&this.aspectRatio>g||!v&&this.aspectRatio<g?(s=c(s,d.x),l=s/this.aspectRatio,d.y>0&&(l=c(l,d.y),s=l*this.aspectRatio)):(v&&this.aspectRatio<g||!v&&this.aspectRatio>g)&&(l=c(l,d.y),s=l*this.aspectRatio,d.x>0&&(s=c(s,d.x),l=s*(1/this.aspectRatio))),this._width=s,this._height=l,this},fitTo:function(s,l){return this.constrain(s,l,!0)},envelop:function(s,l){return this.constrain(s,l,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,o.exports=h},15238:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},56187:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},82348:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}},41392:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}},57382:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),c=e(40987),u=e(8054),h=e(50030),s=e(79237),l=new a({Extends:s,initialize:function(d,g,y,S,T){s.call(this,d,g,y,S,T),this.add("__BASE",0,0,0,S,T),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=S,this.height=T,this.imageData=this.context.getImageData(0,0,S,T),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(v,d,g,y){return y===void 0&&(y=!0),this.context.drawImage(g,v,d),y&&this.update(),this},drawFrame:function(v,d,g,y,S){g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=!0);var T=this.manager.getFrame(v,d);if(T){var w=T.canvasData,P=T.cutWidth,A=T.cutHeight,R=T.source.resolution;this.context.drawImage(T.source.image,w.x,w.y,P,A,g,y,P/R,A/R),S&&this.update()}return this},setPixel:function(v,d,g,y,S,T){T===void 0&&(T=255),v=Math.abs(Math.floor(v)),d=Math.abs(Math.floor(d));var w=this.getIndex(v,d);if(w>-1){var P=this.context.getImageData(v,d,1,1);P.data[0]=g,P.data[1]=y,P.data[2]=S,P.data[3]=T,this.context.putImageData(P,v,d)}return this},putData:function(v,d,g,y,S,T,w){return y===void 0&&(y=0),S===void 0&&(S=0),T===void 0&&(T=v.width),w===void 0&&(w=v.height),this.context.putImageData(v,d,g,y,S,T,w),this},getData:function(v,d,g,y){v=x(Math.floor(v),0,this.width-1),d=x(Math.floor(d),0,this.height-1),g=x(g,1,this.width-v),y=x(y,1,this.height-d);var S=this.context.getImageData(v,d,g,y);return S},getPixel:function(v,d,g){g||(g=new c);var y=this.getIndex(v,d);if(y>-1){var S=this.data,T=S[y+0],w=S[y+1],P=S[y+2],A=S[y+3];g.setTo(T,w,P,A)}return g},getPixels:function(v,d,g,y){v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=this.width),y===void 0&&(y=g),v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d));for(var S=x(v,0,this.width),T=x(v+g,0,this.width),w=x(d,0,this.height),P=x(d+y,0,this.height),A=new c,R=[],I=w;I<P;I++){for(var M=[],L=S;L<T;L++)A=this.getPixel(L,I,A),M.push({x:L,y:I,color:A.color,alpha:A.alphaGL});R.push(M)}return R},getIndex:function(v,d){return v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d)),v<this.width&&d<this.height?(v+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,d,g,y,S){return v===void 0&&(v=0),d===void 0&&(d=0),g===void 0&&(g=this.width),y===void 0&&(y=this.height),S===void 0&&(S=!0),this.context.clearRect(v,d,g,y),S&&this.update(),this},setSize:function(v,d){return d===void 0&&(d=v),(v!==this.width||d!==this.height)&&(this.canvas.width=v,this.canvas.height=d,this._source.width=v,this._source.height=d,this._source.isPowerOf2=h(v,d),this.frames.__BASE.setSize(v,d,0,0),this.width=v,this.height=d,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});o.exports=l},81320:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(38058),c=e(27919),u=e(83419),h=e(8054),s=e(4327),l=e(95540),v=e(36060),d=e(32302),g=e(79237),y=e(70554),S=new u({Extends:g,initialize:function(w,P,A,R){A===void 0&&(A=256),R===void 0&&(R=256),this.type="DynamicTexture";var I=w.game.renderer,M=I&&I.type===h.CANVAS,L=M?c.create2D(this,A,R):[this];g.call(this,w,P,L,A,R),this.add("__BASE",0,0,0,A,R),this.renderer=I,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=M?L:null,this.context=M?L.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,A,R).setScene(w.game.scene.systemScene,!1),this.renderTarget=M?null:new d(I,A,R,1,0,!1,!1,!0,!1),this.pipeline=M?null:I.pipelines.get(v.SINGLE_PIPELINE),this.setSize(A,R)},setSize:function(T,w){w===void 0&&(w=T);var P=this.get(),A=P.source;if(T!==this.width||w!==this.height){this.canvas&&(this.canvas.width=T,this.canvas.height=w);var R=this.renderTarget;R&&(R.willResize(T,w)&&R.resize(T,w),R.texture!==A.glTexture&&this.renderer.deleteTexture(A.glTexture),this.setFromRenderTarget()),this.camera.setSize(T,w),A.width=T,A.height=w,P.setSize(T,w),this.width=T,this.height=w}else{var I=this.getSourceImage();P.cutX+T>I.width&&(T=I.width-P.cutX),P.cutY+w>I.height&&(w=I.height-P.cutY),P.setSize(T,w,P.cutX,P.cutY)}return this},setFromRenderTarget:function(){var T=this.get(),w=T.source,P=this.renderTarget;return w.isRenderTexture=!0,w.isGLTexture=!0,w.glTexture=P.texture,this},setIsSpriteTexture:function(T){return this.isSpriteTexture=T,this},fill:function(T,w,P,A,R,I){var M=this.camera,L=this.renderer;w===void 0&&(w=1),P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=this.width),I===void 0&&(I=this.height);var N=T>>16&255,G=T>>8&255,D=T&255,B=this.renderTarget;if(M.preRender(),B){B.bind(!0);var $=this.pipeline.manager.set(this.pipeline),k=L.width/B.width,X=L.height/B.height,Y=B.height-(A+I);$.drawFillRect(P*k,Y*X,R*k,I*X,y.getTintFromFloats(D/255,G/255,N/255,1),w),B.unbind(!0)}else{var Z=this.context;L.setContext(Z),Z.globalCompositeOperation="source-over",Z.fillStyle="rgba("+N+","+G+","+D+","+w+")",Z.fillRect(P,A,R,I),L.setContext()}return this.dirty=!0,this},clear:function(T,w,P,A){if(this.dirty){var R=this.context,I=this.renderTarget;I?I.clear(T,w,P,A):R&&(T!==void 0&&w!==void 0&&P!==void 0&&A!==void 0?R.clearRect(T,w,P,A):(R.save(),R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,this.width,this.height),R.restore())),this.dirty=!1}return this},stamp:function(T,w,P,A,R){P===void 0&&(P=0),A===void 0&&(A=0);var I=l(R,"alpha",1),M=l(R,"tint",16777215),L=l(R,"angle",0),N=l(R,"rotation",0),G=l(R,"scale",1),D=l(R,"scaleX",G),B=l(R,"scaleY",G),$=l(R,"originX",.5),k=l(R,"originY",.5),X=l(R,"blendMode",0),Y=l(R,"erase",!1),Z=l(R,"skipBatch",!1),Q=this.manager.resetStamp(I,M);return Q.setAngle(0),L!==0?Q.setAngle(L):N!==0&&Q.setRotation(N),Q.setScale(D,B),Q.setTexture(T,w),Q.setOrigin($,k),Q.setBlendMode(X),Y&&(this._eraseMode=!0),Z?this.batchGameObject(Q,P,A):this.draw(Q,P,A),Y&&(this._eraseMode=!1),this},erase:function(T,w,P){return this._eraseMode=!0,this.draw(T,w,P),this._eraseMode=!1,this},draw:function(T,w,P,A,R){return this.beginDraw(),this.batchDraw(T,w,P,A,R),this.endDraw(),this},drawFrame:function(T,w,P,A,R,I){return this.beginDraw(),this.batchDrawFrame(T,w,P,A,R,I),this.endDraw(),this},repeat:function(T,w,P,A,R,I,M,L,N){if(P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=this.width),I===void 0&&(I=this.height),M===void 0&&(M=1),L===void 0&&(L=16777215),N===void 0&&(N=!1),T instanceof s?w=T:w=this.manager.getFrame(T,w),!w)return this;var G=this.manager.resetStamp(M,L);G.setFrame(w),G.setOrigin(0);var D=w.width,B=w.height;R=Math.floor(R),I=Math.floor(I);var $=Math.ceil(R/D),k=Math.ceil(I/B),X=$*D-R,Y=k*B-I;X>0&&(X=D-X),Y>0&&(Y=B-Y),P<0&&($+=Math.ceil(Math.abs(P)/D)),A<0&&(k+=Math.ceil(Math.abs(A)/B));var Z=P,Q=A,j=!1,K=this.manager.stampCrop.setTo(0,0,D,B);N||this.beginDraw();for(var W=0;W<k;W++){if(Q+B<0){Q+=B;continue}for(var V=0;V<$;V++){if(j=!1,Z+D<0){Z+=D;continue}else Z<0&&(j=!0,K.width=D+Z,K.x=D-K.width);Q<0&&(j=!0,K.height=B+Q,K.y=B-K.height),X>0&&V===$-1&&(j=!0,K.width=X),Y>0&&W===k-1&&(j=!0,K.height=Y),j&&G.setCrop(K),this.batchGameObject(G,Z,Q),G.isCropped=!1,K.setTo(0,0,D,B),Z+=D}Z=P,Q+=B}return N||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var T=this.camera,w=this.renderer,P=this.renderTarget;T.preRender(),P?w.beginCapture(P.width,P.height):w.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(T,w,P,A,R){return Array.isArray(T)||(T=[T]),this.batchList(T,w,P,A,R),this},batchDrawFrame:function(T,w,P,A,R,I){P===void 0&&(P=0),A===void 0&&(A=0),R===void 0&&(R=1),I===void 0&&(I=16777215);var M=this.manager.getFrame(T,w);return M&&(this.renderTarget?this.pipeline.batchTextureFrame(M,P,A,I,R,this.camera.matrix,null):this.batchTextureFrame(M,P,A,R,I)),this},endDraw:function(T){if(T===void 0&&(T=this._eraseMode),this.isDrawing){var w=this.renderer,P=this.renderTarget;if(P){var A=w.endCapture(),R=w.pipelines.setUtility();R.blitFrame(A,P,1,!1,!1,T,this.isSpriteTexture),w.resetScissor(),w.resetViewport()}else w.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(T,w,P,A,R){var I=T.length;if(I!==0)for(var M=0;M<I;M++){var L=T[M];!L||L===this||(L.renderWebGL||L.renderCanvas?this.batchGameObject(L,w,P):L.isParent||L.list?this.batchGroup(L.getChildren(),w,P):typeof L=="string"?this.batchTextureFrameKey(L,null,w,P,A,R):L instanceof s?this.batchTextureFrame(L,w,P,A,R):Array.isArray(L)&&this.batchList(L,w,P,A,R))}},batchGroup:function(T,w,P){w===void 0&&(w=0),P===void 0&&(P=0);for(var A=0;A<T.length;A++){var R=T[A];R.willRender(this.camera)&&this.batchGameObject(R,R.x+w,R.y+P)}},batchGameObject:function(T,w,P){w===void 0&&(w=T.x),P===void 0&&(P=T.y);var A=T.x,R=T.y,I=this.camera,M=this.renderer,L=this._eraseMode,N=T.mask;if(T.setPosition(w,P),this.canvas){if(L){var G=T.blendMode;T.blendMode=a.ERASE}N&&N.preRenderCanvas(M,T,I),T.renderCanvas(M,T,I,null),N&&N.postRenderCanvas(M,T,I),L&&(T.blendMode=G)}else M&&(N&&N.preRenderWebGL(M,T,I),L||M.setBlendMode(T.blendMode),T.renderWebGL(M,T,I),N&&N.postRenderWebGL(M,I,this.renderTarget));T.setPosition(A,R)},batchTextureFrameKey:function(T,w,P,A,R,I){var M=this.manager.getFrame(T,w);M&&this.batchTextureFrame(M,P,A,R,I)},batchTextureFrame:function(T,w,P,A,R){w===void 0&&(w=0),P===void 0&&(P=0),A===void 0&&(A=1),R===void 0&&(R=16777215);var I=this.camera.matrix,M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,w,P,R,A,I,null);else{var L=this.context,N=T.canvasData,G=T.source.image;L.save(),L.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",L.globalAlpha=A,I.setToContext(L),N.width>0&&N.height>0&&L.drawImage(G,N.x,N.y,N.width,N.height,w,P,N.width,N.height),L.restore()}},snapshotArea:function(T,w,P,A,R,I,M){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,R,!1,T,w,P,A,I,M):this.renderer.snapshotCanvas(this.canvas,R,!1,T,w,P,A,I,M),this},snapshot:function(T,w,P){return this.snapshotArea(0,0,this.width,this.height,T,w,P)},snapshotPixel:function(T,w,P){return this.snapshotArea(T,w,1,1,P,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(T,w,P,A){var R=this.manager.resetStamp();R.setTexture(this),R.setOrigin(0),R.renderWebGL(T,R,P,A)},renderCanvas:function(){},destroy:function(){var T=this.manager.stamp;T&&T.texture===this&&this.manager.resetStamp(),g.prototype.destroy.call(this),c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});o.exports=S},4327:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),c=e(79291),u=new a({initialize:function(s,l,v,d,g,y,S){this.texture=s,this.name=l,this.source=s.source[v],this.sourceIndex=v,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(y,S,d,g)},setCutPosition:function(h,s){return h===void 0&&(h=0),s===void 0&&(s=0),this.cutX=h,this.cutY=s,this.updateUVs()},setCutSize:function(h,s){return this.cutWidth=h,this.cutHeight=s,this.updateUVs()},setSize:function(h,s,l,v){l===void 0&&(l=0),v===void 0&&(v=0),this.setCutPosition(l,v),this.setCutSize(h,s),this.width=h,this.height=s,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(s*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(s/2);var d=this.data,g=d.cut;g.x=l,g.y=v,g.w=h,g.h=s,g.r=l+h,g.b=v+s,d.sourceSize.w=h,d.sourceSize.h=s,d.spriteSourceSize.w=h,d.spriteSourceSize.h=s,d.radius=.5*Math.sqrt(h*h+s*s);var y=d.drawImage;return y.x=l,y.y=v,y.width=h,y.height=s,this.updateUVs()},setTrim:function(h,s,l,v,d,g){var y=this.data,S=y.spriteSourceSize;return y.trim=!0,y.sourceSize.w=h,y.sourceSize.h=s,S.x=l,S.y=v,S.w=d,S.h=g,S.r=l+d,S.b=v+g,this.x=l,this.y=v,this.width=d,this.height=g,this.halfWidth=d*.5,this.halfHeight=g*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(g/2),this.updateUVs()},setScale9:function(h,s,l,v){var d=this.data;return d.scale9=!0,d.is3Slice=s===0&&v===this.height,d.scale9Borders.x=h,d.scale9Borders.y=s,d.scale9Borders.w=l,d.scale9Borders.h=v,this},setCropUVs:function(h,s,l,v,d,g,y){var S=this.cutX,T=this.cutY,w=this.cutWidth,P=this.cutHeight,A=this.realWidth,R=this.realHeight;s=x(s,0,A),l=x(l,0,R),v=x(v,0,A-s),d=x(d,0,R-l);var I=S+s,M=T+l,L=v,N=d,G=this.data;if(G.trim){var D=G.spriteSourceSize;v=x(v,0,w-s),d=x(d,0,P-l);var B=s+v,$=l+d,k=!(D.r<s||D.b<l||D.x>B||D.y>$);if(k){var X=Math.max(D.x,s),Y=Math.max(D.y,l),Z=Math.min(D.r,B)-X,Q=Math.min(D.b,$)-Y;L=Z,N=Q,g?I=S+(w-(X-D.x)-Z):I=S+(X-D.x),y?M=T+(P-(Y-D.y)-Q):M=T+(Y-D.y),s=X,l=Y,v=Z,d=Q}else I=0,M=0,L=0,N=0}else g&&(I=S+(w-s-v)),y&&(M=T+(P-l-d));var j=this.source.width,K=this.source.height;return h.u0=Math.max(0,I/j),h.v0=Math.max(0,M/K),h.u1=Math.min(1,(I+L)/j),h.v1=Math.min(1,(M+N)/K),h.x=s,h.y=l,h.cx=I,h.cy=M,h.cw=L,h.ch=N,h.width=v,h.height=d,h.flipX=g,h.flipY=y,h},updateCropUVs:function(h,s,l){return this.setCropUVs(h,h.x,h.y,h.width,h.height,s,l)},setUVs:function(h,s,l,v,d,g){var y=this.data.drawImage;return y.width=h,y.height=s,this.u0=l,this.v0=v,this.u1=d,this.v1=g,this},updateUVs:function(){var h=this.cutX,s=this.cutY,l=this.cutWidth,v=this.cutHeight,d=this.data.drawImage;d.width=l,d.height=v;var g=this.source.width,y=this.source.height;return this.u0=h/g,this.v0=s/y,this.u1=(h+l)/g,this.v1=(s+v)/y,this},updateUVsInverted:function(){var h=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/s,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var h=new u(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=c(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});o.exports=u},79237:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(4327),c=e(11876),u='Texture "%s" has no frame "%s"',h=new a({initialize:function(l,v,d,g,y){Array.isArray(d)||(d=[d]),this.manager=l,this.key=v,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var S=0;S<d.length;S++)this.source.push(new c(this,d[S],g,y))},add:function(s,l,v,d,g,y){if(this.has(s))return null;var S=new x(this,s,l,v,d,g,y);return this.frames[s]=S,this.firstFrame==="__BASE"&&(this.firstFrame=s),this.frameTotal++,S},remove:function(s){if(this.has(s)){var l=this.get(s);return l.destroy(),delete this.frames[s],!0}return!1},has:function(s){return this.frames.hasOwnProperty(s)},get:function(s){s||(s=this.firstFrame);var l=this.frames[s];return l||(console.warn(u,this.key,s),l=this.frames[this.firstFrame]),l},getTextureSourceIndex:function(s){for(var l=0;l<this.source.length;l++)if(this.source[l]===s)return l;return-1},getFramesFromTextureSource:function(s,l){l===void 0&&(l=!1);var v=[];for(var d in this.frames)if(!(d==="__BASE"&&!l)){var g=this.frames[d];g.sourceIndex===s&&v.push(g)}return v},getFrameBounds:function(s){s===void 0&&(s=0);for(var l=this.getFramesFromTextureSource(s,!0),v=l[0],d=v.cutX,g=v.cutY,y=v.cutX+v.cutWidth,S=v.cutY+v.cutHeight,T=1;T<l.length;T++){var w=l[T];w.cutX<d&&(d=w.cutX),w.cutY<g&&(g=w.cutY),w.cutX+w.cutWidth>y&&(y=w.cutX+w.cutWidth),w.cutY+w.cutHeight>S&&(S=w.cutY+w.cutHeight)}return{x:d,y:g,width:y-d,height:S-g}},getFrameNames:function(s){s===void 0&&(s=!1);var l=Object.keys(this.frames);if(!s){var v=l.indexOf("__BASE");v!==-1&&l.splice(v,1)}return l},getSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var l=this.frames[s];return l?l.source.image:(console.warn(u,this.key,s),this.frames.__BASE.source.image)},getDataSourceImage:function(s){(s==null||this.frameTotal===1)&&(s="__BASE");var l=this.frames[s],v;return l?v=l.sourceIndex:(console.warn(u,this.key,s),v=this.frames.__BASE.sourceIndex),this.dataSource[v].image},setDataSource:function(s){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var v=this.source[l];this.dataSource.push(new c(this,s[l],v.width,v.height))}},setFilter:function(s){var l;for(l=0;l<this.source.length;l++)this.source[l].setFilter(s);for(l=0;l<this.dataSource.length;l++)this.dataSource[l].setFilter(s)},destroy:function(){var s,l=this.source,v=this.dataSource;for(s=0;s<l.length;s++)l[s]&&l[s].destroy();for(s=0;s<v.length;s++)v[s]&&v[s].destroy();for(var d in this.frames){var g=this.frames[d];g&&g.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});o.exports=h},17130:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(57382),c=e(83419),u=e(40987),h=e(8054),s=e(81320),l=e(50792),v=e(69442),d=e(4327),g=e(8443),y=e(99584),S=e(35154),T=e(88571),w=e(41212),P=e(61309),A=e(87841),R=e(79237),I=new c({Extends:l,initialize:function(L){l.call(this),this.game=L,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new A,this.silentWarnings=!1,L.events.once(g.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(v.LOAD,this.updatePending,this),this.on(v.ERROR,this.updatePending,this);var M=this.game.config;M.defaultImage!==null&&this.addBase64("__DEFAULT",M.defaultImage),M.missingImage!==null&&this.addBase64("__MISSING",M.missingImage),M.whiteImage!==null&&this.addBase64("__WHITE",M.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(g.DESTROY,this.destroy,this),this.game.events.once(g.SYSTEM_READY,function(L){this.stamp=new T(L).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(v.LOAD),this.off(v.ERROR),this.emit(v.READY))},checkKey:function(M){return!M||typeof M!="string"||this.exists(M)?(this.silentWarnings||console.error("Texture key already in use: "+M),!1):!0},remove:function(M){if(typeof M=="string")if(this.exists(M))M=this.get(M);else return this.silentWarnings||console.warn("No texture found matching key: "+M),this;var L=M.key;return this.list.hasOwnProperty(L)&&(M.destroy(),this.emit(v.REMOVE,L),this.emit(v.REMOVE_KEY+L)),this},removeKey:function(M){return this.list.hasOwnProperty(M)&&delete this.list[M],this},addBase64:function(M,L){if(this.checkKey(M)){var N=this,G=new Image;G.onerror=function(){N.emit(v.ERROR,M)},G.onload=function(){var D=N.create(M,G);P.Image(D,0),N.emit(v.ADD,M,D),N.emit(v.ADD_KEY+M,D),N.emit(v.LOAD,M,D)},G.src=L}return this},getBase64:function(M,L,N,G){N===void 0&&(N="image/png"),G===void 0&&(G=.92);var D="",B=this.getFrame(M,L);if(B&&(B.source.isRenderTexture||B.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(B){var $=B.canvasData,k=a.create2D(this,$.width,$.height),X=k.getContext("2d",{willReadFrequently:!0});$.width>0&&$.height>0&&X.drawImage(B.source.image,$.x,$.y,$.width,$.height,0,0,$.width,$.height),D=k.toDataURL(N,G),a.remove(k)}return D},addImage:function(M,L,N){var G=null;return this.checkKey(M)&&(G=this.create(M,L),P.Image(G,0),N&&G.setDataSource(N),this.emit(v.ADD,M,G),this.emit(v.ADD_KEY+M,G)),G},addGLTexture:function(M,L){var N=null;if(this.checkKey(M)){var G=L.width,D=L.height;N=this.create(M,L,G,D),N.add("__BASE",0,0,0,G,D),this.emit(v.ADD,M,N),this.emit(v.ADD_KEY+M,N)}return N},addCompressedTexture:function(M,L,N){var G=null;if(this.checkKey(M)){if(G=this.create(M,L),G.add("__BASE",0,0,0,L.width,L.height),N){var D=function($,k,X){Array.isArray(X.textures)||Array.isArray(X.frames)?P.JSONArray($,k,X):P.JSONHash($,k,X)};if(Array.isArray(N))for(var B=0;B<N.length;B++)D(G,B,N[B]);else D(G,0,N)}this.emit(v.ADD,M,G),this.emit(v.ADD_KEY+M,G)}return G},addRenderTexture:function(M,L){var N=null;return this.checkKey(M)&&(N=this.create(M,L),N.add("__BASE",0,0,0,L.width,L.height),this.emit(v.ADD,M,N),this.emit(v.ADD_KEY+M,N)),N},generate:function(M,L){if(this.checkKey(M)){var N=a.create(this,1,1);return L.canvas=N,y(L),this.addCanvas(M,N)}else return null},createCanvas:function(M,L,N){if(L===void 0&&(L=256),N===void 0&&(N=256),this.checkKey(M)){var G=a.create(this,L,N,h.CANVAS,!0);return this.addCanvas(M,G)}return null},addCanvas:function(M,L,N){N===void 0&&(N=!1);var G=null;return N?G=new x(this,M,L,L.width,L.height):this.checkKey(M)&&(G=new x(this,M,L,L.width,L.height),this.list[M]=G,this.emit(v.ADD,M,G),this.emit(v.ADD_KEY+M,G)),G},addDynamicTexture:function(M,L,N){var G=null;return typeof M=="string"&&!this.exists(M)?G=new s(this,M,L,N):(G=M,M=G.key),this.checkKey(M)?(this.list[M]=G,this.emit(v.ADD,M,G),this.emit(v.ADD_KEY+M,G)):G=null,G},addAtlas:function(M,L,N,G){return Array.isArray(N.textures)||Array.isArray(N.frames)?this.addAtlasJSONArray(M,L,N,G):this.addAtlasJSONHash(M,L,N,G)},addAtlasJSONArray:function(M,L,N,G){var D=null;if(L instanceof R?(M=L.key,D=L):this.checkKey(M)&&(D=this.create(M,L)),D){if(Array.isArray(N))for(var B=N.length===1,$=0;$<D.source.length;$++){var k=B?N[0]:N[$];P.JSONArray(D,$,k)}else P.JSONArray(D,0,N);G&&D.setDataSource(G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D)}return D},addAtlasJSONHash:function(M,L,N,G){var D=null;if(L instanceof R?(M=L.key,D=L):this.checkKey(M)&&(D=this.create(M,L)),D){if(Array.isArray(N))for(var B=0;B<N.length;B++)P.JSONHash(D,B,N[B]);else P.JSONHash(D,0,N);G&&D.setDataSource(G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D)}return D},addAtlasXML:function(M,L,N,G){var D=null;return L instanceof R?(M=L.key,D=L):this.checkKey(M)&&(D=this.create(M,L)),D&&(P.AtlasXML(D,0,N),G&&D.setDataSource(G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D)),D},addUnityAtlas:function(M,L,N,G){var D=null;return L instanceof R?(M=L.key,D=L):this.checkKey(M)&&(D=this.create(M,L)),D&&(P.UnityYAML(D,0,N),G&&D.setDataSource(G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D)),D},addSpriteSheet:function(M,L,N,G){var D=null;if(L instanceof R?(M=L.key,D=L):this.checkKey(M)&&(D=this.create(M,L)),D){var B=D.source[0].width,$=D.source[0].height;P.SpriteSheet(D,0,0,0,B,$,N),G&&D.setDataSource(G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D)}return D},addSpriteSheetFromAtlas:function(M,L){if(!this.checkKey(M))return null;var N=S(L,"atlas",null),G=S(L,"frame",null);if(!(!N||!G)){var D=this.get(N),B=D.get(G);if(B){var $=B.source.image;$||($=B.source.glTexture);var k=this.create(M,$);return B.trimmed?P.SpriteSheetFromAtlas(k,B,L):P.SpriteSheet(k,0,B.cutX,B.cutY,B.cutWidth,B.cutHeight,L),this.emit(v.ADD,M,k),this.emit(v.ADD_KEY+M,k),k}}},addUint8Array:function(M,L,N,G){if(!this.checkKey(M)||L.length/4!==N*G)return null;var D=this.create(M,L,N,G);return D.add("__BASE",0,0,0,N,G),this.emit(v.ADD,M,D),this.emit(v.ADD_KEY+M,D),D},create:function(M,L,N,G){var D=null;return this.checkKey(M)&&(D=new R(this,M,L,N,G),this.list[M]=D),D},exists:function(M){return this.list.hasOwnProperty(M)},get:function(M){return M===void 0&&(M="__DEFAULT"),this.list[M]?this.list[M]:M instanceof R?M:M instanceof d?M.texture:this.list.__MISSING},cloneFrame:function(M,L){if(this.list[M])return this.list[M].get(L).clone()},getFrame:function(M,L){if(this.list[M])return this.list[M].get(L)},parseFrame:function(M){if(M){if(typeof M=="string")return this.getFrame(M);if(Array.isArray(M)&&M.length===2)return this.getFrame(M[0],M[1]);if(w(M))return this.getFrame(M.key,M.frame);if(M instanceof R)return M.get();if(M instanceof d)return M}else return},getTextureKeys:function(){var M=[];for(var L in this.list)L!=="__DEFAULT"&&L!=="__MISSING"&&L!=="__WHITE"&&L!=="__NORMAL"&&M.push(L);return M},getPixel:function(M,L,N,G){var D=this.getFrame(N,G);if(D){M-=D.x,L-=D.y;var B=D.data.cut;if(M+=B.x,L+=B.y,M>=B.x&&M<B.r&&L>=B.y&&L<B.b){var $=this._tempContext;$.clearRect(0,0,1,1),$.drawImage(D.source.image,M,L,1,1,0,0,1,1);var k=$.getImageData(0,0,1,1);return new u(k.data[0],k.data[1],k.data[2],k.data[3])}}return null},getPixelAlpha:function(M,L,N,G){var D=this.getFrame(N,G);if(D){M-=D.x,L-=D.y;var B=D.data.cut;if(M+=B.x,L+=B.y,M>=B.x&&M<B.r&&L>=B.y&&L<B.b){var $=this._tempContext;$.clearRect(0,0,1,1),$.drawImage(D.source.image,M,L,1,1,0,0,1,1);var k=$.getImageData(0,0,1,1);return k.data[3]}}return null},setTexture:function(M,L,N){return this.list[L]&&(M.texture=this.list[L],M.frame=M.texture.get(N)),M},renameTexture:function(M,L){var N=this.get(M);return N&&M!==L?(N.key=L,this.list[L]=N,delete this.list[M],!0):!1},each:function(M,L){for(var N=[null],G=1;G<arguments.length;G++)N.push(arguments[G]);for(var D in this.list)N[0]=this.list[D],M.apply(L,N)},resetStamp:function(M,L){M===void 0&&(M=1),L===void 0&&(L=16777215);var N=this.stamp;return N.setCrop(),N.setPosition(0),N.setAngle(0),N.setScale(1),N.setAlpha(M),N.setTint(L),N.setTexture("__WHITE"),N},destroy:function(){for(var M in this.list)this.list[M].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});o.exports=I},11876:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(83419),c=e(50030),u=e(29795),h=e(82751),s=new x({initialize:function(v,d,g,y,S){S===void 0&&(S=!1);var T=v.manager.game;this.renderer=T.renderer,this.texture=v,this.source=d,this.image=d.compressed?null:d,this.compressionAlgorithm=d.compressed?d.format:null,this.resolution=1,this.width=g||d.naturalWidth||d.videoWidth||d.width||0,this.height=y||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture"||d.type==="DynamicTexture",this.isGLTexture=d instanceof h,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=S,this.init(T)},init:function(l){var v=this.renderer;if(v){var d=this.source;if(v.gl){var g=this.image,y=this.flipY,S=this.width,T=this.height,w=this.scaleMode;this.isCanvas?this.glTexture=v.createCanvasTexture(g,!1,y):this.isVideo?this.glTexture=v.createVideoTexture(g,!1,y):this.isRenderTexture?this.glTexture=v.createTextureFromSource(null,S,T,w):this.isGLTexture?this.glTexture=d:this.compressionAlgorithm?this.glTexture=v.createTextureFromSource(d,void 0,void 0,w):d instanceof Uint8Array?this.glTexture=v.createUint8ArrayTexture(d,S,T,w):this.glTexture=v.createTextureFromSource(g,S,T,w)}else this.isRenderTexture&&(this.image=d.canvas)}l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),l===this.flipY?this:(this.flipY=l,this.update(),this)},update:function(){var l=this.renderer,v=this.image,d=this.flipY,g=l.gl;g&&this.isCanvas?l.updateCanvasTexture(v,this.glTexture,d):g&&this.isVideo&&l.updateVideoTexture(v,this.glTexture,d)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});o.exports=s},19673:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LINEAR:0,NEAREST:1};o.exports=E},44538:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture"},63486:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture-"},94851:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onerror"},29099:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onload"},8678:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},86415:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture"},30879:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture-"},69442:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}},27458:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(19673),c={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:x,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};c=a(!1,c,x),o.exports=c},89905:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var c=e.source[a];e.add("__BASE",a,0,0,c.width,c.height);for(var u=x.getElementsByTagName("SubTexture"),h,s=0;s<u.length;s++){var l=u[s].attributes,v=l.name.value,d=parseInt(l.x.value,10),g=parseInt(l.y.value,10),y=parseInt(l.width.value,10),S=parseInt(l.height.value,10);if(h=e.add(v,a,d,g,y,S),l.frameX){var T=Math.abs(parseInt(l.frameX.value,10)),w=Math.abs(parseInt(l.frameY.value,10)),P=parseInt(l.frameWidth.value,10),A=parseInt(l.frameHeight.value,10);h.setTrim(y,S,T,w,P,A)}}return e};o.exports=E},72893:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.source[a];return e.add("__BASE",a,0,0,x.width,x.height),e};o.exports=E},4832:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.source[a];return e.add("__BASE",a,0,0,x.width,x.height),e};o.exports=E},78566:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(c,u,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var s=c.source[u];c.add("__BASE",u,0,0,s.width,s.height);for(var l=Array.isArray(h.textures)?h.textures[u].frames:h.frames,v,d=0;d<l.length;d++){var g=l[d];if(v=c.add(g.filename,u,g.frame.x,g.frame.y,g.frame.w,g.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+g.filename);continue}g.trimmed&&v.setTrim(g.sourceSize.w,g.sourceSize.h,g.spriteSourceSize.x,g.spriteSourceSize.y,g.spriteSourceSize.w,g.spriteSourceSize.h),g.rotated&&(v.rotated=!0,v.updateUVsInverted());var y=g.anchor||g.pivot;y&&(v.customPivot=!0,v.pivotX=y.x,v.pivotY=y.y),g.scale9Borders&&v.setScale9(g.scale9Borders.x,g.scale9Borders.y,g.scale9Borders.w,g.scale9Borders.h),v.customData=a(g)}for(var S in h)S!=="frames"&&(Array.isArray(h[S])?c.customData[S]=h[S].slice(0):c.customData[S]=h[S]);return c};o.exports=x},39711:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(c,u,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var s=c.source[u];c.add("__BASE",u,0,0,s.width,s.height);var l=h.frames,v;for(var d in l)if(l.hasOwnProperty(d)){var g=l[d];if(v=c.add(d,u,g.frame.x,g.frame.y,g.frame.w,g.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+d);continue}g.trimmed&&v.setTrim(g.sourceSize.w,g.sourceSize.h,g.spriteSourceSize.x,g.spriteSourceSize.y,g.spriteSourceSize.w,g.spriteSourceSize.h),g.rotated&&(v.rotated=!0,v.updateUVsInverted());var y=g.anchor||g.pivot;y&&(v.customPivot=!0,v.pivotX=y.x,v.pivotY=y.y),g.scale9Borders&&v.setScale9(g.scale9Borders.x,g.scale9Borders.y,g.scale9Borders.w,g.scale9Borders.h),v.customData=a(g)}for(var S in h)S!=="frames"&&(Array.isArray(h[S])?c.customData[S]=h[S].slice(0):c.customData[S]=h[S]);return c};o.exports=x},31403:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=[171,75,84,88,32,49,49,187,13,10,26,10],x,c=new Uint8Array(e,0,12);for(x=0;x<c.length;x++)if(c[x]!==a[x]){console.warn("KTXParser - Invalid file format");return}var u=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(e,12,13*u),s=h.getUint32(0,!0)===67305985,l=h.getUint32(1*u,s);if(l!==0){console.warn("KTXParser - Only compressed formats supported");return}var v=h.getUint32(4*u,s),d=h.getUint32(6*u,s),g=h.getUint32(7*u,s),y=Math.max(1,h.getUint32(11*u,s)),S=h.getUint32(12*u,s),T=new Array(y),w=12+13*4+S,P=d,A=g;for(x=0;x<y;x++){var R=new Int32Array(e,w,1)[0];w+=4,T[x]={data:new Uint8Array(e,w,R),width:P,height:A},P=Math.max(1,P>>1),A=Math.max(1,A>>1),w+=R}return{mipmaps:T,width:d,height:g,internalFormat:v,compressed:!0,generateMipmap:!1}};o.exports=E},82038:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(L,N,G,D,B,$,k){return k===void 0&&(k=16),Math.floor((L+G)/B)*Math.floor((N+D)/$)*k}function e(L,N){return L=Math.max(L,16),N=Math.max(N,8),L*N/4}function a(L,N){return L=Math.max(L,8),N=Math.max(N,8),L*N/2}function x(L,N){return Math.ceil(L/4)*Math.ceil(N/4)*16}function c(L,N){return E(L,N,3,3,4,4,8)}function u(L,N){return E(L,N,3,3,4,4)}function h(L,N){return E(L,N,4,3,5,4)}function s(L,N){return E(L,N,4,4,5,5)}function l(L,N){return E(L,N,5,4,6,5)}function v(L,N){return E(L,N,5,5,6,6)}function d(L,N){return E(L,N,7,4,8,5)}function g(L,N){return E(L,N,7,5,8,6)}function y(L,N){return E(L,N,7,7,8,8)}function S(L,N){return E(L,N,9,4,10,5)}function T(L,N){return E(L,N,9,5,10,6)}function w(L,N){return E(L,N,9,7,10,8)}function P(L,N){return E(L,N,9,9,10,10)}function A(L,N){return E(L,N,11,9,12,10)}function R(L,N){return E(L,N,11,11,12,12)}var I={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:a,glFormat:[35840]},3:{sizeFunc:a,glFormat:[35842]},6:{sizeFunc:c,glFormat:[36196]},7:{sizeFunc:c,glFormat:[33776,35916]},8:{sizeFunc:u,glFormat:[33777,35917]},9:{sizeFunc:u,glFormat:[33778,35918]},11:{sizeFunc:u,glFormat:[33779,35919]},14:{sizeFunc:x,glFormat:[36494,36495]},15:{sizeFunc:x,glFormat:[36492,36493]},22:{sizeFunc:c,glFormat:[37492,37493]},23:{sizeFunc:u,glFormat:[37496,37497]},24:{sizeFunc:c,glFormat:[37494,37495]},25:{sizeFunc:c,glFormat:[37488]},26:{sizeFunc:u,glFormat:[37490]},27:{sizeFunc:u,glFormat:[37808,37840]},28:{sizeFunc:h,glFormat:[37809,37841]},29:{sizeFunc:s,glFormat:[37810,37842]},30:{sizeFunc:l,glFormat:[37811,37843]},31:{sizeFunc:v,glFormat:[37812,37844]},32:{sizeFunc:d,glFormat:[37813,37845]},33:{sizeFunc:g,glFormat:[37814,37846]},34:{sizeFunc:y,glFormat:[37815,37847]},35:{sizeFunc:S,glFormat:[37816,37848]},36:{sizeFunc:T,glFormat:[37817,37849]},37:{sizeFunc:w,glFormat:[37818,37850]},38:{sizeFunc:P,glFormat:[37819,37851]},39:{sizeFunc:A,glFormat:[37820,37852]},40:{sizeFunc:R,glFormat:[37821,37853]}},M=function(L){for(var N=new Uint32Array(L,0,13),G=N[0],D=G===55727696,B=D?N[2]:N[3],$=N[4],k=I[B].glFormat[$],X=I[B].sizeFunc,Y=N[11],Z=N[7],Q=N[6],j=52+N[12],K=new Uint8Array(L,j),W=new Array(Y),V=0,J=Z,ee=Q,te=0;te<Y;te++){var ne=X(J,ee);W[te]={data:new Uint8Array(K.buffer,K.byteOffset+V,ne),width:J,height:ee},J=Math.max(1,J>>1),ee=Math.max(1,ee>>1),V+=ne}return{mipmaps:W,width:Z,height:Q,internalFormat:k,compressed:!0,generateMipmap:!1}};o.exports=M},75549:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(c,u,h,s,l,v,d){var g=a(d,"frameWidth",null),y=a(d,"frameHeight",g);if(g===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var S=c.source[u];c.add("__BASE",u,0,0,S.width,S.height);var T=a(d,"startFrame",0),w=a(d,"endFrame",-1),P=a(d,"margin",0),A=a(d,"spacing",0),R=Math.floor((l-P+A)/(g+A)),I=Math.floor((v-P+A)/(y+A)),M=R*I;M===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",c.key),(T>M||T<-M)&&(T=0),T<0&&(T=M+T),(w===-1||w>M||w<T)&&(w=M);for(var L=P,N=P,G=0,D=0,B=0,$=0;$<M;$++){G=0,D=0;var k=L+g,X=N+y;k>l&&(G=k-l),X>v&&(D=X-v),$>=T&&$<=w&&(c.add(B,u,h+L,s+N,g-G,y-D),B++),L+=g+A,L+g>l&&(L=P,N+=y+A)}return c};o.exports=x},47534:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(c,u,h){var s=a(h,"frameWidth",null),l=a(h,"frameHeight",s);if(!s)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=c.source[0];c.add("__BASE",0,0,0,v.width,v.height),a(h,"startFrame",0),a(h,"endFrame",-1);for(var d=a(h,"margin",0),g=a(h,"spacing",0),y=u.cutX,S=u.cutY,T=u.cutWidth,w=u.cutHeight,P=u.realWidth,A=u.realHeight,R=Math.floor((P-d+g)/(s+g)),I=Math.floor((A-d+g)/(l+g)),M=u.x,L=s-M,N=s-(P-T-M),G=u.y,D=l-G,B=l-(A-w-G),$,k=d,X=d,Y=0,Z=0,Q=0;Q<I;Q++){for(var j=Q===0,K=Q===I-1,W=0;W<R;W++){var V=W===0,J=W===R-1;if($=c.add(Y,Z,y+k,S+X,s,l),V||j||J||K){var ee=V?M:0,te=j?G:0,ne=0,se=0;V&&(ne+=s-L),J&&(ne+=s-N),j&&(se+=l-D),K&&(se+=l-B);var ae=s-ne,ue=l-se;$.cutWidth=ae,$.cutHeight=ue,$.setTrim(s,l,ee,te,ae,ue)}k+=g,V?k+=L:J?k+=N:k+=s,Y++}k=d,X+=g,j?X+=D:K?X+=B:X+=l}return c};o.exports=x},86147:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=0,e=function(x,c,u,h){var s=E-h.y-h.height;x.add(u,c,h.x,s,h.width,h.height)},a=function(x,c,u){var h=x.source[c];x.add("__BASE",c,0,0,h.width,h.height),E=h.height;for(var s=u.split(`
`),l=/^[ ]*(- )*(\w+)+[: ]+(.*)/,v="",d="",g={x:0,y:0,width:0,height:0},y=0;y<s.length;y++){var S=s[y].match(l);if(S){var T=S[1]==="- ",w=S[2],P=S[3];if(T&&(d!==v&&(e(x,c,d,g),v=d),g={x:0,y:0,width:0,height:0}),w==="name"){d=P;continue}switch(w){case"x":case"y":case"width":case"height":g[w]=parseInt(P,10);break}}}return d!==v&&e(x,c,d,g),x};o.exports=a},55222:(o,E,e)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50030),x=function(v){for(var d=v.mipmaps,g=1;g<d.length;g++){var y=d[g].width,S=d[g].height;if(!a(y,S))return console.warn("Mip level "+g+" is not a power-of-two size: "+y+"x"+S),!1}var T=l[v.internalFormat];return T?T(v):(console.warn("No format checker found for internal format "+v.internalFormat+". Assuming valid."),!0)};function c(v){for(var d=v.mipmaps,g=0;g<d.length;g++){var y=d[g].width,S=d[g].height;if((y<<g)%4!==0||(S<<g)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+g+" is "+y+"x"+S),!1}return!0}function u(){return!0}function h(v){var d=v.mipmaps,g=d[0];return a(g.width,g.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+g.width+"x"+g.height),!1)}function s(v){var d=v.mipmaps,g=d[0];return g.width%4!==0||g.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+g.width+"x"+g.height+" pixels"),!1):!0}var l={37488:u,37489:u,37490:u,37491:u,37492:u,37493:u,37494:u,37495:u,37496:u,37497:u,36196:u,37808:u,37809:u,37810:u,37811:u,37812:u,37813:u,37814:u,37815:u,37816:u,37817:u,37818:u,37819:u,37820:u,37821:u,37840:u,37841:u,37842:u,37843:u,37844:u,37845:u,37846:u,37847:u,37848:u,37849:u,37850:u,37851:u,37852:u,37853:u,36492:c,36493:c,36494:c,36495:c,36283:c,36284:c,36285:c,36286:c,35840:h,35841:h,35842:h,35843:h,33776:c,33777:c,33778:c,33779:c,35916:s,35917:s,35918:s,35919:s};o.exports=x},61309:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}},80341:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u,h,s,l,v,d,g){(s===void 0||s<=0)&&(s=32),(l===void 0||l<=0)&&(l=32),v===void 0&&(v=0),d===void 0&&(d=0),this.name=u,this.firstgid=h|0,this.imageWidth=s|0,this.imageHeight=l|0,this.imageMargin=v|0,this.imageSpacing=d|0,this.properties=g||{},this.images=[],this.total=0},containsImageIndex:function(c){return c>=this.firstgid&&c<this.firstgid+this.total},addImage:function(c,u){return this.images.push({gid:c,image:u}),this.total++,this}});o.exports=x},27462:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(u){if(this.gids=[],u!==void 0)for(var h=0;h<u.length;++h)for(var s=u[h],l=0;l<s.total;++l)this.gids[s.firstgid+l]=s;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(c){this.gids=c?this._gids:void 0}},getTypeIncludingTile:function(c){if(c.type!==void 0&&c.type!=="")return c.type;if(!(!this.gids||c.gid===void 0)){var u=this.gids[c.gid];if(u){var h=u.getTileData(c.gid);if(h)return h.type}}},setTextureAndFrame:function(c,u,h,s){if(u===null&&this.gids&&s.gid!==void 0){var l=this.gids[s.gid];l&&(u===null&&l.image!==void 0&&(u=l.image.key),h===null&&(h=s.gid-l.firstgid),c.scene.textures.getFrame(u,h)||(u=null,h=null))}c.setTexture(u,h)},setPropertiesFromTiledObject:function(c,u){if(this.gids!==void 0&&u.gid!==void 0){var h=this.gids[u.gid];h!==void 0&&this.setFromJSON(c,h.getTileProperties(u.gid))}this.setFromJSON(c,u.properties)},setFromJSON:function(c,u){if(u){if(Array.isArray(u)){for(var h=0;h<u.length;h++){var s=u[h];c[s.name]!==void 0?c[s.name]=s.value:c.setData(s.name,s.value)}return}for(var l in u)c[l]!==void 0?c[l]=u[l]:c.setData(l,u[l])}}});o.exports=x},31989:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(87010),c=e(46177),u=e(49075),h=function(s,l,v,d,g,y,S,T){v===void 0&&(v=32),d===void 0&&(d=32),g===void 0&&(g=10),y===void 0&&(y=10),T===void 0&&(T=!1);var w=null;if(Array.isArray(S)){var P=l!==void 0?l:"map";w=c(P,a.ARRAY_2D,S,v,d,T)}else if(l!==void 0){var A=s.cache.tilemap.get(l);A?w=c(l,A.format,A.data,v,d,T):console.warn("No map data found for key "+l)}return w===null&&(w=new x({tileWidth:v,tileHeight:d,width:g,height:y})),new u(s,w)};o.exports=h},23029:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),c=e(91907),u=e(62644),h=e(93232),s=new a({Mixins:[x.AlphaSingle,x.Flip,x.Visible],initialize:function(v,d,g,y,S,T,w,P){this.layer=v,this.index=d,this.x=g,this.y=y,this.width=S,this.height=T,this.right,this.bottom,this.baseWidth=w!==void 0?w:S,this.baseHeight=P!==void 0?P:T,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(l,v){return!(l<this.pixelX||v<this.pixelY||l>this.right||v>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=u(l.properties),this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var v=this.tilemapLayer;if(v){var d=v.tileToWorldXY(this.x,this.y,void 0,l);return d.x}return this.x*this.baseWidth},getRight:function(l){var v=this.tilemapLayer;return v?this.getLeft(l)+this.width*v.scaleX:this.getLeft(l)+this.width},getTop:function(l){var v=this.tilemapLayer;if(v){var d=v.tileToWorldXY(this.x,this.y,void 0,l);return d.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(l){var v=this.tilemapLayer;return v?this.getTop(l)+this.height*v.scaleY:this.getTop(l)+this.height},getBounds:function(l,v){return v===void 0&&(v=new h),v.x=this.getLeft(l),v.y=this.getTop(l),v.width=this.getRight(l)-v.x,v.height=this.getBottom(l)-v.y,v},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,v,d,g){return!(d<=this.pixelX||g<=this.pixelY||l>=this.right||v>=this.bottom)},isInteresting:function(l,v){return l&&v?this.canCollide||this.hasInterestingFace:l?this.collides:v?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,v,d,g,y){if(v===void 0&&(v=l),d===void 0&&(d=l),g===void 0&&(g=l),y===void 0&&(y=!0),this.collideLeft=l,this.collideRight=v,this.collideUp=d,this.collideDown=g,this.faceLeft=l,this.faceRight=v,this.faceTop=d,this.faceBottom=g,y){var S=this.tilemapLayer;S&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,v){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=v),this},setSize:function(l,v,d,g){return l!==void 0&&(this.width=l),v!==void 0&&(this.height=v),d!==void 0&&(this.baseWidth=d),g!==void 0&&(this.baseHeight=g),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===c.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===c.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===c.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===c.HEXAGONAL){var v=this.layer.staggerAxis,d=this.layer.staggerIndex,g=this.layer.hexSideLength,y,S;v==="y"?(S=(this.baseHeight-g)/2+g,d==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*S):v==="x"&&(y=(this.baseWidth-g)/2+g,this.pixelX=this.x*y,d==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var v=l.gidMap[this.index];if(v)return v}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});o.exports=s},49075:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84101),x=e(83419),c=e(39506),u=e(80341),h=e(95540),s=e(14977),l=e(27462),v=e(91907),d=e(36305),g=e(19133),y=e(68287),S=e(23029),T=e(81086),w=e(20442),P=e(33629),A=new x({initialize:function(I,M){this.scene=I,this.tileWidth=M.tileWidth,this.tileHeight=M.tileHeight,this.width=M.width,this.height=M.height,this.orientation=M.orientation,this.renderOrder=M.renderOrder,this.format=M.format,this.version=M.version,this.properties=M.properties,this.widthInPixels=M.widthInPixels,this.heightInPixels=M.heightInPixels,this.imageCollections=M.imageCollections,this.images=M.images,this.layers=M.layers,this.tiles=M.tiles,this.tilesets=M.tilesets,this.objects=M.objects,this.currentLayerIndex=0,this.hexSideLength=M.hexSideLength;var L=this.orientation;this._convert={WorldToTileXY:T.GetWorldToTileXYFunction(L),WorldToTileX:T.GetWorldToTileXFunction(L),WorldToTileY:T.GetWorldToTileYFunction(L),TileToWorldXY:T.GetTileToWorldXYFunction(L),TileToWorldX:T.GetTileToWorldXFunction(L),TileToWorldY:T.GetTileToWorldYFunction(L),GetTileCorners:T.GetTileCornersFunction(L)}},setRenderOrder:function(R){var I=["right-down","left-down","right-up","left-up"];return typeof R=="number"&&(R=I[R]),I.indexOf(R)>-1&&(this.renderOrder=R),this},addTilesetImage:function(R,I,M,L,N,G,D,B){if(R===void 0)return null;I==null&&(I=R);var $=this.scene.sys.textures;if(!$.exists(I))return console.warn('Texture key "%s" not found',I),null;var k=$.get(I),X=this.getTilesetIndex(R);if(X===null&&this.format===u.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',R,this.tilesets),null;var Y=this.tilesets[X];return Y?((M||L)&&Y.setTileSize(M,L),(N||G)&&Y.setSpacing(N,G),Y.setImage(k),Y):(M===void 0&&(M=this.tileWidth),L===void 0&&(L=this.tileHeight),N===void 0&&(N=0),G===void 0&&(G=0),D===void 0&&(D=0),B===void 0&&(B={x:0,y:0}),Y=new P(R,D,M,L,N,G,void 0,void 0,B),Y.setImage(k),this.tilesets.push(Y),this.tiles=a(this),Y)},copy:function(R,I,M,L,N,G,D,B){return B=this.getLayer(B),B!==null?(T.Copy(R,I,M,L,N,G,D,B),this):null},createBlankLayer:function(R,I,M,L,N,G,D,B){M===void 0&&(M=0),L===void 0&&(L=0),N===void 0&&(N=this.width),G===void 0&&(G=this.height),D===void 0&&(D=this.tileWidth),B===void 0&&(B=this.tileHeight);var $=this.getLayerIndex(R);if($!==null)return console.warn("Invalid Tilemap Layer ID: "+R),null;for(var k=new s({name:R,tileWidth:D,tileHeight:B,width:N,height:G,orientation:this.orientation}),X,Y=0;Y<G;Y++){X=[];for(var Z=0;Z<N;Z++)X.push(new S(k,-1,Z,Y,D,B,this.tileWidth,this.tileHeight));k.data.push(X)}this.layers.push(k),this.currentLayerIndex=this.layers.length-1;var Q=new w(this.scene,this,this.currentLayerIndex,I,M,L);return Q.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(Q),Q},createLayer:function(R,I,M,L){var N=this.getLayerIndex(R);if(N===null)return console.warn("Invalid Tilemap Layer ID: "+R),typeof R=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var G=this.layers[N];if(G.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+R),null;this.currentLayerIndex=N,M===void 0&&(M=G.x),L===void 0&&(L=G.y);var D=new w(this.scene,this,N,I,M,L);return D.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(D),D},createFromObjects:function(R,I,M){M===void 0&&(M=!0);var L=[],N=this.getObjectLayer(R);if(!N)return console.warn("createFromObjects: Invalid objectLayerName given: "+R),L;var G=new l(M?this.tilesets:void 0);Array.isArray(I)||(I=[I]);for(var D=N.objects,B=0;B<I.length;B++){var $=I[B],k=h($,"id",null),X=h($,"gid",null),Y=h($,"name",null),Z=h($,"type",null);G.enabled=!h($,"ignoreTileset",null);for(var Q,j=[],K=0;K<D.length;K++)Q=D[K],(k===null&&X===null&&Y===null&&Z===null||k!==null&&Q.id===k||X!==null&&Q.gid===X||Y!==null&&Q.name===Y||Z!==null&&G.getTypeIncludingTile(Q)===Z)&&j.push(Q);for(var W=h($,"classType",y),V=h($,"scene",this.scene),J=h($,"container",null),ee=h($,"key",null),te=h($,"frame",null),ne=0;ne<j.length;ne++){Q=j[ne];var se=new W(V);if(se.setName(Q.name),se.setPosition(Q.x,Q.y),G.setTextureAndFrame(se,ee,te,Q),Q.width&&(se.displayWidth=Q.width),Q.height&&(se.displayHeight=Q.height),this.orientation===v.ISOMETRIC){var ae=this.tileWidth/this.tileHeight,ue={x:se.x-se.y,y:(se.x+se.y)/ae};se.x=ue.x,se.y=ue.y}var de={x:se.originX*Q.width,y:(se.originY-(Q.gid?1:0))*Q.height};if(Q.rotation){var fe=c(Q.rotation);d(de,fe),se.rotation=fe}se.x+=de.x,se.y+=de.y,(Q.flippedHorizontal!==void 0||Q.flippedVertical!==void 0)&&se.setFlip(Q.flippedHorizontal,Q.flippedVertical),Q.visible||(se.visible=!1),G.setPropertiesFromTiledObject(se,Q),J?J.add(se):V.add.existing(se),L.push(se)}}return L},createFromTiles:function(R,I,M,L,N,G){return G=this.getLayer(G),G===null?null:T.CreateFromTiles(R,I,M,L,N,G)},fill:function(R,I,M,L,N,G,D){return G===void 0&&(G=!0),D=this.getLayer(D),D===null?null:(T.Fill(R,I,M,L,N,G,D),this)},filterObjects:function(R,I,M){if(typeof R=="string"){var L=R;if(R=this.getObjectLayer(R),!R)return console.warn("No object layer found with the name: "+L),null}return R.objects.filter(I,M)},filterTiles:function(R,I,M,L,N,G,D,B){return B=this.getLayer(B),B===null?null:T.FilterTiles(R,I,M,L,N,G,D,B)},findByIndex:function(R,I,M,L){return L=this.getLayer(L),L===null?null:T.FindByIndex(R,I,M,L)},findObject:function(R,I,M){if(typeof R=="string"){var L=R;if(R=this.getObjectLayer(R),!R)return console.warn("No object layer found with the name: "+L),null}return R.objects.find(I,M)||null},findTile:function(R,I,M,L,N,G,D,B){return B=this.getLayer(B),B===null?null:T.FindTile(R,I,M,L,N,G,D,B)},forEachTile:function(R,I,M,L,N,G,D,B){return B=this.getLayer(B),B===null?null:(T.ForEachTile(R,I,M,L,N,G,D,B),this)},getImageIndex:function(R){return this.getIndex(this.images,R)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(R){return R.name})},getIndex:function(R,I){for(var M=0;M<R.length;M++)if(R[M].name===I)return M;return null},getLayer:function(R){var I=this.getLayerIndex(R);return I!==null?this.layers[I]:null},getObjectLayer:function(R){var I=this.getIndex(this.objects,R);return I!==null?this.objects[I]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(R){return R.name})},getLayerIndex:function(R){return R===void 0?this.currentLayerIndex:typeof R=="string"?this.getLayerIndexByName(R):typeof R=="number"&&R<this.layers.length?R:R instanceof w&&R.tilemap===this?R.layerIndex:null},getLayerIndexByName:function(R){return this.getIndex(this.layers,R)},getTileAt:function(R,I,M,L){return L=this.getLayer(L),L===null?null:T.GetTileAt(R,I,M,L)},getTileAtWorldXY:function(R,I,M,L,N){return N=this.getLayer(N),N===null?null:T.GetTileAtWorldXY(R,I,M,L,N)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(R){return R.name})},getTilesWithin:function(R,I,M,L,N,G){return G=this.getLayer(G),G===null?null:T.GetTilesWithin(R,I,M,L,N,G)},getTilesWithinShape:function(R,I,M,L){return L=this.getLayer(L),L===null?null:T.GetTilesWithinShape(R,I,M,L)},getTilesWithinWorldXY:function(R,I,M,L,N,G,D){return D=this.getLayer(D),D===null?null:T.GetTilesWithinWorldXY(R,I,M,L,N,G,D)},getTileset:function(R){var I=this.getIndex(this.tilesets,R);return I!==null?this.tilesets[I]:null},getTilesetIndex:function(R){return this.getIndex(this.tilesets,R)},hasTileAt:function(R,I,M){return M=this.getLayer(M),M===null?null:T.HasTileAt(R,I,M)},hasTileAtWorldXY:function(R,I,M,L){return L=this.getLayer(L),L===null?null:T.HasTileAtWorldXY(R,I,M,L)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(R){this.setLayer(R)}},putTileAt:function(R,I,M,L,N){return L===void 0&&(L=!0),N=this.getLayer(N),N===null?null:T.PutTileAt(R,I,M,L,N)},putTileAtWorldXY:function(R,I,M,L,N,G){return L===void 0&&(L=!0),G=this.getLayer(G),G===null?null:T.PutTileAtWorldXY(R,I,M,L,N,G)},putTilesAt:function(R,I,M,L,N){return L===void 0&&(L=!0),N=this.getLayer(N),N===null?null:(T.PutTilesAt(R,I,M,L,N),this)},randomize:function(R,I,M,L,N,G){return G=this.getLayer(G),G===null?null:(T.Randomize(R,I,M,L,N,G),this)},calculateFacesAt:function(R,I,M){return M=this.getLayer(M),M===null?null:(T.CalculateFacesAt(R,I,M),this)},calculateFacesWithin:function(R,I,M,L,N){return N=this.getLayer(N),N===null?null:(T.CalculateFacesWithin(R,I,M,L,N),this)},removeLayer:function(R){var I=this.getLayerIndex(R);if(I!==null){g(this.layers,I);for(var M=I;M<this.layers.length;M++)this.layers[M].tilemapLayer&&this.layers[M].tilemapLayer.layerIndex--;return this.currentLayerIndex===I&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(R){var I=this.getLayerIndex(R);return I!==null?(R=this.layers[I],R.tilemapLayer.destroy(),g(this.layers,I),this.currentLayerIndex===I&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var R=this.layers,I=0;I<R.length;I++)R[I].tilemapLayer&&R[I].tilemapLayer.destroy(!1);return R.length=0,this.currentLayerIndex=0,this},removeTile:function(R,I,M){I===void 0&&(I=-1),M===void 0&&(M=!0);var L=[];Array.isArray(R)||(R=[R]);for(var N=0;N<R.length;N++){var G=R[N];L.push(this.removeTileAt(G.x,G.y,!0,M,G.tilemapLayer)),I>-1&&this.putTileAt(I,G.x,G.y,M,G.tilemapLayer)}return L},removeTileAt:function(R,I,M,L,N){return M===void 0&&(M=!0),L===void 0&&(L=!0),N=this.getLayer(N),N===null?null:T.RemoveTileAt(R,I,M,L,N)},removeTileAtWorldXY:function(R,I,M,L,N,G){return M===void 0&&(M=!0),L===void 0&&(L=!0),G=this.getLayer(G),G===null?null:T.RemoveTileAtWorldXY(R,I,M,L,N,G)},renderDebug:function(R,I,M){return M=this.getLayer(M),M===null?null:(this.orientation===v.ORTHOGONAL&&T.RenderDebug(R,I,M),this)},renderDebugFull:function(R,I){for(var M=this.layers,L=0;L<M.length;L++)T.RenderDebug(R,I,M[L]);return this},replaceByIndex:function(R,I,M,L,N,G,D){return D=this.getLayer(D),D===null?null:(T.ReplaceByIndex(R,I,M,L,N,G,D),this)},setCollision:function(R,I,M,L,N){return I===void 0&&(I=!0),M===void 0&&(M=!0),N===void 0&&(N=!0),L=this.getLayer(L),L===null?null:(T.SetCollision(R,I,M,L,N),this)},setCollisionBetween:function(R,I,M,L,N){return M===void 0&&(M=!0),L===void 0&&(L=!0),N=this.getLayer(N),N===null?null:(T.SetCollisionBetween(R,I,M,L,N),this)},setCollisionByProperty:function(R,I,M,L){return I===void 0&&(I=!0),M===void 0&&(M=!0),L=this.getLayer(L),L===null?null:(T.SetCollisionByProperty(R,I,M,L),this)},setCollisionByExclusion:function(R,I,M,L){return I===void 0&&(I=!0),M===void 0&&(M=!0),L=this.getLayer(L),L===null?null:(T.SetCollisionByExclusion(R,I,M,L),this)},setCollisionFromCollisionGroup:function(R,I,M){return R===void 0&&(R=!0),I===void 0&&(I=!0),M=this.getLayer(M),M===null?null:(T.SetCollisionFromCollisionGroup(R,I,M),this)},setTileIndexCallback:function(R,I,M,L){return L=this.getLayer(L),L===null?null:(T.SetTileIndexCallback(R,I,M,L),this)},setTileLocationCallback:function(R,I,M,L,N,G,D){return D=this.getLayer(D),D===null?null:(T.SetTileLocationCallback(R,I,M,L,N,G,D),this)},setLayer:function(R){var I=this.getLayerIndex(R);return I!==null&&(this.currentLayerIndex=I),this},setBaseTileSize:function(R,I){this.tileWidth=R,this.tileHeight=I,this.widthInPixels=this.width*R,this.heightInPixels=this.height*I;for(var M=0;M<this.layers.length;M++){this.layers[M].baseTileWidth=R,this.layers[M].baseTileHeight=I;for(var L=this.layers[M].data,N=this.layers[M].width,G=this.layers[M].height,D=0;D<G;D++)for(var B=0;B<N;B++){var $=L[D][B];$!==null&&$.setSize(void 0,void 0,R,I)}}return this},setLayerTileSize:function(R,I,M){if(M=this.getLayer(M),M===null)return this;M.tileWidth=R,M.tileHeight=I;for(var L=M.data,N=M.width,G=M.height,D=0;D<G;D++)for(var B=0;B<N;B++){var $=L[D][B];$!==null&&$.setSize(R,I)}return this},shuffle:function(R,I,M,L,N){return N=this.getLayer(N),N===null?null:(T.Shuffle(R,I,M,L,N),this)},swapByIndex:function(R,I,M,L,N,G,D){return D=this.getLayer(D),D===null?null:(T.SwapByIndex(R,I,M,L,N,G,D),this)},tileToWorldX:function(R,I,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldX(R,I,M)},tileToWorldY:function(R,I,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldY(R,I,M)},tileToWorldXY:function(R,I,M,L,N){return N=this.getLayer(N),N===null?null:this._convert.TileToWorldXY(R,I,M,L,N)},getTileCorners:function(R,I,M,L){return L=this.getLayer(L),L===null?null:this._convert.GetTileCorners(R,I,M,L)},weightedRandomize:function(R,I,M,L,N,G){return G=this.getLayer(G),G===null?null:(T.WeightedRandomize(I,M,L,N,R,G),this)},worldToTileX:function(R,I,M,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileX(R,I,M,L)},worldToTileY:function(R,I,M,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileY(R,I,M,L)},worldToTileXY:function(R,I,M,L,N,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileXY(R,I,M,L,N,G)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});o.exports=A},45939:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(31989);a.register("tilemap",function(c){var u=c!==void 0?c:{};return x(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},46029:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(31989);a.register("tilemap",function(c,u,h,s,l,v,d){return c===null&&(c=void 0),u===null&&(u=void 0),h===null&&(h=void 0),s===null&&(s=void 0),l===null&&(l=void 0),x(this.scene,c,u,h,s,l,v,d)})},20442:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(78389),c=e(31401),u=e(95643),h=e(81086),s=e(19218),l=e(26099),v=new a({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.Transform,c.Visible,c.ScrollFactor,x,s],initialize:function(g,y,S,T,w,P){u.call(this,g,"TilemapLayer"),this.isTilemap=!0,this.tilemap=y,this.layerIndex=S,this.layer=y.layers[S],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new l,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(T),this.setAlpha(this.layer.alpha),this.setPosition(w,P),this.setOrigin(0,0),this.setSize(y.tileWidth*this.layer.width,y.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(d){var g=[],y=[],S=this.tilemap;Array.isArray(d)||(d=[d]);for(var T=0;T<d.length;T++){var w=d[T];if(typeof w=="string"&&(w=S.getTileset(w)),w){y.push(w);for(var P=w.firstgid,A=0;A<w.total;A++)g[P+A]=w}}this.gidMap=g,this.tileset=y},setRenderOrder:function(d){var g=["right-down","left-down","right-up","left-up"];return typeof d=="string"&&(d=g.indexOf(d)),d>=0&&d<4&&(this._renderOrder=d),this},calculateFacesAt:function(d,g){return h.CalculateFacesAt(d,g,this.layer),this},calculateFacesWithin:function(d,g,y,S){return h.CalculateFacesWithin(d,g,y,S,this.layer),this},createFromTiles:function(d,g,y,S,T){return h.CreateFromTiles(d,g,y,S,T,this.layer)},cull:function(d){return this.cullCallback(this.layer,d,this.culledTiles,this._renderOrder)},copy:function(d,g,y,S,T,w,P){return h.Copy(d,g,y,S,T,w,P,this.layer),this},fill:function(d,g,y,S,T,w){return h.Fill(d,g,y,S,T,w,this.layer),this},filterTiles:function(d,g,y,S,T,w,P){return h.FilterTiles(d,g,y,S,T,w,P,this.layer)},findByIndex:function(d,g,y){return h.FindByIndex(d,g,y,this.layer)},findTile:function(d,g,y,S,T,w,P){return h.FindTile(d,g,y,S,T,w,P,this.layer)},forEachTile:function(d,g,y,S,T,w,P){return h.ForEachTile(d,g,y,S,T,w,P,this.layer),this},setTint:function(d,g,y,S,T,w){d===void 0&&(d=16777215);var P=function(A){A.tint=d,A.tintFill=!1};return this.forEachTile(P,this,g,y,S,T,w)},setTintFill:function(d,g,y,S,T,w){d===void 0&&(d=16777215);var P=function(A){A.tint=d,A.tintFill=!0};return this.forEachTile(P,this,g,y,S,T,w)},getTileAt:function(d,g,y){return h.GetTileAt(d,g,y,this.layer)},getTileAtWorldXY:function(d,g,y,S){return h.GetTileAtWorldXY(d,g,y,S,this.layer)},getIsoTileAtWorldXY:function(d,g,y,S,T){y===void 0&&(y=!0);var w=this.tempVec;return h.IsometricWorldToTileXY(d,g,!0,w,T,this.layer,y),this.getTileAt(w.x,w.y,S)},getTilesWithin:function(d,g,y,S,T){return h.GetTilesWithin(d,g,y,S,T,this.layer)},getTilesWithinShape:function(d,g,y){return h.GetTilesWithinShape(d,g,y,this.layer)},getTilesWithinWorldXY:function(d,g,y,S,T,w){return h.GetTilesWithinWorldXY(d,g,y,S,T,w,this.layer)},hasTileAt:function(d,g){return h.HasTileAt(d,g,this.layer)},hasTileAtWorldXY:function(d,g,y){return h.HasTileAtWorldXY(d,g,y,this.layer)},putTileAt:function(d,g,y,S){return h.PutTileAt(d,g,y,S,this.layer)},putTileAtWorldXY:function(d,g,y,S,T){return h.PutTileAtWorldXY(d,g,y,S,T,this.layer)},putTilesAt:function(d,g,y,S){return h.PutTilesAt(d,g,y,S,this.layer),this},randomize:function(d,g,y,S,T){return h.Randomize(d,g,y,S,T,this.layer),this},removeTileAt:function(d,g,y,S){return h.RemoveTileAt(d,g,y,S,this.layer)},removeTileAtWorldXY:function(d,g,y,S,T){return h.RemoveTileAtWorldXY(d,g,y,S,T,this.layer)},renderDebug:function(d,g){return h.RenderDebug(d,g,this.layer),this},replaceByIndex:function(d,g,y,S,T,w){return h.ReplaceByIndex(d,g,y,S,T,w,this.layer),this},setSkipCull:function(d){return d===void 0&&(d=!0),this.skipCull=d,this},setCullPadding:function(d,g){return d===void 0&&(d=1),g===void 0&&(g=1),this.cullPaddingX=d,this.cullPaddingY=g,this},setCollision:function(d,g,y,S){return h.SetCollision(d,g,y,this.layer,S),this},setCollisionBetween:function(d,g,y,S){return h.SetCollisionBetween(d,g,y,S,this.layer),this},setCollisionByProperty:function(d,g,y){return h.SetCollisionByProperty(d,g,y,this.layer),this},setCollisionByExclusion:function(d,g,y){return h.SetCollisionByExclusion(d,g,y,this.layer),this},setCollisionFromCollisionGroup:function(d,g){return h.SetCollisionFromCollisionGroup(d,g,this.layer),this},setTileIndexCallback:function(d,g,y){return h.SetTileIndexCallback(d,g,y,this.layer),this},setTileLocationCallback:function(d,g,y,S,T,w){return h.SetTileLocationCallback(d,g,y,S,T,w,this.layer),this},shuffle:function(d,g,y,S){return h.Shuffle(d,g,y,S,this.layer),this},swapByIndex:function(d,g,y,S,T,w){return h.SwapByIndex(d,g,y,S,T,w,this.layer),this},tileToWorldX:function(d,g){return this.tilemap.tileToWorldX(d,g,this)},tileToWorldY:function(d,g){return this.tilemap.tileToWorldY(d,g,this)},tileToWorldXY:function(d,g,y,S){return this.tilemap.tileToWorldXY(d,g,y,S,this)},getTileCorners:function(d,g,y){return this.tilemap.getTileCorners(d,g,y,this)},weightedRandomize:function(d,g,y,S,T){return h.WeightedRandomize(g,y,S,T,d,this.layer),this},worldToTileX:function(d,g,y){return this.tilemap.worldToTileX(d,g,y,this)},worldToTileY:function(d,g,y){return this.tilemap.worldToTileY(d,g,y,this)},worldToTileXY:function(d,g,y,S,T){return this.tilemap.worldToTileXY(d,g,y,S,T,this)},destroy:function(d){d===void 0&&(d=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),d&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});o.exports=v},16153:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=new a,c=new a,u=new a,h=function(s,l,v,d){var g=l.cull(v),y=g.length,S=v.alpha*l.alpha;if(!(y===0||S<=0)){var T=x,w=c,P=u;w.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),T.copyFrom(v.matrix);var A=s.currentContext,R=l.gidMap;A.save(),d?(T.multiplyWithOffset(d,-v.scrollX*l.scrollFactorX,-v.scrollY*l.scrollFactorY),w.e=l.x,w.f=l.y,T.multiply(w,P),P.copyToContext(A)):(w.e-=v.scrollX*l.scrollFactorX,w.f-=v.scrollY*l.scrollFactorY,w.copyToContext(A)),(!s.antialias||l.scaleX>1||l.scaleY>1)&&(A.imageSmoothingEnabled=!1);for(var I=0;I<y;I++){var M=g[I],L=R[M.index];if(L){var N=L.image.getSourceImage(),G=L.getTileTextureCoordinates(M.index),D=L.tileWidth,B=L.tileHeight;if(!(G===null||D===0||B===0)){var $=D*.5,k=B*.5;G.x+=L.tileOffset.x,G.y+=L.tileOffset.y,A.save(),A.translate(M.pixelX+$,M.pixelY+k),M.rotation!==0&&A.rotate(M.rotation),(M.flipX||M.flipY)&&A.scale(M.flipX?-1:1,M.flipY?-1:1),A.globalAlpha=S*M.alpha,A.drawImage(N,G.x,G.y,D,B,-$,-k,D,B),A.restore()}}}A.restore()}};o.exports=h},19218:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,c=a;x=e(99558),c=e(16153),o.exports={renderWebGL:x,renderCanvas:c}},99558:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(c,u,h){var s=u.cull(h),l=s.length,v=h.alpha*u.alpha;if(!(l===0||v<=0)){var d=u.gidMap,g=c.pipelines.set(u.pipeline,u),y=a.getTintAppendFloatAlpha,S=u.scrollFactorX,T=u.scrollFactorY,w=u.x,P=u.y,A=u.scaleX,R=u.scaleY;c.pipelines.preBatch(u);for(var I=0;I<l;I++){var M=s[I],L=d[M.index];if(L){var N=L.getTileTextureCoordinates(M.index),G=L.tileWidth,D=L.tileHeight;if(!(!N||G===0||D===0)){var B=G*.5,$=D*.5,k=L.glTexture,X=g.setTexture2D(k,u),Y=G,Z=D,Q=N.x,j=N.y,K=L.tileOffset.x,W=L.tileOffset.y,V=y(M.tint,v*M.alpha);g.batchTexture(u,k,k.width,k.height,w+M.pixelX*A+(B*A-K),P+M.pixelY*R+($*R-W),G,D,A,R,M.rotation,M.flipX,M.flipY,S,T,B,$,Q,j,Y,Z,V,V,V,V,M.tintFill,0,0,h,null,!0,X,!0)}}}c.pipelines.postBatch(u)}};o.exports=x},33629:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),c=new a({initialize:function(h,s,l,v,d,g,y,S,T){(l===void 0||l<=0)&&(l=32),(v===void 0||v<=0)&&(v=32),d===void 0&&(d=0),g===void 0&&(g=0),y===void 0&&(y={}),S===void 0&&(S={}),this.name=h,this.firstgid=s,this.tileWidth=l,this.tileHeight=v,this.tileMargin=d,this.tileSpacing=g,this.tileProperties=y,this.tileData=S,this.tileOffset=new x,T!==void 0&&this.tileOffset.set(T.x,T.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var h=this.getTileData(u);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){this.image=u;var h=u.get(),s=u.getFrameBounds();return this.glTexture=h.source.glTexture,h.width>s.width||h.height>s.height?this.updateTileData(h.width,h.height):this.updateTileData(s.width,s.height,s.x,s.y),this},setTileSize:function(u,h){return u!==void 0&&(this.tileWidth=u),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,h){return u!==void 0&&(this.tileMargin=u),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,h,s,l){s===void 0&&(s=0),l===void 0&&(l=0);var v=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),d=(u-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(v%1!==0||d%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),v=Math.floor(v),d=Math.floor(d),this.rows=v,this.columns=d,this.total=v*d,this.texCoordinates.length=0;for(var g=this.tileMargin+s,y=this.tileMargin+l,S=0;S<this.rows;S++){for(var T=0;T<this.columns;T++)this.texCoordinates.push({x:g,y}),g+=this.tileWidth+this.tileSpacing;g=this.tileMargin+s,y+=this.tileHeight+this.tileSpacing}return this}});o.exports=c},72023:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=function(c,u,h){var s=a(c,u,!0,h),l=a(c,u-1,!0,h),v=a(c,u+1,!0,h),d=a(c-1,u,!0,h),g=a(c+1,u,!0,h),y=s&&s.collides;return y&&(s.faceTop=!0,s.faceBottom=!0,s.faceLeft=!0,s.faceRight=!0),l&&l.collides&&(y&&(s.faceTop=!1),l.faceBottom=!y),v&&v.collides&&(y&&(s.faceBottom=!1),v.faceTop=!y),d&&d.collides&&(y&&(s.faceLeft=!1),d.faceRight=!y),g&&g.collides&&(y&&(s.faceRight=!1),g.faceLeft=!y),s&&!s.collides&&s.resetFaces(),s};o.exports=x},42573:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=e(7386),c=function(u,h,s,l,v){for(var d=null,g=null,y=null,S=null,T=x(u,h,s,l,null,v),w=0;w<T.length;w++){var P=T[w];P&&(P.collides?(d=a(P.x,P.y-1,!0,v),g=a(P.x,P.y+1,!0,v),y=a(P.x-1,P.y,!0,v),S=a(P.x+1,P.y,!0,v),P.faceTop=!(d&&d.collides),P.faceBottom=!(g&&g.collides),P.faceLeft=!(y&&y.collides),P.faceRight=!(S&&S.collides)):P.resetFaces())}};o.exports=c},33528:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=new a,c=function(u,h,s,l){var v=s.tilemapLayer,d=v.cullPaddingX,g=v.cullPaddingY,y=v.tilemap.tileToWorldXY(u,h,x,l,v);return y.x>l.worldView.x+v.scaleX*s.tileWidth*(-d-.5)&&y.x<l.worldView.right+v.scaleX*s.tileWidth*(d-.5)&&y.y>l.worldView.y+v.scaleY*s.tileHeight*(-g-1)&&y.y<l.worldView.bottom+v.scaleY*s.tileHeight*(g-.5)};o.exports=c},1785:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),x=e(7386),c=e(62991),u=e(23029),h=function(s,l,v,d,g,y,S,T){S===void 0&&(S=!0);var w=x(s,l,v,d,null,T),P=[];w.forEach(function(G){var D=new u(G.layer,G.index,G.x,G.y,G.width,G.height,G.baseWidth,G.baseHeight);D.copy(G),P.push(D)});for(var A=g-s,R=y-l,I=0;I<P.length;I++){var M=P[I],L=M.x+A,N=M.y+R;c(L,N,T)&&T.data[N][L]&&(M.x=L,M.y=N,M.updatePixelXY(),T.data[N][L]=M)}S&&a(g-1,y-1,v+2,d+2,T),w.length=0,P.length=0};o.exports=h},78419:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x=e(7386),c=e(27987),u=function(h,s,l,v,d,g){l||(l={}),Array.isArray(h)||(h=[h]);var y=g.tilemapLayer;v||(v=y.scene),d||(d=v.cameras.main);var S=g.width,T=g.height,w=x(0,0,S,T,null,g),P=[],A,R=function(N,G,D){for(var B=0;B<D.length;B++){var $=D[B];N.hasOwnProperty($)||(N[$]=G[$])}};for(A=0;A<w.length;A++){var I=w[A],M=a(l);if(h.indexOf(I.index)!==-1){var L=y.tileToWorldXY(I.x,I.y,void 0,d,g);M.x=L.x,M.y=L.y,R(M,I,["rotation","flipX","flipY","alpha","visible","tint"]),M.hasOwnProperty("origin")||(M.x+=I.width*.5,M.y+=I.height*.5),M.hasOwnProperty("useSpriteSheet")&&(M.key=I.tileset.image,M.frame=I.index-1),P.push(v.make.sprite(M))}}if(Array.isArray(s))for(A=0;A<h.length;A++)c(h[A],s[A],0,0,S,T,g);else if(s!==null)for(A=0;A<h.length;A++)c(h[A],s,0,0,S,T,g);return P};o.exports=u},19545:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(63448),c=e(56583),u=new a,h=function(s,l){var v=s.tilemapLayer.tilemap,d=s.tilemapLayer,g=Math.floor(v.tileWidth*d.scaleX),y=Math.floor(v.tileHeight*d.scaleY),S=c(l.worldView.x-d.x,g,0,!0)-d.cullPaddingX,T=x(l.worldView.right-d.x,g,0,!0)+d.cullPaddingX,w=c(l.worldView.y-d.y,y,0,!0)-d.cullPaddingY,P=x(l.worldView.bottom-d.y,y,0,!0)+d.cullPaddingY;return u.setTo(S,w,T-S,P-w)};o.exports=h},30003:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19545),x=e(32483),c=function(u,h,s,l){s===void 0&&(s=[]),l===void 0&&(l=0),s.length=0;var v=u.tilemapLayer,d=a(u,h);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(d.left=0,d.right=u.width,d.top=0,d.bottom=u.height),x(u,d,l,s),s};o.exports=c},35137:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(42573),c=e(20576),u=function(h,s,l,v,d,g,y){for(var S=y.collideIndexes.indexOf(h)!==-1,T=a(s,l,v,d,null,y),w=0;w<T.length;w++)T[w].index=h,c(T[w],S);g&&x(s-1,l-1,v+2,d+2,y)};o.exports=u},40253:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d,g){var y=a(h,s,l,v,d,g);return y.filter(c,u)};o.exports=x},52692:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a===void 0&&(a=0),x===void 0&&(x=!1);var u=0,h,s,l;if(x){for(s=c.height-1;s>=0;s--)for(h=c.width-1;h>=0;h--)if(l=c.data[s][h],l&&l.index===e){if(u===a)return l;u+=1}}else for(s=0;s<c.height;s++)for(h=0;h<c.width;h++)if(l=c.data[s][h],l&&l.index===e){if(u===a)return l;u+=1}return null};o.exports=E},66151:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d,g){var y=a(h,s,l,v,d,g);return y.find(c,u)||null};o.exports=x},97560:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d,g){var y=a(h,s,l,v,d,g);y.forEach(c,u)};o.exports=x},43305:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(30003),c=e(9474),u=e(14018),h=e(29747),s=e(54503),l=function(v){return v===a.ORTHOGONAL?x:v===a.HEXAGONAL?c:v===a.STAGGERED?s:v===a.ISOMETRIC?u:h};o.exports=l},7423:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),x=function(c,u,h,s){if(a(c,u,s)){var l=s.data[u][c]||null;return l?l.index===-1?h?l:null:l:null}else return null};o.exports=x},60540:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=e(26099),c=new x,u=function(h,s,l,v,d){return d.tilemapLayer.worldToTileXY(h,s,!0,c,v),a(c.x,c.y,l,d)};o.exports=u},55826:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s){var l=s.baseTileWidth,v=s.baseTileHeight,d=s.tilemapLayer,g=0,y=0;d&&(h||(h=d.scene.cameras.main),g=d.x+h.scrollX*(1-d.scrollFactorX),y=d.y+h.scrollY*(1-d.scrollFactorY),l*=d.scaleX,v*=d.scaleY);var S=g+c*l,T=y+u*v;return[new a(S,T),new a(S+l,T),new a(S+l,T+v),new a(S,T+v)]};o.exports=x},11758:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(27229),c=e(29747),u=e(55826),h=function(s){return s===a.ORTHOGONAL?u:s===a.ISOMETRIC?c:s===a.HEXAGONAL?x:(s===a.STAGGERED,c)};o.exports=h},39167:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(29747),c=e(97281),u=function(h){return h===a.ORTHOGONAL?c:x};o.exports=u},62e3:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(19951),c=e(14127),u=e(29747),h=e(97202),s=e(70326),l=function(v){return v===a.ORTHOGONAL?s:v===a.ISOMETRIC?c:v===a.HEXAGONAL?x:v===a.STAGGERED?h:u};o.exports=l},5984:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(29747),c=e(28054),u=e(29650),h=function(s){return s===a.ORTHOGONAL?u:s===a.STAGGERED?c:x};o.exports=h},7386:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(c,u,h,s,l,v){c===void 0&&(c=0),u===void 0&&(u=0),h===void 0&&(h=v.width),s===void 0&&(s=v.height),l||(l={});var d=a(l,"isNotEmpty",!1),g=a(l,"isColliding",!1),y=a(l,"hasInterestingFace",!1);c<0&&(h+=c,c=0),u<0&&(s+=u,u=0),c+h>v.width&&(h=Math.max(v.width-c,0)),u+s>v.height&&(s=Math.max(v.height-u,0));for(var S=[],T=u;T<u+s;T++)for(var w=c;w<c+h;w++){var P=v.data[T][w];if(P!==null){if(d&&P.index===-1||g&&!P.collides||y&&!P.hasInterestingFace)continue;S.push(P)}}return S};o.exports=x},91141:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55738),x=e(7386),c=e(91865),u=e(29747),h=e(26099),s=function(y,S){return c.RectangleToTriangle(S,y)},l=new h,v=new h,d=new h,g=function(y,S,T,w){if(y===void 0)return[];var P=u;y instanceof a.Circle?P=c.CircleToRectangle:y instanceof a.Rectangle?P=c.RectangleToRectangle:y instanceof a.Triangle?P=s:y instanceof a.Line&&(P=c.LineToRectangle),w.tilemapLayer.worldToTileXY(y.left,y.top,!0,v,T);var A=v.x,R=v.y;w.tilemapLayer.worldToTileXY(y.right,y.bottom,!1,d,T);var I=Math.ceil(d.x),M=Math.ceil(d.y),L=Math.max(I-A,1),N=Math.max(M-R,1),G=x(A,R,L,N,S,w),D=w.tileWidth,B=w.tileHeight;w.tilemapLayer&&(D*=w.tilemapLayer.scaleX,B*=w.tilemapLayer.scaleY);for(var $=[],k=new a.Rectangle(0,0,D,B),X=0;X<G.length;X++){var Y=G[X];w.tilemapLayer.tileToWorldXY(Y.x,Y.y,l,T),k.x=l.x,k.y=l.y,P(y,k)&&$.push(Y)}return $};o.exports=g},96523:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(26099),c=new x,u=new x,h=function(s,l,v,d,g,y,S){var T=S.tilemapLayer.tilemap._convert.WorldToTileXY;T(s,l,!0,c,y,S);var w=c.x,P=c.y;T(s+v,l+d,!1,u,y,S);var A=Math.ceil(u.x),R=Math.ceil(u.y);return a(w,P,A-w,R-P,g,S)};o.exports=h},96113:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(20242),c=e(10095),u=function(h){return h===a.ORTHOGONAL?c:x};o.exports=u},16926:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(86625),c=e(96897),u=e(29747),h=e(15108),s=e(85896),l=function(v){return v===a.ORTHOGONAL?s:v===a.ISOMETRIC?c:v===a.HEXAGONAL?x:v===a.STAGGERED?h:u};o.exports=l},55762:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(20242),c=e(51900),u=e(63288),h=function(s){return s===a.ORTHOGONAL?u:s===a.STAGGERED?c:x};o.exports=h},45091:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),x=function(c,u,h){if(a(c,u,h)){var s=h.data[u][c];return s!==null&&s.index>-1}else return!1};o.exports=x},24152:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45091),x=e(26099),c=new x,u=function(h,s,l,v){v.tilemapLayer.worldToTileXY(h,s,!0,c,l);var d=c.x,g=c.y;return a(d,g,v)};o.exports=u},90454:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),x=e(56583),c=function(u,h){var s=u.tilemapLayer.tilemap,l=u.tilemapLayer,v=Math.floor(s.tileWidth*l.scaleX),d=Math.floor(s.tileHeight*l.scaleY),g=u.hexSideLength,y,S,T,w;if(u.staggerAxis==="y"){var P=(d-g)/2+g;y=x(h.worldView.x-l.x,v,0,!0)-l.cullPaddingX,S=a(h.worldView.right-l.x,v,0,!0)+l.cullPaddingX,T=x(h.worldView.y-l.y,P,0,!0)-l.cullPaddingY,w=a(h.worldView.bottom-l.y,P,0,!0)+l.cullPaddingY}else{var A=(v-g)/2+g;y=x(h.worldView.x-l.x,A,0,!0)-l.cullPaddingX,S=a(h.worldView.right-l.x,A,0,!0)+l.cullPaddingX,T=x(h.worldView.y-l.y,d,0,!0)-l.cullPaddingY,w=a(h.worldView.bottom-l.y,d,0,!0)+l.cullPaddingY}return{left:y,right:S,top:T,bottom:w}};o.exports=c},9474:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90454),x=e(32483),c=function(u,h,s,l){s===void 0&&(s=[]),l===void 0&&(l=0),s.length=0;var v=u.tilemapLayer,d=a(u,h);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(d.left=0,d.right=u.width,d.top=0,d.bottom=u.height),x(u,d,l,s),s};o.exports=c},27229:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19951),x=e(26099),c=new x,u=function(h,s,l,v){var d=v.baseTileWidth,g=v.baseTileHeight,y=v.tilemapLayer;y&&(d*=y.scaleX,g*=y.scaleY);var S=a(h,s,c,l,v),T=[],w=.5773502691896257,P,A;v.staggerAxis==="y"?(P=w*d,A=g/2):(P=d/2,A=w*g);for(var R=0;R<6;R++){var I=2*Math.PI*(.5-R)/6;T.push(new x(S.x+P*Math.cos(I),S.y+A*Math.sin(I)))}return T};o.exports=u},19951:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l){h||(h=new a);var v=l.baseTileWidth,d=l.baseTileHeight,g=l.tilemapLayer,y=0,S=0;g&&(s||(s=g.scene.cameras.main),y=g.x+s.scrollX*(1-g.scrollFactorX),S=g.y+s.scrollY*(1-g.scrollFactorY),v*=g.scaleX,d*=g.scaleY);var T=v/2,w=d/2,P,A,R=l.staggerAxis,I=l.staggerIndex;return R==="y"?(P=y+v*c+v,A=S+1.5*u*w+w,u%2===0&&(I==="odd"?P-=T:P+=T)):R==="x"&&I==="odd"&&(P=y+1.5*c*T+T,A=S+d*c+d,c%2===0&&(I==="odd"?A-=w:A+=w)),h.set(P,A)};o.exports=x},86625:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l,v){s||(s=new a);var d=v.baseTileWidth,g=v.baseTileHeight,y=v.tilemapLayer;y&&(l||(l=y.scene.cameras.main),c=c-(y.x+l.scrollX*(1-y.scrollFactorX)),u=u-(y.y+l.scrollY*(1-y.scrollFactorY)),d*=y.scaleX,g*=y.scaleY);var S=.5773502691896257,T=-.3333333333333333,w=0,P=.6666666666666666,A=d/2,R=g/2,I,M,L,N,G;v.staggerAxis==="y"?(I=(c-A)/(S*d),M=(u-R)/R,L=S*I+T*M,N=w*I+P*M):(I=(c-A)/A,M=(u-R)/(S*g),L=T*I+S*M,N=P*I+w*M),G=-L-N;var D=Math.round(L),B=Math.round(N),$=Math.round(G),k=Math.abs(D-L),X=Math.abs(B-N),Y=Math.abs($-G);k>X&&k>Y?D=-B-$:X>Y&&(B=-D-$);var Z,Q=B;return v.staggerIndex==="odd"?Z=Q%2===0?B/2+D:B/2+D-.5:Z=Q%2===0?B/2+D:B/2+D+.5,s.set(Z,Q)};o.exports=x},62991:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e>=0&&e<x.width&&a>=0&&a<x.height};o.exports=E},14018:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33528),x=function(c,u,h,s){h===void 0&&(h=[]),s===void 0&&(s=0),h.length=0;var l=c.tilemapLayer,v=c.data,d=c.width,g=c.height,y=l.skipCull,S=0,T=d,w=0,P=g,A,R,I;if(s===0)for(R=w;R<P;R++)for(A=S;A<T;A++)I=v[R][A],!(!I||I.index===-1||!I.visible||I.alpha===0)&&(!y&&!a(A,R,c,u)||h.push(I));else if(s===1)for(R=w;R<P;R++)for(A=T;A>=S;A--)I=v[R][A],!(!I||I.index===-1||!I.visible||I.alpha===0)&&(!y&&!a(A,R,c,u)||h.push(I));else if(s===2)for(R=P;R>=w;R--)for(A=S;A<T;A++)I=v[R][A],!(!I||I.index===-1||!I.visible||I.alpha===0)&&(!y&&!a(A,R,c,u)||h.push(I));else if(s===3)for(R=P;R>=w;R--)for(A=T;A>=S;A--)I=v[R][A],!(!I||I.index===-1||!I.visible||I.alpha===0)&&(!y&&!a(A,R,c,u)||h.push(I));return l.tilesDrawn=h.length,l.tilesTotal=d*g,h};o.exports=x},14127:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l){h||(h=new a);var v=l.baseTileWidth,d=l.baseTileHeight,g=l.tilemapLayer,y=0,S=0;g&&(s||(s=g.scene.cameras.main),y=g.x+s.scrollX*(1-g.scrollFactorX),v*=g.scaleX,S=g.y+s.scrollY*(1-g.scrollFactorY),d*=g.scaleY);var T=y+(c-u)*(v/2),w=S+(c+u)*(d/2);return h.set(T,w)};o.exports=x},96897:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l,v,d){s||(s=new a);var g=v.baseTileWidth,y=v.baseTileHeight,S=v.tilemapLayer;S&&(l||(l=S.scene.cameras.main),u=u-(S.y+l.scrollY*(1-S.scrollFactorY)),y*=S.scaleY,c=c-(S.x+l.scrollX*(1-S.scrollFactorX)),g*=S.scaleX);var T=g/2,w=y/2;c=c-T,d||(u=u-y);var P=.5*(c/T+u/w),A=.5*(-c/T+u/w);return h&&(P=Math.floor(P),A=Math.floor(A)),s.set(P,A)};o.exports=x},71558:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),x=e(62991),c=e(72023),u=e(20576),h=function(s,l,v,d,g){if(d===void 0&&(d=!0),!x(l,v,g))return null;var y,S=g.data[v][l],T=S&&S.collides;s instanceof a?(g.data[v][l]===null&&(g.data[v][l]=new a(g,s.index,l,v,g.tileWidth,g.tileHeight)),g.data[v][l].copy(s)):(y=s,g.data[v][l]===null?g.data[v][l]=new a(g,y,l,v,g.tileWidth,g.tileHeight):g.data[v][l].index=y);var w=g.data[v][l],P=g.collideIndexes.indexOf(w.index)!==-1;if(y=s instanceof a?s.index:s,y===-1)w.width=g.tileWidth,w.height=g.tileHeight;else{var A=g.tilemapLayer.tilemap,R=A.tiles,I=R[y][2],M=A.tilesets[I];w.width=M.tileWidth,w.height=M.tileHeight}return u(w,P),d&&T!==w.collides&&c(l,v,g),w};o.exports=h},26303:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71558),x=e(26099),c=new x,u=function(h,s,l,v,d,g){return g.tilemapLayer.worldToTileXY(s,l,!0,c,d,g),a(h,c.x,c.y,v,g)};o.exports=u},14051:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),x=e(71558),c=function(u,h,s,l,v){if(l===void 0&&(l=!0),!Array.isArray(u))return null;Array.isArray(u[0])||(u=[u]);for(var d=u.length,g=u[0].length,y=0;y<d;y++)for(var S=0;S<g;S++){var T=u[y][S];x(T,h+S,s+y,!1,v)}l&&a(h-1,s-1,g+2,d+2,v)};o.exports=c},77389:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(26546),c=function(u,h,s,l,v,d){var g,y=a(u,h,s,l,{},d);if(!v)for(v=[],g=0;g<y.length;g++)v.indexOf(y[g].index)===-1&&v.push(y[g].index);for(g=0;g<y.length;g++)y[g].index=x(v)};o.exports=c},63557:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),x=e(62991),c=e(72023),u=function(h,s,l,v,d){if(l===void 0&&(l=!0),v===void 0&&(v=!0),!x(h,s,d))return null;var g=d.data[s][h];if(g)d.data[s][h]=l?null:new a(d,-1,h,s,d.tileWidth,d.tileHeight);else return null;return v&&g&&g.collides&&c(h,s,d),g};o.exports=u},94178:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63557),x=e(26099),c=new x,u=function(h,s,l,v,d,g){return g.tilemapLayer.worldToTileXY(h,s,!0,c,d,g),a(c.x,c.y,l,v,g)};o.exports=u},15533:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(3956),c=new x(105,210,231,150),u=new x(243,134,48,200),h=new x(40,39,37,150),s=function(l,v,d){v===void 0&&(v={});var g=v.tileColor!==void 0?v.tileColor:c,y=v.collidingTileColor!==void 0?v.collidingTileColor:u,S=v.faceColor!==void 0?v.faceColor:h,T=a(0,0,d.width,d.height,null,d);l.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),l.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var w=0;w<T.length;w++){var P=T[w],A=P.width,R=P.height,I=P.pixelX,M=P.pixelY,L=P.collides?y:g;L!==null&&(l.fillStyle(L.color,L.alpha/255),l.fillRect(I,M,A,R)),I+=1,M+=1,A-=2,R-=2,S!==null&&(l.lineStyle(1,S.color,S.alpha/255),P.faceTop&&l.lineBetween(I,M,I+A,M),P.faceRight&&l.lineBetween(I+A,M,I+A,M+R),P.faceBottom&&l.lineBetween(I,M+R,I+A,M+R),P.faceLeft&&l.lineBetween(I,M,I,M+R))}};o.exports=s},27987:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d){for(var g=a(h,s,l,v,null,d),y=0;y<g.length;y++)g[y]&&g[y].index===c&&(g[y].index=u)};o.exports=x},32483:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=e.data,h=e.width,s=e.height,l=e.tilemapLayer,v=Math.max(0,a.left),d=Math.min(h,a.right),g=Math.max(0,a.top),y=Math.min(s,a.bottom),S,T,w;if(x===0)for(T=g;T<y;T++)for(S=v;u[T]&&S<d;S++)w=u[T][S],!(!w||w.index===-1||!w.visible||w.alpha===0)&&c.push(w);else if(x===1)for(T=g;T<y;T++)for(S=d;u[T]&&S>=v;S--)w=u[T][S],!(!w||w.index===-1||!w.visible||w.alpha===0)&&c.push(w);else if(x===2)for(T=y;T>=g;T--)for(S=v;u[T]&&S<d;S++)w=u[T][S],!(!w||w.index===-1||!w.visible||w.alpha===0)&&c.push(w);else if(x===3)for(T=y;T>=g;T--)for(S=d;u[T]&&S>=v;S--)w=u[T][S],!(!w||w.index===-1||!w.visible||w.alpha===0)&&c.push(w);return l.tilesDrawn=c.length,l.tilesTotal=h*s,c};o.exports=E},57068:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),c=e(9589),u=function(h,s,l,v,d){s===void 0&&(s=!0),l===void 0&&(l=!0),d===void 0&&(d=!0),Array.isArray(h)||(h=[h]);for(var g=0;g<h.length;g++)c(h[g],s,v);if(d)for(var y=0;y<v.height;y++)for(var S=0;S<v.width;S++){var T=v.data[y][S];T&&h.indexOf(T.index)!==-1&&a(T,s)}l&&x(0,0,v.width,v.height,v)};o.exports=u},37266:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),c=e(9589),u=function(h,s,l,v,d,g){if(l===void 0&&(l=!0),v===void 0&&(v=!0),g===void 0&&(g=!0),!(h>s)){for(var y=h;y<=s;y++)c(y,l,d);if(g)for(var S=0;S<d.height;S++)for(var T=0;T<d.width;T++){var w=d.data[S][T];w&&w.index>=h&&w.index<=s&&a(w,l)}v&&x(0,0,d.width,d.height,d)}};o.exports=u},75661:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),c=e(9589),u=function(h,s,l,v){s===void 0&&(s=!0),l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var d=0;d<v.height;d++)for(var g=0;g<v.width;g++){var y=v.data[d][g];y&&h.indexOf(y.index)===-1&&(a(y,s),c(y.index,s,v))}l&&x(0,0,v.width,v.height,v)};o.exports=u},64740:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),c=e(97022),u=function(h,s,l,v){s===void 0&&(s=!0),l===void 0&&(l=!0);for(var d=0;d<v.height;d++)for(var g=0;g<v.width;g++){var y=v.data[d][g];if(y){for(var S in h)if(c(y.properties,S)){var T=h[S];Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++)y.properties[S]===T[w]&&a(y,s)}}}l&&x(0,0,v.width,v.height,v)};o.exports=u},63307:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),c=function(u,h,s){u===void 0&&(u=!0),h===void 0&&(h=!0);for(var l=0;l<s.height;l++)for(var v=0;v<s.width;v++){var d=s.data[l][v];if(d){var g=d.getCollisionGroup();g&&g.objects&&g.objects.length>0&&a(d,u)}}h&&x(0,0,s.width,s.height,s)};o.exports=c},9589:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=x.collideIndexes.indexOf(e);a&&c===-1?x.collideIndexes.push(e):!a&&c!==-1&&x.collideIndexes.splice(c,1)};o.exports=E},20576:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};o.exports=E},79583:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){if(typeof e=="number")c.callbacks[e]=a!==null?{callback:a,callbackContext:x}:void 0;else for(var u=0,h=e.length;u<h;u++)c.callbacks[e[u]]=a!==null?{callback:a,callbackContext:x}:void 0};o.exports=E},93254:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d){for(var g=a(c,u,h,s,null,d),y=0;y<g.length;y++)g[y].setCollisionCallback(l,v)};o.exports=x},32903:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(33680),c=function(u,h,s,l,v){var d=a(u,h,s,l,null,v),g=d.map(function(S){return S.index});x(g);for(var y=0;y<d.length;y++)d[y].index=g[y]};o.exports=c},61325:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),x=e(56583),c=function(u,h){var s=u.tilemapLayer.tilemap,l=u.tilemapLayer,v=Math.floor(s.tileWidth*l.scaleX),d=Math.floor(s.tileHeight*l.scaleY),g=x(h.worldView.x-l.x,v,0,!0)-l.cullPaddingX,y=a(h.worldView.right-l.x,v,0,!0)+l.cullPaddingX,S=x(h.worldView.y-l.y,d/2,0,!0)-l.cullPaddingY,T=a(h.worldView.bottom-l.y,d/2,0,!0)+l.cullPaddingY;return{left:g,right:y,top:S,bottom:T}};o.exports=c},54503:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61325),x=e(32483),c=function(u,h,s,l){s===void 0&&(s=[]),l===void 0&&(l=0),s.length=0;var v=u.tilemapLayer,d=a(u,h);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(d.left=0,d.right=u.width,d.top=0,d.bottom=u.height),x(u,d,l,s),s};o.exports=c},97202:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l){h||(h=new a);var v=l.baseTileWidth,d=l.baseTileHeight,g=l.tilemapLayer,y=0,S=0;g&&(s||(s=g.scene.cameras.main),y=g.x+s.scrollX*(1-g.scrollFactorX),v*=g.scaleX,S=g.y+s.scrollY*(1-g.scrollFactorY),d*=g.scaleY);var T=y+c*v+u%2*(v/2),w=S+u*(d/2);return h.set(T,w)};o.exports=x},28054:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=x.baseTileHeight,u=x.tilemapLayer,h=0;return u&&(a===void 0&&(a=u.scene.cameras.main),h=u.y+a.scrollY*(1-u.scrollFactorY),c*=u.scaleY),h+e*(c/2)+c};o.exports=E},15108:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l,v){s||(s=new a);var d=v.baseTileWidth,g=v.baseTileHeight,y=v.tilemapLayer;y&&(l||(l=y.scene.cameras.main),u=u-(y.y+l.scrollY*(1-y.scrollFactorY)),g*=y.scaleY,c=c-(y.x+l.scrollX*(1-y.scrollFactorX)),d*=y.scaleX);var S=h?Math.floor(u/(g/2)):u/(g/2),T=h?Math.floor((c+S%2*.5*d)/d):(c+S%2*.5*d)/d;return s.set(T,S)};o.exports=x},51900:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=c.baseTileHeight,h=c.tilemapLayer;return h&&(x||(x=h.scene.cameras.main),e=e-(h.y+x.scrollY*(1-h.scrollFactorY)),u*=h.scaleY),a?Math.floor(e/(u/2)):e/(u/2)};o.exports=E},86560:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(c,u,h,s,l,v,d){for(var g=a(h,s,l,v,null,d),y=0;y<g.length;y++)g[y]&&(g[y].index===c?g[y].index=u:g[y].index===u&&(g[y].index=c))};o.exports=x},97281:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=x.baseTileWidth,u=x.tilemapLayer,h=0;return u&&(a||(a=u.scene.cameras.main),h=u.x+a.scrollX*(1-u.scrollFactorX),c*=u.scaleX),h+e*c};o.exports=E},70326:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97281),x=e(29650),c=e(26099),u=function(h,s,l,v,d){return l||(l=new c(0,0)),l.x=a(h,v,d),l.y=x(s,v,d),l};o.exports=u},29650:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=x.baseTileHeight,u=x.tilemapLayer,h=0;return u&&(a||(a=u.scene.cameras.main),h=u.y+a.scrollY*(1-u.scrollFactorY),c*=u.scaleY),h+e*c};o.exports=E},77366:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(75508),c=function(u,h,s,l,v,d){if(v){var g,y=a(u,h,s,l,null,d),S=0;for(g=0;g<v.length;g++)S+=v[g].weight;if(!(S<=0))for(g=0;g<y.length;g++){for(var T=x.RND.frac()*S,w=0,P=-1,A=0;A<v.length;A++)if(w+=v[A].weight,T<=w){var R=v[A].index;P=Array.isArray(R)?R[Math.floor(x.RND.frac()*R.length)]:R;break}y[g].index=P}}};o.exports=c},10095:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),x=e(26099),c=new x,u=function(h,s,l,v){return a(h,0,s,c,l,v),c.x};o.exports=u},85896:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(c,u,h,s,l,v){h===void 0&&(h=!0),s||(s=new a);var d=v.baseTileWidth,g=v.baseTileHeight,y=v.tilemapLayer;y&&(l||(l=y.scene.cameras.main),c=c-(y.x+l.scrollX*(1-y.scrollFactorX)),u=u-(y.y+l.scrollY*(1-y.scrollFactorY)),d*=y.scaleX,g*=y.scaleY);var S=c/d,T=u/g;return h&&(S=Math.floor(S),T=Math.floor(T)),s.set(S,T)};o.exports=x},63288:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),x=e(26099),c=new x,u=function(h,s,l,v){return a(0,h,s,c,l,v),c.y};o.exports=u},81086:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}},91907:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:e(91907)};o.exports=a},62501:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(21829),c={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};c=a(!1,c,x.ORIENTATION),o.exports=c},14977:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91907),c=e(95540),u=new a({initialize:function(s){s===void 0&&(s={}),this.name=c(s,"name","layer"),this.id=c(s,"id",0),this.x=c(s,"x",0),this.y=c(s,"y",0),this.width=c(s,"width",0),this.height=c(s,"height",0),this.tileWidth=c(s,"tileWidth",0),this.tileHeight=c(s,"tileHeight",0),this.baseTileWidth=c(s,"baseTileWidth",this.tileWidth),this.baseTileHeight=c(s,"baseTileHeight",this.tileHeight),this.orientation=c(s,"orientation",x.ORTHOGONAL),this.widthInPixels=c(s,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=c(s,"heightInPixels",this.height*this.baseTileHeight),this.alpha=c(s,"alpha",1),this.visible=c(s,"visible",!0),this.properties=c(s,"properties",[]),this.indexes=c(s,"indexes",[]),this.collideIndexes=c(s,"collideIndexes",[]),this.callbacks=c(s,"callbacks",[]),this.bodies=c(s,"bodies",[]),this.data=c(s,"data",[]),this.tilemapLayer=c(s,"tilemapLayer",null),this.hexSideLength=c(s,"hexSideLength",0),this.staggerAxis=c(s,"staggerAxis","y"),this.staggerIndex=c(s,"staggerIndex","odd")}});o.exports=u},87010:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91907),c=e(95540),u=new a({initialize:function(s){s===void 0&&(s={}),this.name=c(s,"name","map"),this.width=c(s,"width",0),this.height=c(s,"height",0),this.infinite=c(s,"infinite",!1),this.tileWidth=c(s,"tileWidth",0),this.tileHeight=c(s,"tileHeight",0),this.widthInPixels=c(s,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=c(s,"heightInPixels",this.height*this.tileHeight),this.format=c(s,"format",null),this.orientation=c(s,"orientation",x.ORTHOGONAL),this.renderOrder=c(s,"renderOrder","right-down"),this.version=c(s,"version","1"),this.properties=c(s,"properties",{}),this.layers=c(s,"layers",[]),this.images=c(s,"images",[]),this.objects=c(s,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=c(s,"collision",{}),this.tilesets=c(s,"tilesets",[]),this.imageCollections=c(s,"imageCollections",[]),this.tiles=c(s,"tiles",[]),this.hexSideLength=c(s,"hexSideLength",0),this.staggerAxis=c(s,"staggerAxis","y"),this.staggerIndex=c(s,"staggerIndex","odd")}});o.exports=u},48700:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=new a({initialize:function(h){h===void 0&&(h={}),this.name=x(h,"name","object layer"),this.id=x(h,"id",0),this.opacity=x(h,"opacity",1),this.properties=x(h,"properties",{}),this.propertyTypes=x(h,"propertytypes",{}),this.type=x(h,"type","objectgroup"),this.visible=x(h,"visible",!0),this.objects=x(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});o.exports=c},6641:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=function(c){return c=c.toLowerCase(),c==="isometric"?a.ISOMETRIC:c==="staggered"?a.STAGGERED:c==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};o.exports=x},46177:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(2342),c=e(82593),u=e(46594),h=e(87021),s=function(l,v,d,g,y,S){var T;switch(v){case a.ARRAY_2D:T=x(l,d,g,y,S);break;case a.CSV:T=c(l,d,g,y,S);break;case a.TILED_JSON:T=u(l,d,S);break;case a.WELTMEISTER:T=h(l,d,S);break;default:console.warn("Unrecognized tilemap data format: "+v),T=null}return T};o.exports=s},2342:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(14977),c=e(87010),u=e(23029),h=function(s,l,v,d,g){for(var y=new x({tileWidth:v,tileHeight:d}),S=new c({name:s,tileWidth:v,tileHeight:d,format:a.ARRAY_2D,layers:[y]}),T=[],w=l.length,P=0,A=0;A<l.length;A++){T[A]=[];for(var R=l[A],I=0;I<R.length;I++){var M=parseInt(R[I],10);isNaN(M)||M===-1?T[A][I]=g?null:new u(y,-1,I,A,v,d):T[A][I]=new u(y,M,I,A,v,d)}P===0&&(P=R.length)}return S.width=y.width=P,S.height=y.height=w,S.widthInPixels=y.widthInPixels=P*v,S.heightInPixels=y.heightInPixels=w*d,y.data=T,S};o.exports=h},82593:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(2342),c=function(u,h,s,l,v){var d=h.trim().split(`
`).map(function(y){return y.split(",")}),g=x(u,d,s,l,v);return g.format=a.CSV,g};o.exports=c},6656:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14977),x=e(23029),c=function(u,h){for(var s=[],l=0;l<u.layer.length;l++){for(var v=u.layer[l],d=new a({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),g=[],y=[],S=0;S<v.data.length;S++){for(var T=0;T<v.data[S].length;T++){var w=v.data[S][T]-1,P;w>-1?P=new x(d,w,T,S,v.tilesize,v.tilesize):P=h?null:new x(d,-1,T,S,v.tilesize,v.tilesize),g.push(P)}y.push(g),g=[]}d.data=y,s.push(d)}return s};o.exports=c},96483:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=function(c){for(var u=[],h=[],s=0;s<c.layer.length;s++){var l=c.layer[s],v=l.tilesetName;v!==""&&h.indexOf(v)===-1&&(h.push(v),u.push(new a(v,0,l.tilesize,l.tilesize,0,0)))}return u};o.exports=x},87021:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(87010),c=e(6656),u=e(96483),h=function(s,l,v){if(l.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+s),null;for(var d=0,g=0,y=0;y<l.layer.length;y++)l.layer[y].width>d&&(d=l.layer[y].width),l.layer[y].height>g&&(g=l.layer[y].height);var S=new x({width:d,height:g,name:s,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:a.WELTMEISTER});return S.layers=c(l,v),S.tilesets=u(l),S};o.exports=h},52833:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}},57442:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}},51233:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=function(c){for(var u,h,s,l,v,d=0;d<c.layers.length;d++){u=c.layers[d],l=null;for(var g=0;g<u.data.length;g++){v=u.data[g];for(var y=0;y<v.length;y++)h=v[y],!(h===null||h.index<0)&&(s=c.tiles[h.index][2],l=c.tilesets[s],h.width=l.tileWidth,h.height=l.tileHeight,l.tileProperties&&l.tileProperties[h.index-l.firstgid]&&(h.properties=a(h.properties,l.tileProperties[h.index-l.firstgid])))}}};o.exports=x},41868:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=window.atob(e),x=a.length,c=new Array(x/4),u=0;u<x;u+=4)c[u/4]=(a.charCodeAt(u)|a.charCodeAt(u+1)<<8|a.charCodeAt(u+2)<<16|a.charCodeAt(u+3)<<24)>>>0;return c};o.exports=E},84101:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=function(c){var u,h,s=[];for(u=0;u<c.imageCollections.length;u++)for(var l=c.imageCollections[u],v=l.images,d=0;d<v.length;d++){var g=v[d];h=new a(g.image,g.gid,l.imageWidth,l.imageHeight,0,0),h.updateTileData(l.imageWidth,l.imageHeight),c.tilesets.push(h)}for(u=0;u<c.tilesets.length;u++){h=c.tilesets[u];for(var y=h.tileMargin,S=h.tileMargin,T=0,w=0,P=0,A=h.firstgid;A<h.firstgid+h.total&&(s[A]=[y,S,u],y+=h.tileWidth+h.tileSpacing,T++,!(T===h.total||(w++,w===h.columns&&(y=h.tileMargin,S+=h.tileHeight+h.tileSpacing,w=0,P++,P===h.rows))));A++);}return s};o.exports=x},79677:(o,E,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(c,u,h){if(!u)return{i:0,layers:c.layers,name:"",opacity:1,visible:!0,x:0,y:0};var s=u.x+a(u,"startx",0)*c.tilewidth+a(u,"offsetx",0),l=u.y+a(u,"starty",0)*c.tileheight+a(u,"offsety",0);return{i:0,layers:u.layers,name:h.name+u.name+"/",opacity:h.opacity*u.opacity,visible:h.visible&&u.visible,x:h.x+s,y:h.y+l}};o.exports=x},29920:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=2147483648,e=1073741824,a=536870912,x=function(c){var u=!!(c&E),h=!!(c&e),s=!!(c&a);c=c&536870911;var l=0,v=!1;return u&&h&&s?(l=Math.PI/2,v=!0):u&&h&&!s?(l=Math.PI,v=!1):u&&!h&&s?(l=Math.PI/2,v=!1):u&&!h&&!s?(l=0,v=!0):!u&&h&&s?(l=3*Math.PI/2,v=!1):!u&&h&&!s?(l=Math.PI,v=!0):!u&&!h&&s?(l=3*Math.PI/2,v=!0):!u&&!h&&!s&&(l=0,v=!1),{gid:c,flippedHorizontal:u,flippedVertical:h,flippedAntiDiagonal:s,rotation:l,flipped:v}};o.exports=x},12635:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(79677),c=function(u){for(var h=[],s=[],l=x(u);l.i<l.layers.length||s.length>0;){if(l.i>=l.layers.length){if(s.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=s.pop();continue}var v=l.layers[l.i];if(l.i++,v.type!=="imagelayer"){if(v.type==="group"){var d=x(u,v,l);s.push(l),l=d}continue}var g=a(v,"offsetx",0)+a(v,"startx",0),y=a(v,"offsety",0)+a(v,"starty",0);h.push({name:l.name+v.name,image:v.image,x:l.x+g+v.x,y:l.y+y+v.y,alpha:l.opacity*v.opacity,visible:l.visible&&v.visible,properties:a(v,"properties",{})})}return h};o.exports=c},46594:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51233),x=e(84101),c=e(91907),u=e(62644),h=e(80341),s=e(6641),l=e(87010),v=e(12635),d=e(22611),g=e(28200),y=e(24619),S=function(T,w,P){var A=u(w),R=new l({width:A.width,height:A.height,name:T,tileWidth:A.tilewidth,tileHeight:A.tileheight,orientation:s(A.orientation),format:h.TILED_JSON,version:A.version,properties:A.properties,renderOrder:A.renderorder,infinite:A.infinite});R.orientation===c.HEXAGONAL&&(R.hexSideLength=A.hexsidelength,R.staggerAxis=A.staggeraxis,R.staggerIndex=A.staggerindex),R.layers=g(A,P),R.images=v(A);var I=y(A);return R.tilesets=I.tilesets,R.imageCollections=I.imageCollections,R.objects=d(A),R.tiles=x(R),a(R),R};o.exports=S},52205:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18254),x=e(29920),c=function(s){return{x:s.x,y:s.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(s,l,v){l===void 0&&(l=0),v===void 0&&(v=0);var d=a(s,u);if(d.x+=l,d.y+=v,s.gid){var g=x(s.gid);d.gid=g.gid,d.flippedHorizontal=g.flippedHorizontal,d.flippedVertical=g.flippedVertical,d.flippedAntiDiagonal=g.flippedAntiDiagonal}else s.polyline?d.polyline=s.polyline.map(c):s.polygon?d.polygon=s.polygon.map(c):s.ellipse?d.ellipse=s.ellipse:s.text?d.text=s.text:s.point?d.point=!0:d.rectangle=!0;return d};o.exports=h},22611:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(52205),c=e(48700),u=e(79677),h=function(s){for(var l=[],v=[],d=u(s);d.i<d.layers.length||v.length>0;){if(d.i>=d.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=v.pop();continue}var g=d.layers[d.i];if(d.i++,g.opacity*=d.opacity,g.visible=d.visible&&g.visible,g.type!=="objectgroup"){if(g.type==="group"){var y=u(s,g,d);v.push(d),d=y}continue}g.name=d.name+g.name;for(var S=d.x+a(g,"startx",0)+a(g,"offsetx",0),T=d.y+a(g,"starty",0)+a(g,"offsety",0),w=[],P=0;P<g.objects.length;P++){var A=x(g.objects[P],S,T);w.push(A)}var R=new c(g);R.objects=w,l.push(R)}return l};o.exports=h},28200:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41868),x=e(91907),c=e(79677),u=e(6641),h=e(95540),s=e(14977),l=e(29920),v=e(23029),d=function(g,y){for(var S=h(g,"infinite",!1),T=[],w=[],P=c(g);P.i<P.layers.length||w.length>0;){if(P.i>=P.layers.length){if(w.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}P=w.pop();continue}var A=P.layers[P.i];if(P.i++,A.type!=="tilelayer"){if(A.type==="group"){var R=c(g,A,P);w.push(P),P=R}continue}if(A.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+A.name+"'");continue}else if(A.encoding&&A.encoding==="base64"){if(A.chunks)for(var I=0;I<A.chunks.length;I++)A.chunks[I].data=a(A.chunks[I].data);A.data&&(A.data=a(A.data)),delete A.encoding}var M,L,N,G,D=[],B=0;if(S){var $=h(A,"startx",0)+A.x,k=h(A,"starty",0)+A.y;M=new s({name:P.name+A.name,id:A.id,x:P.x+h(A,"offsetx",0)+$*g.tilewidth,y:P.y+h(A,"offsety",0)+k*g.tileheight,width:A.width,height:A.height,tileWidth:g.tilewidth,tileHeight:g.tileheight,alpha:P.opacity*A.opacity,visible:P.visible&&A.visible,properties:h(A,"properties",[]),orientation:u(g.orientation)}),M.orientation===x.HEXAGONAL&&(M.hexSideLength=g.hexsidelength,M.staggerAxis=g.staggeraxis,M.staggerIndex=g.staggerindex);for(var X=0;X<A.height;X++){D[X]=[null];for(var Y=0;Y<A.width;Y++)D[X][Y]=null}for(X=0,se=A.chunks.length;X<se;X++)for(var Z=A.chunks[X],Q=Z.x-$,j=Z.y-k,K=0,W=0,V=Z.data.length;W<V;W++){var J=B+Q,ee=K+j;L=l(Z.data[W]),L.gid>0?(N=new v(M,L.gid,J,ee,g.tilewidth,g.tileheight),N.rotation=L.rotation,N.flipX=L.flipped,D[ee][J]=N):(G=y?null:new v(M,-1,J,ee,g.tilewidth,g.tileheight),D[ee][J]=G),B++,B===Z.width&&(K++,B=0)}}else{M=new s({name:P.name+A.name,id:A.id,x:P.x+h(A,"offsetx",0)+A.x,y:P.y+h(A,"offsety",0)+A.y,width:A.width,height:A.height,tileWidth:g.tilewidth,tileHeight:g.tileheight,alpha:P.opacity*A.opacity,visible:P.visible&&A.visible,properties:h(A,"properties",[]),orientation:u(g.orientation)}),M.orientation===x.HEXAGONAL&&(M.hexSideLength=g.hexsidelength,M.staggerAxis=g.staggeraxis,M.staggerIndex=g.staggerindex);for(var te=[],ne=0,se=A.data.length;ne<se;ne++)L=l(A.data[ne]),L.gid>0?(N=new v(M,L.gid,B,D.length,g.tilewidth,g.tileheight),N.rotation=L.rotation,N.flipX=L.flipped,te.push(N)):(G=y?null:new v(M,-1,B,D.length,g.tilewidth,g.tileheight),te.push(G)),B++,B===A.width&&(D.push(te),B=0,te=[])}M.data=D,T.push(M)}return T};o.exports=d},24619:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=e(16536),c=e(52205),u=e(57880),h=function(s){for(var l=[],v=[],d=null,g,y=0;y<s.tilesets.length;y++){var S=s.tilesets[y];if(S.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(S.image){var T=new a(S.name,S.firstgid,S.tilewidth,S.tileheight,S.margin,S.spacing,void 0,void 0,S.tileoffset);if(s.version>1){var w=void 0,P=void 0;if(Array.isArray(S.tiles)){w=w||{},P=P||{};for(var A=0;A<S.tiles.length;A++){var R=S.tiles[A];if(R.properties){var I={};R.properties.forEach(function(X){I[X.name]=X.value}),P[R.id]=I}if(R.objectgroup&&((w[R.id]||(w[R.id]={})).objectgroup=R.objectgroup,R.objectgroup.objects)){var M=R.objectgroup.objects.map(function(X){return c(X)});w[R.id].objectgroup.objects=M}R.animation&&((w[R.id]||(w[R.id]={})).animation=R.animation),R.type&&((w[R.id]||(w[R.id]={})).type=R.type)}}Array.isArray(S.wangsets)&&(w=w||{},P=P||{},u(S.wangsets,w)),w&&(T.tileData=w,T.tileProperties=P)}else if(S.tileproperties&&(T.tileProperties=S.tileproperties),S.tiles){T.tileData=S.tiles;for(g in T.tileData){var L=T.tileData[g].objectgroup;if(L&&L.objects){var N=L.objects.map(function(X){return c(X)});T.tileData[g].objectgroup.objects=N}}}T.updateTileData(S.imagewidth,S.imageheight),l.push(T)}else{var G=new x(S.name,S.firstgid,S.tilewidth,S.tileheight,S.margin,S.spacing,S.properties),D=0;for(A=0;A<S.tiles.length;A++){R=S.tiles[A];var B=R.image,$=parseInt(R.id,10),k=S.firstgid+$;G.addImage(k,B),D=Math.max($,D)}G.maxId=D,v.push(G)}d&&(d.lastgid=S.firstgid-1),d=S}return{tilesets:l,imageCollections:v}};o.exports=h},57880:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<e.length;x++){var c=e[x],u=x;if(c.name&&c.name!==""&&(u=c.name),Array.isArray(c.wangtiles)&&c.wangtiles.length>0){var h={},s={},l,v,d;if(Array.isArray(c.edgecolors))for(l=0;l<c.edgecolors.length;l++)d=1+l,v=c.edgecolors[l],v.name!==""&&(h[d]=v.name);if(Array.isArray(c.cornercolors))for(l=0;l<c.cornercolors.length;l++)d=1+l,v=c.cornercolors[l],v.name!==""&&(s[d]=v.name);if(Array.isArray(c.colors))for(l=0;l<c.colors.length;l++)v=c.colors[l],d=1+l,v.name!==""&&(h[d]=s[d]=v.name);for(var g=[h,s,h,s,h,s,h,s],y=0;y<c.wangtiles.length;y++){var S=c.wangtiles[y],T=a[S.tileid]||(a[S.tileid]={});T=T.wangid||(T.wangid={});for(var w=[],P=0;P<Math.min(g.length,S.wangid.length);P++){if(v=S.wangid[P],v===0){w.push(void 0);continue}var A=g[P][v];if(A!==void 0){w.push(A);continue}w.push(v)}T[u]=w}}}};o.exports=E},96761:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}},33385:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),c=e(44594),u=e(94880),h=e(72905),s=new a({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var l=this.systems.events;l.on(c.PRE_UPDATE,this.preUpdate,this),l.on(c.UPDATE,this.update,this),l.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(l){var v;return l instanceof u?(v=l,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new u(l),this._pendingInsertion.push(v),v},delayedCall:function(l,v,d,g){return this.addEvent({delay:l,callback:v,args:d,callbackScope:g})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(l){Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++){var d=l[v];h(this._pendingRemoval,d),h(this._pendingInsertion,d),h(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var l=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(l===0&&v===0)){var d,g;for(d=0;d<l;d++){g=this._pendingRemoval[d];var y=this._active.indexOf(g);y>-1&&this._active.splice(y,1),g.destroy()}for(d=0;d<v;d++)g=this._pendingInsertion[d],this._active.push(g);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(l,v){if(this.now=l,!this.paused){v*=this.timeScale;for(var d=0;d<this._active.length;d++){var g=this._active[d];if(!g.paused&&(g.elapsed+=v*g.timeScale,g.elapsed>=g.delay)){var y=g.elapsed-g.delay;if(g.elapsed=g.delay,!g.hasDispatched&&g.callback&&(g.hasDispatched=!0,g.callback.apply(g.callbackScope,g.args)),g.repeatCount>0){if(g.repeatCount--,y>=g.delay)for(;y>=g.delay&&g.repeatCount>0;)g.callback&&g.callback.apply(g.callbackScope,g.args),y-=g.delay,g.repeatCount--;g.elapsed=y,g.hasDispatched=!1}else g.hasDispatched&&this._pendingRemoval.push(g)}}}},shutdown:function(){var l;for(l=0;l<this._pendingInsertion.length;l++)this._pendingInsertion[l].destroy();for(l=0;l<this._active.length;l++)this._active[l].destroy();for(l=0;l<this._pendingRemoval.length;l++)this._pendingRemoval[l].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(c.PRE_UPDATE,this.preUpdate,this),v.off(c.UPDATE,this.update,this),v.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",s,"time"),o.exports=s},96120:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(39429),u=e(95540),h=e(44594),s=e(89809),l=new a({Extends:x,initialize:function(d,g){x.call(this),this.scene=d,this.systems=d.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var y=this.systems.events;y.on(h.PRE_UPDATE,this.preUpdate,this),y.on(h.UPDATE,this.update,this),y.once(h.SHUTDOWN,this.destroy,this),g&&this.add(g)},preUpdate:function(v,d){this.paused||(this.elapsed+=d*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var v,d=this.events,g=!1,y=this.systems,S;for(v=0;v<d.length;v++){var T=d[v];if(!T.complete&&T.time<=this.elapsed){if(T.complete=!0,this.totalComplete++,S=T.target?T.target:this,T.if&&!T.if.call(S,T))continue;if(T.once&&(g=!0),T.set&&T.target)for(var w in T.set)T.target[w]=T.set[w];this.iteration&&T.repeat++,T.loop&&T.repeat&&T.loop.call(S),T.tween&&(T.tweenInstance=y.tweens.add(T.tween)),T.sound&&(typeof T.sound=="string"?y.sound.play(T.sound):y.sound.play(T.sound.key,T.sound.config)),T.event&&this.emit(T.event,S),T.run&&T.run.call(S),T.stop&&this.stop()}}if(g)for(v=0;v<d.length;v++)d[v].complete&&d[v].once&&(d.splice(v,1),v--);this.totalComplete>=d.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(s.COMPLETE,this)}},play:function(v){return v===void 0&&(v=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,v&&this.reset(),this},pause:function(){this.paused=!0;for(var v=this.events,d=0;d<v.length;d++){var g=v[d];g.tweenInstance&&(g.tweenInstance.paused=!0)}return this},repeat:function(v){return(v===void 0||v===!0)&&(v=-1),v===!1&&(v=0),this.loop=v,this},resume:function(){this.paused=!1;for(var v=this.events,d=0;d<v.length;d++){var g=v[d];g.tweenInstance&&(g.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(v){v===void 0&&(v=!1),this.elapsed=0,v||(this.iteration=0);for(var d=this.events,g=0;g<d.length;g++){var y=d[g];y.complete=!1,v||(y.repeat=0),y.tweenInstance&&y.tweenInstance.stop()}return this.play(!1)},add:function(v){Array.isArray(v)||(v=[v]);var d=this.events,g=0;d.length>0&&(g=d[d.length-1].time);for(var y=0;y<v.length;y++){var S=v[y],T=u(S,"at",0),w=u(S,"in",null);w!==null&&(T=this.elapsed+w);var P=u(S,"from",null);P!==null&&(T=g+P),d.push({complete:!1,time:T,repeat:0,if:u(S,"if",null),run:u(S,"run",null),loop:u(S,"loop",null),event:u(S,"event",null),target:u(S,"target",null),set:u(S,"set",null),tween:u(S,"tween",null),sound:u(S,"sound",null),once:u(S,"once",!1),stop:u(S,"stop",!1)}),g=T}return this.complete=!1,this},clear:function(){for(var v=this.events,d=0;d<v.length;d++){var g=v[d];g.tweenInstance&&g.tweenInstance.stop()}return v=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var v=Math.min(this.totalComplete,this.events.length);return v/this.events.length},destroy:function(){var v=this.systems.events;v.off(h.PRE_UPDATE,this.preUpdate,this),v.off(h.UPDATE,this.update,this),v.off(h.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});c.register("timeline",function(v){return new l(this.scene,v)}),o.exports=l},94880:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),c=new a({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(u){if(this.delay=x(u,"delay",0),this.repeat=x(u,"repeat",0),this.loop=x(u,"loop",!1),this.callback=x(u,"callback",void 0),this.callbackScope=x(u,"callbackScope",this),this.args=x(u,"args",[]),this.timeScale=x(u,"timeScale",1),this.startAt=x(u,"startAt",0),this.paused=x(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/u}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});o.exports=c},35945:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},89809:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(35945)}},90291:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}},40382:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(83419),c=e(43491),u=e(88032),h=e(37277),s=e(44594),l=e(93109),v=e(86081),d=e(8357),g=e(43960),y=e(26012),S=new x({initialize:function(w){this.scene=w,this.events=w.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(s.UPDATE,this.update,this),this.events.once(s.SHUTDOWN,this.shutdown,this)},create:function(T){Array.isArray(T)||(T=[T]);for(var w=[],P=0;P<T.length;P++){var A=T[P];A instanceof v||A instanceof g?w.push(A):Array.isArray(A.tweens)?w.push(y(this,A)):w.push(d(this,A))}return w.length===1?w[0]:w},add:function(T){var w=T,P=this.tweens;return w instanceof v||w instanceof g||(Array.isArray(w.tweens)?w=y(this,w):w=d(this,w)),P.push(w.reset()),w},addMultiple:function(T){for(var w,P=[],A=this.tweens,R=0;R<T.length;R++)w=T[R],w instanceof v||w instanceof g||(Array.isArray(w.tweens)?w=y(this,w):w=d(this,w)),A.push(w.reset()),P.push(w);return P},chain:function(T){var w=y(this,T);return this.tweens.push(w.init()),w},getChainedTweens:function(T){return T.getChainedTweens()},has:function(T){return this.tweens.indexOf(T)>-1},existing:function(T){return this.has(T)||this.tweens.push(T.reset()),this},addCounter:function(T){var w=u(this,T);return this.tweens.push(w.reset()),w},stagger:function(T,w){return l(T,w)},setLagSmooth:function(T,w){return T===void 0&&(T=1/1e-8),w===void 0&&(w=0),this.maxLag=T,this.lagSkip=Math.min(w,this.maxLag),this},setFps:function(T){return T===void 0&&(T=240),this.gap=1e3/T,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(T){var w=Date.now()-this.prevTime;w>this.maxLag&&(this.startTime+=w-this.lagSkip),this.prevTime+=w;var P=this.prevTime-this.startTime,A=P-this.nextTime,R=P-this.time*1e3;return A>0||T?(P/=1e3,this.time=P,this.nextTime+=A+(A>=this.gap?4:this.gap-A)):R=0,R},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(T){T===void 0&&(T=!1);var w=this.getDelta(T);if(!(w<=0)){this.processing=!0;var P,A,R=[],I=this.tweens;for(P=0;P<I.length;P++)A=I[P],A.update(w)&&R.push(A);var M=R.length;if(M&&I.length>0){for(P=0;P<M;P++){A=R[P];var L=I.indexOf(A);L>-1&&(A.isPendingRemove()||A.isDestroyed())&&(I.splice(L,1),A.destroy())}R.length=0}this.processing=!1}},remove:function(T){return this.processing?T.setPendingRemoveState():(a(this.tweens,T),T.setRemovedState()),this},reset:function(T){return this.existing(T),T.seek(),T.setActiveState(),this},makeActive:function(T){return this.existing(T),T.setActiveState(),this},each:function(T,w){var P,A=[null];for(P=1;P<arguments.length;P++)A.push(arguments[P]);return this.tweens.forEach(function(R){A[0]=R,T.apply(w,A)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(T){var w=[],P=this.tweens;Array.isArray(T)?T=c(T):T=[T];for(var A=T.length,R=0;R<P.length;R++)for(var I=P[R],M=0;M<A;M++)!I.isDestroyed()&&I.hasTarget(T[M])&&w.push(I);return w},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(T){return this.timeScale=T,this},isTweening:function(T){for(var w=this.tweens,P,A=0;A<w.length;A++)if(P=w[A],P.isPlaying()&&P.hasTarget(T))return!0;return!1},killAll:function(){for(var T=this.processing?this.getTweens():this.tweens,w=0;w<T.length;w++)T[w].destroy();return this.processing||(T.length=0),this},killTweensOf:function(T){for(var w=this.getTweensOf(T),P=0;P<w.length;P++)w[P].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(s.UPDATE,this.update,this),this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",S,"tweens"),o.exports=S},57355:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e&&e.hasOwnProperty(a)?e[a]:x};o.exports=E},6113:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62640),x=e(35355),c=function(u,h){var s=a.Power0;if(typeof u=="string")if(a.hasOwnProperty(u))s=a[u];else{var l="";if(u.indexOf(".")){l=u.substring(u.indexOf(".")+1);var v=l.toLowerCase();v==="in"?l="easeIn":v==="out"?l="easeOut":v==="inout"&&(l="easeInOut")}u=x(u.substring(0,u.indexOf(".")+1)+l),a.hasOwnProperty(u)&&(s=a[u])}else typeof u=="function"&&(s=u);if(!h)return s;var d=h.slice(0);return d.unshift(0),function(g){return d[0]=g,s.apply(this,d)}};o.exports=c},91389:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89318),x=e(77259),c=e(28392),u={bezier:a,catmull:x,catmullrom:x,linear:c},h=function(s){if(s===null)return null;var l=u.linear;return typeof s=="string"?u.hasOwnProperty(s)&&(l=u[s]):typeof s=="function"&&(l=s),l};o.exports=h},55292:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c;if(e.hasOwnProperty(a)){var u=typeof e[a];u==="function"?c=function(h,s,l,v,d,g){return e[a](h,s,l,v,d,g)}:c=function(){return e[a]}}else typeof x=="function"?c=x:c=function(){return x};return c};o.exports=E},82985:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81076),x=function(c){var u,h=[];if(c.hasOwnProperty("props"))for(u in c.props)u.substring(0,1)!=="_"&&h.push({key:u,value:c.props[u]});else for(u in c)a.indexOf(u)===-1&&u.substring(0,1)!=="_"&&h.push({key:u,value:c[u]});return h};o.exports=x},62329:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=function(c){var u=a(c,"targets",null);return u===null||(typeof u=="function"&&(u=u.call()),Array.isArray(u)||(u=[u])),u};o.exports=x},17777:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(99472);function c(v){return!!v.getActive&&typeof v.getActive=="function"}function u(v){return!!v.getStart&&typeof v.getStart=="function"}function h(v){return!!v.getEnd&&typeof v.getEnd=="function"}function s(v){return u(v)||h(v)||c(v)}var l=function(v,d){var g,y=function(Z,Q,j){return j},S=function(Z,Q,j){return j},T=null,w=typeof d;if(w==="number")y=function(){return d};else if(Array.isArray(d))S=function(){return d[0]},y=function(){return d[d.length-1]};else if(w==="string"){var P=d.toLowerCase(),A=P.substring(0,6)==="random",R=P.substring(0,3)==="int";if(A||R){var I=P.indexOf("("),M=P.indexOf(")"),L=P.indexOf(",");if(I&&M&&L){var N=parseFloat(P.substring(I+1,L)),G=parseFloat(P.substring(L+1,M));A?y=function(){return x(N,G)}:y=function(){return a(N,G)}}else throw new Error("invalid random() format")}else{P=P[0];var D=parseFloat(d.substr(2));switch(P){case"+":y=function(Z,Q,j){return j+D};break;case"-":y=function(Z,Q,j){return j-D};break;case"*":y=function(Z,Q,j){return j*D};break;case"/":y=function(Z,Q,j){return j/D};break;default:y=function(){return parseFloat(d)}}}}else if(w==="function")y=d;else if(w==="object")if(s(d))c(d)&&(T=d.getActive),h(d)&&(y=d.getEnd),u(d)&&(S=d.getStart);else if(d.hasOwnProperty("value"))g=l(v,d.value);else{var B=d.hasOwnProperty("to"),$=d.hasOwnProperty("from"),k=d.hasOwnProperty("start");if(B&&($||k)){if(g=l(v,d.to),k){var X=l(v,d.start);g.getActive=X.getEnd}if($){var Y=l(v,d.from);g.getStart=Y.getEnd}}}return g||(g={getActive:T,getEnd:y,getStart:S}),g};o.exports=l},88032:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(69902),c=e(23568),u=e(57355),h=e(6113),s=e(55292),l=e(35154),v=e(17777),d=e(269),g=e(86081),y=function(S,T,w){if(T instanceof g)return T.parent=S,T;w===void 0?w=x:w=d(x,w);var P=l(T,"from",0),A=l(T,"to",1),R=[{value:P}],I=l(T,"delay",w.delay),M=l(T,"easeParams",w.easeParams),L=l(T,"ease",w.ease),N=v("value",A),G=new g(S,R),D=G.add(0,"value",N.getEnd,N.getStart,N.getActive,h(l(T,"ease",L),l(T,"easeParams",M)),s(T,"delay",I),l(T,"duration",w.duration),u(T,"yoyo",w.yoyo),l(T,"hold",w.hold),l(T,"repeat",w.repeat),l(T,"repeatDelay",w.repeatDelay),!1,!1);D.start=P,D.current=P,G.completeDelay=c(T,"completeDelay",0),G.loop=Math.round(c(T,"loop",0)),G.loopDelay=Math.round(c(T,"loopDelay",0)),G.paused=u(T,"paused",!1),G.persist=u(T,"persist",!1),G.callbackScope=l(T,"callbackScope",G);for(var B=a.TYPES,$=0;$<B.length;$++){var k=B[$],X=l(T,k,!1);if(X){var Y=l(T,k+"Params",[]);G.setCallback(k,X,Y)}}return G};o.exports=y},93109:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6113),x=e(35154),c=e(36383),u=function(h,s){s===void 0&&(s={});var l,v=x(s,"start",0),d=x(s,"ease",null),g=x(s,"grid",null),y=x(s,"from",0),S=y==="first",T=y==="center",w=y==="last",P=typeof y=="number",A=Array.isArray(h),R=parseFloat(A?h[0]:h),I=A?parseFloat(h[1]):0,M=Math.max(R,I);if(A&&(v+=R),g){var L=g[0],N=g[1],G=0,D=0,B=0,$=0,k=[];w?(G=L-1,D=N-1):P?(G=y%L,D=Math.floor(y/L)):T&&(G=(L-1)/2,D=(N-1)/2);for(var X=c.MIN_SAFE_INTEGER,Y=0;Y<N;Y++){k[Y]=[];for(var Z=0;Z<L;Z++){B=G-Z,$=D-Y;var Q=Math.sqrt(B*B+$*$);Q>X&&(X=Q),k[Y][Z]=Q}}}var j=d?a(d):null;return g?l=function(K,W,V,J){var ee=0,te=J%L,ne=Math.floor(J/L);te>=0&&te<L&&ne>=0&&ne<N&&(ee=k[ne][te]);var se;if(A){var ae=I-R;j?se=ee/X*ae*j(ee/X):se=ee/X*ae}else j?se=ee*R*j(ee/X):se=ee*R;return se+v}:l=function(K,W,V,J,ee){ee--;var te;S?te=J:T?te=Math.abs(ee/2-J):w?te=ee-J:P&&(te=Math.abs(y-J));var ne;if(A){var se;T?se=(I-R)/ee*(te*2):se=(I-R)/ee*te,j?ne=se*j(te/ee):ne=se}else j?ne=ee*M*j(te/ee):ne=te*R;return ne+v},l};o.exports=u},8357:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(69902),c=e(23568),u=e(57355),h=e(6113),s=e(91389),l=e(55292),v=e(82985),d=e(62329),g=e(35154),y=e(17777),S=e(269),T=e(86081),w=function(P,A,R){if(A instanceof T)return A.parent=P,A;R===void 0?R=x:R=S(x,R);var I=d(A);!I&&R.targets&&(I=R.targets);for(var M=v(A),L=g(A,"delay",R.delay),N=g(A,"duration",R.duration),G=g(A,"easeParams",R.easeParams),D=g(A,"ease",R.ease),B=g(A,"hold",R.hold),$=g(A,"repeat",R.repeat),k=g(A,"repeatDelay",R.repeatDelay),X=u(A,"yoyo",R.yoyo),Y=u(A,"flipX",R.flipX),Z=u(A,"flipY",R.flipY),Q=g(A,"interpolation",R.interpolation),j=function(de,fe,ye,ve){if(ye==="texture"){var Se=ve,Ie=void 0;Array.isArray(ve)?(Se=ve[0],Ie=ve[1]):ve.hasOwnProperty("value")?(Se=ve.value,Array.isArray(ve.value)?(Se=ve.value[0],Ie=ve.value[1]):typeof ve.value=="string"&&(Se=ve.value)):typeof ve=="string"&&(Se=ve),de.addFrame(fe,Se,Ie,l(ve,"delay",L),g(ve,"duration",N),g(ve,"hold",B),g(ve,"repeat",$),g(ve,"repeatDelay",k),u(ve,"flipX",Y),u(ve,"flipY",Z))}else{var Ae=y(ye,ve),Oe=s(g(ve,"interpolation",Q));de.add(fe,ye,Ae.getEnd,Ae.getStart,Ae.getActive,h(g(ve,"ease",D),g(ve,"easeParams",G)),l(ve,"delay",L),g(ve,"duration",N),u(ve,"yoyo",X),g(ve,"hold",B),g(ve,"repeat",$),g(ve,"repeatDelay",k),u(ve,"flipX",Y),u(ve,"flipY",Z),Oe,Oe?ve:null)}},K=new T(P,I),W=0;W<M.length;W++)for(var V=M[W].key,J=M[W].value,ee=0;ee<I.length;ee++)V==="scale"&&!I[ee].hasOwnProperty("scale")?(j(K,ee,"scaleX",J),j(K,ee,"scaleY",J)):j(K,ee,V,J);K.completeDelay=c(A,"completeDelay",0),K.loop=Math.round(c(A,"loop",0)),K.loopDelay=Math.round(c(A,"loopDelay",0)),K.paused=u(A,"paused",!1),K.persist=u(A,"persist",!1),K.callbackScope=g(A,"callbackScope",K);for(var te=a.TYPES,ne=0;ne<te.length;ne++){var se=te[ne],ae=g(A,se,!1);if(ae){var ue=g(A,se+"Params",[]);K.setCallback(se,ae,ue)}}return K};o.exports=w},26012:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(23568),c=e(57355),u=e(62329),h=e(35154),s=e(8357),l=e(43960),v=function(d,g){if(g instanceof l)return g.parent=d,g;var y=new l(d);y.startDelay=h(g,"delay",0),y.completeDelay=x(g,"completeDelay",0),y.loop=Math.round(x(g,"loop",h(g,"repeat",0))),y.loopDelay=Math.round(x(g,"loopDelay",h(g,"repeatDelay",0))),y.paused=c(g,"paused",!1),y.persist=c(g,"persist",!1),y.callbackScope=h(g,"callbackScope",y);var S,T=a.TYPES;for(S=0;S<T.length;S++){var w=T[S],P=h(g,w,!1);if(P){var A=h(g,w+"Params",[]);y.setCallback(w,P,A)}}var R=h(g,"tweens",null);if(Array.isArray(R)){var I=[],M=u(g),L=void 0;for(M&&(L={targets:M}),S=0;S<R.length;S++)I.push(s(y,R[S],L));y.add(I)}return y};o.exports=v},30231:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}},73685:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="active"},98540:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},67233:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},2859:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},98336:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="repeat"},25764:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},32193:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},84371:o=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},70766:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},55659:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="yoyo"},842:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}},43066:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};o.exports=a},70402:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),c=e(842),u=e(86353),h=new a({Extends:x,initialize:function(l){x.call(this),this.parent=l,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(s){return this.timeScale=s,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(c.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(c.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(c.TWEEN_COMPLETE,"onComplete")},complete:function(s){return s===void 0&&(s=0),s?(this.setCompleteDelayState(),this.countdown=s):this.onCompleteHandler(),this},completeAfterLoop:function(s){return s===void 0&&(s=0),this.loopCounter>s&&(this.loopCounter=s),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(c.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(s){this.countdown-=s,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(s){return this.countdown-=s,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(c.TWEEN_START,"onStart"),s=0),s},updateCompleteDelay:function(s){this.countdown-=s,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(s,l,v){return v===void 0&&(v=[]),this.callbacks.hasOwnProperty(s)&&(this.callbacks[s]={func:l,params:v}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(s){s.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],o.exports=h},95042:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(842),c=e(86353),u=new a({initialize:function(s,l,v,d,g,y,S,T,w,P){this.tween=s,this.targetIndex=l,this.duration=d,this.totalDuration=0,this.delay=0,this.getDelay=v,this.yoyo=g,this.hold=y,this.repeat=S,this.repeatDelay=T,this.repeatCounter=0,this.flipX=w,this.flipY=P,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=c.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=c.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=c.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=c.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=c.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=c.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=c.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=c.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===c.CREATED},isDelayed:function(){return this.state===c.DELAY},isPendingRender:function(){return this.state===c.PENDING_RENDER},isPlayingForward:function(){return this.state===c.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===c.PLAYING_BACKWARD},isHolding:function(){return this.state===c.HOLD_DELAY},isRepeating:function(){return this.state===c.REPEAT_DELAY},isComplete:function(){return this.state===c.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,s=h.totalTargets,l=this.targetIndex,v=h.targets[l],d=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(v,d,0,l,s,h),this.repeatCounter=this.repeat===-1?c.MAX:this.repeat,this.setPendingRenderState();var g=this.duration+this.hold;this.yoyo&&(g+=this.duration);var y=g+this.repeatDelay;this.totalDuration=this.delay+g,this.repeat===-1?(this.totalDuration+=y*c.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=y*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,s,l){var v=this.tween,d=v.totalTargets,g=this.targetIndex,y=v.targets[g],S=this.key,T=S!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&y.toggleFlipX(),this.flipY&&y.toggleFlipY(),T&&(s||l)&&(this.start=this.getStartValue(y,S,this.start,g,d,v)),l){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,T&&(this.end=this.getEndValue(y,S,this.start,g,d,v)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,T&&(this.current=this.start,y[S]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});o.exports=u},69902:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};o.exports=E},81076:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(83419),c=e(842),u=e(44603),h=e(39429),s=e(36383),l=e(86353),v=e(48177),d=e(42220),g=new x({Extends:a,initialize:function(S,T){a.call(this,S),this.targets=T,this.totalTargets=T.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k){var X=new v(this,y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k);return this.totalData=this.data.push(X),X},addFrame:function(y,S,T,w,P,A,R,I,M,L){var N=new d(this,y,S,T,w,P,A,R,I,M,L);return this.totalData=this.data.push(N),N},getValue:function(y){y===void 0&&(y=0);var S=null;return this.data&&(S=this.data[y].current),S},hasTarget:function(y){return this.targets&&this.targets.indexOf(y)!==-1},updateTo:function(y,S,T){if(T===void 0&&(T=!1),y!=="texture")for(var w=0;w<this.totalData;w++){var P=this.data[w];P.key===y&&(P.isPlayingForward()||P.isPlayingBackward())&&(P.end=S,T&&(P.start=P.current))}return this},restart:function(){switch(this.state){case l.REMOVED:case l.FINISHED:this.seek(),this.parent.makeActive(this);break;case l.PENDING:case l.PENDING_REMOVE:this.parent.reset(this);break;case l.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(y,S,T){if(y===void 0&&(y=0),S===void 0&&(S=16.6),T===void 0&&(T=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;T||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive");var w=this.paused;if(this.paused=!1,y>0){for(var P=Math.floor(y/S),A=y-P*S,R=0;R<P;R++)this.update(S);A>0&&this.update(A)}return this.paused=w,this.isSeeking=!1,this},initTweenData:function(y){y===void 0&&(y=!1),this.duration=0,this.startDelay=s.MAX_SAFE_INTEGER;for(var S=this.data,T=0;T<this.totalData;T++)S[T].reset(y);this.duration=Math.max(this.duration,.01);var w=this.duration,P=this.completeDelay,A=this.loopCounter,R=this.loopDelay;A>0?this.totalDuration=w+P+(w+R)*A:this.totalDuration=w+P},reset:function(y){return y===void 0&&(y=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=l.MAX),y||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")),this},update:function(y){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(y*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(y),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(y),!1;this.hasStarted||(this.startDelay-=y,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(c.TWEEN_START,"onStart"),y=0));var S=!1;if(this.isActive())for(var T=this.data,w=0;w<this.totalData;w++)T[w].update(y)&&(S=!0);this.elapsed+=y,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=y,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),S||this.nextState();var P=this.isPendingRemove();return P&&this.persist&&(this.setFinishedState(),P=!1),P},forward:function(y){return this.update(y),this},rewind:function(y){return this.update(-y),this},dispatchEvent:function(y,S){if(!this.isSeeking){this.emit(y,this,this.targets);var T=this.callbacks[S];T&&T.func.apply(this.callbackScope,[this,this.targets].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(y){return this.scene.sys.tweens.add(y)}),u.register("tween",function(y){return this.scene.sys.tweens.create(y)}),o.exports=g},43960:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(70402),c=e(83419),u=e(842),h=e(44603),s=e(39429),l=e(86353),v=new c({Extends:x,initialize:function(g){x.call(this,g),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?l.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(d){var g=this.parent.create(d);Array.isArray(g)||(g=[g]);for(var y=this.data,S=0;S<g.length;S++){var T=g[S];T.parent=this,y.push(T.reset())}return this.totalData=y.length,this},remove:function(d){return a(this.data,d),d.setRemovedState(),d===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(d){for(var g=this.data,y=0;y<this.totalData;y++)if(g[y].hasTarget(d))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(d){return d.seek(),d.setActiveState(),this},makeActive:function(d){return d.reset(),d.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var d=this.data,g=this.totalData,y=0;y<g;y++)d[y].reset(!1);this.setCurrentTween(0)},update:function(d){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;d*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(d):this.isCompleteDelayed()?this.updateCompleteDelay(d):this.isStartDelayed()&&(d=this.updateStartCountdown(d));var g=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(d)&&this.nextTween()&&this.nextState(),g=this.isPendingRemove(),g&&this.persist&&(this.setFinishedState(),g=!1)),g},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(d){this.currentIndex=d,this.currentTween=this.data[d],this.currentTween.setActiveState()},dispatchEvent:function(d,g){this.emit(d,this);var y=this.callbacks[g];y&&y.func.apply(this.callbackScope,[this].concat(y.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});s.register("tweenchain",function(d){return this.scene.sys.tweens.chain(d)}),h.register("tweenchain",function(d){return this.scene.sys.tweens.create(d)}),o.exports=v},48177:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),x=e(45319),c=e(83419),u=e(842),h=new c({Extends:a,initialize:function(l,v,d,g,y,S,T,w,P,A,R,I,M,L,N,G,D){a.call(this,l,v,w,P,A,R,I,M,L,N),this.key=d,this.getActiveValue=S,this.getEndValue=g,this.getStartValue=y,this.ease=T,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=G,this.interpolationData=D},reset:function(s){a.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex],v=this.key;s&&(l[v]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(l[v]=this.getActiveValue(l,v,0))},update:function(s){var l=this.tween,v=l.totalTargets,d=this.targetIndex,g=l.targets[d],y=this.key;if(!g)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=s,this.elapsed<=0&&(this.elapsed=0,s=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(g,y,g[y],d,v,l),this.end=this.getEndValue(g,y,this.start,d,v,l),this.current=this.start,g[y]=this.start,this.setPlayingForwardState(),!0;var S=this.isPlayingForward(),T=this.isPlayingBackward();if(S||T){var w=this.elapsed,P=this.duration,A=0,R=!1;w+=s,w>=P?(A=w-P,w=P,R=!0):w<0&&(w=0);var I=x(w/P,0,1);this.elapsed=w,this.progress=I,this.previous=this.current,S||(I=1-I);var M=this.ease(I);this.interpolation?this.current=this.interpolation(this.interpolationData,M):this.current=this.start+(this.end-this.start)*M,g[y]=this.current,R&&(S?this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(A):this.setStateFromStart(A)),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(s,l){var v=this.tween;if(!v.isSeeking){var d=v.targets[this.targetIndex],g=this.key,y=this.current,S=this.previous;v.emit(s,v,g,d,y,S);var T=v.callbacks[l];T&&T.func.apply(v.callbackScope,[v,d,g,y,S].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});o.exports=h},42220:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),x=e(45319),c=e(83419),u=e(842),h=new c({Extends:a,initialize:function(l,v,d,g,y,S,T,w,P,A,R){a.call(this,l,v,y,S,!1,T,w,P,A,R),this.key="texture",this.startTexture=null,this.endTexture=d,this.startFrame=null,this.endFrame=g,this.yoyo=w!==0},reset:function(s){a.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=l.texture.key,this.startFrame=l.frame.name),s&&l.setTexture(this.startTexture,this.startFrame)},update:function(s){var l=this.tween,v=this.targetIndex,d=l.targets[v];if(!d)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=s,this.elapsed<=0&&(this.elapsed=0,s=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&d.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var g=this.isPlayingForward(),y=this.isPlayingBackward();if(g||y){var S=this.elapsed,T=this.duration,w=0,P=!1;S+=s,S>=T?(w=S-T,S=T,P=!0):S<0&&(S=0);var A=x(S/T,0,1);this.elapsed=S,this.progress=A,P&&(g?(d.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(w)):(d.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(w))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(s,l){var v=this.tween;if(!v.isSeeking){var d=v.targets[this.targetIndex],g=this.key;v.emit(s,v,g,d);var y=v.callbacks[l];y&&y.func.apply(v.callbackScope,[v,d,g].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});o.exports=h},86353:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};o.exports=E},83419:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function e(h,s,l){var v=l?h[s]:Object.getOwnPropertyDescriptor(h,s);return!l&&v.value&&typeof v.value=="object"&&(v=v.value),v&&E(v)?(typeof v.enumerable>"u"&&(v.enumerable=!0),typeof v.configurable>"u"&&(v.configurable=!0),v):!1}function a(h,s){var l=Object.getOwnPropertyDescriptor(h,s);return l?(l.value&&typeof l.value=="object"&&(l=l.value),l.configurable===!1):!1}function x(h,s,l,v){for(var d in s)if(s.hasOwnProperty(d)){var g=e(s,d,l);if(g!==!1){var y=v||h;if(a(y.prototype,d)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+d+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,d,g)}else h.prototype[d]=s[d]}}function c(h,s){if(s){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)x(h,s[l].prototype||s[l])}}function u(h){h||(h={});var s,l;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");s=h.initialize,delete h.initialize}else if(h.Extends){var v=h.Extends;s=function(){v.apply(this,arguments)}}else s=function(){};h.Extends?(s.prototype=Object.create(h.Extends.prototype),s.prototype.constructor=s,l=h.Extends,delete h.Extends):s.prototype.constructor=s;var d=null;return h.Mixins&&(d=h.Mixins,delete h.Mixins),c(s,d),x(s,h,!0,l),s}u.extend=x,u.mixin=c,u.ignoreFinals=!1,o.exports=u},29747:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E},20242:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return null};o.exports=E},71146:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u){if(u===void 0&&(u=e),x>0){var h=x-e.length;if(h<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.push(a),c&&c.call(u,a),a):null;for(var s=a.length-1;s>=0;)e.indexOf(a[s])!==-1&&a.splice(s,1),s--;if(s=a.length,s===0)return null;x>0&&s>h&&(a.splice(h),s=h);for(var l=0;l<s;l++){var v=a[l];e.push(v),c&&c.call(u,v)}return a};o.exports=E},51067:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c,u,h){if(x===void 0&&(x=0),h===void 0&&(h=e),c>0){var s=c-e.length;if(s<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.splice(x,0,a),u&&u.call(h,a),a):null;for(var l=a.length-1;l>=0;)e.indexOf(a[l])!==-1&&a.pop(),l--;if(l=a.length,l===0)return null;c>0&&l>s&&(a.splice(s),l=s);for(var v=l-1;v>=0;v--){var d=a[v];e.splice(x,0,d),u&&u.call(h,d)}return a};o.exports=E},66905:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);return x!==-1&&x<e.length&&(e.splice(x,1),e.push(a)),a};o.exports=E},21612:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){s===void 0&&(s=0),l===void 0&&(l=c.length);var v=0;if(a(c,s,l))for(var d=s;d<l;d++){var g=c[d];g[u]===h&&v++}return v};o.exports=x},95428:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c,u=[null];for(c=3;c<arguments.length;c++)u.push(arguments[c]);for(c=0;c<e.length;c++)u[0]=e[c],a.apply(x,u);return e};o.exports=E},36914:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){if(s===void 0&&(s=0),l===void 0&&(l=c.length),a(c,s,l)){var v,d=[null];for(v=5;v<arguments.length;v++)d.push(arguments[v]);for(v=s;v<l;v++)d[0]=c[v],u.apply(h,d)}return c};o.exports=x},81957:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a.length){if(a.length===1)return a[0]}else return NaN;var c=1,u,h;if(x){if(e<a[0][x])return a[0];for(;a[c][x]<e;)c++}else for(;a[c]<e;)c++;return c>a.length&&(c=a.length),x?(u=a[c-1][x],h=a[c][x],h-e<=e-u?a[c]:a[c-1]):(u=a[c-1],h=a[c],h-e<=e-u?h:u)};o.exports=E},43491:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=[]);for(var x=0;x<e.length;x++)Array.isArray(e[x])?E(e[x],a):a.push(e[x]);return a};o.exports=E},46710:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){s===void 0&&(s=0),l===void 0&&(l=c.length);var v=[];if(a(c,s,l))for(var d=s;d<l;d++){var g=c[d];(!u||u&&h===void 0&&g.hasOwnProperty(u)||u&&h!==void 0&&g[u]===h)&&v.push(g)}return v};o.exports=x},58731:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){if(s===void 0&&(s=0),l===void 0&&(l=c.length),a(c,s,l))for(var v=s;v<l;v++){var d=c[v];if(!u||u&&h===void 0&&d.hasOwnProperty(u)||u&&h!==void 0&&d[u]===h)return d}return null};o.exports=x},26546:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=e.length);var c=a+Math.floor(Math.random()*x);return e[c]===void 0?null:e[c]};o.exports=E},85835:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var c=e.indexOf(a),u=e.indexOf(x);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return c>u||(e.splice(c,1),u=e.indexOf(x),e.splice(u+1,0,a)),e};o.exports=E},83371:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var c=e.indexOf(a),u=e.indexOf(x);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return c<u||(e.splice(c,1),u===0?e.unshift(a):e.splice(u,0,a)),e};o.exports=E},70864:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);if(x>0){var c=e[x-1],u=e.indexOf(c);e[x]=c,e[u]=a}return e};o.exports=E},69693:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=e.indexOf(a);if(c===-1||x<0||x>=e.length)throw new Error("Supplied index out of bounds");return c!==x&&(e.splice(c,1),e.splice(x,0,a)),a};o.exports=E},40853:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);if(x!==-1&&x<e.length-1){var c=e[x+1],u=e.indexOf(c);e[x]=c,e[u]=a}return e};o.exports=E},20283:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=[],h,s=!1;if((x||c)&&(s=!0,x||(x=""),c||(c="")),a<e)for(h=e;h>=a;h--)s?u.push(x+h.toString()+c):u.push(h);else for(h=e;h<=a;h++)s?u.push(x+h.toString()+c):u.push(h);return u};o.exports=E},593:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2284),x=function(c,u,h){c===void 0&&(c=0),u===void 0&&(u=null),h===void 0&&(h=1),u===null&&(u=c,c=0);for(var s=[],l=Math.max(a((u-c)/(h||1)),0),v=0;v<l;v++)s.push(c),c+=h;return s};o.exports=x},43886:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(x,c,u){var h=x[c];x[c]=x[u],x[u]=h}function e(x,c){return x<c?-1:x>c?1:0}var a=function(x,c,u,h,s){for(u===void 0&&(u=0),h===void 0&&(h=x.length-1),s===void 0&&(s=e);h>u;){if(h-u>600){var l=h-u+1,v=c-u+1,d=Math.log(l),g=.5*Math.exp(2*d/3),y=.5*Math.sqrt(d*g*(l-g)/l)*(v-l/2<0?-1:1),S=Math.max(u,Math.floor(c-v*g/l+y)),T=Math.min(h,Math.floor(c+(l-v)*g/l+y));a(x,c,S,T,s)}var w=x[c],P=u,A=h;for(E(x,u,c),s(x[h],w)>0&&E(x,u,h);P<A;){for(E(x,P,A),P++,A--;s(x[P],w)<0;)P++;for(;s(x[A],w)>0;)A--}s(x[u],w)===0?E(x,u,A):(A++,E(x,A,h)),A<=c&&(u=A+1),c<=A&&(h=A-1)}};o.exports=a},88492:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=e(33680),c=function(h,s,l){for(var v=[],d=0;d<h.length;d++)for(var g=0;g<s.length;g++)for(var y=0;y<l;y++)v.push({a:h[d],b:s[g]});return v},u=function(h,s,l){var v=a(l,"max",0),d=a(l,"qty",1),g=a(l,"random",!1),y=a(l,"randomB",!1),S=a(l,"repeat",0),T=a(l,"yoyo",!1),w=[];if(y&&x(s),S===-1)if(v===0)S=0;else{var P=h.length*s.length*d;T&&(P*=2),S=Math.ceil(v/P)}for(var A=0;A<=S;A++){var R=c(h,s,d);g&&x(R),w=w.concat(R),T&&(R.reverse(),w=w.concat(R))}return v&&w.splice(v),w};o.exports=u},72905:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(c,u,h,s){s===void 0&&(s=c);var l;if(!Array.isArray(u))return l=c.indexOf(u),l!==-1?(a(c,l),h&&h.call(s,u),u):null;for(var v=u.length-1,d=[];v>=0;){var g=u[v];l=c.indexOf(g),l!==-1&&(a(c,l),d.push(g),h&&h.call(s,g)),v--}return d};o.exports=x},60248:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(c,u,h,s){if(s===void 0&&(s=c),u<0||u>c.length-1)throw new Error("Index out of bounds");var l=a(c,u);return h&&h.call(s,l),l};o.exports=x},81409:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){if(u===void 0&&(u=0),h===void 0&&(h=c.length),l===void 0&&(l=c),a(c,u,h)){var v=h-u,d=c.splice(u,v);if(s)for(var g=0;g<d.length;g++){var y=d[g];s.call(l,y)}return d}else return[]};o.exports=x},31856:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(c,u,h){u===void 0&&(u=0),h===void 0&&(h=c.length);var s=u+Math.floor(Math.random()*h);return a(c,s)};o.exports=x},42169:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=e.indexOf(a),u=e.indexOf(x);return c!==-1&&u===-1?(e[c]=x,!0):!1};o.exports=E},86003:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);for(var x=null,c=0;c<a;c++)x=e.shift(),e.push(x);return x};o.exports=E},49498:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);for(var x=null,c=0;c<a;c++)x=e.pop(),e.unshift(x);return x};o.exports=E},82011:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){var u=e.length;if(a<0||a>u||a>=x||x>u){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};o.exports=E},89545:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);return x!==-1&&x>0&&(e.splice(x,1),e.unshift(a)),a};o.exports=E},17810:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(c,u,h,s,l){if(s===void 0&&(s=0),l===void 0&&(l=c.length),a(c,s,l))for(var v=s;v<l;v++){var d=c[v];d.hasOwnProperty(u)&&(d[u]=h)}return c};o.exports=x},33680:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=e.length-1;a>0;a--){var x=Math.floor(Math.random()*(a+1)),c=e[a];e[a]=e[x],e[x]=c}return e};o.exports=E},90126:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=/\D/g;return e.sort(function(x,c){return parseInt(x.replace(a,""),10)-parseInt(c.replace(a,""),10)}),e};o.exports=E},19133:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){if(!(a>=e.length)){for(var x=e.length-1,c=e[a],u=a;u<x;u++)e[u]=e[u+1];return e.length=x,c}};o.exports=E},19186:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82264);function x(s,l){return String(s).localeCompare(l)}function c(s,l){var v=s.length;if(v<=1)return s;for(var d=new Array(v),g=1;g<v;g*=2){u(s,l,g,d);var y=s;s=d,d=y}return s}function u(s,l,v,d){var g=s.length,y=0,S=v*2,T,w,P,A,R;for(T=0;T<g;T+=S)for(w=T+v,P=w+v,w>g&&(w=g),P>g&&(P=g),A=T,R=w;;)if(A<w&&R<P)l(s[A],s[R])<=0?d[y++]=s[A++]:d[y++]=s[R++];else if(A<w)d[y++]=s[A++];else if(R<P)d[y++]=s[R++];else break}var h=function(s,l){if(l===void 0&&(l=x),!s||s.length<2)return s;if(a.features.stableSort)return s.sort(l);var v=c(s,l);return v!==s&&u(v,null,s.length,s),s};o.exports=h},25630:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var c=e.indexOf(a),u=e.indexOf(x);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return e[c]=x,e[u]=a,e};o.exports=E},37105:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}},86922:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var a=e[0].length,x=1;x<e.length;x++)if(e[x].length!==a)return!1;return!0};o.exports=E},63362:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41836),x=e(86922),c=function(u){var h="";if(!x(u))return h;for(var s=0;s<u.length;s++){for(var l=0;l<u[s].length;l++){var v=u[s][l].toString();v!=="undefined"?h+=a(v,2):h+="?",l<u[s].length-1&&(h+=" |")}if(s<u.length-1){h+=`
`;for(var d=0;d<u[s].length;d++)h+="---",d<u[s].length-1&&(h+="+");h+=`
`}}return h};o.exports=c},92598:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.reverse()};o.exports=E},21224:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0;a<e.length;a++)e[a].reverse();return e};o.exports=E},98717:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(c){return a(c,180)};o.exports=x},44657:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(c,u){u===void 0&&(u=1);for(var h=0;h<u;h++)c=a(c,90);return c};o.exports=x},37829:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86922),x=e(2429),c=function(u,h){if(h===void 0&&(h=90),!a(u))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")u=x(u),u.reverse();else if(h===-90||h===270||h==="rotateRight")u.reverse(),u=x(u);else if(Math.abs(h)===180||h==="rotate180"){for(var s=0;s<u.length;s++)u[s].reverse();u.reverse()}return u};o.exports=c},92632:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(c,u){u===void 0&&(u=1);for(var h=0;h<u;h++)c=a(c,-90);return c};o.exports=x},69512:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86003),x=e(49498),c=function(u,h,s){if(h===void 0&&(h=0),s===void 0&&(s=0),s!==0&&(s<0?a(u,Math.abs(s)):x(u,s)),h!==0)for(var l=0;l<u.length;l++){var v=u[l];h<0?a(v,Math.abs(h)):x(v,h)}return u};o.exports=c},2429:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=e.length,x=e[0].length,c=new Array(x),u=0;u<x;u++){c[u]=new Array(a);for(var h=a-1;h>-1;h--)c[u][h]=e[h][u]}return c};o.exports=E},54915:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}},71334:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(a,x){for(var c=new Uint8Array(a),u=c.length,h=x?"data:"+x+";base64,":"",s=0;s<u;s+=3)h+=E[c[s]>>2],h+=E[(c[s]&3)<<4|c[s+1]>>4],h+=E[(c[s+1]&15)<<2|c[s+2]>>6],h+=E[c[s+2]&63];return u%3===2?h=h.substring(0,h.length-1)+"=":u%3===1&&(h=h.substring(0,h.length-2)+"=="),h};o.exports=e},53134:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),a=0;a<E.length;a++)e[E.charCodeAt(a)]=a;var x=function(c){c=c.substr(c.indexOf(",")+1);var u=c.length,h=u*.75,s=0,l,v,d,g;c[u-1]==="="&&(h--,c[u-2]==="="&&h--);for(var y=new ArrayBuffer(h),S=new Uint8Array(y),T=0;T<u;T+=4)l=e[c.charCodeAt(T)],v=e[c.charCodeAt(T+1)],d=e[c.charCodeAt(T+2)],g=e[c.charCodeAt(T+3)],S[s++]=l<<2|v>>4,S[s++]=(v&15)<<4|d>>2,S[s++]=(d&3)<<6|g&63;return y};o.exports=x},65839:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}},91799:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}},41786:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={};for(var x in e)Array.isArray(e[x])?a[x]=e[x].slice(0):a[x]=e[x];return a};o.exports=E},62644:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a,x,c;if(typeof e!="object"||e===null)return e;a=Array.isArray(e)?[]:{};for(c in e)x=e[c],a[c]=E(x);return a};o.exports=E},79291:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41212),x=function(){var c,u,h,s,l,v,d=arguments[0]||{},g=1,y=arguments.length,S=!1;for(typeof d=="boolean"&&(S=d,d=arguments[1]||{},g=2),y===g&&(d=this,--g);g<y;g++)if((c=arguments[g])!=null)for(u in c)h=d[u],s=c[u],d!==s&&(S&&s&&(a(s)||(l=Array.isArray(s)))?(l?(l=!1,v=h&&Array.isArray(h)?h:[]):v=h&&a(h)?h:{},d[u]=x(S,v,s)):s!==void 0&&(d[u]=s));return d};o.exports=x},23568:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75508),x=e(35154),c=function(u,h,s){var l=x(u,h,null);if(l===null)return s;if(Array.isArray(l))return a.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return a.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return a.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(h);return l};o.exports=c},95540:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var c=typeof e;return!e||c==="number"||c==="string"?x:e.hasOwnProperty(a)&&e[a]!==void 0?e[a]:x};o.exports=E},82840:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=e(45319),c=function(u,h,s,l,v){v===void 0&&(v=s);var d=a(u,h,v);return x(d,s,l)};o.exports=c},35154:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){if(!e&&!c||typeof e=="number")return x;if(e&&e.hasOwnProperty(a))return e[a];if(c&&c.hasOwnProperty(a))return c[a];if(a.indexOf(".")!==-1){for(var u=a.split("."),h=e,s=c,l=x,v=x,d=!0,g=!0,y=0;y<u.length;y++)h&&h.hasOwnProperty(u[y])?(l=h[u[y]],h=h[u[y]]):d=!1,s&&s.hasOwnProperty(u[y])?(v=s[u[y]],s=s[u[y]]):g=!1;return d?l:g?v:x}else return x};o.exports=E},69036:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<a.length;x++)if(!e.hasOwnProperty(a[x]))return!1;return!0};o.exports=E},1985:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<a.length;x++)if(e.hasOwnProperty(a[x]))return!0;return!1};o.exports=E},97022:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.hasOwnProperty(a)};o.exports=E},41212:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};o.exports=E},46975:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(c,u){var h=a(c);for(var s in u)h.hasOwnProperty(s)||(h[s]=u[s]);return h};o.exports=x},269:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(c,u){var h=a(c);for(var s in u)h.hasOwnProperty(s)&&(h[s]=u[s]);return h};o.exports=x},18254:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97022),x=function(c,u){for(var h={},s=0;s<u.length;s++){var l=u[s];a(c,l)&&(h[l]=c[l])}return h};o.exports=x},61622:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(a))return e[a]=x,!0;if(a.indexOf(".")!==-1){for(var c=a.split("."),u=e,h=e,s=0;s<c.length;s++)if(u.hasOwnProperty(c[s]))h=u,u=u[c[s]];else return!1;return h[c[c.length-1]]=x,!0}return!1};o.exports=E},1183:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}},27902:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.replace(/%([0-9]+)/g,function(x,c){return a[Number(c)-1]})};o.exports=E},41836:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,c){a===void 0&&(a=0),x===void 0&&(x=" "),c===void 0&&(c=3),e=e.toString();var u=0;if(a+1>=e.length)switch(c){case 1:e=new Array(a+1-e.length).join(x)+e;break;case 3:var h=Math.ceil((u=a-e.length)/2),s=u-h;e=new Array(s+1).join(x)+e+new Array(h+1).join(x);break;default:e=e+new Array(a+1-e.length).join(x);break}return e};o.exports=E},33628:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===0?e.slice(1):e.slice(0,a)+e.slice(a+1)};o.exports=E},27671:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.split("").reverse().join("")};o.exports=E},45650:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,x=e==="x"?a:a&3|8;return x.toString(16)})};o.exports=E},35355:o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e&&e[0].toUpperCase()+e.slice(1)};o.exports=E},31749:(o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}}},p={};function C(o){var E=p[o];if(E!==void 0)return E.exports;var e=p[o]={exports:{}};return n[o](e,e.exports,C),e.exports}C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var b=C(85454);return b})())}(phaser$1)),phaser$1.exports}var phaserExports=requirePhaser();const Phaser$1=getDefaultExportFromCjs(phaserExports),frames={"misa-back-walk.000":{frame:{x:97,y:1,w:32,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:23,w:32,h:41},sourceSize:{w:32,h:64}},"misa-back-walk.001":{frame:{x:97,y:44,w:32,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:23,w:32,h:41},sourceSize:{w:32,h:64}},"misa-back-walk.002":{frame:{x:131,y:1,w:32,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:23,w:32,h:41},sourceSize:{w:32,h:64}},"misa-back-walk.003":{frame:{x:97,y:44,w:32,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:23,w:32,h:41},sourceSize:{w:32,h:64}},"misa-back":{frame:{x:97,y:44,w:32,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:23,w:32,h:41},sourceSize:{w:32,h:64}},"misa-front-walk.000":{frame:{x:1,y:1,w:30,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:21,w:30,h:43},sourceSize:{w:32,h:64}},"misa-front-walk.001":{frame:{x:33,y:1,w:30,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:21,w:30,h:43},sourceSize:{w:32,h:64}},"misa-front-walk.002":{frame:{x:65,y:1,w:30,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:21,w:30,h:43},sourceSize:{w:32,h:64}},"misa-front-walk.003":{frame:{x:33,y:1,w:30,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:21,w:30,h:43},sourceSize:{w:32,h:64}},"misa-front":{frame:{x:33,y:1,w:30,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:21,w:30,h:43},sourceSize:{w:32,h:64}},"misa-left-walk.000":{frame:{x:1,y:46,w:30,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:25,w:30,h:39},sourceSize:{w:32,h:64}},"misa-left-walk.001":{frame:{x:131,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}},"misa-left-walk.002":{frame:{x:33,y:46,w:30,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:25,w:30,h:39},sourceSize:{w:32,h:64}},"misa-left-walk.003":{frame:{x:131,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}},"misa-left":{frame:{x:131,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}},"misa-right-walk.000":{frame:{x:65,y:46,w:30,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:25,w:30,h:39},sourceSize:{w:32,h:64}},"misa-right-walk.001":{frame:{x:163,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}},"misa-right-walk.002":{frame:{x:165,y:1,w:30,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:25,w:30,h:39},sourceSize:{w:32,h:64}},"misa-right-walk.003":{frame:{x:163,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}},"misa-right":{frame:{x:163,y:44,w:30,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:23,w:30,h:41},sourceSize:{w:32,h:64}}},meta={app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"atlas.png",format:"RGBA8888",size:{w:196,h:86},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:153aa30e8e4e7c6fb0cfe9ff6ead8419:0bf85290c274470ae6499145fc94b88b:cbce6b53f0f49e0bf15173c25c41f876$"},atlas$2={frames,meta},atlas$1="/vis-llm-game/assets/atlas-BopZdqsP.png",spaceman="/vis-llm-game/assets/spaceman-C7vz9RnM.png",logo192="/vis-llm-game/assets/logo192-CSD5kO07.png",coin_gold="/vis-llm-game/assets/coin_gold-BoHreTCz.png",BirdSprite="/vis-llm-game/assets/BirdSprite-B7WUpLxx.png",coinIcon="/vis-llm-game/assets/coinIcon-DOWebnAm.png",mailing="/vis-llm-game/assets/mailing-BjTgAlHX.png",idle="/vis-llm-game/assets/idle-Cy83PpuQ.png",working="/vis-llm-game/assets/working-sBaATBEg.png",report="/vis-llm-game/assets/report-B66N2tZc.png",hiring="/vis-llm-game/assets/hiring-CO5CBmM5.png",compressionlevel$1=-1,height$1=40,infinite$1=!1,layers$1=JSON.parse('[{"data":[126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,149,150,150,150,150,151,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,149,196,174,174,174,174,195,151,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,149,196,174,174,174,174,174,174,195,151,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,174,174,174,174,174,174,195,150,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,174,174,174,174,174,174,174,174,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,174,174,174,174,174,174,171,198,126,126,149,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,196,174,174,174,174,174,174,174,171,199,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,125,125,125,125,125,125,125,174,174,174,174,174,174,175,126,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,125,125,125,125,125,125,125,125,174,174,174,174,171,199,126,126,126,126,173,174,174,171,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,199,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,176,176,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,176,176,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,195,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,151,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,197,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,172,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,149,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,151,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,197,198,198,198,198,198,198,198,198,198,172,174,174,171,198,198,198,198,198,172,174,174,195,150,150,150,150,150,150,150,150,150,150,196,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,126,176,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,173,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,197,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,199,126,126,126,126,126,126,126,126,126,126,126,126,126,173,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,176,126,149,150,150,150,150,150,196,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,176,173,174,174,174,174,174,174,174,174,175,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,197,198,198,198,198,198,198,198,198,199,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,126],"height":40,"id":1,"name":"Below Player","opacity":1,"type":"tilelayer","visible":true,"width":40,"x":0,"y":0},{"data":[169,170,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,361,362,363,364,365,366,367,368,369,193,194,169,170,193,194,169,170,193,194,169,170,193,193,194,169,170,601,602,603,604,605,0,0,601,602,603,604,605,0,0,385,386,387,388,389,390,391,392,393,169,170,193,194,169,170,193,194,169,170,193,194,169,169,170,193,194,625,626,627,628,629,0,332,625,626,627,628,629,0,0,409,410,411,412,413,414,415,416,417,193,194,169,170,193,194,0,0,193,194,169,170,193,193,194,169,170,649,650,651,652,653,0,356,649,650,651,652,653,0,0,433,434,435,436,437,438,439,440,441,169,170,193,194,0,0,0,0,0,0,193,194,169,169,170,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,457,458,459,460,461,462,463,464,465,193,194,0,0,0,0,0,0,0,0,0,0,193,193,194,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,481,482,483,484,485,486,487,488,489,169,170,0,0,0,0,0,0,0,0,0,0,0,169,170,193,194,601,602,603,604,605,0,0,601,602,603,604,605,0,0,505,506,507,508,509,510,511,512,513,193,194,0,0,0,0,0,0,0,0,0,0,0,193,194,169,170,625,626,627,628,629,0,332,625,626,627,628,629,0,333,529,530,531,532,533,534,535,536,537,169,170,0,0,0,0,329,330,0,0,0,0,0,169,170,193,194,649,650,651,652,653,0,356,649,650,651,652,653,0,357,553,554,555,556,557,558,559,560,561,193,194,0,0,0,358,353,354,0,0,0,0,0,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,0,0,0,0,0,0,0,0,0,0,169,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,193,194,0,0,0,0,0,0,0,0,0,0,193,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,194,169,170,169,170,0,0,0,0,0,0,169,170,169,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,194,193,194,0,0,0,0,0,0,193,194,193,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,169,170,169,170,169,170,169,170,169,170,0,0,0,0,606,607,608,609,610,611,0,0,495,496,497,498,499,503,504,0,0,606,607,608,609,610,611,0,193,194,193,194,193,194,193,194,193,194,193,194,0,0,0,0,630,631,632,633,634,635,0,0,519,520,521,522,523,527,528,0,0,630,631,632,633,634,635,0,0,169,170,169,170,169,170,169,170,169,169,170,0,0,0,0,654,655,656,657,658,659,128,0,543,544,545,546,547,551,552,56,0,654,655,656,657,658,659,121,0,193,194,193,194,193,194,193,194,193,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,194,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,218,218,218,218,218,218,218,218,218,219,0,0,193,194,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,243,0,0,169,170,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,169,170,0,0,0,0,0,169,170,243,0,0,193,194,193,194,266,612,613,614,615,616,266,266,266,612,613,614,615,616,266,266,266,399,400,401,402,403,314,241,193,194,0,273,274,275,0,193,194,243,0,0,169,170,169,170,0,636,637,638,639,640,0,0,0,636,637,638,639,640,0,0,0,423,424,425,426,427,0,241,0,0,0,297,298,299,0,0,0,243,0,0,193,194,193,194,356,660,661,662,663,664,0,0,356,660,661,662,663,664,0,0,355,447,448,449,450,451,122,241,0,225,0,321,322,323,0,225,0,243,0,0,169,170,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,243,0,0,193,194,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,121,0,0,0,0,243,0,0,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,0,0,0,0,0,0,0,0,0,243,0,0,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,265,218,218,268,0,0,0,269,218,218,267,0,0,169,170,169,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,194,193,194,290,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,169,170,241,0,0,0,394,395,396,397,398,0,0,0,0,0,612,613,614,615,616,0,0,0,0,0,0,305,306,0,0,0,0,0,0,0,0,0,193,194,193,194,241,0,0,0,418,419,420,421,422,0,0,0,0,0,636,637,638,639,640,0,0,0,0,0,0,329,330,0,0,0,0,0,0,0,0,0,169,170,169,170,241,0,0,0,442,443,444,445,446,357,0,0,0,0,660,661,662,663,664,0,0,0,0,0,0,353,354,0,0,0,0,0,169,170,169,170,193,194,193,194,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,193,194,193,194,169,170,169,170,241,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,169,170,0,0,193,194,193,194,265,266,266,268,359,0,0,0,0,0,0,0,0,359,269,266,266,266,266,266,266,266,266,266,266,266,266,266,266,266,266,266,193,194,0,327,0,0,169,170,169,170,169,170,0,0,0,0,0,0,0,0,0,0,169,170,169,170,169,170,169,170,169,170,169,170,169,170,169,170,169,170,169,170,0,0,200,0,193,194,193,194,193,194,0,0,0,0,0,0,0,0,0,0,193,194,193,194,193,194,193,194,193,194,193,194,193,194,193,194,193,194,193,194,0,8,0,152],"height":40,"id":2,"name":"World","opacity":1,"type":"tilelayer","visible":true,"width":40,"x":0,"y":0},{"data":[0,0,0,0,577,578,579,580,581,0,0,577,578,579,580,581,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,332,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,577,578,579,580,581,0,0,577,578,579,580,581,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,305,306,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,332,0,0,0,0,0,0,333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,334,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,582,583,584,585,586,587,0,0,471,472,473,474,475,479,480,0,0,582,583,584,585,586,587,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,588,589,590,591,592,0,0,0,588,589,590,591,592,0,0,0,375,376,377,378,379,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,332,0,0,0,0,0,0,0,332,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,370,371,372,373,374,0,0,0,0,0,588,589,590,591,592,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,335,0,0,0,0,0,0,0,0,335,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":40,"id":3,"name":"Above Player","opacity":1,"type":"tilelayer","visible":true,"width":40,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Objects","objects":[{"height":28,"id":277,"name":"Sign","properties":[{"name":"text","type":"string","value":"Welcome to Phaser RPG!"}],"rotation":0,"type":"","visible":true,"width":24,"x":356,"y":1082},{"height":0,"id":275,"name":"Spawn Point","point":true,"rotation":0,"type":"","visible":true,"width":0,"x":352,"y":1216},{"height":84.5,"id":278,"name":"Task Spot","rotation":0,"type":"","visible":true,"width":50,"x":871,"y":1030.5}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}]'),nextlayerid$1=5,nextobjectid$1=279,orientation$1="orthogonal",properties=[{name:"edges",type:"string",value:"clamped"}],renderorder$1="right-down",tiledversion$1="1.11.2",tileheight$1=32,tilesets$1=JSON.parse('[{"columns":24,"firstgid":1,"grid":{"height":16,"orientation":"orthogonal","width":16},"image":"../tilesets/tuxemon-sample-32px-extruded.png","imageheight":1020,"imagewidth":816,"margin":1,"name":"tuxemon-sample-32px-extruded","spacing":2,"tilecount":720,"tileheight":32,"tiles":[{"id":0,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":1,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":2,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":3,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":4,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":5,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":6,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":7,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":8,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":9,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":10,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":11,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":12,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":13,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":14,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":15,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":16,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":17,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":18,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":19,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":20,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":21,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":22,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":23,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":24,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":25,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":26,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":27,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":28,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":29,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":30,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":31,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":32,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":33,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":34,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":35,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":36,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":37,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":38,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":39,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":40,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":41,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":42,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":43,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":44,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":45,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":46,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":47,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":48,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":49,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":50,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":51,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":52,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":53,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":54,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":55,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":56,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":57,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":58,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":59,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":60,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":61,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":62,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":63,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":64,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":65,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":66,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":67,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":68,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":69,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":70,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":71,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":72,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":73,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":74,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":75,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":76,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":77,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":78,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":79,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":80,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":81,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":82,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":83,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":84,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":85,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":86,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":87,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":88,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":89,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":90,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":91,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":92,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":93,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":94,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":95,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":96,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":97,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":98,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":99,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":100,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":101,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":102,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":103,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":104,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":105,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":106,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":107,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":108,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":109,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":110,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":111,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":112,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":113,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":114,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":115,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":116,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":117,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":118,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":119,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":120,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":121,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":122,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":123,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":124,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":125,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":126,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":127,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":128,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":129,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":130,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":131,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":132,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":133,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":134,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":135,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":136,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":137,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":138,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":139,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":140,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":141,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":142,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":143,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":144,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":145,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":146,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":147,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":148,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":149,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":150,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":151,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":152,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":153,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":154,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":155,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":156,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":157,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":158,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":159,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":160,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":161,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":162,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":163,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":164,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":165,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":166,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":167,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":168,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":169,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":170,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":171,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":172,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":173,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":174,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":175,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":176,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":177,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":178,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":179,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":180,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":181,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":182,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":183,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":184,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":185,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":186,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":187,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":188,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":189,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":190,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":191,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":192,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":193,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":194,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":195,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":196,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":197,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":198,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":199,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":200,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":201,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":202,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":203,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":204,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":205,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":206,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":207,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":208,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":209,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":210,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":211,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":212,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":213,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":214,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":215,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":216,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":217,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":218,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":219,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":220,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":221,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":222,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":223,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":224,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":225,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":226,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":227,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":228,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":229,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":230,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":231,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":232,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":233,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":234,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":235,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":236,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":237,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":238,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":239,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":240,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":241,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":242,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":243,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":244,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":245,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":246,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":247,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":248,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":249,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":250,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":251,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":252,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":253,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":254,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":255,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":256,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":257,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":258,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":259,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":260,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":261,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":262,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":263,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":264,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":265,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":266,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":267,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":268,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":269,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":270,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":271,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":272,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":273,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":274,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":275,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":276,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":277,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":278,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":279,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":280,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":281,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":282,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":283,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":284,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":285,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":286,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":287,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":288,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":289,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":290,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":291,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":292,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":293,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":294,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":295,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":296,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":297,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":298,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":299,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":300,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":301,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":302,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":303,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":304,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":305,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":306,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":307,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":308,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":309,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":310,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":311,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":312,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":313,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":314,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":315,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":316,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":317,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":318,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":319,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":320,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":321,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":322,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":323,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":324,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":325,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":326,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":327,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":328,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":329,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":330,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":331,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":332,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":333,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":334,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":335,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":336,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":337,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":338,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":339,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":340,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":341,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":342,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":343,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":344,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":345,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":346,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":347,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":348,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":349,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":350,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":351,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":352,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":353,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":354,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":355,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":356,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":357,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":358,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":359,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":360,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":361,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":362,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":363,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":364,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":365,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":366,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":367,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":368,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":369,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":370,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":371,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":372,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":373,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":374,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":375,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":376,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":377,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":378,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":379,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":380,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":381,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":382,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":383,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":384,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":385,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":386,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":387,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":388,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":389,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":390,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":391,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":392,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":393,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":394,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":395,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":396,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":397,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":398,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":399,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":400,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":401,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":402,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":403,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":404,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":405,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":406,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":407,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":408,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":409,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":410,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":411,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":412,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":413,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":414,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":415,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":416,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":417,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":418,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":419,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":420,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":421,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":422,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":423,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":424,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":425,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":426,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":427,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":428,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":429,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":430,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":431,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":432,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":433,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":434,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":435,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":436,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":437,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":438,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":439,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":440,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":441,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":442,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":443,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":444,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":445,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":446,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":447,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":448,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":449,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":450,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":451,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":452,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":453,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":454,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":455,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":456,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":457,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":458,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":459,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":460,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":461,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":462,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":463,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":464,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":465,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":466,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":467,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":468,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":469,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":470,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":471,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":472,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":473,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":474,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":475,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":476,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":477,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":478,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":479,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":480,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":481,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":482,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":483,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":484,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":485,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":486,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":487,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":488,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":489,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":490,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":491,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":492,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":493,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":494,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":495,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":496,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":497,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":498,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":499,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":500,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":501,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":502,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":503,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":504,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":505,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":506,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":507,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":508,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":509,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":510,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":511,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":512,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":513,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":514,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":515,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":516,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":517,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":518,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":519,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":520,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":521,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":522,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":523,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":524,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":525,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":526,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":527,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":528,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":529,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":530,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":531,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":532,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":533,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":534,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":535,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":536,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":537,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":538,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":539,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":540,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":541,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":542,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":543,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":544,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":545,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":546,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":547,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":548,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":549,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":550,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":551,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":552,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":553,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":554,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":555,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":556,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":557,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":558,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":559,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":560,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":561,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":562,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":563,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":564,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":565,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":566,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":567,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":568,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":569,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":570,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":571,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":572,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":573,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":574,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":575,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":576,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":577,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":578,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":579,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":580,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":581,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":582,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":583,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":584,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":585,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":586,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":587,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":588,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":589,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":590,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":591,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":592,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":593,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":594,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":595,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":596,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":597,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":598,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":599,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":600,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":601,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":602,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":603,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":604,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":605,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":606,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":607,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":608,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":609,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":610,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":611,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":612,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":613,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":614,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":615,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":616,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":617,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":618,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":619,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":620,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":621,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":622,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":623,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":624,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":625,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":626,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":627,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":628,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":629,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":630,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":631,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":632,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":633,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":634,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":635,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":636,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":637,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":638,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":639,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":640,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":641,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":642,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":643,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":644,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":645,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":646,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":647,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":648,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":649,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":650,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":651,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":652,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":653,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":654,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":655,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":656,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":657,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":658,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":659,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":660,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":661,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":662,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":663,"properties":[{"name":"collides","type":"bool","value":true}]},{"id":664,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":665,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":666,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":667,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":668,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":669,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":670,"properties":[{"name":"collides","type":"bool","value":false}]},{"id":671,"properties":[{"name":"collides","type":"bool","value":false}]}],"tilewidth":32,"wangsets":[{"colors":[{"color":"#ff0000","name":"Path","probability":1,"tile":173},{"color":"#00ff00","name":"Grass","probability":1,"tile":125}],"name":"Terrains","tile":-1,"type":"corner","wangtiles":[{"tileid":125,"wangid":[0,2,0,2,0,2,0,2]},{"tileid":148,"wangid":[0,2,0,1,0,2,0,2]},{"tileid":149,"wangid":[0,2,0,1,0,1,0,2]},{"tileid":150,"wangid":[0,2,0,2,0,1,0,2]},{"tileid":170,"wangid":[0,1,0,2,0,1,0,1]},{"tileid":171,"wangid":[0,1,0,1,0,2,0,1]},{"tileid":172,"wangid":[0,1,0,1,0,2,0,2]},{"tileid":173,"wangid":[0,1,0,1,0,1,0,1]},{"tileid":174,"wangid":[0,2,0,2,0,1,0,1]},{"tileid":194,"wangid":[0,2,0,1,0,1,0,1]},{"tileid":195,"wangid":[0,1,0,1,0,1,0,2]},{"tileid":196,"wangid":[0,1,0,2,0,2,0,2]},{"tileid":197,"wangid":[0,1,0,2,0,2,0,1]},{"tileid":198,"wangid":[0,2,0,2,0,2,0,1]}]}]}]'),tilewidth$1=32,type$1="map",version$1="1.10",width$1=40,tuxemonTown={compressionlevel:compressionlevel$1,height:height$1,infinite:infinite$1,layers:layers$1,nextlayerid:nextlayerid$1,nextobjectid:nextobjectid$1,orientation:orientation$1,properties,renderorder:renderorder$1,tiledversion:tiledversion$1,tileheight:tileheight$1,tilesets:tilesets$1,tilewidth:tilewidth$1,type:type$1,version:version$1,width:width$1},compressionlevel=-1,height=40,infinite=!1,layers=JSON.parse('[{"data":[1434,1434,3185,3186,1434,7409,7410,7411,7412,7413,7414,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7585,7586,7587,7588,7589,7590,7591,7592,7593,7594,7595,7596,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7761,7762,7763,7764,7765,7766,7767,7768,7769,7770,7771,7772,1434,3185,3186,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7937,7938,7939,7940,7941,7942,7943,7944,7945,7946,7947,7948,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8113,8114,8115,8116,8117,8118,8119,8120,8121,8122,8123,8124,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8465,8466,8467,8468,8469,8470,8471,8472,8473,8474,8475,8476,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8641,8642,8643,8644,8645,8646,8647,8648,8649,8650,8651,8652,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8817,8818,8819,8820,8821,8822,8823,8824,8825,8826,8827,8828,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8993,8994,8995,8996,8997,8998,8999,9000,9001,9002,9003,9004,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,2835,2835,2833,2834,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,3011,3011,3009,3010,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,1434,1434,3185,3186,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,178,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,194,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,3185,3186,1434,1434,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,1434,1434,1434,3185,3186,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,2835,2835,3361,3362,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,2835,3011,3011,3537,3538,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,3011,1434,1434,3185,3186,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7057,7058,7059,7060,7061,7062,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,9345,9346,9347,9348,9349,9350,9351,9352,9353,9354,9355,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7233,7234,7235,7236,7237,7238,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7409,7410,7411,7412,7413,7414,7415,7416,7417,7418,7419,7420,1434,3185,3186,1434,9697,9698,9699,9700,9701,9702,9703,9704,9705,9706,1611,9708,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7585,7586,7587,7588,7589,7590,7591,7592,7593,7594,7595,7596,1434,3185,3186,1434,9873,9874,9875,9876,9877,9878,9879,9880,9881,9882,1611,9884,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7761,7762,7763,7764,7765,7766,7767,7768,7769,7770,7771,7772,1434,3185,3186,1434,10049,10050,10051,10052,10053,10054,10055,10056,10057,10058,1611,10060,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,7937,7938,7939,7940,7941,7942,7943,7944,7945,7946,7947,7948,1434,3185,3186,1434,10225,10226,10227,10228,10229,10230,10231,10232,10233,10234,1611,10236,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8113,8114,8115,8116,8117,8118,8119,8120,8121,8122,8123,8124,1434,3185,3186,1434,10401,10402,10403,10404,10405,10406,10407,10408,10409,10410,1611,10412,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,1434,3185,3186,1434,10577,10578,10579,10580,10581,10582,10583,10584,10585,10586,1611,10588,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8465,8466,8467,8468,8469,8470,8471,8472,8473,8474,8475,8476,1434,3185,3186,1434,10753,10754,1611,10756,1611,1611,10759,10760,10761,10762,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8641,8642,8643,8644,8645,8646,8647,8648,8649,8650,8651,8652,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,3185,3186,1434,8817,8818,8819,8820,8821,8822,8823,8824,8825,8826,8827,8828,1434,3185,3186,1434,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1611,1434,3188,3189,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434,1434],"height":40,"id":1,"name":"Below Player","opacity":1,"properties":[{"name":"collides","type":"bool","value":false}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,7415,7416,7417,7418,7419,7420,0,0,0,0,9169,9170,9171,9172,9173,9174,9175,9176,9177,9178,9179,9180,0,0,0,0,0,0,12783,12784,12785,12786,12787,12788,12789,12790,12791,12792,12783,12784,12785,12786,12787,12788,12789,12790,12791,12792,0,0,0,0,0,0,0,0,0,0,0,0,7591,7592,7593,7594,7595,7596,0,0,0,0,9345,9346,9347,9348,9349,9350,9351,9352,9353,9354,9355,9356,0,0,0,0,2136,2137,12959,12960,12961,12962,12963,12964,12965,12966,12967,12968,12959,12960,12961,12962,12963,12964,12965,12966,12967,12968,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,0,0,0,0,2312,2313,13135,13136,13137,13138,13139,13140,13141,13142,13143,13144,13135,13136,13137,13138,13139,13140,13141,13142,13143,13144,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9697,9698,9699,9700,9701,9702,9703,9704,9705,9706,9707,9708,0,0,0,0,2488,2489,13311,13312,13313,13314,13315,13316,13317,13318,13319,13320,13311,13312,13313,13314,13315,13316,13317,13318,13319,13320,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9873,9874,9875,9876,9877,9878,9879,9880,9881,9882,9883,9884,0,0,0,0,2664,2665,13487,13488,13489,13490,13491,13492,13493,13494,13495,13496,13487,13488,13489,13490,13491,13492,13493,13494,13495,13496,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10049,10050,10051,10052,10053,10054,10055,10056,10057,10058,10059,10060,0,0,0,0,0,0,13663,13664,13665,13666,13667,13668,13669,13670,13671,13672,13663,13664,13665,13666,13667,13668,13669,13670,13671,13672,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10225,10226,10227,10228,10229,10230,10231,10232,10233,10234,10235,10236,0,0,0,0,2136,2137,13839,13840,13841,13842,13843,13844,13845,13846,13847,13848,13839,13840,13841,13842,13843,13844,13845,13846,13847,13848,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10401,10402,10403,10404,10405,10406,10407,10408,10409,10410,10411,10412,0,0,0,0,2312,2313,0,0,0,0,2312,2313,0,0,0,0,2312,2313,0,0,0,2312,2313,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10577,10578,10579,10580,10581,10582,10583,10584,10585,10586,10587,10588,0,0,0,0,2488,2489,0,0,0,0,2488,2489,0,0,0,0,2488,2489,0,0,0,2488,2489,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,721,0,0,0,0,0,0,0,10753,10754,10755,10756,10757,10758,10759,10760,10761,10762,10763,10764,0,0,0,0,2664,2665,0,0,0,0,2664,2665,0,0,0,0,2664,2665,0,0,0,2664,2665,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10929,10930,10931,10932,10933,10934,10935,10936,10937,10938,10939,10940,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,177,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,0,0,0,0,0,0,193,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,680,681,682,0,0,0,0,0,40,680,681,682,0,0,0,0,40,641,642,643,644,0,0,0,641,642,643,644,40,0,0,0,0,0,40,0,0,0,0,0,0,0,0,0,0,919,920,0,0,0,0,0,0,0,769,770,0,0,0,40,696,697,698,0,0,0,0,0,40,696,697,698,0,0,0,0,40,657,658,659,660,0,0,0,657,658,659,660,40,0,0,0,0,0,40,0,0,0,0,0,0,0,0,0,0,949,0,0,0,290,291,292,0,0,0,804,0,0,0,40,178,179,0,0,0,177,178,178,178,178,179,0,0,0,177,178,40,673,674,675,676,0,0,0,673,674,675,676,40,0,680,681,682,0,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,306,307,308,0,0,0,0,0,0,0,40,194,195,0,0,0,193,194,194,194,194,195,0,0,0,193,194,40,0,0,0,0,0,0,0,0,0,0,0,40,0,696,697,698,0,40,0,0,0,0,0,0,0,0,0,0,930,931,0,0,322,323,324,0,0,786,787,0,0,0,40,477,0,0,0,0,709,710,711,709,710,711,0,0,0,0,913,40,0,0,0,641,642,643,644,0,0,0,0,40,12871,12872,12871,12872,0,40,0,0,0,0,0,0,0,0,0,0,946,947,0,0,0,0,0,0,0,802,803,0,0,0,40,493,0,0,0,0,725,726,727,725,726,727,0,0,0,0,929,40,0,0,0,657,658,659,660,0,0,0,0,40,13047,13048,13047,13048,0,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,509,0,0,0,0,0,0,0,0,0,0,0,0,0,0,945,40,0,0,0,673,674,675,676,0,0,0,0,40,13223,13224,13223,13224,0,40,0,0,0,0,0,0,177,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,178,0,0,0,0,0,0,193,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9169,9170,9171,9172,9173,9174,9175,9176,9177,9178,9179,9180,0,0,0,0,2136,2137,11541,11542,11543,11544,11545,11546,11547,11548,11549,11550,11541,11542,11543,11544,11545,11546,11547,11548,11549,11550,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9345,9346,9347,9348,9349,9350,9351,9352,9353,9354,9355,9356,0,0,0,0,2312,2313,11717,11718,11719,11720,11721,11722,11723,11724,11725,11726,11717,11718,11719,11720,11721,11722,11723,11724,11725,11726,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,0,0,0,0,2488,2489,11893,11894,11895,11896,11897,11898,11899,11900,11901,11902,11893,11894,11895,11896,11897,11898,11899,11900,11901,11902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9697,9698,9699,9700,9701,9702,9703,9704,9705,9706,9707,9708,0,0,0,0,2664,2665,12069,12070,12071,12072,12073,12074,12075,12076,12077,12078,12069,12070,12071,12072,12073,12074,12075,12076,12077,12078,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9873,9874,9875,9876,9877,9878,9879,9880,9881,9882,9883,9884,0,0,0,0,0,0,12245,12246,12247,12248,12249,12250,12251,12252,12253,12254,12245,12246,12247,12248,12249,12250,12251,12252,12253,12254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10049,10050,10051,10052,10053,10054,10055,10056,10057,10058,10059,10060,0,0,0,0,2136,2137,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10225,10226,10227,10228,10229,10230,10231,10232,10233,10234,10235,10236,0,0,0,0,2312,2313,12597,12598,12599,12600,12601,12602,12603,12604,12605,12606,12597,12598,12599,12600,12601,12602,12603,12604,12605,12606,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10401,10402,10403,10404,10405,10406,10407,10408,10409,10410,10411,10412,0,0,0,0,2488,2489,12773,12774,12775,12776,12777,12778,12779,12780,12781,12782,12773,12774,12775,12776,12777,12778,12779,12780,12781,12782,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10577,10578,10579,10580,10581,10582,10583,10584,10585,10586,10587,10588,0,0,0,0,2664,2665,12949,12950,12951,12952,12953,12954,12955,12956,12957,12958,12949,12950,12951,12952,12953,12954,12955,12956,12957,12958,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10753,10754,10755,10756,10757,10758,10759,10760,10761,10762,10763,10764,0,0,0,0,0,0,13125,13126,13127,13128,13129,13130,13131,13132,13133,13134,13125,13126,13127,13128,13129,13130,13131,13132,13133,13134,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10929,10930,10931,10932,10933,10934,10935,10936,10937,10938,10939,10940,0,0,0,0,0,0,13301,13302,13303,13304,13305,13306,13307,13308,13309,13310,13301,13302,13303,13304,13305,13306,13307,13308,13309,13310,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13477,13478,13479,13480,13481,13482,13483,13484,13485,13486,13477,13478,13479,13480,13481,13482,13483,13484,13485,13486,0],"height":40,"id":2,"name":"World","opacity":1,"properties":[{"name":"collides","type":"bool","value":true}],"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,0,0,0,0,0,71515,71516,71517,71518,71519,71520,71563,71564,71565,71566,0,0,24,0,394,395,0,0,424,425,343,24,0,394,395,0,424,425,343,24,343,424,425,394,395,0,394,395,424,425,343,24,0,0,0,0,0,24,0,0,0,0,0,0,42,343,841,842,477,0,71531,71532,71533,71534,71535,71536,71579,71580,71581,71582,0,343,40,0,410,411,0,0,440,441,359,40,0,410,411,0,440,441,359,40,359,440,441,410,411,0,410,411,440,441,359,40,12871,12872,12871,12872,0,40,0,0,0,0,0,0,42,359,857,858,493,0,71547,71548,71549,71550,71551,71552,71595,71596,71597,71598,0,359,0,747,748,749,0,0,456,457,375,0,747,748,749,0,456,457,375,0,375,456,457,0,0,0,0,0,456,457,375,0,13047,13048,13047,13048,11639,11640,0,0,0,0,0,0,42,375,873,874,467,0,0,0,71067,71068,0,0,0,0,467,0,0,375,0,763,764,354,0,0,0,0,0,0,763,764,354,0,0,0,0,0,0,430,431,432,0,0,0,0,430,431,432,0,13223,13224,13223,13224,0,0,0,0,0,0,0,0,42,0,0,0,0,0,0,0,71083,71084,0,0,0,0,0,0,0,0,0,343,343,370,0,0,0,0,412,413,0,0,370,0,0,343,343,0,0,0,353,0,0,0,0,0,0,353,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42,0,0,0,451,0,0,0,747,748,749,0,0,0,451,0,0,0,0,359,359,0,0,0,0,0,0,0,0,0,0,0,0,359,359,0,0,0,369,0,0,0,0,0,0,369,0,0,0,0,0,0,0,0,0,0,0,0,0,0,42,343,0,0,467,0,0,0,763,764,765,0,0,0,467,0,0,343,0,375,375,0,0,0,398,399,400,585,586,0,0,0,0,375,375,0,343,0,0,0,0,0,0,0,0,0,343,0,0,0,0,0,0,0,0,0,0,0,0,0,42,359,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,359,0,0,0,0,0,0,414,415,416,601,602,0,0,0,0,0,391,0,359,0,0,0,478,353,480,0,0,0,359,0,0,0,0,0,11463,11464,0,0,0,0,0,0,42,375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,407,0,375,0,0,0,494,369,496,0,0,0,375,0,0,0,0,0,11639,11640,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":40,"id":3,"name":"Above Player","opacity":1,"type":"tilelayer","visible":true,"width":60,"x":0,"y":0},{"draworder":"topdown","id":4,"name":"Objects","objects":[{"height":130.5,"id":12,"name":"voting","rotation":0,"type":"","visible":true,"width":286.5,"x":108,"y":238},{"height":49.5,"id":14,"name":"parallel","rotation":0,"type":"","visible":true,"width":124.5,"x":409.5,"y":241},{"height":54.5,"id":15,"name":"parallel","rotation":0,"type":"","visible":true,"width":126.5,"x":540.5,"y":233.5},{"height":132,"id":16,"name":"chaining","rotation":0,"type":"","visible":true,"width":251.5,"x":409,"y":238.5},{"height":138,"id":17,"name":"routing","rotation":0,"type":"","visible":true,"width":186,"x":670,"y":228},{"height":0,"id":18,"name":"","rotation":0,"type":"","visible":true,"width":0,"x":992,"y":304.5}],"offsetx":-1,"offsety":-2,"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0}]'),nextlayerid=5,nextobjectid=19,orientation="orthogonal",renderorder="right-down",tiledversion="1.11.2",tileheight=16,tilesets=[{columns:16,firstgid:1,image:"../../../../../../new/phaser-rpg/src/assets/tilesets/Room_Builder_Office_16x16.png",imageheight:224,imagewidth:256,margin:0,name:"Room_Builder_Office_16x16",spacing:0,tilecount:224,tileheight:16,tiles:[{id:1,properties:[{name:"collides",type:"bool",value:!0}]},{id:2,properties:[{name:"collides",type:"bool",value:!0}]},{id:3,properties:[{name:"collides",type:"bool",value:!0}]},{id:4,properties:[{name:"collides",type:"bool",value:!0}]},{id:5,properties:[{name:"collides",type:"bool",value:!0}]},{id:6,properties:[{name:"collides",type:"bool",value:!0}]},{id:17,properties:[{name:"collides",type:"bool",value:!0}]},{id:18,properties:[{name:"collides",type:"bool",value:!0}]},{id:19,properties:[{name:"collides",type:"bool",value:!0}]},{id:20,properties:[{name:"collides",type:"bool",value:!0}]},{id:21,properties:[{name:"collides",type:"bool",value:!0}]},{id:22,properties:[{name:"collides",type:"bool",value:!0}]},{id:23,properties:[{name:"collides",type:"bool",value:!0}]},{id:24,properties:[{name:"collides",type:"bool",value:!0}]},{id:25,properties:[{name:"collides",type:"bool",value:!0}]},{id:33,properties:[{name:"collides",type:"bool",value:!0}]},{id:34,properties:[{name:"collides",type:"bool",value:!0}]},{id:35,properties:[{name:"collides",type:"bool",value:!0}]},{id:36,properties:[{name:"collides",type:"bool",value:!0}]},{id:37,properties:[{name:"collides",type:"bool",value:!0}]},{id:38,properties:[{name:"collides",type:"bool",value:!0}]},{id:39,properties:[{name:"collides",type:"bool",value:!0}]},{id:40,properties:[{name:"collides",type:"bool",value:!0}]},{id:41,properties:[{name:"collides",type:"bool",value:!0}]},{id:49,properties:[{name:"collides",type:"bool",value:!0}]},{id:50,properties:[{name:"collides",type:"bool",value:!0}]},{id:51,properties:[{name:"collides",type:"bool",value:!0}]},{id:52,properties:[{name:"collides",type:"bool",value:!0}]},{id:53,properties:[{name:"collides",type:"bool",value:!0}]},{id:54,properties:[{name:"collides",type:"bool",value:!0}]},{id:55,properties:[{name:"collides",type:"bool",value:!0}]},{id:56,properties:[{name:"collides",type:"bool",value:!0}]},{id:57,properties:[{name:"collides",type:"bool",value:!0}]},{id:61,properties:[{name:"collides",type:"bool",value:!0}]},{id:176,properties:[{name:"collides",type:"bool",value:!0}]},{id:177,properties:[{name:"collides",type:"bool",value:!0}]},{id:178,properties:[{name:"collides",type:"bool",value:!0}]},{id:183,properties:[{name:"collides",type:"bool",value:!0}]},{id:184,properties:[{name:"collides",type:"bool",value:!0}]},{id:185,properties:[{name:"collides",type:"bool",value:!0}]}],tilewidth:16},{columns:16,firstgid:225,image:"../../../../../../new/phaser-rpg/src/assets/tilesets/Modern_Office_16x16.png",imageheight:848,imagewidth:256,margin:0,name:"Modern_Office_16x16",spacing:0,tilecount:848,tileheight:16,tilewidth:16},{columns:176,firstgid:1073,image:"../../../../../../../Downloads/modernexteriors-win/Modern_Exteriors_16x16/Modern_Exteriors_Complete_Tileset.png",imageheight:6304,imagewidth:2816,margin:0,name:"Modern_Exteriors_Complete_Tileset",spacing:0,tilecount:69344,tileheight:16,tilewidth:16},{columns:16,firstgid:70417,image:"../../../../../../../Downloads/Modern_Interiors_Free_v2.2/Modern tiles_Free/Interiors_free/16x16/Interiors_free_16x16.png",imageheight:1424,imagewidth:256,margin:0,name:"Interiors_free_16x16",spacing:0,tilecount:1424,tileheight:16,tilewidth:16}],tilewidth=16,type="map",version="1.10",width=60,level2Office={compressionlevel,height,infinite,layers,nextlayerid,nextobjectid,orientation,renderorder,tiledversion,tileheight,tilesets,tilewidth,type,version,width},tuxemonSample32pxExtruded="/vis-llm-game/assets/tuxemon-sample-32px-extruded-gRUY3ih7.png",Modern_Office_16x16="/vis-llm-game/assets/Modern_Office_16x16-BcflDIr-.png",Room_Builder_Office_16x16="/vis-llm-game/assets/Room_Builder_Office_16x16-BaRxyWuh.png",Modern_Exteriors_Complete_Tileset="/vis-llm-game/assets/Modern_Exteriors_Complete_Tileset-DP2m61Qh.png",Interiors_free_16x16="/vis-llm-game/assets/Interiors_free_16x16-CQGBjffT.png",mainmenu_background="/vis-llm-game/assets/mainmenu-background-CbnieRIa.png",title="/vis-llm-game/assets/title-demo-DVjSxOvd.png";var Depth=(m=>(m[m.AbovePlayer=10]="AbovePlayer",m[m.AboveWorld=20]="AboveWorld",m))(Depth||{});const atlas={player:"player"},image={spaceman:"spaceman",tuxemon:"tuxemon",logo:"logo",coin:"coin",bird:"bird",coinIcon:"coinIcon",office:"office",room_builder_office:"room_builder_office",interior:"interior",exterior:"exterior",mail:"mail",idle:"idle",work:"work",report:"report",hiring:"hiring"},scene$1={boot:"boot",main:"main",menu:"menu"},tilemap={tuxemon:"tuxemon",office:"office"},key={atlas,image,scene:scene$1,tilemap},TILESET_NAME="tuxemon-sample-32px-extruded",OFFICE_TILSET_NAME="Modern_Office_16x16",ROOM_BUILDER_OFFICE_TILESET_NAME="Room_Builder_Office_16x16",EXTERIOR_TILESET_NAME="Modern_Exteriors_Complete_Tileset",INTERIOR_TILESET_NAME="Interiors_free_16x16";var TilemapLayer=(m=>(m.BelowPlayer="Below Player",m.World="World",m.AbovePlayer="Above Player",m.Objects="Objects",m))(TilemapLayer||{});class Boot extends phaserExports.Scene{constructor(){super(key.scene.boot)}preload(){this.load.spritesheet(key.image.spaceman,spaceman,{frameWidth:16,frameHeight:16}),this.load.spritesheet(key.image.coin,coin_gold,{frameWidth:32,frameHeight:32}),this.load.spritesheet(key.image.bird,BirdSprite,{frameWidth:16,frameHeight:16}),this.load.image(key.image.tuxemon,tuxemonSample32pxExtruded),this.load.image(key.image.office,Modern_Office_16x16),this.load.image(key.image.room_builder_office,Room_Builder_Office_16x16),this.load.image(key.image.interior,Interiors_free_16x16),this.load.image(key.image.exterior,Modern_Exteriors_Complete_Tileset),this.load.image(key.image.coinIcon,coinIcon),this.load.image(key.image.logo,logo192),this.load.image(key.image.mail,mailing),this.load.image(key.image.idle,idle),this.load.image(key.image.work,working),this.load.image(key.image.report,report),this.load.image(key.image.hiring,hiring),this.load.tilemapTiledJSON(key.tilemap.tuxemon,tuxemonTown),this.load.tilemapTiledJSON(key.tilemap.office,level2Office),this.load.atlas(key.atlas.player,atlas$1,atlas$2);const t=localStorage.getItem("openai-api-key");t?this.verifyApiKey(t).then(n=>{n?this.scene.start("level2"):this.scene.start("MainMenu")}):this.scene.start("MainMenu")}async verifyApiKey(t){try{return(await fetch("https://api.openai.com/v1/models",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok}catch{return!1}}}var cjs$1={},components={},Fragment={},hasRequiredFragment;function requireFragment(){if(hasRequiredFragment)return Fragment;hasRequiredFragment=1,Object.defineProperty(Fragment,"__esModule",{value:!0}),Fragment.Fragment=m;function m(t){return t.children}return Fragment}var GameObjects={},hasRequiredGameObjects;function requireGameObjects(){if(hasRequiredGameObjects)return GameObjects;hasRequiredGameObjects=1,Object.defineProperty(GameObjects,"__esModule",{value:!0}),GameObjects.Zone=GameObjects.Video=GameObjects.UpdateList=GameObjects.Triangle=GameObjects.TileSprite=GameObjects.TextStyle=GameObjects.Text=GameObjects.Star=GameObjects.Sprite=GameObjects.Shape=GameObjects.Shader=GameObjects.Rope=GameObjects.RenderTexture=GameObjects.Rectangle=GameObjects.Polygon=GameObjects.PointLight=GameObjects.Plane=GameObjects.PathFollower=GameObjects.ParticleEmitter=GameObjects.NineSlice=GameObjects.Mesh=GameObjects.Line=GameObjects.LightsPlugin=GameObjects.LightsManager=GameObjects.Light=GameObjects.Layer=GameObjects.IsoTriangle=GameObjects.IsoBox=GameObjects.Image=GameObjects.Group=GameObjects.Grid=GameObjects.Graphics=GameObjects.GameObjectFactory=GameObjects.GameObjectCreator=GameObjects.GameObject=GameObjects.Extern=GameObjects.Ellipse=GameObjects.DynamicBitmapText=GameObjects.DisplayList=GameObjects.DOMElement=GameObjects.Curve=GameObjects.Container=GameObjects.Bob=GameObjects.Blitter=GameObjects.BitmapText=GameObjects.Arc=void 0;var m=requirePhaser();return GameObjects.Arc=m.GameObjects.Arc,GameObjects.BitmapText=m.GameObjects.BitmapText,GameObjects.Blitter=m.GameObjects.Blitter,GameObjects.Bob=m.GameObjects.Bob,GameObjects.Container=m.GameObjects.Container,GameObjects.Curve=m.GameObjects.Curve,GameObjects.DOMElement=m.GameObjects.DOMElement,GameObjects.DisplayList=m.GameObjects.DisplayList,GameObjects.DynamicBitmapText=m.GameObjects.DynamicBitmapText,GameObjects.Ellipse=m.GameObjects.Ellipse,GameObjects.Extern=m.GameObjects.Extern,GameObjects.GameObject=m.GameObjects.GameObject,GameObjects.GameObjectCreator=m.GameObjects.GameObjectCreator,GameObjects.GameObjectFactory=m.GameObjects.GameObjectFactory,GameObjects.Graphics=m.GameObjects.Graphics,GameObjects.Grid=m.GameObjects.Grid,GameObjects.Group=m.GameObjects.Group,GameObjects.Image=m.GameObjects.Image,GameObjects.IsoBox=m.GameObjects.IsoBox,GameObjects.IsoTriangle=m.GameObjects.IsoTriangle,GameObjects.Layer=m.GameObjects.Layer,GameObjects.Light=m.GameObjects.Light,GameObjects.LightsManager=m.GameObjects.LightsManager,GameObjects.LightsPlugin=m.GameObjects.LightsPlugin,GameObjects.Line=m.GameObjects.Line,GameObjects.Mesh=m.GameObjects.Mesh,GameObjects.NineSlice=m.GameObjects.NineSlice,GameObjects.ParticleEmitter=m.GameObjects.Particles.ParticleEmitter,GameObjects.PathFollower=m.GameObjects.PathFollower,GameObjects.Plane=m.GameObjects.Plane,GameObjects.PointLight=m.GameObjects.PointLight,GameObjects.Polygon=m.GameObjects.Polygon,GameObjects.Rectangle=m.GameObjects.Rectangle,GameObjects.RenderTexture=m.GameObjects.RenderTexture,GameObjects.Rope=m.GameObjects.Rope,GameObjects.Shader=m.GameObjects.Shader,GameObjects.Shape=m.GameObjects.Shape,GameObjects.Sprite=m.GameObjects.Sprite,GameObjects.Star=m.GameObjects.Star,GameObjects.Text=m.GameObjects.Text,GameObjects.TextStyle=m.GameObjects.TextStyle,GameObjects.TileSprite=m.GameObjects.TileSprite,GameObjects.Triangle=m.GameObjects.Triangle,GameObjects.UpdateList=m.GameObjects.UpdateList,GameObjects.Video=m.GameObjects.Video,GameObjects.Zone=m.GameObjects.Zone,GameObjects}var hasRequiredComponents;function requireComponents(){return hasRequiredComponents||(hasRequiredComponents=1,function(m){var t=components&&components.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=components&&components.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireFragment(),m),n(requireGameObjects(),m)}(components)),components}var element={},create$1={},hasRequiredCreate;function requireCreate(){if(hasRequiredCreate)return create$1;hasRequiredCreate=1,Object.defineProperty(create$1,"__esModule",{value:!0}),create$1.createElement=m;function m(t,n){for(var p=[],C=2;C<arguments.length;C++)p[C-2]=arguments[C];return n||(n={}),p.length&&(n.children=p),n.children&&!Array.isArray(n.children)&&(n.children=[n.children]),{type:t,props:n,key:null}}return create$1}var jsx={},hasRequiredJsx;function requireJsx(){return hasRequiredJsx||(hasRequiredJsx=1,function(m){Object.defineProperty(m,"__esModule",{value:!0}),m.jsx=void 0;var t=requireCreate();Object.defineProperty(m,"jsx",{enumerable:!0,get:function(){return t.createElement}})}(jsx)),jsx}var valid$1={},hasRequiredValid$2;function requireValid$2(){if(hasRequiredValid$2)return valid$1;hasRequiredValid$2=1,Object.defineProperty(valid$1,"__esModule",{value:!0}),valid$1.isValidElement=m;function m(t){return!t||typeof t!="object"?(console.warn("Invalid JSX element. Expected an object but got: ".concat(t)),!1):typeof t.type!="function"?(console.warn("Invalid JSX type. Expected a class or function but got: ".concat(t.type)),!1):!0}return valid$1}var hasRequiredElement;function requireElement(){return hasRequiredElement||(hasRequiredElement=1,function(m){var t=element&&element.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=element&&element.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireCreate(),m),n(requireJsx(),m),n(requireValid$2(),m)}(element)),element}var hooks={},useRef={},hasRequiredUseRef;function requireUseRef(){if(hasRequiredUseRef)return useRef;hasRequiredUseRef=1,Object.defineProperty(useRef,"__esModule",{value:!0}),useRef.useRef=m;function m(t){return t===void 0&&(t=null),{current:t}}return useRef}var useScene={},helpers={},scene={},hasRequiredScene;function requireScene(){if(hasRequiredScene)return scene;hasRequiredScene=1,Object.defineProperty(scene,"__esModule",{value:!0}),scene.getScene=t,scene.setScene=n;var m;function t(){return m}function n(p){m=p}return scene}var hasRequiredHelpers;function requireHelpers(){return hasRequiredHelpers||(hasRequiredHelpers=1,function(m){var t=helpers&&helpers.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=helpers&&helpers.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireScene(),m)}(helpers)),helpers}var hasRequiredUseScene;function requireUseScene(){if(hasRequiredUseScene)return useScene;hasRequiredUseScene=1,Object.defineProperty(useScene,"__esModule",{value:!0}),useScene.useScene=t;var m=requireHelpers();function t(){return(0,m.getScene)()}return useScene}var hasRequiredHooks;function requireHooks(){return hasRequiredHooks||(hasRequiredHooks=1,function(m){var t=hooks&&hooks.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=hooks&&hooks.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireUseRef(),m),n(requireUseScene(),m)}(hooks)),hooks}var ref$1={},createRef={},hasRequiredCreateRef;function requireCreateRef(){if(hasRequiredCreateRef)return createRef;hasRequiredCreateRef=1,Object.defineProperty(createRef,"__esModule",{value:!0}),createRef.createRef=m;function m(){return{current:null}}return createRef}var hasRequiredRef$1;function requireRef$1(){return hasRequiredRef$1||(hasRequiredRef$1=1,function(m){var t=ref$1&&ref$1.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=ref$1&&ref$1.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireCreateRef(),m)}(ref$1)),ref$1}var render$1={},gameobject={},props={},constants$1={},events={},hasRequiredEvents;function requireEvents(){return hasRequiredEvents||(hasRequiredEvents=1,Object.defineProperty(events,"__esModule",{value:!0}),events.events=void 0,events.events=["onBoot","onDestroy","onDragEnd","onDragEnter","onDrag","onDragLeave","onDragOver","onDragStart","onDrop","onGameObjectDown","onGameObjectDragEnd","onGameObjectDragEnter","onGameObjectDrag","onGameObjectDragLeave","onGameObjectDragOver","onGameObjectDragStart","onGameObjectDrop","onGameObjectMove","onGameObjectOut","onGameObjectOver","onGameObjectPointerDown","onGameObjectPointerMove","onGameObjectPointerOut","onGameObjectPointerOver","onGameObjectPointerUp","onGameObjectPointerWheel","onGameObjectUp","onGameObjectWheel","onGameOut","onGameOver","onManagerBoot","onManagerProcess","onManagerUpdate","onPointerLockChange","onPointerDown","onPointerDownOutside","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onPointerUpOutside","onPointerWheel","onPreUpdate","onShutdown","onStart","onUpdate"].reduce(function(m,t){return m[t]=1,m},{})),events}var hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(m){var t=constants$1&&constants$1.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=constants$1&&constants$1.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireEvents(),m)}(constants$1)),constants$1}var hasRequiredProps;function requireProps(){return hasRequiredProps||(hasRequiredProps=1,function(m){Object.defineProperty(m,"__esModule",{value:!0}),m.skipPropKeys=void 0,m.setProps=n;var t=requireConstants$1();m.skipPropKeys=["input"];function n(p,C,b){for(var o in C)if(m.skipPropKeys.indexOf(o)===-1){var E=C[o];if(E&&o==="data"){p.setData(E);continue}if(t.events[o]&&typeof E=="function"){p.setInteractive(C.input),p.on(o.slice(2).toLowerCase(),E,b);continue}if(o in p){p[o]=E;continue}}(typeof C.originX=="number"||typeof C.originY=="number")&&typeof p.setOrigin=="function"&&p.setOrigin(C.originX,C.originY)}}(props)),props}var ref={},hasRequiredRef;function requireRef(){if(hasRequiredRef)return ref;hasRequiredRef=1,Object.defineProperty(ref,"__esModule",{value:!0}),ref.attachRef=m;function m(t,n){typeof n=="function"?n(t):n&&typeof n=="object"&&(n.current=t)}return ref}var hasRequiredGameobject;function requireGameobject(){if(hasRequiredGameobject)return gameobject;hasRequiredGameobject=1;var m=gameobject&&gameobject.__createBinding||(Object.create?function(s,l,v,d){d===void 0&&(d=v);var g=Object.getOwnPropertyDescriptor(l,v);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[v]}}),Object.defineProperty(s,d,g)}:function(s,l,v,d){d===void 0&&(d=v),s[d]=l[v]}),t=gameobject&&gameobject.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),n=gameobject&&gameobject.__importStar||function(){var s=function(l){return s=Object.getOwnPropertyNames||function(v){var d=[];for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(d[d.length]=g);return d},s(l)};return function(l){if(l&&l.__esModule)return l;var v={};if(l!=null)for(var d=s(l),g=0;g<d.length;g++)d[g]!=="default"&&m(v,l,d[g]);return t(v,l),v}}(),p=gameobject&&gameobject.__rest||function(s,l){var v={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&l.indexOf(d)<0&&(v[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,d=Object.getOwnPropertySymbols(s);g<d.length;g++)l.indexOf(d[g])<0&&Object.prototype.propertyIsEnumerable.call(s,d[g])&&(v[d[g]]=s[d[g]]);return v},C=gameobject&&gameobject.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gameobject,"__esModule",{value:!0}),gameobject.addGameObject=c;var b=C(requirePhaser()),o=requireComponents(),E=n(requireGameObjects()),e=requireElement(),a=requireProps(),x=requireRef();function c(s,l,v){if(Array.isArray(s)){s.forEach(function(L){return c(L,l,v)});return}if((0,e.isValidElement)(s)){var d=s.props,g=d.children,y=d.color,S=d.frame;d.key;var T=d.points,w=d.ref,P=d.shader,A=d.style,R=d.texture,I=p(d,["children","color","frame","key","points","ref","shader","style","texture"]),M;switch(!0){case s.type===o.Fragment:g&&h(g).forEach(function(L){c(L,l,v)});return;case s.type===b.default.GameObjects.BitmapText:case s.type===b.default.GameObjects.DynamicBitmapText:M=new s.type(l,I.x,I.y,I.font);break;case s.type===b.default.GameObjects.Bob:M=new s.type(l,I.x,I.y,S,I.visible);break;case s.type===b.default.GameObjects.Container:case s.type===b.default.GameObjects.Layer:M=new s.type(l),g&&h(g).forEach(function(L){c(L,l,M)});break;case s.type===b.default.GameObjects.GameObject:M=new s.type(l,I.type);break;case s.type===b.default.GameObjects.Image:case s.type===b.default.GameObjects.Sprite:case s.type===b.default.GameObjects.NineSlice:M=new s.type(l,I.x,I.y,R,S);break;case s.type===b.default.GameObjects.Light:M=new s.type(l,I.x,I.y,I.radius,y==null?void 0:y.r,y==null?void 0:y.g,y==null?void 0:y.b,I.intensity);break;case s.type===b.default.GameObjects.PathFollower:M=new s.type(l,I.path,I.x,I.y,R,S);break;case s.type===b.default.GameObjects.Plane:M=new s.type(l,I.x,I.y,R,S,I.width,I.height,I.isTiled);break;case s.type===b.default.GameObjects.PointLight:M=new s.type(l,I.x,I.y,y);break;case s.type===b.default.GameObjects.Rectangle:case s.type===b.default.GameObjects.Zone:M=new s.type(l,I.x,I.y);break;case s.type===b.default.GameObjects.Rope:M=new s.type(l,I.x,I.y,R,S,T);break;case s.type===b.default.GameObjects.Shader:M=new s.type(l,P);break;case s.type===b.default.GameObjects.Text:M=new s.type(l,I.x,I.y,I.text,A);break;case s.type===b.default.GameObjects.TileSprite:M=new s.type(l,I.x,I.y,I.width,I.height,R,S);break;case s.type===b.default.GameObjects.Video:M=new s.type(l,I.x,I.y,I.cacheKey);break;case u.indexOf(s.type)!==-1:M=new s.type(l);break;default:c(new s.type(s.props),l,v);return}(0,a.setProps)(M,I,l),(0,x.attachRef)(M,w),typeof(v==null?void 0:v.add)=="function"?v.add(M):l.add.existing(M)}}var u=Object.keys(E).map(function(s){return E[s]});function h(s){return Array.isArray(s)?s:[s]}return gameobject}var render={},hasRequiredRender$1;function requireRender$1(){if(hasRequiredRender$1)return render;hasRequiredRender$1=1,Object.defineProperty(render,"__esModule",{value:!0}),render.render=n;var m=requireHelpers(),t=requireGameobject();function n(p,C){(0,m.setScene)(C),(0,t.addGameObject)(p,C)}return render}var hasRequiredRender;function requireRender(){return hasRequiredRender||(hasRequiredRender=1,function(m){var t=render$1&&render$1.__createBinding||(Object.create?function(p,C,b,o){o===void 0&&(o=b);var E=Object.getOwnPropertyDescriptor(C,b);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[b]}}),Object.defineProperty(p,o,E)}:function(p,C,b,o){o===void 0&&(o=b),p[o]=C[b]}),n=render$1&&render$1.__exportStar||function(p,C){for(var b in p)b!=="default"&&!Object.prototype.hasOwnProperty.call(C,b)&&t(C,p,b)};Object.defineProperty(m,"__esModule",{value:!0}),n(requireGameobject(),m),n(requireProps(),m),n(requireRef(),m),n(requireRender$1(),m)}(render$1)),render$1}var hasRequiredCjs$1;function requireCjs$1(){return hasRequiredCjs$1||(hasRequiredCjs$1=1,function(m){var t=cjs$1&&cjs$1.__createBinding||(Object.create?function(E,e,a,x){x===void 0&&(x=a);var c=Object.getOwnPropertyDescriptor(e,a);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(E,x,c)}:function(E,e,a,x){x===void 0&&(x=a),E[x]=e[a]}),n=cjs$1&&cjs$1.__exportStar||function(E,e){for(var a in E)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&t(e,E,a)};Object.defineProperty(m,"__esModule",{value:!0}),m.render=m.createRef=m.useScene=m.useRef=m.jsx=m.createElement=void 0,n(requireComponents(),m);var p=requireElement();Object.defineProperty(m,"createElement",{enumerable:!0,get:function(){return p.createElement}}),Object.defineProperty(m,"jsx",{enumerable:!0,get:function(){return p.jsx}});var C=requireHooks();Object.defineProperty(m,"useRef",{enumerable:!0,get:function(){return C.useRef}}),Object.defineProperty(m,"useScene",{enumerable:!0,get:function(){return C.useScene}});var b=requireRef$1();Object.defineProperty(m,"createRef",{enumerable:!0,get:function(){return b.createRef}});var o=requireRender();Object.defineProperty(m,"render",{enumerable:!0,get:function(){return o.render}})}(cjs$1)),cjs$1}var cjsExports$1=requireCjs$1();function TilemapDebug(m){return cjsExports$1.useScene(),null}function Typewriter(m){const t=cjsExports$1.useScene(),n=cjsExports$1.useRef();let p=0,C="";const b=t.scale.width-40,o=t.time.addEvent({callback(){if(C+=m.text[p],n.current.setText(C),p++,p>=m.text.length){removeTimer(o,t);const E=t.time.delayedCall(1500,()=>{n.current.destroy(),removeTimer(E,t),typeof m.onEnd=="function"&&m.onEnd()})}},delay:100,repeat:m.text.length-1});return jsxRuntimeExports.jsx(cjsExports$1.Text,{x:16,y:16,style:{backgroundColor:"#fff",color:"#000",font:"18px monospace",padding:{x:20,y:10},wordWrap:{width:b,useAdvancedWrap:!0}},alpha:.95,scrollFactorX:0,scrollFactorY:0,depth:Depth.AboveWorld,ref:n})}function removeTimer(m,t){m.destroy(),t.time.removeEvent(m)}class Inventory extends Phaser$1.GameObjects.Container{constructor(n,p,C){super(n,p,C);ge(this,"inventoryBg");ge(this,"inventoryText");ge(this,"items",[]);ge(this,"itemTexts",[]);this.inventoryBg=n.add.rectangle(0,0,300,200,0,.8),this.inventoryBg.setStrokeStyle(2,16777215),this.inventoryText=n.add.text(-120,-80,"Inventory",{fontSize:"20px",color:"#ffffff"}),this.add([this.inventoryBg,this.inventoryText]),this.setVisible(!1),n.add.existing(this)}addItem(n){if(!this.items.includes(n)){this.items.push(n);const p=this.scene.add.text(-120,-50+this.items.length*30,`- ${n}`,{fontSize:"18px",color:"#ffffff"});p.setInteractive().on("pointerdown",()=>{console.log(`Used ${n}`),this.removeItem(n)}),this.itemTexts.push(p),this.add(p)}}removeItem(n){const p=this.items.indexOf(n);p!==-1&&(this.items.splice(p,1),this.itemTexts[p].destroy(),this.itemTexts.splice(p,1))}toggle(){this.setVisible(!this.visible)}}class MainMenuButton{constructor(t,n,p,C,b,o,E){ge(this,"buttonBackground");ge(this,"buttonText");this.buttonBackground=t.add.rectangle(n,p,C,b,31743).setInteractive().setOrigin(.5,.5).setDepth(1e3),this.buttonText=t.add.text(n,p,o,{fontSize:"24px",color:"#ffffff",align:"center"}).setOrigin(.5,.5).setDepth(1001),this.buttonBackground.on("pointerdown",E),this.buttonBackground.on("pointerover",()=>{this.buttonBackground.setFillStyle(65280)}),this.buttonBackground.on("pointerout",()=>{this.buttonBackground.setFillStyle(31743)})}}class NPC extends Phaser$1.Physics.Arcade.Sprite{constructor(n,p,C,b=key.atlas.player,o="misa-front",E="NPC"){super(n,p,C,b,o);ge(this,"body");ge(this,"nameTag");ge(this,"name");this.name=E,n.add.existing(this),n.physics.world.enable(this),n.physics.add.existing(this),this.setSize(32,42).setOffset(0,22),this.setImmovable(!0),this.body.setAllowGravity(!1),this.nameTag=n.add.text(p,C-20,E,{fontSize:"14px",color:"#ffffff",backgroundColor:"#00000088",padding:{x:4,y:2},align:"center"}).setOrigin(.5,1),this.createAnimations()}update(){this.nameTag.setPosition(this.x,this.y-25)}createAnimations(){const n=this.scene.anims;n.exists("player_left")||n.create({key:"player_left",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-left-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_right")||n.create({key:"player_right",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-right-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_up")||n.create({key:"player_up",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-back-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_down")||n.create({key:"player_down",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-front-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1})}}class Agent extends Phaser$1.Physics.Arcade.Sprite{constructor(n,p,C,b=key.atlas.player,o="misa-front",E="Agent",e="a helpful AI assistant"){super(n,p,C,b,o);ge(this,"selector");ge(this,"name");ge(this,"nameTag");ge(this,"memory",[]);ge(this,"persona","a helpful AI assistant");ge(this,"instruction","");ge(this,"assignToWorkplace",!1);ge(this,"activationFunction",n=>(console.log(`---Step for Agent: ${this.name}---`),n));ge(this,"inventory",{promptUtils:[],tools:[]});this.name=E,this.persona=e,this.nameTag=n.add.text(p,C-20,E,{fontSize:"14px",color:"#ffffff",backgroundColor:"#00000088",padding:{x:4,y:2},align:"center"}).setOrigin(.5,1),this.nameTag.setDepth(10),n.add.existing(this),n.physics.world.enable(this),n.physics.add.existing(this),this.setSize(32,42).setOffset(0,22),this.setImmovable(!0),this.body.setAllowGravity(!1),this.setCollideWorldBounds(!0),this.createAnimations(),this.selector=n.physics.add.staticBody(p-8,C+32,16,16),this.setInteractive({useHandCursor:!0,draggable:!0}),n.input.setDraggable(this),n.input.on("dragstart",(a,x)=>{x===this&&this.setTint(16711680)}),n.input.on("drag",(a,x,c,u)=>{x===this&&(this.x=c,this.y=u,this.nameTag.setPosition(this.x,this.y-25))}),n.input.on("dragend",(a,x)=>{x===this&&this.clearTint()})}update(){this.nameTag.setPosition(this.x,this.y-25)}getName(){return this.name}changeNameTagColor(n){this.nameTag.setColor(n)}storeMemory(n,p,C,b,o){this.memory.push({system:n,user:p,gpt:C,currentPrompts:b,result:o})}getMemory(){return this.memory}getPersona(){return this.persona}activate(){return this.activationFunction}setActivationFunction(n){this.activationFunction=n}moveSelector(n){const{body:p,selector:C}=this;switch(n){case"player_left":C.x=p.x-19,C.y=p.y+14;break;case"player_right":C.x=p.x+35,C.y=p.y+14;break;case"player_up":C.x=p.x+8,C.y=p.y-18;break;case"player_down":C.x=p.x+8,C.y=p.y+46;break}}setInstruction(n){this.instruction=n}getInstruction(){return this.instruction}addPromptUtils(n){this.inventory.promptUtils.push(n)}getPromptUtils(){return[...this.inventory.promptUtils]}setTexture(n,p){return super.setTexture(n,p),this}onClick(n,p){p===this&&(console.log(`Agent ${this.name} clicked!`),this.changeNameTagColor("#ff00ff"))}createAnimations(){const n=this.scene.anims;n.exists("player_left")||n.create({key:"player_left",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-left-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_right")||n.create({key:"player_right",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-right-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_up")||n.create({key:"player_up",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-back-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_down")||n.create({key:"player_down",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-front-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1})}}function addButtonHUD(m,t,n,p,C,b=0,o=0){const E=this.add.rectangle(m,t,p,n,0).setInteractive({useHandCursor:!0}).setStrokeStyle(2,16777215).setScrollFactor(0).setDepth(999).setAlpha(.5),e=this.add.text(m-b,t-o,C,{fontSize:"10px",color:"#ffffff",wordWrap:{width:50,useAdvancedWrap:!0}}).setScrollFactor(0).setDepth(1e3);return this.hudElements.push(E,e),E}function addAgentPanelHUD(m,t,n,p){this.hudText=this.add.text(50,450,"Agent (Player-controlled) ",{fontSize:"18px",color:"#ffffff",backgroundColor:"#000000",padding:{x:10,y:5}}),this.hudText.setScrollFactor(0),this.hudText.setDepth(999);const C=this.add.rectangle(200,500,350,125,0);C.setStrokeStyle(2,16777215),C.setScrollFactor(0),C.setDepth(998),C.setAlpha(.5),this.hudElements&&this.hudElements.push(C,this.hudText);let b=null,o=null;for(let E=0;E<3;E++){const e=this.add.rectangle(m+E*(n+p),t,n,n,0);e.setStrokeStyle(2,16777215),e.setScrollFactor(0),e.setDepth(999),e.setAlpha(.5),e.setInteractive({useHandCursor:!0}),this.hudElements&&this.hudElements.push(e),e.on("pointerover",a=>{const x=this.cameras.main.getWorldPoint(a.x,a.y);console.log("pointerover",x.x,x.y),b||(b=this.add.rectangle(x.x+20,x.y+20,150,80,0).setDepth(1e3).setStrokeStyle(2,16777215),console.log("popupRect add",b),o=this.add.text(x.x-35,x.y,"empty",{fontSize:"10px",color:"#ffffff",wordWrap:{width:150,useAdvancedWrap:!0}}).setDepth(1001))}),e.on("pointerout",()=>{console.log("pointerout"),b&&(b.destroy(),o==null||o.destroy(),b=null,console.log("popupRect remove",b))})}}function createTaskCard(m,t,n){const p=this.add.group(),C=this.add.rectangle(m,t,50,50,0).setScrollFactor(0).setDepth(999).setAlpha(.5).setStrokeStyle(2,16777215).setInteractive({draggable:!0}),b=this.add.text(m-15,t-5,n,{fontSize:"10px",color:"#ffffff"}).setScrollFactor(0).setDepth(1e3);p.add(C),p.add(b);const o={x:C.x,y:C.y,labelX:b.x,labelY:b.y};this.hudElements&&this.hudElements.push(C,b),C.on("dragstart",()=>{C.setScrollFactor(1),b.setScrollFactor(1)}),C.on("drag",(E,e,a)=>{var u;C.setPosition(e,a),b.setPosition(e-15,a-5);const x=new Phaser.Geom.Rectangle(C.x-25,C.y-25,50,50);let c=!1;(u=this.zoneBackgrounds)==null||u.forEach(h=>{const s=new Phaser.Geom.Rectangle(h.x-h.width/2,h.y-h.height/2,h.width,h.height);h.setStrokeStyle(0),Phaser.Geom.Rectangle.Overlaps(x,s)&&(c=!0,C.setStrokeStyle(2,16711680),b.setColor("#ff0000"),h.setStrokeStyle(2,16711680))}),c||(C.setStrokeStyle(2,16777215),b.setColor("#ffffff"))}),C.on("dragend",()=>{var a,x;const E=new Phaser.Geom.Rectangle(C.x-25,C.y-25,50,50),e=[...this.parallelZones,...this.chainingZones,...this.votingZones,...this.routeZones];for(const c of e){const u=c.ui.background,h=new Phaser.Geom.Rectangle(u.x-u.width/2,u.y-u.height/2,u.width,u.height);if(Phaser.Geom.Rectangle.Overlaps(E,h)){c.ui.text.setText(b.text),c.task=b.text,console.log("Zone updated from drag:",c.name,c.task);break}}(a=this.roomStatusTexts)==null||a.forEach(c=>{const u=c.getBounds();if(Phaser.Geom.Intersects.RectangleToRectangle(E,u)){c.text=b.text;const h=e.find(s=>s.ui.text===c);h&&(h.task=b.text)}}),(x=this.zoneBackgrounds)==null||x.forEach(c=>{const u=new Phaser.Geom.Rectangle(c.x-c.width/2,c.y-c.height/2,c.width,c.height);c.setStrokeStyle(0),Phaser.Geom.Rectangle.Overlaps(E,u)&&(C.destroy(),b.destroy(),this.time.delayedCall(100,()=>{createTaskCard.call(this,o.x,o.y,b.text)}))}),this.tweens.add({targets:[C,b],x:c=>c===C?o.x:o.labelX,y:c=>c===C?o.y:o.labelY,duration:300,ease:"Back.easeOut",onComplete:()=>{C.setScrollFactor(0),b.setScrollFactor(0)}}),C.setStrokeStyle(2,16777215),b.setColor("#ffffff")})}function addTaskAssignmentHUD(){const m=["analysis","summary","extraction","validation","voting"];for(let t=0;t<m.length;t++){const n=425+t*60;createTaskCard.call(this,n,540,m[t])}}function generateNonCollidingAgentPosition(m,t,n=20,p=10,C=50){let b,o=0,E,e;do E=t.topLeft.x+p+Math.random()*(t.width-2*p),e=t.topLeft.y+p+Math.random()*(t.height-2*p),b=m.some(a=>{const x=a.x-E,c=a.y-e;return Math.sqrt(x*x+c*c)<n*2}),o++;while(b&&o<C);return o>=C&&console.warn("Failed to place agent without collision after max attempts."),{x:E,y:e}}const getZoneBounds=m=>({topLeft:{x:m.x-m._displayOriginX,y:m.y-m._displayOriginY},bottomRight:{x:m.x-m._displayOriginX+m.width,y:m.y-m._displayOriginY+m.height},width:m.width,height:m.height});function addSceneNameHUD(){this.hudText=this.add.text(600,10,this.sceneName,{fontSize:"20px",color:"#ffffff"}).setScrollFactor(0).setDepth(1e3)}function addCreditsHUD(){this.creditsText=this.add.text(600,35,this.credits,{fontSize:"20px",color:"#ffffff"}).setScrollFactor(0).setDepth(1e3)}function drawArrow(m,t,n,p,C=16777215,b=2,o=100){if(!p)return;const E=t.x-m.x,e=t.y-m.y,a=Math.sqrt(E*E+e*e);if(a===0)return;const x=E/a,c=e/a,u={x:m.x+x*o,y:m.y+c*o},h={x:m.x+x*n,y:m.y+c*n};p.lineStyle(b,C),p.beginPath(),p.moveTo(h.x,h.y),p.lineTo(u.x,u.y),p.strokePath();const s=10,l=Math.atan2(c,x),v={x:u.x-s*Math.cos(l-Math.PI/6),y:u.y-s*Math.sin(l-Math.PI/6)},d={x:u.x-s*Math.cos(l+Math.PI/6),y:u.y-s*Math.sin(l+Math.PI/6)};p.fillStyle(C,1),p.beginPath(),p.moveTo(u.x,u.y),p.lineTo(v.x,v.y),p.lineTo(d.x,d.y),p.lineTo(u.x,u.y),p.fillPath()}var heap$2={exports:{}},heap$1=heap$2.exports,hasRequiredHeap$1;function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,function(m){(function(){var t,n,p,C,b,o,E,e,a,x,c,u,h,s,l;p=Math.floor,x=Math.min,n=function(v,d){return v<d?-1:v>d?1:0},a=function(v,d,g,y,S){var T;if(g==null&&(g=0),S==null&&(S=n),g<0)throw new Error("lo must be non-negative");for(y==null&&(y=v.length);g<y;)T=p((g+y)/2),S(d,v[T])<0?y=T:g=T+1;return[].splice.apply(v,[g,g-g].concat(d)),d},o=function(v,d,g){return g==null&&(g=n),v.push(d),s(v,0,v.length-1,g)},b=function(v,d){var g,y;return d==null&&(d=n),g=v.pop(),v.length?(y=v[0],v[0]=g,l(v,0,d)):y=g,y},e=function(v,d,g){var y;return g==null&&(g=n),y=v[0],v[0]=d,l(v,0,g),y},E=function(v,d,g){var y;return g==null&&(g=n),v.length&&g(v[0],d)<0&&(y=[v[0],d],d=y[0],v[0]=y[1],l(v,0,g)),d},C=function(v,d){var g,y,S,T,w,P;for(d==null&&(d=n),T=(function(){P=[];for(var A=0,R=p(v.length/2);0<=R?A<R:A>R;0<=R?A++:A--)P.push(A);return P}).apply(this).reverse(),w=[],y=0,S=T.length;y<S;y++)g=T[y],w.push(l(v,g,d));return w},h=function(v,d,g){var y;if(g==null&&(g=n),y=v.indexOf(d),y!==-1)return s(v,0,y,g),l(v,y,g)},c=function(v,d,g){var y,S,T,w,P;if(g==null&&(g=n),S=v.slice(0,d),!S.length)return S;for(C(S,g),P=v.slice(d),T=0,w=P.length;T<w;T++)y=P[T],E(S,y,g);return S.sort(g).reverse()},u=function(v,d,g){var y,S,T,w,P,A,R,I,M;if(g==null&&(g=n),d*10<=v.length){if(T=v.slice(0,d).sort(g),!T.length)return T;for(S=T[T.length-1],R=v.slice(d),w=0,A=R.length;w<A;w++)y=R[w],g(y,S)<0&&(a(T,y,0,null,g),T.pop(),S=T[T.length-1]);return T}for(C(v,g),M=[],P=0,I=x(d,v.length);0<=I?P<I:P>I;0<=I?++P:--P)M.push(b(v,g));return M},s=function(v,d,g,y){var S,T,w;for(y==null&&(y=n),S=v[g];g>d;){if(w=g-1>>1,T=v[w],y(S,T)<0){v[g]=T,g=w;continue}break}return v[g]=S},l=function(v,d,g){var y,S,T,w,P;for(g==null&&(g=n),S=v.length,P=d,T=v[d],y=2*d+1;y<S;)w=y+1,w<S&&!(g(v[y],v[w])<0)&&(y=w),v[d]=v[y],d=y,y=2*d+1;return v[d]=T,s(v,P,d,g)},t=function(){v.push=o,v.pop=b,v.replace=e,v.pushpop=E,v.heapify=C,v.updateItem=h,v.nlargest=c,v.nsmallest=u;function v(d){this.cmp=d??n,this.nodes=[]}return v.prototype.push=function(d){return o(this.nodes,d,this.cmp)},v.prototype.pop=function(){return b(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(d){return this.nodes.indexOf(d)!==-1},v.prototype.replace=function(d){return e(this.nodes,d,this.cmp)},v.prototype.pushpop=function(d){return E(this.nodes,d,this.cmp)},v.prototype.heapify=function(){return C(this.nodes,this.cmp)},v.prototype.updateItem=function(d){return h(this.nodes,d,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var d;return d=new v,d.nodes=this.nodes.slice(0),d},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),m!==null&&m.exports?m.exports=t:window.Heap=t}).call(heap$1)}(heap$2)),heap$2.exports}var heap,hasRequiredHeap;function requireHeap(){return hasRequiredHeap||(hasRequiredHeap=1,heap=requireHeap$1()),heap}var Node_1,hasRequiredNode;function requireNode(){if(hasRequiredNode)return Node_1;hasRequiredNode=1;function m(t,n,p){this.x=t,this.y=n,this.walkable=p===void 0?!0:p}return Node_1=m,Node_1}var DiagonalMovement_1,hasRequiredDiagonalMovement;function requireDiagonalMovement(){if(hasRequiredDiagonalMovement)return DiagonalMovement_1;hasRequiredDiagonalMovement=1;var m={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};return DiagonalMovement_1=m,DiagonalMovement_1}var Grid_1,hasRequiredGrid;function requireGrid(){if(hasRequiredGrid)return Grid_1;hasRequiredGrid=1;var m=requireNode(),t=requireDiagonalMovement();function n(p,C,b){var o;typeof p!="object"?o=p:(C=p.length,o=p[0].length,b=p),this.width=o,this.height=C,this.nodes=this._buildNodes(o,C,b)}return n.prototype._buildNodes=function(p,C,b){var o,E,e=new Array(C);for(o=0;o<C;++o)for(e[o]=new Array(p),E=0;E<p;++E)e[o][E]=new m(E,o);if(b===void 0)return e;if(b.length!==C||b[0].length!==p)throw new Error("Matrix size does not fit");for(o=0;o<C;++o)for(E=0;E<p;++E)b[o][E]&&(e[o][E].walkable=!1);return e},n.prototype.getNodeAt=function(p,C){return this.nodes[C][p]},n.prototype.isWalkableAt=function(p,C){return this.isInside(p,C)&&this.nodes[C][p].walkable},n.prototype.isInside=function(p,C){return p>=0&&p<this.width&&C>=0&&C<this.height},n.prototype.setWalkableAt=function(p,C,b){this.nodes[C][p].walkable=b},n.prototype.getNeighbors=function(p,C){var b=p.x,o=p.y,E=[],e=!1,a=!1,x=!1,c=!1,u=!1,h=!1,s=!1,l=!1,v=this.nodes;if(this.isWalkableAt(b,o-1)&&(E.push(v[o-1][b]),e=!0),this.isWalkableAt(b+1,o)&&(E.push(v[o][b+1]),x=!0),this.isWalkableAt(b,o+1)&&(E.push(v[o+1][b]),u=!0),this.isWalkableAt(b-1,o)&&(E.push(v[o][b-1]),s=!0),C===t.Never)return E;if(C===t.OnlyWhenNoObstacles)a=s&&e,c=e&&x,h=x&&u,l=u&&s;else if(C===t.IfAtMostOneObstacle)a=s||e,c=e||x,h=x||u,l=u||s;else if(C===t.Always)a=!0,c=!0,h=!0,l=!0;else throw new Error("Incorrect value of diagonalMovement");return a&&this.isWalkableAt(b-1,o-1)&&E.push(v[o-1][b-1]),c&&this.isWalkableAt(b+1,o-1)&&E.push(v[o-1][b+1]),h&&this.isWalkableAt(b+1,o+1)&&E.push(v[o+1][b+1]),l&&this.isWalkableAt(b-1,o+1)&&E.push(v[o+1][b-1]),E},n.prototype.clone=function(){var p,C,b=this.width,o=this.height,E=this.nodes,e=new n(b,o),a=new Array(o);for(p=0;p<o;++p)for(a[p]=new Array(b),C=0;C<b;++C)a[p][C]=new m(C,p,E[p][C].walkable);return e.nodes=a,e},Grid_1=n,Grid_1}var Util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return Util;hasRequiredUtil=1;function m(E){for(var e=[[E.x,E.y]];E.parent;)E=E.parent,e.push([E.x,E.y]);return e.reverse()}Util.backtrace=m;function t(E,e){var a=m(E),x=m(e);return a.concat(x.reverse())}Util.biBacktrace=t;function n(E){var e,a=0,x,c,u,h;for(e=1;e<E.length;++e)x=E[e-1],c=E[e],u=x[0]-c[0],h=x[1]-c[1],a+=Math.sqrt(u*u+h*h);return a}Util.pathLength=n;function p(E,e,a,x){var c=Math.abs,u=[],h,s,l,v,d,g;for(l=c(a-E),v=c(x-e),h=E<a?1:-1,s=e<x?1:-1,d=l-v;u.push([E,e]),!(E===a&&e===x);)g=2*d,g>-v&&(d=d-v,E=E+h),g<l&&(d=d+l,e=e+s);return u}Util.interpolate=p;function C(E){var e=[],a=E.length,x,c,u,h,s,l;if(a<2)return e;for(s=0;s<a-1;++s)for(x=E[s],c=E[s+1],u=p(x[0],x[1],c[0],c[1]),h=u.length,l=0;l<h-1;++l)e.push(u[l]);return e.push(E[a-1]),e}Util.expandPath=C;function b(E,e){var a=e.length,x=e[0][0],c=e[0][1],u=e[a-1][0],h=e[a-1][1],s,l,v,d,g,y,S,T,w,P,A;for(s=x,l=c,g=[[s,l]],y=2;y<a;++y){for(T=e[y],v=T[0],d=T[1],w=p(s,l,v,d),A=!1,S=1;S<w.length;++S)if(P=w[S],!E.isWalkableAt(P[0],P[1])){A=!0;break}A&&(lastValidCoord=e[y-1],g.push(lastValidCoord),s=lastValidCoord[0],l=lastValidCoord[1])}return g.push([u,h]),g}Util.smoothenPath=b;function o(E){if(E.length<3)return E;var e=[],a=E[0][0],x=E[0][1],c=E[1][0],u=E[1][1],h=c-a,s=u-x,l,v,d,g,y,S;for(y=Math.sqrt(h*h+s*s),h/=y,s/=y,e.push([a,x]),S=2;S<E.length;S++)l=c,v=u,d=h,g=s,c=E[S][0],u=E[S][1],h=c-l,s=u-v,y=Math.sqrt(h*h+s*s),h/=y,s/=y,(h!==d||s!==g)&&e.push([l,v]);return e.push([c,u]),e}return Util.compressPath=o,Util}var Heuristic,hasRequiredHeuristic;function requireHeuristic(){return hasRequiredHeuristic||(hasRequiredHeuristic=1,Heuristic={manhattan:function(m,t){return m+t},euclidean:function(m,t){return Math.sqrt(m*m+t*t)},octile:function(m,t){var n=Math.SQRT2-1;return m<t?n*m+t:n*t+m},chebyshev:function(m,t){return Math.max(m,t)}}),Heuristic}var AStarFinder_1,hasRequiredAStarFinder;function requireAStarFinder(){if(hasRequiredAStarFinder)return AStarFinder_1;hasRequiredAStarFinder=1;var m=requireHeap(),t=requireUtil(),n=requireHeuristic(),p=requireDiagonalMovement();function C(b){b=b||{},this.allowDiagonal=b.allowDiagonal,this.dontCrossCorners=b.dontCrossCorners,this.heuristic=b.heuristic||n.manhattan,this.weight=b.weight||1,this.diagonalMovement=b.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=p.OnlyWhenNoObstacles:this.diagonalMovement=p.IfAtMostOneObstacle:this.diagonalMovement=p.Never),this.diagonalMovement===p.Never?this.heuristic=b.heuristic||n.manhattan:this.heuristic=b.heuristic||n.octile}return C.prototype.findPath=function(b,o,E,e,a){var x=new m(function(I,M){return I.f-M.f}),c=a.getNodeAt(b,o),u=a.getNodeAt(E,e),h=this.heuristic,s=this.diagonalMovement,l=this.weight,v=Math.abs,d=Math.SQRT2,g,y,S,T,w,P,A,R;for(c.g=0,c.f=0,x.push(c),c.opened=!0;!x.empty();){if(g=x.pop(),g.closed=!0,g===u)return t.backtrace(u);for(y=a.getNeighbors(g,s),T=0,w=y.length;T<w;++T)S=y[T],!S.closed&&(P=S.x,A=S.y,R=g.g+(P-g.x===0||A-g.y===0?1:d),(!S.opened||R<S.g)&&(S.g=R,S.h=S.h||l*h(v(P-E),v(A-e)),S.f=S.g+S.h,S.parent=g,S.opened?x.updateItem(S):(x.push(S),S.opened=!0)))}return[]},AStarFinder_1=C,AStarFinder_1}var BestFirstFinder_1,hasRequiredBestFirstFinder;function requireBestFirstFinder(){if(hasRequiredBestFirstFinder)return BestFirstFinder_1;hasRequiredBestFirstFinder=1;var m=requireAStarFinder();function t(n){m.call(this,n);var p=this.heuristic;this.heuristic=function(C,b){return p(C,b)*1e6}}return t.prototype=new m,t.prototype.constructor=t,BestFirstFinder_1=t,BestFirstFinder_1}var BreadthFirstFinder_1,hasRequiredBreadthFirstFinder;function requireBreadthFirstFinder(){if(hasRequiredBreadthFirstFinder)return BreadthFirstFinder_1;hasRequiredBreadthFirstFinder=1;var m=requireUtil(),t=requireDiagonalMovement();function n(p){p=p||{},this.allowDiagonal=p.allowDiagonal,this.dontCrossCorners=p.dontCrossCorners,this.diagonalMovement=p.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=t.OnlyWhenNoObstacles:this.diagonalMovement=t.IfAtMostOneObstacle:this.diagonalMovement=t.Never)}return n.prototype.findPath=function(p,C,b,o,E){var e=[],a=this.diagonalMovement,x=E.getNodeAt(p,C),c=E.getNodeAt(b,o),u,h,s,l,v;for(e.push(x),x.opened=!0;e.length;){if(s=e.shift(),s.closed=!0,s===c)return m.backtrace(c);for(u=E.getNeighbors(s,a),l=0,v=u.length;l<v;++l)h=u[l],!(h.closed||h.opened)&&(e.push(h),h.opened=!0,h.parent=s)}return[]},BreadthFirstFinder_1=n,BreadthFirstFinder_1}var DijkstraFinder_1,hasRequiredDijkstraFinder;function requireDijkstraFinder(){if(hasRequiredDijkstraFinder)return DijkstraFinder_1;hasRequiredDijkstraFinder=1;var m=requireAStarFinder();function t(n){m.call(this,n),this.heuristic=function(p,C){return 0}}return t.prototype=new m,t.prototype.constructor=t,DijkstraFinder_1=t,DijkstraFinder_1}var BiAStarFinder_1,hasRequiredBiAStarFinder;function requireBiAStarFinder(){if(hasRequiredBiAStarFinder)return BiAStarFinder_1;hasRequiredBiAStarFinder=1;var m=requireHeap(),t=requireUtil(),n=requireHeuristic(),p=requireDiagonalMovement();function C(b){b=b||{},this.allowDiagonal=b.allowDiagonal,this.dontCrossCorners=b.dontCrossCorners,this.diagonalMovement=b.diagonalMovement,this.heuristic=b.heuristic||n.manhattan,this.weight=b.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=p.OnlyWhenNoObstacles:this.diagonalMovement=p.IfAtMostOneObstacle:this.diagonalMovement=p.Never),this.diagonalMovement===p.Never?this.heuristic=b.heuristic||n.manhattan:this.heuristic=b.heuristic||n.octile}return C.prototype.findPath=function(b,o,E,e,a){var x=function(G,D){return G.f-D.f},c=new m(x),u=new m(x),h=a.getNodeAt(b,o),s=a.getNodeAt(E,e),l=this.heuristic,v=this.diagonalMovement,d=this.weight,g=Math.abs,y=Math.SQRT2,S,T,w,P,A,R,I,M,L=1,N=2;for(h.g=0,h.f=0,c.push(h),h.opened=L,s.g=0,s.f=0,u.push(s),s.opened=N;!c.empty()&&!u.empty();){for(S=c.pop(),S.closed=!0,T=a.getNeighbors(S,v),P=0,A=T.length;P<A;++P)if(w=T[P],!w.closed){if(w.opened===N)return t.biBacktrace(S,w);R=w.x,I=w.y,M=S.g+(R-S.x===0||I-S.y===0?1:y),(!w.opened||M<w.g)&&(w.g=M,w.h=w.h||d*l(g(R-E),g(I-e)),w.f=w.g+w.h,w.parent=S,w.opened?c.updateItem(w):(c.push(w),w.opened=L))}for(S=u.pop(),S.closed=!0,T=a.getNeighbors(S,v),P=0,A=T.length;P<A;++P)if(w=T[P],!w.closed){if(w.opened===L)return t.biBacktrace(w,S);R=w.x,I=w.y,M=S.g+(R-S.x===0||I-S.y===0?1:y),(!w.opened||M<w.g)&&(w.g=M,w.h=w.h||d*l(g(R-b),g(I-o)),w.f=w.g+w.h,w.parent=S,w.opened?u.updateItem(w):(u.push(w),w.opened=N))}}return[]},BiAStarFinder_1=C,BiAStarFinder_1}var BiBestFirstFinder_1,hasRequiredBiBestFirstFinder;function requireBiBestFirstFinder(){if(hasRequiredBiBestFirstFinder)return BiBestFirstFinder_1;hasRequiredBiBestFirstFinder=1;var m=requireBiAStarFinder();function t(n){m.call(this,n);var p=this.heuristic;this.heuristic=function(C,b){return p(C,b)*1e6}}return t.prototype=new m,t.prototype.constructor=t,BiBestFirstFinder_1=t,BiBestFirstFinder_1}var BiBreadthFirstFinder_1,hasRequiredBiBreadthFirstFinder;function requireBiBreadthFirstFinder(){if(hasRequiredBiBreadthFirstFinder)return BiBreadthFirstFinder_1;hasRequiredBiBreadthFirstFinder=1;var m=requireUtil(),t=requireDiagonalMovement();function n(p){p=p||{},this.allowDiagonal=p.allowDiagonal,this.dontCrossCorners=p.dontCrossCorners,this.diagonalMovement=p.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=t.OnlyWhenNoObstacles:this.diagonalMovement=t.IfAtMostOneObstacle:this.diagonalMovement=t.Never)}return n.prototype.findPath=function(p,C,b,o,E){var e=E.getNodeAt(p,C),a=E.getNodeAt(b,o),x=[],c=[],u,h,s,l=this.diagonalMovement,v=0,d=1,g,y;for(x.push(e),e.opened=!0,e.by=v,c.push(a),a.opened=!0,a.by=d;x.length&&c.length;){for(s=x.shift(),s.closed=!0,u=E.getNeighbors(s,l),g=0,y=u.length;g<y;++g)if(h=u[g],!h.closed){if(h.opened){if(h.by===d)return m.biBacktrace(s,h);continue}x.push(h),h.parent=s,h.opened=!0,h.by=v}for(s=c.shift(),s.closed=!0,u=E.getNeighbors(s,l),g=0,y=u.length;g<y;++g)if(h=u[g],!h.closed){if(h.opened){if(h.by===v)return m.biBacktrace(h,s);continue}c.push(h),h.parent=s,h.opened=!0,h.by=d}}return[]},BiBreadthFirstFinder_1=n,BiBreadthFirstFinder_1}var BiDijkstraFinder_1,hasRequiredBiDijkstraFinder;function requireBiDijkstraFinder(){if(hasRequiredBiDijkstraFinder)return BiDijkstraFinder_1;hasRequiredBiDijkstraFinder=1;var m=requireBiAStarFinder();function t(n){m.call(this,n),this.heuristic=function(p,C){return 0}}return t.prototype=new m,t.prototype.constructor=t,BiDijkstraFinder_1=t,BiDijkstraFinder_1}var IDAStarFinder_1,hasRequiredIDAStarFinder;function requireIDAStarFinder(){if(hasRequiredIDAStarFinder)return IDAStarFinder_1;hasRequiredIDAStarFinder=1,requireUtil();var m=requireHeuristic(),t=requireNode(),n=requireDiagonalMovement();function p(C){C=C||{},this.allowDiagonal=C.allowDiagonal,this.dontCrossCorners=C.dontCrossCorners,this.diagonalMovement=C.diagonalMovement,this.heuristic=C.heuristic||m.manhattan,this.weight=C.weight||1,this.trackRecursion=C.trackRecursion||!1,this.timeLimit=C.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=C.heuristic||m.manhattan:this.heuristic=C.heuristic||m.octile}return p.prototype.findPath=function(C,b,o,E,e){var a=new Date().getTime(),x=(function(y,S){return this.heuristic(Math.abs(S.x-y.x),Math.abs(S.y-y.y))}).bind(this),c=function(y,S){return y.x===S.x||y.y===S.y?1:Math.SQRT2},u=(function(y,S,T,w,P){if(this.timeLimit>0&&new Date().getTime()-a>this.timeLimit*1e3)return 1/0;var A=S+x(y,s)*this.weight;if(A>T)return A;if(y==s)return w[P]=[y.x,y.y],y;var R,I,M,L,N=e.getNeighbors(y,this.diagonalMovement);for(M=0,R=1/0;L=N[M];++M){if(this.trackRecursion&&(L.retainCount=L.retainCount+1||1,L.tested!==!0&&(L.tested=!0)),I=u(L,S+c(y,L),T,w,P+1),I instanceof t)return w[P]=[y.x,y.y],I;this.trackRecursion&&--L.retainCount===0&&(L.tested=!1),I<R&&(R=I)}return R}).bind(this),h=e.getNodeAt(C,b),s=e.getNodeAt(o,E),l=x(h,s),v,d,g;for(v=0;;++v){if(d=[],g=u(h,0,l,d,0),g===1/0)return[];if(g instanceof t)return d;l=g}return[]},IDAStarFinder_1=p,IDAStarFinder_1}var JumpPointFinderBase_1,hasRequiredJumpPointFinderBase;function requireJumpPointFinderBase(){if(hasRequiredJumpPointFinderBase)return JumpPointFinderBase_1;hasRequiredJumpPointFinderBase=1;var m=requireHeap(),t=requireUtil(),n=requireHeuristic();requireDiagonalMovement();function p(C){C=C||{},this.heuristic=C.heuristic||n.manhattan,this.trackJumpRecursion=C.trackJumpRecursion||!1}return p.prototype.findPath=function(C,b,o,E,e){var a=this.openList=new m(function(h,s){return h.f-s.f}),x=this.startNode=e.getNodeAt(C,b),c=this.endNode=e.getNodeAt(o,E),u;for(this.grid=e,x.g=0,x.f=0,a.push(x),x.opened=!0;!a.empty();){if(u=a.pop(),u.closed=!0,u===c)return t.expandPath(t.backtrace(c));this._identifySuccessors(u)}return[]},p.prototype._identifySuccessors=function(C){var b=this.grid,o=this.heuristic,E=this.openList,e=this.endNode.x,a=this.endNode.y,x,c,u,h,s,l=C.x,v=C.y,d,g,y,S,T,w=Math.abs;for(x=this._findNeighbors(C),h=0,s=x.length;h<s;++h)if(c=x[h],u=this._jump(c[0],c[1],l,v),u){if(d=u[0],g=u[1],T=b.getNodeAt(d,g),T.closed)continue;y=n.octile(w(d-l),w(g-v)),S=C.g+y,(!T.opened||S<T.g)&&(T.g=S,T.h=T.h||o(w(d-e),w(g-a)),T.f=T.g+T.h,T.parent=C,T.opened?E.updateItem(T):(E.push(T),T.opened=!0))}},JumpPointFinderBase_1=p,JumpPointFinderBase_1}var JPFNeverMoveDiagonally_1,hasRequiredJPFNeverMoveDiagonally;function requireJPFNeverMoveDiagonally(){if(hasRequiredJPFNeverMoveDiagonally)return JPFNeverMoveDiagonally_1;hasRequiredJPFNeverMoveDiagonally=1;var m=requireJumpPointFinderBase(),t=requireDiagonalMovement();function n(p){m.call(this,p)}return n.prototype=new m,n.prototype.constructor=n,n.prototype._jump=function(p,C,b,o){var E=this.grid,e=p-b,a=C-o;if(!E.isWalkableAt(p,C))return null;if(this.trackJumpRecursion===!0&&(E.getNodeAt(p,C).tested=!0),E.getNodeAt(p,C)===this.endNode)return[p,C];if(e!==0){if(E.isWalkableAt(p,C-1)&&!E.isWalkableAt(p-e,C-1)||E.isWalkableAt(p,C+1)&&!E.isWalkableAt(p-e,C+1))return[p,C]}else if(a!==0){if(E.isWalkableAt(p-1,C)&&!E.isWalkableAt(p-1,C-a)||E.isWalkableAt(p+1,C)&&!E.isWalkableAt(p+1,C-a))return[p,C];if(this._jump(p+1,C,p,C)||this._jump(p-1,C,p,C))return[p,C]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(p+e,C+a,p,C)},n.prototype._findNeighbors=function(p){var C=p.parent,b=p.x,o=p.y,E=this.grid,e,a,x,c,u=[],h,s,l,v;if(C)e=C.x,a=C.y,x=(b-e)/Math.max(Math.abs(b-e),1),c=(o-a)/Math.max(Math.abs(o-a),1),x!==0?(E.isWalkableAt(b,o-1)&&u.push([b,o-1]),E.isWalkableAt(b,o+1)&&u.push([b,o+1]),E.isWalkableAt(b+x,o)&&u.push([b+x,o])):c!==0&&(E.isWalkableAt(b-1,o)&&u.push([b-1,o]),E.isWalkableAt(b+1,o)&&u.push([b+1,o]),E.isWalkableAt(b,o+c)&&u.push([b,o+c]));else for(h=E.getNeighbors(p,t.Never),l=0,v=h.length;l<v;++l)s=h[l],u.push([s.x,s.y]);return u},JPFNeverMoveDiagonally_1=n,JPFNeverMoveDiagonally_1}var JPFAlwaysMoveDiagonally_1,hasRequiredJPFAlwaysMoveDiagonally;function requireJPFAlwaysMoveDiagonally(){if(hasRequiredJPFAlwaysMoveDiagonally)return JPFAlwaysMoveDiagonally_1;hasRequiredJPFAlwaysMoveDiagonally=1;var m=requireJumpPointFinderBase(),t=requireDiagonalMovement();function n(p){m.call(this,p)}return n.prototype=new m,n.prototype.constructor=n,n.prototype._jump=function(p,C,b,o){var E=this.grid,e=p-b,a=C-o;if(!E.isWalkableAt(p,C))return null;if(this.trackJumpRecursion===!0&&(E.getNodeAt(p,C).tested=!0),E.getNodeAt(p,C)===this.endNode)return[p,C];if(e!==0&&a!==0){if(E.isWalkableAt(p-e,C+a)&&!E.isWalkableAt(p-e,C)||E.isWalkableAt(p+e,C-a)&&!E.isWalkableAt(p,C-a))return[p,C];if(this._jump(p+e,C,p,C)||this._jump(p,C+a,p,C))return[p,C]}else if(e!==0){if(E.isWalkableAt(p+e,C+1)&&!E.isWalkableAt(p,C+1)||E.isWalkableAt(p+e,C-1)&&!E.isWalkableAt(p,C-1))return[p,C]}else if(E.isWalkableAt(p+1,C+a)&&!E.isWalkableAt(p+1,C)||E.isWalkableAt(p-1,C+a)&&!E.isWalkableAt(p-1,C))return[p,C];return this._jump(p+e,C+a,p,C)},n.prototype._findNeighbors=function(p){var C=p.parent,b=p.x,o=p.y,E=this.grid,e,a,x,c,u=[],h,s,l,v;if(C)e=C.x,a=C.y,x=(b-e)/Math.max(Math.abs(b-e),1),c=(o-a)/Math.max(Math.abs(o-a),1),x!==0&&c!==0?(E.isWalkableAt(b,o+c)&&u.push([b,o+c]),E.isWalkableAt(b+x,o)&&u.push([b+x,o]),E.isWalkableAt(b+x,o+c)&&u.push([b+x,o+c]),E.isWalkableAt(b-x,o)||u.push([b-x,o+c]),E.isWalkableAt(b,o-c)||u.push([b+x,o-c])):x===0?(E.isWalkableAt(b,o+c)&&u.push([b,o+c]),E.isWalkableAt(b+1,o)||u.push([b+1,o+c]),E.isWalkableAt(b-1,o)||u.push([b-1,o+c])):(E.isWalkableAt(b+x,o)&&u.push([b+x,o]),E.isWalkableAt(b,o+1)||u.push([b+x,o+1]),E.isWalkableAt(b,o-1)||u.push([b+x,o-1]));else for(h=E.getNeighbors(p,t.Always),l=0,v=h.length;l<v;++l)s=h[l],u.push([s.x,s.y]);return u},JPFAlwaysMoveDiagonally_1=n,JPFAlwaysMoveDiagonally_1}var JPFMoveDiagonallyIfNoObstacles_1,hasRequiredJPFMoveDiagonallyIfNoObstacles;function requireJPFMoveDiagonallyIfNoObstacles(){if(hasRequiredJPFMoveDiagonallyIfNoObstacles)return JPFMoveDiagonallyIfNoObstacles_1;hasRequiredJPFMoveDiagonallyIfNoObstacles=1;var m=requireJumpPointFinderBase(),t=requireDiagonalMovement();function n(p){m.call(this,p)}return n.prototype=new m,n.prototype.constructor=n,n.prototype._jump=function(p,C,b,o){var E=this.grid,e=p-b,a=C-o;if(!E.isWalkableAt(p,C))return null;if(this.trackJumpRecursion===!0&&(E.getNodeAt(p,C).tested=!0),E.getNodeAt(p,C)===this.endNode)return[p,C];if(e!==0&&a!==0){if(this._jump(p+e,C,p,C)||this._jump(p,C+a,p,C))return[p,C]}else if(e!==0){if(E.isWalkableAt(p,C-1)&&!E.isWalkableAt(p-e,C-1)||E.isWalkableAt(p,C+1)&&!E.isWalkableAt(p-e,C+1))return[p,C]}else if(a!==0&&(E.isWalkableAt(p-1,C)&&!E.isWalkableAt(p-1,C-a)||E.isWalkableAt(p+1,C)&&!E.isWalkableAt(p+1,C-a)))return[p,C];return E.isWalkableAt(p+e,C)&&E.isWalkableAt(p,C+a)?this._jump(p+e,C+a,p,C):null},n.prototype._findNeighbors=function(p){var C=p.parent,b=p.x,o=p.y,E=this.grid,e,a,x,c,u=[],h,s,l,v;if(C)if(e=C.x,a=C.y,x=(b-e)/Math.max(Math.abs(b-e),1),c=(o-a)/Math.max(Math.abs(o-a),1),x!==0&&c!==0)E.isWalkableAt(b,o+c)&&u.push([b,o+c]),E.isWalkableAt(b+x,o)&&u.push([b+x,o]),E.isWalkableAt(b,o+c)&&E.isWalkableAt(b+x,o)&&u.push([b+x,o+c]);else{var d;if(x!==0){d=E.isWalkableAt(b+x,o);var g=E.isWalkableAt(b,o+1),y=E.isWalkableAt(b,o-1);d&&(u.push([b+x,o]),g&&u.push([b+x,o+1]),y&&u.push([b+x,o-1])),g&&u.push([b,o+1]),y&&u.push([b,o-1])}else if(c!==0){d=E.isWalkableAt(b,o+c);var S=E.isWalkableAt(b+1,o),T=E.isWalkableAt(b-1,o);d&&(u.push([b,o+c]),S&&u.push([b+1,o+c]),T&&u.push([b-1,o+c])),S&&u.push([b+1,o]),T&&u.push([b-1,o])}}else for(h=E.getNeighbors(p,t.OnlyWhenNoObstacles),l=0,v=h.length;l<v;++l)s=h[l],u.push([s.x,s.y]);return u},JPFMoveDiagonallyIfNoObstacles_1=n,JPFMoveDiagonallyIfNoObstacles_1}var JPFMoveDiagonallyIfAtMostOneObstacle_1,hasRequiredJPFMoveDiagonallyIfAtMostOneObstacle;function requireJPFMoveDiagonallyIfAtMostOneObstacle(){if(hasRequiredJPFMoveDiagonallyIfAtMostOneObstacle)return JPFMoveDiagonallyIfAtMostOneObstacle_1;hasRequiredJPFMoveDiagonallyIfAtMostOneObstacle=1;var m=requireJumpPointFinderBase(),t=requireDiagonalMovement();function n(p){m.call(this,p)}return n.prototype=new m,n.prototype.constructor=n,n.prototype._jump=function(p,C,b,o){var E=this.grid,e=p-b,a=C-o;if(!E.isWalkableAt(p,C))return null;if(this.trackJumpRecursion===!0&&(E.getNodeAt(p,C).tested=!0),E.getNodeAt(p,C)===this.endNode)return[p,C];if(e!==0&&a!==0){if(E.isWalkableAt(p-e,C+a)&&!E.isWalkableAt(p-e,C)||E.isWalkableAt(p+e,C-a)&&!E.isWalkableAt(p,C-a))return[p,C];if(this._jump(p+e,C,p,C)||this._jump(p,C+a,p,C))return[p,C]}else if(e!==0){if(E.isWalkableAt(p+e,C+1)&&!E.isWalkableAt(p,C+1)||E.isWalkableAt(p+e,C-1)&&!E.isWalkableAt(p,C-1))return[p,C]}else if(E.isWalkableAt(p+1,C+a)&&!E.isWalkableAt(p+1,C)||E.isWalkableAt(p-1,C+a)&&!E.isWalkableAt(p-1,C))return[p,C];return E.isWalkableAt(p+e,C)||E.isWalkableAt(p,C+a)?this._jump(p+e,C+a,p,C):null},n.prototype._findNeighbors=function(p){var C=p.parent,b=p.x,o=p.y,E=this.grid,e,a,x,c,u=[],h,s,l,v;if(C)e=C.x,a=C.y,x=(b-e)/Math.max(Math.abs(b-e),1),c=(o-a)/Math.max(Math.abs(o-a),1),x!==0&&c!==0?(E.isWalkableAt(b,o+c)&&u.push([b,o+c]),E.isWalkableAt(b+x,o)&&u.push([b+x,o]),(E.isWalkableAt(b,o+c)||E.isWalkableAt(b+x,o))&&u.push([b+x,o+c]),!E.isWalkableAt(b-x,o)&&E.isWalkableAt(b,o+c)&&u.push([b-x,o+c]),!E.isWalkableAt(b,o-c)&&E.isWalkableAt(b+x,o)&&u.push([b+x,o-c])):x===0?E.isWalkableAt(b,o+c)&&(u.push([b,o+c]),E.isWalkableAt(b+1,o)||u.push([b+1,o+c]),E.isWalkableAt(b-1,o)||u.push([b-1,o+c])):E.isWalkableAt(b+x,o)&&(u.push([b+x,o]),E.isWalkableAt(b,o+1)||u.push([b+x,o+1]),E.isWalkableAt(b,o-1)||u.push([b+x,o-1]));else for(h=E.getNeighbors(p,t.IfAtMostOneObstacle),l=0,v=h.length;l<v;++l)s=h[l],u.push([s.x,s.y]);return u},JPFMoveDiagonallyIfAtMostOneObstacle_1=n,JPFMoveDiagonallyIfAtMostOneObstacle_1}var JumpPointFinder_1,hasRequiredJumpPointFinder;function requireJumpPointFinder(){if(hasRequiredJumpPointFinder)return JumpPointFinder_1;hasRequiredJumpPointFinder=1;var m=requireDiagonalMovement(),t=requireJPFNeverMoveDiagonally(),n=requireJPFAlwaysMoveDiagonally(),p=requireJPFMoveDiagonallyIfNoObstacles(),C=requireJPFMoveDiagonallyIfAtMostOneObstacle();function b(o){return o=o||{},o.diagonalMovement===m.Never?new t(o):o.diagonalMovement===m.Always?new n(o):o.diagonalMovement===m.OnlyWhenNoObstacles?new p(o):new C(o)}return JumpPointFinder_1=b,JumpPointFinder_1}var PathFinding,hasRequiredPathFinding;function requirePathFinding(){return hasRequiredPathFinding||(hasRequiredPathFinding=1,PathFinding={Heap:requireHeap(),Node:requireNode(),Grid:requireGrid(),Util:requireUtil(),DiagonalMovement:requireDiagonalMovement(),Heuristic:requireHeuristic(),AStarFinder:requireAStarFinder(),BestFirstFinder:requireBestFirstFinder(),BreadthFirstFinder:requireBreadthFirstFinder(),DijkstraFinder:requireDijkstraFinder(),BiAStarFinder:requireBiAStarFinder(),BiBestFirstFinder:requireBiBestFirstFinder(),BiBreadthFirstFinder:requireBiBreadthFirstFinder(),BiDijkstraFinder:requireBiDijkstraFinder(),IDAStarFinder:requireIDAStarFinder(),JumpPointFinder:requireJumpPointFinder()}),PathFinding}var pathfinding,hasRequiredPathfinding;function requirePathfinding(){return hasRequiredPathfinding||(hasRequiredPathfinding=1,pathfinding=requirePathFinding()),pathfinding}var pathfindingExports=requirePathfinding(),Animation=(m=>(m.Left="player_left",m.Right="player_right",m.Up="player_up",m.Down="player_down",m))(Animation||{});const Velocity={Horizontal:175,Vertical:175};class Player extends Phaser$1.Physics.Arcade.Sprite{constructor(n,p,C,b=key.atlas.player,o="misa-front"){super(n,p,C,b,o);ge(this,"body");ge(this,"cursors");ge(this,"selector");ge(this,"inventory",{promptUtils:[],tools:[]});n.add.existing(this),n.physics.world.enable(this),n.physics.add.existing(this),this.setSize(32,42).setOffset(0,22),this.setCollideWorldBounds(!0),n.cameras.main.startFollow(this),n.cameras.main.setZoom(1),this.cursors=this.createCursorKeys(),this.createAnimations(),this.selector=n.physics.add.staticBody(p-8,C+32,16,16)}addPromptUtils(n){this.inventory.promptUtils.push(n)}getPromptUtils(){return this.inventory.promptUtils}createCursorKeys(){return this.scene.input.keyboard.addKeys("w,a,s,d,up,left,down,right,space")}createAnimations(){const n=this.scene.anims;n.exists("player_left")||n.create({key:"player_left",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-left-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_right")||n.create({key:"player_right",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-right-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_up")||n.create({key:"player_up",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-back-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),n.exists("player_down")||n.create({key:"player_down",frames:n.generateFrameNames(key.atlas.player,{prefix:"misa-front-walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1})}moveSelector(n){const{body:p,selector:C}=this;switch(n){case"player_left":C.x=p.x-19,C.y=p.y+14;break;case"player_right":C.x=p.x+35,C.y=p.y+14;break;case"player_up":C.x=p.x+8,C.y=p.y-18;break;case"player_down":C.x=p.x+8,C.y=p.y+46;break}}update(){const{anims:n,body:p,cursors:C}=this,b=p.velocity.clone();switch(p.setVelocity(0),!0){case C.left.isDown:case C.a.isDown:p.setVelocityX(-175);break;case C.right.isDown:case C.d.isDown:p.setVelocityX(Velocity.Horizontal);break}switch(!0){case C.up.isDown:case C.w.isDown:p.setVelocityY(-175);break;case C.down.isDown:case C.s.isDown:p.setVelocityY(Velocity.Vertical);break}switch(p.velocity.normalize().scale(Velocity.Horizontal),!0){case C.left.isDown:case C.a.isDown:n.play("player_left",!0),this.moveSelector("player_left");break;case C.right.isDown:case C.d.isDown:n.play("player_right",!0),this.moveSelector("player_right");break;case C.up.isDown:case C.w.isDown:n.play("player_up",!0),this.moveSelector("player_up");break;case C.down.isDown:case C.s.isDown:n.play("player_down",!0),this.moveSelector("player_down");break;default:switch(n.stop(),!0){case b.x<0:this.setTexture(key.atlas.player,"misa-left"),this.moveSelector("player_left");break;case b.x>0:this.setTexture(key.atlas.player,"misa-right"),this.moveSelector("player_right");break;case b.y<0:this.setTexture(key.atlas.player,"misa-back"),this.moveSelector("player_up");break;case b.y>0:this.setTexture(key.atlas.player,"misa-front"),this.moveSelector("player_down");break}}}}function setupKeyListeners(m,t){const n=new Map;return m.forEach(p=>{n.set(p.triggerKey,t.keyboard.addKey(p.triggerKey))}),n}function initKeyboardInputs(){return this.input.keyboard?this.input.keyboard.addKeys({up:Phaser$1.Input.Keyboard.KeyCodes.UP,down:Phaser$1.Input.Keyboard.KeyCodes.DOWN,left:Phaser$1.Input.Keyboard.KeyCodes.LEFT,right:Phaser$1.Input.Keyboard.KeyCodes.RIGHT,w:Phaser$1.Input.Keyboard.KeyCodes.W,a:Phaser$1.Input.Keyboard.KeyCodes.A,s:Phaser$1.Input.Keyboard.KeyCodes.S,d:Phaser$1.Input.Keyboard.KeyCodes.D,one:Phaser$1.Input.Keyboard.KeyCodes.ONE,seven:Phaser$1.Input.Keyboard.KeyCodes.SEVEN,eight:Phaser$1.Input.Keyboard.KeyCodes.EIGHT,nine:Phaser$1.Input.Keyboard.KeyCodes.NINE,space:Phaser$1.Input.Keyboard.KeyCodes.SPACE}):null}let cachedGrid=null;function createOrUpdateGrid(m,t=!1){return(!cachedGrid||t)&&(cachedGrid=createGridFromTilemap(m)),cachedGrid}async function transmitReport(m,t,n,p,C=3e3){return new Promise(async b=>{t.scene.tweens.add({targets:t,x:n,y:p,duration:C,ease:"Linear",onComplete:()=>{b()}}),await popupEvent(m,n,p,"Send Report to Next Department")})}async function autoControlAgent(m,t,n,p,C,b="none"){return new Promise(async o=>{console.log("go destination",p,C);const E=new pathfindingExports.AStarFinder;m.tweens.isTweening(t)&&m.tweens.killTweensOf(t);const e=createOrUpdateGrid(n),a=Math.floor(t.x/n.tileWidth),x=Math.floor(t.y/n.tileHeight),c=Math.floor(p/n.tileWidth),u=Math.floor(C/n.tileHeight);console.log("go target pos",a,x,c,u);let h=E.findPath(a,x,c,u,e.clone());if(h.length>1&&h.shift(),t.pathGraphics?t.pathGraphics.clear():t.pathGraphics=m.add.graphics(),t.targetCircle&&t.targetCircle.destroy(),createTargetCircle(m,c,u,n,t),drawDashedPath(m,h,n,t),console.log(`🚀 Moving agent to (${c}, ${u})`),h.length===0){console.log("❌ No valid path, resolving immediately."),o();return}await asyncMoveAlongPath(m,t,h,n),await popupEvent(m,p,C,b),console.log("✅ Agent reached target!"),o()})}async function popupEvent(m,t,n,p){const C=m.add.text(t,n,p,{fontSize:"12px",color:"#ffffff",stroke:"#000000",strokeThickness:3});m.tweens.add({targets:C,y:n-100,alpha:0,duration:2e3,ease:"Linear",onComplete:()=>{C.destroy()}})}async function asyncMoveAlongPath(m,t,n,p){return new Promise(C=>{const b=t;if(!n||n.length===0){console.log("✅ Path complete, stopping animation!"),b.targetCircle&&(b.targetCircle.destroy(),b.targetCircle=null),b.pathGraphics&&b.pathGraphics.clear(),t.anims.stop(),C();return}const o=n.shift(),E=o[0]*p.tileWidth+p.tileWidth/2,e=o[1]*p.tileHeight+p.tileHeight/2,a=E-t.x,x=e-t.y;t.anims&&(Math.abs(a)>Math.abs(x)?t.anims.play(a>0?Animation.Right:Animation.Left,!0):t.anims.play(x>0?Animation.Down:Animation.Up,!0)),m.tweens.add({targets:t,x:E,y:e,duration:500,ease:"Linear",onComplete:async()=>{if(drawDashedPath(m,n,p,t),n.length===0){console.log("✅ Final destination reached!"),b.targetCircle&&(b.targetCircle.destroy(),b.targetCircle=null),b.pathGraphics&&b.pathGraphics.clear(),t.anims&&t.anims.stop(),C();return}await asyncMoveAlongPath(m,t,n,p),C()}})})}function createTargetCircle(m,t,n,p,C){const b=C;b.targetCircle&&b.targetCircle.destroy();const o=t*p.tileWidth+p.tileWidth/2,E=n*p.tileHeight+p.tileHeight/2;b.targetCircle=m.add.graphics(),b.targetCircle.lineStyle(4,16711680,1),b.targetCircle.strokeCircle(o,E,p.tileWidth/2),m.tweens.add({targets:b.targetCircle,alpha:0,duration:500,yoyo:!0,repeat:-1})}function drawDashedPath(m,t,n,p){const C=p;C.pathGraphics?C.pathGraphics.clear():C.pathGraphics=m.add.graphics(),C.pathGraphics.lineStyle(2,65280,1);for(let b=0;b<t.length-1;b++){const o=t[b][0]*n.tileWidth+n.tileWidth/2,E=t[b][1]*n.tileHeight+n.tileHeight/2,e=t[b+1][0]*n.tileWidth+n.tileWidth/2,a=t[b+1][1]*n.tileHeight+n.tileHeight/2;drawDashedLine(C.pathGraphics,o,E,e,a,10,5)}}function drawDashedLine(m,t,n,p,C,b,o){const E=p-t,e=C-n,a=Math.sqrt(E*E+e*e),x=Math.floor(a/(b+o));for(let c=0;c<x;c++){const u=c/x,h=(c+.5)/x,s=t+E*u,l=n+e*u,v=t+E*h,d=n+e*h;m.moveTo(s,l),m.lineTo(v,d)}m.strokePath()}function controlCameraMovements(m,t,n=5){const p=m.cameras.main;(t.w.isDown||t.a.isDown||t.s.isDown||t.d.isDown)&&m.isCameraFollowing&&(m.isCameraFollowing=!1,p.stopFollow()),m.isCameraFollowing||(t.w.isDown&&(p.scrollY-=n),t.s.isDown&&(p.scrollY+=n),t.a.isDown&&(p.scrollX-=n),t.d.isDown&&(p.scrollX+=n))}const EventBus=new phaserExports.Events.EventEmitter;function getAllAgents(m){return m.map(t=>({zone:t.zone,agents:Array.from(t.agentsInside),name:t.zoneName}))}function areAllZonesOccupied(m){return m.every(t=>t.agentsInside.size>0)}function setZonesCollisionDetection(m,t,n){t.forEach(p=>{m.physics.add.overlap(n,p.zone,(C,b)=>{p.agentsInside.has(b.getName())||(p.agentsInside.add(b.getName()),console.log(`detection: Agent ${b.getName()} entered the area`,p.zone),console.log("zones data, agents entered",t))})})}function setZonesExitingDecoration(m,t){m.forEach(n=>{t.getChildren().forEach(p=>{!Phaser.Geom.Intersects.RectangleToRectangle(p.getBounds(),n.zone.getBounds())&&n.agentsInside.has(p.getName())&&(n.agentsInside.delete(p.getName()),console.log(`detection: Agent ${p.getName()} exited parallel area`,n.zone))})})}function setupZones(m,t,n){const p=t.objects.filter(b=>b.name===n);console.log("zoneDataList",p);const C=[];return p.forEach(b=>{const o=b.x+b.width/2,E=b.y+b.height/2,e=m.add.zone(o,E,b.width,b.height);m.physics.world.enable(e),e.body.setAllowGravity(!1),e.body.setImmovable(!0);const a=m.add.rectangle(o,E+20,50,15,0,.5).setOrigin(.5).setDepth(1e3),x=m.add.text(o,E+20,"idle",{fontSize:"10px",color:"#ffffff",fontFamily:"Arial",align:"center"}).setOrigin(.5).setDepth(1001);m.roomStatusTexts.push(x),b.name!=="chaining"&&m.add.image(o-35,E+20,"hiring").setDepth(1002).setInteractive().on("pointerdown",()=>{const h=getZoneBounds(e),{x:s,y:l}=generateNonCollidingAgentPosition(m.controllableCharacters,h),v=new Agent(m,s,l,"player","misa-front","Agent "+m.controllableCharacters.length);m.agentGroup.add(v),m.controllableCharacters.push(v),m.agentList.set(v.getName(),v),C.forEach(d=>{d.zone===e&&d.agentsInside.add(v)}),console.log("New agent added at",s,l)});const c=m.add.image(o+35,E+20,"idle").setDepth(1001).setScale(1);m.zoneBackgrounds.push(a),console.log("zoneBackgrounds",m.zoneBackgrounds),C.push({zone:e,agentsInside:new Set,name:b.name,ui:{background:a,text:x,stateIcon:c},task:""})}),console.log("from setupZones",C),C}async function updateStateIcons(m,t,n=null){n!==null?m[n]&&m[n].ui&&m[n].ui.stateIcon&&m[n].ui.stateIcon.setTexture(t):m.forEach(p=>{p.ui&&p.ui.stateIcon&&p.ui.stateIcon.setTexture(t)})}function createItem(m,t,n,p,C=.25){const b=m.create(t,n,p).setScale(C);this.physics.world.enable(b);const{width:o,height:E}=b;b.body.setSize(o*C,E*C),b.body.setOffset((o-o*C)/2,(E-E*C)/2)}function setupScene(m="tuxemon"){if(addSceneNameHUD.call(this),addCreditsHUD.call(this),this.agentGroup=this.physics.add.group(),this.cursors=initKeyboardInputs.call(this),m==="office"){this.tilemap=this.make.tilemap({key:key.tilemap.office}),console.log("tilemap: ",this.tilemap),console.log(`
      tilesetRoomBuilder Parameters: 
      name: ${ROOM_BUILDER_OFFICE_TILESET_NAME},
      key: ${key.image.room_builder_office};
      tilesetOffice Parameters:
      name: ${OFFICE_TILSET_NAME},
      key: ${key.image.office};
      `);const E=this.tilemap.addTilesetImage(ROOM_BUILDER_OFFICE_TILESET_NAME,key.image.room_builder_office),e=this.tilemap.addTilesetImage(OFFICE_TILSET_NAME,key.image.office),a=this.tilemap.addTilesetImage(EXTERIOR_TILESET_NAME,key.image.exterior),x=this.tilemap.addTilesetImage(INTERIOR_TILESET_NAME,key.image.interior);console.log("Tileset Office:",e),console.log("Tileset Room Builder:",E),this.BelowPlayer=this.tilemap.createLayer(TilemapLayer.BelowPlayer,[e,E,a,x],0,0),this.worldLayer=this.tilemap.createLayer(TilemapLayer.World,[e,E,a,x],0,0),this.aboveLayer=this.tilemap.createLayer(TilemapLayer.AbovePlayer,[e,E,a,x],0,0);const c=this.tilemap.getObjectLayer("Objects");this.parallelZones=setupZones(this,c,"parallel"),this.votingZones=setupZones(this,c,"voting"),this.chainingZones=setupZones(this,c,"chaining"),this.routeZones=setupZones(this,c,"routing"),console.log("Tile properties:",this.worldLayer.layer.properties),this.worldLayer.setCollisionByProperty({collides:!0}),this.aboveLayer.setDepth(10)}else{this.tilemap=this.make.tilemap({key:key.tilemap.tuxemon}),console.log(`
      tileset Parameters:
      name: ${TILESET_NAME},
      key: ${key.image.tuxemon};
      `);const E=this.tilemap.addTilesetImage(TILESET_NAME,key.image.tuxemon);this.tilemap.createLayer(TilemapLayer.BelowPlayer,E,0,0),this.worldLayer=this.tilemap.createLayer(TilemapLayer.World,E,0,0);const e=this.tilemap.createLayer(TilemapLayer.AbovePlayer,E,0,0);console.log("Tile properties:",this.worldLayer.layer.properties),this.worldLayer.setCollisionByProperty({collides:!0}),e.setDepth(Depth.AbovePlayer)}this.itemGroup=this.physics.add.staticGroup(),this.deductiveItem=this.physics.add.staticGroup(),this.debatePositionGroup=this.physics.add.staticGroup(),console.log("physical bounds: ",this.worldLayer.width,this.worldLayer.height),this.physics.world.bounds.width=this.worldLayer.width,this.physics.world.bounds.height=this.worldLayer.height,console.log("physical bounds: ",this.physics.world.bounds.width,this.physics.world.bounds.height),this.cameras.main.setBounds(0,0,this.tilemap.widthInPixels,this.tilemap.heightInPixels);const t=50,n=20,p=75,C=520,b=this.add.rectangle(50,400,50,50,0).setDepth(1002).setStrokeStyle(2,16777215).setInteractive().setScrollFactor(0).setAlpha(.5),o=this.add.text(30,390,`History 
Message`,{fontSize:"10px",color:"#ffffff"}).setScrollFactor(0).setDepth(1003);this.hudElements&&this.hudElements.push(b,o),b.on("pointerdown",E=>{EventBus.emit("open-constitution")}),this.controlMapping=[{activateIndex:0,triggerKey:Phaser.Input.Keyboard.KeyCodes.ONE},{activateIndex:1,triggerKey:Phaser.Input.Keyboard.KeyCodes.TWO},{activateIndex:2,triggerKey:Phaser.Input.Keyboard.KeyCodes.THREE}],this.keyMap=setupKeyListeners(this.controlMapping,this.input);for(let E=0;E<3;E++){const e=this.add.text(p+E*(t+n)-15,C-15,"empty",{fontSize:"10px",color:"#ffffff",wordWrap:{width:t,useAdvancedWrap:!0}});this.promptTexts.push(e),e.setScrollFactor(0),e.setDepth(1e3)}}function createGridFromTilemap(m){const t=new pathfindingExports.Grid(m.width,m.height);return m.layers.forEach(n=>{for(let p=0;p<m.height;p++)for(let C=0;C<m.width;C++){const b=m.getTileAt(C,p,!1,n.name);b&&b.properties&&b.properties.collides&&t.setWalkableAt(C,p,!1)}}),t}function bind(m,t){return function(){return m.apply(t,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(m=>t=>{const n=toString$1.call(t);return m[n]||(m[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=m=>(m=m.toLowerCase(),t=>kindOf(t)===m),typeOfTest=m=>t=>typeof t===m,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(m){return m!==null&&!isUndefined(m)&&m.constructor!==null&&!isUndefined(m.constructor)&&isFunction$1(m.constructor.isBuffer)&&m.constructor.isBuffer(m)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(m){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(m):t=m&&m.buffer&&isArrayBuffer(m.buffer),t}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=m=>m!==null&&typeof m=="object",isBoolean=m=>m===!0||m===!1,isPlainObject=m=>{if(kindOf(m)!=="object")return!1;const t=getPrototypeOf(m);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in m)&&!(Symbol.iterator in m)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=m=>isObject(m)&&isFunction$1(m.pipe),isFormData=m=>{let t;return m&&(typeof FormData=="function"&&m instanceof FormData||isFunction$1(m.append)&&((t=kindOf(m))==="formdata"||t==="object"&&isFunction$1(m.toString)&&m.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=m=>m.trim?m.trim():m.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(m,t,{allOwnKeys:n=!1}={}){if(m===null||typeof m>"u")return;let p,C;if(typeof m!="object"&&(m=[m]),isArray$1(m))for(p=0,C=m.length;p<C;p++)t.call(null,m[p],p,m);else{const b=n?Object.getOwnPropertyNames(m):Object.keys(m),o=b.length;let E;for(p=0;p<o;p++)E=b[p],t.call(null,m[E],E,m)}}function findKey(m,t){t=t.toLowerCase();const n=Object.keys(m);let p=n.length,C;for(;p-- >0;)if(C=n[p],t===C.toLowerCase())return C;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=m=>!isUndefined(m)&&m!==_global;function merge(){const{caseless:m}=isContextDefined(this)&&this||{},t={},n=(p,C)=>{const b=m&&findKey(t,C)||C;isPlainObject(t[b])&&isPlainObject(p)?t[b]=merge(t[b],p):isPlainObject(p)?t[b]=merge({},p):isArray$1(p)?t[b]=p.slice():t[b]=p};for(let p=0,C=arguments.length;p<C;p++)arguments[p]&&forEach(arguments[p],n);return t}const extend$1=(m,t,n,{allOwnKeys:p}={})=>(forEach(t,(C,b)=>{n&&isFunction$1(C)?m[b]=bind(C,n):m[b]=C},{allOwnKeys:p}),m),stripBOM=m=>(m.charCodeAt(0)===65279&&(m=m.slice(1)),m),inherits=(m,t,n,p)=>{m.prototype=Object.create(t.prototype,p),m.prototype.constructor=m,Object.defineProperty(m,"super",{value:t.prototype}),n&&Object.assign(m.prototype,n)},toFlatObject=(m,t,n,p)=>{let C,b,o;const E={};if(t=t||{},m==null)return t;do{for(C=Object.getOwnPropertyNames(m),b=C.length;b-- >0;)o=C[b],(!p||p(o,m,t))&&!E[o]&&(t[o]=m[o],E[o]=!0);m=n!==!1&&getPrototypeOf(m)}while(m&&(!n||n(m,t))&&m!==Object.prototype);return t},endsWith=(m,t,n)=>{m=String(m),(n===void 0||n>m.length)&&(n=m.length),n-=t.length;const p=m.indexOf(t,n);return p!==-1&&p===n},toArray$1=m=>{if(!m)return null;if(isArray$1(m))return m;let t=m.length;if(!isNumber(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=m[t];return n},isTypedArray=(m=>t=>m&&t instanceof m)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(m,t)=>{const p=(m&&m[Symbol.iterator]).call(m);let C;for(;(C=p.next())&&!C.done;){const b=C.value;t.call(m,b[0],b[1])}},matchAll=(m,t)=>{let n;const p=[];for(;(n=m.exec(t))!==null;)p.push(n);return p},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=m=>m.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,p,C){return p.toUpperCase()+C}),hasOwnProperty$1=(({hasOwnProperty:m})=>(t,n)=>m.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(m,t)=>{const n=Object.getOwnPropertyDescriptors(m),p={};forEach(n,(C,b)=>{let o;(o=t(C,b,m))!==!1&&(p[b]=o||C)}),Object.defineProperties(m,p)},freezeMethods=m=>{reduceDescriptors(m,(t,n)=>{if(isFunction$1(m)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const p=m[n];if(isFunction$1(p)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(m,t)=>{const n={},p=C=>{C.forEach(b=>{n[b]=!0})};return isArray$1(m)?p(m):p(String(m).split(t)),n},noop$1=()=>{},toFiniteNumber=(m,t)=>m!=null&&Number.isFinite(m=+m)?m:t,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(m=16,t=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:p}=t;for(;m--;)n+=t[Math.random()*p|0];return n};function isSpecCompliantForm(m){return!!(m&&isFunction$1(m.append)&&m[Symbol.toStringTag]==="FormData"&&m[Symbol.iterator])}const toJSONObject=m=>{const t=new Array(10),n=(p,C)=>{if(isObject(p)){if(t.indexOf(p)>=0)return;if(!("toJSON"in p)){t[C]=p;const b=isArray$1(p)?[]:{};return forEach(p,(o,E)=>{const e=n(o,C+1);!isUndefined(e)&&(b[E]=e)}),t[C]=void 0,b}}return p};return n(m,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=m=>m&&(isObject(m)||isFunction$1(m))&&isFunction$1(m.then)&&isFunction$1(m.catch),_setImmediate=((m,t)=>m?setImmediate:t?((n,p)=>(_global.addEventListener("message",({source:C,data:b})=>{C===_global&&b===n&&p.length&&p.shift()()},!1),C=>{p.push(C),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(m,t,n,p,C){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=m,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),p&&(this.request=p),C&&(this.response=C,this.status=C.status?C.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(m=>{descriptors[m]={value:m}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(m,t,n,p,C,b)=>{const o=Object.create(prototype$1);return utils$1.toFlatObject(m,o,function(e){return e!==Error.prototype},E=>E!=="isAxiosError"),AxiosError$1.call(o,m.message,t,n,p,C),o.cause=m,o.name=m.name,b&&Object.assign(o,b),o};const httpAdapter=null;function isVisitable(m){return utils$1.isPlainObject(m)||utils$1.isArray(m)}function removeBrackets(m){return utils$1.endsWith(m,"[]")?m.slice(0,-2):m}function renderKey(m,t,n){return m?m.concat(t).map(function(C,b){return C=removeBrackets(C),!n&&b?"["+C+"]":C}).join(n?".":""):t}function isFlatArray(m){return utils$1.isArray(m)&&!m.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(m,t,n){if(!utils$1.isObject(m))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(l,v){return!utils$1.isUndefined(v[l])});const p=n.metaTokens,C=n.visitor||x,b=n.dots,o=n.indexes,e=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(C))throw new TypeError("visitor must be a function");function a(s){if(s===null)return"";if(utils$1.isDate(s))return s.toISOString();if(!e&&utils$1.isBlob(s))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(s)||utils$1.isTypedArray(s)?e&&typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function x(s,l,v){let d=s;if(s&&!v&&typeof s=="object"){if(utils$1.endsWith(l,"{}"))l=p?l:l.slice(0,-2),s=JSON.stringify(s);else if(utils$1.isArray(s)&&isFlatArray(s)||(utils$1.isFileList(s)||utils$1.endsWith(l,"[]"))&&(d=utils$1.toArray(s)))return l=removeBrackets(l),d.forEach(function(y,S){!(utils$1.isUndefined(y)||y===null)&&t.append(o===!0?renderKey([l],S,b):o===null?l:l+"[]",a(y))}),!1}return isVisitable(s)?!0:(t.append(renderKey(v,l,b),a(s)),!1)}const c=[],u=Object.assign(predicates,{defaultVisitor:x,convertValue:a,isVisitable});function h(s,l){if(!utils$1.isUndefined(s)){if(c.indexOf(s)!==-1)throw Error("Circular reference detected in "+l.join("."));c.push(s),utils$1.forEach(s,function(d,g){(!(utils$1.isUndefined(d)||d===null)&&C.call(t,d,utils$1.isString(g)?g.trim():g,l,u))===!0&&h(d,l?l.concat(g):[g])}),c.pop()}}if(!utils$1.isObject(m))throw new TypeError("data must be an object");return h(m),t}function encode$2(m){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(m).replace(/[!'()~]|%20|%00/g,function(p){return t[p]})}function AxiosURLSearchParams(m,t){this._pairs=[],m&&toFormData$1(m,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(p){return t.call(this,p,encode$2)}:encode$2;return this._pairs.map(function(C){return n(C[0])+"="+n(C[1])},"").join("&")};function encode$1(m){return encodeURIComponent(m).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(m,t,n){if(!t)return m;const p=n&&n.encode||encode$1;utils$1.isFunction(n)&&(n={serialize:n});const C=n&&n.serialize;let b;if(C?b=C(t,n):b=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(p),b){const o=m.indexOf("#");o!==-1&&(m=m.slice(0,o)),m+=(m.indexOf("?")===-1?"?":"&")+b}return m}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,p){return this.handlers.push({fulfilled:t,rejected:n,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(p){p!==null&&t(p)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$2=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$2,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(m,t){return toFormData$1(m,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,p,C,b){return platform.isNode&&utils$1.isBuffer(n)?(this.append(p,n.toString("base64")),!1):b.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(m){return utils$1.matchAll(/\w+|\[(\w*)]/g,m).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(m){const t={},n=Object.keys(m);let p;const C=n.length;let b;for(p=0;p<C;p++)b=n[p],t[b]=m[b];return t}function formDataToJSON(m){function t(n,p,C,b){let o=n[b++];if(o==="__proto__")return!0;const E=Number.isFinite(+o),e=b>=n.length;return o=!o&&utils$1.isArray(C)?C.length:o,e?(utils$1.hasOwnProp(C,o)?C[o]=[C[o],p]:C[o]=p,!E):((!C[o]||!utils$1.isObject(C[o]))&&(C[o]=[]),t(n,p,C[o],b)&&utils$1.isArray(C[o])&&(C[o]=arrayToObject(C[o])),!E)}if(utils$1.isFormData(m)&&utils$1.isFunction(m.entries)){const n={};return utils$1.forEachEntry(m,(p,C)=>{t(parsePropPath(p),C,n,0)}),n}return null}function stringifySafely(m,t,n){if(utils$1.isString(m))try{return(t||JSON.parse)(m),utils$1.trim(m)}catch(p){if(p.name!=="SyntaxError")throw p}return(n||JSON.stringify)(m)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const p=n.getContentType()||"",C=p.indexOf("application/json")>-1,b=utils$1.isObject(t);if(b&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return C?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let E;if(b){if(p.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((E=utils$1.isFileList(t))||p.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return toFormData$1(E?{"files[]":t}:t,e&&new e,this.formSerializer)}}return b||C?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults$1.transitional,p=n&&n.forcedJSONParsing,C=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(p&&!this.responseType||C)){const o=!(n&&n.silentJSONParsing)&&C;try{return JSON.parse(t)}catch(E){if(o)throw E.name==="SyntaxError"?AxiosError$1.from(E,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):E}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],m=>{defaults$1.headers[m]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=m=>{const t={};let n,p,C;return m&&m.split(`
`).forEach(function(o){C=o.indexOf(":"),n=o.substring(0,C).trim().toLowerCase(),p=o.substring(C+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(p):t[n]=[p]:t[n]=t[n]?t[n]+", "+p:p)}),t},$internals=Symbol("internals");function normalizeHeader(m){return m&&String(m).trim().toLowerCase()}function normalizeValue(m){return m===!1||m==null?m:utils$1.isArray(m)?m.map(normalizeValue):String(m)}function parseTokens(m){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=n.exec(m);)t[p[1]]=p[2];return t}const isValidHeaderName=m=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(m.trim());function matchHeaderValue(m,t,n,p,C){if(utils$1.isFunction(p))return p.call(this,t,n);if(C&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(p))return t.indexOf(p)!==-1;if(utils$1.isRegExp(p))return p.test(t)}}function formatHeader(m){return m.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,p)=>n.toUpperCase()+p)}function buildAccessors(m,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(p=>{Object.defineProperty(m,p+n,{value:function(C,b,o){return this[p].call(this,t,C,b,o)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,n,p){const C=this;function b(E,e,a){const x=normalizeHeader(e);if(!x)throw new Error("header name must be a non-empty string");const c=utils$1.findKey(C,x);(!c||C[c]===void 0||a===!0||a===void 0&&C[c]!==!1)&&(C[c||e]=normalizeValue(E))}const o=(E,e)=>utils$1.forEach(E,(a,x)=>b(a,x,e));if(utils$1.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))o(parseHeaders(t),n);else if(utils$1.isHeaders(t))for(const[E,e]of t.entries())b(e,E,p);else t!=null&&b(n,t,p);return this}get(t,n){if(t=normalizeHeader(t),t){const p=utils$1.findKey(this,t);if(p){const C=this[p];if(!n)return C;if(n===!0)return parseTokens(C);if(utils$1.isFunction(n))return n.call(this,C,p);if(utils$1.isRegExp(n))return n.exec(C);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const p=utils$1.findKey(this,t);return!!(p&&this[p]!==void 0&&(!n||matchHeaderValue(this,this[p],p,n)))}return!1}delete(t,n){const p=this;let C=!1;function b(o){if(o=normalizeHeader(o),o){const E=utils$1.findKey(p,o);E&&(!n||matchHeaderValue(p,p[E],E,n))&&(delete p[E],C=!0)}}return utils$1.isArray(t)?t.forEach(b):b(t),C}clear(t){const n=Object.keys(this);let p=n.length,C=!1;for(;p--;){const b=n[p];(!t||matchHeaderValue(this,this[b],b,t,!0))&&(delete this[b],C=!0)}return C}normalize(t){const n=this,p={};return utils$1.forEach(this,(C,b)=>{const o=utils$1.findKey(p,b);if(o){n[o]=normalizeValue(C),delete n[b];return}const E=t?formatHeader(b):String(b).trim();E!==b&&delete n[b],n[E]=normalizeValue(C),p[E]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(p,C)=>{p!=null&&p!==!1&&(n[C]=t&&utils$1.isArray(p)?p.join(", "):p)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const p=new this(t);return n.forEach(C=>p.set(C)),p}static accessor(t){const p=(this[$internals]=this[$internals]={accessors:{}}).accessors,C=this.prototype;function b(o){const E=normalizeHeader(o);p[E]||(buildAccessors(C,o),p[E]=!0)}return utils$1.isArray(t)?t.forEach(b):b(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:m},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>m,set(p){this[n]=p}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(m,t){const n=this||defaults$1,p=t||n,C=AxiosHeaders$1.from(p.headers);let b=p.data;return utils$1.forEach(m,function(E){b=E.call(n,b,C.normalize(),t?t.status:void 0)}),C.normalize(),b}function isCancel$1(m){return!!(m&&m.__CANCEL__)}function CanceledError$1(m,t,n){AxiosError$1.call(this,m??"canceled",AxiosError$1.ERR_CANCELED,t,n),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(m,t,n){const p=n.config.validateStatus;!n.status||!p||p(n.status)?m(n):t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(m){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return t&&t[1]||""}function speedometer(m,t){m=m||10;const n=new Array(m),p=new Array(m);let C=0,b=0,o;return t=t!==void 0?t:1e3,function(e){const a=Date.now(),x=p[b];o||(o=a),n[C]=e,p[C]=a;let c=b,u=0;for(;c!==C;)u+=n[c++],c=c%m;if(C=(C+1)%m,C===b&&(b=(b+1)%m),a-o<t)return;const h=x&&a-x;return h?Math.round(u*1e3/h):void 0}}function throttle(m,t){let n=0,p=1e3/t,C,b;const o=(a,x=Date.now())=>{n=x,C=null,b&&(clearTimeout(b),b=null),m.apply(null,a)};return[(...a)=>{const x=Date.now(),c=x-n;c>=p?o(a,x):(C=a,b||(b=setTimeout(()=>{b=null,o(C)},p-c)))},()=>C&&o(C)]}const progressEventReducer=(m,t,n=3)=>{let p=0;const C=speedometer(50,250);return throttle(b=>{const o=b.loaded,E=b.lengthComputable?b.total:void 0,e=o-p,a=C(e),x=o<=E;p=o;const c={loaded:o,total:E,progress:E?o/E:void 0,bytes:e,rate:a||void 0,estimated:a&&E&&x?(E-o)/a:void 0,event:b,lengthComputable:E!=null,[t?"download":"upload"]:!0};m(c)},n)},progressEventDecorator=(m,t)=>{const n=m!=null;return[p=>t[0]({lengthComputable:n,total:m,loaded:p}),t[1]]},asyncDecorator=m=>(...t)=>utils$1.asap(()=>m(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((m,t)=>n=>(n=new URL(n,platform.origin),m.protocol===n.protocol&&m.host===n.host&&(t||m.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(m,t,n,p,C,b){const o=[m+"="+encodeURIComponent(t)];utils$1.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),utils$1.isString(p)&&o.push("path="+p),utils$1.isString(C)&&o.push("domain="+C),b===!0&&o.push("secure"),document.cookie=o.join("; ")},read(m){const t=document.cookie.match(new RegExp("(^|;\\s*)("+m+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(m){this.write(m,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL$1(m){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(m)}function combineURLs(m,t){return t?m.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):m}function buildFullPath(m,t){return m&&!isAbsoluteURL$1(t)?combineURLs(m,t):t}const headersToObject=m=>m instanceof AxiosHeaders$1?{...m}:m;function mergeConfig$1(m,t){t=t||{};const n={};function p(a,x,c,u){return utils$1.isPlainObject(a)&&utils$1.isPlainObject(x)?utils$1.merge.call({caseless:u},a,x):utils$1.isPlainObject(x)?utils$1.merge({},x):utils$1.isArray(x)?x.slice():x}function C(a,x,c,u){if(utils$1.isUndefined(x)){if(!utils$1.isUndefined(a))return p(void 0,a,c,u)}else return p(a,x,c,u)}function b(a,x){if(!utils$1.isUndefined(x))return p(void 0,x)}function o(a,x){if(utils$1.isUndefined(x)){if(!utils$1.isUndefined(a))return p(void 0,a)}else return p(void 0,x)}function E(a,x,c){if(c in t)return p(a,x);if(c in m)return p(void 0,a)}const e={url:b,method:b,data:b,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:E,headers:(a,x,c)=>C(headersToObject(a),headersToObject(x),c,!0)};return utils$1.forEach(Object.keys(Object.assign({},m,t)),function(x){const c=e[x]||C,u=c(m[x],t[x],x);utils$1.isUndefined(u)&&c!==E||(n[x]=u)}),n}const resolveConfig=m=>{const t=mergeConfig$1({},m);let{data:n,withXSRFToken:p,xsrfHeaderName:C,xsrfCookieName:b,headers:o,auth:E}=t;t.headers=o=AxiosHeaders$1.from(o),t.url=buildURL(buildFullPath(t.baseURL,t.url),m.params,m.paramsSerializer),E&&o.set("Authorization","Basic "+btoa((E.username||"")+":"+(E.password?unescape(encodeURIComponent(E.password)):"")));let e;if(utils$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((e=o.getContentType())!==!1){const[a,...x]=e?e.split(";").map(c=>c.trim()).filter(Boolean):[];o.setContentType([a||"multipart/form-data",...x].join("; "))}}if(platform.hasStandardBrowserEnv&&(p&&utils$1.isFunction(p)&&(p=p(t)),p||p!==!1&&isURLSameOrigin(t.url))){const a=C&&b&&cookies.read(b);a&&o.set(C,a)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(m){return new Promise(function(n,p){const C=resolveConfig(m);let b=C.data;const o=AxiosHeaders$1.from(C.headers).normalize();let{responseType:E,onUploadProgress:e,onDownloadProgress:a}=C,x,c,u,h,s;function l(){h&&h(),s&&s(),C.cancelToken&&C.cancelToken.unsubscribe(x),C.signal&&C.signal.removeEventListener("abort",x)}let v=new XMLHttpRequest;v.open(C.method.toUpperCase(),C.url,!0),v.timeout=C.timeout;function d(){if(!v)return;const y=AxiosHeaders$1.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!E||E==="text"||E==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:y,config:m,request:v};settle(function(P){n(P),l()},function(P){p(P),l()},T),v=null}"onloadend"in v?v.onloadend=d:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(d)},v.onabort=function(){v&&(p(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,m,v)),v=null)},v.onerror=function(){p(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,m,v)),v=null},v.ontimeout=function(){let S=C.timeout?"timeout of "+C.timeout+"ms exceeded":"timeout exceeded";const T=C.transitional||transitionalDefaults;C.timeoutErrorMessage&&(S=C.timeoutErrorMessage),p(new AxiosError$1(S,T.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,m,v)),v=null},b===void 0&&o.setContentType(null),"setRequestHeader"in v&&utils$1.forEach(o.toJSON(),function(S,T){v.setRequestHeader(T,S)}),utils$1.isUndefined(C.withCredentials)||(v.withCredentials=!!C.withCredentials),E&&E!=="json"&&(v.responseType=C.responseType),a&&([u,s]=progressEventReducer(a,!0),v.addEventListener("progress",u)),e&&v.upload&&([c,h]=progressEventReducer(e),v.upload.addEventListener("progress",c),v.upload.addEventListener("loadend",h)),(C.cancelToken||C.signal)&&(x=y=>{v&&(p(!y||y.type?new CanceledError$1(null,m,v):y),v.abort(),v=null)},C.cancelToken&&C.cancelToken.subscribe(x),C.signal&&(C.signal.aborted?x():C.signal.addEventListener("abort",x)));const g=parseProtocol(C.url);if(g&&platform.protocols.indexOf(g)===-1){p(new AxiosError$1("Unsupported protocol "+g+":",AxiosError$1.ERR_BAD_REQUEST,m));return}v.send(b||null)})},composeSignals=(m,t)=>{const{length:n}=m=m?m.filter(Boolean):[];if(t||n){let p=new AbortController,C;const b=function(a){if(!C){C=!0,E();const x=a instanceof Error?a:this.reason;p.abort(x instanceof AxiosError$1?x:new CanceledError$1(x instanceof Error?x.message:x))}};let o=t&&setTimeout(()=>{o=null,b(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const E=()=>{m&&(o&&clearTimeout(o),o=null,m.forEach(a=>{a.unsubscribe?a.unsubscribe(b):a.removeEventListener("abort",b)}),m=null)};m.forEach(a=>a.addEventListener("abort",b));const{signal:e}=p;return e.unsubscribe=()=>utils$1.asap(E),e}},streamChunk=function*(m,t){let n=m.byteLength;if(n<t){yield m;return}let p=0,C;for(;p<n;)C=p+t,yield m.slice(p,C),p=C},readBytes=async function*(m,t){for await(const n of readStream(m))yield*streamChunk(n,t)},readStream=async function*(m){if(m[Symbol.asyncIterator]){yield*m;return}const t=m.getReader();try{for(;;){const{done:n,value:p}=await t.read();if(n)break;yield p}}finally{await t.cancel()}},trackStream=(m,t,n,p)=>{const C=readBytes(m,t);let b=0,o,E=e=>{o||(o=!0,p&&p(e))};return new ReadableStream({async pull(e){try{const{done:a,value:x}=await C.next();if(a){E(),e.close();return}let c=x.byteLength;if(n){let u=b+=c;n(u)}e.enqueue(new Uint8Array(x))}catch(a){throw E(a),a}},cancel(e){return E(e),C.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(m=>t=>m.encode(t))(new TextEncoder):async m=>new Uint8Array(await new Response(m).arrayBuffer())),test=(m,...t)=>{try{return!!m(...t)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let m=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!t}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(m=>m.body)};isFetchSupported&&(m=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!resolvers[t]&&(resolvers[t]=utils$1.isFunction(m[t])?n=>n[t]():(n,p)=>{throw new AxiosError$1(`Response type '${t}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,p)})})})(new Response);const getBodyLength=async m=>{if(m==null)return 0;if(utils$1.isBlob(m))return m.size;if(utils$1.isSpecCompliantForm(m))return(await new Request(platform.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(m)||utils$1.isArrayBuffer(m))return m.byteLength;if(utils$1.isURLSearchParams(m)&&(m=m+""),utils$1.isString(m))return(await encodeText(m)).byteLength},resolveBodyLength=async(m,t)=>{const n=utils$1.toFiniteNumber(m.getContentLength());return n??getBodyLength(t)},fetchAdapter=isFetchSupported&&(async m=>{let{url:t,method:n,data:p,signal:C,cancelToken:b,timeout:o,onDownloadProgress:E,onUploadProgress:e,responseType:a,headers:x,withCredentials:c="same-origin",fetchOptions:u}=resolveConfig(m);a=a?(a+"").toLowerCase():"text";let h=composeSignals([C,b&&b.toAbortSignal()],o),s;const l=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let v;try{if(e&&supportsRequestStream&&n!=="get"&&n!=="head"&&(v=await resolveBodyLength(x,p))!==0){let T=new Request(t,{method:"POST",body:p,duplex:"half"}),w;if(utils$1.isFormData(p)&&(w=T.headers.get("content-type"))&&x.setContentType(w),T.body){const[P,A]=progressEventDecorator(v,progressEventReducer(asyncDecorator(e)));p=trackStream(T.body,DEFAULT_CHUNK_SIZE,P,A)}}utils$1.isString(c)||(c=c?"include":"omit");const d="credentials"in Request.prototype;s=new Request(t,{...u,signal:h,method:n.toUpperCase(),headers:x.normalize().toJSON(),body:p,duplex:"half",credentials:d?c:void 0});let g=await fetch(s);const y=supportsResponseStream&&(a==="stream"||a==="response");if(supportsResponseStream&&(E||y&&l)){const T={};["status","statusText","headers"].forEach(R=>{T[R]=g[R]});const w=utils$1.toFiniteNumber(g.headers.get("content-length")),[P,A]=E&&progressEventDecorator(w,progressEventReducer(asyncDecorator(E),!0))||[];g=new Response(trackStream(g.body,DEFAULT_CHUNK_SIZE,P,()=>{A&&A(),l&&l()}),T)}a=a||"text";let S=await resolvers[utils$1.findKey(resolvers,a)||"text"](g,m);return!y&&l&&l(),await new Promise((T,w)=>{settle(T,w,{data:S,headers:AxiosHeaders$1.from(g.headers),status:g.status,statusText:g.statusText,config:m,request:s})})}catch(d){throw l&&l(),d&&d.name==="TypeError"&&/fetch/i.test(d.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,m,s),{cause:d.cause||d}):AxiosError$1.from(d,d&&d.code,m,s)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(m,t)=>{if(m){try{Object.defineProperty(m,"name",{value:t})}catch{}Object.defineProperty(m,"adapterName",{value:t})}});const renderReason=m=>`- ${m}`,isResolvedHandle=m=>utils$1.isFunction(m)||m===null||m===!1,adapters={getAdapter:m=>{m=utils$1.isArray(m)?m:[m];const{length:t}=m;let n,p;const C={};for(let b=0;b<t;b++){n=m[b];let o;if(p=n,!isResolvedHandle(n)&&(p=knownAdapters[(o=String(n)).toLowerCase()],p===void 0))throw new AxiosError$1(`Unknown adapter '${o}'`);if(p)break;C[o||"#"+b]=p}if(!p){const b=Object.entries(C).map(([E,e])=>`adapter ${E} `+(e===!1?"is not supported by the environment":"is not available in the build"));let o=t?b.length>1?`since :
`+b.map(renderReason).join(`
`):" "+renderReason(b[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return p},adapters:knownAdapters};function throwIfCancellationRequested(m){if(m.cancelToken&&m.cancelToken.throwIfRequested(),m.signal&&m.signal.aborted)throw new CanceledError$1(null,m)}function dispatchRequest(m){return throwIfCancellationRequested(m),m.headers=AxiosHeaders$1.from(m.headers),m.data=transformData.call(m,m.transformRequest),["post","put","patch"].indexOf(m.method)!==-1&&m.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(m.adapter||defaults$1.adapter)(m).then(function(p){return throwIfCancellationRequested(m),p.data=transformData.call(m,m.transformResponse,p),p.headers=AxiosHeaders$1.from(p.headers),p},function(p){return isCancel$1(p)||(throwIfCancellationRequested(m),p&&p.response&&(p.response.data=transformData.call(m,m.transformResponse,p.response),p.response.headers=AxiosHeaders$1.from(p.response.headers))),Promise.reject(p)})}const VERSION$2="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((m,t)=>{validators$1[m]=function(p){return typeof p===m||"a"+(t<1?"n ":" ")+m}});const deprecatedWarnings={};validators$1.transitional=function(t,n,p){function C(b,o){return"[Axios v"+VERSION$2+"] Transitional option '"+b+"'"+o+(p?". "+p:"")}return(b,o,E)=>{if(t===!1)throw new AxiosError$1(C(o," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(C(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(b,o,E):!0}};validators$1.spelling=function(t){return(n,p)=>(console.warn(`${p} is likely a misspelling of ${t}`),!0)};function assertOptions(m,t,n){if(typeof m!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const p=Object.keys(m);let C=p.length;for(;C-- >0;){const b=p[C],o=t[b];if(o){const E=m[b],e=E===void 0||o(E,b,m);if(e!==!0)throw new AxiosError$1("option "+b+" must be "+e,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+b,AxiosError$1.ERR_BAD_OPTION)}}const validator$1={assertOptions,validators:validators$1},validators=validator$1.validators;let Axios$1=class{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,n){try{return await this._request(t,n)}catch(p){if(p instanceof Error){let C={};Error.captureStackTrace?Error.captureStackTrace(C):C=new Error;const b=C.stack?C.stack.replace(/^.+\n/,""):"";try{p.stack?b&&!String(p.stack).endsWith(b.replace(/^.+\n.+\n/,""))&&(p.stack+=`
`+b):p.stack=b}catch{}}throw p}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n);const{transitional:p,paramsSerializer:C,headers:b}=n;p!==void 0&&validator$1.assertOptions(p,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),C!=null&&(utils$1.isFunction(C)?n.paramsSerializer={serialize:C}:validator$1.assertOptions(C,{encode:validators.function,serialize:validators.function},!0)),validator$1.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=b&&utils$1.merge(b.common,b[n.method]);b&&utils$1.forEach(["delete","get","head","post","put","patch","common"],s=>{delete b[s]}),n.headers=AxiosHeaders$1.concat(o,b);const E=[];let e=!0;this.interceptors.request.forEach(function(l){typeof l.runWhen=="function"&&l.runWhen(n)===!1||(e=e&&l.synchronous,E.unshift(l.fulfilled,l.rejected))});const a=[];this.interceptors.response.forEach(function(l){a.push(l.fulfilled,l.rejected)});let x,c=0,u;if(!e){const s=[dispatchRequest.bind(this),void 0];for(s.unshift.apply(s,E),s.push.apply(s,a),u=s.length,x=Promise.resolve(n);c<u;)x=x.then(s[c++],s[c++]);return x}u=E.length;let h=n;for(c=0;c<u;){const s=E[c++],l=E[c++];try{h=s(h)}catch(v){l.call(this,v);break}}try{x=dispatchRequest.call(this,h)}catch(s){return Promise.reject(s)}for(c=0,u=a.length;c<u;)x=x.then(a[c++],a[c++]);return x}getUri(t){t=mergeConfig$1(this.defaults,t);const n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,p){return this.request(mergeConfig$1(p||{},{method:t,url:n,data:(p||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function n(p){return function(b,o,E){return this.request(mergeConfig$1(E||{},{method:t,headers:p?{"Content-Type":"multipart/form-data"}:{},url:b,data:o}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});let CancelToken$1=class Cu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(b){n=b});const p=this;this.promise.then(C=>{if(!p._listeners)return;let b=p._listeners.length;for(;b-- >0;)p._listeners[b](C);p._listeners=null}),this.promise.then=C=>{let b;const o=new Promise(E=>{p.subscribe(E),b=E}).then(C);return o.cancel=function(){p.unsubscribe(b)},o},t(function(b,o,E){p.reason||(p.reason=new CanceledError$1(b,o,E),n(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=p=>{t.abort(p)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Cu(function(C){t=C}),cancel:t}}};function spread$1(m){return function(n){return m.apply(null,n)}}function isAxiosError$1(m){return utils$1.isObject(m)&&m.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([m,t])=>{HttpStatusCode$1[t]=m});function createInstance(m){const t=new Axios$1(m),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(C){return createInstance(mergeConfig$1(m,C))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=m=>formDataToJSON(utils$1.isHTMLForm(m)?new FormData(m):m);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;function selector$1(m,t){return`
        Analyze the input and select the most appropriate support team from these options: 
        ${Array.from(t.keys()).join(", ")}
        First explain your reasoning, 
        then provide your selection in this XML format:

        <reasoning>
        Brief explanation of why this ticket should be routed to a specific team.
        Consider key terms, user intent, and urgency level.
        </reasoning>

        <selection>
        The chosen team name
        </selection>

        Input: ${m}
    `.trim()}const extractXML=(m,t)=>{const n=new RegExp(`<${t}>(.*?)</${t}>`,"s"),p=m.match(n);return p?p[1].trim():`[ERROR: <${t}> not found]`},callLLM=async m=>{const p=axios.create({baseURL:"https://api.openai.com/v1/chat/completions",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"}});try{return(await p.post("",{model:"gpt-4o-mini",messages:m,temperature:.7,max_tokens:150})).data}catch(C){throw console.error("error when requested to OpenAI API:",C),C}},chain=async(m,t)=>{let n=m;for(const p of t)try{n=(await callLLM([{role:"system",content:n},{role:"user",content:p}])).choices[0].message.content}catch(C){throw console.error("error when requested to OpenAI API:",C),C}return n},parallel=async(m,t,n=3)=>{const p=t.map((b,o)=>callLLM([{role:"system",content:t[o]},{role:"user",content:m}]));return(await Promise.allSettled(p)).map(b=>b.status==="fulfilled"?b.value.choices[0].message.content:(console.error("Error in parallel processing:",b.reason),null))},route=async(m,t)=>{console.log("available routes:",t.keys());const n=selector$1(m,t);console.log("Selector prompt:",n);try{const p=(await callLLM([{role:"user",content:n}])).choices[0].message.content,C=extractXML(p,"reasoning"),b=extractXML(p,"selection").trim().toLowerCase();console.log("Intermediate steps:",p),console.log("Routing Analysis:"),console.log(C),console.log(`
Selected route:`,b);const o=t.get(b);if(!o)throw new Error(`Route "${b}" not found in available routes.`);const E=(await callLLM([{role:"system",content:m},{role:"user",content:o}])).choices[0].message.content;return console.log("Final result:",E),E}catch(p){return console.error("Route selection failed:",p),"[ERROR: Route selection failed]"}};async function judgeDebate(m){let n=(await callLLM([...m,{role:"user",content:"Judge, analyze the arguments and declare which agent made stronger points. Keep it brief."}])).choices[0].message.content;console.log(`⚖️ Judge: ${n}
`)}async function debate(m,t){console.log("Debate Started!",m,t);let n=[{role:"system",content:`You are participating in a structured debate. 
          Agent A will support the topic: "${m}", while Agent B will oppose it.
          Each response should be concise (maximum 2 sentences).`},{role:"user",content:`Agent A, start the debate by stating your main argument for: "${m}".`}],p=[],C=[];for(let b=0;b<t;b++){console.log(`
🔵 Round ${b+1}`);let E=(await callLLM(n)).choices[0].message.content;console.log(`Agent A: ${E}
`),n.push({role:"assistant",content:E});let a=(await callLLM([...n,{role:"user",content:"Agent B, rebut Agent A's argument."}])).choices[0].message.content;console.log(`Agent B: ${a}
`),n.push({role:"assistant",content:a}),p.push({round:b+1,agentA:E,agentB:a});let x=await judgeDebate(n);C.push(x)}return console.log("⚖️ Debate Ended."),{results:C,history:p}}const state={isTypewriting:!1,collectedItems:new Set,collidingWithItem:!1,isAPIAvailable:!1},openaiApiUrl="https://api.openai.com/v1/chat/completions",apiKey=void 0,apiClient=axios.create({baseURL:openaiApiUrl,headers:{"Content-Type":"application/json",Authorization:`Bearer ${apiKey}`}}),fetchChatCompletion=async m=>{try{return(await apiClient.post("",{model:"gpt-4o-mini",messages:m,temperature:.7,max_tokens:150})).data}catch(t){throw console.error("error when requested to OpenAI API:",t),t}};class ParentScene extends Phaser$1.Scene{constructor(n="level1",p="Game: Level 1"){super({key:n});ge(this,"player");ge(this,"sign");ge(this,"tilemap");ge(this,"worldLayer");ge(this,"itemGroup");ge(this,"deductiveItem");ge(this,"itemText");ge(this,"npc");ge(this,"deductiveItemText");ge(this,"hudText");ge(this,"creditsText");ge(this,"promptTexts",[]);ge(this,"mssgData",[]);ge(this,"mssgMenu",null);ge(this,"mssgMenuText",null);ge(this,"mssgGroup");ge(this,"subMssg",null);ge(this,"subMssgText",null);ge(this,"controllableCharacters",[]);ge(this,"activateIndex",0);ge(this,"playerControlledAgent");ge(this,"cursors");ge(this,"controlMapping");ge(this,"keyMap");ge(this,"agentControlButtons");ge(this,"agentGroup");ge(this,"coinGroup");ge(this,"agentControlButtonLabels",[]);ge(this,"overlappedItems",new Set);ge(this,"debatePositionGroup");ge(this,"isDebate",!1);ge(this,"levelBtn");ge(this,"promptCoainter");ge(this,"levelPassed",!1);ge(this,"sceneName","Game: Level 1");ge(this,"testnpc");ge(this,"credits",0);this.sceneName=p}create(){}update(){}renderDialog(n,p){p>=n.length||(state.isTypewriting=!0,cjsExports$1.render(jsxRuntimeExports.jsx(Typewriter,{text:n[p],onEnd:()=>{state.isTypewriting=!1,p++,this.time.delayedCall(500,()=>{this.renderDialog(n,p)})}}),this))}collectItem(n,p,C,b,o="prompt"){var E;state.isTypewriting||(E=state.collectedItems)!=null&&E.has(p)||(console.log("Player is overlapping with the item.",n),state.isTypewriting=!0,cjsExports$1.render(jsxRuntimeExports.jsx(Typewriter,{text:"Prompt Utils: "+C,onEnd:()=>{var x;console.log("Typewriter finished.");const e=(x=this.input.keyboard)==null?void 0:x.addKey(Phaser$1.Input.Keyboard.KeyCodes.SPACE),a=()=>{if(!this.physics.overlap(n,p)){console.log("Player is no longer overlapping with the item. Action canceled.");return}state.isTypewriting=!1,o==="prompt"?n.addPromptUtils(C):o==="instruction"&&n.setInstruction(C),console.log("PromptUtil collected:",C),p.active&&(p.destroy(),console.log("Item destroyed!"),o==="prompt"&&(b==null||b.destroy())),e==null||e.off("down",a)};e==null||e.on("down",a)}}),this))}onOverlapEnd(n,p){console.log(`Agent ${n.getName()} exited ${p.texture.key} zone.`),state.isTypewriting&&(state.isTypewriting=!1,console.log("Reset state.isTypewriting because Agent exited item zone."))}async onPlayerNearNPC(n,p){var C;if(this.cursors.space.isDown&&!state.isTypewriting){state.isTypewriting=!0,console.log("prompt utils",p,n,p),n.getData("npcName");let o=`${p.getPersona()}, this prompt is for testing`;p.inventory.promptUtils.length>0&&(o+=`
        you have collected ${p.inventory.promptUtils}, 
        please utilize collected prompt utils to solve the task
        `);const E=`
            you have collected ${p.inventory.promptUtils}, 
            please utilize collected prompt utils to solve the task
            please solve this task(max words: 200), using concise examplanations:
            which one is bigger: 9.11 or 9.9?
          `,e=[{role:"system",content:o},{role:"user",content:E}];console.log("messages:",e);try{const a=await fetchChatCompletion(e);console.log("OpenAI return:",a);const x=a.choices[0].message.content;this.mssgData.push({system:o,user:E,gpt:x}),console.log("mssgData:",this.mssgData,p.getMemory()),cjsExports$1.render(jsxRuntimeExports.jsx(Typewriter,{text:x,onEnd:()=>state.isTypewriting=!1}),this);const c=`
          if the following response answered: 
            9.9 is bigger than 9.11; 
          Then answer with "yes", otherwise answer with "no" 

        `+x,u=(await fetchChatCompletion([{role:"system",content:"evaluation"},{role:"user",content:c}])).choices[0].message.content;console.log("evaluation response:",u);let h=!1;if((u.includes("yes")||u.includes("Yes")||u.includes("YES"))&&(console.log("CORRECT ANSWER"),h=!0,!this.levelPassed)){console.log("levelPassed",this.levelPassed),this.levelPassed=!0,this.levelBtn=addButtonHUD.call(this,425,475,50,50,"Next Level",17.5,10),(C=this.levelBtn)==null||C.on("pointerdown",()=>{console.log("levelBtn clicked"),this.scene.start("level2")},this);for(let l=0;l<5;l++)this.coinGroup.create(Phaser$1.Math.Between(550,650),Phaser$1.Math.Between(850,950),"coin").play("coin")}let s=[];for(let l=0;l<p.getPromptUtils().length;l++)s.push(p.getPromptUtils()[l]);p.storeMemory(o,E,x,s,h)}catch(a){console.error("API request failed",a),state.isTypewriting=!1}}}}const LEVEL1_STARTING_TUTORIAL=["Hello! Welcome to the game!","This is a tutorial level to get your started","Press WASD to move your character, follow the arrow to find the task"];function calculateDistance(m,t){const n=t.x-m.x,p=t.y-m.y;return Math.sqrt(n*n+p*p)}class Level1 extends ParentScene{constructor(){super();ge(this,"inputElement");ge(this,"isInputLocked",!0);ge(this,"dialog",null);ge(this,"graphics",null)}create(){setupScene.call(this),this.coinGroup=this.physics.add.group(),this.graphics=this.add.graphics({lineStyle:{width:2,color:16777215}}),this.itemText=this.add.text(350,950,"think step-by-step"),this.deductiveItemText=this.add.text(450,1050,"deductive reasoning"),this.tweens.add({targets:[this.itemText,this.deductiveItemText],y:"+=10",duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1}),createItem.call(this,this.itemGroup,400,1e3,"logo"),createItem.call(this,this.deductiveItem,500,1100,"logo"),createItem.call(this,this.debatePositionGroup,700,900,"logo"),createItem.call(this,this.debatePositionGroup,900,900,"logo"),[{group:this.itemGroup,callback:(e,a)=>{this.collectItem(e,a,"think step by step",this.itemText)}},{group:this.deductiveItem,callback:(e,a)=>{this.collectItem(e,a,"deductive reasoning",this.deductiveItemText)}}].forEach(({group:e,callback:a})=>{this.physics.add.overlap(this.agentGroup,e,a,void 0,this)}),this.npc=new NPC(this,600,900),this.physics.add.collider(this.npc,this.worldLayer),this.physics.add.collider(this.agentGroup,this.worldLayer);const p=new Agent(this,350,1200,"player","misa-front","Alice");this.anims.create({key:"coin",frames:this.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:10,repeat:-1});const C=this.physics.add.sprite(400,1200,"coin").play("coin");this.coinGroup.add(C),this.physics.add.overlap(this.agentGroup,this.coinGroup,(e,a)=>{console.log("Coin collected!"),this.credits++,a.destroy(),this.creditsText.setText(this.credits.toString())},void 0,this),this.agentGroup.add(p),this.controllableCharacters.push(p),console.log("controled characters",this.controllableCharacters),this.cameras.main.startFollow(this.controllableCharacters[0]),this.controllableCharacters[0].changeNameTagColor("#ff0000"),this.physics.add.overlap(this.agentGroup,this.npc,this.onPlayerNearNPC,void 0,this),cjsExports$1.render(jsxRuntimeExports.jsx(TilemapDebug,{tilemapLayer:this.worldLayer}),this),this.agentControlButtons=this.add.group(),this.agentControlButtonLabels=[],this.overlappedItems=new Set;let b=new Set,o=!1,E=null;this.physics.add.overlap(this.agentGroup,this.debatePositionGroup,(e,a)=>{b.has(a)||(b.add(a),this.events.emit("overlapstart",e,a)),b.size===2&&!o&&(o=!0,console.log("Agent is overlapping both debate positions!"),E=this.add.rectangle(50,330,50,50,0).setScrollFactor(0).setDepth(1001).setAlpha(.5).setStrokeStyle(2,16777215).setInteractive(),this.add.text(35,320,"Start Debate",{fontSize:"10px",color:"#ffffff",wordWrap:{width:50,useAdvancedWrap:!0}}).setScrollFactor(0).setDepth(1002),E.on("pointerdown",x=>{console.log("start debate!!"),debate("Is the earth flat?",3)}))}),this.debatePositionGroup.on("overlapsend",(e,a)=>{console.log("overlapsend",e,a),o=!1,b.delete(e)}),this.renderDialog(LEVEL1_STARTING_TUTORIAL,0),this.dialog=this.add.container(0,0)}update(){var n,p;this.playerControlledAgent=this.controllableCharacters[this.activateIndex];for(let C=0;C<3;C++)C<this.playerControlledAgent.getPromptUtils().length?this.promptTexts[C].setText(this.playerControlledAgent.getPromptUtils()[C]):this.promptTexts[C].setText("empty");this.controllableCharacters.forEach(C=>{C.update()}),this.hudText.setText(`${this.controllableCharacters[this.activateIndex].getName()}(Player-controlled) `),this.input.keyboard.checkDown(this.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.ONE),250)&&(console.log('Key "1" pressed'),this.activateIndex=0,this.cameras.main.startFollow(this.controllableCharacters[this.activateIndex]),this.playerControlledAgent=this.controllableCharacters[this.activateIndex],this.controllableCharacters.forEach(C=>{C.changeNameTagColor("#ffffff")}),this.playerControlledAgent.changeNameTagColor("#ff0000"),console.log("switched utils",this.playerControlledAgent.getPromptUtils())),calculateDistance({x:this.playerControlledAgent.x,y:this.playerControlledAgent.y},{x:600,y:900})>100?((n=this.graphics)==null||n.clear(),drawArrow.call(this,{x:this.playerControlledAgent.x,y:this.playerControlledAgent.y},{x:600,y:900},50,this.graphics)):(p=this.graphics)==null||p.clear(),this.agentGroup.on("overlapstart",(C,b)=>{console.log("overlapstart",C,b)}),this.cursors.seven.isDown||this.cursors.eight.isDown&&(console.log('Key "8" pressed'),this.scene.start("level2"))}}const eventTargetBus=new EventTarget;async function testChainCustomerSupport(){const n=await chain(`I just noticed a charge of $49.99 on my credit card, 
  but I thought I was on the $29.99 plan. Can you explain this charge and adjust it if it's a mistake?`,[`Step 1: Extract the key issue from the customer inquiry.
      Example:
      Inquiry: "I was charged $49.99 instead of $29.99."
      Key Issue: Unexpected charge on account.

      Inquiry: "I forgot my password and can't log in."
      Key Issue: Account access issue.

      Inquiry: [CUSTOMER_INQUIRY]
      Key Issue:`,`Step 2: Classify the issue into one of the following categories: 
      - billing
      - technical
      - account
      - product

      Example:
      Key Issue: Unexpected charge on account.
      Category: billing

      Key Issue: Account access issue.
      Category: account

      Key Issue: [PREVIOUS_STEP_OUTPUT]
      Category:`,`Step 3: Generate a structured response based on the category.
      Example:
      Category: billing
      Response:
      "Billing Support Response: We acknowledge your concern about the unexpected charge. 
      Your plan was upgraded on [DATE], leading to the price difference. If this was unintentional, 
      you can revert by downgrading your plan in settings."

      Category: account
      Response:
      "Account Support Response: If you forgot your password, please reset it using the ‘Forgot Password’ 
      option. If you still can’t access your account, contact our security team."

      Category: [PREVIOUS_STEP_OUTPUT]
      Response:`,`Step 4: Format the response professionally.
      Example:
      Raw Response: "Billing Support Response: We acknowledge your concern..."
      Formatted Response:
      --------------------------------------
      **Billing Support Team**
      We acknowledge your concern...
      --------------------------------------

      Raw Response: [PREVIOUS_STEP_OUTPUT]
      Formatted Response:`]);return console.log("Chain Mode Output:",n),n}async function evaluateCustomerSupportResponse(m,t){const n=`
  You are an expert evaluator of customer service responses in a multi-agent system.
  Your job is to analyze the provided response based on the following criteria:
  
  1. **Clarity**: Is the response easy to understand?
  2. **Accuracy**: Does it provide the correct and relevant information?
  3. **Helpfulness**: Does it guide the customer to a resolution effectively?

  **Scoring Criteria**:
  - Rate each category from 1 (poor) to 10 (excellent).
  - Provide a brief justification for each rating.
  - If there are issues, suggest improvements.

  **Example Evaluation**:
  ---
  **Response:** "Billing Support Response: We checked your billing details and found that your plan was upgraded..."
  **Evaluation:**
  - Clarity: 9/10 - The response is well-structured and professional.
  - Accuracy: 8/10 - Provides relevant information but lacks a refund policy explanation.
  - Helpfulness: 7/10 - Guides the user but could add alternative solutions.
  - Suggested Improvements: Add refund policy details for clarity.

  Now evaluate the following response from the **${m}** method:

  **Customer Support Response:**
  ${t}

  **Your Evaluation:**
  `;return(await callLLM([{role:"user",content:n}])).choices[0].message.content}async function testParallelCustomerSupport(){const n=await parallel(`I just noticed a charge of $49.99 on my credit card, 
  but I thought I was on the $29.99 plan. Can you explain this charge and adjust it if it's a mistake?`,[`Step 1: Summarize the customer's issue in one sentence.
      Example:
      Inquiry: "I was charged $49.99 instead of $29.99."
      Summary: The customer is concerned about an unexpected billing charge.

      Inquiry: "I can't log into my account."
      Summary: The customer has trouble accessing their account.

      Inquiry: [CUSTOMER_INQUIRY]
      Summary:`,`Step 2: Retrieve similar past customer inquiries and solutions.
      Example:
      Inquiry: "I was charged $49.99 instead of $29.99."
      Similar Case: Customer X had a billing mismatch because their subscription was upgraded.
      Solution: Informed them of the upgrade and provided a downgrade option.

      Inquiry: [CUSTOMER_INQUIRY]
      Similar Case: `,`Step 3: Generate a professional response based on customer history.
      Example:
      Inquiry: "I was charged $49.99 instead of $29.99."
      Response:
      "Billing Support Response: We checked your billing details and found that your plan was upgraded 
      on [DATE]. If this was unintentional, you can revert to the lower plan in your account settings."

      Inquiry: [CUSTOMER_INQUIRY]
      Response:`]);return console.log("Parallel Mode Output:",n),n}async function testRoute(){const m=new Map([["billing",`You are a billing support specialist. Follow these guidelines:
    1. Always start with "Billing Support Response:"
    2. First acknowledge the specific billing issue
    3. Explain any charges or discrepancies clearly
    4. List concrete next steps with timeline
    5. End with payment options if relevant
    
    Keep responses professional but friendly.
    
    Input: `],["technical",`You are a technical support engineer. Follow these guidelines:
    1. Always start with "Technical Support Response:"
    2. List exact steps to resolve the issue
    3. Include system requirements if relevant
    4. Provide workarounds for common problems
    5. End with escalation path if needed
    
    Use clear, numbered steps and technical details.
    
    Input: `],["account",`You are an account security specialist. Follow these guidelines:
    1. Always start with "Account Support Response:"
    2. Prioritize account security and verification
    3. Provide clear steps for account recovery/changes
    4. Include security tips and warnings
    5. Set clear expectations for resolution time
    
    Maintain a serious, security-focused tone.
    
    Input: `],["product",`You are a product specialist. Follow these guidelines:
    1. Always start with "Product Support Response:"
    2. Focus on feature education and best practices
    3. Include specific examples of usage
    4. Link to relevant documentation sections
    5. Suggest related features that might help
    
    Be educational and encouraging in tone.
    
    Input: `]]),t=[`Subject: Can't access my account
      Message: Hi, I've been trying to log in for the past hour but keep getting an 'invalid password' error. 
      I'm sure I'm using the right password. Can you help me regain access? This is urgent as I need to 
      submit a report by end of day.
      - John`,`Subject: Unexpected charge on my card
      Message: Hello, I just noticed a charge of $49.99 on my credit card from your company, but I thought
      I was on the $29.99 plan. Can you explain this charge and adjust it if it's a mistake?
      Thanks,
      Sarah`,`Subject: How to export data?
      Message: I need to export all my project data to Excel. I've looked through the docs but can't
      figure out how to do a bulk export. Is this possible? If so, could you walk me through the steps?
      Best regards,
      Mike`];let n=[];return t.forEach(async(p,C)=>{console.log(`
Ticket ${C}`),console.log("-".repeat(40)),console.log(p),console.log("Response: ");const b=await route(p,m);console.log(b),console.log("-".repeat(40)),n.push(b)}),n}class BaseLangGraphError extends Error{constructor(t,n){let p=t??"";n!=null&&n.lc_error_code&&(p=`${p}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${n.lc_error_code}/
`),super(p),Object.defineProperty(this,"lc_error_code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_error_code=n==null?void 0:n.lc_error_code}}class GraphBubbleUp extends BaseLangGraphError{get is_bubble_up(){return!0}}class GraphRecursionError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}}class GraphValueError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}}class GraphInterrupt extends GraphBubbleUp{constructor(t,n){super(JSON.stringify(t,null,2),n),Object.defineProperty(this,"interrupts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="GraphInterrupt",this.interrupts=t??[]}static get unminifiable_name(){return"GraphInterrupt"}}class NodeInterrupt extends GraphInterrupt{constructor(t,n){super([{value:t,when:"during"}],n),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}}class ParentCommand extends GraphBubbleUp{constructor(t){super(),Object.defineProperty(this,"command",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="ParentCommand",this.command=t}static get unminifiable_name(){return"ParentCommand"}}function isParentCommand(m){return m!==void 0&&m.name===ParentCommand.unminifiable_name}function isGraphBubbleUp(m){return m!==void 0&&m.is_bubble_up===!0}function isGraphInterrupt(m){return m!==void 0&&[GraphInterrupt.unminifiable_name,NodeInterrupt.unminifiable_name].includes(m.name)}class EmptyInputError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}}class EmptyChannelError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}}class InvalidUpdateError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}}class UnreachableNodeError extends BaseLangGraphError{constructor(t,n){super(t,n),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate$1(m){return typeof m=="string"&&REGEX.test(m)}function parse(m){if(!validate$1(m))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(m.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(m.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(m.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(m.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(m.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(m,t=0){return(byteToHex[m[t+0]]+byteToHex[m[t+1]]+byteToHex[m[t+2]]+byteToHex[m[t+3]]+"-"+byteToHex[m[t+4]]+byteToHex[m[t+5]]+"-"+byteToHex[m[t+6]]+byteToHex[m[t+7]]+"-"+byteToHex[m[t+8]]+byteToHex[m[t+9]]+"-"+byteToHex[m[t+10]]+byteToHex[m[t+11]]+byteToHex[m[t+12]]+byteToHex[m[t+13]]+byteToHex[m[t+14]]+byteToHex[m[t+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(m,t,n){var p=0,C=t||new Array(16);m=m||{};var b=m.node,o=m.clockseq;if(m._v6||(b||(b=_nodeId),o==null&&(o=_clockseq)),b==null||o==null){var E=m.random||(m.rng||rng)();b==null&&(b=[E[0],E[1],E[2],E[3],E[4],E[5]],!_nodeId&&!m._v6&&(b[0]|=1,_nodeId=b)),o==null&&(o=(E[6]<<8|E[7])&16383,_clockseq===void 0&&!m._v6&&(_clockseq=o))}var e=m.msecs!==void 0?m.msecs:Date.now(),a=m.nsecs!==void 0?m.nsecs:_lastNSecs+1,x=e-_lastMSecs+(a-_lastNSecs)/1e4;if(x<0&&m.clockseq===void 0&&(o=o+1&16383),(x<0||e>_lastMSecs)&&m.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=e,_lastNSecs=a,_clockseq=o,e+=122192928e5;var c=((e&268435455)*1e4+a)%4294967296;C[p++]=c>>>24&255,C[p++]=c>>>16&255,C[p++]=c>>>8&255,C[p++]=c&255;var u=e/4294967296*1e4&268435455;C[p++]=u>>>8&255,C[p++]=u&255,C[p++]=u>>>24&15|16,C[p++]=u>>>16&255,C[p++]=o>>>8|128,C[p++]=o&255;for(var h=0;h<6;++h)C[p+h]=b[h];return t||unsafeStringify(C)}function v1ToV6(m){var t=typeof m=="string"?parse(m):m,n=_v1ToV6(t);return typeof m=="string"?unsafeStringify(n):n}function _v1ToV6(m,t=!1){return Uint8Array.of((m[6]&15)<<4|m[7]>>4&15,(m[7]&15)<<4|(m[4]&240)>>4,(m[4]&15)<<4|(m[5]&240)>>4,(m[5]&15)<<4|(m[0]&240)>>4,(m[0]&15)<<4|(m[1]&240)>>4,(m[1]&15)<<4|(m[2]&240)>>4,96|m[2]&15,m[3],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])}function stringToBytes(m){m=unescape(encodeURIComponent(m));for(var t=[],n=0;n<m.length;++n)t.push(m.charCodeAt(n));return t}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(m,t,n){function p(C,b,o,E){var e;if(typeof C=="string"&&(C=stringToBytes(C)),typeof b=="string"&&(b=parse(b)),((e=b)===null||e===void 0?void 0:e.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+C.length);if(a.set(b),a.set(C,b.length),a=n(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,o){E=E||0;for(var x=0;x<16;++x)o[E+x]=a[x];return o}return unsafeStringify(a)}try{p.name=m}catch{}return p.DNS=DNS,p.URL=URL$1,p}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID};function v4(m,t,n){if(native.randomUUID&&!m)return native.randomUUID();m=m||{};var p=m.random||(m.rng||rng)();return p[6]=p[6]&15|64,p[8]=p[8]&63|128,unsafeStringify(p)}function f(m,t,n,p){switch(m){case 0:return t&n^~t&p;case 1:return t^n^p;case 2:return t&n^t&p^n&p;case 3:return t^n^p}}function ROTL(m,t){return m<<t|m>>>32-t}function sha1(m){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof m=="string"){var p=unescape(encodeURIComponent(m));m=[];for(var C=0;C<p.length;++C)m.push(p.charCodeAt(C))}else Array.isArray(m)||(m=Array.prototype.slice.call(m));m.push(128);for(var b=m.length/4+2,o=Math.ceil(b/16),E=new Array(o),e=0;e<o;++e){for(var a=new Uint32Array(16),x=0;x<16;++x)a[x]=m[e*64+x*4]<<24|m[e*64+x*4+1]<<16|m[e*64+x*4+2]<<8|m[e*64+x*4+3];E[e]=a}E[o-1][14]=(m.length-1)*8/Math.pow(2,32),E[o-1][14]=Math.floor(E[o-1][14]),E[o-1][15]=(m.length-1)*8&4294967295;for(var c=0;c<o;++c){for(var u=new Uint32Array(80),h=0;h<16;++h)u[h]=E[c][h];for(var s=16;s<80;++s)u[s]=ROTL(u[s-3]^u[s-8]^u[s-14]^u[s-16],1);for(var l=n[0],v=n[1],d=n[2],g=n[3],y=n[4],S=0;S<80;++S){var T=Math.floor(S/20),w=ROTL(l,5)+f(T,v,d,g)+y+t[T]+u[S]>>>0;y=g,g=d,d=ROTL(v,30)>>>0,v=l,l=w}n[0]=n[0]+l>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+d>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var v5=v35("v5",80,sha1);function ownKeys(m,t){var n=Object.keys(m);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(m);t&&(p=p.filter(function(C){return Object.getOwnPropertyDescriptor(m,C).enumerable})),n.push.apply(n,p)}return n}function _objectSpread(m){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(p){_defineProperty(m,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(p){Object.defineProperty(m,p,Object.getOwnPropertyDescriptor(n,p))})}return m}function _defineProperty(m,t,n){return(t=_toPropertyKey(t))in m?Object.defineProperty(m,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):m[t]=n,m}function _toPropertyKey(m){var t=_toPrimitive(m,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(m,t){if(typeof m!="object"||!m)return m;var n=m[Symbol.toPrimitive];if(n!==void 0){var p=n.call(m,t);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(m)}function v6(m={},t,n=0){var p=v1(_objectSpread(_objectSpread({},m),{},{_v6:!0}),new Uint8Array(16));return p=v1ToV6(p),unsafeStringify(p)}function uuid6(m){return v6({clockseq:m})}function uuid5(m,t){const n=t.replace(/-/g,"").match(/.{2}/g).map(p=>parseInt(p,16));return v5(m,new Uint8Array(n))}const ERROR$1="__error__",SCHEDULED$1="__scheduled__",INTERRUPT$1="__interrupt__",RESUME$1="__resume__";var decamelize,hasRequiredDecamelize;function requireDecamelize(){return hasRequiredDecamelize||(hasRequiredDecamelize=1,decamelize=function(m,t){if(typeof m!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,m.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}),decamelize}var decamelizeExports=requireDecamelize();const snakeCase=getDefaultExportFromCjs(decamelizeExports);var camelcase={exports:{}},hasRequiredCamelcase;function requireCamelcase(){if(hasRequiredCamelcase)return camelcase.exports;hasRequiredCamelcase=1;const m=/[\p{Lu}]/u,t=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,p=/([\p{Alpha}\p{N}_]|$)/u,C=/[_.\- ]+/,b=new RegExp("^"+C.source),o=new RegExp(C.source+p.source,"gu"),E=new RegExp("\\d+"+p.source,"gu"),e=(u,h,s)=>{let l=!1,v=!1,d=!1;for(let g=0;g<u.length;g++){const y=u[g];l&&m.test(y)?(u=u.slice(0,g)+"-"+u.slice(g),l=!1,d=v,v=!0,g++):v&&d&&t.test(y)?(u=u.slice(0,g-1)+"-"+u.slice(g-1),d=v,v=!1,l=!0):(l=h(y)===y&&s(y)!==y,d=v,v=s(y)===y&&h(y)!==y)}return u},a=(u,h)=>(n.lastIndex=0,u.replace(n,s=>h(s))),x=(u,h)=>(o.lastIndex=0,E.lastIndex=0,u.replace(o,(s,l)=>h(l)).replace(E,s=>h(s))),c=(u,h)=>{if(!(typeof u=="string"||Array.isArray(u)))throw new TypeError("Expected the input to be `string | string[]`");if(h={pascalCase:!1,preserveConsecutiveUppercase:!1,...h},Array.isArray(u)?u=u.map(d=>d.trim()).filter(d=>d.length).join("-"):u=u.trim(),u.length===0)return"";const s=h.locale===!1?d=>d.toLowerCase():d=>d.toLocaleLowerCase(h.locale),l=h.locale===!1?d=>d.toUpperCase():d=>d.toLocaleUpperCase(h.locale);return u.length===1?h.pascalCase?l(u):s(u):(u!==s(u)&&(u=e(u,s,l)),u=u.replace(b,""),h.preserveConsecutiveUppercase?u=a(u,s):u=s(u),h.pascalCase&&(u=l(u.charAt(0))+u.slice(1)),x(u,l))};return camelcase.exports=c,camelcase.exports.default=c,camelcase.exports}requireCamelcase();function keyToJson(m,t){return(t==null?void 0:t[m])||snakeCase(m)}function mapKeys(m,t,n){const p={};for(const C in m)Object.hasOwn(m,C)&&(p[t(C,n)]=m[C]);return p}function shallowCopy(m){return Array.isArray(m)?[...m]:{...m}}function replaceSecrets(m,t){const n=shallowCopy(m);for(const[p,C]of Object.entries(t)){const[b,...o]=p.split(".").reverse();let E=n;for(const e of o.reverse()){if(E[e]===void 0)break;E[e]=shallowCopy(E[e]),E=E[e]}E[b]!==void 0&&(E[b]={lc:1,type:"secret",id:[C]})}return n}function get_lc_unique_name(m){const t=Object.getPrototypeOf(m);return typeof m.lc_name=="function"&&(typeof t.lc_name!="function"||m.lc_name()!==t.lc_name())?m.lc_name():m.name}class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(t,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([p])=>{var C;return(C=this.lc_serializable_keys)==null?void 0:C.includes(p)})):this.lc_kwargs=t??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const t={},n={},p=Object.keys(this.lc_kwargs).reduce((C,b)=>(C[b]=b in this?this[b]:this.lc_kwargs[b],C),{});for(let C=Object.getPrototypeOf(this);C;C=Object.getPrototypeOf(C))Object.assign(t,Reflect.get(C,"lc_aliases",this)),Object.assign(n,Reflect.get(C,"lc_secrets",this)),Object.assign(p,Reflect.get(C,"lc_attributes",this));return Object.keys(n).forEach(C=>{let b=this,o=p;const[E,...e]=C.split(".").reverse();for(const a of e.reverse()){if(!(a in b)||b[a]===void 0)return;(!(a in o)||o[a]===void 0)&&(typeof b[a]=="object"&&b[a]!=null?o[a]={}:Array.isArray(b[a])&&(o[a]=[])),b=b[a],o=o[a]}E in b&&b[E]!==void 0&&(o[E]=o[E]||b[E])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(n).length?replaceSecrets(p,n):p,keyToJson,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var root$1=typeof window=="object"?window:{},HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],blocks=[];function Sha1(m){m?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(m){if(!this.finalized){var t=typeof m!="string";t&&m.constructor===root$1.ArrayBuffer&&(m=new Uint8Array(m));for(var n,p=0,C,b=m.length||0,o=this.blocks;p<b;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(C=this.start;p<b&&C<64;++p)o[C>>2]|=m[p]<<SHIFT[C++&3];else for(C=this.start;p<b&&C<64;++p)n=m.charCodeAt(p),n<128?o[C>>2]|=n<<SHIFT[C++&3]:n<2048?(o[C>>2]|=(192|n>>6)<<SHIFT[C++&3],o[C>>2]|=(128|n&63)<<SHIFT[C++&3]):n<55296||n>=57344?(o[C>>2]|=(224|n>>12)<<SHIFT[C++&3],o[C>>2]|=(128|n>>6&63)<<SHIFT[C++&3],o[C>>2]|=(128|n&63)<<SHIFT[C++&3]):(n=65536+((n&1023)<<10|m.charCodeAt(++p)&1023),o[C>>2]|=(240|n>>18)<<SHIFT[C++&3],o[C>>2]|=(128|n>>12&63)<<SHIFT[C++&3],o[C>>2]|=(128|n>>6&63)<<SHIFT[C++&3],o[C>>2]|=(128|n&63)<<SHIFT[C++&3]);this.lastByteIndex=C,this.bytes+=C-this.start,C>=64?(this.block=o[16],this.start=C-64,this.hash(),this.hashed=!0):this.start=C}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,t=this.lastByteIndex;m[16]=this.block,m[t>>2]|=EXTRA[t&3],this.block=m[16],t>=56&&(this.hashed||this.hash(),m[0]=this.block,m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),m[14]=this.hBytes<<3|this.bytes>>>29,m[15]=this.bytes<<3,this.hash()}};Sha1.prototype.hash=function(){var m=this.h0,t=this.h1,n=this.h2,p=this.h3,C=this.h4,b,o,E,e=this.blocks;for(o=16;o<80;++o)E=e[o-3]^e[o-8]^e[o-14]^e[o-16],e[o]=E<<1|E>>>31;for(o=0;o<20;o+=5)b=t&n|~t&p,E=m<<5|m>>>27,C=E+b+C+1518500249+e[o]<<0,t=t<<30|t>>>2,b=m&t|~m&n,E=C<<5|C>>>27,p=E+b+p+1518500249+e[o+1]<<0,m=m<<30|m>>>2,b=C&m|~C&t,E=p<<5|p>>>27,n=E+b+n+1518500249+e[o+2]<<0,C=C<<30|C>>>2,b=p&C|~p&m,E=n<<5|n>>>27,t=E+b+t+1518500249+e[o+3]<<0,p=p<<30|p>>>2,b=n&p|~n&C,E=t<<5|t>>>27,m=E+b+m+1518500249+e[o+4]<<0,n=n<<30|n>>>2;for(;o<40;o+=5)b=t^n^p,E=m<<5|m>>>27,C=E+b+C+1859775393+e[o]<<0,t=t<<30|t>>>2,b=m^t^n,E=C<<5|C>>>27,p=E+b+p+1859775393+e[o+1]<<0,m=m<<30|m>>>2,b=C^m^t,E=p<<5|p>>>27,n=E+b+n+1859775393+e[o+2]<<0,C=C<<30|C>>>2,b=p^C^m,E=n<<5|n>>>27,t=E+b+t+1859775393+e[o+3]<<0,p=p<<30|p>>>2,b=n^p^C,E=t<<5|t>>>27,m=E+b+m+1859775393+e[o+4]<<0,n=n<<30|n>>>2;for(;o<60;o+=5)b=t&n|t&p|n&p,E=m<<5|m>>>27,C=E+b+C-1894007588+e[o]<<0,t=t<<30|t>>>2,b=m&t|m&n|t&n,E=C<<5|C>>>27,p=E+b+p-1894007588+e[o+1]<<0,m=m<<30|m>>>2,b=C&m|C&t|m&t,E=p<<5|p>>>27,n=E+b+n-1894007588+e[o+2]<<0,C=C<<30|C>>>2,b=p&C|p&m|C&m,E=n<<5|n>>>27,t=E+b+t-1894007588+e[o+3]<<0,p=p<<30|p>>>2,b=n&p|n&C|p&C,E=t<<5|t>>>27,m=E+b+m-1894007588+e[o+4]<<0,n=n<<30|n>>>2;for(;o<80;o+=5)b=t^n^p,E=m<<5|m>>>27,C=E+b+C-899497514+e[o]<<0,t=t<<30|t>>>2,b=m^t^n,E=C<<5|C>>>27,p=E+b+p-899497514+e[o+1]<<0,m=m<<30|m>>>2,b=C^m^t,E=p<<5|p>>>27,n=E+b+n-899497514+e[o+2]<<0,C=C<<30|C>>>2,b=p^C^m,E=n<<5|n>>>27,t=E+b+t-899497514+e[o+3]<<0,p=p<<30|p>>>2,b=n^p^C,E=t<<5|t>>>27,m=E+b+m-899497514+e[o+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+m<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+p<<0,this.h4=this.h4+C<<0};Sha1.prototype.hex=function(){this.finalize();var m=this.h0,t=this.h1,n=this.h2,p=this.h3,C=this.h4;return HEX_CHARS[m>>28&15]+HEX_CHARS[m>>24&15]+HEX_CHARS[m>>20&15]+HEX_CHARS[m>>16&15]+HEX_CHARS[m>>12&15]+HEX_CHARS[m>>8&15]+HEX_CHARS[m>>4&15]+HEX_CHARS[m&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[p>>28&15]+HEX_CHARS[p>>24&15]+HEX_CHARS[p>>20&15]+HEX_CHARS[p>>16&15]+HEX_CHARS[p>>12&15]+HEX_CHARS[p>>8&15]+HEX_CHARS[p>>4&15]+HEX_CHARS[p&15]+HEX_CHARS[C>>28&15]+HEX_CHARS[C>>24&15]+HEX_CHARS[C>>20&15]+HEX_CHARS[C>>16&15]+HEX_CHARS[C>>12&15]+HEX_CHARS[C>>8&15]+HEX_CHARS[C>>4&15]+HEX_CHARS[C&15]};Sha1.prototype.toString=Sha1.prototype.hex;Sha1.prototype.digest=function(){this.finalize();var m=this.h0,t=this.h1,n=this.h2,p=this.h3,C=this.h4;return[m>>24&255,m>>16&255,m>>8&255,m&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,p>>24&255,p>>16&255,p>>8&255,p&255,C>>24&255,C>>16&255,C>>8&255,C&255]};Sha1.prototype.array=Sha1.prototype.digest;Sha1.prototype.arrayBuffer=function(){this.finalize();var m=new ArrayBuffer(20),t=new DataView(m);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),m};const insecureHash=m=>new Sha1(!0).update(m).hex();function addLangChainErrorFields$1(m,t){return m.lc_error_code=t,m.message=`${m.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/
`,m}function _isToolCall(m){return!!(m&&typeof m=="object"&&"type"in m&&m.type==="tool_call")}class ToolInputParsingException extends Error{constructor(t,n){super(t),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function parseJsonMarkdown(m,t=parsePartialJson){m=m.trim();const n=/```(json)?(.*)```/s.exec(m);return t(n?n[2]:m)}function parsePartialJson(m){if(typeof m>"u")return null;try{return JSON.parse(m)}catch{}let t="";const n=[];let p=!1,C=!1;for(let b of m){if(p)b==='"'&&!C?p=!1:b===`
`&&!C?b="\\n":b==="\\"?C=!C:C=!1;else if(b==='"')p=!0,C=!1;else if(b==="{")n.push("}");else if(b==="[")n.push("]");else if(b==="}"||b==="]")if(n&&n[n.length-1]===b)n.pop();else return null;t+=b}p&&(t+='"');for(let b=n.length-1;b>=0;b-=1)t+=n[b];try{return JSON.parse(t)}catch{return null}}function mergeContent(m,t){return typeof m=="string"?m===""?t:typeof t=="string"?m+t:[{type:"text",text:m},...t]:Array.isArray(t)?_mergeLists(m,t)??[...m,...t]:t===""?m:[...m,{type:"text",text:t}]}function _mergeStatus(m,t){return m==="error"||t==="error"?"error":"success"}function stringifyWithDepthLimit(m,t){function n(p,C){if(typeof p!="object"||p===null||p===void 0)return p;if(C>=t)return Array.isArray(p)?"[Array]":"[Object]";if(Array.isArray(p))return p.map(o=>n(o,C+1));const b={};for(const o of Object.keys(p))b[o]=n(p[o],C+1);return b}return JSON.stringify(n(m,0),null,2)}class BaseMessage extends Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(t,n){typeof t=="string"&&(t={content:t,additional_kwargs:n,response_metadata:{}}),t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.content=t.content,this.additional_kwargs=t.additional_kwargs,this.response_metadata=t.response_metadata,this.id=t.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(t){this.id=t,this.lc_kwargs.id=t}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](t){if(t===null)return this;const n=stringifyWithDepthLimit(this._printableFields,Math.max(4,t));return`${this.constructor.lc_name()} ${n}`}}function _mergeDicts(m,t){const n={...m};for(const[p,C]of Object.entries(t))if(n[p]==null)n[p]=C;else{if(C==null)continue;if(typeof n[p]!=typeof C||Array.isArray(n[p])!==Array.isArray(C))throw new Error(`field[${p}] already exists in the message chunk, but with a different type.`);if(typeof n[p]=="string"){if(p==="type")continue;n[p]+=C}else if(typeof n[p]=="object"&&!Array.isArray(n[p]))n[p]=_mergeDicts(n[p],C);else if(Array.isArray(n[p]))n[p]=_mergeLists(n[p],C);else{if(n[p]===C)continue;console.warn(`field[${p}] already exists in this message chunk and value has unsupported type.`)}}return n}function _mergeLists(m,t){if(!(m===void 0&&t===void 0)){if(m===void 0||t===void 0)return m||t;{const n=[...m];for(const p of t)if(typeof p=="object"&&"index"in p&&typeof p.index=="number"){const C=n.findIndex(b=>b.index===p.index);C!==-1?n[C]=_mergeDicts(n[C],p):n.push(p)}else{if(typeof p=="object"&&"text"in p&&p.text==="")continue;n.push(p)}return n}}}function _mergeObj(m,t){if(!m&&!t)throw new Error("Cannot merge two undefined objects.");if(!m||!t)return m||t;if(typeof m!=typeof t)throw new Error(`Cannot merge objects of different types.
Left ${typeof m}
Right ${typeof t}`);if(typeof m=="string"&&typeof t=="string")return m+t;if(Array.isArray(m)&&Array.isArray(t))return _mergeLists(m,t);if(typeof m=="object"&&typeof t=="object")return _mergeDicts(m,t);if(m===t)return m;throw new Error(`Can not merge objects of different types.
Left ${m}
Right ${t}`)}class BaseMessageChunk extends BaseMessage{}function _isMessageFieldWithRole(m){return typeof m.role=="string"}function isBaseMessage(m){return typeof(m==null?void 0:m._getType)=="function"}function isBaseMessageChunk(m){return isBaseMessage(m)&&typeof m.concat=="function"}class ToolMessage extends BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(t,n,p){typeof t=="string"&&(t={content:t,name:p,tool_call_id:n}),super(t),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=t.tool_call_id,this.artifact=t.artifact,this.status=t.status}_getType(){return"tool"}static isInstance(t){return t._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class ToolMessageChunk extends BaseMessageChunk{constructor(t){super(t),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=t.tool_call_id,this.artifact=t.artifact,this.status=t.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(t){return new ToolMessageChunk({content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),artifact:_mergeObj(this.artifact,t.artifact),tool_call_id:this.tool_call_id,id:this.id??t.id,status:_mergeStatus(this.status,t.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function defaultToolCallParser(m){const t=[],n=[];for(const p of m)if(p.function){const C=p.function.name;try{const b=JSON.parse(p.function.arguments),o={name:C||"",args:b||{},id:p.id};t.push(o)}catch{n.push({name:C,args:p.function.arguments,id:p.id,error:"Malformed args."})}}else continue;return[t,n]}function isToolMessage$1(m){return m._getType()==="tool"}class AIMessage extends BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(t,n){var C;let p;if(typeof t=="string")p={content:t,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{p=t;const b=(C=p.additional_kwargs)==null?void 0:C.tool_calls,o=p.tool_calls;b!=null&&b.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(b!=null&&o===void 0){const[E,e]=defaultToolCallParser(b);p.tool_calls=E??[],p.invalid_tool_calls=e??[]}else p.tool_calls=p.tool_calls??[],p.invalid_tool_calls=p.invalid_tool_calls??[]}catch{p.tool_calls=[],p.invalid_tool_calls=[]}}super(p),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof p!="string"&&(this.tool_calls=p.tool_calls??this.tool_calls,this.invalid_tool_calls=p.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=p.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function isAIMessage(m){return m._getType()==="ai"}function isAIMessageChunk(m){return m._getType()==="ai"}class AIMessageChunk extends BaseMessageChunk{constructor(t){let n;if(typeof t=="string")n={content:t,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(t.tool_call_chunks===void 0)n={...t,tool_calls:t.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0};else{const p=[],C=[];for(const b of t.tool_call_chunks){let o={};try{if(o=parsePartialJson(b.args||"{}"),o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");p.push({name:b.name??"",args:o,id:b.id,type:"tool_call"})}catch{C.push({name:b.name,args:b.args,id:b.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...t,tool_calls:p,invalid_tool_calls:C,usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(t){var p,C,b,o,E,e,a,x,c,u,h,s,l,v,d,g,y,S,T,w,P,A,R,I,M,L,N,G,D,B,$,k,X,Y,Z,Q,j,K,W,V;const n={content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),tool_call_chunks:[],id:this.id??t.id};if(this.tool_call_chunks!==void 0||t.tool_call_chunks!==void 0){const J=_mergeLists(this.tool_call_chunks,t.tool_call_chunks);J!==void 0&&J.length>0&&(n.tool_call_chunks=J)}if(this.usage_metadata!==void 0||t.usage_metadata!==void 0){const J={...(((C=(p=this.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:C.audio)!==void 0||((o=(b=t.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:o.audio)!==void 0)&&{audio:(((e=(E=this.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:e.audio)??0)+(((x=(a=t.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:x.audio)??0)},...(((u=(c=this.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:u.cache_read)!==void 0||((s=(h=t.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:s.cache_read)!==void 0)&&{cache_read:(((v=(l=this.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:v.cache_read)??0)+(((g=(d=t.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:g.cache_read)??0)},...(((S=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:S.cache_creation)!==void 0||((w=(T=t.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:w.cache_creation)!==void 0)&&{cache_creation:(((A=(P=this.usage_metadata)==null?void 0:P.input_token_details)==null?void 0:A.cache_creation)??0)+(((I=(R=t.usage_metadata)==null?void 0:R.input_token_details)==null?void 0:I.cache_creation)??0)}},ee={...(((L=(M=this.usage_metadata)==null?void 0:M.output_token_details)==null?void 0:L.audio)!==void 0||((G=(N=t.usage_metadata)==null?void 0:N.output_token_details)==null?void 0:G.audio)!==void 0)&&{audio:(((B=(D=this.usage_metadata)==null?void 0:D.output_token_details)==null?void 0:B.audio)??0)+(((k=($=t.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:k.audio)??0)},...(((Y=(X=this.usage_metadata)==null?void 0:X.output_token_details)==null?void 0:Y.reasoning)!==void 0||((Q=(Z=t.usage_metadata)==null?void 0:Z.output_token_details)==null?void 0:Q.reasoning)!==void 0)&&{reasoning:(((K=(j=this.usage_metadata)==null?void 0:j.output_token_details)==null?void 0:K.reasoning)??0)+(((V=(W=t.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:V.reasoning)??0)}},te=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ne=t.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},se={input_tokens:te.input_tokens+ne.input_tokens,output_tokens:te.output_tokens+ne.output_tokens,total_tokens:te.total_tokens+ne.total_tokens,...Object.keys(J).length>0&&{input_token_details:J},...Object.keys(ee).length>0&&{output_token_details:ee}};n.usage_metadata=se}return new AIMessageChunk(n)}}class ChatMessage extends BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ChatMessage}constructor(t,n){typeof t=="string"&&(t={content:t,role:n}),super(t),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=t.role}_getType(){return"generic"}static isInstance(t){return t._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class ChatMessageChunk extends BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(t,n){typeof t=="string"&&(t={content:t,role:n}),super(t),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=t.role}_getType(){return"generic"}concat(t){return new ChatMessageChunk({content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),role:this.role,id:this.id??t.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class FunctionMessageChunk extends BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(t){return new FunctionMessageChunk({content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),name:this.name??"",id:this.id??t.id})}}class HumanMessage extends BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class HumanMessageChunk extends BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(t){return new HumanMessageChunk({content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),id:this.id??t.id})}}class SystemMessage extends BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class SystemMessageChunk extends BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(t){return new SystemMessageChunk({content:mergeContent(this.content,t.content),additional_kwargs:_mergeDicts(this.additional_kwargs,t.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,t.response_metadata),id:this.id??t.id})}}function _coerceToolCall(m){return _isToolCall(m)?m:typeof m.id=="string"&&m.type==="function"&&typeof m.function=="object"&&m.function!==null&&"arguments"in m.function&&typeof m.function.arguments=="string"&&"name"in m.function&&typeof m.function.name=="string"?{id:m.id,args:JSON.parse(m.function.arguments),name:m.function.name,type:"tool_call"}:m}function isSerializedConstructor(m){return typeof m=="object"&&m!=null&&m.lc===1&&Array.isArray(m.id)&&m.kwargs!=null&&typeof m.kwargs=="object"}function _constructMessageFromParams(m){let t,n;if(isSerializedConstructor(m)){const p=m.id.at(-1);p==="HumanMessage"||p==="HumanMessageChunk"?t="user":p==="AIMessage"||p==="AIMessageChunk"?t="assistant":p==="SystemMessage"||p==="SystemMessageChunk"?t="system":p==="FunctionMessage"||p==="FunctionMessageChunk"?t="function":p==="ToolMessage"||p==="ToolMessageChunk"?t="tool":t="unknown",n=m.kwargs}else{const{type:p,...C}=m;t=p,n=C}if(t==="human"||t==="user")return new HumanMessage(n);if(t==="ai"||t==="assistant"){const{tool_calls:p,...C}=n;if(!Array.isArray(p))return new AIMessage(n);const b=p.map(_coerceToolCall);return new AIMessage({...C,tool_calls:b})}else{if(t==="system")return new SystemMessage(n);if(t==="developer")return new SystemMessage({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(t==="tool"&&"tool_call_id"in n)return new ToolMessage({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw addLangChainErrorFields$1(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(m,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function coerceMessageLikeToMessage(m){if(typeof m=="string")return new HumanMessage(m);if(isBaseMessage(m))return m;if(Array.isArray(m)){const[t,n]=m;return _constructMessageFromParams({type:t,content:n})}else if(_isMessageFieldWithRole(m)){const{role:t,...n}=m;return _constructMessageFromParams({...n,type:t})}else return _constructMessageFromParams(m)}function getBufferString(m,t="Human",n="AI"){const p=[];for(const C of m){let b;if(C._getType()==="human")b=t;else if(C._getType()==="ai")b=n;else if(C._getType()==="system")b="System";else if(C._getType()==="function")b="Function";else if(C._getType()==="tool")b="Tool";else if(C._getType()==="generic")b=C.role;else throw new Error(`Got unsupported message type: ${C._getType()}`);const o=C.name?`${C.name}, `:"",E=typeof C.content=="string"?C.content:JSON.stringify(C.content,null,2);p.push(`${b}: ${o}${E}`)}return p.join(`
`)}function convertToChunk(m){var n;const t=m._getType();if(t==="human")return new HumanMessageChunk({...m});if(t==="ai"){let p={...m};return"tool_calls"in p&&(p={...p,tool_call_chunks:(n=p.tool_calls)==null?void 0:n.map(C=>({...C,type:"tool_call_chunk",index:void 0,args:JSON.stringify(C.args)}))}),new AIMessageChunk({...p})}else{if(t==="system")return new SystemMessageChunk({...m});if(t==="function")return new FunctionMessageChunk({...m});if(ChatMessage.isInstance(m))return new ChatMessageChunk({...m});throw new Error("Unknown message type.")}}const getCacheKey=(...m)=>insecureHash(m.join("_"));class BaseCache{}const GLOBAL_MAP=new Map;class InMemoryCache extends BaseCache{constructor(t){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=t??new Map}lookup(t,n){return Promise.resolve(this.cache.get(getCacheKey(t,n))??null)}async update(t,n,p){this.cache.set(getCacheKey(t,n),p)}static global(){return new InMemoryCache(GLOBAL_MAP)}}var define_process_env_default$2={};const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker$1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom$1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno$1=()=>typeof Deno<"u",isNode$1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno$1(),getEnv$1=()=>{let m;return isBrowser$1()?m="browser":isNode$1()?m="node":isWebWorker$1()?m="webworker":isJsDom$1()?m="jsdom":isDeno$1()?m="deno":m="other",m};let runtimeEnvironment$1;async function getRuntimeEnvironment$1(){return runtimeEnvironment$1===void 0&&(runtimeEnvironment$1={library:"langchain-js",runtime:getEnv$1()}),runtimeEnvironment$1}function getEnvironmentVariable$1(m){try{return typeof process<"u"?define_process_env_default$2==null?void 0:define_process_env_default$2[m]:isDeno$1()?Deno==null?void 0:Deno.env.get(m):void 0}catch{return}}class BaseCallbackHandlerMethodsClass{}function callbackHandlerPrefersStreaming(m){return"lc_prefer_streaming"in m&&m.lc_prefer_streaming}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(t){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable$1("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=t||{},t&&(this.ignoreLLM=t.ignoreLLM??this.ignoreLLM,this.ignoreChain=t.ignoreChain??this.ignoreChain,this.ignoreAgent=t.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=t.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=t.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=t.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(t._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(t){class n extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,t)}}return new n}}const isBaseCallbackHandler=m=>{const t=m;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"};var ansiStyles={exports:{}};ansiStyles.exports;var hasRequiredAnsiStyles;function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,function(m){const n=(b=0)=>o=>`\x1B[${38+b};5;${o}m`,p=(b=0)=>(o,E,e)=>`\x1B[${38+b};2;${o};${E};${e}m`;function C(){const b=new Map,o={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};o.color.gray=o.color.blackBright,o.bgColor.bgGray=o.bgColor.bgBlackBright,o.color.grey=o.color.blackBright,o.bgColor.bgGrey=o.bgColor.bgBlackBright;for(const[E,e]of Object.entries(o)){for(const[a,x]of Object.entries(e))o[a]={open:`\x1B[${x[0]}m`,close:`\x1B[${x[1]}m`},e[a]=o[a],b.set(x[0],x[1]);Object.defineProperty(o,E,{value:e,enumerable:!1})}return Object.defineProperty(o,"codes",{value:b,enumerable:!1}),o.color.close="\x1B[39m",o.bgColor.close="\x1B[49m",o.color.ansi256=n(),o.color.ansi16m=p(),o.bgColor.ansi256=n(10),o.bgColor.ansi16m=p(10),Object.defineProperties(o,{rgbToAnsi256:{value:(E,e,a)=>E===e&&e===a?E<8?16:E>248?231:Math.round((E-8)/247*24)+232:16+36*Math.round(E/255*5)+6*Math.round(e/255*5)+Math.round(a/255*5),enumerable:!1},hexToRgb:{value:E=>{const e=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(E.toString(16));if(!e)return[0,0,0];let{colorString:a}=e.groups;a.length===3&&(a=a.split("").map(c=>c+c).join(""));const x=Number.parseInt(a,16);return[x>>16&255,x>>8&255,x&255]},enumerable:!1},hexToAnsi256:{value:E=>o.rgbToAnsi256(...o.hexToRgb(E)),enumerable:!1}}),o}Object.defineProperty(m,"exports",{enumerable:!0,get:C})}(ansiStyles)),ansiStyles.exports}var ansiStylesExports=requireAnsiStyles();const styles=getDefaultExportFromCjs(ansiStylesExports);function _coerceToDict$2(m,t){return m&&!Array.isArray(m)&&typeof m=="object"?m:{[t]:m}}function stripNonAlphanumeric$1(m){return m.replace(/[-:.]/g,"")}function convertToDottedOrderFormat$1(m,t,n){const p=n.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric$1(`${new Date(m).toISOString().slice(0,-1)}${p}Z`)+t}function isBaseTracer(m){return typeof m._addRunToRunMap=="function"}class BaseTracer extends BaseCallbackHandler{constructor(t){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(t){return t instanceof Error?t.message+(t!=null&&t.stack?`

${t.stack}`:""):typeof t=="string"?t:`${t}`}_addChildRun(t,n){t.child_runs.push(n)}_addRunToRunMap(t){const n=convertToDottedOrderFormat$1(t.start_time,t.id,t.execution_order),p={...t};if(p.parent_run_id!==void 0){const C=this.runMap.get(p.parent_run_id);C&&(this._addChildRun(C,p),C.child_execution_order=Math.max(C.child_execution_order,p.child_execution_order),p.trace_id=C.trace_id,C.dotted_order!==void 0&&(p.dotted_order=[C.dotted_order,n].join(".")))}else p.trace_id=p.id,p.dotted_order=n;return this.runMap.set(p.id,p),p}async _endTrace(t){var p;const n=t.parent_run_id!==void 0&&this.runMap.get(t.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,t.child_execution_order):await this.persistRun(t),this.runMap.delete(t.id),await((p=this.onRunUpdate)==null?void 0:p.call(this,t))}_getExecutionOrder(t){const n=t!==void 0&&this.runMap.get(t);return n?n.child_execution_order+1:1}_createRunForLLMStart(t,n,p,C,b,o,E,e){const a=this._getExecutionOrder(C),x=Date.now(),c=E?{...b,metadata:E}:b,u={id:p,name:e??t.id[t.id.length-1],parent_run_id:C,start_time:x,serialized:t,events:[{name:"start",time:new Date(x).toISOString()}],inputs:{prompts:n},execution_order:a,child_runs:[],child_execution_order:a,run_type:"llm",extra:c??{},tags:o||[]};return this._addRunToRunMap(u)}async handleLLMStart(t,n,p,C,b,o,E,e){var x,c;const a=this.runMap.get(p)??this._createRunForLLMStart(t,n,p,C,b,o,E,e);return await((x=this.onRunCreate)==null?void 0:x.call(this,a)),await((c=this.onLLMStart)==null?void 0:c.call(this,a)),a}_createRunForChatModelStart(t,n,p,C,b,o,E,e){const a=this._getExecutionOrder(C),x=Date.now(),c=E?{...b,metadata:E}:b,u={id:p,name:e??t.id[t.id.length-1],parent_run_id:C,start_time:x,serialized:t,events:[{name:"start",time:new Date(x).toISOString()}],inputs:{messages:n},execution_order:a,child_runs:[],child_execution_order:a,run_type:"llm",extra:c??{},tags:o||[]};return this._addRunToRunMap(u)}async handleChatModelStart(t,n,p,C,b,o,E,e){var x,c;const a=this.runMap.get(p)??this._createRunForChatModelStart(t,n,p,C,b,o,E,e);return await((x=this.onRunCreate)==null?void 0:x.call(this,a)),await((c=this.onLLMStart)==null?void 0:c.call(this,a)),a}async handleLLMEnd(t,n,p,C,b){var E;const o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.outputs=t,o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...b},await((E=this.onLLMEnd)==null?void 0:E.call(this,o)),await this._endTrace(o),o}async handleLLMError(t,n,p,C,b){var E;const o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(t),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...b},await((E=this.onLLMError)==null?void 0:E.call(this,o)),await this._endTrace(o),o}_createRunForChainStart(t,n,p,C,b,o,E,e){const a=this._getExecutionOrder(C),x=Date.now(),c={id:p,name:e??t.id[t.id.length-1],parent_run_id:C,start_time:x,serialized:t,events:[{name:"start",time:new Date(x).toISOString()}],inputs:n,execution_order:a,child_execution_order:a,run_type:E??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:b||[]};return this._addRunToRunMap(c)}async handleChainStart(t,n,p,C,b,o,E,e){var x,c;const a=this.runMap.get(p)??this._createRunForChainStart(t,n,p,C,b,o,E,e);return await((x=this.onRunCreate)==null?void 0:x.call(this,a)),await((c=this.onChainStart)==null?void 0:c.call(this,a)),a}async handleChainEnd(t,n,p,C,b){var E;const o=this.runMap.get(n);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=_coerceToDict$2(t,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),(b==null?void 0:b.inputs)!==void 0&&(o.inputs=_coerceToDict$2(b.inputs,"input")),await((E=this.onChainEnd)==null?void 0:E.call(this,o)),await this._endTrace(o),o}async handleChainError(t,n,p,C,b){var E;const o=this.runMap.get(n);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(t),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),(b==null?void 0:b.inputs)!==void 0&&(o.inputs=_coerceToDict$2(b.inputs,"input")),await((E=this.onChainError)==null?void 0:E.call(this,o)),await this._endTrace(o),o}_createRunForToolStart(t,n,p,C,b,o,E){const e=this._getExecutionOrder(C),a=Date.now(),x={id:p,name:E??t.id[t.id.length-1],parent_run_id:C,start_time:a,serialized:t,events:[{name:"start",time:new Date(a).toISOString()}],inputs:{input:n},execution_order:e,child_execution_order:e,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:b||[]};return this._addRunToRunMap(x)}async handleToolStart(t,n,p,C,b,o,E){var a,x;const e=this.runMap.get(p)??this._createRunForToolStart(t,n,p,C,b,o,E);return await((a=this.onRunCreate)==null?void 0:a.call(this,e)),await((x=this.onToolStart)==null?void 0:x.call(this,e)),e}async handleToolEnd(t,n){var C;const p=this.runMap.get(n);if(!p||(p==null?void 0:p.run_type)!=="tool")throw new Error("No tool run to end");return p.end_time=Date.now(),p.outputs={output:t},p.events.push({name:"end",time:new Date(p.end_time).toISOString()}),await((C=this.onToolEnd)==null?void 0:C.call(this,p)),await this._endTrace(p),p}async handleToolError(t,n){var C;const p=this.runMap.get(n);if(!p||(p==null?void 0:p.run_type)!=="tool")throw new Error("No tool run to end");return p.end_time=Date.now(),p.error=this.stringifyError(t),p.events.push({name:"error",time:new Date(p.end_time).toISOString()}),await((C=this.onToolError)==null?void 0:C.call(this,p)),await this._endTrace(p),p}async handleAgentAction(t,n){var b;const p=this.runMap.get(n);if(!p||(p==null?void 0:p.run_type)!=="chain")return;const C=p;C.actions=C.actions||[],C.actions.push(t),C.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:t}}),await((b=this.onAgentAction)==null?void 0:b.call(this,p))}async handleAgentEnd(t,n){var C;const p=this.runMap.get(n);!p||(p==null?void 0:p.run_type)!=="chain"||(p.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:t}}),await((C=this.onAgentEnd)==null?void 0:C.call(this,p)))}_createRunForRetrieverStart(t,n,p,C,b,o,E){const e=this._getExecutionOrder(C),a=Date.now(),x={id:p,name:E??t.id[t.id.length-1],parent_run_id:C,start_time:a,serialized:t,events:[{name:"start",time:new Date(a).toISOString()}],inputs:{query:n},execution_order:e,child_execution_order:e,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:b||[]};return this._addRunToRunMap(x)}async handleRetrieverStart(t,n,p,C,b,o,E){var a,x;const e=this.runMap.get(p)??this._createRunForRetrieverStart(t,n,p,C,b,o,E);return await((a=this.onRunCreate)==null?void 0:a.call(this,e)),await((x=this.onRetrieverStart)==null?void 0:x.call(this,e)),e}async handleRetrieverEnd(t,n){var C;const p=this.runMap.get(n);if(!p||(p==null?void 0:p.run_type)!=="retriever")throw new Error("No retriever run to end");return p.end_time=Date.now(),p.outputs={documents:t},p.events.push({name:"end",time:new Date(p.end_time).toISOString()}),await((C=this.onRetrieverEnd)==null?void 0:C.call(this,p)),await this._endTrace(p),p}async handleRetrieverError(t,n){var C;const p=this.runMap.get(n);if(!p||(p==null?void 0:p.run_type)!=="retriever")throw new Error("No retriever run to end");return p.end_time=Date.now(),p.error=this.stringifyError(t),p.events.push({name:"error",time:new Date(p.end_time).toISOString()}),await((C=this.onRetrieverError)==null?void 0:C.call(this,p)),await this._endTrace(p),p}async handleText(t,n){var C;const p=this.runMap.get(n);!p||(p==null?void 0:p.run_type)!=="chain"||(p.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:t}}),await((C=this.onText)==null?void 0:C.call(this,p)))}async handleLLMNewToken(t,n,p,C,b,o){var e;const E=this.runMap.get(p);if(!E||(E==null?void 0:E.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return E.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:t,idx:n,chunk:o==null?void 0:o.chunk}}),await((e=this.onLLMNewToken)==null?void 0:e.call(this,E,t,{chunk:o==null?void 0:o.chunk})),E}}function wrap$1(m,t){return`${m.open}${t}${m.close}`}function tryJsonStringify(m,t){try{return JSON.stringify(m,null,2)}catch{return t}}function formatKVMapItem(m){return typeof m=="string"?m.trim():m==null?m:tryJsonStringify(m,m.toString())}function elapsed(m){if(!m.end_time)return"";const t=m.end_time-m.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:color$1}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(t){return Promise.resolve()}getParents(t){const n=[];let p=t;for(;p.parent_run_id;){const C=this.runMap.get(p.parent_run_id);if(C)n.push(C),p=C;else break}return n}getBreadcrumbs(t){const p=[...this.getParents(t).reverse(),t].map((C,b,o)=>{const E=`${C.execution_order}:${C.run_type}:${C.name}`;return b===o.length-1?wrap$1(styles.bold,E):E}).join(" > ");return wrap$1(color$1.grey,p)}onChainStart(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.green,"[chain/start]")} [${n}] Entering Chain run with input: ${tryJsonStringify(t.inputs,"[inputs]")}`)}onChainEnd(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.cyan,"[chain/end]")} [${n}] [${elapsed(t)}] Exiting Chain run with output: ${tryJsonStringify(t.outputs,"[outputs]")}`)}onChainError(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.red,"[chain/error]")} [${n}] [${elapsed(t)}] Chain run errored with error: ${tryJsonStringify(t.error,"[error]")}`)}onLLMStart(t){const n=this.getBreadcrumbs(t),p="prompts"in t.inputs?{prompts:t.inputs.prompts.map(C=>C.trim())}:t.inputs;console.log(`${wrap$1(color$1.green,"[llm/start]")} [${n}] Entering LLM run with input: ${tryJsonStringify(p,"[inputs]")}`)}onLLMEnd(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.cyan,"[llm/end]")} [${n}] [${elapsed(t)}] Exiting LLM run with output: ${tryJsonStringify(t.outputs,"[response]")}`)}onLLMError(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.red,"[llm/error]")} [${n}] [${elapsed(t)}] LLM run errored with error: ${tryJsonStringify(t.error,"[error]")}`)}onToolStart(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.green,"[tool/start]")} [${n}] Entering Tool run with input: "${formatKVMapItem(t.inputs.input)}"`)}onToolEnd(t){var p;const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.cyan,"[tool/end]")} [${n}] [${elapsed(t)}] Exiting Tool run with output: "${formatKVMapItem((p=t.outputs)==null?void 0:p.output)}"`)}onToolError(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.red,"[tool/error]")} [${n}] [${elapsed(t)}] Tool run errored with error: ${tryJsonStringify(t.error,"[error]")}`)}onRetrieverStart(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${tryJsonStringify(t.inputs,"[inputs]")}`)}onRetrieverEnd(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.cyan,"[retriever/end]")} [${n}] [${elapsed(t)}] Exiting Retriever run with output: ${tryJsonStringify(t.outputs,"[outputs]")}`)}onRetrieverError(t){const n=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.red,"[retriever/error]")} [${n}] [${elapsed(t)}] Retriever run errored with error: ${tryJsonStringify(t.error,"[error]")}`)}onAgentAction(t){const n=t,p=this.getBreadcrumbs(t);console.log(`${wrap$1(color$1.blue,"[agent/action]")} [${p}] Agent selected action: ${tryJsonStringify(n.actions[n.actions.length-1],"[action]")}`)}}var pRetry$1={exports:{}},retry$1={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function m(t,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=m,m.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},m.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},m.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var n=new Date().getTime();if(t&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var p=this._timeouts.shift();if(p===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),p=this._cachedTimeouts.slice(-1);else return!1;var C=this;return this._timer=setTimeout(function(){C._attempts++,C._operationTimeoutCb&&(C._timeout=setTimeout(function(){C._operationTimeoutCb(C._attempts)},C._operationTimeout),C._options.unref&&C._timeout.unref()),C._fn(C._attempts)},p),this._options.unref&&this._timer.unref(),!0},m.prototype.attempt=function(t,n){this._fn=t,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var p=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){p._operationTimeoutCb()},p._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},m.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},m.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},m.prototype.start=m.prototype.try,m.prototype.errors=function(){return this._errors},m.prototype.attempts=function(){return this._attempts},m.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},n=null,p=0,C=0;C<this._errors.length;C++){var b=this._errors[C],o=b.message,E=(t[o]||0)+1;t[o]=E,E>=p&&(n=b,p=E)}return n},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,function(m){var t=requireRetry_operation();m.operation=function(n){var p=m.timeouts(n);return new t(p,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},m.timeouts=function(n){if(n instanceof Array)return[].concat(n);var p={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var C in n)p[C]=n[C];if(p.minTimeout>p.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var b=[],o=0;o<p.retries;o++)b.push(this.createTimeout(o,p));return n&&n.forever&&!b.length&&b.push(this.createTimeout(o,p)),b.sort(function(E,e){return E-e}),b},m.createTimeout=function(n,p){var C=p.randomize?Math.random()+1:1,b=Math.round(C*Math.max(p.minTimeout,1)*Math.pow(p.factor,n));return b=Math.min(b,p.maxTimeout),b},m.wrap=function(n,p,C){if(p instanceof Array&&(C=p,p=null),!C){C=[];for(var b in n)typeof n[b]=="function"&&C.push(b)}for(var o=0;o<C.length;o++){var E=C[o],e=n[E];n[E]=(function(x){var c=m.operation(p),u=Array.prototype.slice.call(arguments,1),h=u.pop();u.push(function(s){c.retry(s)||(s&&(arguments[0]=c.mainError()),h.apply(this,arguments))}),c.attempt(function(){x.apply(n,u)})}).bind(n,e),n[E].options=p}}}(retry$1)),retry$1}var retry,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry=requireRetry$1()),retry}var hasRequiredPRetry;function requirePRetry(){if(hasRequiredPRetry)return pRetry$1.exports;hasRequiredPRetry=1;const m=requireRetry(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(E){super(),E instanceof Error?(this.originalError=E,{message:E}=E):(this.originalError=new Error(E),this.originalError.stack=this.stack),this.name="AbortError",this.message=E}}const p=(o,E,e)=>{const a=e.retries-(E-1);return o.attemptNumber=E,o.retriesLeft=a,o},C=o=>t.includes(o),b=(o,E)=>new Promise((e,a)=>{E={onFailedAttempt:()=>{},retries:10,...E};const x=m.operation(E);x.attempt(async c=>{try{e(await o(c))}catch(u){if(!(u instanceof Error)){a(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));return}if(u instanceof n)x.stop(),a(u.originalError);else if(u instanceof TypeError&&!C(u.message))x.stop(),a(u);else{p(u,c,E);try{await E.onFailedAttempt(u)}catch(h){a(h);return}x.retry(u)||a(x.mainError())}}})});return pRetry$1.exports=b,pRetry$1.exports.default=b,pRetry$1.exports.AbortError=n,pRetry$1.exports}var pRetryExports=requirePRetry();const pRetry=getDefaultExportFromCjs(pRetryExports);var dist={},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(m){var t=Object.prototype.hasOwnProperty,n="~";function p(){}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(n=!1));function C(e,a,x){this.fn=e,this.context=a,this.once=x||!1}function b(e,a,x,c,u){if(typeof x!="function")throw new TypeError("The listener must be a function");var h=new C(x,c||e,u),s=n?n+a:a;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],h]:e._events[s].push(h):(e._events[s]=h,e._eventsCount++),e}function o(e,a){--e._eventsCount===0?e._events=new p:delete e._events[a]}function E(){this._events=new p,this._eventsCount=0}E.prototype.eventNames=function(){var a=[],x,c;if(this._eventsCount===0)return a;for(c in x=this._events)t.call(x,c)&&a.push(n?c.slice(1):c);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(x)):a},E.prototype.listeners=function(a){var x=n?n+a:a,c=this._events[x];if(!c)return[];if(c.fn)return[c.fn];for(var u=0,h=c.length,s=new Array(h);u<h;u++)s[u]=c[u].fn;return s},E.prototype.listenerCount=function(a){var x=n?n+a:a,c=this._events[x];return c?c.fn?1:c.length:0},E.prototype.emit=function(a,x,c,u,h,s){var l=n?n+a:a;if(!this._events[l])return!1;var v=this._events[l],d=arguments.length,g,y;if(v.fn){switch(v.once&&this.removeListener(a,v.fn,void 0,!0),d){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,x),!0;case 3:return v.fn.call(v.context,x,c),!0;case 4:return v.fn.call(v.context,x,c,u),!0;case 5:return v.fn.call(v.context,x,c,u,h),!0;case 6:return v.fn.call(v.context,x,c,u,h,s),!0}for(y=1,g=new Array(d-1);y<d;y++)g[y-1]=arguments[y];v.fn.apply(v.context,g)}else{var S=v.length,T;for(y=0;y<S;y++)switch(v[y].once&&this.removeListener(a,v[y].fn,void 0,!0),d){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,x);break;case 3:v[y].fn.call(v[y].context,x,c);break;case 4:v[y].fn.call(v[y].context,x,c,u);break;default:if(!g)for(T=1,g=new Array(d-1);T<d;T++)g[T-1]=arguments[T];v[y].fn.apply(v[y].context,g)}}return!0},E.prototype.on=function(a,x,c){return b(this,a,x,c,!1)},E.prototype.once=function(a,x,c){return b(this,a,x,c,!0)},E.prototype.removeListener=function(a,x,c,u){var h=n?n+a:a;if(!this._events[h])return this;if(!x)return o(this,h),this;var s=this._events[h];if(s.fn)s.fn===x&&(!u||s.once)&&(!c||s.context===c)&&o(this,h);else{for(var l=0,v=[],d=s.length;l<d;l++)(s[l].fn!==x||u&&!s[l].once||c&&s[l].context!==c)&&v.push(s[l]);v.length?this._events[h]=v.length===1?v[0]:v:o(this,h)}return this},E.prototype.removeAllListeners=function(a){var x;return a?(x=n?n+a:a,this._events[x]&&o(this,x)):(this._events=new p,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=n,E.EventEmitter=E,m.exports=E}(eventemitter3)),eventemitter3.exports}var pTimeout={exports:{}},pFinally,hasRequiredPFinally;function requirePFinally(){return hasRequiredPFinally||(hasRequiredPFinally=1,pFinally=(m,t)=>(t=t||(()=>{}),m.then(n=>new Promise(p=>{p(t())}).then(()=>n),n=>new Promise(p=>{p(t())}).then(()=>{throw n})))),pFinally}var hasRequiredPTimeout;function requirePTimeout(){if(hasRequiredPTimeout)return pTimeout.exports;hasRequiredPTimeout=1;const m=requirePFinally();class t extends Error{constructor(C){super(C),this.name="TimeoutError"}}const n=(p,C,b)=>new Promise((o,E)=>{if(typeof C!="number"||C<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(C===1/0){o(p);return}const e=setTimeout(()=>{if(typeof b=="function"){try{o(b())}catch(c){E(c)}return}const a=typeof b=="string"?b:`Promise timed out after ${C} milliseconds`,x=b instanceof Error?b:new t(a);typeof p.cancel=="function"&&p.cancel(),E(x)},C);m(p.then(o,E),()=>{clearTimeout(e)})});return pTimeout.exports=n,pTimeout.exports.default=n,pTimeout.exports.TimeoutError=t,pTimeout.exports}var priorityQueue={},lowerBound={},hasRequiredLowerBound;function requireLowerBound(){if(hasRequiredLowerBound)return lowerBound;hasRequiredLowerBound=1,Object.defineProperty(lowerBound,"__esModule",{value:!0});function m(t,n,p){let C=0,b=t.length;for(;b>0;){const o=b/2|0;let E=C+o;p(t[E],n)<=0?(C=++E,b-=o+1):b=o}return C}return lowerBound.default=m,lowerBound}var hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1,Object.defineProperty(priorityQueue,"__esModule",{value:!0});const m=requireLowerBound();class t{constructor(){this._queue=[]}enqueue(p,C){C=Object.assign({priority:0},C);const b={priority:C.priority,run:p};if(this.size&&this._queue[this.size-1].priority>=C.priority){this._queue.push(b);return}const o=m.default(this._queue,b,(E,e)=>e.priority-E.priority);this._queue.splice(o,0,b)}dequeue(){const p=this._queue.shift();return p==null?void 0:p.run}filter(p){return this._queue.filter(C=>C.priority===p.priority).map(C=>C.run)}get size(){return this._queue.length}}return priorityQueue.default=t,priorityQueue}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0});const m=requireEventemitter3(),t=requirePTimeout(),n=requirePriorityQueue(),p=()=>{},C=new t.TimeoutError;class b extends m{constructor(E){var e,a,x,c;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=p,this._resolveIdle=p,E=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},E),!(typeof E.intervalCap=="number"&&E.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(e=E.intervalCap)===null||e===void 0?void 0:e.toString())!==null&&a!==void 0?a:""}\` (${typeof E.intervalCap})`);if(E.interval===void 0||!(Number.isFinite(E.interval)&&E.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(c=(x=E.interval)===null||x===void 0?void 0:x.toString())!==null&&c!==void 0?c:""}\` (${typeof E.interval})`);this._carryoverConcurrencyCount=E.carryoverConcurrencyCount,this._isIntervalIgnored=E.intervalCap===1/0||E.interval===0,this._intervalCap=E.intervalCap,this._interval=E.interval,this._queue=new E.queueClass,this._queueClass=E.queueClass,this.concurrency=E.concurrency,this._timeout=E.timeout,this._throwOnTimeout=E.throwOnTimeout===!0,this._isPaused=E.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=p,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=p,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const E=Date.now();if(this._intervalId===void 0){const e=this._intervalEnd-E;if(e<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},e)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const E=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return e?(this.emit("active"),e(),E&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(E){if(!(typeof E=="number"&&E>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${E}\` (${typeof E})`);this._concurrency=E,this._processQueue()}async add(E,e={}){return new Promise((a,x)=>{const c=async()=>{this._pendingCount++,this._intervalCount++;try{const u=this._timeout===void 0&&e.timeout===void 0?E():t.default(Promise.resolve(E()),e.timeout===void 0?this._timeout:e.timeout,()=>{(e.throwOnTimeout===void 0?this._throwOnTimeout:e.throwOnTimeout)&&x(C)});a(await u)}catch(u){x(u)}this._next()};this._queue.enqueue(c,e),this._tryToStartAnother(),this.emit("add")})}async addAll(E,e){return Promise.all(E.map(async a=>this.add(a,e)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(E=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),E()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(E=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),E()}})}get size(){return this._queue.size}sizeBy(E){return this._queue.filter(E).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(E){this._timeout=E}}return dist.default=b,dist}var distExports=requireDist();const PQueueMod=getDefaultExportFromCjs(distExports),DEFAULT_FETCH_IMPLEMENTATION=(...m)=>fetch(...m),LANGSMITH_FETCH_IMPLEMENTATION_KEY=Symbol.for("ls:fetch_implementation"),_getFetchImplementation=()=>globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY]??DEFAULT_FETCH_IMPLEMENTATION,STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,"default"in PQueueMod?this.queue=new PQueueMod.default({concurrency:this.maxConcurrency}):this.queue=new PQueueMod({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t==null?void 0:t.onFailedResponseHook}call(t,...n){const p=this.onFailedResponseHook;return this.queue.add(()=>pRetry(()=>t(...n).catch(C=>{throw C instanceof Error?C:new Error(C)}),{async onFailedAttempt(C){if(C.message.startsWith("Cancel")||C.message.startsWith("TimeoutError")||C.message.startsWith("AbortError")||(C==null?void 0:C.code)==="ECONNABORTED")throw C;const b=C==null?void 0:C.response,o=b==null?void 0:b.status;if(o){if(STATUS_NO_RETRY$1.includes(+o))throw C;if(STATUS_IGNORE.includes(+o))return;p&&await p(b)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,n,...p){return t.signal?Promise.race([this.call(n,...p),new Promise((C,b)=>{var o;(o=t.signal)==null||o.addEventListener("abort",()=>{b(new Error("AbortError"))})})]):this.call(n,...p)}fetch(...t){return this.call(()=>_getFetchImplementation()(...t).then(n=>n.ok?n:Promise.reject(n)))}};function isLangChainMessage(m){return typeof(m==null?void 0:m._getType)=="function"}function convertLangChainMessageToExample(m){const t={type:m._getType(),data:{content:m.content}};return m!=null&&m.additional_kwargs&&Object.keys(m.additional_kwargs).length>0&&(t.data.additional_kwargs={...m.additional_kwargs}),t}function assertUuid(m,t){if(!validate$1(m)){const n=t!==void 0?`Invalid UUID for ${t}: ${m}`:`Invalid UUID: ${m}`;throw new Error(n)}return m}const warnedMessages={};function warnOnce(m){warnedMessages[m]||(console.warn(m),warnedMessages[m]=!0)}var re={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const m="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,C=t-6;return constants={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:p,MAX_SAFE_BUILD_LENGTH:C,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:m,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var m={};return debug_1=typeof process=="object"&&m&&m.NODE_DEBUG&&/\bsemver\b/i.test(m.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(m,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:p,MAX_LENGTH:C}=requireConstants(),b=requireDebug();t=m.exports={};const o=t.re=[],E=t.safeRe=[],e=t.src=[],a=t.safeSrc=[],x=t.t={};let c=0;const u="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",C],[u,p]],s=v=>{for(const[d,g]of h)v=v.split(`${d}*`).join(`${d}{0,${g}}`).split(`${d}+`).join(`${d}{1,${g}}`);return v},l=(v,d,g)=>{const y=s(d),S=c++;b(v,S,d),x[v]=S,e[S]=d,a[S]=y,o[S]=new RegExp(d,g?"g":void 0),E[S]=new RegExp(y,g?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","\\d+"),l("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),l("MAINVERSION",`(${e[x.NUMERICIDENTIFIER]})\\.(${e[x.NUMERICIDENTIFIER]})\\.(${e[x.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${e[x.NUMERICIDENTIFIERLOOSE]})\\.(${e[x.NUMERICIDENTIFIERLOOSE]})\\.(${e[x.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${e[x.NUMERICIDENTIFIER]}|${e[x.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${e[x.NUMERICIDENTIFIERLOOSE]}|${e[x.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${e[x.PRERELEASEIDENTIFIER]}(?:\\.${e[x.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${e[x.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${e[x.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER",`${u}+`),l("BUILD",`(?:\\+(${e[x.BUILDIDENTIFIER]}(?:\\.${e[x.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${e[x.MAINVERSION]}${e[x.PRERELEASE]}?${e[x.BUILD]}?`),l("FULL",`^${e[x.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${e[x.MAINVERSIONLOOSE]}${e[x.PRERELEASELOOSE]}?${e[x.BUILD]}?`),l("LOOSE",`^${e[x.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${e[x.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${e[x.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${e[x.XRANGEIDENTIFIER]})(?:\\.(${e[x.XRANGEIDENTIFIER]})(?:\\.(${e[x.XRANGEIDENTIFIER]})(?:${e[x.PRERELEASE]})?${e[x.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${e[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${e[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${e[x.XRANGEIDENTIFIERLOOSE]})(?:${e[x.PRERELEASELOOSE]})?${e[x.BUILD]}?)?)?`),l("XRANGE",`^${e[x.GTLT]}\\s*${e[x.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${e[x.GTLT]}\\s*${e[x.XRANGEPLAINLOOSE]}$`),l("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),l("COERCE",`${e[x.COERCEPLAIN]}(?:$|[^\\d])`),l("COERCEFULL",e[x.COERCEPLAIN]+`(?:${e[x.PRERELEASE]})?(?:${e[x.BUILD]})?(?:$|[^\\d])`),l("COERCERTL",e[x.COERCE],!0),l("COERCERTLFULL",e[x.COERCEFULL],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${e[x.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${e[x.LONETILDE]}${e[x.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${e[x.LONETILDE]}${e[x.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${e[x.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${e[x.LONECARET]}${e[x.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${e[x.LONECARET]}${e[x.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${e[x.GTLT]}\\s*(${e[x.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${e[x.GTLT]}\\s*(${e[x.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${e[x.GTLT]}\\s*(${e[x.LOOSEPLAIN]}|${e[x.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${e[x.XRANGEPLAIN]})\\s+-\\s+(${e[x.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${e[x.XRANGEPLAINLOOSE]})\\s+-\\s+(${e[x.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re,re.exports)),re.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const m=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=p=>p?typeof p!="object"?m:p:t,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const m=/^[0-9]+$/,t=(p,C)=>{const b=m.test(p),o=m.test(C);return b&&o&&(p=+p,C=+C),p===C?0:b&&!o?-1:o&&!b?1:p<C?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(p,C)=>t(C,p)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const m=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=requireConstants(),{safeRe:p,safeSrc:C,t:b}=requireRe(),o=requireParseOptions(),{compareIdentifiers:E}=requireIdentifiers();class e{constructor(x,c){if(c=o(c),x instanceof e){if(x.loose===!!c.loose&&x.includePrerelease===!!c.includePrerelease)return x;x=x.version}else if(typeof x!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof x}".`);if(x.length>t)throw new TypeError(`version is longer than ${t} characters`);m("SemVer",x,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const u=x.trim().match(c.loose?p[b.LOOSE]:p[b.FULL]);if(!u)throw new TypeError(`Invalid Version: ${x}`);if(this.raw=x,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const s=+h;if(s>=0&&s<n)return s}return h}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(x){if(m("SemVer.compare",this.version,this.options,x),!(x instanceof e)){if(typeof x=="string"&&x===this.version)return 0;x=new e(x,this.options)}return x.version===this.version?0:this.compareMain(x)||this.comparePre(x)}compareMain(x){return x instanceof e||(x=new e(x,this.options)),E(this.major,x.major)||E(this.minor,x.minor)||E(this.patch,x.patch)}comparePre(x){if(x instanceof e||(x=new e(x,this.options)),this.prerelease.length&&!x.prerelease.length)return-1;if(!this.prerelease.length&&x.prerelease.length)return 1;if(!this.prerelease.length&&!x.prerelease.length)return 0;let c=0;do{const u=this.prerelease[c],h=x.prerelease[c];if(m("prerelease compare",c,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return E(u,h)}while(++c)}compareBuild(x){x instanceof e||(x=new e(x,this.options));let c=0;do{const u=this.build[c],h=x.build[c];if(m("build compare",c,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return E(u,h)}while(++c)}inc(x,c,u){if(x.startsWith("pre")){if(!c&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const h=new RegExp(`^${this.options.loose?C[b.PRERELEASELOOSE]:C[b.PRERELEASE]}$`),s=`-${c}`.match(h);if(!s||s[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(x){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,u),this.inc("pre",c,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,u),this.inc("pre",c,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(c===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(c){let s=[c,h];u===!1&&(s=[c]),E(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${x}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=e,semver$1}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;const m=requireSemver$1();return parse_1=(n,p,C=!1)=>{if(n instanceof m)return n;try{return new m(n,p)}catch(b){if(!C)return null;throw b}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const m=requireParse();return valid_1=(n,p)=>{const C=m(n,p);return C?C.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const m=requireParse();return clean_1=(n,p)=>{const C=m(n.trim().replace(/^[=v]+/,""),p);return C?C.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const m=requireSemver$1();return inc_1=(n,p,C,b,o)=>{typeof C=="string"&&(o=b,b=C,C=void 0);try{return new m(n instanceof m?n.version:n,C).inc(p,b,o).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const m=requireParse();return diff_1=(n,p)=>{const C=m(n,null,!0),b=m(p,null,!0),o=C.compare(b);if(o===0)return null;const E=o>0,e=E?C:b,a=E?b:C,x=!!e.prerelease.length;if(!!a.prerelease.length&&!x){if(!a.patch&&!a.minor)return"major";if(a.compareMain(e)===0)return a.minor&&!a.patch?"minor":"patch"}const u=x?"pre":"";return C.major!==b.major?u+"major":C.minor!==b.minor?u+"minor":C.patch!==b.patch?u+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const m=requireSemver$1();return major_1=(n,p)=>new m(n,p).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const m=requireSemver$1();return minor_1=(n,p)=>new m(n,p).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const m=requireSemver$1();return patch_1=(n,p)=>new m(n,p).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const m=requireParse();return prerelease_1=(n,p)=>{const C=m(n,p);return C&&C.prerelease.length?C.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const m=requireSemver$1();return compare_1=(n,p,C)=>new m(n,C).compare(new m(p,C)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const m=requireCompare();return rcompare_1=(n,p,C)=>m(p,n,C),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const m=requireCompare();return compareLoose_1=(n,p)=>m(n,p,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const m=requireSemver$1();return compareBuild_1=(n,p,C)=>{const b=new m(n,C),o=new m(p,C);return b.compare(o)||b.compareBuild(o)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const m=requireCompareBuild();return sort_1=(n,p)=>n.sort((C,b)=>m(C,b,p)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const m=requireCompareBuild();return rsort_1=(n,p)=>n.sort((C,b)=>m(b,C,p)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const m=requireCompare();return gt_1=(n,p,C)=>m(n,p,C)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const m=requireCompare();return lt_1=(n,p,C)=>m(n,p,C)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const m=requireCompare();return eq_1=(n,p,C)=>m(n,p,C)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const m=requireCompare();return neq_1=(n,p,C)=>m(n,p,C)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const m=requireCompare();return gte_1=(n,p,C)=>m(n,p,C)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const m=requireCompare();return lte_1=(n,p,C)=>m(n,p,C)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const m=requireEq(),t=requireNeq(),n=requireGt(),p=requireGte(),C=requireLt(),b=requireLte();return cmp_1=(E,e,a,x)=>{switch(e){case"===":return typeof E=="object"&&(E=E.version),typeof a=="object"&&(a=a.version),E===a;case"!==":return typeof E=="object"&&(E=E.version),typeof a=="object"&&(a=a.version),E!==a;case"":case"=":case"==":return m(E,a,x);case"!=":return t(E,a,x);case">":return n(E,a,x);case">=":return p(E,a,x);case"<":return C(E,a,x);case"<=":return b(E,a,x);default:throw new TypeError(`Invalid operator: ${e}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const m=requireSemver$1(),t=requireParse(),{safeRe:n,t:p}=requireRe();return coerce_1=(b,o)=>{if(b instanceof m)return b;if(typeof b=="number"&&(b=String(b)),typeof b!="string")return null;o=o||{};let E=null;if(!o.rtl)E=b.match(o.includePrerelease?n[p.COERCEFULL]:n[p.COERCE]);else{const h=o.includePrerelease?n[p.COERCERTLFULL]:n[p.COERCERTL];let s;for(;(s=h.exec(b))&&(!E||E.index+E[0].length!==b.length);)(!E||s.index+s[0].length!==E.index+E[0].length)&&(E=s),h.lastIndex=s.index+s[1].length+s[2].length;h.lastIndex=-1}if(E===null)return null;const e=E[2],a=E[3]||"0",x=E[4]||"0",c=o.includePrerelease&&E[5]?`-${E[5]}`:"",u=o.includePrerelease&&E[6]?`+${E[6]}`:"";return t(`${e}.${a}.${x}${c}${u}`,o)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class m{constructor(){this.max=1e3,this.map=new Map}get(n){const p=this.map.get(n);if(p!==void 0)return this.map.delete(n),this.map.set(n,p),p}delete(n){return this.map.delete(n)}set(n,p){if(!this.delete(n)&&p!==void 0){if(this.map.size>=this.max){const b=this.map.keys().next().value;this.delete(b)}this.map.set(n,p)}return this}}return lrucache=m,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const m=/\s+/g;class t{constructor(D,B){if(B=C(B),D instanceof t)return D.loose===!!B.loose&&D.includePrerelease===!!B.includePrerelease?D:new t(D.raw,B);if(D instanceof b)return this.raw=D.value,this.set=[[D]],this.formatted=void 0,this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=D.trim().replace(m," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(k=>!l(k[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const k of this.set)if(k.length===1&&v(k[0])){this.set=[k];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let D=0;D<this.set.length;D++){D>0&&(this.formatted+="||");const B=this.set[D];for(let $=0;$<B.length;$++)$>0&&(this.formatted+=" "),this.formatted+=B[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(D){const $=((this.options.includePrerelease&&h)|(this.options.loose&&s))+":"+D,k=p.get($);if(k)return k;const X=this.options.loose,Y=X?e[a.HYPHENRANGELOOSE]:e[a.HYPHENRANGE];D=D.replace(Y,L(this.options.includePrerelease)),o("hyphen replace",D),D=D.replace(e[a.COMPARATORTRIM],x),o("comparator trim",D),D=D.replace(e[a.TILDETRIM],c),o("tilde trim",D),D=D.replace(e[a.CARETTRIM],u),o("caret trim",D);let Z=D.split(" ").map(W=>g(W,this.options)).join(" ").split(/\s+/).map(W=>M(W,this.options));X&&(Z=Z.filter(W=>(o("loose invalid filter",W,this.options),!!W.match(e[a.COMPARATORLOOSE])))),o("range list",Z);const Q=new Map,j=Z.map(W=>new b(W,this.options));for(const W of j){if(l(W))return[W];Q.set(W.value,W)}Q.size>1&&Q.has("")&&Q.delete("");const K=[...Q.values()];return p.set($,K),K}intersects(D,B){if(!(D instanceof t))throw new TypeError("a Range is required");return this.set.some($=>d($,B)&&D.set.some(k=>d(k,B)&&$.every(X=>k.every(Y=>X.intersects(Y,B)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new E(D,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(N(this.set[B],D,this.options))return!0;return!1}}range=t;const n=requireLrucache(),p=new n,C=requireParseOptions(),b=requireComparator(),o=requireDebug(),E=requireSemver$1(),{safeRe:e,t:a,comparatorTrimReplace:x,tildeTrimReplace:c,caretTrimReplace:u}=requireRe(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:s}=requireConstants(),l=G=>G.value==="<0.0.0-0",v=G=>G.value==="",d=(G,D)=>{let B=!0;const $=G.slice();let k=$.pop();for(;B&&$.length;)B=$.every(X=>k.intersects(X,D)),k=$.pop();return B},g=(G,D)=>(o("comp",G,D),G=w(G,D),o("caret",G),G=S(G,D),o("tildes",G),G=A(G,D),o("xrange",G),G=I(G,D),o("stars",G),G),y=G=>!G||G.toLowerCase()==="x"||G==="*",S=(G,D)=>G.trim().split(/\s+/).map(B=>T(B,D)).join(" "),T=(G,D)=>{const B=D.loose?e[a.TILDELOOSE]:e[a.TILDE];return G.replace(B,($,k,X,Y,Z)=>{o("tilde",G,$,k,X,Y,Z);let Q;return y(k)?Q="":y(X)?Q=`>=${k}.0.0 <${+k+1}.0.0-0`:y(Y)?Q=`>=${k}.${X}.0 <${k}.${+X+1}.0-0`:Z?(o("replaceTilde pr",Z),Q=`>=${k}.${X}.${Y}-${Z} <${k}.${+X+1}.0-0`):Q=`>=${k}.${X}.${Y} <${k}.${+X+1}.0-0`,o("tilde return",Q),Q})},w=(G,D)=>G.trim().split(/\s+/).map(B=>P(B,D)).join(" "),P=(G,D)=>{o("caret",G,D);const B=D.loose?e[a.CARETLOOSE]:e[a.CARET],$=D.includePrerelease?"-0":"";return G.replace(B,(k,X,Y,Z,Q)=>{o("caret",G,k,X,Y,Z,Q);let j;return y(X)?j="":y(Y)?j=`>=${X}.0.0${$} <${+X+1}.0.0-0`:y(Z)?X==="0"?j=`>=${X}.${Y}.0${$} <${X}.${+Y+1}.0-0`:j=`>=${X}.${Y}.0${$} <${+X+1}.0.0-0`:Q?(o("replaceCaret pr",Q),X==="0"?Y==="0"?j=`>=${X}.${Y}.${Z}-${Q} <${X}.${Y}.${+Z+1}-0`:j=`>=${X}.${Y}.${Z}-${Q} <${X}.${+Y+1}.0-0`:j=`>=${X}.${Y}.${Z}-${Q} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?Y==="0"?j=`>=${X}.${Y}.${Z}${$} <${X}.${Y}.${+Z+1}-0`:j=`>=${X}.${Y}.${Z}${$} <${X}.${+Y+1}.0-0`:j=`>=${X}.${Y}.${Z} <${+X+1}.0.0-0`),o("caret return",j),j})},A=(G,D)=>(o("replaceXRanges",G,D),G.split(/\s+/).map(B=>R(B,D)).join(" ")),R=(G,D)=>{G=G.trim();const B=D.loose?e[a.XRANGELOOSE]:e[a.XRANGE];return G.replace(B,($,k,X,Y,Z,Q)=>{o("xRange",G,$,k,X,Y,Z,Q);const j=y(X),K=j||y(Y),W=K||y(Z),V=W;return k==="="&&V&&(k=""),Q=D.includePrerelease?"-0":"",j?k===">"||k==="<"?$="<0.0.0-0":$="*":k&&V?(K&&(Y=0),Z=0,k===">"?(k=">=",K?(X=+X+1,Y=0,Z=0):(Y=+Y+1,Z=0)):k==="<="&&(k="<",K?X=+X+1:Y=+Y+1),k==="<"&&(Q="-0"),$=`${k+X}.${Y}.${Z}${Q}`):K?$=`>=${X}.0.0${Q} <${+X+1}.0.0-0`:W&&($=`>=${X}.${Y}.0${Q} <${X}.${+Y+1}.0-0`),o("xRange return",$),$})},I=(G,D)=>(o("replaceStars",G,D),G.trim().replace(e[a.STAR],"")),M=(G,D)=>(o("replaceGTE0",G,D),G.trim().replace(e[D.includePrerelease?a.GTE0PRE:a.GTE0],"")),L=G=>(D,B,$,k,X,Y,Z,Q,j,K,W,V)=>(y($)?B="":y(k)?B=`>=${$}.0.0${G?"-0":""}`:y(X)?B=`>=${$}.${k}.0${G?"-0":""}`:Y?B=`>=${B}`:B=`>=${B}${G?"-0":""}`,y(j)?Q="":y(K)?Q=`<${+j+1}.0.0-0`:y(W)?Q=`<${j}.${+K+1}.0-0`:V?Q=`<=${j}.${K}.${W}-${V}`:G?Q=`<${j}.${K}.${+W+1}-0`:Q=`<=${Q}`,`${B} ${Q}`.trim()),N=(G,D,B)=>{for(let $=0;$<G.length;$++)if(!G[$].test(D))return!1;if(D.prerelease.length&&!B.includePrerelease){for(let $=0;$<G.length;$++)if(o(G[$].semver),G[$].semver!==b.ANY&&G[$].semver.prerelease.length>0){const k=G[$].semver;if(k.major===D.major&&k.minor===D.minor&&k.patch===D.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const m=Symbol("SemVer ANY");class t{static get ANY(){return m}constructor(x,c){if(c=n(c),x instanceof t){if(x.loose===!!c.loose)return x;x=x.value}x=x.trim().split(/\s+/).join(" "),o("comparator",x,c),this.options=c,this.loose=!!c.loose,this.parse(x),this.semver===m?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(x){const c=this.options.loose?p[C.COMPARATORLOOSE]:p[C.COMPARATOR],u=x.match(c);if(!u)throw new TypeError(`Invalid comparator: ${x}`);this.operator=u[1]!==void 0?u[1]:"",this.operator==="="&&(this.operator=""),u[2]?this.semver=new E(u[2],this.options.loose):this.semver=m}toString(){return this.value}test(x){if(o("Comparator.test",x,this.options.loose),this.semver===m||x===m)return!0;if(typeof x=="string")try{x=new E(x,this.options)}catch{return!1}return b(x,this.operator,this.semver,this.options)}intersects(x,c){if(!(x instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new e(x.value,c).test(this.value):x.operator===""?x.value===""?!0:new e(this.value,c).test(x.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||x.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||x.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&x.operator.startsWith(">")||this.operator.startsWith("<")&&x.operator.startsWith("<")||this.semver.version===x.semver.version&&this.operator.includes("=")&&x.operator.includes("=")||b(this.semver,"<",x.semver,c)&&this.operator.startsWith(">")&&x.operator.startsWith("<")||b(this.semver,">",x.semver,c)&&this.operator.startsWith("<")&&x.operator.startsWith(">")))}}comparator=t;const n=requireParseOptions(),{safeRe:p,t:C}=requireRe(),b=requireCmp(),o=requireDebug(),E=requireSemver$1(),e=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const m=requireRange();return satisfies_1=(n,p,C)=>{try{p=new m(p,C)}catch{return!1}return p.test(n)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const m=requireRange();return toComparators_1=(n,p)=>new m(n,p).set.map(C=>C.map(b=>b.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const m=requireSemver$1(),t=requireRange();return maxSatisfying_1=(p,C,b)=>{let o=null,E=null,e=null;try{e=new t(C,b)}catch{return null}return p.forEach(a=>{e.test(a)&&(!o||E.compare(a)===-1)&&(o=a,E=new m(o,b))}),o},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const m=requireSemver$1(),t=requireRange();return minSatisfying_1=(p,C,b)=>{let o=null,E=null,e=null;try{e=new t(C,b)}catch{return null}return p.forEach(a=>{e.test(a)&&(!o||E.compare(a)===1)&&(o=a,E=new m(o,b))}),o},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const m=requireSemver$1(),t=requireRange(),n=requireGt();return minVersion_1=(C,b)=>{C=new t(C,b);let o=new m("0.0.0");if(C.test(o)||(o=new m("0.0.0-0"),C.test(o)))return o;o=null;for(let E=0;E<C.set.length;++E){const e=C.set[E];let a=null;e.forEach(x=>{const c=new m(x.semver.version);switch(x.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!a||n(c,a))&&(a=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${x.operator}`)}}),a&&(!o||n(o,a))&&(o=a)}return o&&C.test(o)?o:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const m=requireRange();return valid=(n,p)=>{try{return new m(n,p).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const m=requireSemver$1(),t=requireComparator(),{ANY:n}=t,p=requireRange(),C=requireSatisfies(),b=requireGt(),o=requireLt(),E=requireLte(),e=requireGte();return outside_1=(x,c,u,h)=>{x=new m(x,h),c=new p(c,h);let s,l,v,d,g;switch(u){case">":s=b,l=E,v=o,d=">",g=">=";break;case"<":s=o,l=e,v=b,d="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(C(x,c,h))return!1;for(let y=0;y<c.set.length;++y){const S=c.set[y];let T=null,w=null;if(S.forEach(P=>{P.semver===n&&(P=new t(">=0.0.0")),T=T||P,w=w||P,s(P.semver,T.semver,h)?T=P:v(P.semver,w.semver,h)&&(w=P)}),T.operator===d||T.operator===g||(!w.operator||w.operator===d)&&l(x,w.semver))return!1;if(w.operator===g&&v(x,w.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const m=requireOutside();return gtr_1=(n,p,C)=>m(n,p,">",C),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const m=requireOutside();return ltr_1=(n,p,C)=>m(n,p,"<",C),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const m=requireRange();return intersects_1=(n,p,C)=>(n=new m(n,C),p=new m(p,C),n.intersects(p,C)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const m=requireSatisfies(),t=requireCompare();return simplify=(n,p,C)=>{const b=[];let o=null,E=null;const e=n.sort((u,h)=>t(u,h,C));for(const u of e)m(u,p,C)?(E=u,o||(o=u)):(E&&b.push([o,E]),E=null,o=null);o&&b.push([o,null]);const a=[];for(const[u,h]of b)u===h?a.push(u):!h&&u===e[0]?a.push("*"):h?u===e[0]?a.push(`<=${h}`):a.push(`${u} - ${h}`):a.push(`>=${u}`);const x=a.join(" || "),c=typeof p.raw=="string"?p.raw:String(p);return x.length<c.length?x:p},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const m=requireRange(),t=requireComparator(),{ANY:n}=t,p=requireSatisfies(),C=requireCompare(),b=(c,u,h={})=>{if(c===u)return!0;c=new m(c,h),u=new m(u,h);let s=!1;e:for(const l of c.set){for(const v of u.set){const d=e(l,v,h);if(s=s||d!==null,d)continue e}if(s)return!1}return!0},o=[new t(">=0.0.0-0")],E=[new t(">=0.0.0")],e=(c,u,h)=>{if(c===u)return!0;if(c.length===1&&c[0].semver===n){if(u.length===1&&u[0].semver===n)return!0;h.includePrerelease?c=o:c=E}if(u.length===1&&u[0].semver===n){if(h.includePrerelease)return!0;u=E}const s=new Set;let l,v;for(const A of c)A.operator===">"||A.operator===">="?l=a(l,A,h):A.operator==="<"||A.operator==="<="?v=x(v,A,h):s.add(A.semver);if(s.size>1)return null;let d;if(l&&v){if(d=C(l.semver,v.semver,h),d>0)return null;if(d===0&&(l.operator!==">="||v.operator!=="<="))return null}for(const A of s){if(l&&!p(A,String(l),h)||v&&!p(A,String(v),h))return null;for(const R of u)if(!p(A,String(R),h))return!1;return!0}let g,y,S,T,w=v&&!h.includePrerelease&&v.semver.prerelease.length?v.semver:!1,P=l&&!h.includePrerelease&&l.semver.prerelease.length?l.semver:!1;w&&w.prerelease.length===1&&v.operator==="<"&&w.prerelease[0]===0&&(w=!1);for(const A of u){if(T=T||A.operator===">"||A.operator===">=",S=S||A.operator==="<"||A.operator==="<=",l){if(P&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===P.major&&A.semver.minor===P.minor&&A.semver.patch===P.patch&&(P=!1),A.operator===">"||A.operator===">="){if(g=a(l,A,h),g===A&&g!==l)return!1}else if(l.operator===">="&&!p(l.semver,String(A),h))return!1}if(v){if(w&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===w.major&&A.semver.minor===w.minor&&A.semver.patch===w.patch&&(w=!1),A.operator==="<"||A.operator==="<="){if(y=x(v,A,h),y===A&&y!==v)return!1}else if(v.operator==="<="&&!p(v.semver,String(A),h))return!1}if(!A.operator&&(v||l)&&d!==0)return!1}return!(l&&S&&!v&&d!==0||v&&T&&!l&&d!==0||P||w)},a=(c,u,h)=>{if(!c)return u;const s=C(c.semver,u.semver,h);return s>0?c:s<0||u.operator===">"&&c.operator===">="?u:c},x=(c,u,h)=>{if(!c)return u;const s=C(c.semver,u.semver,h);return s<0?c:s>0||u.operator==="<"&&c.operator==="<="?u:c};return subset_1=b,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const m=requireRe(),t=requireConstants(),n=requireSemver$1(),p=requireIdentifiers(),C=requireParse(),b=requireValid$1(),o=requireClean(),E=requireInc(),e=requireDiff(),a=requireMajor(),x=requireMinor(),c=requirePatch(),u=requirePrerelease(),h=requireCompare(),s=requireRcompare(),l=requireCompareLoose(),v=requireCompareBuild(),d=requireSort(),g=requireRsort(),y=requireGt(),S=requireLt(),T=requireEq(),w=requireNeq(),P=requireGte(),A=requireLte(),R=requireCmp(),I=requireCoerce(),M=requireComparator(),L=requireRange(),N=requireSatisfies(),G=requireToComparators(),D=requireMaxSatisfying(),B=requireMinSatisfying(),$=requireMinVersion(),k=requireValid(),X=requireOutside(),Y=requireGtr(),Z=requireLtr(),Q=requireIntersects(),j=requireSimplify(),K=requireSubset();return semver={parse:C,valid:b,clean:o,inc:E,diff:e,major:a,minor:x,patch:c,prerelease:u,compare:h,rcompare:s,compareLoose:l,compareBuild:v,sort:d,rsort:g,gt:y,lt:S,eq:T,neq:w,gte:P,lte:A,cmp:R,coerce:I,Comparator:M,Range:L,satisfies:N,toComparators:G,maxSatisfying:D,minSatisfying:B,minVersion:$,validRange:k,outside:X,gtr:Y,ltr:Z,intersects:Q,simplifyRange:j,subset:K,SemVer:n,re:m.re,src:m.src,tokens:m.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:p.compareIdentifiers,rcompareIdentifiers:p.rcompareIdentifiers},semver}requireSemver();function parsePromptIdentifier(m){if(!m||m.split("/").length>2||m.startsWith("/")||m.endsWith("/")||m.split(":").length>2)throw new Error(`Invalid identifier format: ${m}`);const[t,n]=m.split(":"),p=n||"latest";if(t.includes("/")){const[C,b]=t.split("/",2);if(!C||!b)throw new Error(`Invalid identifier format: ${m}`);return[C,b,p]}else{if(!t)throw new Error(`Invalid identifier format: ${m}`);return["-",t,p]}}class LangSmithConflictError extends Error{constructor(t){super(t),this.name="LangSmithConflictError"}}async function raiseForStatus(m,t,n){let p;if(m.ok){n&&(p=await m.text());return}p=await m.text();const C=`Failed to ${t}. Received status [${m.status}]: ${m.statusText}. Server response: ${p}`;throw m.status===409?new LangSmithConflictError(C):new Error(C)}var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE={result:"[Circular]"},arr=[],replacerStack=[];const encoder=new TextEncoder;function defaultOptions$2(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function encodeString(m){return encoder.encode(m)}function serialize(m,t,n,p){var C;try{const b=JSON.stringify(m,t,n);return encodeString(b)}catch(b){if(!((C=b.message)!=null&&C.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),encodeString("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof p>"u"&&(p=defaultOptions$2()),decirc(m,"",0,[],void 0,0,p);let o;try{replacerStack.length===0?o=JSON.stringify(m,t,n):o=JSON.stringify(m,replaceGetterValues(t),n)}catch{return encodeString("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){const E=arr.pop();E.length===4?Object.defineProperty(E[0],E[1],E[3]):E[0][E[1]]=E[2]}}return encodeString(o)}}function setReplace(m,t,n,p){var C=Object.getOwnPropertyDescriptor(p,n);C.get!==void 0?C.configurable?(Object.defineProperty(p,n,{value:m}),arr.push([p,n,t,C])):replacerStack.push([t,n,m]):(p[n]=m,arr.push([p,n,t]))}function decirc(m,t,n,p,C,b,o){b+=1;var E;if(typeof m=="object"&&m!==null){for(E=0;E<p.length;E++)if(p[E]===m){setReplace(CIRCULAR_REPLACE_NODE,m,t,C);return}if(typeof o.depthLimit<"u"&&b>o.depthLimit){setReplace(LIMIT_REPLACE_NODE,m,t,C);return}if(typeof o.edgesLimit<"u"&&n+1>o.edgesLimit){setReplace(LIMIT_REPLACE_NODE,m,t,C);return}if(p.push(m),Array.isArray(m))for(E=0;E<m.length;E++)decirc(m[E],E,E,p,m,b,o);else{var e=Object.keys(m);for(E=0;E<e.length;E++){var a=e[E];decirc(m[a],a,E,p,m,b,o)}}p.pop()}}function replaceGetterValues(m){return m=typeof m<"u"?m:function(t,n){return n},function(t,n){if(replacerStack.length>0)for(var p=0;p<replacerStack.length;p++){var C=replacerStack[p];if(C[1]===t&&C[0]===n){n=C[2],replacerStack.splice(p,1);break}}return m.call(this,t,n)}}function mergeRuntimeEnvIntoRunCreate(m){const t=getRuntimeEnvironment(),n=getLangChainEnvVarsMetadata(),p=m.extra??{},C=p.metadata;return m.extra={...p,runtime:{...t,...p==null?void 0:p.runtime},metadata:{...n,...n.revision_id||m.revision_id?{revision_id:m.revision_id??n.revision_id}:{},...C}},m}const getTracingSamplingRate=m=>{const t=(m==null?void 0:m.toString())??getLangSmithEnvironmentVariable("TRACING_SAMPLING_RATE");if(t===void 0)return;const n=parseFloat(t);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},isLocalhost=m=>{const n=m.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function toArray(m){const t=[];for await(const n of m)t.push(n);return t}function trimQuotes(m){if(m!==void 0)return m.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const handle429=async m=>{if((m==null?void 0:m.status)===429){const t=parseInt(m.headers.get("retry-after")??"30",10)*1e3;if(t>0)return await new Promise(n=>setTimeout(n,t)),!0}return!1};function _formatFeedbackScore(m){return typeof m=="number"?Number(m.toFixed(4)):m}class AutoBatchQueue{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(t){let n;const p=new Promise(b=>{n=b}),C=serialize(t.item).length;return this.items.push({action:t.action,payload:t.item,itemPromiseResolve:n,itemPromise:p,size:C}),this.sizeBytes+=C,p}pop(t){var C;if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let p=0;for(;p+(((C=this.peek())==null?void 0:C.size)??0)<t&&this.items.length>0;){const b=this.items.shift();b&&(n.push(b),p+=b.size,this.sizeBytes-=b.size)}if(n.length===0&&this.items.length>0){const b=this.items.shift();n.push(b),p+=b.size,this.sizeBytes-=b.size}return[n.map(b=>({action:b.action,item:b.payload})),()=>n.forEach(b=>b.itemPromiseResolve())]}}const DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520,SERVER_INFO_REQUEST_TIMEOUT=2500;class Client{constructor(t={}){var p;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new AutoBatchQueue}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const n=Client.getDefaultClientConfig();if(this.tracingSampleRate=getTracingSamplingRate(t.tracingSamplingRate),this.apiUrl=trimQuotes(t.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=trimQuotes(t.apiKey??n.apiKey),this.webUrl=trimQuotes(t.webUrl??n.webUrl),(p=this.webUrl)!=null&&p.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=t.timeout_ms??9e4,this.caller=new AsyncCaller$1(t.callerOptions??{}),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new AsyncCaller$1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...t.callerOptions??{},onFailedResponseHook:handle429}),this.hideInputs=t.hideInputs??t.anonymizer??n.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??n.hideOutputs,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const t=getLangSmithEnvironmentVariable("API_KEY"),n=getLangSmithEnvironmentVariable("ENDPOINT")??"https://api.smith.langchain.com",p=getLangSmithEnvironmentVariable("HIDE_INPUTS")==="true",C=getLangSmithEnvironmentVariable("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:t,webUrl:void 0,hideInputs:p,hideOutputs:C}}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const t={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),t}processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}prepareRunCreateOrUpdateInputs(t){const n={...t};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(t,n){const p=(n==null?void 0:n.toString())??"",C=`${this.apiUrl}${t}?${p}`,b=await this.caller.call(_getFetchImplementation(),C,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(b,`Failed to fetch ${t}`),b}async _get(t,n){return(await this._getResponse(t,n)).json()}async*_getPaginated(t,n=new URLSearchParams,p){let C=Number(n.get("offset"))||0;const b=Number(n.get("limit"))||100;for(;;){n.set("offset",String(C)),n.set("limit",String(b));const o=`${this.apiUrl}${t}?${n}`,E=await this.caller.call(_getFetchImplementation(),o,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(E,`Failed to fetch ${t}`);const e=p?p(await E.json()):await E.json();if(e.length===0||(yield e,e.length<b))break;C+=e.length}}async*_getCursorPaginatedList(t,n=null,p="POST",C="runs"){const b=n?{...n}:{};for(;;){const E=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${t}`,{method:p,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(b)})).json();if(!E||!E[C])break;yield E[C];const e=E.cursors;if(!e||!e.next)break;b.cursor=e.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,n=!1){if(this.tracingSampleRate===void 0)return t;if(n){const p=[];for(const C of t)this.filteredPostUuids.has(C.id)?this.filteredPostUuids.delete(C.id):p.push(C);return p}else{const p=[];for(const C of t){const b=C.trace_id??C.id;this.filteredPostUuids.has(b)||(C.id===b?this._shouldSample()?p.push(C):this.filteredPostUuids.add(b):p.push(C))}return p}}async _getBatchSizeLimitBytes(){var n;const t=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=t.batch_ingest_config)==null?void 0:n.size_limit_bytes)??DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(t){const n=[];for(;this.autoBatchQueue.items.length>0;){const[p,C]=this.autoBatchQueue.pop(t);if(!p.length){C();break}const b=this._processBatch(p,C).catch(console.error);n.push(b)}return Promise.all(n)}async _processBatch(t,n){var p;if(!t.length){n();return}try{const C={runCreates:t.filter(o=>o.action==="create").map(o=>o.item),runUpdates:t.filter(o=>o.action==="update").map(o=>o.item)},b=await this._ensureServerInfo();(p=b==null?void 0:b.batch_ingest_config)!=null&&p.use_multipart_endpoint?await this.multipartIngestRuns(C):await this.batchIngestRuns(C)}finally{n()}}async processRunOperation(t){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.action==="create"&&(t.item=mergeRuntimeEnvIntoRunCreate(t.item));const n=this.autoBatchQueue.push(t);if(this.manualFlushMode)return n;const p=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>p&&this.drainAutoBatchQueue(p),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(p)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const t=await _getFetchImplementation()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(SERVER_INFO_REQUEST_TIMEOUT),...this.fetchOptions});return await raiseForStatus(t,"get server info"),t.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const t=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(t)}async createRun(t){if(!this._filterForSampling([t]).length)return;const n={...this.headers,"Content-Type":"application/json"},p=t.project_name;delete t.project_name;const C=this.prepareRunCreateOrUpdateInputs({session_name:p,...t,start_time:t.start_time??Date.now()});if(this.autoBatchTracing&&C.trace_id!==void 0&&C.dotted_order!==void 0){this.processRunOperation({action:"create",item:C}).catch(console.error);return}const b=mergeRuntimeEnvIntoRunCreate(C),o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:serialize(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"create run",!0)}async batchIngestRuns({runCreates:t,runUpdates:n}){if(t===void 0&&n===void 0)return;let p=(t==null?void 0:t.map(E=>this.prepareRunCreateOrUpdateInputs(E)))??[],C=(n==null?void 0:n.map(E=>this.prepareRunCreateOrUpdateInputs(E)))??[];if(p.length>0&&C.length>0){const E=p.reduce((a,x)=>(x.id&&(a[x.id]=x),a),{}),e=[];for(const a of C)a.id!==void 0&&E[a.id]?E[a.id]={...E[a.id],...a}:e.push(a);p=Object.values(E),C=e}const b={post:p,patch:C};if(!b.post.length&&!b.patch.length)return;const o={post:[],patch:[]};for(const E of["post","patch"]){const e=E,a=b[e].reverse();let x=a.pop();for(;x!==void 0;)o[e].push(x),x=a.pop()}(o.post.length>0||o.patch.length>0)&&await this._postBatchIngestRuns(serialize(o))}async _postBatchIngestRuns(t){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},p=await this.batchIngestCaller.call(_getFetchImplementation(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:t,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"batch create run",!0)}async multipartIngestRuns({runCreates:t,runUpdates:n}){if(t===void 0&&n===void 0)return;const p={};let C=[];for(const x of t??[]){const c=this.prepareRunCreateOrUpdateInputs(x);c.id!==void 0&&c.attachments!==void 0&&(p[c.id]=c.attachments),delete c.attachments,C.push(c)}let b=[];for(const x of n??[])b.push(this.prepareRunCreateOrUpdateInputs(x));if(C.find(x=>x.trace_id===void 0||x.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(b.find(x=>x.trace_id===void 0||x.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(C.length>0&&b.length>0){const x=C.reduce((u,h)=>(h.id&&(u[h.id]=h),u),{}),c=[];for(const u of b)u.id!==void 0&&x[u.id]?x[u.id]={...x[u.id],...u}:c.push(u);C=Object.values(x),b=c}if(C.length===0&&b.length===0)return;const e=[],a=[];for(const[x,c]of[["post",C],["patch",b]])for(const u of c){const{inputs:h,outputs:s,events:l,attachments:v,...d}=u,g={inputs:h,outputs:s,events:l},y=serialize(d);a.push({name:`${x}.${d.id}`,payload:new Blob([y],{type:`application/json; length=${y.length}`})});for(const[S,T]of Object.entries(g)){if(T===void 0)continue;const w=serialize(T);a.push({name:`${x}.${d.id}.${S}`,payload:new Blob([w],{type:`application/json; length=${w.length}`})})}if(d.id!==void 0){const S=p[d.id];if(S){delete p[d.id];for(const[T,w]of Object.entries(S)){let P,A;if(Array.isArray(w)?[P,A]=w:(P=w.mimeType,A=w.data),T.includes(".")){console.warn(`Skipping attachment '${T}' for run ${d.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}a.push({name:`attachment.${d.id}.${T}`,payload:new Blob([A],{type:`${P}; length=${A.byteLength}`})})}}}e.push(`trace=${d.trace_id},id=${d.id}`)}await this._sendMultipartRequest(a,e.join("; "))}async _sendMultipartRequest(t,n){try{const p="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),C=[];for(const e of t)C.push(new Blob([`--${p}\r
`])),C.push(new Blob([`Content-Disposition: form-data; name="${e.name}"\r
`,`Content-Type: ${e.payload.type}\r
\r
`])),C.push(e.payload),C.push(new Blob([`\r
`]));C.push(new Blob([`--${p}--\r
`]));const o=await new Blob(C).arrayBuffer(),E=await this.batchIngestCaller.call(_getFetchImplementation(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${p}`},body:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(E,"ingest multipart runs",!0)}catch(p){console.warn(`${p.message.trim()}

Context: ${n}`)}}async updateRun(t,n){assertUuid(t),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const p={...n,id:t};if(!this._filterForSampling([p],!0).length)return;if(this.autoBatchTracing&&p.trace_id!==void 0&&p.dotted_order!==void 0){if(n.end_time!==void 0&&p.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:p}).catch(console.error);return}else this.processRunOperation({action:"update",item:p}).catch(console.error);return}const C={...this.headers,"Content-Type":"application/json"},b=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${t}`,{method:"PATCH",headers:C,body:serialize(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(b,"update run",!0)}async readRun(t,{loadChildRuns:n}={loadChildRuns:!1}){assertUuid(t);let p=await this._get(`/runs/${t}`);return n&&p.child_run_ids&&(p=await this._loadChildRuns(p)),p}async getRunUrl({runId:t,run:n,projectOpts:p}){if(n!==void 0){let C;n.session_id?C=n.session_id:p!=null&&p.projectName?C=(await this.readProject({projectName:p==null?void 0:p.projectName})).id:p!=null&&p.projectId?C=p==null?void 0:p.projectId:C=(await this.readProject({projectName:getLangSmithEnvironmentVariable("PROJECT")||"default"})).id;const b=await this._getTenantId();return`${this.getHostUrl()}/o/${b}/projects/p/${C}/r/${n.id}?poll=true`}else if(t!==void 0){const C=await this.readRun(t);if(!C.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${C.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(t){const n=await toArray(this.listRuns({id:t.child_run_ids})),p={},C={};n.sort((b,o)=>((b==null?void 0:b.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const b of n){if(b.parent_run_id===null||b.parent_run_id===void 0)throw new Error(`Child run ${b.id} has no parent`);b.parent_run_id in p||(p[b.parent_run_id]=[]),p[b.parent_run_id].push(b),C[b.id]=b}t.child_runs=p[t.id]||[];for(const b in p)b!==t.id&&(C[b].child_runs=p[b]);return t}async*listRuns(t){const{projectId:n,projectName:p,parentRunId:C,traceId:b,referenceExampleId:o,startTime:E,executionOrder:e,isRoot:a,runType:x,error:c,id:u,query:h,filter:s,traceFilter:l,treeFilter:v,limit:d,select:g}=t;let y=[];if(n&&(y=Array.isArray(n)?n:[n]),p){const P=Array.isArray(p)?p:[p],A=await Promise.all(P.map(R=>this.readProject({projectName:R}).then(I=>I.id)));y.push(...A)}const S=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],T={session:y.length?y:null,run_type:x,reference_example:o,query:h,filter:s,trace_filter:l,tree_filter:v,execution_order:e,parent_run:C,start_time:E?E.toISOString():null,error:c,id:u,limit:d,trace:b,select:g||S,is_root:a};let w=0;for await(const P of this._getCursorPaginatedList("/runs/query",T))if(d){if(w>=d)break;if(P.length+w>d){yield*P.slice(0,d-w);break}w+=P.length,yield*P}else yield*P}async getRunStats({id:t,trace:n,parentRun:p,runType:C,projectNames:b,projectIds:o,referenceExampleIds:E,startTime:e,endTime:a,error:x,query:c,filter:u,traceFilter:h,treeFilter:s,isRoot:l,dataSourceType:v}){let d=o||[];b&&(d=[...o||[],...await Promise.all(b.map(w=>this.readProject({projectName:w}).then(P=>P.id)))]);const y=Object.fromEntries(Object.entries({id:t,trace:n,parent_run:p,run_type:C,session:d,reference_example:E,start_time:e,end_time:a,error:x,query:c,filter:u,trace_filter:h,tree_filter:s,is_root:l,data_source_type:v}).filter(([w,P])=>P!==void 0));return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(t,{shareId:n}={}){const p={run_id:t,share_token:n||v4()};assertUuid(t);const b=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${t}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(b===null||!("share_token"in b))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${b.share_token}/r`}async unshareRun(t){assertUuid(t);const n=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"unshare run",!0)}async readRunSharedLink(t){assertUuid(t);const p=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/runs/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(p===null||!("share_token"in p)))return`${this.getHostUrl()}/public/${p.share_token}/r`}async listSharedRuns(t,{runIds:n}={}){const p=new URLSearchParams({share_token:t});if(n!==void 0)for(const o of n)p.append("id",o);return assertUuid(t),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${t}/runs${p}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(t,n){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:n})).id),assertUuid(t);const C=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return C.url=`${this.getHostUrl()}/public/${C.share_token}/d`,C}async shareDataset(t,n){if(!t&&!n)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:n})).id);const p={dataset_id:t};assertUuid(t);const b=await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${t}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return b.url=`${this.getHostUrl()}/public/${b.share_token}/d`,b}async unshareDataset(t){assertUuid(t);const n=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"unshare dataset",!0)}async readSharedDataset(t){return assertUuid(t),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${t}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(t,n){const p={};n!=null&&n.exampleIds&&(p.id=n.exampleIds);const C=new URLSearchParams;Object.entries(p).forEach(([E,e])=>{Array.isArray(e)?e.forEach(a=>C.append(E,a)):C.append(E,e)});const b=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/public/${t}/examples?${C.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await b.json();if(!b.ok)throw"detail"in o?new Error(`Failed to list shared examples.
Status: ${b.status}
Message: ${o.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${b.status} ${b.statusText}`);return o.map(E=>({...E,_hostUrl:this.getHostUrl()}))}async createProject({projectName:t,description:n=null,metadata:p=null,upsert:C=!1,projectExtra:b=null,referenceDatasetId:o=null}){const E=C?"?upsert=true":"",e=`${this.apiUrl}/sessions${E}`,a=b||{};p&&(a.metadata=p);const x={name:t,extra:a,description:n};o!==null&&(x.reference_dataset_id=o);const c=await this.caller.call(_getFetchImplementation(),e,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(x),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(c,"create project"),await c.json()}async updateProject(t,{name:n=null,description:p=null,metadata:C=null,projectExtra:b=null,endTime:o=null}){const E=`${this.apiUrl}/sessions/${t}`;let e=b;C&&(e={...e||{},metadata:C});const a={name:n,extra:e,description:p,end_time:o?new Date(o).toISOString():null},x=await this.caller.call(_getFetchImplementation(),E,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(x,"update project"),await x.json()}async hasProject({projectId:t,projectName:n}){let p="/sessions";const C=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)assertUuid(t),p+=`/${t}`;else if(n!==void 0)C.append("name",n);else throw new Error("Must provide projectName or projectId");const b=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${p}?${C}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const o=await b.json();return b.ok?Array.isArray(o)?o.length>0:!0:!1}catch{return!1}}async readProject({projectId:t,projectName:n,includeStats:p}){let C="/sessions";const b=new URLSearchParams;if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)assertUuid(t),C+=`/${t}`;else if(n!==void 0)b.append("name",n);else throw new Error("Must provide projectName or projectId");p!==void 0&&b.append("include_stats",p.toString());const o=await this._get(C,b);let E;if(Array.isArray(o)){if(o.length===0)throw new Error(`Project[id=${t}, name=${n}] not found`);E=o[0]}else E=o;return E}async getProjectUrl({projectId:t,projectName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const p=await this.readProject({projectId:t,projectName:n}),C=await this._getTenantId();return`${this.getHostUrl()}/o/${C}/projects/p/${p.id}`}async getDatasetUrl({datasetId:t,datasetName:n}){if(t===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const p=await this.readDataset({datasetId:t,datasetName:n}),C=await this._getTenantId();return`${this.getHostUrl()}/o/${C}/datasets/${p.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const t=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",t))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:t,name:n,nameContains:p,referenceDatasetId:C,referenceDatasetName:b,referenceFree:o,metadata:E}={}){const e=new URLSearchParams;if(t!==void 0)for(const a of t)e.append("id",a);if(n!==void 0&&e.append("name",n),p!==void 0&&e.append("name_contains",p),C!==void 0)e.append("reference_dataset",C);else if(b!==void 0){const a=await this.readDataset({datasetName:b});e.append("reference_dataset",a.id)}o!==void 0&&e.append("reference_free",o.toString()),E!==void 0&&e.append("metadata",JSON.stringify(E));for await(const a of this._getPaginated("/sessions",e))yield*a}async deleteProject({projectId:t,projectName:n}){let p;if(t===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?p=(await this.readProject({projectName:n})).id:p=t,assertUuid(p);const C=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/sessions/${p}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(C,`delete session ${p} (${n})`,!0)}async uploadCsv({csvFile:t,fileName:n,inputKeys:p,outputKeys:C,description:b,dataType:o,name:E}){const e=`${this.apiUrl}/datasets/upload`,a=new FormData;a.append("file",t,n),p.forEach(u=>{a.append("input_keys",u)}),C.forEach(u=>{a.append("output_keys",u)}),b&&a.append("description",b),o&&a.append("data_type",o),E&&a.append("name",E);const x=await this.caller.call(_getFetchImplementation(),e,{method:"POST",headers:this.headers,body:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(x,"upload CSV"),await x.json()}async createDataset(t,{description:n,dataType:p,inputsSchema:C,outputsSchema:b,metadata:o}={}){const E={name:t,description:n,extra:o?{metadata:o}:void 0};p&&(E.data_type=p),C&&(E.inputs_schema_definition=C),b&&(E.outputs_schema_definition=b);const e=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(e,"create dataset"),await e.json()}async readDataset({datasetId:t,datasetName:n}){let p="/datasets";const C=new URLSearchParams({limit:"1"});if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)assertUuid(t),p+=`/${t}`;else if(n!==void 0)C.append("name",n);else throw new Error("Must provide datasetName or datasetId");const b=await this._get(p,C);let o;if(Array.isArray(b)){if(b.length===0)throw new Error(`Dataset[id=${t}, name=${n}] not found`);o=b[0]}else o=b;return o}async hasDataset({datasetId:t,datasetName:n}){try{return await this.readDataset({datasetId:t,datasetName:n}),!0}catch(p){if(p instanceof Error&&p.message.toLocaleLowerCase().includes("not found"))return!1;throw p}}async diffDatasetVersions({datasetId:t,datasetName:n,fromVersion:p,toVersion:C}){let b=t;if(b===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(b!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");b===void 0&&(b=(await this.readDataset({datasetName:n})).id);const o=new URLSearchParams({from_version:typeof p=="string"?p:p.toISOString(),to_version:typeof C=="string"?C:C.toISOString()});return await this._get(`/datasets/${b}/versions/diff`,o)}async readDatasetOpenaiFinetuning({datasetId:t,datasetName:n}){const p="/datasets";if(t===void 0)if(n!==void 0)t=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${p}/${t}/openai_ft`)).text()).trim().split(`
`).map(E=>JSON.parse(E))}async*listDatasets({limit:t=100,offset:n=0,datasetIds:p,datasetName:C,datasetNameContains:b,metadata:o}={}){const E="/datasets",e=new URLSearchParams({limit:t.toString(),offset:n.toString()});if(p!==void 0)for(const a of p)e.append("id",a);C!==void 0&&e.append("name",C),b!==void 0&&e.append("name_contains",b),o!==void 0&&e.append("metadata",JSON.stringify(o));for await(const a of this._getPaginated(E,e))yield*a}async updateDataset(t){const{datasetId:n,datasetName:p,...C}=t;if(!n&&!p)throw new Error("Must provide either datasetName or datasetId");const b=n??(await this.readDataset({datasetName:p})).id;assertUuid(b);const o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${b}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(C),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"update dataset"),await o.json()}async updateDatasetTag(t){const{datasetId:n,datasetName:p,asOf:C,tag:b}=t;if(!n&&!p)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:p})).id;assertUuid(o);const E=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${o}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof C=="string"?C:C.toISOString(),tag:b}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(E,"update dataset tags")}async deleteDataset({datasetId:t,datasetName:n}){let p="/datasets",C=t;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(C=(await this.readDataset({datasetName:n})).id),C!==void 0)assertUuid(C),p+=`/${C}`;else throw new Error("Must provide datasetName or datasetId");const b=await this.caller.call(_getFetchImplementation(),this.apiUrl+p,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(b,`delete ${p}`),await b.json()}async indexDataset({datasetId:t,datasetName:n,tag:p}){let C=t;if(!C&&!n)throw new Error("Must provide either datasetName or datasetId");if(C&&n)throw new Error("Must provide either datasetName or datasetId, not both");C||(C=(await this.readDataset({datasetName:n})).id),assertUuid(C);const b={tag:p},o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${C}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"index dataset"),await o.json()}async similarExamples(t,n,p,{filter:C}={}){const b={limit:p,inputs:t};C!==void 0&&(b.filter=C),assertUuid(n);const o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"fetch similar examples"),(await o.json()).examples}async createExample(t,n,p){var x;if(isExampleCreate(t)&&(n!==void 0||p!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let C=n?p==null?void 0:p.datasetId:t.dataset_id;const b=n?p==null?void 0:p.datasetName:t.dataset_name;if(C===void 0&&b===void 0)throw new Error("Must provide either datasetName or datasetId");if(C!==void 0&&b!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");C===void 0&&(C=(await this.readDataset({datasetName:b})).id);const o=(n?p==null?void 0:p.createdAt:t.created_at)||new Date;let E;isExampleCreate(t)?E=t:E={inputs:t,outputs:n,created_at:o==null?void 0:o.toISOString(),id:p==null?void 0:p.exampleId,metadata:p==null?void 0:p.metadata,split:p==null?void 0:p.split,source_run_id:p==null?void 0:p.sourceRunId,use_source_run_io:p==null?void 0:p.useSourceRunIO,use_source_run_attachments:p==null?void 0:p.useSourceRunAttachments,attachments:p==null?void 0:p.attachments};const e=await this._uploadExamplesMultipart(C,[E]);return await this.readExample(((x=e.example_ids)==null?void 0:x[0])??v4())}async createExamples(t){if(Array.isArray(t)){if(t.length===0)return[];const g=t;let y=g[0].dataset_id;const S=g[0].dataset_name;if(y===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(y!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");y===void 0&&(y=(await this.readDataset({datasetName:S})).id);const T=await this._uploadExamplesMultipart(y,g);return await Promise.all(T.example_ids.map(P=>this.readExample(P)))}const{inputs:n,outputs:p,metadata:C,splits:b,sourceRunIds:o,useSourceRunIOs:E,useSourceRunAttachments:e,attachments:a,exampleIds:x,datasetId:c,datasetName:u}=t;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=c;const s=u;if(h===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:s})).id);const l=n.map((g,y)=>({dataset_id:h,inputs:g,outputs:p==null?void 0:p[y],metadata:C==null?void 0:C[y],split:b==null?void 0:b[y],id:x==null?void 0:x[y],attachments:a==null?void 0:a[y],source_run_id:o==null?void 0:o[y],use_source_run_io:E==null?void 0:E[y],use_source_run_attachments:e==null?void 0:e[y]})),v=await this._uploadExamplesMultipart(h,l);return await Promise.all(v.example_ids.map(g=>this.readExample(g)))}async createLLMExample(t,n,p){return this.createExample({input:t},{output:n},p)}async createChatExample(t,n,p){const C=t.map(o=>isLangChainMessage(o)?convertLangChainMessageToExample(o):o),b=isLangChainMessage(n)?convertLangChainMessageToExample(n):n;return this.createExample({input:C},{output:b},p)}async readExample(t){assertUuid(t);const n=`/examples/${t}`,p=await this._get(n),{attachment_urls:C,...b}=p,o=b;return C&&(o.attachments=Object.entries(C).reduce((E,[e,a])=>(E[e.slice(11)]={presigned_url:a.presigned_url,mime_type:a.mime_type},E),{})),o}async*listExamples({datasetId:t,datasetName:n,exampleIds:p,asOf:C,splits:b,inlineS3Urls:o,metadata:E,limit:e,offset:a,filter:x,includeAttachments:c}={}){let u;if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)u=t;else if(n!==void 0)u=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const h=new URLSearchParams({dataset:u}),s=C?typeof C=="string"?C:C==null?void 0:C.toISOString():void 0;s&&h.append("as_of",s);const l=o??!0;if(h.append("inline_s3_urls",l.toString()),p!==void 0)for(const d of p)h.append("id",d);if(b!==void 0)for(const d of b)h.append("splits",d);if(E!==void 0){const d=JSON.stringify(E);h.append("metadata",d)}e!==void 0&&h.append("limit",e.toString()),a!==void 0&&h.append("offset",a.toString()),x!==void 0&&h.append("filter",x),c===!0&&["attachment_urls","outputs","metadata"].forEach(d=>h.append("select",d));let v=0;for await(const d of this._getPaginated("/examples",h)){for(const g of d){const{attachment_urls:y,...S}=g,T=S;y&&(T.attachments=Object.entries(y).reduce((w,[P,A])=>(w[P.slice(11)]={presigned_url:A.presigned_url,mime_type:A.mime_type||void 0},w),{})),yield T,v++}if(e!==void 0&&v>=e)break}}async deleteExample(t){assertUuid(t);const n=`/examples/${t}`,p=await this.caller.call(_getFetchImplementation(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,`delete ${n}`),await p.json()}async updateExample(t,n){let p;n?p=t:p=t.id,assertUuid(p);let C;n?C={id:p,...n}:C=t;let b;return C.dataset_id!==void 0?b=C.dataset_id:b=(await this.readExample(p)).dataset_id,this._updateExamplesMultipart(b,[C])}async updateExamples(t){let n;return t[0].dataset_id===void 0?n=(await this.readExample(t[0].id)).dataset_id:n=t[0].dataset_id,this._updateExamplesMultipart(n,t)}async readDatasetVersion({datasetId:t,datasetName:n,asOf:p,tag:C}){let b;if(t?b=t:b=(await this.readDataset({datasetName:n})).id,assertUuid(b),p&&C||!p&&!C)throw new Error("Exactly one of asOf and tag must be specified.");const o=new URLSearchParams;p!==void 0&&o.append("as_of",typeof p=="string"?p:p.toISOString()),C!==void 0&&o.append("tag",C);const E=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${b}/version?${o.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(E,"read dataset version"),await E.json()}async listDatasetSplits({datasetId:t,datasetName:n,asOf:p}){let C;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?C=(await this.readDataset({datasetName:n})).id:C=t,assertUuid(C);const b=new URLSearchParams,o=p?typeof p=="string"?p:p==null?void 0:p.toISOString():void 0;return o&&b.append("as_of",o),await this._get(`/datasets/${C}/splits`,b)}async updateDatasetSplits({datasetId:t,datasetName:n,splitName:p,exampleIds:C,remove:b=!1}){let o;if(t===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?o=(await this.readDataset({datasetName:n})).id:o=t,assertUuid(o);const E={split_name:p,examples:C.map(a=>(assertUuid(a),a)),remove:b},e=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/${o}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(e,"update dataset splits",!0)}async evaluateRun(t,n,{sourceInfo:p,loadChildRuns:C,referenceExample:b}={loadChildRuns:!1}){warnOnce("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let o;if(typeof t=="string")o=await this.readRun(t,{loadChildRuns:C});else if(typeof t=="object"&&"id"in t)o=t;else throw new Error(`Invalid run type: ${typeof t}`);o.reference_example_id!==null&&o.reference_example_id!==void 0&&(b=await this.readExample(o.reference_example_id));const E=await n.evaluateRun(o,b),[e,a]=await this._logEvaluationFeedback(E,o,p);return a[0]}async createFeedback(t,n,{score:p,value:C,correction:b,comment:o,sourceInfo:E,feedbackSourceType:e="api",sourceRunId:a,feedbackId:x,feedbackConfig:c,projectId:u,comparativeExperimentId:h}){var g;if(!t&&!u)throw new Error("One of runId or projectId must be provided");if(t&&u)throw new Error("Only one of runId or projectId can be provided");const s={type:e??"api",metadata:E??{}};a!==void 0&&(s==null?void 0:s.metadata)!==void 0&&!s.metadata.__run&&(s.metadata.__run={run_id:a}),(s==null?void 0:s.metadata)!==void 0&&((g=s.metadata.__run)==null?void 0:g.run_id)!==void 0&&assertUuid(s.metadata.__run.run_id);const l={id:x??v4(),run_id:t,key:n,score:_formatFeedbackScore(p),value:C,correction:b,comment:o,feedback_source:s,comparative_experiment_id:h,feedbackConfig:c,session_id:u},v=`${this.apiUrl}/feedback`,d=await this.caller.call(_getFetchImplementation(),v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(d,"create feedback",!0),l}async updateFeedback(t,{score:n,value:p,correction:C,comment:b}){const o={};n!=null&&(o.score=_formatFeedbackScore(n)),p!=null&&(o.value=p),C!=null&&(o.correction=C),b!=null&&(o.comment=b),assertUuid(t);const E=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/feedback/${t}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(E,"update feedback",!0)}async readFeedback(t){assertUuid(t);const n=`/feedback/${t}`;return await this._get(n)}async deleteFeedback(t){assertUuid(t);const n=`/feedback/${t}`,p=await this.caller.call(_getFetchImplementation(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,`delete ${n}`),await p.json()}async*listFeedback({runIds:t,feedbackKeys:n,feedbackSourceTypes:p}={}){const C=new URLSearchParams;if(t&&C.append("run",t.join(",")),n)for(const b of n)C.append("key",b);if(p)for(const b of p)C.append("source",b);for await(const b of this._getPaginated("/feedback",C))yield*b}async createPresignedFeedbackToken(t,n,{expiration:p,feedbackConfig:C}={}){const b={run_id:t,feedback_key:n,feedback_config:C};return p?typeof p=="string"?b.expires_at=p:(p!=null&&p.hours||p!=null&&p.minutes||p!=null&&p.days)&&(b.expires_in=p):b.expires_in={hours:3},await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:t,experimentIds:n,referenceDatasetId:p,createdAt:C,description:b,metadata:o,id:E}){var x;if(n.length===0)throw new Error("At least one experiment is required");if(p||(p=(await this.readProject({projectId:n[0]})).reference_dataset_id),!p==null)throw new Error("A reference dataset is required");const e={id:E,name:t,experiment_ids:n,reference_dataset_id:p,description:b,created_at:(x=C??new Date)==null?void 0:x.toISOString(),extra:{}};return o&&(e.extra.metadata=o),await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(t){assertUuid(t);const n=new URLSearchParams({run_id:t});for await(const p of this._getPaginated("/feedback/tokens",n))yield*p}_selectEvalResults(t){let n;return"results"in t?n=t.results:Array.isArray(t)?n=t:n=[t],n}async _logEvaluationFeedback(t,n,p){const C=this._selectEvalResults(t),b=[];for(const o of C){let E=p||{};o.evaluatorInfo&&(E={...o.evaluatorInfo,...E});let e=null;o.targetRunId?e=o.targetRunId:n&&(e=n.id),b.push(await this.createFeedback(e,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:E,sourceRunId:o.sourceRunId,feedbackConfig:o.feedbackConfig,feedbackSourceType:"model"}))}return[C,b]}async logEvaluationFeedback(t,n,p){const[C]=await this._logEvaluationFeedback(t,n,p);return C}async*listAnnotationQueues(t={}){const{queueIds:n,name:p,nameContains:C,limit:b}=t,o=new URLSearchParams;n&&n.forEach((e,a)=>{assertUuid(e,`queueIds[${a}]`),o.append("ids",e)}),p&&o.append("name",p),C&&o.append("name_contains",C),o.append("limit",(b!==void 0?Math.min(b,100):100).toString());let E=0;for await(const e of this._getPaginated("/annotation-queues",o))if(yield*e,E++,b!==void 0&&E>=b)break}async createAnnotationQueue(t){const{name:n,description:p,queueId:C}=t,b={name:n,description:p,id:C||v4()},o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(b).filter(([e,a])=>a!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"create annotation queue"),await o.json()}async readAnnotationQueue(t){const n=await this.listAnnotationQueues({queueIds:[t]}).next();if(n.done)throw new Error(`Annotation queue with ID ${t} not found`);return n.value}async updateAnnotationQueue(t,n){const{name:p,description:C}=n,b=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(t,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:p,description:C}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(b,"update annotation queue")}async deleteAnnotationQueue(t){const n=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(t,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"delete annotation queue")}async addRunsToAnnotationQueue(t,n){const p=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(t,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((C,b)=>assertUuid(C,`runIds[${b}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"add runs to annotation queue")}async getRunFromAnnotationQueue(t,n){const p=`/annotation-queues/${assertUuid(t,"queueId")}/run`,C=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}${p}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(C,"get run from annotation queue"),await C.json()}async deleteRunFromAnnotationQueue(t,n){const p=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(t,"queueId")}/runs/${assertUuid(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"delete run from annotation queue")}async getSizeFromAnnotationQueue(t){const n=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/annotation-queues/${assertUuid(t,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(n,"get size from annotation queue"),await n.json()}async _currentTenantIsOwner(t){const n=await this._getSettings();return t=="-"||n.tenant_handle===t}async _ownerConflictError(t,n){const p=await this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${p.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(t){const n=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),p=await n.json();if(!n.ok){const C=typeof p.detail=="string"?p.detail:JSON.stringify(p.detail),b=new Error(`Error ${n.status}: ${n.statusText}
${C}`);throw b.statusCode=n.status,b}if(p.commits.length!==0)return p.commits[0].commit_hash}async _likeOrUnlikePrompt(t,n){const[p,C,b]=parsePromptIdentifier(t),o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/likes/${p}/${C}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,`${n?"like":"unlike"} prompt`),await o.json()}async _getPromptUrl(t){const[n,p,C]=parsePromptIdentifier(t);if(await this._currentTenantIsOwner(n)){const b=await this._getSettings();return C!=="latest"?`${this.getHostUrl()}/prompts/${p}/${C.substring(0,8)}?organizationId=${b.id}`:`${this.getHostUrl()}/prompts/${p}?organizationId=${b.id}`}else return C!=="latest"?`${this.getHostUrl()}/hub/${n}/${p}/${C.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${p}`}async promptExists(t){return!!await this.getPrompt(t)}async likePrompt(t){return this._likeOrUnlikePrompt(t,!0)}async unlikePrompt(t){return this._likeOrUnlikePrompt(t,!1)}async*listCommits(t){for await(const n of this._getPaginated(`/commits/${t}/`,new URLSearchParams,p=>p.commits))yield*n}async*listPrompts(t){const n=new URLSearchParams;n.append("sort_field",(t==null?void 0:t.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(t!=null&&t.isArchived)).toString()),(t==null?void 0:t.isPublic)!==void 0&&n.append("is_public",t.isPublic.toString()),t!=null&&t.query&&n.append("query",t.query);for await(const p of this._getPaginated("/repos",n,C=>C.repos))yield*p}async getPrompt(t){const[n,p,C]=parsePromptIdentifier(t),b=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${n}/${p}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(b.status===404)return null;await raiseForStatus(b,"get prompt");const o=await b.json();return o.repo?o.repo:null}async createPrompt(t,n){const p=await this._getSettings();if(n!=null&&n.isPublic&&!p.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[C,b,o]=parsePromptIdentifier(t);if(!await this._currentTenantIsOwner(C))throw await this._ownerConflictError("create a prompt",C);const E={repo_handle:b,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},e=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(E),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(e,"create prompt");const{repo:a}=await e.json();return a}async createCommit(t,n,p){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[C,b,o]=parsePromptIdentifier(t),E=(p==null?void 0:p.parentCommitHash)==="latest"||!(p!=null&&p.parentCommitHash)?await this._getLatestCommitHash(`${C}/${b}`):p==null?void 0:p.parentCommitHash,e={manifest:JSON.parse(JSON.stringify(n)),parent_commit:E},a=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${C}/${b}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"create commit");const x=await a.json();return this._getPromptUrl(`${C}/${b}${x.commit_hash?`:${x.commit_hash}`:""}`)}async updateExamplesMultipart(t,n=[]){return this._updateExamplesMultipart(t,n)}async _updateExamplesMultipart(t,n=[]){var E;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const p=new FormData;for(const e of n){const a=e.id,x={...e.metadata&&{metadata:e.metadata},...e.split&&{split:e.split}},c=serialize(x),u=new Blob([c],{type:"application/json"});if(p.append(a,u),e.inputs){const h=serialize(e.inputs),s=new Blob([h],{type:"application/json"});p.append(`${a}.inputs`,s)}if(e.outputs){const h=serialize(e.outputs),s=new Blob([h],{type:"application/json"});p.append(`${a}.outputs`,s)}if(e.attachments)for(const[h,s]of Object.entries(e.attachments)){let l,v;Array.isArray(s)?[l,v]=s:(l=s.mimeType,v=s.data);const d=new Blob([v],{type:`${l}; length=${v.byteLength}`});p.append(`${a}.attachment.${h}`,d)}if(e.attachments_operations){const h=serialize(e.attachments_operations),s=new Blob([h],{type:"application/json"});p.append(`${a}.attachments_operations`,s)}}const C=t??((E=n[0])==null?void 0:E.dataset_id);return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/v1/platform/datasets/${C}/examples`,{method:"PATCH",headers:this.headers,body:p})).json()}async uploadExamplesMultipart(t,n=[]){return this._uploadExamplesMultipart(t,n)}async _uploadExamplesMultipart(t,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const p=new FormData;for(const o of n){const E=(o.id??v4()).toString(),e={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},a=serialize(e),x=new Blob([a],{type:"application/json"});if(p.append(E,x),o.inputs){const c=serialize(o.inputs),u=new Blob([c],{type:"application/json"});p.append(`${E}.inputs`,u)}if(o.outputs){const c=serialize(o.outputs),u=new Blob([c],{type:"application/json"});p.append(`${E}.outputs`,u)}if(o.attachments)for(const[c,u]of Object.entries(o.attachments)){let h,s;Array.isArray(u)?[h,s]=u:(h=u.mimeType,s=u.data);const l=new Blob([s],{type:`${h}; length=${s.byteLength}`});p.append(`${E}.attachment.${c}`,l)}}return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/v1/platform/datasets/${t}/examples`,{method:"POST",headers:this.headers,body:p})).json()}async updatePrompt(t,n){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[p,C]=parsePromptIdentifier(t);if(!await this._currentTenantIsOwner(p))throw await this._ownerConflictError("update a prompt",p);const b={};if((n==null?void 0:n.description)!==void 0&&(b.description=n.description),(n==null?void 0:n.readme)!==void 0&&(b.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(b.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(b.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(b.is_archived=n.isArchived),Object.keys(b).length===0)throw new Error("No valid update options provided");const o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${p}/${C}`,{method:"PATCH",body:JSON.stringify(b),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,"update prompt"),o.json()}async deletePrompt(t){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[n,p,C]=parsePromptIdentifier(t);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/repos/${n}/${p}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(t,n){const[p,C,b]=parsePromptIdentifier(t),o=await this.caller.call(_getFetchImplementation(),`${this.apiUrl}/commits/${p}/${C}/${b}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"pull prompt commit");const E=await o.json();return{owner:p,repo:C,commit_hash:E.commit_hash,manifest:E.manifest,examples:E.examples}}async _pullPrompt(t,n){const p=await this.pullPromptCommit(t,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(p.manifest)}async pushPrompt(t,n){return await this.promptExists(t)?n&&Object.keys(n).some(C=>C!=="object")&&await this.updatePrompt(t,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(t,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(t,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(t)}async clonePublicDataset(t,n={}){const{sourceApiUrl:p=this.apiUrl,datasetName:C}=n,[b,o]=this.parseTokenOrUrl(t,p),E=new Client({apiUrl:b,apiKey:"placeholder"}),e=await E.readSharedDataset(o),a=C||e.name;try{if(await this.hasDataset({datasetId:a})){console.log(`Dataset ${a} already exists in your tenant. Skipping.`);return}}catch{}const x=await E.listSharedExamples(o),c=await this.createDataset(a,{description:e.description,dataType:e.data_type||"kv",inputsSchema:e.inputs_schema_definition??void 0,outputsSchema:e.outputs_schema_definition??void 0});try{await this.createExamples({inputs:x.map(u=>u.inputs),outputs:x.flatMap(u=>u.outputs?[u.outputs]:[]),datasetId:c.id})}catch(u){throw console.error(`An error occurred while creating dataset ${a}. You should delete it manually.`),u}}parseTokenOrUrl(t,n,p=2,C="dataset"){try{return assertUuid(t),[n,t]}catch{}try{const o=new URL(t).pathname.split("/").filter(E=>E!=="");if(o.length>=p){const E=o[o.length-p];return[n,E]}else throw new Error(`Invalid public ${C} URL: ${t}`)}catch{throw new Error(`Invalid public ${C} URL or token: ${t}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:t})=>t),this.batchIngestCaller.queue.onIdle()])}}function isExampleCreate(m){return"dataset_id"in m||"dataset_name"in m}const __version__="0.3.14";var define_process_env_default$1={};let globalEnv;const isBrowser=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno=()=>typeof Deno<"u",isNode=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno(),getEnv=()=>globalEnv||(isBrowser()?globalEnv="browser":isNode()?globalEnv="node":isWebWorker()?globalEnv="webworker":isJsDom()?globalEnv="jsdom":isDeno()?globalEnv="deno":globalEnv="other",globalEnv);let runtimeEnvironment;function getRuntimeEnvironment(){if(runtimeEnvironment===void 0){const m=getEnv(),t=getShas();runtimeEnvironment={library:"langsmith",runtime:m,sdk:"langsmith-js",sdk_version:__version__,...t}}return runtimeEnvironment}function getLangChainEnvVarsMetadata(){const m=getEnvironmentVariables()||{},t={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[p,C]of Object.entries(m))(p.startsWith("LANGCHAIN_")||p.startsWith("LANGSMITH_"))&&typeof C=="string"&&!n.includes(p)&&!p.toLowerCase().includes("key")&&!p.toLowerCase().includes("secret")&&!p.toLowerCase().includes("token")&&(p==="LANGCHAIN_REVISION_ID"?t.revision_id=C:t[p]=C);return t}function getEnvironmentVariables(){try{return typeof process<"u"&&define_process_env_default$1?Object.entries(define_process_env_default$1).reduce((m,[t,n])=>(m[t]=String(n),m),{}):void 0}catch{return}}function getEnvironmentVariable(m){try{return typeof process<"u"?define_process_env_default$1==null?void 0:define_process_env_default$1[m]:void 0}catch{return}}function getLangSmithEnvironmentVariable(m){return getEnvironmentVariable(`LANGSMITH_${m}`)||getEnvironmentVariable(`LANGCHAIN_${m}`)}let cachedCommitSHAs;function getShas(){if(cachedCommitSHAs!==void 0)return cachedCommitSHAs;const m=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const n of m){const p=getEnvironmentVariable(n);p!==void 0&&(t[n]=p)}return cachedCommitSHAs=t,t}const isTracingEnabled$1=m=>!!["TRACING_V2","TRACING"].find(n=>getLangSmithEnvironmentVariable(n)==="true"),_LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables");function stripNonAlphanumeric(m){return m.replace(/[-:.]/g,"")}function convertToDottedOrderFormat(m,t,n=1){const p=n.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric(`${new Date(m).toISOString().slice(0,-1)}${p}Z`)+t}class Baggage{constructor(t,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=n}static fromHeader(t){const n=t.split(",");let p={},C=[];for(const b of n){const[o,E]=b.split("="),e=decodeURIComponent(E);o==="langsmith-metadata"?p=JSON.parse(e):o==="langsmith-tags"&&(C=e.split(","))}return new Baggage(p,C)}toHeader(){const t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),t.join(",")}}class RunTree{constructor(t){var E;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),isRunTree(t)){Object.assign(this,{...t});return}const n=RunTree.getDefaultConfig(),{metadata:p,...C}=t,b=C.client??RunTree.getSharedClient(),o={...p,...(E=C==null?void 0:C.extra)==null?void 0:E.metadata};if(C.extra={...C.extra,metadata:o},Object.assign(this,{...n,...C,client:b}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const e=convertToDottedOrderFormat(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:v4(),run_type:"chain",project_name:getLangSmithEnvironmentVariable("PROJECT")??getEnvironmentVariable("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:getEnvironmentVariable("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:getEnvironmentVariable("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return RunTree.sharedClient||(RunTree.sharedClient=new Client),RunTree.sharedClient}createChild(t){var e,a,x,c,u,h;const n=this.child_execution_order+1,p=new RunTree({...t,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});_LC_CONTEXT_VARIABLES_KEY in this&&(p[_LC_CONTEXT_VARIABLES_KEY]=this[_LC_CONTEXT_VARIABLES_KEY]);const C=Symbol.for("lc:child_config"),b=((e=t.extra)==null?void 0:e[C])??this.extra[C];if(isRunnableConfigLike(b)){const s={...b},l=isCallbackManagerLike(s.callbacks)?(x=(a=s.callbacks).copy)==null?void 0:x.call(a):void 0;l&&(Object.assign(l,{_parentRunId:p.id}),(h=(u=(c=l.handlers)==null?void 0:c.find(isLangChainTracerLike))==null?void 0:u.updateFromRunTree)==null||h.call(u,p),s.callbacks=l),p.extra[C]=s}const o=new Set;let E=this;for(;E!=null&&!o.has(E.id);)o.add(E.id),E.child_execution_order=Math.max(E.child_execution_order,n),E=E.parent_run;return this.child_runs.push(p),p}async end(t,n,p=Date.now(),C){this.outputs=this.outputs??t,this.error=this.error??n,this.end_time=this.end_time??p,C&&Object.keys(C).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...C}}:{metadata:C})}_convertToCreate(t,n,p=!0){var e;const C=t.extra??{};if(C.runtime||(C.runtime={}),n)for(const[a,x]of Object.entries(n))C.runtime[a]||(C.runtime[a]=x);let b,o;return p?(o=(e=t.parent_run)==null?void 0:e.id,b=[]):(b=t.child_runs.map(a=>this._convertToCreate(a,n,p)),o=void 0),{id:t.id,name:t.name,start_time:t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:C,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:b,parent_run_id:o,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments}}async postRun(t=!0){try{const n=getRuntimeEnvironment(),p=await this._convertToCreate(this,n,!0);if(await this.client.createRun(p),!t){warnOnce("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const C of this.child_runs)await C.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var t;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(t=this.parent_run)==null?void 0:t.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push({...t,time:t.time??new Date().toISOString()})}static fromRunnableConfig(t,n){var a,x,c,u;const p=t==null?void 0:t.callbacks;let C,b,o,E=isTracingEnabled$1();if(p){const h=((a=p==null?void 0:p.getParentRunId)==null?void 0:a.call(p))??"",s=(x=p==null?void 0:p.handlers)==null?void 0:x.find(l=>(l==null?void 0:l.name)=="langchain_tracer");C=(c=s==null?void 0:s.getRun)==null?void 0:c.call(s,h),b=s==null?void 0:s.projectName,o=s==null?void 0:s.client,E=E||!!s}return C?new RunTree({name:C.name,id:C.id,trace_id:C.trace_id,dotted_order:C.dotted_order,client:o,tracingEnabled:E,project_name:b,tags:[...new Set(((C==null?void 0:C.tags)??[]).concat((t==null?void 0:t.tags)??[]))],extra:{metadata:{...(u=C==null?void 0:C.extra)==null?void 0:u.metadata,...t==null?void 0:t.metadata}}}).createChild(n):new RunTree({...n,client:o,tracingEnabled:E,project_name:b})}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,n){var a;const p="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,C=p["langsmith-trace"];if(!C||typeof C!="string")return;const b=C.trim(),o=b.split(".").map(x=>{const[c,u]=x.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:u}}),E=o[0].uuid,e={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(a=o.at(-1))==null?void 0:a.uuid,trace_id:E,dotted_order:b};if(p.baggage&&typeof p.baggage=="string"){const x=Baggage.fromHeader(p.baggage);e.metadata=x.metadata,e.tags=x.tags}return new RunTree(e)}toHeaders(t){var p;const n={"langsmith-trace":this.dotted_order,baggage:new Baggage((p=this.extra)==null?void 0:p.metadata,this.tags).toHeader()};if(t)for(const[C,b]of Object.entries(n))t.set(C,b);return n}}Object.defineProperty(RunTree,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function isRunTree(m){return m!==void 0&&typeof m.createChild=="function"&&typeof m.postRun=="function"}function isLangChainTracerLike(m){return typeof m=="object"&&m!=null&&typeof m.name=="string"&&m.name==="langchain_tracer"}function containsLangChainTracerLike(m){return Array.isArray(m)&&m.some(t=>isLangChainTracerLike(t))}function isCallbackManagerLike(m){return typeof m=="object"&&m!=null&&Array.isArray(m.handlers)}function isRunnableConfigLike(m){var t;return m!==void 0&&typeof m.callbacks=="object"&&(containsLangChainTracerLike((t=m.callbacks)==null?void 0:t.handlers)||containsLangChainTracerLike(m.callbacks))}let MockAsyncLocalStorage$1=class{getStore(){}run(t,n){return n()}};const TRACING_ALS_KEY$1=Symbol.for("ls:tracing_async_local_storage"),mockAsyncLocalStorage$1=new MockAsyncLocalStorage$1;let AsyncLocalStorageProvider$1=class{getInstance(){return globalThis[TRACING_ALS_KEY$1]??mockAsyncLocalStorage$1}initializeGlobalInstance(t){globalThis[TRACING_ALS_KEY$1]===void 0&&(globalThis[TRACING_ALS_KEY$1]=t)}};const AsyncLocalStorageProviderSingleton$1=new AsyncLocalStorageProvider$1,getCurrentRunTree=()=>{const m=AsyncLocalStorageProviderSingleton$1.getInstance().getStore();if(!isRunTree(m))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return m};function isTraceableFunction(m){return typeof m=="function"&&"langsmith:traceable"in m}let client;const getDefaultLangChainClientSingleton=()=>{if(client===void 0){const m=getEnvironmentVariable$1("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};client=new Client(m)}return client};class LangChainTracer extends BaseTracer{constructor(t={}){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:p,client:C}=t;this.projectName=p??getEnvironmentVariable$1("LANGCHAIN_PROJECT")??getEnvironmentVariable$1("LANGCHAIN_SESSION"),this.exampleId=n,this.client=C??getDefaultLangChainClientSingleton();const b=LangChainTracer.getTraceableRunTree();b&&this.updateFromRunTree(b)}async _convertToCreate(t,n=void 0){return{...t,extra:{...t.extra,runtime:await getRuntimeEnvironment$1()},child_runs:void 0,session_name:this.projectName,reference_example_id:t.parent_run_id?void 0:n}}async persistRun(t){}async onRunCreate(t){const n=await this._convertToCreate(t,this.exampleId);await this.client.createRun(n)}async onRunUpdate(t){const n={end_time:t.end_time,error:t.error,outputs:t.outputs,events:t.events,inputs:t.inputs,trace_id:t.trace_id,dotted_order:t.dotted_order,parent_run_id:t.parent_run_id,extra:t.extra};await this.client.updateRun(t.id,n)}getRun(t){return this.runMap.get(t)}updateFromRunTree(t){let n=t;const p=new Set;for(;n.parent_run&&!(p.has(n.id)||(p.add(n.id),!n.parent_run));)n=n.parent_run;p.clear();const C=[n];for(;C.length>0;){const b=C.shift();!b||p.has(b.id)||(p.add(b.id),this.runMap.set(b.id,b),b.child_runs&&C.push(...b.child_runs))}this.client=t.client??this.client,this.projectName=t.project_name??this.projectName,this.exampleId=t.reference_example_id??this.exampleId}convertToRunTree(t){const n={},p=[];for(const[C,b]of this.runMap){const o=new RunTree({...b,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[C]=o,p.push([C,b.dotted_order])}p.sort((C,b)=>!C[1]||!b[1]?0:C[1].localeCompare(b[1]));for(const[C]of p){const b=this.runMap.get(C),o=n[C];if(!(!b||!o)&&b.parent_run_id){const E=n[b.parent_run_id];E&&(E.child_runs.push(o),o.parent_run=E)}}return n[t]}static getTraceableRunTree(){try{return getCurrentRunTree()}catch{return}}}const TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage"),_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables"),setGlobalAsyncLocalStorageInstance=m=>{globalThis[TRACING_ALS_KEY]=m},getGlobalAsyncLocalStorageInstance=()=>globalThis[TRACING_ALS_KEY];let queue;function createQueue(){const m="default"in PQueueMod?PQueueMod.default:PQueueMod;return new m({autoStart:!0,concurrency:1})}function getQueue(){return typeof queue>"u"&&(queue=createQueue()),queue}async function consumeCallback(m,t){if(t===!0){const n=getGlobalAsyncLocalStorageInstance();n!==void 0?await n.run(void 0,async()=>m()):await m()}else queue=getQueue(),queue.add(async()=>{const n=getGlobalAsyncLocalStorageInstance();n!==void 0?await n.run(void 0,async()=>m()):await m()})}const isTracingEnabled=m=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>getEnvironmentVariable$1(n)==="true");function getContextVariable(m){var p;const t=getGlobalAsyncLocalStorageInstance();if(t===void 0)return;const n=t.getStore();return(p=n==null?void 0:n[_CONTEXT_VARIABLES_KEY])==null?void 0:p[m]}const LC_CONFIGURE_HOOKS_KEY=Symbol("lc:configure_hooks"),_getConfigureHooks=()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY)||[];class BaseCallbackManager{setHandler(t){return this.setHandlers([t])}}class BaseRunManager{constructor(t,n,p,C,b,o,E,e){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:p}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:C}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:b}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:E}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:e})}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;try{await((p=n.handleText)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${C}`),n.raiseError)throw C}},n.awaitHandlers)))}async handleCustomEvent(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;try{await((E=o.handleCustomEvent)==null?void 0:E.call(o,t,n,this.runId,this.tags,this.metadata))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(t){const n=new CallbackManager(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),t&&n.addTags([t],!1),n}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreRetriever)try{await((p=n.handleRetrieverEnd)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw C}},n.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreRetriever)try{await((p=n.handleRetrieverError)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${C}`),n.raiseError)throw t}},n.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(t,n,p,C,b,o){await Promise.all(this.handlers.map(E=>consumeCallback(async()=>{var e;if(!E.ignoreLLM)try{await((e=E.handleLLMNewToken)==null?void 0:e.call(E,t,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(a){if((E.raiseError?console.error:console.warn)(`Error in handler ${E.constructor.name}, handleLLMNewToken: ${a}`),E.raiseError)throw a}},E.awaitHandlers)))}async handleLLMError(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;if(!o.ignoreLLM)try{await((E=o.handleLLMError)==null?void 0:E.call(o,t,this.runId,this._parentRunId,this.tags,b))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}async handleLLMEnd(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;if(!o.ignoreLLM)try{await((E=o.handleLLMEnd)==null?void 0:E.call(o,t,this.runId,this._parentRunId,this.tags,b))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(t){const n=new CallbackManager(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),t&&n.addTags([t],!1),n}async handleChainError(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;if(!o.ignoreChain)try{await((E=o.handleChainError)==null?void 0:E.call(o,t,this.runId,this._parentRunId,this.tags,b))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}async handleChainEnd(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;if(!o.ignoreChain)try{await((E=o.handleChainEnd)==null?void 0:E.call(o,t,this.runId,this._parentRunId,this.tags,b))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreAgent)try{await((p=n.handleAgentAction)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${C}`),n.raiseError)throw C}},n.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreAgent)try{await((p=n.handleAgentEnd)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${C}`),n.raiseError)throw C}},n.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(t){const n=new CallbackManager(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),t&&n.addTags([t],!1),n}async handleToolError(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreAgent)try{await((p=n.handleToolError)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${C}`),n.raiseError)throw C}},n.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{var p;if(!n.ignoreAgent)try{await((p=n.handleToolEnd)==null?void 0:p.call(n,t,this.runId,this._parentRunId,this.tags))}catch(C){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${C}`),n.raiseError)throw C}},n.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(t,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}async handleLLMStart(t,n,p=void 0,C=void 0,b=void 0,o=void 0,E=void 0,e=void 0){return Promise.all(n.map(async(a,x)=>{const c=x===0&&p?p:v4();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return isBaseTracer(u)&&u._createRunForLLMStart(t,[a],c,this._parentRunId,b,this.tags,this.metadata,e),consumeCallback(async()=>{var h;try{await((h=u.handleLLMStart)==null?void 0:h.call(u,t,[a],c,this._parentRunId,b,this.tags,this.metadata,e))}catch(s){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${s}`),u.raiseError)throw s}},u.awaitHandlers)})),new CallbackManagerForLLMRun(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(t,n,p=void 0,C=void 0,b=void 0,o=void 0,E=void 0,e=void 0){return Promise.all(n.map(async(a,x)=>{const c=x===0&&p?p:v4();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return isBaseTracer(u)&&u._createRunForChatModelStart(t,[a],c,this._parentRunId,b,this.tags,this.metadata,e),consumeCallback(async()=>{var h,s;try{if(u.handleChatModelStart)await((h=u.handleChatModelStart)==null?void 0:h.call(u,t,[a],c,this._parentRunId,b,this.tags,this.metadata,e));else if(u.handleLLMStart){const l=getBufferString(a);await((s=u.handleLLMStart)==null?void 0:s.call(u,t,[l],c,this._parentRunId,b,this.tags,this.metadata,e))}}catch(l){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${l}`),u.raiseError)throw l}},u.awaitHandlers)})),new CallbackManagerForLLMRun(c,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(t,n,p=v4(),C=void 0,b=void 0,o=void 0,E=void 0){return await Promise.all(this.handlers.map(e=>{if(!e.ignoreChain)return isBaseTracer(e)&&e._createRunForChainStart(t,n,p,this._parentRunId,this.tags,this.metadata,C,E),consumeCallback(async()=>{var a;try{await((a=e.handleChainStart)==null?void 0:a.call(e,t,n,p,this._parentRunId,this.tags,this.metadata,C,E))}catch(x){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleChainStart: ${x}`),e.raiseError)throw x}},e.awaitHandlers)})),new CallbackManagerForChainRun(p,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(t,n,p=v4(),C=void 0,b=void 0,o=void 0,E=void 0){return await Promise.all(this.handlers.map(e=>{if(!e.ignoreAgent)return isBaseTracer(e)&&e._createRunForToolStart(t,n,p,this._parentRunId,this.tags,this.metadata,E),consumeCallback(async()=>{var a;try{await((a=e.handleToolStart)==null?void 0:a.call(e,t,n,p,this._parentRunId,this.tags,this.metadata,E))}catch(x){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolStart: ${x}`),e.raiseError)throw x}},e.awaitHandlers)})),new CallbackManagerForToolRun(p,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(t,n,p=v4(),C=void 0,b=void 0,o=void 0,E=void 0){return await Promise.all(this.handlers.map(e=>{if(!e.ignoreRetriever)return isBaseTracer(e)&&e._createRunForRetrieverStart(t,n,p,this._parentRunId,this.tags,this.metadata,E),consumeCallback(async()=>{var a;try{await((a=e.handleRetrieverStart)==null?void 0:a.call(e,t,n,p,this._parentRunId,this.tags,this.metadata,E))}catch(x){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverStart: ${x}`),e.raiseError)throw x}},e.awaitHandlers)})),new CallbackManagerForRetrieverRun(p,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(t,n,p,C,b){await Promise.all(this.handlers.map(o=>consumeCallback(async()=>{var E;if(!o.ignoreCustomEvent)try{await((E=o.handleCustomEvent)==null?void 0:E.call(o,t,n,p,this.tags,this.metadata))}catch(e){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${e}`),o.raiseError)throw e}},o.awaitHandlers)))}addHandler(t,n=!0){this.handlers.push(t),n&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(n=>n!==t),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==t)}setHandlers(t,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const p of t)this.addHandler(p,n)}addTags(t,n=!0){this.removeTags(t),this.tags.push(...t),n&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(n=>!t.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!t.includes(n))}addMetadata(t,n=!0){this.metadata={...this.metadata,...t},n&&(this.inheritableMetadata={...this.inheritableMetadata,...t})}removeMetadata(t){for(const n of Object.keys(t))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(t=[],n=!0){const p=new CallbackManager(this._parentRunId);for(const C of this.handlers){const b=this.inheritableHandlers.includes(C);p.addHandler(C,b)}for(const C of this.tags){const b=this.inheritableTags.includes(C);p.addTags([C],b)}for(const C of Object.keys(this.metadata)){const b=Object.keys(this.inheritableMetadata).includes(C);p.addMetadata({[C]:this.metadata[C]},b)}for(const C of t)p.handlers.filter(b=>b.name==="console_callback_handler").some(b=>b.name===C.name)||p.addHandler(C,n);return p}static fromHandlers(t){class n extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,t)}}const p=new this;return p.addHandler(new n),p}static configure(t,n,p,C,b,o,E){return this._configureSync(t,n,p,C,b,o,E)}static _configureSync(t,n,p,C,b,o,E){var u,h;let e;(t||n)&&(Array.isArray(t)||!t?(e=new CallbackManager,e.setHandlers((t==null?void 0:t.map(ensureHandler))??[],!0)):e=t,e=e.copy(Array.isArray(n)?n.map(ensureHandler):n==null?void 0:n.handlers,!1));const a=getEnvironmentVariable$1("LANGCHAIN_VERBOSE")==="true"||(E==null?void 0:E.verbose),x=((u=LangChainTracer.getTraceableRunTree())==null?void 0:u.tracingEnabled)||isTracingEnabled(),c=x||(getEnvironmentVariable$1("LANGCHAIN_TRACING")??!1);if(a||c){if(e||(e=new CallbackManager),a&&!e.handlers.some(s=>s.name===ConsoleCallbackHandler.prototype.name)){const s=new ConsoleCallbackHandler;e.addHandler(s,!0)}if(c&&!e.handlers.some(s=>s.name==="langchain_tracer")&&x){const s=new LangChainTracer;e.addHandler(s,!0),e._parentRunId=((h=LangChainTracer.getTraceableRunTree())==null?void 0:h.id)??e._parentRunId}}for(const{contextVar:s,inheritable:l=!0,handlerClass:v,envVar:d}of _getConfigureHooks()){const g=d&&getEnvironmentVariable$1(d)==="true"&&v;let y;const S=s!==void 0?getContextVariable(s):void 0;S&&isBaseCallbackHandler(S)?y=S:g&&(y=new v({})),y!==void 0&&(e||(e=new CallbackManager),e.handlers.some(T=>T.name===y.name)||e.addHandler(y,l))}return(p||C)&&e&&(e.addTags(p??[]),e.addTags(C??[],!1)),(b||o)&&e&&(e.addMetadata(b??{}),e.addMetadata(o??{},!1)),e}}function ensureHandler(m){return"name"in m?m:BaseCallbackHandler.fromMethods(m)}var util;(function(m){m.assertEqual=C=>C;function t(C){}m.assertIs=t;function n(C){throw new Error}m.assertNever=n,m.arrayToEnum=C=>{const b={};for(const o of C)b[o]=o;return b},m.getValidEnumValues=C=>{const b=m.objectKeys(C).filter(E=>typeof C[C[E]]!="number"),o={};for(const E of b)o[E]=C[E];return m.objectValues(o)},m.objectValues=C=>m.objectKeys(C).map(function(b){return C[b]}),m.objectKeys=typeof Object.keys=="function"?C=>Object.keys(C):C=>{const b=[];for(const o in C)Object.prototype.hasOwnProperty.call(C,o)&&b.push(o);return b},m.find=(C,b)=>{for(const o of C)if(b(o))return o},m.isInteger=typeof Number.isInteger=="function"?C=>Number.isInteger(C):C=>typeof C=="number"&&isFinite(C)&&Math.floor(C)===C;function p(C,b=" | "){return C.map(o=>typeof o=="string"?`'${o}'`:o).join(b)}m.joinValues=p,m.jsonStringifyReplacer=(C,b)=>typeof b=="bigint"?b.toString():b})(util||(util={}));var objectUtil;(function(m){m.mergeShapes=(t,n)=>({...t,...n})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=m=>{switch(typeof m){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(m)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(m)?ZodParsedType.array:m===null?ZodParsedType.null:m.then&&typeof m.then=="function"&&m.catch&&typeof m.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&m instanceof Map?ZodParsedType.map:typeof Set<"u"&&m instanceof Set?ZodParsedType.set:typeof Date<"u"&&m instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=m=>JSON.stringify(m,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=p=>{this.issues=[...this.issues,p]},this.addIssues=(p=[])=>{this.issues=[...this.issues,...p]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(b){return b.message},p={_errors:[]},C=b=>{for(const o of b.issues)if(o.code==="invalid_union")o.unionErrors.map(C);else if(o.code==="invalid_return_type")C(o.returnTypeError);else if(o.code==="invalid_arguments")C(o.argumentsError);else if(o.path.length===0)p._errors.push(n(o));else{let E=p,e=0;for(;e<o.path.length;){const a=o.path[e];e===o.path.length-1?(E[a]=E[a]||{_errors:[]},E[a]._errors.push(n(o))):E[a]=E[a]||{_errors:[]},E=E[a],e++}}};return C(this),p}static assert(t){if(!(t instanceof ZodError))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},p=[];for(const C of this.issues)C.path.length>0?(n[C.path[0]]=n[C.path[0]]||[],n[C.path[0]].push(t(C))):p.push(t(C));return{formErrors:p,fieldErrors:n}}get formErrors(){return this.flatten()}}ZodError.create=m=>new ZodError(m);const errorMap=(m,t)=>{let n;switch(m.code){case ZodIssueCode.invalid_type:m.received===ZodParsedType.undefined?n="Required":n=`Expected ${m.expected}, received ${m.received}`;break;case ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(m.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${util.joinValues(m.keys,", ")}`;break;case ZodIssueCode.invalid_union:n="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${util.joinValues(m.options)}`;break;case ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${util.joinValues(m.options)}, received '${m.received}'`;break;case ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case ZodIssueCode.invalid_date:n="Invalid date";break;case ZodIssueCode.invalid_string:typeof m.validation=="object"?"includes"in m.validation?(n=`Invalid input: must include "${m.validation.includes}"`,typeof m.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${m.validation.position}`)):"startsWith"in m.validation?n=`Invalid input: must start with "${m.validation.startsWith}"`:"endsWith"in m.validation?n=`Invalid input: must end with "${m.validation.endsWith}"`:util.assertNever(m.validation):m.validation!=="regex"?n=`Invalid ${m.validation}`:n="Invalid";break;case ZodIssueCode.too_small:m.type==="array"?n=`Array must contain ${m.exact?"exactly":m.inclusive?"at least":"more than"} ${m.minimum} element(s)`:m.type==="string"?n=`String must contain ${m.exact?"exactly":m.inclusive?"at least":"over"} ${m.minimum} character(s)`:m.type==="number"?n=`Number must be ${m.exact?"exactly equal to ":m.inclusive?"greater than or equal to ":"greater than "}${m.minimum}`:m.type==="date"?n=`Date must be ${m.exact?"exactly equal to ":m.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(m.minimum))}`:n="Invalid input";break;case ZodIssueCode.too_big:m.type==="array"?n=`Array must contain ${m.exact?"exactly":m.inclusive?"at most":"less than"} ${m.maximum} element(s)`:m.type==="string"?n=`String must contain ${m.exact?"exactly":m.inclusive?"at most":"under"} ${m.maximum} character(s)`:m.type==="number"?n=`Number must be ${m.exact?"exactly":m.inclusive?"less than or equal to":"less than"} ${m.maximum}`:m.type==="bigint"?n=`BigInt must be ${m.exact?"exactly":m.inclusive?"less than or equal to":"less than"} ${m.maximum}`:m.type==="date"?n=`Date must be ${m.exact?"exactly":m.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(m.maximum))}`:n="Invalid input";break;case ZodIssueCode.custom:n="Invalid input";break;case ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${m.multipleOf}`;break;case ZodIssueCode.not_finite:n="Number must be finite";break;default:n=t.defaultError,util.assertNever(m)}return{message:n}};let overrideErrorMap=errorMap;function setErrorMap(m){overrideErrorMap=m}function getErrorMap(){return overrideErrorMap}const makeIssue=m=>{const{data:t,path:n,errorMaps:p,issueData:C}=m,b=[...n,...C.path||[]],o={...C,path:b};if(C.message!==void 0)return{...C,path:b,message:C.message};let E="";const e=p.filter(a=>!!a).slice().reverse();for(const a of e)E=a(o,{data:t,defaultError:E}).message;return{...C,path:b,message:E}},EMPTY_PATH=[];function addIssueToContext(m,t){const n=getErrorMap(),p=makeIssue({issueData:t,data:m.data,path:m.path,errorMaps:[m.common.contextualErrorMap,m.schemaErrorMap,n,n===errorMap?void 0:errorMap].filter(C=>!!C)});m.common.issues.push(p)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const p=[];for(const C of n){if(C.status==="aborted")return INVALID;C.status==="dirty"&&t.dirty(),p.push(C.value)}return{status:t.value,value:p}}static async mergeObjectAsync(t,n){const p=[];for(const C of n){const b=await C.key,o=await C.value;p.push({key:b,value:o})}return ParseStatus.mergeObjectSync(t,p)}static mergeObjectSync(t,n){const p={};for(const C of n){const{key:b,value:o}=C;if(b.status==="aborted"||o.status==="aborted")return INVALID;b.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),b.value!=="__proto__"&&(typeof o.value<"u"||C.alwaysSet)&&(p[b.value]=o.value)}return{status:t.value,value:p}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=m=>({status:"dirty",value:m}),OK=m=>({status:"valid",value:m}),isAborted=m=>m.status==="aborted",isDirty=m=>m.status==="dirty",isValid=m=>m.status==="valid",isAsync=m=>typeof Promise<"u"&&m instanceof Promise;function __classPrivateFieldGet$7(m,t,n,p){if(typeof t=="function"?m!==t||!0:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(m)}function __classPrivateFieldSet$6(m,t,n,p,C){if(typeof t=="function"?m!==t||!0:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(m,n),n}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(m){m.errToObj=t=>typeof t=="string"?{message:t}:t||{},m.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(t,n,p,C){this._cachedPath=[],this.parent=t,this.data=n,this._path=p,this._key=C}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(m,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!m.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ZodError(m.common.issues);return this._error=n,this._error}}};function processCreateParams(m){if(!m)return{};const{errorMap:t,invalid_type_error:n,required_error:p,description:C}=m;if(t&&(n||p))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:C}:{errorMap:(o,E)=>{var e,a;const{message:x}=m;return o.code==="invalid_enum_value"?{message:x??E.defaultError}:typeof E.data>"u"?{message:(e=x??p)!==null&&e!==void 0?e:E.defaultError}:o.code!=="invalid_type"?{message:E.defaultError}:{message:(a=x??n)!==null&&a!==void 0?a:E.defaultError}},description:C}}class ZodType{get description(){return this._def.description}_getType(t){return getParsedType(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ParseStatus,ctx:{common:t.parent.common,data:t.data,parsedType:getParsedType(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(isAsync(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const p=this.safeParse(t,n);if(p.success)return p.data;throw p.error}safeParse(t,n){var p;const C={common:{issues:[],async:(p=n==null?void 0:n.async)!==null&&p!==void 0?p:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},b=this._parseSync({data:t,path:C.path,parent:C});return handleResult(C,b)}"~validate"(t){var n,p;const C={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)};if(!this["~standard"].async)try{const b=this._parseSync({data:t,path:[],parent:C});return isValid(b)?{value:b.value}:{issues:C.common.issues}}catch(b){!((p=(n=b==null?void 0:b.message)===null||n===void 0?void 0:n.toLowerCase())===null||p===void 0)&&p.includes("encountered")&&(this["~standard"].async=!0),C.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:C}).then(b=>isValid(b)?{value:b.value}:{issues:C.common.issues})}async parseAsync(t,n){const p=await this.safeParseAsync(t,n);if(p.success)return p.data;throw p.error}async safeParseAsync(t,n){const p={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:getParsedType(t)},C=this._parse({data:t,path:p.path,parent:p}),b=await(isAsync(C)?C:Promise.resolve(C));return handleResult(p,b)}refine(t,n){const p=C=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(C):n;return this._refinement((C,b)=>{const o=t(C),E=()=>b.addIssue({code:ZodIssueCode.custom,...p(C)});return typeof Promise<"u"&&o instanceof Promise?o.then(e=>e?!0:(E(),!1)):o?!0:(E(),!1)})}refinement(t,n){return this._refinement((p,C)=>t(p)?!0:(C.addIssue(typeof n=="function"?n(p,C):n),!1))}_refinement(t){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(t){return ZodUnion.create([this,t],this._def)}and(t){return ZodIntersection.create(this,t,this._def)}transform(t){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:n,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:n,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ZodPipeline.create(this,t)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$2;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(m){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return m.precision?t=`${t}\\.\\d{${m.precision}}`:m.precision==null&&(t=`${t}(\\.\\d+)?`),t}function timeRegex(m){return new RegExp(`^${timeRegexSource(m)}$`)}function datetimeRegex(m){let t=`${dateRegexSource}T${timeRegexSource(m)}`;const n=[];return n.push(m.local?"Z?":"Z"),m.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function isValidIP(m,t){return!!((t==="v4"||!t)&&ipv4Regex.test(m)||(t==="v6"||!t)&&ipv6Regex.test(m))}function isValidJWT(m,t){if(!jwtRegex.test(m))return!1;try{const[n]=m.split("."),p=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),C=JSON.parse(atob(p));return!(typeof C!="object"||C===null||!C.typ||!C.alg||t&&C.alg!==t)}catch{return!1}}function isValidCidr(m,t){return!!((t==="v4"||!t)&&ipv4CidrRegex.test(m)||(t==="v6"||!t)&&ipv6CidrRegex.test(m))}class ZodString extends ZodType{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ZodParsedType.string){const b=this._getOrReturnCtx(t);return addIssueToContext(b,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:b.parsedType}),INVALID}const p=new ParseStatus;let C;for(const b of this._def.checks)if(b.kind==="min")t.data.length<b.value&&(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.too_small,minimum:b.value,type:"string",inclusive:!0,exact:!1,message:b.message}),p.dirty());else if(b.kind==="max")t.data.length>b.value&&(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.too_big,maximum:b.value,type:"string",inclusive:!0,exact:!1,message:b.message}),p.dirty());else if(b.kind==="length"){const o=t.data.length>b.value,E=t.data.length<b.value;(o||E)&&(C=this._getOrReturnCtx(t,C),o?addIssueToContext(C,{code:ZodIssueCode.too_big,maximum:b.value,type:"string",inclusive:!0,exact:!0,message:b.message}):E&&addIssueToContext(C,{code:ZodIssueCode.too_small,minimum:b.value,type:"string",inclusive:!0,exact:!0,message:b.message}),p.dirty())}else if(b.kind==="email")emailRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"email",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="emoji")emojiRegex$2||(emojiRegex$2=new RegExp(_emojiRegex,"u")),emojiRegex$2.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"emoji",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="uuid")uuidRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"uuid",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="nanoid")nanoidRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="cuid")cuidRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"cuid",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="cuid2")cuid2Regex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="ulid")ulidRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"ulid",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty());else if(b.kind==="url")try{new URL(t.data)}catch{C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"url",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()}else b.kind==="regex"?(b.regex.lastIndex=0,b.regex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"regex",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty())):b.kind==="trim"?t.data=t.data.trim():b.kind==="includes"?t.data.includes(b.value,b.position)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:{includes:b.value,position:b.position},message:b.message}),p.dirty()):b.kind==="toLowerCase"?t.data=t.data.toLowerCase():b.kind==="toUpperCase"?t.data=t.data.toUpperCase():b.kind==="startsWith"?t.data.startsWith(b.value)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:{startsWith:b.value},message:b.message}),p.dirty()):b.kind==="endsWith"?t.data.endsWith(b.value)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:{endsWith:b.value},message:b.message}),p.dirty()):b.kind==="datetime"?datetimeRegex(b).test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:"datetime",message:b.message}),p.dirty()):b.kind==="date"?dateRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:"date",message:b.message}),p.dirty()):b.kind==="time"?timeRegex(b).test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.invalid_string,validation:"time",message:b.message}),p.dirty()):b.kind==="duration"?durationRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"duration",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):b.kind==="ip"?isValidIP(t.data,b.version)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"ip",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):b.kind==="jwt"?isValidJWT(t.data,b.alg)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"jwt",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):b.kind==="cidr"?isValidCidr(t.data,b.version)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"cidr",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):b.kind==="base64"?base64Regex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"base64",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):b.kind==="base64url"?base64urlRegex.test(t.data)||(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{validation:"base64url",code:ZodIssueCode.invalid_string,message:b.message}),p.dirty()):util.assertNever(b);return{status:p.value,value:t.data}}_regex(t,n,p){return this.refinement(C=>t.test(C),{validation:n,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(p)})}_addCheck(t){return new ZodString({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...errorUtil.errToObj(t)})}url(t){return this._addCheck({kind:"url",...errorUtil.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...errorUtil.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...errorUtil.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...errorUtil.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...errorUtil.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...errorUtil.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...errorUtil.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...errorUtil.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...errorUtil.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...errorUtil.errToObj(t)})}datetime(t){var n,p;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(p=t==null?void 0:t.local)!==null&&p!==void 0?p:!1,...errorUtil.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...errorUtil.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...errorUtil.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...errorUtil.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...errorUtil.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...errorUtil.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...errorUtil.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...errorUtil.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...errorUtil.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...errorUtil.errToObj(n)})}nonempty(t){return this.min(1,errorUtil.errToObj(t))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ZodString.create=m=>{var t;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(t=m==null?void 0:m.coerce)!==null&&t!==void 0?t:!1,...processCreateParams(m)})};function floatSafeRemainder(m,t){const n=(m.toString().split(".")[1]||"").length,p=(t.toString().split(".")[1]||"").length,C=n>p?n:p,b=parseInt(m.toFixed(C).replace(".","")),o=parseInt(t.toFixed(C).replace(".",""));return b%o/Math.pow(10,C)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ZodParsedType.number){const b=this._getOrReturnCtx(t);return addIssueToContext(b,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:b.parsedType}),INVALID}let p;const C=new ParseStatus;for(const b of this._def.checks)b.kind==="int"?util.isInteger(t.data)||(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:b.message}),C.dirty()):b.kind==="min"?(b.inclusive?t.data<b.value:t.data<=b.value)&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.too_small,minimum:b.value,type:"number",inclusive:b.inclusive,exact:!1,message:b.message}),C.dirty()):b.kind==="max"?(b.inclusive?t.data>b.value:t.data>=b.value)&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.too_big,maximum:b.value,type:"number",inclusive:b.inclusive,exact:!1,message:b.message}),C.dirty()):b.kind==="multipleOf"?floatSafeRemainder(t.data,b.value)!==0&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.not_multiple_of,multipleOf:b.value,message:b.message}),C.dirty()):b.kind==="finite"?Number.isFinite(t.data)||(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.not_finite,message:b.message}),C.dirty()):util.assertNever(b);return{status:C.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,errorUtil.toString(n))}gt(t,n){return this.setLimit("min",t,!1,errorUtil.toString(n))}lte(t,n){return this.setLimit("max",t,!0,errorUtil.toString(n))}lt(t,n){return this.setLimit("max",t,!1,errorUtil.toString(n))}setLimit(t,n,p,C){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:p,message:errorUtil.toString(C)}]})}_addCheck(t){return new ZodNumber({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:errorUtil.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:errorUtil.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&util.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const p of this._def.checks){if(p.kind==="finite"||p.kind==="int"||p.kind==="multipleOf")return!0;p.kind==="min"?(n===null||p.value>n)&&(n=p.value):p.kind==="max"&&(t===null||p.value<t)&&(t=p.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ZodNumber.create=m=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(m==null?void 0:m.coerce)||!1,...processCreateParams(m)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ZodParsedType.bigint)return this._getInvalidInput(t);let p;const C=new ParseStatus;for(const b of this._def.checks)b.kind==="min"?(b.inclusive?t.data<b.value:t.data<=b.value)&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.too_small,type:"bigint",minimum:b.value,inclusive:b.inclusive,message:b.message}),C.dirty()):b.kind==="max"?(b.inclusive?t.data>b.value:t.data>=b.value)&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.too_big,type:"bigint",maximum:b.value,inclusive:b.inclusive,message:b.message}),C.dirty()):b.kind==="multipleOf"?t.data%b.value!==BigInt(0)&&(p=this._getOrReturnCtx(t,p),addIssueToContext(p,{code:ZodIssueCode.not_multiple_of,multipleOf:b.value,message:b.message}),C.dirty()):util.assertNever(b);return{status:C.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:n.parsedType}),INVALID}gte(t,n){return this.setLimit("min",t,!0,errorUtil.toString(n))}gt(t,n){return this.setLimit("min",t,!1,errorUtil.toString(n))}lte(t,n){return this.setLimit("max",t,!0,errorUtil.toString(n))}lt(t,n){return this.setLimit("max",t,!1,errorUtil.toString(n))}setLimit(t,n,p,C){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:p,message:errorUtil.toString(C)}]})}_addCheck(t){return new ZodBigInt({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:errorUtil.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ZodBigInt.create=m=>{var t;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(t=m==null?void 0:m.coerce)!==null&&t!==void 0?t:!1,...processCreateParams(m)})};class ZodBoolean extends ZodType{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ZodParsedType.boolean){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:p.parsedType}),INVALID}return OK(t.data)}}ZodBoolean.create=m=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(m==null?void 0:m.coerce)||!1,...processCreateParams(m)});class ZodDate extends ZodType{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ZodParsedType.date){const b=this._getOrReturnCtx(t);return addIssueToContext(b,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:b.parsedType}),INVALID}if(isNaN(t.data.getTime())){const b=this._getOrReturnCtx(t);return addIssueToContext(b,{code:ZodIssueCode.invalid_date}),INVALID}const p=new ParseStatus;let C;for(const b of this._def.checks)b.kind==="min"?t.data.getTime()<b.value&&(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.too_small,message:b.message,inclusive:!0,exact:!1,minimum:b.value,type:"date"}),p.dirty()):b.kind==="max"?t.data.getTime()>b.value&&(C=this._getOrReturnCtx(t,C),addIssueToContext(C,{code:ZodIssueCode.too_big,message:b.message,inclusive:!0,exact:!1,maximum:b.value,type:"date"}),p.dirty()):util.assertNever(b);return{status:p.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ZodDate({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:errorUtil.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:errorUtil.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ZodDate.create=m=>new ZodDate({checks:[],coerce:(m==null?void 0:m.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(m)});class ZodSymbol extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.symbol){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:p.parsedType}),INVALID}return OK(t.data)}}ZodSymbol.create=m=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(m)});class ZodUndefined extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:p.parsedType}),INVALID}return OK(t.data)}}ZodUndefined.create=m=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(m)});class ZodNull extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.null){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:p.parsedType}),INVALID}return OK(t.data)}}ZodNull.create=m=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(m)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(t){return OK(t.data)}}ZodAny.create=m=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(m)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(t){return OK(t.data)}}ZodUnknown.create=m=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(m)});class ZodNever extends ZodType{_parse(t){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:n.parsedType}),INVALID}}ZodNever.create=m=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(m)});class ZodVoid extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.undefined){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:p.parsedType}),INVALID}return OK(t.data)}}ZodVoid.create=m=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(m)});class ZodArray extends ZodType{_parse(t){const{ctx:n,status:p}=this._processInputParams(t),C=this._def;if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(C.exactLength!==null){const o=n.data.length>C.exactLength.value,E=n.data.length<C.exactLength.value;(o||E)&&(addIssueToContext(n,{code:o?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:E?C.exactLength.value:void 0,maximum:o?C.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:C.exactLength.message}),p.dirty())}if(C.minLength!==null&&n.data.length<C.minLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:C.minLength.value,type:"array",inclusive:!0,exact:!1,message:C.minLength.message}),p.dirty()),C.maxLength!==null&&n.data.length>C.maxLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:C.maxLength.value,type:"array",inclusive:!0,exact:!1,message:C.maxLength.message}),p.dirty()),n.common.async)return Promise.all([...n.data].map((o,E)=>C.type._parseAsync(new ParseInputLazyPath(n,o,n.path,E)))).then(o=>ParseStatus.mergeArray(p,o));const b=[...n.data].map((o,E)=>C.type._parseSync(new ParseInputLazyPath(n,o,n.path,E)));return ParseStatus.mergeArray(p,b)}get element(){return this._def.type}min(t,n){return new ZodArray({...this._def,minLength:{value:t,message:errorUtil.toString(n)}})}max(t,n){return new ZodArray({...this._def,maxLength:{value:t,message:errorUtil.toString(n)}})}length(t,n){return new ZodArray({...this._def,exactLength:{value:t,message:errorUtil.toString(n)}})}nonempty(t){return this.min(1,t)}}ZodArray.create=(m,t)=>new ZodArray({type:m,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)});function deepPartialify(m){if(m instanceof ZodObject){const t={};for(const n in m.shape){const p=m.shape[n];t[n]=ZodOptional.create(deepPartialify(p))}return new ZodObject({...m._def,shape:()=>t})}else return m instanceof ZodArray?new ZodArray({...m._def,type:deepPartialify(m.element)}):m instanceof ZodOptional?ZodOptional.create(deepPartialify(m.unwrap())):m instanceof ZodNullable?ZodNullable.create(deepPartialify(m.unwrap())):m instanceof ZodTuple?ZodTuple.create(m.items.map(t=>deepPartialify(t))):m}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=util.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==ZodParsedType.object){const a=this._getOrReturnCtx(t);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID}const{status:p,ctx:C}=this._processInputParams(t),{shape:b,keys:o}=this._getCached(),E=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const a in C.data)o.includes(a)||E.push(a);const e=[];for(const a of o){const x=b[a],c=C.data[a];e.push({key:{status:"valid",value:a},value:x._parse(new ParseInputLazyPath(C,c,C.path,a)),alwaysSet:a in C.data})}if(this._def.catchall instanceof ZodNever){const a=this._def.unknownKeys;if(a==="passthrough")for(const x of E)e.push({key:{status:"valid",value:x},value:{status:"valid",value:C.data[x]}});else if(a==="strict")E.length>0&&(addIssueToContext(C,{code:ZodIssueCode.unrecognized_keys,keys:E}),p.dirty());else if(a!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const a=this._def.catchall;for(const x of E){const c=C.data[x];e.push({key:{status:"valid",value:x},value:a._parse(new ParseInputLazyPath(C,c,C.path,x)),alwaysSet:x in C.data})}}return C.common.async?Promise.resolve().then(async()=>{const a=[];for(const x of e){const c=await x.key,u=await x.value;a.push({key:c,value:u,alwaysSet:x.alwaysSet})}return a}).then(a=>ParseStatus.mergeObjectSync(p,a)):ParseStatus.mergeObjectSync(p,e)}get shape(){return this._def.shape()}strict(t){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,p)=>{var C,b,o,E;const e=(o=(b=(C=this._def).errorMap)===null||b===void 0?void 0:b.call(C,n,p).message)!==null&&o!==void 0?o:p.defaultError;return n.code==="unrecognized_keys"?{message:(E=errorUtil.errToObj(t).message)!==null&&E!==void 0?E:e}:{message:e}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(t){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ZodObject({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ZodObject({...this._def,catchall:t})}pick(t){const n={};return util.objectKeys(t).forEach(p=>{t[p]&&this.shape[p]&&(n[p]=this.shape[p])}),new ZodObject({...this._def,shape:()=>n})}omit(t){const n={};return util.objectKeys(this.shape).forEach(p=>{t[p]||(n[p]=this.shape[p])}),new ZodObject({...this._def,shape:()=>n})}deepPartial(){return deepPartialify(this)}partial(t){const n={};return util.objectKeys(this.shape).forEach(p=>{const C=this.shape[p];t&&!t[p]?n[p]=C:n[p]=C.optional()}),new ZodObject({...this._def,shape:()=>n})}required(t){const n={};return util.objectKeys(this.shape).forEach(p=>{if(t&&!t[p])n[p]=this.shape[p];else{let b=this.shape[p];for(;b instanceof ZodOptional;)b=b._def.innerType;n[p]=b}}),new ZodObject({...this._def,shape:()=>n})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(m,t)=>new ZodObject({shape:()=>m,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});ZodObject.strictCreate=(m,t)=>new ZodObject({shape:()=>m,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});ZodObject.lazycreate=(m,t)=>new ZodObject({shape:m,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(t){const{ctx:n}=this._processInputParams(t),p=this._def.options;function C(b){for(const E of b)if(E.result.status==="valid")return E.result;for(const E of b)if(E.result.status==="dirty")return n.common.issues.push(...E.ctx.common.issues),E.result;const o=b.map(E=>new ZodError(E.ctx.common.issues));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:o}),INVALID}if(n.common.async)return Promise.all(p.map(async b=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await b._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(C);{let b;const o=[];for(const e of p){const a={...n,common:{...n.common,issues:[]},parent:null},x=e._parseSync({data:n.data,path:n.path,parent:a});if(x.status==="valid")return x;x.status==="dirty"&&!b&&(b={result:x,ctx:a}),a.common.issues.length&&o.push(a.common.issues)}if(b)return n.common.issues.push(...b.ctx.common.issues),b.result;const E=o.map(e=>new ZodError(e));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:E}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(m,t)=>new ZodUnion({options:m,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});const getDiscriminator=m=>m instanceof ZodLazy?getDiscriminator(m.schema):m instanceof ZodEffects?getDiscriminator(m.innerType()):m instanceof ZodLiteral?[m.value]:m instanceof ZodEnum?m.options:m instanceof ZodNativeEnum?util.objectValues(m.enum):m instanceof ZodDefault?getDiscriminator(m._def.innerType):m instanceof ZodUndefined?[void 0]:m instanceof ZodNull?[null]:m instanceof ZodOptional?[void 0,...getDiscriminator(m.unwrap())]:m instanceof ZodNullable?[null,...getDiscriminator(m.unwrap())]:m instanceof ZodBranded||m instanceof ZodReadonly?getDiscriminator(m.unwrap()):m instanceof ZodCatch?getDiscriminator(m._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const p=this.discriminator,C=n.data[p],b=this.optionsMap.get(C);return b?n.common.async?b._parseAsync({data:n.data,path:n.path,parent:n}):b._parseSync({data:n.data,path:n.path,parent:n}):(addIssueToContext(n,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[p]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,p){const C=new Map;for(const b of n){const o=getDiscriminator(b.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const E of o){if(C.has(E))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(E)}`);C.set(E,b)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:C,...processCreateParams(p)})}}function mergeValues(m,t){const n=getParsedType(m),p=getParsedType(t);if(m===t)return{valid:!0,data:m};if(n===ZodParsedType.object&&p===ZodParsedType.object){const C=util.objectKeys(t),b=util.objectKeys(m).filter(E=>C.indexOf(E)!==-1),o={...m,...t};for(const E of b){const e=mergeValues(m[E],t[E]);if(!e.valid)return{valid:!1};o[E]=e.data}return{valid:!0,data:o}}else if(n===ZodParsedType.array&&p===ZodParsedType.array){if(m.length!==t.length)return{valid:!1};const C=[];for(let b=0;b<m.length;b++){const o=m[b],E=t[b],e=mergeValues(o,E);if(!e.valid)return{valid:!1};C.push(e.data)}return{valid:!0,data:C}}else return n===ZodParsedType.date&&p===ZodParsedType.date&&+m==+t?{valid:!0,data:m}:{valid:!1}}class ZodIntersection extends ZodType{_parse(t){const{status:n,ctx:p}=this._processInputParams(t),C=(b,o)=>{if(isAborted(b)||isAborted(o))return INVALID;const E=mergeValues(b.value,o.value);return E.valid?((isDirty(b)||isDirty(o))&&n.dirty(),{status:n.value,value:E.data}):(addIssueToContext(p,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return p.common.async?Promise.all([this._def.left._parseAsync({data:p.data,path:p.path,parent:p}),this._def.right._parseAsync({data:p.data,path:p.path,parent:p})]).then(([b,o])=>C(b,o)):C(this._def.left._parseSync({data:p.data,path:p.path,parent:p}),this._def.right._parseSync({data:p.data,path:p.path,parent:p}))}}ZodIntersection.create=(m,t,n)=>new ZodIntersection({left:m,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(n)});class ZodTuple extends ZodType{_parse(t){const{status:n,ctx:p}=this._processInputParams(t);if(p.parsedType!==ZodParsedType.array)return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:p.parsedType}),INVALID;if(p.data.length<this._def.items.length)return addIssueToContext(p,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&p.data.length>this._def.items.length&&(addIssueToContext(p,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const b=[...p.data].map((o,E)=>{const e=this._def.items[E]||this._def.rest;return e?e._parse(new ParseInputLazyPath(p,o,p.path,E)):null}).filter(o=>!!o);return p.common.async?Promise.all(b).then(o=>ParseStatus.mergeArray(n,o)):ParseStatus.mergeArray(n,b)}get items(){return this._def.items}rest(t){return new ZodTuple({...this._def,rest:t})}}ZodTuple.create=(m,t)=>{if(!Array.isArray(m))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:m,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:p}=this._processInputParams(t);if(p.parsedType!==ZodParsedType.object)return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:p.parsedType}),INVALID;const C=[],b=this._def.keyType,o=this._def.valueType;for(const E in p.data)C.push({key:b._parse(new ParseInputLazyPath(p,E,p.path,E)),value:o._parse(new ParseInputLazyPath(p,p.data[E],p.path,E)),alwaysSet:E in p.data});return p.common.async?ParseStatus.mergeObjectAsync(n,C):ParseStatus.mergeObjectSync(n,C)}get element(){return this._def.valueType}static create(t,n,p){return n instanceof ZodType?new ZodRecord({keyType:t,valueType:n,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(p)}):new ZodRecord({keyType:ZodString.create(),valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:p}=this._processInputParams(t);if(p.parsedType!==ZodParsedType.map)return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:p.parsedType}),INVALID;const C=this._def.keyType,b=this._def.valueType,o=[...p.data.entries()].map(([E,e],a)=>({key:C._parse(new ParseInputLazyPath(p,E,p.path,[a,"key"])),value:b._parse(new ParseInputLazyPath(p,e,p.path,[a,"value"]))}));if(p.common.async){const E=new Map;return Promise.resolve().then(async()=>{for(const e of o){const a=await e.key,x=await e.value;if(a.status==="aborted"||x.status==="aborted")return INVALID;(a.status==="dirty"||x.status==="dirty")&&n.dirty(),E.set(a.value,x.value)}return{status:n.value,value:E}})}else{const E=new Map;for(const e of o){const a=e.key,x=e.value;if(a.status==="aborted"||x.status==="aborted")return INVALID;(a.status==="dirty"||x.status==="dirty")&&n.dirty(),E.set(a.value,x.value)}return{status:n.value,value:E}}}}ZodMap.create=(m,t,n)=>new ZodMap({valueType:t,keyType:m,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(n)});class ZodSet extends ZodType{_parse(t){const{status:n,ctx:p}=this._processInputParams(t);if(p.parsedType!==ZodParsedType.set)return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:p.parsedType}),INVALID;const C=this._def;C.minSize!==null&&p.data.size<C.minSize.value&&(addIssueToContext(p,{code:ZodIssueCode.too_small,minimum:C.minSize.value,type:"set",inclusive:!0,exact:!1,message:C.minSize.message}),n.dirty()),C.maxSize!==null&&p.data.size>C.maxSize.value&&(addIssueToContext(p,{code:ZodIssueCode.too_big,maximum:C.maxSize.value,type:"set",inclusive:!0,exact:!1,message:C.maxSize.message}),n.dirty());const b=this._def.valueType;function o(e){const a=new Set;for(const x of e){if(x.status==="aborted")return INVALID;x.status==="dirty"&&n.dirty(),a.add(x.value)}return{status:n.value,value:a}}const E=[...p.data.values()].map((e,a)=>b._parse(new ParseInputLazyPath(p,e,p.path,a)));return p.common.async?Promise.all(E).then(e=>o(e)):o(E)}min(t,n){return new ZodSet({...this._def,minSize:{value:t,message:errorUtil.toString(n)}})}max(t,n){return new ZodSet({...this._def,maxSize:{value:t,message:errorUtil.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}ZodSet.create=(m,t)=>new ZodSet({valueType:m,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ZodParsedType.function)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:n.parsedType}),INVALID;function p(E,e){return makeIssue({data:E,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(a=>!!a),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:e}})}function C(E,e){return makeIssue({data:E,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(a=>!!a),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:e}})}const b={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ZodPromise){const E=this;return OK(async function(...e){const a=new ZodError([]),x=await E._def.args.parseAsync(e,b).catch(h=>{throw a.addIssue(p(e,h)),a}),c=await Reflect.apply(o,this,x);return await E._def.returns._def.type.parseAsync(c,b).catch(h=>{throw a.addIssue(C(c,h)),a})})}else{const E=this;return OK(function(...e){const a=E._def.args.safeParse(e,b);if(!a.success)throw new ZodError([p(e,a.error)]);const x=Reflect.apply(o,this,a.data),c=E._def.returns.safeParse(x,b);if(!c.success)throw new ZodError([C(x,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ZodFunction({...this._def,args:ZodTuple.create(t).rest(ZodUnknown.create())})}returns(t){return new ZodFunction({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,p){return new ZodFunction({args:t||ZodTuple.create([]).rest(ZodUnknown.create()),returns:n||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(p)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZodLazy.create=(m,t)=>new ZodLazy({getter:m,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:t.data}}get value(){return this._def.value}}ZodLiteral.create=(m,t)=>new ZodLiteral({value:m,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});function createZodEnum(m,t){return new ZodEnum({values:m,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),p=this._def.values;return addIssueToContext(n,{expected:util.joinValues(p),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet$7(this,_ZodEnum_cache)||__classPrivateFieldSet$6(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet$7(this,_ZodEnum_cache).has(t.data)){const n=this._getOrReturnCtx(t),p=this._def.values;return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:p}),INVALID}return OK(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ZodEnum.create(t,{...this._def,...n})}exclude(t,n=this._def){return ZodEnum.create(this.options.filter(p=>!t.includes(p)),{...this._def,...n})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(t){const n=util.getValidEnumValues(this._def.values),p=this._getOrReturnCtx(t);if(p.parsedType!==ZodParsedType.string&&p.parsedType!==ZodParsedType.number){const C=util.objectValues(n);return addIssueToContext(p,{expected:util.joinValues(C),received:p.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet$7(this,_ZodNativeEnum_cache)||__classPrivateFieldSet$6(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet$7(this,_ZodNativeEnum_cache).has(t.data)){const C=util.objectValues(n);return addIssueToContext(p,{received:p.data,code:ZodIssueCode.invalid_enum_value,options:C}),INVALID}return OK(t.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(m,t)=>new ZodNativeEnum({values:m,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ZodParsedType.promise&&n.common.async===!1)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:n.parsedType}),INVALID;const p=n.parsedType===ZodParsedType.promise?n.data:Promise.resolve(n.data);return OK(p.then(C=>this._def.type.parseAsync(C,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ZodPromise.create=(m,t)=>new ZodPromise({type:m,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:p}=this._processInputParams(t),C=this._def.effect||null,b={addIssue:o=>{addIssueToContext(p,o),o.fatal?n.abort():n.dirty()},get path(){return p.path}};if(b.addIssue=b.addIssue.bind(b),C.type==="preprocess"){const o=C.transform(p.data,b);if(p.common.async)return Promise.resolve(o).then(async E=>{if(n.value==="aborted")return INVALID;const e=await this._def.schema._parseAsync({data:E,path:p.path,parent:p});return e.status==="aborted"?INVALID:e.status==="dirty"||n.value==="dirty"?DIRTY(e.value):e});{if(n.value==="aborted")return INVALID;const E=this._def.schema._parseSync({data:o,path:p.path,parent:p});return E.status==="aborted"?INVALID:E.status==="dirty"||n.value==="dirty"?DIRTY(E.value):E}}if(C.type==="refinement"){const o=E=>{const e=C.refinement(E,b);if(p.common.async)return Promise.resolve(e);if(e instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return E};if(p.common.async===!1){const E=this._def.schema._parseSync({data:p.data,path:p.path,parent:p});return E.status==="aborted"?INVALID:(E.status==="dirty"&&n.dirty(),o(E.value),{status:n.value,value:E.value})}else return this._def.schema._parseAsync({data:p.data,path:p.path,parent:p}).then(E=>E.status==="aborted"?INVALID:(E.status==="dirty"&&n.dirty(),o(E.value).then(()=>({status:n.value,value:E.value}))))}if(C.type==="transform")if(p.common.async===!1){const o=this._def.schema._parseSync({data:p.data,path:p.path,parent:p});if(!isValid(o))return o;const E=C.transform(o.value,b);if(E instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:E}}else return this._def.schema._parseAsync({data:p.data,path:p.path,parent:p}).then(o=>isValid(o)?Promise.resolve(C.transform(o.value,b)).then(E=>({status:n.value,value:E})):o);util.assertNever(C)}}ZodEffects.create=(m,t,n)=>new ZodEffects({schema:m,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(n)});ZodEffects.createWithPreprocess=(m,t,n)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:m},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(n)});class ZodOptional extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodOptional.create=(m,t)=>new ZodOptional({innerType:m,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(t){return this._getType(t)===ZodParsedType.null?OK(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodNullable.create=(m,t)=>new ZodNullable({innerType:m,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(t){const{ctx:n}=this._processInputParams(t);let p=n.data;return n.parsedType===ZodParsedType.undefined&&(p=this._def.defaultValue()),this._def.innerType._parse({data:p,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZodDefault.create=(m,t)=>new ZodDefault({innerType:m,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(t){const{ctx:n}=this._processInputParams(t),p={...n,common:{...n.common,issues:[]}},C=this._def.innerType._parse({data:p.data,path:p.path,parent:{...p}});return isAsync(C)?C.then(b=>({status:"valid",value:b.status==="valid"?b.value:this._def.catchValue({get error(){return new ZodError(p.common.issues)},input:p.data})})):{status:"valid",value:C.status==="valid"?C.value:this._def.catchValue({get error(){return new ZodError(p.common.issues)},input:p.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(m,t)=>new ZodCatch({innerType:m,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(t){if(this._getType(t)!==ZodParsedType.nan){const p=this._getOrReturnCtx(t);return addIssueToContext(p,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:p.parsedType}),INVALID}return{status:"valid",value:t.data}}}ZodNaN.create=m=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(m)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(t){const{ctx:n}=this._processInputParams(t),p=n.data;return this._def.type._parse({data:p,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(t){const{status:n,ctx:p}=this._processInputParams(t);if(p.common.async)return(async()=>{const b=await this._def.in._parseAsync({data:p.data,path:p.path,parent:p});return b.status==="aborted"?INVALID:b.status==="dirty"?(n.dirty(),DIRTY(b.value)):this._def.out._parseAsync({data:b.value,path:p.path,parent:p})})();{const C=this._def.in._parseSync({data:p.data,path:p.path,parent:p});return C.status==="aborted"?INVALID:C.status==="dirty"?(n.dirty(),{status:"dirty",value:C.value}):this._def.out._parseSync({data:C.value,path:p.path,parent:p})}}static create(t,n){return new ZodPipeline({in:t,out:n,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(t){const n=this._def.innerType._parse(t),p=C=>(isValid(C)&&(C.value=Object.freeze(C.value)),C);return isAsync(n)?n.then(C=>p(C)):p(n)}unwrap(){return this._def.innerType}}ZodReadonly.create=(m,t)=>new ZodReadonly({innerType:m,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(t)});function cleanParams(m,t){const n=typeof m=="function"?m(t):typeof m=="string"?{message:m}:m;return typeof n=="string"?{message:n}:n}function custom(m,t={},n){return m?ZodAny.create().superRefine((p,C)=>{var b,o;const E=m(p);if(E instanceof Promise)return E.then(e=>{var a,x;if(!e){const c=cleanParams(t,p),u=(x=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&x!==void 0?x:!0;C.addIssue({code:"custom",...c,fatal:u})}});if(!E){const e=cleanParams(t,p),a=(o=(b=e.fatal)!==null&&b!==void 0?b:n)!==null&&o!==void 0?o:!0;C.addIssue({code:"custom",...e,fatal:a})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(m){m.ZodString="ZodString",m.ZodNumber="ZodNumber",m.ZodNaN="ZodNaN",m.ZodBigInt="ZodBigInt",m.ZodBoolean="ZodBoolean",m.ZodDate="ZodDate",m.ZodSymbol="ZodSymbol",m.ZodUndefined="ZodUndefined",m.ZodNull="ZodNull",m.ZodAny="ZodAny",m.ZodUnknown="ZodUnknown",m.ZodNever="ZodNever",m.ZodVoid="ZodVoid",m.ZodArray="ZodArray",m.ZodObject="ZodObject",m.ZodUnion="ZodUnion",m.ZodDiscriminatedUnion="ZodDiscriminatedUnion",m.ZodIntersection="ZodIntersection",m.ZodTuple="ZodTuple",m.ZodRecord="ZodRecord",m.ZodMap="ZodMap",m.ZodSet="ZodSet",m.ZodFunction="ZodFunction",m.ZodLazy="ZodLazy",m.ZodLiteral="ZodLiteral",m.ZodEnum="ZodEnum",m.ZodEffects="ZodEffects",m.ZodNativeEnum="ZodNativeEnum",m.ZodOptional="ZodOptional",m.ZodNullable="ZodNullable",m.ZodDefault="ZodDefault",m.ZodCatch="ZodCatch",m.ZodPromise="ZodPromise",m.ZodBranded="ZodBranded",m.ZodPipeline="ZodPipeline",m.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(m,t={message:`Input not instance of ${m.name}`})=>custom(n=>n instanceof m,t),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:m=>ZodString.create({...m,coerce:!0}),number:m=>ZodNumber.create({...m,coerce:!0}),boolean:m=>ZodBoolean.create({...m,coerce:!0}),bigint:m=>ZodBigInt.create({...m,coerce:!0}),date:m=>ZodDate.create({...m,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(m,t){return _hasOwnProperty.call(m,t)}function _objectKeys(m){if(Array.isArray(m)){const n=new Array(m.length);for(let p=0;p<n.length;p++)n[p]=""+p;return n}if(Object.keys)return Object.keys(m);let t=[];for(let n in m)hasOwnProperty(m,n)&&t.push(n);return t}function _deepClone(m){switch(typeof m){case"object":return JSON.parse(JSON.stringify(m));case"undefined":return null;default:return m}}function isInteger(m){let t=0;const n=m.length;let p;for(;t<n;){if(p=m.charCodeAt(t),p>=48&&p<=57){t++;continue}return!1}return!0}function escapePathComponent(m){return m.indexOf("/")===-1&&m.indexOf("~")===-1?m:m.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(m){if(m===void 0)return!0;if(m){if(Array.isArray(m)){for(let n=0,p=m.length;n<p;n++)if(hasUndefined(m[n]))return!0}else if(typeof m=="object"){const n=_objectKeys(m),p=n.length;for(var t=0;t<p;t++)if(hasUndefined(m[n[t]]))return!0}}return!1}function patchErrorMessageFormatter(m,t){const n=[m];for(const p in t){const C=typeof t[p]=="object"?JSON.stringify(t[p],null,2):t[p];typeof C<"u"&&n.push(`${p}: ${C}`)}return n.join(`
`)}class PatchError extends Error{constructor(t,n,p,C,b){super(patchErrorMessageFormatter(t,{name:n,index:p,operation:C,tree:b})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:p}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:C}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:b}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(t,{name:n,index:p,operation:C,tree:b})}}const JsonPatchError=PatchError,objOps={add:function(m,t,n){return m[t]=this.value,{newDocument:n}},remove:function(m,t,n){var p=m[t];return delete m[t],{newDocument:n,removed:p}},replace:function(m,t,n){var p=m[t];return m[t]=this.value,{newDocument:n,removed:p}},move:function(m,t,n){let p=getValueByPointer(n,this.path);p&&(p=_deepClone(p));const C=applyOperation(n,{op:"remove",path:this.from}).removed;return applyOperation(n,{op:"add",path:this.path,value:C}),{newDocument:n,removed:p}},copy:function(m,t,n){const p=getValueByPointer(n,this.from);return applyOperation(n,{op:"add",path:this.path,value:_deepClone(p)}),{newDocument:n}},test:function(m,t,n){return{newDocument:n,test:_areEquals(m[t],this.value)}},_get:function(m,t,n){return this.value=m[t],{newDocument:n}}};var arrOps={add:function(m,t,n){return isInteger(t)?m.splice(t,0,this.value):m[t]=this.value,{newDocument:n,index:t}},remove:function(m,t,n){var p=m.splice(t,1);return{newDocument:n,removed:p[0]}},replace:function(m,t,n){var p=m[t];return m[t]=this.value,{newDocument:n,removed:p}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(m,t){if(t=="")return m;var n={op:"_get",path:t};return applyOperation(m,n),n.value}function applyOperation(m,t,n=!1,p=!0,C=!0,b=0){if(n&&(typeof n=="function"?n(t,0,m,t.path):validator(t,0)),t.path===""){let o={newDocument:m};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=m,o;if(t.op==="move"||t.op==="copy")return o.newDocument=getValueByPointer(m,t.from),t.op==="move"&&(o.removed=m),o;if(t.op==="test"){if(o.test=_areEquals(m,t.value),o.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",b,t,m);return o.newDocument=m,o}else{if(t.op==="remove")return o.removed=m,o.newDocument=null,o;if(t.op==="_get")return t.value=m,o;if(n)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",b,t,m);return o}}else{p||(m=_deepClone(m));const E=(t.path||"").split("/");let e=m,a=1,x=E.length,c,u,h;for(typeof n=="function"?h=n:h=validator;;){if(u=E[a],u&&u.indexOf("~")!=-1&&(u=unescapePathComponent(u)),C&&(u=="__proto__"||u=="prototype"&&a>0&&E[a-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&c===void 0&&(e[u]===void 0?c=E.slice(0,a).join("/"):a==x-1&&(c=t.path),c!==void 0&&h(t,0,m,c)),a++,Array.isArray(e)){if(u==="-")u=e.length;else{if(n&&!isInteger(u))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",b,t,m);isInteger(u)&&(u=~~u)}if(a>=x){if(n&&t.op==="add"&&u>e.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",b,t,m);const s=arrOps[t.op].call(t,e,u,m);if(s.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",b,t,m);return s}}else if(a>=x){const s=objOps[t.op].call(t,e,u,m);if(s.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",b,t,m);return s}if(e=e[u],n&&a<x&&(!e||typeof e!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",b,t,m)}}}function applyPatch(m,t,n,p=!0,C=!0){if(n&&!Array.isArray(t))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");p||(m=_deepClone(m));const b=new Array(t.length);for(let o=0,E=t.length;o<E;o++)b[o]=applyOperation(m,t[o],n,!0,C,o),m=b[o].newDocument;return b.newDocument=m,b}function validator(m,t,n,p){if(typeof m!="object"||m===null||Array.isArray(m))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,m,n);if(objOps[m.op]){if(typeof m.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,m,n);if(m.path.indexOf("/")!==0&&m.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,m,n);if((m.op==="move"||m.op==="copy")&&typeof m.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,m,n);if((m.op==="add"||m.op==="replace"||m.op==="test")&&m.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,m,n);if((m.op==="add"||m.op==="replace"||m.op==="test")&&hasUndefined(m.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,m,n);if(n){if(m.op=="add"){var C=m.path.split("/").length,b=p.split("/").length;if(C!==b+1&&C!==b)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,m,n)}else if(m.op==="replace"||m.op==="remove"||m.op==="_get"){if(m.path!==p)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,m,n)}else if(m.op==="move"||m.op==="copy"){var o={op:"_get",path:m.from,value:void 0},E=validate([o],n);if(E&&E.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,m,n)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,m,n)}function validate(m,t,n){try{if(!Array.isArray(m))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)applyPatch(_deepClone(t),_deepClone(m),n||!0);else{n=n||validator;for(var p=0;p<m.length;p++)n(m[p],p,t,void 0)}}catch(C){if(C instanceof JsonPatchError)return C;throw C}}function _areEquals(m,t){if(m===t)return!0;if(m&&t&&typeof m=="object"&&typeof t=="object"){var n=Array.isArray(m),p=Array.isArray(t),C,b,o;if(n&&p){if(b=m.length,b!=t.length)return!1;for(C=b;C--!==0;)if(!_areEquals(m[C],t[C]))return!1;return!0}if(n!=p)return!1;var E=Object.keys(m);if(b=E.length,b!==Object.keys(t).length)return!1;for(C=b;C--!==0;)if(!t.hasOwnProperty(E[C]))return!1;for(C=b;C--!==0;)if(o=E[C],!_areEquals(m[o],t[o]))return!1;return!0}return m!==m&&t!==t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function _generate(m,t,n,p,C){if(t!==m){typeof t.toJSON=="function"&&(t=t.toJSON());for(var b=_objectKeys(t),o=_objectKeys(m),E=!1,e=o.length-1;e>=0;e--){var a=o[e],x=m[a];if(hasOwnProperty(t,a)&&!(t[a]===void 0&&x!==void 0&&Array.isArray(t)===!1)){var c=t[a];typeof x=="object"&&x!=null&&typeof c=="object"&&c!=null&&Array.isArray(x)===Array.isArray(c)?_generate(x,c,n,p+"/"+escapePathComponent(a),C):x!==c&&(C&&n.push({op:"test",path:p+"/"+escapePathComponent(a),value:_deepClone(x)}),n.push({op:"replace",path:p+"/"+escapePathComponent(a),value:_deepClone(c)}))}else Array.isArray(m)===Array.isArray(t)?(C&&n.push({op:"test",path:p+"/"+escapePathComponent(a),value:_deepClone(x)}),n.push({op:"remove",path:p+"/"+escapePathComponent(a)}),E=!0):(C&&n.push({op:"test",path:p,value:m}),n.push({op:"replace",path:p,value:t}))}if(!(!E&&b.length==o.length))for(var e=0;e<b.length;e++){var a=b[e];!hasOwnProperty(m,a)&&t[a]!==void 0&&n.push({op:"add",path:p+"/"+escapePathComponent(a),value:_deepClone(t[a])})}}}function compare(m,t,n=!1){var p=[];return _generate(m,t,p,"",n),p}class MockAsyncLocalStorage{getStore(){}run(t,n){return n()}enterWith(t){}}const mockAsyncLocalStorage=new MockAsyncLocalStorage,LC_CHILD_KEY=Symbol.for("lc:child_config");class AsyncLocalStorageProvider{getInstance(){return getGlobalAsyncLocalStorageInstance()??mockAsyncLocalStorage}getRunnableConfig(){var n,p;return(p=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:p[LC_CHILD_KEY]}runWithConfig(t,n,p){var x;const C=CallbackManager._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),b=this.getInstance(),o=b.getStore(),E=C==null?void 0:C.getParentRunId(),e=(x=C==null?void 0:C.handlers)==null?void 0:x.find(c=>(c==null?void 0:c.name)==="langchain_tracer");let a;return e&&E?a=e.convertToRunTree(E):p||(a=new RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),a&&(a.extra={...a.extra,[LC_CHILD_KEY]:t}),o!==void 0&&o[_CONTEXT_VARIABLES_KEY]!==void 0&&(a===void 0&&(a={}),a[_CONTEXT_VARIABLES_KEY]=o[_CONTEXT_VARIABLES_KEY]),b.run(a,n)}initializeGlobalInstance(t){getGlobalAsyncLocalStorageInstance()===void 0&&setGlobalAsyncLocalStorageInstance(t)}}const AsyncLocalStorageProviderSingleton=new AsyncLocalStorageProvider,DEFAULT_RECURSION_LIMIT$1=25;async function getCallbackManagerForConfig(m){return CallbackManager._configureSync(m==null?void 0:m.callbacks,void 0,m==null?void 0:m.tags,void 0,m==null?void 0:m.metadata)}function mergeConfigs(...m){const t={};for(const n of m.filter(p=>!!p))for(const p of Object.keys(n))if(p==="metadata")t[p]={...t[p],...n[p]};else if(p==="tags"){const C=t[p]??[];t[p]=[...new Set(C.concat(n[p]??[]))]}else if(p==="configurable")t[p]={...t[p],...n[p]};else if(p==="timeout")t.timeout===void 0?t.timeout=n.timeout:n.timeout!==void 0&&(t.timeout=Math.min(t.timeout,n.timeout));else if(p==="signal")t.signal===void 0?t.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,n.signal]):t.signal=n.signal);else if(p==="callbacks"){const C=t.callbacks,b=n.callbacks;if(Array.isArray(b))if(!C)t.callbacks=b;else if(Array.isArray(C))t.callbacks=C.concat(b);else{const o=C.copy();for(const E of b)o.addHandler(ensureHandler(E),!0);t.callbacks=o}else if(b)if(!C)t.callbacks=b;else if(Array.isArray(C)){const o=b.copy();for(const E of C)o.addHandler(ensureHandler(E),!0);t.callbacks=o}else t.callbacks=new CallbackManager(b._parentRunId,{handlers:C.handlers.concat(b.handlers),inheritableHandlers:C.inheritableHandlers.concat(b.inheritableHandlers),tags:Array.from(new Set(C.tags.concat(b.tags))),inheritableTags:Array.from(new Set(C.inheritableTags.concat(b.inheritableTags))),metadata:{...C.metadata,...b.metadata}})}else{const C=p;t[C]=n[C]??t[C]}return t}const PRIMITIVES=new Set(["string","number","boolean"]);function ensureConfig(m){var p;const t=AsyncLocalStorageProviderSingleton.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:C,runName:b,...o}=t;n=Object.entries(o).reduce((E,[e,a])=>(a!==void 0&&(E[e]=a),E),n)}if(m&&(n=Object.entries(m).reduce((C,[b,o])=>(o!==void 0&&(C[b]=o),C),n)),n!=null&&n.configurable)for(const C of Object.keys(n.configurable))PRIMITIVES.has(typeof n.configurable[C])&&!((p=n.metadata)!=null&&p[C])&&(n.metadata||(n.metadata={}),n.metadata[C]=n.configurable[C]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const C=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,C])):n.signal=C,delete n.timeout}return n}function patchConfig(m={},{callbacks:t,maxConcurrency:n,recursionLimit:p,runName:C,configurable:b,runId:o}={}){const E=ensureConfig(m);return t!==void 0&&(delete E.runName,E.callbacks=t),p!==void 0&&(E.recursionLimit=p),n!==void 0&&(E.maxConcurrency=n),C!==void 0&&(E.runName=C),b!==void 0&&(E.configurable={...E.configurable,...b}),o!==void 0&&delete E.runId,E}function pickRunnableConfigKeys(m){return m?{configurable:m.configurable,recursionLimit:m.recursionLimit,callbacks:m.callbacks,tags:m.tags,metadata:m.metadata,maxConcurrency:m.maxConcurrency,timeout:m.timeout,signal:m.signal}:void 0}async function raceWithSignal(m,t){if(t===void 0)return m;let n;return Promise.race([m.catch(p=>{if(!(t!=null&&t.aborted))throw p}),new Promise((p,C)=>{n=()=>{C(new Error("Aborted"))},t.addEventListener("abort",n),t.aborted&&C(new Error("Aborted"))})]).finally(()=>t.removeEventListener("abort",n))}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const t=await this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}}async return(){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}return{done:!0,value:void 0}}async throw(t){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw t}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){const n=t.getReader();return new IterableReadableStream({start(p){return C();function C(){return n.read().then(({done:b,value:o})=>{if(b){p.close();return}return p.enqueue(o),C()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(t){return new IterableReadableStream({async pull(n){const{value:p,done:C}=await t.next();C&&n.close(),n.enqueue(p)},async cancel(n){await t.return(n)}})}}function atee(m,t=2){const n=Array.from({length:t},()=>[]);return n.map(async function*(C){for(;;)if(C.length===0){const b=await m.next();for(const o of n)o.push(b)}else{if(C[0].done)return;yield C.shift().value}})}function concat(m,t){if(Array.isArray(m)&&Array.isArray(t))return m.concat(t);if(typeof m=="string"&&typeof t=="string")return m+t;if(typeof m=="number"&&typeof t=="number")return m+t;if("concat"in m&&typeof m.concat=="function")return m.concat(t);if(typeof m=="object"&&typeof t=="object"){const n={...m};for(const[p,C]of Object.entries(t))p in n&&!Array.isArray(n[p])?n[p]=concat(n[p],C):n[p]=C;return n}else throw new Error(`Cannot concat ${typeof m} and ${typeof t}`)}class AsyncGeneratorWithSetup{constructor(t){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=t.generator,this.config=t.config,this.signal=t.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((p,C)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(p,C):this.firstResult.then(b=>p(void 0),C)},!0)})}async next(...t){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(this.config),this.signal?async()=>raceWithSignal(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function pipeGeneratorWithSetup(m,t,n,p,...C){const b=new AsyncGeneratorWithSetup({generator:t,startSetup:n,signal:p}),o=await b.setup;return{output:m(b,o,...C),setup:o}}class RunLogPatch{constructor(t){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=t.ops??[]}concat(t){const n=this.ops.concat(t.ops),p=applyPatch({},n);return new RunLog({ops:n,state:p[p.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(t){super(t),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=t.state}concat(t){const n=this.ops.concat(t.ops),p=applyPatch(this.state,t.ops);return new RunLog({ops:n,state:p[p.length-1].newDocument})}static fromRunLogPatch(t){const n=applyPatch({},t.ops);return new RunLog({ops:t.ops,state:n[n.length-1].newDocument})}}const isLogStreamHandler=m=>m.name==="log_stream_tracer";async function _getStandardizedInputs(m,t){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=m;if(["retriever","llm","prompt"].includes(m.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function _getStandardizedOutputs(m,t){const{outputs:n}=m;return t==="original"||["retriever","llm","prompt"].includes(m.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function isChatGenerationChunk$1(m){return m!==void 0&&m.message!==void 0}class LogStreamCallbackHandler extends BaseTracer{constructor(t){super({_awaitHandler:!0,...t}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this._schemaFormat=(t==null?void 0:t._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){if(t.id===this.rootId)return!1;const n=t.tags??[];let p=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(p=p||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(p=p||this.includeTypes.includes(t.run_type)),this.includeTags!==void 0&&(p=p||n.find(C=>{var b;return(b=this.includeTags)==null?void 0:b.includes(C)})!==void 0),this.excludeNames!==void 0&&(p=p&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(p=p&&!this.excludeTypes.includes(t.run_type)),this.excludeTags!==void 0&&(p=p&&n.every(C=>{var b;return!((b=this.excludeTags)!=null&&b.includes(C))})),p}async*tapOutputIterable(t,n){for await(const p of n){if(t!==this.rootId){const C=this.keyMapByRunId[t];C&&await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${C}/streamed_output/-`,value:p}]}))}yield p}}async onRunCreate(t){var C;if(this.rootId===void 0&&(this.rootId=t.id,await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:t.id,name:t.name,type:t.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(t))return;this.counterMapByRunName[t.name]===void 0&&(this.counterMapByRunName[t.name]=0),this.counterMapByRunName[t.name]+=1;const n=this.counterMapByRunName[t.name];this.keyMapByRunId[t.id]=n===1?t.name:`${t.name}:${n}`;const p={id:t.id,name:t.name,type:t.run_type,tags:t.tags??[],metadata:((C=t.extra)==null?void 0:C.metadata)??{},start_time:new Date(t.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(p.inputs=await _getStandardizedInputs(t,this._schemaFormat)),await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[t.id]}`,value:p}]}))}async onRunUpdate(t){try{const n=this.keyMapByRunId[t.id];if(n===void 0)return;const p=[];this._schemaFormat==="streaming_events"&&p.push({op:"replace",path:`/logs/${n}/inputs`,value:await _getStandardizedInputs(t,this._schemaFormat)}),p.push({op:"add",path:`/logs/${n}/final_output`,value:await _getStandardizedOutputs(t,this._schemaFormat)}),t.end_time!==void 0&&p.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(t.end_time).toISOString()});const C=new RunLogPatch({ops:p});await this.writer.write(C)}finally{if(t.id===this.rootId){const n=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:await _getStandardizedOutputs(t,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(t,n,p){const C=this.keyMapByRunId[t.id];if(C===void 0)return;const b=t.inputs.messages!==void 0;let o;b?isChatGenerationChunk$1(p==null?void 0:p.chunk)?o=p==null?void 0:p.chunk:o=new AIMessageChunk({id:`run-${t.id}`,content:n}):o=n;const E=new RunLogPatch({ops:[{op:"add",path:`/logs/${C}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${C}/streamed_output/-`,value:o}]});await this.writer.write(E)}}const RUN_KEY="__run";class GenerationChunk{constructor(t){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new GenerationChunk({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}}class ChatGenerationChunk extends GenerationChunk{constructor(t){super(t),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=t.message}concat(t){return new ChatGenerationChunk({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo},message:this.message.concat(t.message)})}}function assignName({name:m,serialized:t}){return m!==void 0?m:(t==null?void 0:t.name)!==void 0?t.name:(t==null?void 0:t.id)!==void 0&&Array.isArray(t==null?void 0:t.id)?t.id[t.id.length-1]:"Unnamed"}const isStreamEventsHandler=m=>m.name==="event_stream_tracer";class EventStreamCallbackHandler extends BaseTracer{constructor(t){super({_awaitHandler:!0,...t}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){const n=t.tags??[];let p=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(p=p||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(p=p||this.includeTypes.includes(t.runType)),this.includeTags!==void 0&&(p=p||n.find(C=>{var b;return(b=this.includeTags)==null?void 0:b.includes(C)})!==void 0),this.excludeNames!==void 0&&(p=p&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(p=p&&!this.excludeTypes.includes(t.runType)),this.excludeTags!==void 0&&(p=p&&n.every(C=>{var b;return!((b=this.excludeTags)!=null&&b.includes(C))})),p}async*tapOutputIterable(t,n){const p=await n.next();if(p.done)return;const C=this.runInfoMap.get(t);if(C===void 0){yield p.value;return}function b(E,e){return E==="llm"&&typeof e=="string"?new GenerationChunk({text:e}):e}let o=this.tappedPromises.get(t);if(o===void 0){let E;o=new Promise(e=>{E=e}),this.tappedPromises.set(t,o);try{const e={event:`on_${C.runType}_stream`,run_id:t,name:C.name,tags:C.tags,metadata:C.metadata,data:{}};await this.send({...e,data:{chunk:b(C.runType,p.value)}},C),yield p.value;for await(const a of n)C.runType!=="tool"&&C.runType!=="retriever"&&await this.send({...e,data:{chunk:b(C.runType,a)}},C),yield a}finally{E()}}else{yield p.value;for await(const E of n)yield E}}async send(t,n){this._includeRun(n)&&await this.writer.write(t)}async sendEndEvent(t,n){const p=this.tappedPromises.get(t.run_id);p!==void 0?p.then(()=>{this.send(t,n)}):await this.send(t,n)}async onLLMStart(t){var o,E;const n=assignName(t),p=t.inputs.messages!==void 0?"chat_model":"llm",C={tags:t.tags??[],metadata:((o=t.extra)==null?void 0:o.metadata)??{},name:n,runType:p,inputs:t.inputs};this.runInfoMap.set(t.id,C);const b=`on_${p}_start`;await this.send({event:b,data:{input:t.inputs},name:n,tags:t.tags??[],run_id:t.id,metadata:((E=t.extra)==null?void 0:E.metadata)??{}},C)}async onLLMNewToken(t,n,p){const C=this.runInfoMap.get(t.id);let b,o;if(C===void 0)throw new Error(`onLLMNewToken: Run ID ${t.id} not found in run map.`);if(this.runInfoMap.size!==1){if(C.runType==="chat_model")o="on_chat_model_stream",(p==null?void 0:p.chunk)===void 0?b=new AIMessageChunk({content:n,id:`run-${t.id}`}):b=p.chunk.message;else if(C.runType==="llm")o="on_llm_stream",(p==null?void 0:p.chunk)===void 0?b=new GenerationChunk({text:n}):b=p.chunk;else throw new Error(`Unexpected run type ${C.runType}`);await this.send({event:o,data:{chunk:b},run_id:t.id,name:C.name,tags:C.tags,metadata:C.metadata},C)}}async onLLMEnd(t){var o,E,e;const n=this.runInfoMap.get(t.id);this.runInfoMap.delete(t.id);let p;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${t.id} not found in run map.`);const C=(o=t.outputs)==null?void 0:o.generations;let b;if(n.runType==="chat_model"){for(const a of C??[]){if(b!==void 0)break;b=(E=a[0])==null?void 0:E.message}p="on_chat_model_end"}else if(n.runType==="llm")b={generations:C==null?void 0:C.map(a=>a.map(x=>({text:x.text,generationInfo:x.generationInfo}))),llmOutput:((e=t.outputs)==null?void 0:e.llmOutput)??{}},p="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:p,data:{output:b,input:n.inputs},run_id:t.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(t){var o,E;const n=assignName(t),p=t.run_type??"chain",C={tags:t.tags??[],metadata:((o=t.extra)==null?void 0:o.metadata)??{},name:n,runType:t.run_type};let b={};t.inputs.input===""&&Object.keys(t.inputs).length===1?(b={},C.inputs={}):t.inputs.input!==void 0?(b.input=t.inputs.input,C.inputs=t.inputs.input):(b.input=t.inputs,C.inputs=t.inputs),this.runInfoMap.set(t.id,C),await this.send({event:`on_${p}_start`,data:b,name:n,tags:t.tags??[],run_id:t.id,metadata:((E=t.extra)==null?void 0:E.metadata)??{}},C)}async onChainEnd(t){var E;const n=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),n===void 0)throw new Error(`onChainEnd: Run ID ${t.id} not found in run map.`);const p=`on_${t.run_type}_end`,C=t.inputs??n.inputs??{},o={output:((E=t.outputs)==null?void 0:E.output)??t.outputs,input:C};C.input&&Object.keys(C).length===1&&(o.input=C.input,n.inputs=C.input),await this.sendEndEvent({event:p,data:o,run_id:t.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(t){var C,b;const n=assignName(t),p={tags:t.tags??[],metadata:((C=t.extra)==null?void 0:C.metadata)??{},name:n,runType:"tool",inputs:t.inputs??{}};this.runInfoMap.set(t.id,p),await this.send({event:"on_tool_start",data:{input:t.inputs??{}},name:n,run_id:t.id,tags:t.tags??[],metadata:((b=t.extra)==null?void 0:b.metadata)??{}},p)}async onToolEnd(t){var C;const n=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),n===void 0)throw new Error(`onToolEnd: Run ID ${t.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${t.id} is a tool call, and is expected to have traced inputs.`);const p=((C=t.outputs)==null?void 0:C.output)===void 0?t.outputs:t.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:p,input:n.inputs},run_id:t.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(t){var b,o;const n=assignName(t),C={tags:t.tags??[],metadata:((b=t.extra)==null?void 0:b.metadata)??{},name:n,runType:"retriever",inputs:{query:t.inputs.query}};this.runInfoMap.set(t.id,C),await this.send({event:"on_retriever_start",data:{input:{query:t.inputs.query}},name:n,tags:t.tags??[],run_id:t.id,metadata:((o=t.extra)==null?void 0:o.metadata)??{}},C)}async onRetrieverEnd(t){var p;const n=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${t.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((p=t.outputs)==null?void 0:p.documents)??t.outputs,input:n.inputs},run_id:t.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(t,n,p){const C=this.runInfoMap.get(p);if(C===void 0)throw new Error(`handleCustomEvent: Run ID ${p} not found in run map.`);await this.send({event:"on_custom_event",run_id:p,name:t,tags:C.tags,metadata:C.metadata,data:n},C)}async finish(){const t=[...this.tappedPromises.values()];Promise.all(t).finally(()=>{this.writer.close()})}}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler=m=>{var n,p;if(m.message.startsWith("Cancel")||m.message.startsWith("AbortError")||m.name==="AbortError"||(m==null?void 0:m.code)==="ECONNABORTED")throw m;const t=((n=m==null?void 0:m.response)==null?void 0:n.status)??(m==null?void 0:m.status);if(t&&STATUS_NO_RETRY.includes(+t))throw m;if(((p=m==null?void 0:m.error)==null?void 0:p.code)==="insufficient_quota"){const C=new Error(m==null?void 0:m.message);throw C.name="InsufficientQuotaError",C}};class AsyncCaller{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??defaultFailedAttemptHandler;const n="default"in PQueueMod?PQueueMod.default:PQueueMod;this.queue=new n({concurrency:this.maxConcurrency})}call(t,...n){return this.queue.add(()=>pRetry(()=>t(...n).catch(p=>{throw p instanceof Error?p:new Error(p)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,n,...p){return t.signal?Promise.race([this.call(n,...p),new Promise((C,b)=>{var o;(o=t.signal)==null||o.addEventListener("abort",()=>{b(new Error("AbortError"))})})]):this.call(n,...p)}fetch(...t){return this.call(()=>fetch(...t).then(n=>n.ok?n:Promise.reject(n)))}}class RootListenersTracer extends BaseTracer{constructor({config:t,onStart:n,onEnd:p,onError:C}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=n,this.argOnEnd=p,this.argOnError=C}persistRun(t){return Promise.resolve()}async onRunCreate(t){this.rootId||(this.rootId=t.id,this.argOnStart&&await this.argOnStart(t,this.config))}async onRunUpdate(t){t.id===this.rootId&&(t.error?this.argOnError&&await this.argOnError(t,this.config):this.argOnEnd&&await this.argOnEnd(t,this.config))}}function isRunnableInterface(m){return m?m.lc_runnable:!1}class _RootEventFilter{constructor(t){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,n){let p=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const C=t.tags??[];return this.includeNames!==void 0&&(p=p||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(p=p||this.includeTypes.includes(n)),this.includeTags!==void 0&&(p=p||C.some(b=>{var o;return(o=this.includeTags)==null?void 0:o.includes(b)})),this.excludeNames!==void 0&&(p=p&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(p=p&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(p=p&&C.every(b=>{var o;return!((o=this.excludeTags)!=null&&o.includes(b))})),p}}const ignoreOverride$1=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions$1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions$1=m=>({...defaultOptions$1,...m}),getRefs$1=m=>{const t=getDefaultOptions$1(m),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([p,C])=>[C._def,{def:C._def,path:[...t.basePath,t.definitionPath,p],jsonSchema:void 0}]))}};function addErrorMessage$1(m,t,n,p){p!=null&&p.errorMessages&&n&&(m.errorMessage={...m.errorMessage,[t]:n})}function setResponseValueAndErrors$1(m,t,n,p,C){m[t]=n,addErrorMessage$1(m,t,p,C)}function parseAnyDef$1(){return{}}function parseArrayDef$1(m,t){var p,C,b;const n={type:"array"};return(p=m.type)!=null&&p._def&&((b=(C=m.type)==null?void 0:C._def)==null?void 0:b.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(n.items=parseDef$1(m.type._def,{...t,currentPath:[...t.currentPath,"items"]})),m.minLength&&setResponseValueAndErrors$1(n,"minItems",m.minLength.value,m.minLength.message,t),m.maxLength&&setResponseValueAndErrors$1(n,"maxItems",m.maxLength.value,m.maxLength.message,t),m.exactLength&&(setResponseValueAndErrors$1(n,"minItems",m.exactLength.value,m.exactLength.message,t),setResponseValueAndErrors$1(n,"maxItems",m.exactLength.value,m.exactLength.message,t)),n}function parseBigintDef$1(m,t){const n={type:"integer",format:"int64"};if(!m.checks)return n;for(const p of m.checks)switch(p.kind){case"min":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors$1(n,"minimum",p.value,p.message,t):setResponseValueAndErrors$1(n,"exclusiveMinimum",p.value,p.message,t):(p.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors$1(n,"minimum",p.value,p.message,t));break;case"max":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors$1(n,"maximum",p.value,p.message,t):setResponseValueAndErrors$1(n,"exclusiveMaximum",p.value,p.message,t):(p.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors$1(n,"maximum",p.value,p.message,t));break;case"multipleOf":setResponseValueAndErrors$1(n,"multipleOf",p.value,p.message,t);break}return n}function parseBooleanDef$1(){return{type:"boolean"}}function parseBrandedDef$1(m,t){return parseDef$1(m.type._def,t)}const parseCatchDef$1=(m,t)=>parseDef$1(m.innerType._def,t);function parseDateDef$1(m,t,n){const p=n??t.dateStrategy;if(Array.isArray(p))return{anyOf:p.map((C,b)=>parseDateDef$1(m,t,C))};switch(p){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser$1(m,t)}}const integerDateParser$1=(m,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const p of m.checks)switch(p.kind){case"min":setResponseValueAndErrors$1(n,"minimum",p.value,p.message,t);break;case"max":setResponseValueAndErrors$1(n,"maximum",p.value,p.message,t);break}return n};function parseDefaultDef$1(m,t){return{...parseDef$1(m.innerType._def,t),default:m.defaultValue()}}function parseEffectsDef$1(m,t){return t.effectStrategy==="input"?parseDef$1(m.schema._def,t):{}}function parseEnumDef$1(m){return{type:"string",enum:Array.from(m.values)}}const isJsonSchema7AllOfType$1=m=>"type"in m&&m.type==="string"?!1:"allOf"in m;function parseIntersectionDef$1(m,t){const n=[parseDef$1(m.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),parseDef$1(m.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(b=>!!b);let p=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const C=[];return n.forEach(b=>{if(isJsonSchema7AllOfType$1(b))C.push(...b.allOf),b.unevaluatedProperties===void 0&&(p=void 0);else{let o=b;if("additionalProperties"in b&&b.additionalProperties===!1){const{additionalProperties:E,...e}=b;o=e}else p=void 0;C.push(o)}}),C.length?{allOf:C,...p}:void 0}function parseLiteralDef$1(m,t){const n=typeof m.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(m.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[m.value]}:{type:n==="bigint"?"integer":n,const:m.value}}let emojiRegex$1;const zodPatterns$1={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex$1===void 0&&(emojiRegex$1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex$1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef$1(m,t){const n={type:"string"};if(m.checks)for(const p of m.checks)switch(p.kind){case"min":setResponseValueAndErrors$1(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,p.value):p.value,p.message,t);break;case"max":setResponseValueAndErrors$1(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,p.value):p.value,p.message,t);break;case"email":switch(t.emailStrategy){case"format:email":addFormat$1(n,"email",p.message,t);break;case"format:idn-email":addFormat$1(n,"idn-email",p.message,t);break;case"pattern:zod":addPattern$1(n,zodPatterns$1.email,p.message,t);break}break;case"url":addFormat$1(n,"uri",p.message,t);break;case"uuid":addFormat$1(n,"uuid",p.message,t);break;case"regex":addPattern$1(n,p.regex,p.message,t);break;case"cuid":addPattern$1(n,zodPatterns$1.cuid,p.message,t);break;case"cuid2":addPattern$1(n,zodPatterns$1.cuid2,p.message,t);break;case"startsWith":addPattern$1(n,RegExp(`^${escapeLiteralCheckValue(p.value,t)}`),p.message,t);break;case"endsWith":addPattern$1(n,RegExp(`${escapeLiteralCheckValue(p.value,t)}$`),p.message,t);break;case"datetime":addFormat$1(n,"date-time",p.message,t);break;case"date":addFormat$1(n,"date",p.message,t);break;case"time":addFormat$1(n,"time",p.message,t);break;case"duration":addFormat$1(n,"duration",p.message,t);break;case"length":setResponseValueAndErrors$1(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,p.value):p.value,p.message,t),setResponseValueAndErrors$1(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,p.value):p.value,p.message,t);break;case"includes":{addPattern$1(n,RegExp(escapeLiteralCheckValue(p.value,t)),p.message,t);break}case"ip":{p.version!=="v6"&&addFormat$1(n,"ipv4",p.message,t),p.version!=="v4"&&addFormat$1(n,"ipv6",p.message,t);break}case"base64url":addPattern$1(n,zodPatterns$1.base64url,p.message,t);break;case"jwt":addPattern$1(n,zodPatterns$1.jwt,p.message,t);break;case"cidr":{p.version!=="v6"&&addPattern$1(n,zodPatterns$1.ipv4Cidr,p.message,t),p.version!=="v4"&&addPattern$1(n,zodPatterns$1.ipv6Cidr,p.message,t);break}case"emoji":addPattern$1(n,zodPatterns$1.emoji(),p.message,t);break;case"ulid":{addPattern$1(n,zodPatterns$1.ulid,p.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{addFormat$1(n,"binary",p.message,t);break}case"contentEncoding:base64":{setResponseValueAndErrors$1(n,"contentEncoding","base64",p.message,t);break}case"pattern:zod":{addPattern$1(n,zodPatterns$1.base64,p.message,t);break}}break}case"nanoid":addPattern$1(n,zodPatterns$1.nanoid,p.message,t)}return n}function escapeLiteralCheckValue(m,t){return t.patternStrategy==="escape"?escapeNonAlphaNumeric$1(m):m}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric$1(m){let t="";for(let n=0;n<m.length;n++)ALPHA_NUMERIC.has(m[n])||(t+="\\"),t+=m[n];return t}function addFormat$1(m,t,n,p){var C;m.format||(C=m.anyOf)!=null&&C.some(b=>b.format)?(m.anyOf||(m.anyOf=[]),m.format&&(m.anyOf.push({format:m.format,...m.errorMessage&&p.errorMessages&&{errorMessage:{format:m.errorMessage.format}}}),delete m.format,m.errorMessage&&(delete m.errorMessage.format,Object.keys(m.errorMessage).length===0&&delete m.errorMessage)),m.anyOf.push({format:t,...n&&p.errorMessages&&{errorMessage:{format:n}}})):setResponseValueAndErrors$1(m,"format",t,n,p)}function addPattern$1(m,t,n,p){var C;m.pattern||(C=m.allOf)!=null&&C.some(b=>b.pattern)?(m.allOf||(m.allOf=[]),m.pattern&&(m.allOf.push({pattern:m.pattern,...m.errorMessage&&p.errorMessages&&{errorMessage:{pattern:m.errorMessage.pattern}}}),delete m.pattern,m.errorMessage&&(delete m.errorMessage.pattern,Object.keys(m.errorMessage).length===0&&delete m.errorMessage)),m.allOf.push({pattern:stringifyRegExpWithFlags(t,p),...n&&p.errorMessages&&{errorMessage:{pattern:n}}})):setResponseValueAndErrors$1(m,"pattern",stringifyRegExpWithFlags(t,p),n,p)}function stringifyRegExpWithFlags(m,t){var e;if(!t.applyRegexFlags||!m.flags)return m.source;const n={i:m.flags.includes("i"),m:m.flags.includes("m"),s:m.flags.includes("s")},p=n.i?m.source.toLowerCase():m.source;let C="",b=!1,o=!1,E=!1;for(let a=0;a<p.length;a++){if(b){C+=p[a],b=!1;continue}if(n.i){if(o){if(p[a].match(/[a-z]/)){E?(C+=p[a],C+=`${p[a-2]}-${p[a]}`.toUpperCase(),E=!1):p[a+1]==="-"&&((e=p[a+2])!=null&&e.match(/[a-z]/))?(C+=p[a],E=!0):C+=`${p[a]}${p[a].toUpperCase()}`;continue}}else if(p[a].match(/[a-z]/)){C+=`[${p[a]}${p[a].toUpperCase()}]`;continue}}if(n.m){if(p[a]==="^"){C+=`(^|(?<=[\r
]))`;continue}else if(p[a]==="$"){C+=`($|(?=[\r
]))`;continue}}if(n.s&&p[a]==="."){C+=o?`${p[a]}\r
`:`[${p[a]}\r
]`;continue}C+=p[a],p[a]==="\\"?b=!0:o&&p[a]==="]"?o=!1:!o&&p[a]==="["&&(o=!0)}try{new RegExp(C)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),m.source}return C}function parseRecordDef$1(m,t){var p,C,b,o,E,e;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((p=m.keyType)==null?void 0:p._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:m.keyType._def.values,properties:m.keyType._def.values.reduce((a,x)=>({...a,[x]:parseDef$1(m.valueType._def,{...t,currentPath:[...t.currentPath,"properties",x]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:parseDef$1(m.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return n;if(((C=m.keyType)==null?void 0:C._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((b=m.keyType._def.checks)!=null&&b.length)){const{type:a,...x}=parseStringDef$1(m.keyType._def,t);return{...n,propertyNames:x}}else{if(((o=m.keyType)==null?void 0:o._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...n,propertyNames:{enum:m.keyType._def.values}};if(((E=m.keyType)==null?void 0:E._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&m.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((e=m.keyType._def.type._def.checks)!=null&&e.length)){const{type:a,...x}=parseBrandedDef$1(m.keyType._def,t);return{...n,propertyNames:x}}}return n}function parseMapDef$1(m,t){if(t.mapStrategy==="record")return parseRecordDef$1(m,t);const n=parseDef$1(m.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},p=parseDef$1(m.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,p],minItems:2,maxItems:2}}}function parseNativeEnumDef$1(m){const t=m.values,p=Object.keys(m.values).filter(b=>typeof t[t[b]]!="number").map(b=>t[b]),C=Array.from(new Set(p.map(b=>typeof b)));return{type:C.length===1?C[0]==="string"?"string":"number":["string","number"],enum:p}}function parseNeverDef$1(){return{not:{}}}function parseNullDef$1(m){return m.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings$1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef$1(m,t){if(t.target==="openApi3")return asAnyOf$1(m,t);const n=m.options instanceof Map?Array.from(m.options.values()):m.options;if(n.every(p=>p._def.typeName in primitiveMappings$1&&(!p._def.checks||!p._def.checks.length))){const p=n.reduce((C,b)=>{const o=primitiveMappings$1[b._def.typeName];return o&&!C.includes(o)?[...C,o]:C},[]);return{type:p.length>1?p:p[0]}}else if(n.every(p=>p._def.typeName==="ZodLiteral"&&!p.description)){const p=n.reduce((C,b)=>{const o=typeof b._def.value;switch(o){case"string":case"number":case"boolean":return[...C,o];case"bigint":return[...C,"integer"];case"object":if(b._def.value===null)return[...C,"null"];case"symbol":case"undefined":case"function":default:return C}},[]);if(p.length===n.length){const C=p.filter((b,o,E)=>E.indexOf(b)===o);return{type:C.length>1?C:C[0],enum:n.reduce((b,o)=>b.includes(o._def.value)?b:[...b,o._def.value],[])}}}else if(n.every(p=>p._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((p,C)=>[...p,...C._def.values.filter(b=>!p.includes(b))],[])};return asAnyOf$1(m,t)}const asAnyOf$1=(m,t)=>{const n=(m.options instanceof Map?Array.from(m.options.values()):m.options).map((p,C)=>parseDef$1(p._def,{...t,currentPath:[...t.currentPath,"anyOf",`${C}`]})).filter(p=>!!p&&(!t.strictUnions||typeof p=="object"&&Object.keys(p).length>0));return n.length?{anyOf:n}:void 0};function parseNullableDef$1(m,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(m.innerType._def.typeName)&&(!m.innerType._def.checks||!m.innerType._def.checks.length))return t.target==="openApi3"?{type:primitiveMappings$1[m.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings$1[m.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const p=parseDef$1(m.innerType._def,{...t,currentPath:[...t.currentPath]});return p&&"$ref"in p?{allOf:[p],nullable:!0}:p&&{...p,nullable:!0}}const n=parseDef$1(m.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function parseNumberDef$1(m,t){const n={type:"number"};if(!m.checks)return n;for(const p of m.checks)switch(p.kind){case"int":n.type="integer",addErrorMessage$1(n,"type",p.message,t);break;case"min":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors$1(n,"minimum",p.value,p.message,t):setResponseValueAndErrors$1(n,"exclusiveMinimum",p.value,p.message,t):(p.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors$1(n,"minimum",p.value,p.message,t));break;case"max":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors$1(n,"maximum",p.value,p.message,t):setResponseValueAndErrors$1(n,"exclusiveMaximum",p.value,p.message,t):(p.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors$1(n,"maximum",p.value,p.message,t));break;case"multipleOf":setResponseValueAndErrors$1(n,"multipleOf",p.value,p.message,t);break}return n}function decideAdditionalProperties$1(m,t){return t.removeAdditionalStrategy==="strict"?m.catchall._def.typeName==="ZodNever"?m.unknownKeys!=="strict":parseDef$1(m.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:m.catchall._def.typeName==="ZodNever"?m.unknownKeys==="passthrough":parseDef$1(m.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function parseObjectDef$1(m,t){const n=t.target==="openAi",p={type:"object",...Object.entries(m.shape()).reduce((C,[b,o])=>{if(o===void 0||o._def===void 0)return C;let E=o.isOptional();E&&n&&(o instanceof ZodOptional&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),E=!1);const e=parseDef$1(o._def,{...t,currentPath:[...t.currentPath,"properties",b],propertyPath:[...t.currentPath,"properties",b]});return e===void 0?C:{properties:{...C.properties,[b]:e},required:E?C.required:[...C.required,b]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties$1(m,t)};return p.required.length||delete p.required,p}const parseOptionalDef$1=(m,t)=>{var p;if(t.currentPath.toString()===((p=t.propertyPath)==null?void 0:p.toString()))return parseDef$1(m.innerType._def,t);const n=parseDef$1(m.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},parsePipelineDef$1=(m,t)=>{if(t.pipeStrategy==="input")return parseDef$1(m.in._def,t);if(t.pipeStrategy==="output")return parseDef$1(m.out._def,t);const n=parseDef$1(m.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),p=parseDef$1(m.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,p].filter(C=>C!==void 0)}};function parsePromiseDef$1(m,t){return parseDef$1(m.type._def,t)}function parseSetDef$1(m,t){const p={type:"array",uniqueItems:!0,items:parseDef$1(m.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return m.minSize&&setResponseValueAndErrors$1(p,"minItems",m.minSize.value,m.minSize.message,t),m.maxSize&&setResponseValueAndErrors$1(p,"maxItems",m.maxSize.value,m.maxSize.message,t),p}function parseTupleDef$1(m,t){return m.rest?{type:"array",minItems:m.items.length,items:m.items.map((n,p)=>parseDef$1(n._def,{...t,currentPath:[...t.currentPath,"items",`${p}`]})).reduce((n,p)=>p===void 0?n:[...n,p],[]),additionalItems:parseDef$1(m.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:m.items.length,maxItems:m.items.length,items:m.items.map((n,p)=>parseDef$1(n._def,{...t,currentPath:[...t.currentPath,"items",`${p}`]})).reduce((n,p)=>p===void 0?n:[...n,p],[])}}function parseUndefinedDef$1(){return{not:{}}}function parseUnknownDef$1(){return{}}const parseReadonlyDef$1=(m,t)=>parseDef$1(m.innerType._def,t),selectParser$1=(m,t,n)=>{switch(t){case ZodFirstPartyTypeKind.ZodString:return parseStringDef$1(m,n);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef$1(m,n);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef$1(m,n);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef$1(m,n);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef$1();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef$1(m,n);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef$1();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef$1(n);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef$1(m,n);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef$1(m,n);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef$1(m,n);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef$1(m,n);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef$1(m,n);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef$1(m,n);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef$1(m);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef$1(m);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef$1(m,n);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef$1(m,n);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef$1(m,n);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef$1(m,n);case ZodFirstPartyTypeKind.ZodLazy:return()=>m.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef$1(m,n);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef$1();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef$1(m,n);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef$1();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef$1();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef$1(m,n);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef$1(m,n);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef$1(m,n);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef$1(m,n);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef$1(m,n);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(p=>{})()}};function parseDef$1(m,t,n=!1){var E;const p=t.seen.get(m);if(t.override){const e=(E=t.override)==null?void 0:E.call(t,m,t,p,n);if(e!==ignoreOverride$1)return e}if(p&&!n){const e=get$ref$1(p,t);if(e!==void 0)return e}const C={def:m,path:t.currentPath,jsonSchema:void 0};t.seen.set(m,C);const b=selectParser$1(m,m.typeName,t),o=typeof b=="function"?parseDef$1(b(),t):b;if(o&&addMeta$1(m,t,o),t.postProcess){const e=t.postProcess(o,m,t);return C.jsonSchema=o,e}return C.jsonSchema=o,o}const get$ref$1=(m,t)=>{switch(t.$refStrategy){case"root":return{$ref:m.path.join("/")};case"relative":return{$ref:getRelativePath$1(t.currentPath,m.path)};case"none":case"seen":return m.path.length<t.currentPath.length&&m.path.every((n,p)=>t.currentPath[p]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},getRelativePath$1=(m,t)=>{let n=0;for(;n<m.length&&n<t.length&&m[n]===t[n];n++);return[(m.length-n).toString(),...t.slice(n)].join("/")},addMeta$1=(m,t,n)=>(m.description&&(n.description=m.description,t.markdownDescription&&(n.markdownDescription=m.description)),n),zodToJsonSchema$2=(m,t)=>{const n=getRefs$1(t),p=void 0,C=t==null?void 0:t.name,b=parseDef$1(m._def,n,!1)??{},o=C===void 0?p?{...b,[n.definitionPath]:p}:b:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,C].join("/"),[n.definitionPath]:{...p,[C]:b}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};function _escapeNodeLabel(m){return m.replace(/[^a-zA-Z-_0-9]/g,"_")}const MARKDOWN_SPECIAL_CHARS=["*","_","`"];function _generateMermaidGraphStyles(m){let t="";for(const[n,p]of Object.entries(m))t+=`	classDef ${n} ${p};
`;return t}function drawMermaid(m,t,n){const{firstNode:p,lastNode:C,nodeColors:b,withStyles:o=!0,curveStyle:E="linear",wrapLabelNWords:e=9}=n??{};let a=o?`%%{init: {'flowchart': {'curve': '${E}'}}}%%
graph TD;
`:`graph TD;
`;if(o){const h="default",s={[h]:"{0}({1})"};p!==void 0&&(s[p]="{0}([{1}]):::first"),C!==void 0&&(s[C]="{0}([{1}]):::last");for(const[l,v]of Object.entries(m)){const d=v.name.split(":").pop()??"";let y=MARKDOWN_SPECIAL_CHARS.some(T=>d.startsWith(T)&&d.endsWith(T))?`<p>${d}</p>`:d;Object.keys(v.metadata??{}).length&&(y+=`<hr/><small><em>${Object.entries(v.metadata??{}).map(([T,w])=>`${T} = ${w}`).join(`
`)}</em></small>`);const S=(s[l]??s[h]).replace("{0}",_escapeNodeLabel(l)).replace("{1}",y);a+=`	${S}
`}}const x={};for(const h of t){const s=h.source.split(":"),l=h.target.split(":"),v=s.filter((d,g)=>d===l[g]).join(":");x[v]||(x[v]=[]),x[v].push(h)}const c=new Set;function u(h,s){const l=h.length===1&&h[0].source===h[0].target;if(s&&!l){const v=s.split(":").pop();if(c.has(v))throw new Error(`Found duplicate subgraph '${v}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);c.add(v),a+=`	subgraph ${v}
`}for(const v of h){const{source:d,target:g,data:y,conditional:S}=v;let T="";if(y!==void 0){let w=y;const P=w.split(" ");P.length>e&&(w=Array.from({length:Math.ceil(P.length/e)},(A,R)=>P.slice(R*e,(R+1)*e).join(" ")).join("&nbsp;<br>&nbsp;")),T=S?` -. &nbsp;${w}&nbsp; .-> `:` -- &nbsp;${w}&nbsp; --> `}else T=S?" -.-> ":" --> ";a+=`	${_escapeNodeLabel(d)}${T}${_escapeNodeLabel(g)};
`}for(const v in x)v.startsWith(`${s}:`)&&v!==s&&u(x[v],v);s&&!l&&(a+=`	end
`)}u(x[""]??[],"");for(const h in x)!h.includes(":")&&h!==""&&u(x[h],h);return o&&(a+=_generateMermaidGraphStyles(b??{})),a}async function drawMermaidPng(m,t){let{backgroundColor:n="white"}=t??{};const p=btoa(m);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const C=`https://mermaid.ink/img/${p}?bgColor=${n}`,b=await fetch(C);if(!b.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${b.status}`,`Status text: ${b.statusText}`].join(`
`));return await b.blob()}function nodeDataStr(m,t){if(m!==void 0&&!validate$1(m))return m;if(isRunnableInterface(t))try{let n=t.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return t.getName()}else return t.name??"UnknownSchema"}function nodeDataJson(m){return isRunnableInterface(m.data)?{type:"runnable",data:{id:m.data.lc_id,name:m.data.getName()}}:{type:"schema",data:{...zodToJsonSchema$2(m.data.schema),title:m.data.name}}}let Graph$1=class wu{constructor(t){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(t==null?void 0:t.nodes)??this.nodes,this.edges=(t==null?void 0:t.edges)??this.edges}toJSON(){const t={};return Object.values(this.nodes).forEach((n,p)=>{t[n.id]=validate$1(n.id)?p:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:t[n.id],...nodeDataJson(n)})),edges:this.edges.map(n=>{const p={source:t[n.source],target:t[n.target]};return typeof n.data<"u"&&(p.data=n.data),typeof n.conditional<"u"&&(p.conditional=n.conditional),p})}}addNode(t,n,p){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const C=n??v4(),b={id:C,data:t,name:nodeDataStr(n,t),metadata:p};return this.nodes[C]=b,b}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(n=>n.source!==t.id&&n.target!==t.id)}addEdge(t,n,p,C){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const b={source:t.id,target:n.id,data:p,conditional:C};return this.edges.push(b),b}firstNode(){return _firstNode(this)}lastNode(){return _lastNode(this)}extend(t,n=""){let p=n;Object.values(t.nodes).map(a=>a.id).every(validate$1)&&(p="");const b=a=>p?`${p}:${a}`:a;Object.entries(t.nodes).forEach(([a,x])=>{this.nodes[b(a)]={...x,id:b(a)}});const o=t.edges.map(a=>({...a,source:b(a.source),target:b(a.target)}));this.edges=[...this.edges,...o];const E=t.firstNode(),e=t.lastNode();return[E?{id:b(E.id),data:E.data}:void 0,e?{id:b(e.id),data:e.data}:void 0]}trimFirstNode(){const t=this.firstNode();t&&_firstNode(this,[t.id])&&this.removeNode(t)}trimLastNode(){const t=this.lastNode();t&&_lastNode(this,[t.id])&&this.removeNode(t)}reid(){const t=Object.fromEntries(Object.values(this.nodes).map(C=>[C.id,C.name])),n=new Map;Object.values(t).forEach(C=>{n.set(C,(n.get(C)||0)+1)});const p=C=>{const b=t[C];return validate$1(C)&&n.get(b)===1?b:C};return new wu({nodes:Object.fromEntries(Object.entries(this.nodes).map(([C,b])=>[p(C),{...b,id:p(C)}])),edges:this.edges.map(C=>({...C,source:p(C.source),target:p(C.target)}))})}drawMermaid(t){const{withStyles:n,curveStyle:p,nodeColors:C={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:b}=t??{},o=this.reid(),E=o.firstNode(),e=o.lastNode();return drawMermaid(o.nodes,o.edges,{firstNode:E==null?void 0:E.id,lastNode:e==null?void 0:e.id,withStyles:n,curveStyle:p,nodeColors:C,wrapLabelNWords:b})}async drawMermaidPng(t){const n=this.drawMermaid(t);return drawMermaidPng(n,{backgroundColor:t==null?void 0:t.backgroundColor})}};function _firstNode(m,t=[]){const n=new Set(m.edges.filter(C=>!t.includes(C.source)).map(C=>C.target)),p=[];for(const C of Object.values(m.nodes))!t.includes(C.id)&&!n.has(C.id)&&p.push(C);return p.length===1?p[0]:void 0}function _lastNode(m,t=[]){const n=new Set(m.edges.filter(C=>!t.includes(C.target)).map(C=>C.source)),p=[];for(const C of Object.values(m.nodes))!t.includes(C.id)&&!n.has(C.id)&&p.push(C);return p.length===1?p[0]:void 0}function convertToHttpEventStream(m){const t=new TextEncoder,n=new ReadableStream({async start(p){for await(const C of m)p.enqueue(t.encode(`event: data
data: ${JSON.stringify(C)}

`));p.enqueue(t.encode(`event: end

`)),p.close()}});return IterableReadableStream.fromReadableStream(n)}function isIterableIterator(m){return typeof m=="object"&&m!==null&&typeof m[Symbol.iterator]=="function"&&typeof m.next=="function"}const isIterator=m=>m!=null&&typeof m=="object"&&"next"in m&&typeof m.next=="function";function isAsyncIterable(m){return typeof m=="object"&&m!==null&&typeof m[Symbol.asyncIterator]=="function"}function*consumeIteratorInContext(m,t){for(;;){const{value:n,done:p}=AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(m),t.next.bind(t),!0);if(p)break;yield n}}async function*consumeAsyncIterableInContext(m,t){const n=t[Symbol.asyncIterator]();for(;;){const{value:p,done:C}=await AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(m),n.next.bind(t),!0);if(C)break;yield p}}function _coerceToDict$1(m,t){return m&&!Array.isArray(m)&&!(m instanceof Date)&&typeof m=="object"?m:{[t]:m}}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(t){const n=this.name??this.constructor.lc_name()??this.constructor.name;return t?`${n}${t}`:n}bind(t){return new RunnableBinding({bound:this,kwargs:t,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(t){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:t==null?void 0:t.stopAfterAttempt,...t})}withConfig(t){return new RunnableBinding({bound:this,config:t,kwargs:{}})}withFallbacks(t){const n=Array.isArray(t)?t:t.fallbacks;return new RunnableWithFallbacks({runnable:this,fallbacks:n})}_getOptionsList(t,n=0){if(Array.isArray(t)&&t.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${t.length} options for ${n} inputs`);if(Array.isArray(t))return t.map(ensureConfig);if(n>1&&!Array.isArray(t)&&t.runId){console.warn("Provided runId will be used only for the first element of the batch.");const p=Object.fromEntries(Object.entries(t).filter(([C])=>C!=="runId"));return Array.from({length:n},(C,b)=>ensureConfig(b===0?t:p))}return Array.from({length:n},()=>ensureConfig(t))}async batch(t,n,p){var e;const C=this._getOptionsList(n??{},t.length),b=((e=C[0])==null?void 0:e.maxConcurrency)??(p==null?void 0:p.maxConcurrency),o=new AsyncCaller({maxConcurrency:b,onFailedAttempt:a=>{throw a}}),E=t.map((a,x)=>o.call(async()=>{try{return await this.invoke(a,C[x])}catch(c){if(p!=null&&p.returnExceptions)return c;throw c}}));return Promise.all(E)}async*_streamIterator(t,n){yield this.invoke(t,n)}async stream(t,n){const p=ensureConfig(n),C=new AsyncGeneratorWithSetup({generator:this._streamIterator(t,p),config:p});return await C.setup,IterableReadableStream.fromAsyncGenerator(C)}_separateRunnableConfigFromCallOptions(t){let n;t===void 0?n=ensureConfig(t):n=ensureConfig({callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,runName:t.runName,configurable:t.configurable,recursionLimit:t.recursionLimit,maxConcurrency:t.maxConcurrency,runId:t.runId,timeout:t.timeout,signal:t.signal});const p={...t};return delete p.callbacks,delete p.tags,delete p.metadata,delete p.runName,delete p.configurable,delete p.recursionLimit,delete p.maxConcurrency,delete p.runId,delete p.timeout,delete p.signal,[n,p]}async _callWithConfig(t,n,p){const C=ensureConfig(p),b=await getCallbackManagerForConfig(C),o=await(b==null?void 0:b.handleChainStart(this.toJSON(),_coerceToDict$1(n,"input"),C.runId,C==null?void 0:C.runType,void 0,void 0,(C==null?void 0:C.runName)??this.getName()));delete C.runId;let E;try{const e=t.call(this,n,C,o);E=await raceWithSignal(e,p==null?void 0:p.signal)}catch(e){throw await(o==null?void 0:o.handleChainError(e)),e}return await(o==null?void 0:o.handleChainEnd(_coerceToDict$1(E,"output"))),E}async _batchWithConfig(t,n,p,C){var a;const b=this._getOptionsList(p??{},n.length),o=await Promise.all(b.map(getCallbackManagerForConfig)),E=await Promise.all(o.map(async(x,c)=>{const u=await(x==null?void 0:x.handleChainStart(this.toJSON(),_coerceToDict$1(n[c],"input"),b[c].runId,b[c].runType,void 0,void 0,b[c].runName??this.getName()));return delete b[c].runId,u}));let e;try{const x=t.call(this,n,b,E,C);e=await raceWithSignal(x,(a=b==null?void 0:b[0])==null?void 0:a.signal)}catch(x){throw await Promise.all(E.map(c=>c==null?void 0:c.handleChainError(x))),x}return await Promise.all(E.map(x=>x==null?void 0:x.handleChainEnd(_coerceToDict$1(e,"output")))),e}async*_transformStreamWithConfig(t,n,p){let C,b=!0,o,E=!0;const e=ensureConfig(p),a=await getCallbackManagerForConfig(e);async function*x(){for await(const u of t){if(b)if(C===void 0)C=u;else try{C=concat(C,u)}catch{C=void 0,b=!1}yield u}}let c;try{const u=await pipeGeneratorWithSetup(n.bind(this),x(),async()=>a==null?void 0:a.handleChainStart(this.toJSON(),{input:""},e.runId,e.runType,void 0,void 0,e.runName??this.getName()),p==null?void 0:p.signal,e);delete e.runId,c=u.setup;const h=c==null?void 0:c.handlers.find(isStreamEventsHandler);let s=u.output;h!==void 0&&c!==void 0&&(s=h.tapOutputIterable(c.runId,s));const l=c==null?void 0:c.handlers.find(isLogStreamHandler);l!==void 0&&c!==void 0&&(s=l.tapOutputIterable(c.runId,s));for await(const v of s)if(yield v,E)if(o===void 0)o=v;else try{o=concat(o,v)}catch{o=void 0,E=!1}}catch(u){throw await(c==null?void 0:c.handleChainError(u,void 0,void 0,void 0,{inputs:_coerceToDict$1(C,"input")})),u}await(c==null?void 0:c.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:_coerceToDict$1(C,"input")}))}getGraph(t){const n=new Graph$1,p=n.addNode({name:`${this.getName()}Input`,schema:z.any()}),C=n.addNode(this),b=n.addNode({name:`${this.getName()}Output`,schema:z.any()});return n.addEdge(p,C),n.addEdge(C,b),n}pipe(t){return new RunnableSequence({first:this,last:_coerceToRunnable(t)})}pick(t){return this.pipe(new RunnablePick(t))}assign(t){return this.pipe(new RunnableAssign(new RunnableMap({steps:t})))}async*transform(t,n){let p;for await(const C of t)p===void 0?p=C:p=concat(p,C);yield*this._streamIterator(p,ensureConfig(n))}async*streamLog(t,n,p){const C=new LogStreamCallbackHandler({...p,autoClose:!1,_schemaFormat:"original"}),b=ensureConfig(n);yield*this._streamLog(t,C,b)}async*_streamLog(t,n,p){const{callbacks:C}=p;if(C===void 0)p.callbacks=[n];else if(Array.isArray(C))p.callbacks=C.concat([n]);else{const e=C.copy();e.addHandler(n,!0),p.callbacks=e}const b=this.stream(t,p);async function o(){try{const e=await b;for await(const a of e){const x=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:a}]});await n.writer.write(x)}}finally{await n.writer.close()}}const E=o();try{for await(const e of n)yield e}finally{await E}}streamEvents(t,n,p){let C;if(n.version==="v1")C=this._streamEventsV1(t,n,p);else if(n.version==="v2")C=this._streamEventsV2(t,n,p);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?convertToHttpEventStream(C):IterableReadableStream.fromAsyncGenerator(C)}async*_streamEventsV2(t,n,p){var s;const C=new EventStreamCallbackHandler({...p,autoClose:!1}),b=ensureConfig(n),o=b.runId??v4();b.runId=o;const E=b.callbacks;if(E===void 0)b.callbacks=[C];else if(Array.isArray(E))b.callbacks=E.concat(C);else{const l=E.copy();l.addHandler(C,!0),b.callbacks=l}const e=new AbortController,a=this;async function x(){try{let l;n!=null&&n.signal?"any"in AbortSignal?l=AbortSignal.any([e.signal,n.signal]):(l=n.signal,n.signal.addEventListener("abort",()=>{e.abort()},{once:!0})):l=e.signal;const v=await a.stream(t,{...b,signal:l}),d=C.tapOutputIterable(o,v);for await(const g of d)if(e.signal.aborted)break}finally{await C.finish()}}const c=x();let u=!1,h;try{for await(const l of C){if(!u){l.data.input=t,u=!0,h=l.run_id,yield l;continue}l.run_id===h&&l.event.endsWith("_end")&&(s=l.data)!=null&&s.input&&delete l.data.input,yield l}}finally{e.abort(),await c}}async*_streamEventsV1(t,n,p){let C,b=!1;const o=ensureConfig(n),E=o.tags??[],e=o.metadata??{},a=o.runName??this.getName(),x=new LogStreamCallbackHandler({...p,autoClose:!1,_schemaFormat:"streaming_events"}),c=new _RootEventFilter({...p}),u=this._streamLog(t,x,o);for await(const s of u){if(C?C=C.concat(s):C=RunLog.fromRunLogPatch(s),C.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!b){b=!0;const g={...C.state},y={run_id:g.id,event:`on_${g.type}_start`,name:a,tags:E,metadata:e,data:{input:t}};c.includeEvent(y,g.type)&&(yield y)}const l=s.ops.filter(g=>g.path.startsWith("/logs/")).map(g=>g.path.split("/")[2]),v=[...new Set(l)];for(const g of v){let y,S={};const T=C.state.logs[g];if(T.end_time===void 0?T.streamed_output.length>0?y="stream":y="start":y="end",y==="start")T.inputs!==void 0&&(S.input=T.inputs);else if(y==="end")T.inputs!==void 0&&(S.input=T.inputs),S.output=T.final_output;else if(y==="stream"){const w=T.streamed_output.length;if(w!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${w} instead. Encountered in: "${T.name}"`);S={chunk:T.streamed_output[0]},T.streamed_output=[]}yield{event:`on_${T.type}_${y}`,name:T.name,run_id:T.id,tags:T.tags,metadata:T.metadata,data:S}}const{state:d}=C;if(d.streamed_output.length>0){const g=d.streamed_output.length;if(g!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${g} instead. Encountered in: "${d.name}"`);const y={chunk:d.streamed_output[0]};d.streamed_output=[];const S={event:`on_${d.type}_stream`,run_id:d.id,tags:E,metadata:e,name:a,data:y};c.includeEvent(S,d.type)&&(yield S)}}const h=C==null?void 0:C.state;if(h!==void 0){const s={event:`on_${h.type}_end`,name:a,run_id:h.id,tags:E,metadata:e,data:{output:h.final_output}};c.includeEvent(s,h.type)&&(yield s)}}static isRunnable(t){return isRunnableInterface(t)}withListeners({onStart:t,onEnd:n,onError:p}){return new RunnableBinding({bound:this,config:{},configFactories:[C=>({callbacks:[new RootListenersTracer({config:C,onStart:t,onEnd:n,onError:p})]})]})}asTool(t){return convertRunnableToTool(this,t)}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}async _mergeConfig(...t){const n=mergeConfigs(this.config,...t);return mergeConfigs(n,...this.configFactories?await Promise.all(this.configFactories.map(async p=>await p(n))):[])}bind(t){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...t},config:this.config})}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...t}})}withRetry(t){return new this.constructor({bound:this.bound.withRetry(t),kwargs:this.kwargs,config:this.config})}async invoke(t,n){return this.bound.invoke(t,await this._mergeConfig(ensureConfig(n),this.kwargs))}async batch(t,n,p){const C=Array.isArray(n)?await Promise.all(n.map(async b=>this._mergeConfig(ensureConfig(b),this.kwargs))):await this._mergeConfig(ensureConfig(n),this.kwargs);return this.bound.batch(t,C,p)}async*_streamIterator(t,n){yield*this.bound._streamIterator(t,await this._mergeConfig(ensureConfig(n),this.kwargs))}async stream(t,n){return this.bound.stream(t,await this._mergeConfig(ensureConfig(n),this.kwargs))}async*transform(t,n){yield*this.bound.transform(t,await this._mergeConfig(ensureConfig(n),this.kwargs))}streamEvents(t,n,p){const C=this,b=async function*(){yield*C.bound.streamEvents(t,{...await C._mergeConfig(ensureConfig(n),C.kwargs),version:n.version},p)};return IterableReadableStream.fromAsyncGenerator(b())}static isRunnableBinding(t){return t.bound&&Runnable.isRunnable(t.bound)}withListeners({onStart:t,onEnd:n,onError:p}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[C=>({callbacks:[new RootListenersTracer({config:C,onStart:t,onEnd:n,onError:p})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound}bind(t){return new RunnableEach({bound:this.bound.bind(t)})}async invoke(t,n){return this._callWithConfig(this._invoke.bind(this),t,n)}async _invoke(t,n,p){return this.bound.batch(t,patchConfig(n,{callbacks:p==null?void 0:p.getChild()}))}withListeners({onStart:t,onEnd:n,onError:p}){return new RunnableEach({bound:this.bound.withListeners({onStart:t,onEnd:n,onError:p})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=t.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=t.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(t,n,p){const C=t>1?`retry:attempt:${t}`:void 0;return patchConfig(n,{callbacks:p==null?void 0:p.getChild(C)})}async _invoke(t,n,p){return pRetry(C=>super.invoke(t,this._patchConfigForRetry(C,n,p)),{onFailedAttempt:C=>this.onFailedAttempt(C,t),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(t,n){return this._callWithConfig(this._invoke.bind(this),t,n)}async _batch(t,n,p,C){const b={};try{await pRetry(async o=>{const E=t.map((u,h)=>h).filter(u=>b[u.toString()]===void 0||b[u.toString()]instanceof Error),e=E.map(u=>t[u]),a=E.map(u=>this._patchConfigForRetry(o,n==null?void 0:n[u],p==null?void 0:p[u])),x=await super.batch(e,a,{...C,returnExceptions:!0});let c;for(let u=0;u<x.length;u+=1){const h=x[u],s=E[u];h instanceof Error&&c===void 0&&(c=h,c.input=e[u]),b[s.toString()]=h}if(c)throw c;return x},{onFailedAttempt:o=>this.onFailedAttempt(o,o.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(o){if((C==null?void 0:C.returnExceptions)!==!0)throw o}return Object.keys(b).sort((o,E)=>parseInt(o,10)-parseInt(E,10)).map(o=>b[parseInt(o,10)])}async batch(t,n,p){return this._batchWithConfig(this._batch.bind(this),t,n,p)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(t){super(t),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name,this.omitSequenceTags=t.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(t,n){var e;const p=ensureConfig(n),C=await getCallbackManagerForConfig(p),b=await(C==null?void 0:C.handleChainStart(this.toJSON(),_coerceToDict$1(t,"input"),p.runId,void 0,void 0,void 0,p==null?void 0:p.runName));delete p.runId;let o=t,E;try{const a=[this.first,...this.middle];for(let x=0;x<a.length;x+=1){const u=a[x].invoke(o,patchConfig(p,{callbacks:b==null?void 0:b.getChild(this.omitSequenceTags?void 0:`seq:step:${x+1}`)}));o=await raceWithSignal(u,n==null?void 0:n.signal)}if((e=n==null?void 0:n.signal)!=null&&e.aborted)throw new Error("Aborted");E=await this.last.invoke(o,patchConfig(p,{callbacks:b==null?void 0:b.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(a){throw await(b==null?void 0:b.handleChainError(a)),a}return await(b==null?void 0:b.handleChainEnd(_coerceToDict$1(E,"output"))),E}async batch(t,n,p){var e;const C=this._getOptionsList(n??{},t.length),b=await Promise.all(C.map(getCallbackManagerForConfig)),o=await Promise.all(b.map(async(a,x)=>{const c=await(a==null?void 0:a.handleChainStart(this.toJSON(),_coerceToDict$1(t[x],"input"),C[x].runId,void 0,void 0,void 0,C[x].runName));return delete C[x].runId,c}));let E=t;try{for(let a=0;a<this.steps.length;a+=1){const c=this.steps[a].batch(E,o.map((u,h)=>{const s=u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${a+1}`);return patchConfig(C[h],{callbacks:s})}),p);E=await raceWithSignal(c,(e=C[0])==null?void 0:e.signal)}}catch(a){throw await Promise.all(o.map(x=>x==null?void 0:x.handleChainError(a))),a}return await Promise.all(o.map(a=>a==null?void 0:a.handleChainEnd(_coerceToDict$1(E,"output")))),E}async*_streamIterator(t,n){var c;const p=await getCallbackManagerForConfig(n),{runId:C,...b}=n??{},o=await(p==null?void 0:p.handleChainStart(this.toJSON(),_coerceToDict$1(t,"input"),C,void 0,void 0,void 0,b==null?void 0:b.runName)),E=[this.first,...this.middle,this.last];let e=!0,a;async function*x(){yield t}try{let u=E[0].transform(x(),patchConfig(b,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let h=1;h<E.length;h+=1)u=await E[h].transform(u,patchConfig(b,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));for await(const h of u)if((c=n==null?void 0:n.signal)==null||c.throwIfAborted(),yield h,e)if(a===void 0)a=h;else try{a=concat(a,h)}catch{a=void 0,e=!1}}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}await(o==null?void 0:o.handleChainEnd(_coerceToDict$1(a,"output")))}getGraph(t){const n=new Graph$1;let p=null;return this.steps.forEach((C,b)=>{const o=C.getGraph(t);b!==0&&o.trimFirstNode(),b!==this.steps.length-1&&o.trimLastNode(),n.extend(o);const E=o.firstNode();if(!E)throw new Error(`Runnable ${C} has no first node`);p&&n.addEdge(p,E),p=o.lastNode()}),n}pipe(t){return RunnableSequence.isRunnableSequence(t)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&Runnable.isRunnable(t)}static from([t,...n],p){let C={};return typeof p=="string"?C.name=p:p!==void 0&&(C=p),new RunnableSequence({...C,first:_coerceToRunnable(t),middle:n.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(n[n.length-1])})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,p]of Object.entries(t.steps))this.steps[n]=_coerceToRunnable(p)}static from(t){return new RunnableMap({steps:t})}async invoke(t,n){const p=ensureConfig(n),C=await getCallbackManagerForConfig(p),b=await(C==null?void 0:C.handleChainStart(this.toJSON(),{input:t},p.runId,void 0,void 0,void 0,p==null?void 0:p.runName));delete p.runId;const o={};try{const E=Object.entries(this.steps).map(async([e,a])=>{o[e]=await a.invoke(t,patchConfig(p,{callbacks:b==null?void 0:b.getChild(`map:key:${e}`)}))});await raceWithSignal(Promise.all(E),n==null?void 0:n.signal)}catch(E){throw await(b==null?void 0:b.handleChainError(E)),E}return await(b==null?void 0:b.handleChainEnd(o)),o}async*_transform(t,n,p){const C={...this.steps},b=atee(t,Object.keys(C).length),o=new Map(Object.entries(C).map(([E,e],a)=>{const x=e.transform(b[a],patchConfig(p,{callbacks:n==null?void 0:n.getChild(`map:key:${E}`)}));return[E,x.next().then(c=>({key:E,gen:x,result:c}))]}));for(;o.size;){const E=Promise.race(o.values()),{key:e,result:a,gen:x}=await raceWithSignal(E,p==null?void 0:p.signal);o.delete(e),a.done||(yield{[e]:a.value},o.set(e,x.next().then(c=>({key:e,gen:x,result:c}))))}}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*p(){yield t}const C=ensureConfig(n),b=new AsyncGeneratorWithSetup({generator:this.transform(p(),C),config:C});return await b.setup,IterableReadableStream.fromAsyncGenerator(b)}}class RunnableTraceable extends Runnable{constructor(t){if(super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!isTraceableFunction(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}async invoke(t,n){const[p]=this._getOptionsList(n??{},1),C=await getCallbackManagerForConfig(p),b=this.func(patchConfig(p,{callbacks:C}),t);return raceWithSignal(b,p==null?void 0:p.signal)}async*_streamIterator(t,n){var b,o;const[p]=this._getOptionsList(n??{},1),C=await this.invoke(t,n);if(isAsyncIterable(C)){for await(const E of C)(b=p==null?void 0:p.signal)==null||b.throwIfAborted(),yield E;return}if(isIterator(C)){for(;;){(o=p==null?void 0:p.signal)==null||o.throwIfAborted();const E=C.next();if(E.done)break;yield E.value}return}yield C}static from(t){return new RunnableTraceable({func:t})}}function assertNonTraceableFunction(m){if(isTraceableFunction(m))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(t){if(isTraceableFunction(t.func))return RunnableTraceable.from(t.func);super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),assertNonTraceableFunction(t.func),this.func=t.func}static from(t){return new RunnableLambda({func:t})}async _invoke(t,n,p){return new Promise((C,b)=>{const o=patchConfig(n,{callbacks:p==null?void 0:p.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??DEFAULT_RECURSION_LIMIT$1)-1});AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(o),async()=>{var E,e;try{let a=await this.func(t,{...o});if(a&&Runnable.isRunnable(a)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");a=await a.invoke(t,{...o,recursionLimit:(o.recursionLimit??DEFAULT_RECURSION_LIMIT$1)-1})}else if(isAsyncIterable(a)){let x;for await(const c of consumeAsyncIterableInContext(o,a))if((E=n==null?void 0:n.signal)==null||E.throwIfAborted(),x===void 0)x=c;else try{x=concat(x,c)}catch{x=c}a=x}else if(isIterableIterator(a)){let x;for(const c of consumeIteratorInContext(o,a))if((e=n==null?void 0:n.signal)==null||e.throwIfAborted(),x===void 0)x=c;else try{x=concat(x,c)}catch{x=c}a=x}C(a)}catch(a){b(a)}})})}async invoke(t,n){return this._callWithConfig(this._invoke.bind(this),t,n)}async*_transform(t,n,p){var E,e;let C;for await(const a of t)if(C===void 0)C=a;else try{C=concat(C,a)}catch{C=a}const b=patchConfig(p,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((p==null?void 0:p.recursionLimit)??DEFAULT_RECURSION_LIMIT$1)-1}),o=await new Promise((a,x)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(b),async()=>{try{const c=await this.func(C,{...b,config:b});a(c)}catch(c){x(c)}})});if(o&&Runnable.isRunnable(o)){if((p==null?void 0:p.recursionLimit)===0)throw new Error("Recursion limit reached.");const a=await o.stream(C,b);for await(const x of a)yield x}else if(isAsyncIterable(o))for await(const a of consumeAsyncIterableInContext(b,o))(E=p==null?void 0:p.signal)==null||E.throwIfAborted(),yield a;else if(isIterableIterator(o))for(const a of consumeIteratorInContext(b,o))(e=p==null?void 0:p.signal)==null||e.throwIfAborted(),yield a;else yield o}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*p(){yield t}const C=ensureConfig(n),b=new AsyncGeneratorWithSetup({generator:this.transform(p(),C),config:C});return await b.setup,IterableReadableStream.fromAsyncGenerator(b)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=t.runnable,this.fallbacks=t.fallbacks}*runnables(){yield this.runnable;for(const t of this.fallbacks)yield t}async invoke(t,n){const p=ensureConfig(n),C=await getCallbackManagerForConfig(p),{runId:b,...o}=p,E=await(C==null?void 0:C.handleChainStart(this.toJSON(),_coerceToDict$1(t,"input"),b,void 0,void 0,void 0,o==null?void 0:o.runName)),e=patchConfig(o,{callbacks:E==null?void 0:E.getChild()});return await AsyncLocalStorageProviderSingleton.runWithConfig(e,async()=>{var c;let x;for(const u of this.runnables()){(c=p==null?void 0:p.signal)==null||c.throwIfAborted();try{const h=await u.invoke(t,e);return await(E==null?void 0:E.handleChainEnd(_coerceToDict$1(h,"output"))),h}catch(h){x===void 0&&(x=h)}}throw x===void 0?new Error("No error stored at end of fallback."):(await(E==null?void 0:E.handleChainError(x)),x)})}async*_streamIterator(t,n){var c;const p=ensureConfig(n),C=await getCallbackManagerForConfig(p),{runId:b,...o}=p,E=await(C==null?void 0:C.handleChainStart(this.toJSON(),_coerceToDict$1(t,"input"),b,void 0,void 0,void 0,o==null?void 0:o.runName));let e,a;for(const u of this.runnables()){(c=p==null?void 0:p.signal)==null||c.throwIfAborted();const h=patchConfig(o,{callbacks:E==null?void 0:E.getChild()});try{const s=await u.stream(t,h);a=consumeAsyncIterableInContext(h,s);break}catch(s){e===void 0&&(e=s)}}if(a===void 0){const u=e??new Error("No error stored at end of fallback.");throw await(E==null?void 0:E.handleChainError(u)),u}let x;try{for await(const u of a){yield u;try{x=x===void 0?x:concat(x,u)}catch{x=void 0}}}catch(u){throw await(E==null?void 0:E.handleChainError(u)),u}await(E==null?void 0:E.handleChainEnd(_coerceToDict$1(x,"output")))}async batch(t,n,p){var e;if(p!=null&&p.returnExceptions)throw new Error("Not implemented.");const C=this._getOptionsList(n??{},t.length),b=await Promise.all(C.map(a=>getCallbackManagerForConfig(a))),o=await Promise.all(b.map(async(a,x)=>{const c=await(a==null?void 0:a.handleChainStart(this.toJSON(),_coerceToDict$1(t[x],"input"),C[x].runId,void 0,void 0,void 0,C[x].runName));return delete C[x].runId,c}));let E;for(const a of this.runnables()){(e=C[0].signal)==null||e.throwIfAborted();try{const x=await a.batch(t,o.map((c,u)=>patchConfig(C[u],{callbacks:c==null?void 0:c.getChild()})),p);return await Promise.all(o.map((c,u)=>c==null?void 0:c.handleChainEnd(_coerceToDict$1(x[u],"output")))),x}catch(x){E===void 0&&(E=x)}}throw E?(await Promise.all(o.map(a=>a==null?void 0:a.handleChainError(E))),E):new Error("No error stored at end of fallbacks.")}}function _coerceToRunnable(m){if(typeof m=="function")return new RunnableLambda({func:m});if(Runnable.isRunnable(m))return m;if(!Array.isArray(m)&&typeof m=="object"){const t={};for(const[n,p]of Object.entries(m))t[n]=_coerceToRunnable(p);return new RunnableMap({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class RunnableAssign extends Runnable{static lc_name(){return"RunnableAssign"}constructor(t){t instanceof RunnableMap&&(t={mapper:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=t.mapper}async invoke(t,n){const p=await this.mapper.invoke(t,n);return{...t,...p}}async*_transform(t,n,p){const C=this.mapper.getStepsKeys(),[b,o]=atee(t),E=this.mapper.transform(o,patchConfig(p,{callbacks:n==null?void 0:n.getChild()})),e=E.next();for await(const a of b){if(typeof a!="object"||Array.isArray(a))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof a}`);const x=Object.fromEntries(Object.entries(a).filter(([c])=>!C.includes(c)));Object.keys(x).length>0&&(yield x)}yield(await e).value;for await(const a of E)yield a}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*p(){yield t}const C=ensureConfig(n),b=new AsyncGeneratorWithSetup({generator:this.transform(p(),C),config:C});return await b.setup,IterableReadableStream.fromAsyncGenerator(b)}}class RunnablePick extends Runnable{static lc_name(){return"RunnablePick"}constructor(t){(typeof t=="string"||Array.isArray(t))&&(t={keys:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=t.keys}async _pick(t){if(typeof this.keys=="string")return t[this.keys];{const n=this.keys.map(p=>[p,t[p]]).filter(p=>p[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(t,n){return this._callWithConfig(this._pick.bind(this),t,n)}async*_transform(t){for await(const n of t){const p=await this._pick(n);p!==void 0&&(yield p)}}transform(t,n){return this._transformStreamWithConfig(t,this._transform.bind(this),n)}async stream(t,n){async function*p(){yield t}const C=ensureConfig(n),b=new AsyncGeneratorWithSetup({generator:this.transform(p(),C),config:C});return await b.setup,IterableReadableStream.fromAsyncGenerator(b)}}class RunnableToolLike extends RunnableBinding{constructor(t){const n=RunnableSequence.from([RunnableLambda.from(async p=>{let C;if(_isToolCall(p))try{C=await this.schema.parseAsync(p.args)}catch{throw new ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(p.args))}else C=p;return C}).withConfig({runName:`${t.name}:parse_input`}),t.bound]).withConfig({runName:t.name});super({bound:n,config:t.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.description=t.description,this.schema=t.schema}static lc_name(){return"RunnableToolLike"}}function convertRunnableToTool(m,t){var C;const n=t.name??m.getName(),p=t.description??((C=t.schema)==null?void 0:C.description);return t.schema.constructor===z.ZodString?new RunnableToolLike({name:n,description:p,schema:z.object({input:z.string()}).transform(b=>b.input),bound:m}):new RunnableToolLike({name:n,description:p,schema:t.schema,bound:m})}class BasePromptValue extends Serializable{}class StringPromptValue extends BasePromptValue{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new HumanMessage(this.value)]}}class ChatPromptValue extends BasePromptValue{static lc_name(){return"ChatPromptValue"}constructor(t){Array.isArray(t)&&(t={messages:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=t.messages}toString(){return getBufferString(this.messages)}toChatMessages(){return this.messages}}var base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=E,base64Js.toByteArray=a,base64Js.fromByteArray=u;for(var m=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,b=p.length;C<b;++C)m[C]=p[C],t[p.charCodeAt(C)]=C;t[45]=62,t[95]=63;function o(h){var s=h.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=h.indexOf("=");l===-1&&(l=s);var v=l===s?0:4-l%4;return[l,v]}function E(h){var s=o(h),l=s[0],v=s[1];return(l+v)*3/4-v}function e(h,s,l){return(s+l)*3/4-l}function a(h){var s,l=o(h),v=l[0],d=l[1],g=new n(e(h,v,d)),y=0,S=d>0?v-4:v,T;for(T=0;T<S;T+=4)s=t[h.charCodeAt(T)]<<18|t[h.charCodeAt(T+1)]<<12|t[h.charCodeAt(T+2)]<<6|t[h.charCodeAt(T+3)],g[y++]=s>>16&255,g[y++]=s>>8&255,g[y++]=s&255;return d===2&&(s=t[h.charCodeAt(T)]<<2|t[h.charCodeAt(T+1)]>>4,g[y++]=s&255),d===1&&(s=t[h.charCodeAt(T)]<<10|t[h.charCodeAt(T+1)]<<4|t[h.charCodeAt(T+2)]>>2,g[y++]=s>>8&255,g[y++]=s&255),g}function x(h){return m[h>>18&63]+m[h>>12&63]+m[h>>6&63]+m[h&63]}function c(h,s,l){for(var v,d=[],g=s;g<l;g+=3)v=(h[g]<<16&16711680)+(h[g+1]<<8&65280)+(h[g+2]&255),d.push(x(v));return d.join("")}function u(h){for(var s,l=h.length,v=l%3,d=[],g=16383,y=0,S=l-v;y<S;y+=g)d.push(c(h,y,y+g>S?S:y+g));return v===1?(s=h[l-1],d.push(m[s>>2]+m[s<<4&63]+"==")):v===2&&(s=(h[l-2]<<8)+h[l-1],d.push(m[s>>10]+m[s>>4&63]+m[s<<2&63]+"=")),d.join("")}return base64Js}var base64JsExports=requireBase64Js();const base64=getDefaultExportFromCjs(base64JsExports);var __defProp=Object.defineProperty,__defNormalProp=(m,t,n)=>t in m?__defProp(m,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[t]=n,__publicField=(m,t,n)=>(__defNormalProp(m,t+"",n),n);function bytePairMerge(m,t){let n=Array.from({length:m.length},(p,C)=>({start:C,end:C+1}));for(;n.length>1;){let p=null;for(let C=0;C<n.length-1;C++){const b=m.slice(n[C].start,n[C+1].end),o=t.get(b.join(","));o!=null&&(p==null||o<p[0])&&(p=[o,C])}if(p!=null){const C=p[1];n[C]={start:n[C].start,end:n[C+1].end},n.splice(C+1,1)}else break}return n}function bytePairEncode(m,t){return m.length===1?[t.get(m.join(","))]:bytePairMerge(m,t).map(n=>t.get(m.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function escapeRegex(m){return m.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(m,t){ge(this,"specialTokens");ge(this,"inverseSpecialTokens");ge(this,"patStr");ge(this,"textEncoder",new TextEncoder);ge(this,"textDecoder",new TextDecoder("utf-8"));ge(this,"rankMap",new Map);ge(this,"textMap",new Map);this.patStr=m.pat_str;const n=m.bpe_ranks.split(`
`).filter(Boolean).reduce((p,C)=>{const[b,o,...E]=C.split(" "),e=Number.parseInt(o,10);return E.forEach((a,x)=>p[a]=e+x),p},{});for(const[p,C]of Object.entries(n)){const b=base64.toByteArray(p);this.rankMap.set(b.join(","),C),this.textMap.set(C,b)}this.specialTokens={...m.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((p,[C,b])=>(p[b]=this.textEncoder.encode(C),p),{})}encode(m,t=[],n="all"){const p=new RegExp(this.patStr,"ug"),C=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),b=[],o=new Set(t==="all"?Object.keys(this.specialTokens):t),E=new Set(n==="all"?Object.keys(this.specialTokens).filter(a=>!o.has(a)):n);if(E.size>0){const a=_Tiktoken.specialTokenRegex([...E]),x=m.match(a);if(x!=null)throw new Error(`The text contains a special token that is not allowed: ${x[0]}`)}let e=0;for(;;){let a=null,x=e;for(;C.lastIndex=x,a=C.exec(m),!(a==null||o.has(a[0]));)x=a.index+1;const c=(a==null?void 0:a.index)??m.length;for(const h of m.substring(e,c).matchAll(p)){const s=this.textEncoder.encode(h[0]),l=this.rankMap.get(s.join(","));if(l!=null){b.push(l);continue}b.push(...bytePairEncode(s,this.rankMap))}if(a==null)break;let u=this.specialTokens[a[0]];b.push(u),e=a.index+a[0].length}return b}decode(m){const t=[];let n=0;for(let b=0;b<m.length;++b){const o=m[b],E=this.textMap.get(o)??this.inverseSpecialTokens[o];E!=null&&(t.push(E),n+=E.length)}const p=new Uint8Array(n);let C=0;for(const b of t)p.set(b,C),C+=b.length;return this.textDecoder.decode(p)}},Tiktoken=_Tiktoken;__publicField(Tiktoken,"specialTokenRegex",m=>new RegExp(m.map(t=>escapeRegex(t)).join("|"),"g"));function getEncodingNameForModel(m){switch(m){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const cache={},caller=new AsyncCaller({});async function getEncoding(m){return m in cache||(cache[m]=caller.fetch(`https://tiktoken.pages.dev/js/${m}.json`).then(t=>t.json()).then(t=>new Tiktoken(t)).catch(t=>{throw delete cache[m],t})),await cache[m]}async function encodingForModel(m){return getEncoding(getEncodingNameForModel(m))}const getModelNameForTiktoken=m=>m.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":m.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":m.startsWith("gpt-4-32k")?"gpt-4-32k":m.startsWith("gpt-4-")?"gpt-4":m.startsWith("gpt-4o")?"gpt-4o":m;function isOpenAITool(m){return typeof m!="object"||!m?!1:!!("type"in m&&m.type==="function"&&"function"in m&&typeof m.function=="object"&&m.function&&"name"in m.function&&"parameters"in m.function)}const getVerbosity=()=>!1;class BaseLangChain extends Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(t){super(t),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=t.verbose??getVerbosity(),this.callbacks=t.callbacks,this.tags=t.tags??[],this.metadata=t.metadata??{}}}class BaseLanguageModel extends BaseLangChain{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:t,callbackManager:n,...p}){const{cache:C,...b}=p;super({callbacks:t??n,...b}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof C=="object"?this.cache=C:C?this.cache=InMemoryCache.global():this.cache=void 0,this.caller=new AsyncCaller(p??{})}async getNumTokens(t){if(typeof t!="string")return 0;let n=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await encodingForModel("modelName"in this?getModelNameForTiktoken(this.modelName):"gpt2")}catch(p){console.warn("Failed to calculate number of tokens, falling back to approximate count",p)}if(this._encoding)try{n=this._encoding.encode(t).length}catch(p){console.warn("Failed to calculate number of tokens, falling back to approximate count",p)}return n}static _convertInputToPromptValue(t){return typeof t=="string"?new StringPromptValue(t):Array.isArray(t)?new ChatPromptValue(t.map(coerceMessageLikeToMessage)):t}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:t,...n}){const p={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(p).filter(([o,E])=>E!==void 0).map(([o,E])=>`${o}:${JSON.stringify(E)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(t){throw new Error("Use .toJSON() instead")}}class RunnablePassthrough extends Runnable{static lc_name(){return"RunnablePassthrough"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t&&(this.func=t.func)}async invoke(t,n){const p=ensureConfig(n);return this.func&&await this.func(t,p),this._callWithConfig(C=>Promise.resolve(C),t,p)}async*transform(t,n){const p=ensureConfig(n);let C,b=!0;for await(const o of this._transformStreamWithConfig(t,E=>E,p))if(yield o,b)if(C===void 0)C=o;else try{C=concat(C,o)}catch{C=void 0,b=!1}this.func&&C!==void 0&&await this.func(C,p)}static assign(t){return new RunnableAssign(new RunnableMap({steps:t}))}}function isZodSchema$1(m){return typeof(m==null?void 0:m.parse)=="function"}class BaseChatModel extends BaseLanguageModel{constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(t){const[n,p]=super._separateRunnableConfigFromCallOptions(t);return p.signal=n.signal,[n,p]}async invoke(t,n){const p=BaseChatModel._convertInputToPromptValue(t);return(await this.generatePrompt([p],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(t,n,p){throw new Error("Not implemented.")}async*_streamIterator(t,n){var p;if(this._streamResponseChunks===BaseChatModel.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,n);else{const b=BaseChatModel._convertInputToPromptValue(t).toChatMessages(),[o,E]=this._separateRunnableConfigFromCallOptionsCompat(n),e={...o.metadata,...this.getLsParams(E)},a=await CallbackManager.configure(o.callbacks,this.callbacks,o.tags,this.tags,e,this.metadata,{verbose:this.verbose}),x={options:E,invocation_params:this==null?void 0:this.invocationParams(E),batch_size:1},c=await(a==null?void 0:a.handleChatModelStart(this.toJSON(),[b],o.runId,void 0,x,void 0,void 0,o.runName));let u,h;try{for await(const s of this._streamResponseChunks(b,E,c==null?void 0:c[0])){if(s.message.id==null){const l=(p=c==null?void 0:c.at(0))==null?void 0:p.runId;l!=null&&s.message._updateId(`run-${l}`)}s.message.response_metadata={...s.generationInfo,...s.message.response_metadata},yield s.message,u?u=u.concat(s):u=s,isAIMessageChunk(s.message)&&s.message.usage_metadata!==void 0&&(h={tokenUsage:{promptTokens:s.message.usage_metadata.input_tokens,completionTokens:s.message.usage_metadata.output_tokens,totalTokens:s.message.usage_metadata.total_tokens}})}}catch(s){throw await Promise.all((c??[]).map(l=>l==null?void 0:l.handleLLMError(s))),s}await Promise.all((c??[]).map(s=>s==null?void 0:s.handleLLMEnd({generations:[[u]],llmOutput:h})))}}getLsParams(t){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:t.stop,ls_provider:n}}async _generateUncached(t,n,p,C){var c,u;const b=t.map(h=>h.map(coerceMessageLikeToMessage));let o;if(C!==void 0&&C.length===b.length)o=C;else{const h={...p.metadata,...this.getLsParams(n)},s=await CallbackManager.configure(p.callbacks,this.callbacks,p.tags,this.tags,h,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};o=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),b,p.runId,void 0,l,void 0,void 0,p.runName))}const E=[],e=[];if(!!(o!=null&&o[0].handlers.find(callbackHandlerPrefersStreaming))&&!this.disableStreaming&&b.length===1&&this._streamResponseChunks!==BaseChatModel.prototype._streamResponseChunks)try{const h=await this._streamResponseChunks(b[0],n,o==null?void 0:o[0]);let s,l;for await(const v of h){if(v.message.id==null){const d=(c=o==null?void 0:o.at(0))==null?void 0:c.runId;d!=null&&v.message._updateId(`run-${d}`)}s===void 0?s=v:s=concat(s,v),isAIMessageChunk(v.message)&&v.message.usage_metadata!==void 0&&(l={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}if(s===void 0)throw new Error("Received empty response from chat model call.");E.push([s]),await(o==null?void 0:o[0].handleLLMEnd({generations:E,llmOutput:l}))}catch(h){throw await(o==null?void 0:o[0].handleLLMError(h)),h}else{const h=await Promise.allSettled(b.map((s,l)=>this._generate(s,{...n,promptIndex:l},o==null?void 0:o[l])));await Promise.all(h.map(async(s,l)=>{var v,d,g;if(s.status==="fulfilled"){const y=s.value;for(const S of y.generations){if(S.message.id==null){const T=(v=o==null?void 0:o.at(0))==null?void 0:v.runId;T!=null&&S.message._updateId(`run-${T}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata}}return y.generations.length===1&&(y.generations[0].message.response_metadata={...y.llmOutput,...y.generations[0].message.response_metadata}),E[l]=y.generations,e[l]=y.llmOutput,(d=o==null?void 0:o[l])==null?void 0:d.handleLLMEnd({generations:[y.generations],llmOutput:y.llmOutput})}else return await((g=o==null?void 0:o[l])==null?void 0:g.handleLLMError(s.reason)),Promise.reject(s.reason)}))}const x={generations:E,llmOutput:e.length?(u=this._combineLLMOutput)==null?void 0:u.call(this,...e):void 0};return Object.defineProperty(x,RUN_KEY,{value:o?{runIds:o==null?void 0:o.map(h=>h.runId)}:void 0,configurable:!0}),x}async _generateCached({messages:t,cache:n,llmStringKey:p,parsedOptions:C,handledOptions:b}){const o=t.map(v=>v.map(coerceMessageLikeToMessage)),E={...b.metadata,...this.getLsParams(C)},e=await CallbackManager.configure(b.callbacks,this.callbacks,b.tags,this.tags,E,this.metadata,{verbose:this.verbose}),a={options:C,invocation_params:this==null?void 0:this.invocationParams(C),batch_size:1},x=await(e==null?void 0:e.handleChatModelStart(this.toJSON(),o,b.runId,void 0,a,void 0,void 0,b.runName)),c=[],h=(await Promise.allSettled(o.map(async(v,d)=>{const g=BaseChatModel._convertInputToPromptValue(v).toString(),y=await n.lookup(g,p);return y==null&&c.push(d),y}))).map((v,d)=>({result:v,runManager:x==null?void 0:x[d]})).filter(({result:v})=>v.status==="fulfilled"&&v.value!=null||v.status==="rejected"),s=[];await Promise.all(h.map(async({result:v,runManager:d},g)=>{if(v.status==="fulfilled"){const y=v.value;return s[g]=y.map(S=>("message"in S&&isBaseMessage(S.message)&&isAIMessage(S.message)&&(S.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),S.generationInfo={...S.generationInfo,tokenUsage:{}},S)),y.length&&await(d==null?void 0:d.handleLLMNewToken(y[0].text)),d==null?void 0:d.handleLLMEnd({generations:[y]},void 0,void 0,void 0,{cached:!0})}else return await(d==null?void 0:d.handleLLMError(v.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(v.reason)}));const l={generations:s,missingPromptIndices:c,startedRunManagers:x};return Object.defineProperty(l,RUN_KEY,{value:x?{runIds:x==null?void 0:x.map(v=>v.runId)}:void 0,configurable:!0}),l}async generate(t,n,p){let C;Array.isArray(n)?C={stop:n}:C=n;const b=t.map(s=>s.map(coerceMessageLikeToMessage)),[o,E]=this._separateRunnableConfigFromCallOptionsCompat(C);if(o.callbacks=o.callbacks??p,!this.cache)return this._generateUncached(b,E,o);const{cache:e}=this,a=this._getSerializedCacheKeyParametersForCall(E),{generations:x,missingPromptIndices:c,startedRunManagers:u}=await this._generateCached({messages:b,cache:e,llmStringKey:a,parsedOptions:E,handledOptions:o});let h={};if(c.length>0){const s=await this._generateUncached(c.map(l=>b[l]),E,o,u!==void 0?c.map(l=>u==null?void 0:u[l]):void 0);await Promise.all(s.generations.map(async(l,v)=>{const d=c[v];x[d]=l;const g=BaseChatModel._convertInputToPromptValue(b[d]).toString();return e.update(g,a,l)})),h=s.llmOutput??{}}return{generations:x,llmOutput:h}}invocationParams(t){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(t,n,p){const C=t.map(b=>b.toChatMessages());return this.generate(C,n,p)}async call(t,n,p){return(await this.generate([t.map(coerceMessageLikeToMessage)],n,p)).generations[0][0].message}async callPrompt(t,n,p){const C=t.toChatMessages();return this.call(C,n,p)}async predictMessages(t,n,p){return this.call(t,n,p)}async predict(t,n,p){const C=new HumanMessage(t),b=await this.call([C],n,p);if(typeof b.content!="string")throw new Error("Cannot use predict when output is not a string.");return b.content}withStructuredOutput(t,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const p=t,C=n==null?void 0:n.name,b=p.description??"A function available to call.",o=n==null?void 0:n.method,E=n==null?void 0:n.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let e=C??"extract",a;isZodSchema$1(p)?a=[{type:"function",function:{name:e,description:b,parameters:zodToJsonSchema$2(p)}}]:("name"in p&&(e=p.name),a=[{type:"function",function:{name:e,description:b,parameters:p}}]);const x=this.bindTools(a),c=RunnableLambda.from(l=>{if(!l.tool_calls||l.tool_calls.length===0)throw new Error("No tool calls found in the response.");const v=l.tool_calls.find(d=>d.name===e);if(!v)throw new Error(`No tool call found with name ${e}.`);return v.args});if(!E)return x.pipe(c).withConfig({runName:"StructuredOutput"});const u=RunnablePassthrough.assign({parsed:(l,v)=>c.invoke(l.raw,v)}),h=RunnablePassthrough.assign({parsed:()=>null}),s=u.withFallbacks({fallbacks:[h]});return RunnableSequence.from([{raw:x},s]).withConfig({runName:"StructuredOutputRunnable"})}}class BaseLLMOutputParser extends Runnable{parseResultWithPrompt(t,n,p){return this.parseResult(t,p)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,n){return typeof t=="string"?this._callWithConfig(async(p,C)=>this.parseResult([{text:p}],C==null?void 0:C.callbacks),t,{...n,runType:"parser"}):this._callWithConfig(async(p,C)=>this.parseResult([{message:p,text:this._baseMessageToString(p)}],C==null?void 0:C.callbacks),t,{...n,runType:"parser"})}}class BaseOutputParser extends BaseLLMOutputParser{parseResult(t,n){return this.parse(t[0].text,n)}async parseWithPrompt(t,n,p){return this.parse(t,p)}_type(){throw new Error("_type not implemented")}}class OutputParserException extends Error{constructor(t,n,p,C=!1){if(super(t),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=p,this.sendToLLM=C,C&&(p===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");addLangChainErrorFields$1(this,"OUTPUT_PARSING_FAILURE")}}function deepCompareStrict(m,t){const n=typeof m;if(n!==typeof t)return!1;if(Array.isArray(m)){if(!Array.isArray(t))return!1;const p=m.length;if(p!==t.length)return!1;for(let C=0;C<p;C++)if(!deepCompareStrict(m[C],t[C]))return!1;return!0}if(n==="object"){if(!m||!t)return m===t;const p=Object.keys(m),C=Object.keys(t);if(p.length!==C.length)return!1;for(const o of p)if(!deepCompareStrict(m[o],t[o]))return!1;return!0}return m===t}class BaseTransformOutputParser extends BaseOutputParser{async*_transform(t){for await(const n of t)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(t,n){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...n,runType:"parser"})}}class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser{constructor(t){super(t),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(t==null?void 0:t.diff)??this.diff}async*_transform(t){let n,p;for await(const C of t){if(typeof C!="string"&&typeof C.content!="string")throw new Error("Cannot handle non-string output.");let b;if(isBaseMessageChunk(C)){if(typeof C.content!="string")throw new Error("Cannot handle non-string message output.");b=new ChatGenerationChunk({message:C,text:C.content})}else if(isBaseMessage(C)){if(typeof C.content!="string")throw new Error("Cannot handle non-string message output.");b=new ChatGenerationChunk({message:convertToChunk(C),text:C.content})}else b=new GenerationChunk({text:C});p===void 0?p=b:p=p.concat(b);const o=await this.parsePartialResult([p]);o!=null&&!deepCompareStrict(o,n)&&(this.diff?yield this._diff(n,o):yield o,n=o)}}getFormatInstructions(){return""}}class StructuredOutputParser extends BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(t){super(t),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){const n=z.object(Object.fromEntries(Object.entries(t).map(([p,C])=>[p,z.string().describe(C)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(zodToJsonSchema$2(this.schema))}
\`\`\`
`}async parse(t){try{const p=(t.includes("```")?t.trim().split(/```(?:json)?/)[1]:t.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(C,b)=>`"${b.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(p))}catch(n){throw new OutputParserException(`Failed to parse. Text: "${t}". Error: ${n}`,t)}}}class JsonOutputParser extends BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(t,n){if(n)return t?compare(t,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(t){return parseJsonMarkdown(t[0].text)}async parse(t){return parseJsonMarkdown(t,JSON.parse)}getFormatInstructions(){return""}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var objectToString=Object.prototype.toString,isArray=Array.isArray||function(t){return objectToString.call(t)==="[object Array]"};function isFunction(m){return typeof m=="function"}function typeStr(m){return isArray(m)?"array":typeof m}function escapeRegExp(m){return m.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(m,t){return m!=null&&typeof m=="object"&&t in m}function primitiveHasOwnProperty(m,t){return m!=null&&typeof m!="object"&&m.hasOwnProperty&&m.hasOwnProperty(t)}var regExpTest=RegExp.prototype.test;function testRegExp(m,t){return regExpTest.call(m,t)}var nonSpaceRe=/\S/;function isWhitespace(m){return!testRegExp(nonSpaceRe,m)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(m){return String(m).replace(/[&<>"'`=\/]/g,function(n){return entityMap[n]})}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(m,t){if(!m)return[];var n=!1,p=[],C=[],b=[],o=!1,E=!1,e="",a=0;function x(){if(o&&!E)for(;b.length;)delete C[b.pop()];else b=[];o=!1,E=!1}var c,u,h;function s(A){if(typeof A=="string"&&(A=A.split(spaceRe,2)),!isArray(A)||A.length!==2)throw new Error("Invalid tags: "+A);c=new RegExp(escapeRegExp(A[0])+"\\s*"),u=new RegExp("\\s*"+escapeRegExp(A[1])),h=new RegExp("\\s*"+escapeRegExp("}"+A[1]))}s(t||mustache.tags);for(var l=new Scanner(m),v,d,g,y,S,T;!l.eos();){if(v=l.pos,g=l.scanUntil(c),g)for(var w=0,P=g.length;w<P;++w)y=g.charAt(w),isWhitespace(y)?(b.push(C.length),e+=y):(E=!0,n=!0,e+=" "),C.push(["text",y,v,v+1]),v+=1,y===`
`&&(x(),e="",a=0,n=!1);if(!l.scan(c))break;if(o=!0,d=l.scan(tagRe)||"name",l.scan(whiteRe),d==="="?(g=l.scanUntil(equalsRe),l.scan(equalsRe),l.scanUntil(u)):d==="{"?(g=l.scanUntil(h),l.scan(curlyRe),l.scanUntil(u),d="&"):g=l.scanUntil(u),!l.scan(u))throw new Error("Unclosed tag at "+l.pos);if(d==">"?S=[d,g,v,l.pos,e,a,n]:S=[d,g,v,l.pos],a++,C.push(S),d==="#"||d==="^")p.push(S);else if(d==="/"){if(T=p.pop(),!T)throw new Error('Unopened section "'+g+'" at '+v);if(T[1]!==g)throw new Error('Unclosed section "'+T[1]+'" at '+v)}else d==="name"||d==="{"||d==="&"?E=!0:d==="="&&s(g)}if(x(),T=p.pop(),T)throw new Error('Unclosed section "'+T[1]+'" at '+l.pos);return nestTokens(squashTokens(C))}function squashTokens(m){for(var t=[],n,p,C=0,b=m.length;C<b;++C)n=m[C],n&&(n[0]==="text"&&p&&p[0]==="text"?(p[1]+=n[1],p[3]=n[3]):(t.push(n),p=n));return t}function nestTokens(m){for(var t=[],n=t,p=[],C,b,o=0,E=m.length;o<E;++o)switch(C=m[o],C[0]){case"#":case"^":n.push(C),p.push(C),n=C[4]=[];break;case"/":b=p.pop(),b[5]=C[2],n=p.length>0?p[p.length-1][4]:t;break;default:n.push(C)}return t}function Scanner(m){this.string=m,this.tail=m,this.pos=0}Scanner.prototype.eos=function(){return this.tail===""};Scanner.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var p=n[0];return this.tail=this.tail.substring(p.length),this.pos+=p.length,p};Scanner.prototype.scanUntil=function(t){var n=this.tail.search(t),p;switch(n){case-1:p=this.tail,this.tail="";break;case 0:p="";break;default:p=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=p.length,p};function Context(m,t){this.view=m,this.cache={".":this.view},this.parent=t}Context.prototype.push=function(t){return new Context(t,this)};Context.prototype.lookup=function(t){var n=this.cache,p;if(n.hasOwnProperty(t))p=n[t];else{for(var C=this,b,o,E,e=!1;C;){if(t.indexOf(".")>0)for(b=C.view,o=t.split("."),E=0;b!=null&&E<o.length;)E===o.length-1&&(e=hasProperty(b,o[E])||primitiveHasOwnProperty(b,o[E])),b=b[o[E++]];else b=C.view[t],e=hasProperty(C.view,t);if(e){p=b;break}C=C.parent}n[t]=p}return isFunction(p)&&(p=p.call(this.view)),p};function Writer(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}Writer.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Writer.prototype.parse=function(t,n){var p=this.templateCache,C=t+":"+(n||mustache.tags).join(":"),b=typeof p<"u",o=b?p.get(C):void 0;return o==null&&(o=parseTemplate(t,n),b&&p.set(C,o)),o};Writer.prototype.render=function(t,n,p,C){var b=this.getConfigTags(C),o=this.parse(t,b),E=n instanceof Context?n:new Context(n,void 0);return this.renderTokens(o,E,p,t,C)};Writer.prototype.renderTokens=function(t,n,p,C,b){for(var o="",E,e,a,x=0,c=t.length;x<c;++x)a=void 0,E=t[x],e=E[0],e==="#"?a=this.renderSection(E,n,p,C,b):e==="^"?a=this.renderInverted(E,n,p,C,b):e===">"?a=this.renderPartial(E,n,p,b):e==="&"?a=this.unescapedValue(E,n):e==="name"?a=this.escapedValue(E,n,b):e==="text"&&(a=this.rawValue(E)),a!==void 0&&(o+=a);return o};Writer.prototype.renderSection=function(t,n,p,C,b){var o=this,E="",e=n.lookup(t[1]);function a(u){return o.render(u,n,p,b)}if(e){if(isArray(e))for(var x=0,c=e.length;x<c;++x)E+=this.renderTokens(t[4],n.push(e[x]),p,C,b);else if(typeof e=="object"||typeof e=="string"||typeof e=="number")E+=this.renderTokens(t[4],n.push(e),p,C,b);else if(isFunction(e)){if(typeof C!="string")throw new Error("Cannot use higher-order sections without the original template");e=e.call(n.view,C.slice(t[3],t[5]),a),e!=null&&(E+=e)}else E+=this.renderTokens(t[4],n,p,C,b);return E}};Writer.prototype.renderInverted=function(t,n,p,C,b){var o=n.lookup(t[1]);if(!o||isArray(o)&&o.length===0)return this.renderTokens(t[4],n,p,C,b)};Writer.prototype.indentPartial=function(t,n,p){for(var C=n.replace(/[^ \t]/g,""),b=t.split(`
`),o=0;o<b.length;o++)b[o].length&&(o>0||!p)&&(b[o]=C+b[o]);return b.join(`
`)};Writer.prototype.renderPartial=function(t,n,p,C){if(p){var b=this.getConfigTags(C),o=isFunction(p)?p(t[1]):p[t[1]];if(o!=null){var E=t[6],e=t[5],a=t[4],x=o;e==0&&a&&(x=this.indentPartial(o,a,E));var c=this.parse(x,b);return this.renderTokens(c,n,p,x,C)}}};Writer.prototype.unescapedValue=function(t,n){var p=n.lookup(t[1]);if(p!=null)return p};Writer.prototype.escapedValue=function(t,n,p){var C=this.getConfigEscape(p)||mustache.escape,b=n.lookup(t[1]);if(b!=null)return typeof b=="number"&&C===mustache.escape?String(b):C(b)};Writer.prototype.rawValue=function(t){return t[1]};Writer.prototype.getConfigTags=function(t){return isArray(t)?t:t&&typeof t=="object"?t.tags:void 0};Writer.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!isArray(t))return t.escape};var mustache={tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0},defaultWriter=new Writer;mustache.clearCache=function(){return defaultWriter.clearCache()};mustache.parse=function(t,n){return defaultWriter.parse(t,n)};mustache.render=function(t,n,p,C){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(t)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(t,n,p,C)};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;function convertToOpenAIFunction(m,t){const n=typeof t=="number"?void 0:t;return{name:m.name,description:m.description,parameters:zodToJsonSchema$2(m.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function isStructuredTool(m){return m!==void 0&&Array.isArray(m.lc_namespace)}function isRunnableToolLike(m){return m!==void 0&&Runnable.isRunnable(m)&&"lc_name"in m.constructor&&typeof m.constructor.lc_name=="function"&&m.constructor.lc_name()==="RunnableToolLike"}function isStructuredToolParams(m){return!!m&&typeof m=="object"&&"name"in m&&"schema"in m&&isZodSchema$1(m.schema)}function isLangChainTool(m){return isStructuredToolParams(m)||isRunnableToolLike(m)||isStructuredTool(m)}function deepCopy(m){if(typeof m!="object"||m===null)return m;const t=Array.isArray(m)?[]:{};for(const n in m)Object.prototype.hasOwnProperty.call(m,n)&&(t[n]=deepCopy(m[n]));return t}function emptyCheckpoint(){return{v:1,id:uuid6(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{},pending_sends:[]}}function copyCheckpoint(m){return{v:m.v,id:m.id,ts:m.ts,channel_values:{...m.channel_values},channel_versions:{...m.channel_versions},versions_seen:deepCopy(m.versions_seen),pending_sends:[...m.pending_sends]}}function compareChannelVersions(m,t){return typeof m=="number"&&typeof t=="number"?Math.sign(m-t):String(m).localeCompare(String(t))}function maxChannelVersion(...m){return m.reduce((t,n,p)=>p===0?n:compareChannelVersions(t,n)>=0?t:n)}const WRITES_IDX_MAP={[ERROR$1]:-1,[SCHEDULED$1]:-2,[INTERRUPT$1]:-3,[RESUME$1]:-4};class InvalidNamespaceError extends Error{constructor(t){super(t),this.name="InvalidNamespaceError"}}function validateNamespace(m){if(m.length===0)throw new InvalidNamespaceError("Namespace cannot be empty.");for(const t of m){if(typeof t!="string")throw new InvalidNamespaceError(`Invalid namespace label '${t}' found in ${m}. Namespace labels must be strings, but got ${typeof t}.`);if(t.includes("."))throw new InvalidNamespaceError(`Invalid namespace label '${t}' found in ${m}. Namespace labels cannot contain periods ('.').`);if(t==="")throw new InvalidNamespaceError(`Namespace labels cannot be empty strings. Got ${t} in ${m}`)}if(m[0]==="langgraph")throw new InvalidNamespaceError(`Root label for namespace cannot be "langgraph". Got: ${m}`)}class BaseStore{async get(t,n){return(await this.batch([{namespace:t,key:n}]))[0]}async search(t,n={}){const{filter:p,limit:C=10,offset:b=0,query:o}=n;return(await this.batch([{namespacePrefix:t,filter:p,limit:C,offset:b,query:o}]))[0]}async put(t,n,p,C){validateNamespace(t),await this.batch([{namespace:t,key:n,value:p,index:C}])}async delete(t,n){await this.batch([{namespace:t,key:n,value:null}])}async listNamespaces(t={}){const{prefix:n,suffix:p,maxDepth:C,limit:b=100,offset:o=0}=t,E=[];return n&&E.push({matchType:"prefix",path:n}),p&&E.push({matchType:"suffix",path:p}),(await this.batch([{matchConditions:E.length?E:void 0,maxDepth:C,limit:b,offset:o}]))[0]}start(){}stop(){}}class AsyncBatchedStore extends BaseStore{constructor(t){super(),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"nextKey",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"processingTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.store=t}get isRunning(){return this.running}async batch(t){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")}async get(t,n){return this.enqueueOperation({namespace:t,key:n})}async search(t,n){const{filter:p,limit:C=10,offset:b=0,query:o}=n||{};return this.enqueueOperation({namespacePrefix:t,filter:p,limit:C,offset:b,query:o})}async put(t,n,p){return this.enqueueOperation({namespace:t,key:n,value:p})}async delete(t,n){return this.enqueueOperation({namespace:t,key:n,value:null})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}async stop(){this.running=!1,this.processingTask&&await this.processingTask}enqueueOperation(t){return new Promise((n,p)=>{const C=this.nextKey;this.nextKey+=1,this.queue.set(C,{operation:t,resolve:n,reject:p})})}async processBatchQueue(){for(;this.running;){if(await new Promise(n=>{setTimeout(n,0)}),this.queue.size===0)continue;const t=new Map(this.queue);this.queue.clear();try{const n=Array.from(t.values()).map(({operation:C})=>C),p=await this.store.batch(n);t.forEach(({resolve:C},b)=>{const o=Array.from(t.keys()).indexOf(b);C(p[o])})}catch(n){t.forEach(({reject:p})=>{p(n)})}}}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}}function isBaseChannel(m){return m!=null&&m.lg_is_channel===!0}class BaseChannel{constructor(){Object.defineProperty(this,"ValueType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"UpdateType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lg_is_channel",{enumerable:!0,configurable:!0,writable:!0,value:!0})}consume(){return!1}}function emptyChannels(m,t){const n=Object.fromEntries(Object.entries(m).filter(([,C])=>isBaseChannel(C))),p={};for(const C in n)if(Object.prototype.hasOwnProperty.call(n,C)){const b=t.channel_values[C];p[C]=n[C].fromCheckpoint(b)}return p}function createCheckpoint(m,t,n){let p;if(t===void 0)p=m.channel_values;else{p={};for(const C of Object.keys(t))try{p[C]=t[C].checkpoint()}catch(b){if(b.name!==EmptyChannelError.unminifiable_name)throw b}}return{v:1,id:uuid6(n),ts:new Date().toISOString(),channel_values:p,channel_versions:{...m.channel_versions},versions_seen:deepCopy(m.versions_seen),pending_sends:m.pending_sends??[]}}class BinaryOperatorAggregate extends BaseChannel{constructor(t,n){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"BinaryOperatorAggregate"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"operator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"initialValueFactory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.operator=t,this.initialValueFactory=n,this.value=n==null?void 0:n()}fromCheckpoint(t){const n=new BinaryOperatorAggregate(this.operator,this.initialValueFactory);return t&&(n.value=t),n}update(t){let n=t;if(!n.length)return!1;this.value===void 0&&([this.value]=n,n=n.slice(1));for(const p of n)this.value!==void 0&&(this.value=this.operator(this.value,p));return!0}get(){if(this.value===void 0)throw new EmptyChannelError;return this.value}checkpoint(){if(this.value===void 0)throw new EmptyChannelError;return this.value}}class LastValue extends BaseChannel{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValue"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]})}fromCheckpoint(t){const n=new LastValue;return t&&(n.value=[t]),n}update(t){if(t.length===0)return!1;if(t.length!==1)throw new InvalidUpdateError("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new EmptyChannelError;return this.value[0]}checkpoint(){if(this.value.length===0)throw new EmptyChannelError;return this.value[0]}}const START="__start__",END="__end__",INPUT="__input__",ERROR="__error__",CONFIG_KEY_SEND="__pregel_send",CONFIG_KEY_CALL="__pregel_call",CONFIG_KEY_READ="__pregel_read",CONFIG_KEY_CHECKPOINTER="__pregel_checkpointer",CONFIG_KEY_RESUMING="__pregel_resuming",CONFIG_KEY_TASK_ID="__pregel_task_id",CONFIG_KEY_STREAM="__pregel_stream",CONFIG_KEY_RESUME_VALUE="__pregel_resume_value",CONFIG_KEY_SCRATCHPAD="__pregel_scratchpad",CONFIG_KEY_PREVIOUS_STATE="__pregel_previous",CONFIG_KEY_CHECKPOINT_ID="checkpoint_id",CONFIG_KEY_CHECKPOINT_NS="checkpoint_ns",CONFIG_KEY_CHECKPOINT_MAP="checkpoint_map",INTERRUPT="__interrupt__",RESUME="__resume__",NO_WRITES="__no_writes__",RETURN="__return__",PREVIOUS="__previous__",RUNTIME_PLACEHOLDER="__pregel_runtime_placeholder__",TAG_HIDDEN="langsmith:hidden",TAG_NOSTREAM="langsmith:nostream",SELF="__self__",TASKS="__pregel_tasks",PUSH="__pregel_push",PULL="__pregel_pull",NULL_TASK_ID="00000000-0000-0000-0000-000000000000",RESERVED=[TAG_HIDDEN,INPUT,INTERRUPT,RESUME,ERROR,NO_WRITES,TASKS,CONFIG_KEY_SEND,CONFIG_KEY_READ,CONFIG_KEY_CHECKPOINTER,CONFIG_KEY_STREAM,CONFIG_KEY_RESUMING,CONFIG_KEY_TASK_ID,CONFIG_KEY_CALL,CONFIG_KEY_RESUME_VALUE,CONFIG_KEY_SCRATCHPAD,CONFIG_KEY_PREVIOUS_STATE,CONFIG_KEY_CHECKPOINT_MAP,CONFIG_KEY_CHECKPOINT_NS,CONFIG_KEY_CHECKPOINT_ID],CHECKPOINT_NAMESPACE_SEPARATOR="|",CHECKPOINT_NAMESPACE_END=":";function _isSendInterface(m){const t=m;return t!=null&&typeof t.node=="string"&&t.args!==void 0}function _isSend(m){const t=m;return t!==void 0&&t.lg_name==="Send"}class Command{constructor(t){Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Command"}),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"goto",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.resume=t.resume,this.graph=t.graph,this.update=t.update,t.goto&&(this.goto=Array.isArray(t.goto)?t.goto:[t.goto])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let t;return typeof this.goto=="string"?t=this.goto:_isSend(this.goto)?t=this.goto.toJSON():t=this.goto.map(n=>typeof n=="string"?n:n.toJSON()),{update:this.update,resume:this.resume,goto:t}}}Object.defineProperty(Command,"PARENT",{enumerable:!0,configurable:!0,writable:!0,value:"__parent__"});function isCommand(m){return typeof m=="object"&&!!m&&m.lg_name==="Command"}class ManagedValue{constructor(t,n){Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lg_is_managed_value",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.config=t}static async initialize(t,n){throw new Error("Not implemented")}async promises(){return Promise.all(this._promises)}addPromise(t){this._promises.push(t)}}const ChannelKeyPlaceholder="__channel_key_placeholder__";class ManagedValueMapping extends Map{constructor(t){super(t?Array.from(t):void 0)}replaceRuntimeValues(t,n){if(!(this.size===0||!n)&&!Array.from(this.values()).every(p=>!p.runtime)){if(typeof n=="object"&&!Array.isArray(n))for(const[p,C]of Object.entries(n))for(const[b,o]of this.entries())o.runtime&&o.call(t)===C&&(n[p]={[RUNTIME_PLACEHOLDER]:b});else if(typeof n=="object"&&"constructor"in n)for(const p of Object.getOwnPropertyNames(Object.getPrototypeOf(n)))try{const C=n[p];for(const[b,o]of this.entries())o.runtime&&o.call(t)===C&&(n[p]={[RUNTIME_PLACEHOLDER]:b})}catch(C){if(C.name!==TypeError.name)throw C}}}replaceRuntimePlaceholders(t,n){var p;if(!(this.size===0||!n)&&!Array.from(this.values()).every(C=>!C.runtime)){if(typeof n=="object"&&!Array.isArray(n)){for(const[C,b]of Object.entries(n))if(typeof b=="object"&&b!==null&&RUNTIME_PLACEHOLDER in b){const o=b[RUNTIME_PLACEHOLDER];typeof o=="string"&&(n[C]=(p=this.get(o))==null?void 0:p.call(t))}}else if(typeof n=="object"&&"constructor"in n)for(const C of Object.getOwnPropertyNames(Object.getPrototypeOf(n)))try{const b=n[C];if(typeof b=="object"&&b!==null&&RUNTIME_PLACEHOLDER in b){const o=this.get(b[RUNTIME_PLACEHOLDER]);o&&(n[C]=o.call(t))}}catch(b){if(b.name!==TypeError.name)throw b}}}}function isConfiguredManagedValue(m){return!!(typeof m=="object"&&m&&"cls"in m&&"params"in m)}class NoopManagedValue extends ManagedValue{call(){}static async initialize(t,n){return Promise.resolve(new NoopManagedValue(t))}}class AnnotationRoot{constructor(t){Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"AnnotationRoot"}),Object.defineProperty(this,"spec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.spec=t}}const Annotation=function(m){return isConfiguredManagedValue(m)?m:m?getChannel(m):new LastValue};Annotation.Root=m=>new AnnotationRoot(m);function getChannel(m){return typeof m=="object"&&m&&"reducer"in m&&m.reducer?new BinaryOperatorAggregate(m.reducer,m.default):typeof m=="object"&&m&&"value"in m&&m.value?new BinaryOperatorAggregate(m.value,m.default):new LastValue}const COPIABLE_KEYS=["tags","metadata","callbacks","configurable"],CONFIG_KEYS=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interruptBefore","interruptAfter","signal"],DEFAULT_RECURSION_LIMIT=25;function ensureLangGraphConfig(...m){const t={tags:[],metadata:{},callbacks:void 0,recursionLimit:DEFAULT_RECURSION_LIMIT,configurable:{}},n=AsyncLocalStorageProviderSingleton.getRunnableConfig();if(n!==void 0){for(const[p,C]of Object.entries(n))if(C!==void 0)if(COPIABLE_KEYS.includes(p)){let b;Array.isArray(C)?b=[...C]:typeof C=="object"?p==="callbacks"&&"copy"in C&&typeof C.copy=="function"?b=C.copy():b={...C}:b=C,t[p]=b}else t[p]=C}for(const p of m)if(p!==void 0)for(const[C,b]of Object.entries(p))b!==void 0&&CONFIG_KEYS.includes(C)&&(t[C]=b);for(const[p,C]of Object.entries(t.configurable))t.metadata=t.metadata??{},!p.startsWith("__")&&(typeof C=="string"||typeof C=="number"||typeof C=="boolean")&&!(p in t.metadata)&&(t.metadata[p]=C);return t}function recastCheckpointNamespace(m){return m.split(CHECKPOINT_NAMESPACE_SEPARATOR).filter(t=>!t.match(/^\d+$/)).map(t=>t.split(CHECKPOINT_NAMESPACE_END)[0]).join(CHECKPOINT_NAMESPACE_SEPARATOR)}function getParentCheckpointNamespace(m){const t=m.split(CHECKPOINT_NAMESPACE_SEPARATOR);for(;t.length>1&&t[t.length-1].match(/^\d+$/);)t.pop();return t.slice(0,-1).join(CHECKPOINT_NAMESPACE_SEPARATOR)}class RunnableCallable extends Runnable{constructor(t){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"recurse",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.name=t.name??t.func.name,this.func=t.func,this.config=t.tags?{tags:t.tags}:void 0,this.trace=t.trace??this.trace,this.recurse=t.recurse??this.recurse}async _tracedInvoke(t,n,p){return new Promise((C,b)=>{const o=patchConfig(n,{callbacks:p==null?void 0:p.getChild()});AsyncLocalStorageProviderSingleton.runWithConfig(o,async()=>{try{const E=await this.func(t,o);C(E)}catch(E){b(E)}})})}async invoke(t,n){let p;const C=ensureLangGraphConfig(n),b=mergeConfigs(this.config,C);return this.trace?p=await this._callWithConfig(this._tracedInvoke,t,b):p=await AsyncLocalStorageProviderSingleton.runWithConfig(b,async()=>this.func(t,b)),Runnable.isRunnable(p)&&this.recurse?await AsyncLocalStorageProviderSingleton.runWithConfig(b,async()=>p.invoke(t,b)):p}}function*prefixGenerator(m,t){if(t===void 0)yield*m;else for(const n of m)yield[t,n]}async function gatherIterator(m){const t=[];for await(const n of await m)t.push(n);return t}function gatherIteratorSync(m){const t=[];for(const n of m)t.push(n);return t}function patchConfigurable$1(m,t){return m?"configurable"in m?{...m,configurable:{...m.configurable,...t}}:{...m,configurable:t}:{configurable:t}}function _isSkipWrite(m){return typeof m=="object"&&(m==null?void 0:m[Symbol.for("LG_SKIP_WRITE")])!==void 0}const PASSTHROUGH={[Symbol.for("LG_PASSTHROUGH")]:!0};function _isPassthrough(m){return typeof m=="object"&&(m==null?void 0:m[Symbol.for("LG_PASSTHROUGH")])!==void 0}const IS_WRITER=Symbol("IS_WRITER");class ChannelWrite extends RunnableCallable{constructor(t,n){const p=`ChannelWrite<${t.map(C=>_isSend(C)?C.node:"channel"in C?C.channel:"...").join(",")}>`;super({writes:t,name:p,tags:n,func:async(C,b)=>this._write(C,b??{})}),Object.defineProperty(this,"writes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.writes=t}async _write(t,n){const p=this.writes.map(C=>_isChannelWriteTupleEntry(C)&&_isPassthrough(C.value)?{mapper:C.mapper,value:t}:_isChannelWriteEntry(C)&&_isPassthrough(C.value)?{channel:C.channel,value:t,skipNone:C.skipNone,mapper:C.mapper}:C);return await ChannelWrite.doWrite(n,p),t}static async doWrite(t,n){var b;for(const o of n){if(_isChannelWriteEntry(o)){if(o.channel===TASKS)throw new InvalidUpdateError("Cannot write to the reserved channel TASKS");if(_isPassthrough(o.value))throw new InvalidUpdateError("PASSTHROUGH value must be replaced")}if(_isChannelWriteTupleEntry(o)&&_isPassthrough(o.value))throw new InvalidUpdateError("PASSTHROUGH value must be replaced")}const p=[];for(const o of n)if(_isSend(o))p.push([TASKS,o]);else if(_isChannelWriteTupleEntry(o)){const E=await o.mapper.invoke(o.value,t);E!=null&&E.length>0&&p.push(...E)}else if(_isChannelWriteEntry(o)){const E=o.mapper!==void 0?await o.mapper.invoke(o.value,t):o.value;if(_isSkipWrite(E)||o.skipNone&&E===void 0)continue;p.push([o.channel,E])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);((b=t.configurable)==null?void 0:b[CONFIG_KEY_SEND])(p)}static isWriter(t){return t instanceof ChannelWrite||IS_WRITER in t&&!!t[IS_WRITER]}static registerWriter(t){return Object.defineProperty(t,IS_WRITER,{value:!0})}}function _isChannelWriteEntry(m){return m!==void 0&&typeof m.channel=="string"}function _isChannelWriteTupleEntry(m){return m!==void 0&&!_isChannelWriteEntry(m)&&Runnable.isRunnable(m.mapper)}class ChannelRead extends RunnableCallable{constructor(t,n,p=!1){super({func:(C,b)=>ChannelRead.doRead(b,this.channel,this.fresh,this.mapper)}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"ChannelRead"}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fresh",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fresh=p,this.mapper=n,this.channel=t,this.name=Array.isArray(t)?`ChannelRead<${t.join(",")}>`:`ChannelRead<${t}>`}static doRead(t,n,p,C){var o;const b=(o=t.configurable)==null?void 0:o[CONFIG_KEY_READ];if(!b)throw new Error(`Runnable ${this} is not configured with a read function. Make sure to call in the context of a Pregel process`);return C?C(b(n,p)):b(n,p)}}const defaultRunnableBound=new RunnablePassthrough;class PregelNode extends RunnableBinding{constructor(t){var s;const{channels:n,triggers:p,mapper:C,writers:b,bound:o,kwargs:E,metadata:e,retryPolicy:a,tags:x,subgraphs:c,ends:u}=t,h=[...(s=t.config)!=null&&s.tags?t.config.tags:[],...x??[]];super({...t,bound:t.bound??defaultRunnableBound,config:{...t.config?t.config:{},tags:h}}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"PregelNode"}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:defaultRunnableBound}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subgraphs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=n,this.triggers=p,this.mapper=C,this.writers=b??this.writers,this.bound=o??this.bound,this.kwargs=E??this.kwargs,this.metadata=e??this.metadata,this.tags=h,this.retryPolicy=a,this.subgraphs=c,this.ends=u}getWriters(){var n;const t=[...this.writers];for(;t.length>1&&t[t.length-1]instanceof ChannelWrite&&t[t.length-2]instanceof ChannelWrite;){const p=t.slice(-2),C=p[0].writes.concat(p[1].writes);t[t.length-2]=new ChannelWrite(C,(n=p[0].config)==null?void 0:n.tags),t.pop()}return t}getNode(){const t=this.getWriters();if(!(this.bound===defaultRunnableBound&&t.length===0))return this.bound===defaultRunnableBound&&t.length===1?t[0]:this.bound===defaultRunnableBound?new RunnableSequence({first:t[0],middle:t.slice(1,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):t.length>0?new RunnableSequence({first:this.bound,middle:t.slice(0,t.length-1),last:t[t.length-1],omitSequenceTags:!0}):this.bound}join(t){if(!Array.isArray(t))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new PregelNode({channels:{...this.channels,...Object.fromEntries(t.map(n=>[n,n]))},triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy})}pipe(t){return ChannelWrite.isWriter(t)?new PregelNode({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,t],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy}):this.bound===defaultRunnableBound?new PregelNode({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:_coerceToRunnable(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy}):new PregelNode({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy})}}class GraphValidationError extends Error{constructor(t){super(t),this.name="GraphValidationError"}}function validateGraph({nodes:m,channels:t,inputChannels:n,outputChannels:p,streamChannels:C,interruptAfterNodes:b,interruptBeforeNodes:o}){if(!t)throw new GraphValidationError("Channels not provided");const E=new Set,e=new Set;for(const[a,x]of Object.entries(m)){if(a===INTERRUPT)throw new GraphValidationError(`"Node name ${INTERRUPT} is reserved"`);if(x.constructor===PregelNode)x.triggers.forEach(c=>E.add(c));else throw new GraphValidationError(`Invalid node type ${typeof x}, expected PregelNode`)}for(const a of E)if(!(a in t))throw new GraphValidationError(`Subcribed channel '${String(a)}' not in channels`);if(Array.isArray(n)){if(n.every(a=>!E.has(a)))throw new GraphValidationError(`None of the input channels ${n} are subscribed to by any node`)}else if(!E.has(n))throw new GraphValidationError(`Input channel ${String(n)} is not subscribed to by any node`);Array.isArray(p)?p.forEach(a=>e.add(a)):e.add(p),C&&!Array.isArray(C)?e.add(C):Array.isArray(C)&&C.forEach(a=>e.add(a));for(const a of e)if(!(a in t))throw new GraphValidationError(`Output channel '${String(a)}' not in channels`);if(b&&b!=="*"){for(const a of b)if(!(a in m))throw new GraphValidationError(`Node ${String(a)} not in nodes`)}if(o&&o!=="*"){for(const a of o)if(!(a in m))throw new GraphValidationError(`Node ${String(a)} not in nodes`)}}function validateKeys(m,t){if(Array.isArray(m)){for(const n of m)if(!(n in t))throw new Error(`Key ${String(n)} not found in channels`)}else if(!(m in t))throw new Error(`Key ${String(m)} not found in channels`)}function readChannel(m,t,n=!0,p=!1){try{return m[t].get()}catch(C){if(C.name===EmptyChannelError.unminifiable_name){if(p)return C;if(n)return null}throw C}}function readChannels(m,t,n=!0){if(Array.isArray(t)){const p={};for(const C of t)try{p[C]=readChannel(m,C,!n)}catch(b){if(b.name===EmptyChannelError.unminifiable_name)continue}return p}else return readChannel(m,t)}function*mapCommand(m,t){if(m.graph===Command.PARENT)throw new InvalidUpdateError("There is no parent graph.");if(m.goto){let n;Array.isArray(m.goto)?n=m.goto:n=[m.goto];for(const p of n)if(_isSend(p))yield[NULL_TASK_ID,TASKS,p];else if(typeof p=="string")yield[NULL_TASK_ID,`branch:__start__:${SELF}:${p}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof p}`)}if(m.resume)if(typeof m.resume=="object"&&Object.keys(m.resume).length&&Object.keys(m.resume).every(validate$1))for(const[n,p]of Object.entries(m.resume)){const C=t.filter(b=>b[0]===n&&b[1]===RESUME).map(b=>b[2]).slice(0,1)??[];C.push(p),yield[n,RESUME,C]}else yield[NULL_TASK_ID,RESUME,m.resume];if(m.update){if(typeof m.update!="object"||!m.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(m.update))for(const[n,p]of m.update)yield[NULL_TASK_ID,n,p];else for(const[n,p]of Object.entries(m.update))yield[NULL_TASK_ID,n,p]}}function*mapInput(m,t){if(t!=null)if(Array.isArray(m)&&typeof t=="object"&&!Array.isArray(t))for(const n in t)m.includes(n)&&(yield[n,t[n]]);else{if(Array.isArray(m))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[m,t]}}function*mapOutputValues(m,t,n){Array.isArray(m)?(t===!0||t.find(([p,C])=>m.includes(p)))&&(yield readChannels(n,m)):(t===!0||t.some(([p,C])=>p===m))&&(yield readChannel(n,m))}function*mapOutputUpdates(m,t,n){const p=t.filter(([E,e])=>{var a;return(E.config===void 0||!((a=E.config.tags)!=null&&a.includes(TAG_HIDDEN)))&&e[0][0]!==ERROR&&e[0][0]!==INTERRUPT});if(!p.length)return;let C;p.some(([E])=>E.writes.some(([e,a])=>e===RETURN))?C=p.flatMap(([E])=>E.writes.filter(([e,a])=>e===RETURN).map(([e,a])=>[E.name,a])):Array.isArray(m)?C=p.flatMap(([E])=>{const{writes:e}=E,a={};for(const[x]of e)m.includes(x)&&(a[x]=(a[x]||0)+1);return Object.values(a).some(x=>x>1)?e.filter(([x])=>m.includes(x)).map(([x,c])=>[E.name,{[x]:c}]):[[E.name,Object.fromEntries(e.filter(([x])=>m.includes(x)))]]}):C=p.flatMap(([E])=>E.writes.filter(([e,a])=>e===m).map(([e,a])=>[E.name,a]));const b={};for(const[E,e]of C)E in b||(b[E]=[]),b[E].push(e);const o={};for(const E in b)if(b[E].length===1){const[e]=b[E];o[E]=e}else o[E]=b[E];n&&(o.__metadata__={cached:n}),yield o}function isRunnableSequence(m){return"steps"in m&&Array.isArray(m.steps)}function isPregelLike(m){return"lg_is_pregel"in m&&m.lg_is_pregel===!0}function findSubgraphPregel(m){const t=[m];for(const n of t){if(isPregelLike(n))return n;isRunnableSequence(n)&&t.push(...n.steps)}}const COLORS_MAP={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},wrap=(m,t)=>`${m.start}${t}${m.end}`;function*mapDebugTasks(m,t){var p;const n=new Date().toISOString();for(const{id:C,name:b,input:o,config:E,triggers:e,writes:a}of t){if((p=E==null?void 0:E.tags)!=null&&p.includes(TAG_HIDDEN))continue;const x=a.filter(([c,u])=>c===C&&u===INTERRUPT).map(([,c])=>c);yield{type:"task",timestamp:n,step:m,payload:{id:C,name:b,input:o,triggers:e,interrupts:x}}}}function*mapDebugTaskResults(m,t,n){var C;const p=new Date().toISOString();for(const[{id:b,name:o,config:E},e]of t)(C=E==null?void 0:E.tags)!=null&&C.includes(TAG_HIDDEN)||(yield{type:"task_result",timestamp:p,step:m,payload:{id:b,name:o,result:e.filter(([a])=>Array.isArray(n)?n.includes(a):a===n),interrupts:e.filter(a=>a[0]===INTERRUPT).map(a=>a[1])}})}function*mapDebugCheckpoint(m,t,n,p,C,b,o,E){var u,h,s;function e(l){const v={};return l.callbacks!=null&&(v.callbacks=l.callbacks),l.configurable!=null&&(v.configurable=l.configurable),l.maxConcurrency!=null&&(v.max_concurrency=l.maxConcurrency),l.metadata!=null&&(v.metadata=l.metadata),l.recursionLimit!=null&&(v.recursion_limit=l.recursionLimit),l.runId!=null&&(v.run_id=l.runId),l.runName!=null&&(v.run_name=l.runName),l.tags!=null&&(v.tags=l.tags),v}const a=(u=t.configurable)==null?void 0:u.checkpoint_ns,x={};for(const l of b){if(!((h=l.subgraphs)!=null&&h.length?l.subgraphs:[l.proc]).find(findSubgraphPregel))continue;let d=`${l.name}:${l.id}`;a&&(d=`${a}|${d}`),x[l.id]={configurable:{thread_id:(s=t.configurable)==null?void 0:s.thread_id,checkpoint_ns:d}}}yield{type:"checkpoint",timestamp:new Date().toISOString(),step:m,payload:{config:e(t),values:readChannels(n,p),metadata:C,next:b.map(l=>l.name),tasks:tasksWithWrites(b,o,x),parentConfig:E?e(E):void 0}}}function tasksWithWrites(m,t,n){return m.map(p=>{var o;const C=(o=t.find(([E,e])=>E===p.id&&e===ERROR))==null?void 0:o[2],b=t.filter(([E,e])=>E===p.id&&e===INTERRUPT).map(([,,E])=>E);return C?{id:p.id,name:p.name,path:p.path,error:C,interrupts:b}:{id:p.id,name:p.name,path:p.path,interrupts:b,state:n==null?void 0:n[p.id]}})}function printStepCheckpoint(m,t,n){console.log([`${wrap(COLORS_MAP.blue,`[${m}:checkpoint]`)}`,`\x1B[1m State at the end of step ${m}:\x1B[0m
`,JSON.stringify(readChannels(t,n),null,2)].join(""))}function printStepTasks(m,t){const n=t.length;console.log([`${wrap(COLORS_MAP.blue,`[${m}:tasks]`)}`,`\x1B[1m Starting step ${m} with ${n} task${n===1?"":"s"}:\x1B[0m
`,t.map(p=>`- ${wrap(COLORS_MAP.green,String(p.name))} -> ${JSON.stringify(p.input,null,2)}`).join(`
`)].join(""))}function printStepWrites(m,t,n){const p={};for(const[C,b]of t)n.includes(C)&&(p[C]||(p[C]=[]),p[C].push(b));console.log([`${wrap(COLORS_MAP.blue,`[${m}:writes]`)}`,`\x1B[1m Finished step ${m} with writes to ${Object.keys(p).length} channel${Object.keys(p).length!==1?"s":""}:\x1B[0m
`,Object.entries(p).map(([C,b])=>`- ${wrap(COLORS_MAP.yellow,C)} -> ${b.map(o=>JSON.stringify(o)).join(", ")}`).join(`
`)].join(""))}class Call{constructor({func:t,name:n,input:p,retry:C,callbacks:b}){Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__lg_type",{enumerable:!0,configurable:!0,writable:!0,value:"call"}),this.func=t,this.name=n,this.input=p,this.retry=C,this.callbacks=b}}function isCall(m){return typeof m=="object"&&m!==null&&"__lg_type"in m&&m.__lg_type==="call"}function getNullChannelVersion(m){const t=Object.values(m),n=t.length>0?typeof t[0]:void 0;let p;return n==="number"?p=0:n==="string"&&(p=""),p}function getNewChannelVersions(m,t){if(Object.keys(m).length>0){const n=getNullChannelVersion(t);return Object.fromEntries(Object.entries(t).filter(([p,C])=>C>(m[p]??n)))}else return t}function _coerceToDict(m,t){return m&&!Array.isArray(m)&&!(m instanceof Date)&&typeof m=="object"?m:{[t]:m}}function patchConfigurable(m,t){return m===null?{configurable:t}:(m==null?void 0:m.configurable)===void 0?{...m,configurable:t}:{...m,configurable:{...m.configurable,...t}}}function patchCheckpointMap(m,t){var p,C;const n=(t==null?void 0:t.parents)??{};return Object.keys(n).length>0?patchConfigurable(m,{[CONFIG_KEY_CHECKPOINT_MAP]:{...n,[((p=m.configurable)==null?void 0:p.checkpoint_ns)??""]:(C=m.configurable)==null?void 0:C.checkpoint_id}}):m}function getRunnableForFunc(m,t){const n=new RunnableCallable({func:p=>t(...p),name:m,trace:!1,recurse:!1});return new RunnableSequence({name:m,first:n,last:new ChannelWrite([{channel:RETURN,value:PASSTHROUGH}],[TAG_HIDDEN])})}const increment=m=>m!==void 0?m+1:1;function shouldInterrupt(m,t,n){const p=Object.values(m.channel_versions),C=p.length>0?typeof p[0]:void 0;let b;C==="number"?b=0:C==="string"&&(b="");const o=m.versions_seen[INTERRUPT]??{},E=Object.entries(m.channel_versions).some(([a,x])=>x>(o[a]??b)),e=n.some(a=>{var x,c;return t==="*"?!((c=(x=a.config)==null?void 0:x.tags)!=null&&c.includes(TAG_HIDDEN)):t.includes(a.name)});return E&&e}function _localRead(m,t,n,p,C,b,o=!1){let E=[],e=new Set;if(Array.isArray(b))E=b.filter(x=>p.get(x)),b=b.filter(x=>!p.get(x)),e=new Set(b.filter(x=>C.writes.some(([c,u])=>c===x)));else{for(const[x]of C.writes)if(x===b){e=new Set([x]);break}e=e||new Set}let a;if(o&&e.size>0){const x=Object.fromEntries(Object.entries(n).filter(([h,s])=>e.has(h))),c=createCheckpoint(t,x,-1),u=emptyChannels(x,c);_applyWrites(copyCheckpoint(c),u,[C]),a=readChannels({...n,...u},b)}else a=readChannels(n,b);if(E.length>0)for(const x of E){const c=p.get(x);if(c){const u=c.call(m);a[x]=u}}return a}function _localWrite(m,t,n,p,C){for(const[b,o]of C)if(b===TASKS&&o!=null){if(!_isSend(o))throw new InvalidUpdateError(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(o)}`);if(!(o.node in n))throw new InvalidUpdateError(`Invalid node name "${o.node}" in Send packet`);p.replaceRuntimeValues(m,o.args)}t(C)}const IGNORE=new Set([NO_WRITES,PUSH,RESUME,INTERRUPT,RETURN,ERROR]);function _applyWrites(m,t,n,p){var c;n.sort((u,h)=>{var v,d;const s=((v=u.path)==null?void 0:v.slice(0,3))||[],l=((d=h.path)==null?void 0:d.slice(0,3))||[];for(let g=0;g<Math.min(s.length,l.length);g+=1){if(s[g]<l[g])return-1;if(s[g]>l[g])return 1}return s.length-l.length});const C=n.some(u=>u.triggers.length>0),b=Object.fromEntries(Object.entries(t).filter(([u,h])=>isBaseChannel(h)));for(const u of n){m.versions_seen[u.name]===void 0&&(m.versions_seen[u.name]={});for(const h of u.triggers)h in m.channel_versions&&(m.versions_seen[u.name][h]=m.channel_versions[h])}let o;Object.keys(m.channel_versions).length>0&&(o=maxChannelVersion(...Object.values(m.channel_versions)));const E=new Set(n.flatMap(u=>u.triggers).filter(u=>!RESERVED.includes(u)));for(const u of E)u in b&&b[u].consume()&&p!==void 0&&(m.channel_versions[u]=p(o,b[u]));(c=m.pending_sends)!=null&&c.length&&C&&(m.pending_sends=[]);const e={},a={};for(const u of n)for(const[h,s]of u.writes)IGNORE.has(h)||(h===TASKS?m.pending_sends.push({node:s.node,args:s.args}):h in b?h in e?e[h].push(s):e[h]=[s]:h in a?a[h].push(s):a[h]=[s]);o=void 0,Object.keys(m.channel_versions).length>0&&(o=maxChannelVersion(...Object.values(m.channel_versions)));const x=new Set;for(const[u,h]of Object.entries(e))if(u in b){let s;try{s=b[u].update(h)}catch(l){if(l.name===InvalidUpdateError.unminifiable_name){const v=new InvalidUpdateError(`Invalid update for channel "${u}" with values ${JSON.stringify(h)}: ${l.message}`);throw v.lc_error_code=l.lc_error_code,v}else throw l}s&&p!==void 0&&(m.channel_versions[u]=p(o,b[u])),x.add(u)}if(C)for(const u of Object.keys(b))x.has(u)||b[u].update([])&&p!==void 0&&(m.channel_versions[u]=p(o,b[u]));return a}function _prepareNextTasks(m,t,n,p,C,b,o,E){const e={};for(let a=0;a<m.pending_sends.length;a+=1){const x=_prepareSingleTask([PUSH,a],m,t,n,p,C,b,o,E);x!==void 0&&(e[x.id]=x)}for(const a of Object.keys(n)){const x=_prepareSingleTask([PULL,a],m,t,n,p,C,b,o,E);x!==void 0&&(e[x.id]=x)}return e}function _prepareSingleTask(m,t,n,p,C,b,o,E,e){const{step:a,checkpointer:x,manager:c}=e,u=o.configurable??{},h=u.checkpoint_ns??"";if(m[0]===PUSH&&isCall(m[m.length-1])){const s=m[m.length-1],l=getRunnableForFunc(s.name,s.func),v=[PUSH],d=h===""?s.name:`${h}${CHECKPOINT_NAMESPACE_SEPARATOR}${s.name}`,g=uuid5(JSON.stringify([d,a.toString(),s.name,PUSH,m[1],m[2]]),t.id),y=`${d}${CHECKPOINT_NAMESPACE_END}${g}`,S={langgraph_step:a,langgraph_node:s.name,langgraph_triggers:v,langgraph_path:m.slice(0,3),langgraph_checkpoint_ns:y};if(E){const T=[];return{name:s.name,input:s.input,proc:l,writes:T,config:patchConfig(mergeConfigs(o,{metadata:S,store:e.store??o.store}),{runName:s.name,callbacks:c==null?void 0:c.getChild(`graph:step:${a}`),configurable:{[CONFIG_KEY_TASK_ID]:g,[CONFIG_KEY_SEND]:P=>_localWrite(a,A=>T.push(...A),p,b,P),[CONFIG_KEY_READ]:(P,A=!1)=>_localRead(a,t,C,b,{name:s.name,writes:T,triggers:v,path:m.slice(0,3)},P,A),[CONFIG_KEY_CHECKPOINTER]:x??u[CONFIG_KEY_CHECKPOINTER],[CONFIG_KEY_CHECKPOINT_MAP]:{...u[CONFIG_KEY_CHECKPOINT_MAP],[h]:t.id},[CONFIG_KEY_SCRATCHPAD]:_scratchpad({pendingWrites:n??[],taskId:g,currentTaskInput:s.input}),[CONFIG_KEY_PREVIOUS_STATE]:t.channel_values[PREVIOUS],checkpoint_id:void 0,checkpoint_ns:y}}),triggers:v,retry_policy:s.retry,id:g,path:m.slice(0,3),writers:[]}}else return{id:g,name:s.name,interrupts:[],path:m.slice(0,3)}}else if(m[0]===PUSH){const s=typeof m[1]=="number"?m[1]:parseInt(m[1],10);if(s>=t.pending_sends.length)return;const l=t.pending_sends[s];if(!_isSendInterface(l)){console.warn(`Ignoring invalid packet ${JSON.stringify(l)} in pending sends.`);return}if(!(l.node in p)){console.warn(`Ignoring unknown node name ${l.node} in pending sends.`);return}const v=[PUSH],d=h===""?l.node:`${h}${CHECKPOINT_NAMESPACE_SEPARATOR}${l.node}`,g=uuid5(JSON.stringify([d,a.toString(),l.node,PUSH,s.toString()]),t.id),y=`${d}${CHECKPOINT_NAMESPACE_END}${g}`;let S={langgraph_step:a,langgraph_node:l.node,langgraph_triggers:v,langgraph_path:m,langgraph_checkpoint_ns:y};if(E){const T=p[l.node],w=T.getNode();if(w!==void 0){b.replaceRuntimePlaceholders(a,l.args),T.metadata!==void 0&&(S={...S,...T.metadata});const P=[];return{name:l.node,input:l.args,proc:w,subgraphs:T.subgraphs,writes:P,config:patchConfig(mergeConfigs(o,{metadata:S,tags:T.tags,store:e.store??o.store}),{runName:l.node,callbacks:c==null?void 0:c.getChild(`graph:step:${a}`),configurable:{[CONFIG_KEY_TASK_ID]:g,[CONFIG_KEY_SEND]:A=>_localWrite(a,R=>P.push(...R),p,b,A),[CONFIG_KEY_READ]:(A,R=!1)=>_localRead(a,t,C,b,{name:l.node,writes:P,triggers:v,path:m},A,R),[CONFIG_KEY_CHECKPOINTER]:x??u[CONFIG_KEY_CHECKPOINTER],[CONFIG_KEY_CHECKPOINT_MAP]:{...u[CONFIG_KEY_CHECKPOINT_MAP],[h]:t.id},[CONFIG_KEY_SCRATCHPAD]:_scratchpad({pendingWrites:n??[],taskId:g,currentTaskInput:l.args}),[CONFIG_KEY_PREVIOUS_STATE]:t.channel_values[PREVIOUS],checkpoint_id:void 0,checkpoint_ns:y}}),triggers:v,retry_policy:T.retryPolicy,id:g,path:m,writers:T.getWriters()}}}else return{id:g,name:l.node,interrupts:[],path:m}}else if(m[0]===PULL){const s=m[1].toString(),l=p[s];if(l===void 0)return;const v=getNullChannelVersion(t.channel_versions);if(v===void 0)return;const d=t.versions_seen[s]??{},g=l.triggers.filter(y=>{const S=readChannel(C,y,!1,!0);return!(S instanceof Error&&S.name===EmptyChannelError.unminifiable_name)&&(t.channel_versions[y]??v)>(d[y]??v)}).sort();if(g.length>0){const y=_procInput(a,l,b,C,E);if(y===void 0)return;const S=h===""?s:`${h}${CHECKPOINT_NAMESPACE_SEPARATOR}${s}`,T=uuid5(JSON.stringify([S,a.toString(),s,PULL,g]),t.id),w=`${S}${CHECKPOINT_NAMESPACE_END}${T}`;let P={langgraph_step:a,langgraph_node:s,langgraph_triggers:g,langgraph_path:m,langgraph_checkpoint_ns:w};if(E){const A=l.getNode();if(A!==void 0){l.metadata!==void 0&&(P={...P,...l.metadata});const R=[];return{name:s,input:y,proc:A,subgraphs:l.subgraphs,writes:R,config:patchConfig(mergeConfigs(o,{metadata:P,tags:l.tags,store:e.store??o.store}),{runName:s,callbacks:c==null?void 0:c.getChild(`graph:step:${a}`),configurable:{[CONFIG_KEY_TASK_ID]:T,[CONFIG_KEY_SEND]:I=>_localWrite(a,M=>{R.push(...M)},p,b,I),[CONFIG_KEY_READ]:(I,M=!1)=>_localRead(a,t,C,b,{name:s,writes:R,triggers:g,path:m},I,M),[CONFIG_KEY_CHECKPOINTER]:x??u[CONFIG_KEY_CHECKPOINTER],[CONFIG_KEY_CHECKPOINT_MAP]:{...u[CONFIG_KEY_CHECKPOINT_MAP],[h]:t.id},[CONFIG_KEY_SCRATCHPAD]:_scratchpad({pendingWrites:n??[],taskId:T,currentTaskInput:y}),[CONFIG_KEY_PREVIOUS_STATE]:t.channel_values[PREVIOUS],checkpoint_id:void 0,checkpoint_ns:w}}),triggers:g,retry_policy:l.retryPolicy,id:T,path:m,writers:l.getWriters()}}}else return{id:T,name:s,interrupts:[],path:m}}}}function _procInput(m,t,n,p,C){var o;let b;if(typeof t.channels=="object"&&!Array.isArray(t.channels)){b={};for(const[E,e]of Object.entries(t.channels))if(t.triggers.includes(e))try{b[E]=readChannel(p,e,!1)}catch(a){if(a.name===EmptyChannelError.unminifiable_name)return;throw a}else if(e in p)try{b[E]=readChannel(p,e,!1)}catch(a){if(a.name===EmptyChannelError.unminifiable_name)continue;throw a}else b[E]=(o=n.get(E))==null?void 0:o.call(m)}else if(Array.isArray(t.channels)){let E=!1;for(const e of t.channels)try{b=readChannel(p,e,!1),E=!0;break}catch(a){if(a.name===EmptyChannelError.unminifiable_name)continue;throw a}if(!E)return}else throw new Error(`Invalid channels type, expected list or dict, got ${t.channels}`);return C&&t.mapper!==void 0&&(b=t.mapper(b)),b}function _scratchpad({pendingWrites:m,taskId:t,currentTaskInput:n}){var b;const p=(b=m.find(([o,E])=>o===NULL_TASK_ID&&E===RESUME))==null?void 0:b[2],C={callCounter:0,interruptCounter:-1,resume:m.filter(([o,E])=>o===t&&E===RESUME).flatMap(([o,E,e])=>e),nullResume:p,subgraphCounter:0,currentTaskInput:n,consumeNullResume:()=>{if(C.nullResume)return delete C.nullResume,m.splice(m.findIndex(([o,E])=>o===NULL_TASK_ID&&E===RESUME),1),p}};return C}class IterableReadableWritableStream extends IterableReadableStream{get closed(){return this._closed}constructor(t){let n;const p=new Promise(C=>{n=C});super({start:C=>{n(C)}}),Object.defineProperty(this,"modes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"passthroughFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),p.then(C=>{this.controller=C}),this.passthroughFn=t.passthroughFn,this.modes=t.modes}push(t){var n;(n=this.passthroughFn)==null||n.call(this,t),this.controller.enqueue(t)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(t){this.controller.error(t)}}const INPUT_DONE=Symbol.for("INPUT_DONE"),INPUT_RESUMING=Symbol.for("INPUT_RESUMING"),DEFAULT_LOOP_LIMIT=25;function createDuplexStream(...m){return new IterableReadableWritableStream({passthroughFn:t=>{for(const n of m)n.modes.has(t[1])&&n.push(t)},modes:new Set(m.flatMap(t=>Array.from(t.modes)))})}class PregelLoop{constructor(t){Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerGetNextVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"managed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointNamespace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointPendingWrites",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"checkpointPreviousVersions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"step",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipDoneTasks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(this,"tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerPromises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"isNested",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_checkpointerChainedPromise",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toInterrupt",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.input=t.input,this.checkpointer=t.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=increment,this.checkpoint=t.checkpoint,this.checkpointMetadata=t.checkpointMetadata,this.checkpointPreviousVersions=t.checkpointPreviousVersions,this.channels=t.channels,this.managed=t.managed,this.checkpointPendingWrites=t.checkpointPendingWrites,this.step=t.step,this.stop=t.stop,this.config=t.config,this.checkpointConfig=t.checkpointConfig,this.isNested=t.isNested,this.manager=t.manager,this.outputKeys=t.outputKeys,this.streamKeys=t.streamKeys,this.nodes=t.nodes,this.skipDoneTasks=t.skipDoneTasks,this.store=t.store,this.stream=t.stream,this.checkpointNamespace=t.checkpointNamespace,this.prevCheckpointConfig=t.prevCheckpointConfig,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.debug=t.debug}static async initialize(t){var y,S,T,w,P,A,R,I,M,L,N,G;let{config:n,stream:p}=t;p!==void 0&&((y=n.configurable)==null?void 0:y[CONFIG_KEY_STREAM])!==void 0&&(p=createDuplexStream(p,n.configurable[CONFIG_KEY_STREAM]));const C=n.configurable?!("checkpoint_id"in n.configurable):!0,b=(S=n.configurable)==null?void 0:S[CONFIG_KEY_SCRATCHPAD];n.configurable&&b&&(b.subgraphCounter>0&&(n=patchConfigurable(n,{[CONFIG_KEY_CHECKPOINT_NS]:[n.configurable[CONFIG_KEY_CHECKPOINT_NS],b.subgraphCounter.toString()].join(CHECKPOINT_NAMESPACE_SEPARATOR)})),b.subgraphCounter+=1);const o=CONFIG_KEY_READ in(n.configurable??{});!o&&((T=n.configurable)==null?void 0:T.checkpoint_ns)!==void 0&&((w=n.configurable)==null?void 0:w.checkpoint_ns)!==""&&(n=patchConfigurable(n,{checkpoint_ns:"",checkpoint_id:void 0}));let E=n;((P=n.configurable)==null?void 0:P[CONFIG_KEY_CHECKPOINT_MAP])!==void 0&&((I=(A=n.configurable)==null?void 0:A[CONFIG_KEY_CHECKPOINT_MAP])!=null&&I[(R=n.configurable)==null?void 0:R.checkpoint_ns])&&(E=patchConfigurable(n,{checkpoint_id:n.configurable[CONFIG_KEY_CHECKPOINT_MAP][(M=n.configurable)==null?void 0:M.checkpoint_ns]}));const e=((N=(L=n.configurable)==null?void 0:L.checkpoint_ns)==null?void 0:N.split(CHECKPOINT_NAMESPACE_SEPARATOR))??[],a=await((G=t.checkpointer)==null?void 0:G.getTuple(E))??{config:n,checkpoint:emptyCheckpoint(),metadata:{source:"input",step:-2,writes:null,parents:{}},pendingWrites:[]};E={...n,...a.config,configurable:{checkpoint_ns:"",...n.configurable,...a.config.configurable}};const x=a.parentConfig,c=copyCheckpoint(a.checkpoint),u={...a.metadata},h=a.pendingWrites??[],s=emptyChannels(t.channelSpecs,c),l=(u.step??0)+1,v=l+(n.recursionLimit??DEFAULT_LOOP_LIMIT)+1,d={...c.channel_versions},g=t.store?new AsyncBatchedStore(t.store):void 0;return g&&g.start(),new PregelLoop({input:t.input,config:n,checkpointer:t.checkpointer,checkpoint:c,checkpointMetadata:u,checkpointConfig:E,prevCheckpointConfig:x,checkpointNamespace:e,channels:s,managed:t.managed,isNested:o,manager:t.manager,skipDoneTasks:C,step:l,stop:v,checkpointPreviousVersions:d,checkpointPendingWrites:h,outputKeys:t.outputKeys??[],streamKeys:t.streamKeys??[],nodes:t.nodes,stream:p,store:g,interruptAfter:t.interruptAfter,interruptBefore:t.interruptBefore,debug:t.debug})}_checkpointerPutAfterPrevious(t){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>{var n;return(n=this.checkpointer)==null?void 0:n.put(t.config,t.checkpoint,t.metadata,t.newVersions)}),this.checkpointerPromises.push(this._checkpointerChainedPromise)}async updateManagedValues(t,n){const p=this.managed.get(t);p&&"update"in p&&typeof p.update=="function"&&await p.update(n)}putWrites(t,n){var b,o;let p=n;if(p.length===0)return;p.every(([E])=>E in WRITES_IDX_MAP)&&(p=Array.from(new Map(p.map(E=>[E[0],E])).values()));for(const[E,e]of p){const a=this.checkpointPendingWrites.findIndex(x=>x[0]===t&&x[1]===E);E in WRITES_IDX_MAP&&a!==-1?this.checkpointPendingWrites[a]=[t,E,e]:this.checkpointPendingWrites.push([t,E,e])}const C=(o=this.checkpointer)==null?void 0:o.putWrites({...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_ns:((b=this.config.configurable)==null?void 0:b.checkpoint_ns)??"",checkpoint_id:this.checkpoint.id}},p,t);C!==void 0&&this.checkpointerPromises.push(C),this.tasks&&this._outputWrites(t,p)}_outputWrites(t,n,p=!1){const C=this.tasks[t];if(C!==void 0){if(C.config!==void 0&&(C.config.tags??[]).includes(TAG_HIDDEN))return;n.length>0&&n[0][0]!==ERROR&&n[0][0]!==INTERRUPT&&this._emit(gatherIteratorSync(prefixGenerator(mapOutputUpdates(this.outputKeys,[[C,n]],p),"updates"))),p||this._emit(gatherIteratorSync(prefixGenerator(mapDebugTaskResults(this.step,[[C,n]],this.streamKeys),"debug")))}}async tick(t){var b;this.store&&!this.store.isRunning&&((b=this.store)==null||b.start());const{inputKeys:n=[]}=t;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![INPUT_DONE,INPUT_RESUMING].includes(this.input))await this._first(n);else if(Object.values(this.tasks).every(o=>o.writes.filter(([E])=>!(E in WRITES_IDX_MAP)).length>0)){const o=Object.values(this.tasks).flatMap(a=>a.writes),E=_applyWrites(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion);for(const[a,x]of Object.entries(E))await this.updateManagedValues(a,x);const e=await gatherIterator(prefixGenerator(mapOutputValues(this.outputKeys,o,this.channels),"values"));if(this._emit(e),this.checkpointPendingWrites=[],await this._putCheckpoint({source:"loop",writes:mapOutputUpdates(this.outputKeys,Object.values(this.tasks).map(a=>[a,a.writes])).next().value??null}),shouldInterrupt(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new GraphInterrupt}else return!1;if(this.step>this.stop)return this.status="out_of_steps",!1;const p=_prepareNextTasks(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.input===INPUT_RESUMING,manager:this.manager,store:this.store,stream:this.stream});if(this.tasks=p,this.checkpointer&&this._emit(await gatherIterator(prefixGenerator(mapDebugCheckpoint(this.step-1,this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig),"debug"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(const[o,E,e]of this.checkpointPendingWrites){if(E===ERROR||E===INTERRUPT||E===RESUME)continue;const a=Object.values(this.tasks).find(x=>x.id===o);a&&a.writes.push([E,e])}for(const o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:n});if(shouldInterrupt(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new GraphInterrupt;const C=await gatherIterator(prefixGenerator(mapDebugTasks(this.step,Object.values(this.tasks)),"debug"));return this._emit(C),!0}async finishAndHandleError(t){const n=this._suppressInterrupt(t);if((n||t===void 0)&&(this.output=readChannels(this.channels,this.outputKeys)),n){if(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(p=>p.writes.length>0)){const p=_applyWrites(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion);for(const[C,b]of Object.entries(p))await this.updateManagedValues(C,b);this._emit(gatherIteratorSync(prefixGenerator(mapOutputValues(this.outputKeys,Object.values(this.tasks).flatMap(C=>C.writes),this.channels),"values")))}this._emit([["updates",{[INTERRUPT]:t.interrupts}]])}return n}acceptPush(t,n,p){var b,o;if(((b=this.interruptAfter)==null?void 0:b.length)>0&&shouldInterrupt(this.checkpoint,this.interruptAfter,[t])){this.toInterrupt.push(t);return}const C=_prepareSingleTask([PUSH,t.path??[],n,t.id,p],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,t.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(C){if(((o=this.interruptBefore)==null?void 0:o.length)>0&&shouldInterrupt(this.checkpoint,this.interruptBefore,[C])){this.toInterrupt.push(C);return}return this._emit(gatherIteratorSync(prefixGenerator(mapDebugTasks(this.step,[C]),"debug"))),this.debug&&printStepTasks(this.step,[C]),this.tasks[C.id]=C,this.skipDoneTasks&&this._matchWrites({[C.id]:C}),C}}_suppressInterrupt(t){return isGraphInterrupt(t)&&!this.isNested}async _first(t){var o;const{configurable:n}=this.config,p=Object.keys(this.checkpoint.channel_versions).length!==0&&(((o=this.config.configurable)==null?void 0:o[CONFIG_KEY_RESUMING])!==void 0||this.input===null||isCommand(this.input)),C=n==null?void 0:n[CONFIG_KEY_SCRATCHPAD];if(C&&C.nullResume!==void 0&&this.putWrites(NULL_TASK_ID,[[RESUME,C.nullResume]]),isCommand(this.input)){if(this.input.resume!=null&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");const E={};for(const[e,a,x]of mapCommand(this.input,this.checkpointPendingWrites))E[e]===void 0&&(E[e]=[]),E[e].push([a,x]);if(Object.keys(E).length===0)throw new EmptyInputError("Received empty Command input");for(const[e,a]of Object.entries(E))this.putWrites(e,a)}const b=(this.checkpointPendingWrites??[]).filter(E=>E[0]===NULL_TASK_ID).map(E=>E.slice(1));if(b.length>0&&_applyWrites(this.checkpoint,this.channels,[{name:INPUT,writes:b,triggers:[]}],this.checkpointerGetNextVersion),p){for(const e of Object.keys(this.channels))if(this.checkpoint.channel_versions[e]!==void 0){const a=this.checkpoint.channel_versions[e];this.checkpoint.versions_seen[INTERRUPT]={...this.checkpoint.versions_seen[INTERRUPT],[e]:a}}const E=await gatherIterator(prefixGenerator(mapOutputValues(this.outputKeys,!0,this.channels),"values"));this._emit(E)}else{const E=await gatherIterator(mapInput(t,this.input));if(E.length===0)throw new EmptyInputError(`Received no input writes for ${JSON.stringify(t,null,2)}`);const e=_prepareNextTasks(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step});_applyWrites(this.checkpoint,this.channels,Object.values(e).concat([{name:INPUT,writes:E,triggers:[]}]),this.checkpointerGetNextVersion),await this._putCheckpoint({source:"input",writes:Object.fromEntries(E)})}this.input=this.input===INPUT_RESUMING?INPUT_RESUMING:INPUT_DONE,this.isNested||(this.config=patchConfigurable(this.config,{[CONFIG_KEY_RESUMING]:this.input===INPUT_RESUMING}))}_emit(t){for(const n of t)this.stream.modes.has(n[0])&&this.stream.push([this.checkpointNamespace,...n])}async _putCheckpoint(t){var p,C,b,o;const n={...t,step:this.step,parents:((p=this.config.configurable)==null?void 0:p[CONFIG_KEY_CHECKPOINT_MAP])??{}};if(this.checkpointer!==void 0){this.prevCheckpointConfig=(b=(C=this.checkpointConfig)==null?void 0:C.configurable)!=null&&b.checkpoint_id?this.checkpointConfig:void 0,this.checkpointMetadata=n,this.checkpoint=createCheckpoint(this.checkpoint,this.channels,this.step),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_ns:((o=this.config.configurable)==null?void 0:o.checkpoint_ns)??""}};const E={...this.checkpoint.channel_versions},e=getNewChannelVersions(this.checkpointPreviousVersions,E);this.checkpointPreviousVersions=E,this._checkpointerPutAfterPrevious({config:{...this.checkpointConfig},checkpoint:copyCheckpoint(this.checkpoint),metadata:{...this.checkpointMetadata},newVersions:e}),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_id:this.checkpoint.id}}}this.step+=1}_matchWrites(t){for(const[n,p,C]of this.checkpointPendingWrites){if(p===ERROR||p===INTERRUPT||p===RESUME)continue;const b=Object.values(t).find(o=>o.id===n);b&&b.writes.push([p,C])}for(const n of Object.values(t))n.writes.length>0&&this._outputWrites(n.id,n.writes,!0)}}function isChatGenerationChunk(m){return isBaseMessage(m==null?void 0:m.message)}class StreamMessagesHandler extends BaseCallbackHandler{constructor(t){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"StreamMessagesHandler"}),Object.defineProperty(this,"streamFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadatas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"emittedChatModelRunIds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stableMessageIdMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.streamFn=t}_emit(t,n,p,C=!1){var o;if(C&&n.id!==void 0&&this.seen[n.id]!==void 0)return;let b=n.id;isToolMessage$1(n)?b??(b=`run-${p}-tool-${n.tool_call_id}`):((b==null||b===`run-${p}`)&&(b=this.stableMessageIdMap[p]??b??`run-${p}`),(o=this.stableMessageIdMap)[p]??(o[p]=b)),b!==n.id&&(n.id=b,n.lc_kwargs.id=b),n.id!=null&&(this.seen[n.id]=n),this.streamFn([t[0],"messages",[n,t[1]]])}handleChatModelStart(t,n,p,C,b,o,E,e){E&&(!o||!o.includes(TAG_NOSTREAM)&&!o.includes("nostream"))&&(this.metadatas[p]=[E.langgraph_checkpoint_ns.split("|"),{tags:o,name:e,...E}])}handleLLMNewToken(t,n,p,C,b,o){const E=o==null?void 0:o.chunk;this.emittedChatModelRunIds[p]=!0,this.metadatas[p]!==void 0&&(isChatGenerationChunk(E)?this._emit(this.metadatas[p],E.message,p):this._emit(this.metadatas[p],new AIMessageChunk({content:t}),p))}handleLLMEnd(t,n){var p,C;if(!this.emittedChatModelRunIds[n]){const b=(C=(p=t.generations)==null?void 0:p[0])==null?void 0:C[0];isBaseMessage(b==null?void 0:b.message)&&this._emit(this.metadatas[n],b==null?void 0:b.message,n,!0),delete this.emittedChatModelRunIds[n]}delete this.metadatas[n],delete this.stableMessageIdMap[n]}handleLLMError(t,n){delete this.metadatas[n]}handleChainStart(t,n,p,C,b,o,E,e){if(o!==void 0&&e===o.langgraph_node&&(b===void 0||!b.includes(TAG_HIDDEN))&&(this.metadatas[p]=[o.langgraph_checkpoint_ns.split("|"),{tags:b,name:e,...o}],typeof n=="object")){for(const a of Object.values(n))if((isBaseMessage(a)||isBaseMessageChunk(a))&&a.id!==void 0)this.seen[a.id]=a;else if(Array.isArray(a))for(const x of a)(isBaseMessage(x)||isBaseMessageChunk(x))&&x.id!==void 0&&(this.seen[x.id]=x)}}handleChainEnd(t,n){const p=this.metadatas[n];if(delete this.metadatas[n],p!==void 0){if(isBaseMessage(t))this._emit(p,t,n,!0);else if(Array.isArray(t))for(const C of t)isBaseMessage(C)&&this._emit(p,C,n,!0);else if(t!=null&&typeof t=="object"){for(const C of Object.values(t))if(isBaseMessage(C))this._emit(p,C,n,!0);else if(Array.isArray(C))for(const b of C)isBaseMessage(b)&&this._emit(p,b,n,!0)}}}handleChainError(t,n){delete this.metadatas[n]}}const DEFAULT_INITIAL_INTERVAL=500,DEFAULT_BACKOFF_FACTOR=2,DEFAULT_MAX_INTERVAL=128e3,DEFAULT_MAX_RETRIES=3,DEFAULT_STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],DEFAULT_RETRY_ON_HANDLER=m=>{var n,p;if(m.message.startsWith("Cancel")||m.message.startsWith("AbortError")||m.name==="AbortError"||(m==null?void 0:m.code)==="ECONNABORTED")return!1;const t=((n=m==null?void 0:m.response)==null?void 0:n.status)??(m==null?void 0:m.status);return!(t&&DEFAULT_STATUS_NO_RETRY.includes(+t)||((p=m==null?void 0:m.error)==null?void 0:p.code)==="insufficient_quota")};async function _runWithRetry(m,t,n,p){var x;const C=m.retry_policy??t;let b=C!==void 0?C.initialInterval??DEFAULT_INITIAL_INTERVAL:0,o=0,E,e,{config:a}=m;for(n&&(a=patchConfigurable(a,n));;){m.writes.splice(0,m.writes.length),E=void 0;try{e=await m.proc.invoke(m.input,a);break}catch(c){if(E=c,E.pregelTaskId=m.id,isParentCommand(E)){const l=(x=a==null?void 0:a.configurable)==null?void 0:x.checkpoint_ns,v=E.command;if(v.graph===l){for(const d of m.writers)await d.invoke(v,a);E=void 0;break}else if(v.graph===Command.PARENT){const d=getParentCheckpointNamespace(l);E.command=new Command({...E.command,graph:d})}}if(isGraphBubbleUp(E)||C===void 0||(o+=1,o>=(C.maxAttempts??DEFAULT_MAX_RETRIES))||!(C.retryOn??DEFAULT_RETRY_ON_HANDLER)(E))break;b=Math.min(C.maxInterval??DEFAULT_MAX_INTERVAL,b*(C.backoffFactor??DEFAULT_BACKOFF_FACTOR));const h=C.jitter?Math.floor(b+Math.random()*1e3):b;await new Promise(l=>setTimeout(l,h));const s=E.name??E.constructor.unminifiable_name??E.constructor.name;console.log(`Retrying task "${String(m.name)}" after ${b.toFixed(2)}ms (attempt ${o}) after ${s}: ${E}`),a=patchConfigurable(a,{[CONFIG_KEY_RESUMING]:!0})}}return{task:m,result:e,error:E}}class PregelRunner{constructor({loop:t,nodeFinished:n}){Object.defineProperty(this,"nodeFinished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.loop=t,this.nodeFinished=n}async tick(t={}){const{timeout:n,signal:p,retryPolicy:C,onStepWrite:b}=t;let o;const E=Object.values(this.loop.tasks).filter(a=>a.writes.length===0),e=this._executeTasksWithRetry(E,{stepTimeout:n,signal:p,retryPolicy:C});for await(const{task:a,error:x}of e)this._commit(a,x),(isGraphInterrupt(x)||isGraphBubbleUp(x)&&!isGraphInterrupt(o))&&(o=x);if(b==null||b(this.loop.step,Object.values(this.loop.tasks).map(a=>a.writes).flat()),isGraphInterrupt(o)||isGraphBubbleUp(o)&&this.loop.isNested)throw o}async*_executeTasksWithRetry(t,n){const{stepTimeout:p,retryPolicy:C}=n??{};let b=n==null?void 0:n.signal;const o=Symbol.for("promiseAdded");let E,e;function a(l){E=()=>{e=new Promise(a),l(o)}}e=new Promise(a);const x={};function c(l,v,d,{calls:g}={}){var T,w,P,A,R;if(d.every(([I])=>I!==PUSH))return((P=(w=(T=v.config)==null?void 0:T.configurable)==null?void 0:w[CONFIG_KEY_SEND])==null?void 0:P.call(w,d))??[];const y=(R=(A=v.config)==null?void 0:A.configurable)==null?void 0:R[CONFIG_KEY_SCRATCHPAD];if(!y)throw new Error(`BUG: No scratchpad found on task ${v.name}__${v.id}`);const S={};for(const[I,M]of d.entries()){const[L]=M;if(L!==PUSH)continue;const N=g==null?void 0:g[I],G=y.callCounter;if(y.callCounter+=1,N==null)throw new Error("BUG: No call found");const D=l.loop.acceptPush(v,G,N);if(!D)continue;const B=x[D.id];if(B!==void 0)S[I]=B;else if(D.writes.length>0){const $=D.writes.filter(([X])=>X===RETURN),k=D.writes.filter(([X])=>X===ERROR);if($.length>0)if($.length===1)S[I]=Promise.resolve($[0][1]);else throw new Error(`BUG: multiple returns found for task ${D.name}__${D.id}`);else if(k.length>0)if(k.length===1){const X=k[0][1],Y=X instanceof Error?X:new Error(String(X));S[I]=Promise.reject(Y)}else throw new Error(`BUG: multiple errors found for task ${D.name}__${D.id}`)}else{const $=_runWithRetry(D,C,{[CONFIG_KEY_SEND]:c.bind(null,l,D),[CONFIG_KEY_CALL]:u.bind(null,l,D)});x[D.id]=$,E(),S[I]=$.then(({result:k,error:X})=>X?Promise.reject(X):k)}}return Object.values(S)}function u(l,v,d,g,y,S={}){const T=c(l,v,[[PUSH,null]],{calls:[new Call({func:d,name:g,input:y,retry:S.retry,callbacks:S.callbacks})]});return T!==void 0?T.length===1?T[0]:Promise.all(T):Promise.resolve()}if(p&&b?"any"in AbortSignal&&(b=AbortSignal.any([b,AbortSignal.timeout(p)])):p&&(b=AbortSignal.timeout(p)),b!=null&&b.aborted)throw new Error("Abort");Object.assign(x,Object.fromEntries(t.map(l=>[l.id,_runWithRetry(l,C,{[CONFIG_KEY_SEND]:c==null?void 0:c.bind(null,this,l),[CONFIG_KEY_CALL]:u==null?void 0:u.bind(null,this,l)}).catch(v=>({task:l,error:v}))])));let h;const s=new Promise((l,v)=>{h=()=>v(new Error("Abort")),b==null||b.addEventListener("abort",h)}).finally(()=>b==null?void 0:b.removeEventListener("abort",h));for(;Object.keys(x).length>0;){const l=await Promise.race([...Object.values(x),s,e]);l!==o&&(yield l,delete x[l.task.id])}}_commit(t,n){var p;if(n!==void 0)if(isGraphInterrupt(n)){if(n.interrupts.length){const C=n.interrupts.map(o=>[INTERRUPT,o]),b=t.writes.filter(o=>o[0]===RESUME);b.length&&C.push(...b),this.loop.putWrites(t.id,C)}}else if(isGraphBubbleUp(n)&&t.writes.length)this.loop.putWrites(t.id,t.writes);else throw this.loop.putWrites(t.id,[[ERROR,{message:n.message,name:n.name}]]),n;else this.nodeFinished&&(((p=t.config)==null?void 0:p.tags)==null||!t.config.tags.includes(TAG_HIDDEN))&&this.nodeFinished(String(t.name)),t.writes.length===0&&t.writes.push([NO_WRITES,null]),this.loop.putWrites(t.id,t.writes)}}function isString(m){return typeof m=="string"}class Channel{static subscribeTo(t,n){const{key:p,tags:C}={key:void 0,tags:void 0,...n??{}};if(Array.isArray(t)&&p!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let b;isString(t)?p?b={[p]:t}:b=[t]:b=Object.fromEntries(t.map(E=>[E,E]));const o=Array.isArray(t)?t:[t];return new PregelNode({channels:b,triggers:o,tags:C})}static writeTo(t,n){const p=[];for(const C of t)p.push({channel:C,value:PASSTHROUGH,skipNone:!1});for(const[C,b]of Object.entries(n??{}))Runnable.isRunnable(b)||typeof b=="function"?p.push({channel:C,value:PASSTHROUGH,skipNone:!0,mapper:_coerceToRunnable(b)}):p.push({channel:C,value:b,skipNone:!1});return new ChannelWrite(p)}}class Pregel extends Runnable{static lc_name(){return"LangGraph"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]}),Object.defineProperty(this,"lg_is_pregel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoValidate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"streamMode",{enumerable:!0,configurable:!0,writable:!0,value:["values"]}),Object.defineProperty(this,"streamChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{streamMode:n}=t;n!=null&&!Array.isArray(n)&&(n=[n]),this.nodes=t.nodes,this.channels=t.channels,this.autoValidate=t.autoValidate??this.autoValidate,this.streamMode=n??this.streamMode,this.inputChannels=t.inputChannels,this.outputChannels=t.outputChannels,this.streamChannels=t.streamChannels??this.streamChannels,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.stepTimeout=t.stepTimeout??this.stepTimeout,this.debug=t.debug??this.debug,this.checkpointer=t.checkpointer,this.retryPolicy=t.retryPolicy,this.config=t.config,this.store=t.store,this.name=t.name,this.autoValidate&&this.validate()}withConfig(t){const n=mergeConfigs(this.config,t);return new this.constructor({...this,config:n})}validate(){return validateGraph({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore}),this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}async getGraphAsync(t){return this.getGraph(t)}*getSubgraphs(t,n){var p;for(const[C,b]of Object.entries(this.nodes)){if(t!==void 0&&!t.startsWith(C))continue;const o=(p=b.subgraphs)!=null&&p.length?b.subgraphs:[b.bound];for(const E of o){const e=findSubgraphPregel(E);if(e!==void 0){if(C===t){yield[C,e];return}if(t===void 0&&(yield[C,e]),n){let a=t;t!==void 0&&(a=t.slice(C.length+1));for(const[x,c]of e.getSubgraphs(a,n))yield[`${C}${CHECKPOINT_NAMESPACE_SEPARATOR}${x}`,c]}}}}}async*getSubgraphsAsync(t,n){yield*this.getSubgraphs(t,n)}async _prepareStateSnapshot({config:t,saved:n,subgraphCheckpointer:p}){var c,u,h,s;if(n===void 0)return{values:{},next:[],config:t,tasks:[]};const{managed:C}=await this.prepareSpecs(t,{skipManaged:!0}),b=emptyChannels(this.channels,n.checkpoint),o=Object.values(_prepareNextTasks(n.checkpoint,n.pendingWrites,this.nodes,b,C,n.config,!1,{step:(((c=n.metadata)==null?void 0:c.step)??-1)+1})),E=await gatherIterator(this.getSubgraphsAsync()),e=((u=n.config.configurable)==null?void 0:u.checkpoint_ns)??"",a={};for(const l of o){const v=E.find(([g])=>g===l.name);if(!v)continue;let d=`${l.name}${CHECKPOINT_NAMESPACE_END}${l.id}`;if(e&&(d=`${e}${CHECKPOINT_NAMESPACE_SEPARATOR}${d}`),p===void 0){const g={configurable:{thread_id:(h=n.config.configurable)==null?void 0:h.thread_id,checkpoint_ns:d}};a[l.id]=g}else{const g={configurable:{[CONFIG_KEY_CHECKPOINTER]:p,thread_id:(s=n.config.configurable)==null?void 0:s.thread_id,checkpoint_ns:d}};a[l.id]=await v[1].getState(g,{subgraphs:!0})}}const x=(n.pendingWrites??[]).filter(l=>l[0]===NULL_TASK_ID).map(l=>l.slice(1));return x.length>0&&_applyWrites(n.checkpoint,b,[{name:INPUT,writes:x,triggers:[]}]),{values:readChannels(b,this.streamChannelsAsIs),next:o.map(l=>l.name),tasks:tasksWithWrites(o,(n==null?void 0:n.pendingWrites)??[],a),metadata:n.metadata,config:patchCheckpointMap(n.config,n.metadata),createdAt:n.checkpoint.ts,parentConfig:n.parentConfig}}async getState(t,n){var e,a,x;const p=((e=t.configurable)==null?void 0:e[CONFIG_KEY_CHECKPOINTER])??this.checkpointer;if(!p)throw new GraphValueError("No checkpointer set");const C=((a=t.configurable)==null?void 0:a.checkpoint_ns)??"";if(C!==""&&((x=t.configurable)==null?void 0:x[CONFIG_KEY_CHECKPOINTER])===void 0){const c=recastCheckpointNamespace(C);for await(const[u,h]of this.getSubgraphsAsync(c,!0))if(u===c)return await h.getState(patchConfigurable$1(t,{[CONFIG_KEY_CHECKPOINTER]:p}),{subgraphs:n==null?void 0:n.subgraphs});throw new Error(`Subgraph with namespace "${c}" not found.`)}const b=mergeConfigs(this.config,t),o=await p.getTuple(t);return await this._prepareStateSnapshot({config:b,saved:o,subgraphCheckpointer:n!=null&&n.subgraphs?p:void 0})}async*getStateHistory(t,n){var o,E,e;const p=((o=t.configurable)==null?void 0:o[CONFIG_KEY_CHECKPOINTER])??this.checkpointer;if(!p)throw new Error("No checkpointer set");const C=((E=t.configurable)==null?void 0:E.checkpoint_ns)??"";if(C!==""&&((e=t.configurable)==null?void 0:e[CONFIG_KEY_CHECKPOINTER])===void 0){const a=recastCheckpointNamespace(C);for await(const[x,c]of this.getSubgraphsAsync(a,!0))if(x===a){yield*c.getStateHistory(patchConfigurable$1(t,{[CONFIG_KEY_CHECKPOINTER]:p}),n);return}throw new Error(`Subgraph with namespace "${a}" not found.`)}const b=mergeConfigs(this.config,t,{configurable:{checkpoint_ns:C}});for await(const a of p.list(b,n))yield this._prepareStateSnapshot({config:a.config,saved:a})}async updateState(t,n,p){var w,P,A,R,I,M,L,N,G,D,B,$;const C=((w=t.configurable)==null?void 0:w[CONFIG_KEY_CHECKPOINTER])??this.checkpointer;if(!C)throw new GraphValueError("No checkpointer set");const b=((P=t.configurable)==null?void 0:P.checkpoint_ns)??"";if(b!==""&&((A=t.configurable)==null?void 0:A[CONFIG_KEY_CHECKPOINTER])===void 0){const k=recastCheckpointNamespace(b);for await(const[,X]of this.getSubgraphsAsync(k,!0))return await X.updateState(patchConfigurable$1(t,{[CONFIG_KEY_CHECKPOINTER]:C}),n,p);throw new Error(`Subgraph "${k}" not found`)}const o=this.config?mergeConfigs(this.config,t):t,E=await C.getTuple(o),e=E!==void 0?copyCheckpoint(E.checkpoint):emptyCheckpoint(),a={...E==null?void 0:E.checkpoint.channel_versions},x=((R=E==null?void 0:E.metadata)==null?void 0:R.step)??-1;let c=patchConfigurable$1(o,{checkpoint_ns:((I=o.configurable)==null?void 0:I.checkpoint_ns)??""}),u=o.metadata??{};if(E!=null&&E.config.configurable&&(c=patchConfigurable$1(o,E.config.configurable),u={...E.metadata,...u}),n==null&&p===void 0){const k=await C.put(c,createCheckpoint(e,void 0,x),{source:"update",step:x+1,writes:{},parents:((M=E==null?void 0:E.metadata)==null?void 0:M.parents)??{}},{});return patchCheckpointMap(k,E?E.metadata:void 0)}const h=emptyChannels(this.channels,e),{managed:s}=await this.prepareSpecs(o,{skipManaged:!0});if(n===null&&p==="__end__"){if(E){const X=_prepareNextTasks(e,E.pendingWrites||[],this.nodes,h,s,E.config,!0,{step:(((L=E.metadata)==null?void 0:L.step)??-1)+1,checkpointer:this.checkpointer||void 0,store:this.store}),Y=(E.pendingWrites||[]).filter(Z=>Z[0]===NULL_TASK_ID).map(Z=>Z.slice(1));Y.length>0&&_applyWrites(E.checkpoint,h,[{name:INPUT,writes:Y,triggers:[]}]);for(const[Z,Q,j]of E.pendingWrites||[])[ERROR,INTERRUPT,SCHEDULED$1].includes(Q)||Z in X&&X[Z].writes.push([Q,j]);_applyWrites(e,h,Object.values(X))}const k=await C.put(c,createCheckpoint(e,void 0,x),{...u,source:"update",step:x+1,writes:{},parents:((N=E==null?void 0:E.metadata)==null?void 0:N.parents)??{}},{});return patchCheckpointMap(k,E?E.metadata:void 0)}if(n==null&&p==="__copy__"){const k=await C.put((E==null?void 0:E.parentConfig)??c,createCheckpoint(e,void 0,x),{source:"fork",step:x+1,writes:{},parents:((G=E==null?void 0:E.metadata)==null?void 0:G.parents)??{}},{});return patchCheckpointMap(k,E?E.metadata:void 0)}if(((D=o.configurable)==null?void 0:D.checkpoint_id)===void 0&&(E==null?void 0:E.pendingWrites)!==void 0&&E.pendingWrites.length>0){const k=_prepareNextTasks(e,E.pendingWrites,this.nodes,h,s,E.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(((B=E.metadata)==null?void 0:B.step)??-1)+1}),X=(E.pendingWrites??[]).filter(Z=>Z[0]===NULL_TASK_ID).map(Z=>Z.slice(1));X.length>0&&_applyWrites(E.checkpoint,h,[{name:INPUT,writes:X,triggers:[]}]);for(const[Z,Q,j]of E.pendingWrites)[ERROR,INTERRUPT,SCHEDULED$1].includes(Q)||k[Z]===void 0||k[Z].writes.push([Q,j]);const Y=Object.values(k).filter(Z=>Z.writes.length>0);Y.length>0&&_applyWrites(e,h,Y)}const l=Object.values(e.versions_seen).map(k=>Object.values(k)).flat().find(k=>!!k);if(p===void 0&&l===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(p=this.inputChannels);else if(p===void 0){const k=Object.entries(e.versions_seen).map(([X,Y])=>Object.values(Y).map(Z=>[Z,X])).flat().sort(([X],[Y])=>compareChannelVersions(X,Y));k&&(k.length===1?p=k[0][1]:k[k.length-1][0]!==k[k.length-2][0]&&(p=k[k.length-1][1]))}if(p===void 0)throw new InvalidUpdateError('Ambiguous update, specify "asNode"');if(this.nodes[p]===void 0)throw new InvalidUpdateError(`Node "${p.toString()}" does not exist`);const v=this.nodes[p].getWriters();if(!v.length)throw new InvalidUpdateError(`No writers found for node "${p.toString()}"`);const d={name:p,input:n,proc:v.length>1?RunnableSequence.from(v,{omitSequenceTags:!0}):v[0],writes:[],triggers:[INTERRUPT],id:uuid5(INTERRUPT,e.id),writers:[]};await d.proc.invoke(d.input,patchConfig({...o,store:(o==null?void 0:o.store)??this.store},{runName:o.runName??`${this.getName()}UpdateState`,configurable:{[CONFIG_KEY_SEND]:k=>d.writes.push(...k),[CONFIG_KEY_READ]:(k,X=!1)=>_localRead(x,e,h,s,d,k,X)}}));const[g,y]=[d.writes.filter(k=>k[0]!==PUSH),d.writes.filter(k=>k[0]===PUSH)];E!==void 0&&g.length>0&&await C.putWrites(c,g,d.id),_applyWrites(e,h,[d],C.getNextVersion.bind(this.checkpointer));const S=getNewChannelVersions(a,e.channel_versions),T=await C.put(c,createCheckpoint(e,h,x+1),{source:"update",step:x+1,writes:{[p]:n},parents:(($=E==null?void 0:E.metadata)==null?void 0:$.parents)??{}},S);return y.length>0&&await C.putWrites(T,y,d.id),patchCheckpointMap(T,E?E.metadata:void 0)}_defaults(t){var g,y;const{debug:n,streamMode:p,inputKeys:C,outputKeys:b,interruptAfter:o,interruptBefore:E,...e}=t;let a=!0;const x=n!==void 0?n:this.debug;let c=b;c===void 0?c=this.streamChannelsAsIs:validateKeys(c,this.channels);let u=C;u===void 0?u=this.inputChannels:validateKeys(u,this.channels);const h=E??this.interruptBefore??[],s=o??this.interruptAfter??[];let l;p!==void 0?(l=Array.isArray(p)?p:[p],a=typeof p=="string"):(l=this.streamMode,a=!0),((g=t.configurable)==null?void 0:g[CONFIG_KEY_TASK_ID])!==void 0&&(l=["values"]);let v;this.checkpointer===!1?v=void 0:t!==void 0&&((y=t.configurable)==null?void 0:y[CONFIG_KEY_CHECKPOINTER])!==void 0?v=t.configurable[CONFIG_KEY_CHECKPOINTER]:v=this.checkpointer;const d=t.store??this.store;return[x,l,u,c,e,h,s,v,d,a]}async stream(t,n){var C;const p={recursionLimit:(C=this.config)==null?void 0:C.recursionLimit,...n};return super.stream(t,p)}async prepareSpecs(t,n){const p={...t,store:this.store},C={},b={};for(const[E,e]of Object.entries(this.channels))isBaseChannel(e)?C[E]=e:n!=null&&n.skipManaged?b[E]={cls:NoopManagedValue,params:{config:{}}}:b[E]=e;const o=new ManagedValueMapping(await Object.entries(b).reduce(async(E,[e,a])=>{const x=await E;let c;return isConfiguredManagedValue(a)?("key"in a.params&&a.params.key===ChannelKeyPlaceholder&&(a.params.key=e),c=await a.cls.initialize(p,a.params)):c=await a.initialize(p),c!==void 0&&x.push([e,c]),x},Promise.resolve([])));return{channelSpecs:C,managed:o}}async*_streamIterator(t,n){const p=n==null?void 0:n.subgraphs,C=ensureLangGraphConfig(this.config,n);if(C.recursionLimit===void 0||C.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&C.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');const{runId:b,...o}=C,[E,e,,a,x,c,u,h,s,l]=this._defaults(o),v=new IterableReadableWritableStream({modes:new Set(e)});if(e.includes("messages")){const R=new StreamMessagesHandler(M=>v.push(M)),{callbacks:I}=x;if(I===void 0)x.callbacks=[R];else if(Array.isArray(I))x.callbacks=I.concat(R);else{const M=I.copy();M.addHandler(R,!0),x.callbacks=M}}e.includes("custom")&&(x.writer=R=>v.push([[],"custom",R]));const d=await getCallbackManagerForConfig(x),g=await(d==null?void 0:d.handleChainStart(this.toJSON(),_coerceToDict(t,"input"),b,void 0,void 0,void 0,(x==null?void 0:x.runName)??this.getName())),{channelSpecs:y,managed:S}=await this.prepareSpecs(x);let T,w;const A=(async()=>{var R,I;try{T=await PregelLoop.initialize({input:t,config:x,checkpointer:h,nodes:this.nodes,channelSpecs:y,managed:S,outputKeys:a,streamKeys:this.streamChannelsAsIs,store:s,stream:v,interruptAfter:u,interruptBefore:c,manager:g,debug:this.debug});const M=new PregelRunner({loop:T,nodeFinished:(R=x.configurable)==null?void 0:R.nodeFinished});n!=null&&n.subgraphs&&(T.config.configurable={...T.config.configurable,[CONFIG_KEY_STREAM]:T.stream}),await this._runLoop({loop:T,runner:M,debug:E,config:x})}catch(M){w=M}finally{try{T&&await((I=T.store)==null?void 0:I.stop()),await Promise.all([...(T==null?void 0:T.checkpointerPromises)??[],...Array.from(S.values()).map(M=>M.promises())])}catch(M){w=w??M}w?v.error(w):v.close()}})();try{for await(const R of v){if(R===void 0)throw new Error("Data structure error.");const[I,M,L]=R;e.includes(M)&&(p&&!l?yield[I,M,L]:l?p?yield[I,L]:yield L:yield[M,L])}}catch(R){throw await(g==null?void 0:g.handleChainError(w)),R}finally{await A}await(g==null?void 0:g.handleChainEnd((T==null?void 0:T.output)??{}))}async invoke(t,n){const p=(n==null?void 0:n.streamMode)??"values",C={...n,outputKeys:(n==null?void 0:n.outputKeys)??this.outputChannels,streamMode:p},b=[],o=await this.stream(t,C);for await(const E of o)b.push(E);return p==="values"?b[b.length-1]:b}async _runLoop(t){const{loop:n,runner:p,debug:C,config:b}=t;let o;try{for(;await n.tick({inputKeys:this.inputChannels});)C&&printStepCheckpoint(n.checkpointMetadata.step,n.channels,this.streamChannelsList),C&&printStepTasks(n.step,Object.values(n.tasks)),await p.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(E,e)=>{C&&printStepWrites(E,e,this.streamChannelsList)},signal:b.signal});if(n.status==="out_of_steps")throw new GraphRecursionError([`Recursion limit of ${b.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(E){if(o=E,!await n.finishAndHandleError(o))throw E}finally{o===void 0&&await n.finishAndHandleError()}}}class EphemeralValue extends BaseChannel{constructor(t=!0){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"EphemeralValue"}),Object.defineProperty(this,"guard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.guard=t}fromCheckpoint(t){const n=new EphemeralValue(this.guard);return t&&(n.value=[t]),n}update(t){if(t.length===0){const n=this.value.length>0;return this.value=[],n}if(t.length!==1&&this.guard)throw new InvalidUpdateError("EphemeralValue can only receive one value per step.");return this.value=[t[t.length-1]],!0}get(){if(this.value.length===0)throw new EmptyChannelError;return this.value[0]}checkpoint(){if(this.value.length===0)throw new EmptyChannelError;return this.value[0]}}class Branch{constructor(t){Object.defineProperty(this,"condition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Runnable.isRunnable(t.path)?this.condition=t.path:this.condition=_coerceToRunnable(t.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(t.pathMap)?t.pathMap.reduce((n,p)=>(n[p]=p,n),{}):t.pathMap}run(t,n){return ChannelWrite.registerWriter(new RunnableCallable({name:"<branch_run>",trace:!1,func:async(p,C)=>{try{return await this._route(p,C,t,n)}catch(b){throw b.name===NodeInterrupt.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),b}}}))}async _route(t,n,p,C){let b=await this.condition.invoke(C?C(n):t,n);Array.isArray(b)||(b=[b]);let o;if(this.ends?o=b.map(e=>_isSend(e)?e:this.ends[e]):o=b,o.some(e=>!e))throw new Error("Branch condition returned unknown or null destination");if(o.filter(_isSend).some(e=>e.node===END))throw new InvalidUpdateError("Cannot send a packet to the END node");return await p(o,n)??t}}class Graph{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compiled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(t){this.compiled&&console.warn(t)}get allEdges(){return this.edges}addNode(t,n,p){for(const b of[CHECKPOINT_NAMESPACE_SEPARATOR,CHECKPOINT_NAMESPACE_END])if(t.includes(b))throw new Error(`"${b}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),t in this.nodes)throw new Error(`Node \`${t}\` already present.`);if(t===END)throw new Error(`Node \`${t}\` is reserved.`);const C=_coerceToRunnable(n);return this.nodes[t]={runnable:C,metadata:p==null?void 0:p.metadata,subgraphs:isPregelLike(C)?[C]:p==null?void 0:p.subgraphs,ends:p==null?void 0:p.ends},this}addEdge(t,n){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),t===END)throw new Error("END cannot be a start node");if(n===START)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([p])=>p===t)&&!("channels"in this))throw new Error(`Already found path for ${t}. For multiple edges, use StateGraph.`);return this.edges.add([t,n]),this}addConditionalEdges(t,n,p){const C=typeof t=="object"?t:{source:t,path:n,pathMap:p};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!Runnable.isRunnable(C.path)){const o=Array.isArray(C.pathMap)?C.pathMap.join(","):Object.keys(C.pathMap??{}).join(",");C.path=_coerceToRunnable(C.path).withConfig({runName:`Branch<${C.source}${o!==""?`,${o}`:""}>`.slice(0,63)})}const b=C.path.getName()==="RunnableLambda"?"condition":C.path.getName();if(this.branches[C.source]&&this.branches[C.source][b])throw new Error(`Condition \`${b}\` already present for node \`${t}\``);return this.branches[C.source]||(this.branches[C.source]={}),this.branches[C.source][b]=new Branch(C),this}setEntryPoint(t){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(START,t)}setFinishPoint(t){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(t,END)}compile({checkpointer:t,interruptBefore:n,interruptAfter:p,name:C}={}){this.validate([...Array.isArray(n)?n:[],...Array.isArray(p)?p:[]]);const b=new CompiledGraph({builder:this,checkpointer:t,interruptAfter:p,interruptBefore:n,autoValidate:!1,nodes:{},channels:{[START]:new EphemeralValue,[END]:new EphemeralValue},inputChannels:START,outputChannels:END,streamChannels:[],streamMode:"values",name:C});for(const[o,E]of Object.entries(this.nodes))b.attachNode(o,E);for(const[o,E]of this.edges)b.attachEdge(o,E);for(const[o,E]of Object.entries(this.branches))for(const[e,a]of Object.entries(E))b.attachBranch(o,e,a);return b.validate()}validate(t){const n=new Set([...this.allEdges].map(([C,b])=>C));for(const[C]of Object.entries(this.branches))n.add(C);for(const C of n)if(C!==START&&!(C in this.nodes))throw new Error(`Found edge starting at unknown node \`${C}\``);const p=new Set([...this.allEdges].map(([C,b])=>b));for(const[C,b]of Object.entries(this.branches))for(const o of Object.values(b))if(o.ends)for(const E of Object.values(o.ends))p.add(E);else{p.add(END);for(const E of Object.keys(this.nodes))E!==C&&p.add(E)}for(const C of Object.values(this.nodes))for(const b of C.ends??[])p.add(b);for(const C of Object.keys(this.nodes))if(!p.has(C))throw new UnreachableNodeError([`Node \`${C}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(const C of p)if(C!==END&&!(C in this.nodes))throw new Error(`Found edge ending at unknown node \`${C}\``);if(t){for(const C of t)if(!(C in this.nodes))throw new Error(`Interrupt node \`${C}\` is not present`)}this.compiled=!0}}class CompiledGraph extends Pregel{constructor({builder:t,...n}){super(n),Object.defineProperty(this,"builder",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.builder=t}attachNode(t,n){this.channels[t]=new EphemeralValue,this.nodes[t]=new PregelNode({channels:[],triggers:[],metadata:n.metadata,subgraphs:n.subgraphs,ends:n.ends}).pipe(n.runnable).pipe(new ChannelWrite([{channel:t,value:PASSTHROUGH}],[TAG_HIDDEN])),this.streamChannels.push(t)}attachEdge(t,n){if(n===END){if(t===START)throw new Error("Cannot have an edge from START to END");this.nodes[t].writers.push(new ChannelWrite([{channel:END,value:PASSTHROUGH}],[TAG_HIDDEN]))}else this.nodes[n].triggers.push(t),this.nodes[n].channels.push(t)}attachBranch(t,n,p){t===START&&!this.nodes[START]&&(this.nodes[START]=Channel.subscribeTo(START,{tags:[TAG_HIDDEN]})),this.nodes[t].pipe(p.run(b=>{const o=b.map(E=>_isSend(E)?E:{channel:E===END?END:`branch:${t}:${n}:${E}`,value:PASSTHROUGH});return new ChannelWrite(o,[TAG_HIDDEN])}));const C=p.ends?Object.values(p.ends):Object.keys(this.nodes);for(const b of C)if(b!==END){const o=`branch:${t}:${n}:${b}`;this.channels[o]=new EphemeralValue,this.nodes[b].triggers.push(o),this.nodes[b].channels.push(o)}}async getGraphAsync(t){var c,u,h,s;const n=t==null?void 0:t.xray,p=new Graph$1,C={[START]:p.addNode({schema:z.any()},START)},b={};let o={};n&&(o=Object.fromEntries((await gatherIterator(this.getSubgraphsAsync())).filter(l=>isCompiledGraph(l[1]))));function E(l,v,d,g=!1){if(v===END&&b[END]===void 0&&(b[END]=p.addNode({schema:z.any()},END)),C[l]!==void 0){if(b[v]===void 0)throw new Error(`End node ${v} not found!`);return p.addEdge(C[l],b[v],d!==v?d:void 0,g)}}for(const[l,v]of Object.entries(this.builder.nodes)){const d=_escapeMermaidKeywords(l),g=v.runnable,y=v.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(l)&&((u=this.interruptAfter)!=null&&u.includes(l))?y.__interrupt="before,after":(h=this.interruptBefore)!=null&&h.includes(l)?y.__interrupt="before":(s=this.interruptAfter)!=null&&s.includes(l)&&(y.__interrupt="after"),n){const S=typeof n=="number"?n-1:n,T=o[l]!==void 0?await o[l].getGraphAsync({...t,xray:S}):g.getGraph(t);if(T.trimFirstNode(),T.trimLastNode(),Object.keys(T.nodes).length>1){let A=function(I){return I?I.lc_runnable:!1},R=function(I,M){if(I!==void 0&&!validate$1(I))return I;if(A(M))try{let L=M.getName();return L=L.startsWith("Runnable")?L.slice(8):L,L}catch{return M.getName()}else return M.name??"UnknownSchema"};var a=A,x=R;const[w,P]=p.extend(T,d);if(w===void 0)throw new Error(`Could not extend subgraph "${l}" due to missing entrypoint.`);P!==void 0&&(C[d]={name:R(P.id,P.data),...P}),b[d]={name:R(w.id,w.data),...w}}else{const w=p.addNode(g,d,y);C[d]=w,b[d]=w}}else{const S=p.addNode(g,d,y);C[d]=S,b[d]=S}}const e=[...this.builder.allEdges].sort(([l],[v])=>l<v?-1:v>l?1:0);for(const[l,v]of e)E(_escapeMermaidKeywords(l),_escapeMermaidKeywords(v));for(const[l,v]of Object.entries(this.builder.branches)){const d={...Object.fromEntries(Object.keys(this.builder.nodes).filter(g=>g!==l).map(g=>[_escapeMermaidKeywords(g),_escapeMermaidKeywords(g)])),[END]:END};for(const g of Object.values(v)){let y;g.ends!==void 0?y=g.ends:y=d;for(const[S,T]of Object.entries(y))E(_escapeMermaidKeywords(l),_escapeMermaidKeywords(T),S,!0)}}for(const[l,v]of Object.entries(this.builder.nodes))if(v.ends!==void 0)for(const d of v.ends)E(_escapeMermaidKeywords(l),_escapeMermaidKeywords(d),void 0,!0);return p}getGraph(t){var c,u,h,s;const n=t==null?void 0:t.xray,p=new Graph$1,C={[START]:p.addNode({schema:z.any()},START)},b={};let o={};n&&(o=Object.fromEntries(gatherIteratorSync(this.getSubgraphs()).filter(l=>isCompiledGraph(l[1]))));function E(l,v,d,g=!1){return v===END&&b[END]===void 0&&(b[END]=p.addNode({schema:z.any()},END)),p.addEdge(C[l],b[v],d!==v?d:void 0,g)}for(const[l,v]of Object.entries(this.builder.nodes)){const d=_escapeMermaidKeywords(l),g=v.runnable,y=v.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(l)&&((u=this.interruptAfter)!=null&&u.includes(l))?y.__interrupt="before,after":(h=this.interruptBefore)!=null&&h.includes(l)?y.__interrupt="before":(s=this.interruptAfter)!=null&&s.includes(l)&&(y.__interrupt="after"),n){const S=typeof n=="number"?n-1:n,T=o[l]!==void 0?o[l].getGraph({...t,xray:S}):g.getGraph(t);if(T.trimFirstNode(),T.trimLastNode(),Object.keys(T.nodes).length>1){let A=function(I){return I?I.lc_runnable:!1},R=function(I,M){if(I!==void 0&&!validate$1(I))return I;if(A(M))try{let L=M.getName();return L=L.startsWith("Runnable")?L.slice(8):L,L}catch{return M.getName()}else return M.name??"UnknownSchema"};var a=A,x=R;const[w,P]=p.extend(T,d);if(w===void 0)throw new Error(`Could not extend subgraph "${l}" due to missing entrypoint.`);P!==void 0&&(C[d]={name:R(P.id,P.data),...P}),b[d]={name:R(w.id,w.data),...w}}else{const w=p.addNode(g,d,y);C[d]=w,b[d]=w}}else{const S=p.addNode(g,d,y);C[d]=S,b[d]=S}}const e=[...this.builder.allEdges].sort(([l],[v])=>l<v?-1:v>l?1:0);for(const[l,v]of e)E(_escapeMermaidKeywords(l),_escapeMermaidKeywords(v));for(const[l,v]of Object.entries(this.builder.branches)){const d={...Object.fromEntries(Object.keys(this.builder.nodes).filter(g=>g!==l).map(g=>[_escapeMermaidKeywords(g),_escapeMermaidKeywords(g)])),[END]:END};for(const g of Object.values(v)){let y;g.ends!==void 0?y=g.ends:y=d;for(const[S,T]of Object.entries(y))E(_escapeMermaidKeywords(l),_escapeMermaidKeywords(T),S,!0)}}return p}}function isCompiledGraph(m){return typeof m.attachNode=="function"&&typeof m.attachEdge=="function"}function _escapeMermaidKeywords(m){return m==="subgraph"?`"${m}"`:m}const areSetsEqual=(m,t)=>m.size===t.size&&[...m].every(n=>t.has(n));class NamedBarrierValue extends BaseChannel{constructor(t){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValue"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=t,this.seen=new Set}fromCheckpoint(t){const n=new NamedBarrierValue(this.names);return t&&(n.seen=new Set(t)),n}update(t){let n=!1;for(const p of t)if(this.names.has(p))this.seen.has(p)||(this.seen.add(p),n=!0);else throw new InvalidUpdateError(`Value ${JSON.stringify(p)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!areSetsEqual(this.names,this.seen))throw new EmptyChannelError}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&areSetsEqual(this.seen,this.names)?(this.seen=new Set,!0):!1}}const ROOT="__root__";class StateGraph extends Graph{constructor(t,n){var p,C;if(super(),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"waitingEdges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_schemaDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_configSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),isStateGraphArgsWithInputOutputSchemas(t))this._schemaDefinition=t.input.spec,this._inputDefinition=t.input.spec,this._outputDefinition=t.output.spec;else if(isStateGraphArgsWithStateSchema(t))this._schemaDefinition=t.stateSchema.spec,this._inputDefinition=((p=t.input)==null?void 0:p.spec)??this._schemaDefinition,this._outputDefinition=((C=t.output)==null?void 0:C.spec)??this._schemaDefinition;else if(isStateDefinition(t)||isAnnotationRoot(t)){const b=isAnnotationRoot(t)?t.spec:t;this._schemaDefinition=b}else if(isStateGraphArgs(t)){const b=_getChannels(t.channels);this._schemaDefinition=b}else throw new Error("Invalid StateGraph input.");this._inputDefinition=this._inputDefinition??this._schemaDefinition,this._outputDefinition=this._outputDefinition??this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),this._configSchema=n==null?void 0:n.spec}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([t,n])=>t.map(p=>[p,n]))])}_addSchema(t){if(!this._schemaDefinitions.has(t)){this._schemaDefinitions.set(t,t);for(const[n,p]of Object.entries(t)){let C;if(typeof p=="function"?C=p():C=p,this.channels[n]!==void 0){if(this.channels[n]!==C&&!isConfiguredManagedValue(C)&&C.lc_graph_name!=="LastValue")throw new Error(`Channel "${n}" already exists with a different type.`)}else this.channels[n]=C}}}addNode(t,n,p){var o;if(t in this.channels)throw new Error(`${t} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(const E of[CHECKPOINT_NAMESPACE_SEPARATOR,CHECKPOINT_NAMESPACE_END])if(t.includes(E))throw new Error(`"${E}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),t in this.nodes)throw new Error(`Node \`${t}\` already present.`);if(t===END||t===START)throw new Error(`Node \`${t}\` is reserved.`);(p==null?void 0:p.input)!==void 0&&this._addSchema(p.input.spec);let C;Runnable.isRunnable(n)?C=n:typeof n=="function"?C=new RunnableCallable({func:n,name:t,trace:!1}):C=_coerceToRunnable(n);const b={runnable:C,retryPolicy:p==null?void 0:p.retryPolicy,metadata:p==null?void 0:p.metadata,input:((o=p==null?void 0:p.input)==null?void 0:o.spec)??this._schemaDefinition,subgraphs:isPregelLike(C)?[C]:p==null?void 0:p.subgraphs,ends:p==null?void 0:p.ends};return this.nodes[t]=b,this}addEdge(t,n){if(typeof t=="string")return super.addEdge(t,n);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(const p of t){if(p===END)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(C=>C===p))throw new Error(`Need to add a node named "${p}" first`)}if(n===END)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(p=>p===n))throw new Error(`Need to add a node named "${n}" first`);return this.waitingEdges.add([t,n]),this}compile({checkpointer:t,store:n,interruptBefore:p,interruptAfter:C,name:b}={}){this.validate([...Array.isArray(p)?p:[],...Array.isArray(C)?C:[]]);const o=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),E=o.length===1&&o[0]===ROOT?ROOT:o,e=Object.keys(this.channels),a=e.length===1&&e[0]===ROOT?ROOT:e,x=new CompiledStateGraph({builder:this,checkpointer:t,interruptAfter:C,interruptBefore:p,autoValidate:!1,nodes:{},channels:{...this.channels,[START]:new EphemeralValue},inputChannels:START,outputChannels:E,streamChannels:a,streamMode:"updates",store:n,name:b});x.attachNode(START);for(const[c,u]of Object.entries(this.nodes))x.attachNode(c,u);x.attachBranch(START,SELF,_getControlBranch(),{withReader:!1});for(const[c]of Object.entries(this.nodes))x.attachBranch(c,SELF,_getControlBranch(),{withReader:!1});for(const[c,u]of this.edges)x.attachEdge(c,u);for(const[c,u]of this.waitingEdges)x.attachEdge(c,u);for(const[c,u]of Object.entries(this.branches))for(const[h,s]of Object.entries(u))x.attachBranch(c,h,s);return x.validate()}}function _getChannels(m){const t={};for(const[n,p]of Object.entries(m))t[n]=getChannel(p);return t}class CompiledStateGraph extends CompiledGraph{attachNode(t,n){let p;t===START?p=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).filter(([e,a])=>!isConfiguredManagedValue(a)).map(([e])=>e):p=Object.keys(this.builder.channels);function C(e){if(isCommand(e))return e.graph===Command.PARENT?null:e._updateAsTuples();if(Array.isArray(e)&&e.length>0&&e.some(a=>isCommand(a))){const a=[];for(const x of e)if(isCommand(x)){if(x.graph===Command.PARENT)continue;a.push(...x._updateAsTuples())}else a.push([ROOT,x]);return a}else if(e!=null)return[[ROOT,e]];return null}const b=t;function o(e){if(e){if(isCommand(e))return e.graph===Command.PARENT?null:e._updateAsTuples().filter(([a])=>p.includes(a));if(Array.isArray(e)&&e.length>0&&e.some(isCommand)){const a=[];for(const x of e)if(isCommand(x)){if(x.graph===Command.PARENT)continue;a.push(...x._updateAsTuples().filter(([c])=>p.includes(c)))}else{const c=o(x);c&&a.push(...c??[])}return a}else{if(typeof e=="object"&&!Array.isArray(e))return Object.entries(e).filter(([a])=>p.includes(a));{const a=Array.isArray(e)?"array":typeof e;throw new InvalidUpdateError(`Expected node "${b.toString()}" to return an object or an array containing at least one Command object, received ${a}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}const E=[{value:PASSTHROUGH,mapper:new RunnableCallable({func:p.length&&p[0]===ROOT?C:o,trace:!1,recurse:!1})}];if(t===START)this.nodes[t]=new PregelNode({tags:[TAG_HIDDEN],triggers:[START],channels:[START],writers:[new ChannelWrite(E,[TAG_HIDDEN])]});else{const e=(n==null?void 0:n.input)??this.builder._schemaDefinition,a=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(e)).map(c=>[c,c])),x=Object.keys(a).length===1&&ROOT in a;this.channels[t]=new EphemeralValue(!1),this.nodes[t]=new PregelNode({triggers:[],channels:x?Object.keys(a):a,writers:[new ChannelWrite(E.concat({channel:t,value:t}),[TAG_HIDDEN])],mapper:x?void 0:c=>Object.fromEntries(Object.entries(c).filter(([u])=>u in a)),bound:n==null?void 0:n.runnable,metadata:n==null?void 0:n.metadata,retryPolicy:n==null?void 0:n.retryPolicy,subgraphs:n==null?void 0:n.subgraphs,ends:n==null?void 0:n.ends})}}attachEdge(t,n){if(n!==END)if(Array.isArray(t)){const p=`join:${t.join("+")}:${n}`;this.channels[p]=new NamedBarrierValue(new Set(t)),this.nodes[n].triggers.push(p);for(const C of t)this.nodes[C].writers.push(new ChannelWrite([{channel:p,value:C}],[TAG_HIDDEN]))}else if(t===START){const p=`${START}:${n}`;this.channels[p]=new EphemeralValue,this.nodes[n].triggers.push(p),this.nodes[START].writers.push(new ChannelWrite([{channel:p,value:START}],[TAG_HIDDEN]))}else this.nodes[n].triggers.push(t)}attachBranch(t,n,p,C={withReader:!0}){const b=async(E,e)=>{const a=E.filter(c=>c!==END);if(!a.length)return;const x=a.map(c=>_isSend(c)?c:{channel:`branch:${t}:${n}:${c}`,value:t});await ChannelWrite.doWrite({...e,tags:(e.tags??[]).concat([TAG_HIDDEN])},x)};this.nodes[t].writers.push(p.run(b,C.withReader?E=>ChannelRead.doRead(E,this.streamChannels??this.outputChannels,!0):void 0));const o=p.ends?Object.values(p.ends):Object.keys(this.builder.nodes);for(const E of o){if(E===END)continue;const e=`branch:${t}:${n}:${E}`;this.channels[e]=new EphemeralValue(!1),this.nodes[E].triggers.push(e)}}}function isStateDefinition(m){return typeof m=="object"&&m!==null&&!Array.isArray(m)&&Object.keys(m).length>0&&Object.values(m).every(t=>typeof t=="function"||isBaseChannel(t))}function isAnnotationRoot(m){return typeof m=="object"&&m!==null&&"lc_graph_name"in m&&m.lc_graph_name==="AnnotationRoot"}function isStateGraphArgs(m){return typeof m=="object"&&m!==null&&m.channels!==void 0}function isStateGraphArgsWithStateSchema(m){return typeof m=="object"&&m!==null&&m.stateSchema!==void 0}function isStateGraphArgsWithInputOutputSchemas(m){return typeof m=="object"&&m!==null&&m.stateSchema===void 0&&m.input!==void 0&&m.output!==void 0}function _controlBranch(m){if(_isSend(m))return[m];const t=[];if(isCommand(m))t.push(m);else if(Array.isArray(m)&&m.every(isCommand))t.push(...m);else return[];const n=[];for(const p of t){if(p.graph===Command.PARENT)throw new ParentCommand(p);_isSend(p.goto)||typeof p.goto=="string"?n.push(p.goto):n.push(...p.goto)}return n}function _getControlBranch(){const m=new RunnableCallable({func:_controlBranch,tags:[TAG_HIDDEN],trace:!1,recurse:!1,name:"<control_branch>"});return new Branch({path:m})}function messagesStateReducer(m,t){const n=Array.isArray(m)?m:[m],p=Array.isArray(t)?t:[t],C=n.map(coerceMessageLikeToMessage),b=p.map(coerceMessageLikeToMessage);for(const a of C)(a.id===null||a.id===void 0)&&(a.id=v4(),a.lc_kwargs.id=a.id);for(const a of b)(a.id===null||a.id===void 0)&&(a.id=v4(),a.lc_kwargs.id=a.id);const o=[...C],E=new Map(o.map((a,x)=>[a.id,x])),e=new Set;for(const a of b){const x=E.get(a.id);if(x!==void 0)a._getType()==="remove"?e.add(a.id):(e.delete(a.id),o[x]=a);else{if(a._getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${a.id}')`);E.set(a.id,o.length),o.push(a)}}return o.filter(a=>!e.has(a.id))}Annotation.Root({messages:Annotation({reducer:messagesStateReducer,default:()=>[]})});const default_format="RFC3986",formatters={RFC1738:m=>String(m).replace(/%20/g,"+"),RFC3986:m=>String(m)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const m=[];for(let t=0;t<256;++t)m.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return m})(),limit=1024,encode=(m,t,n,p,C)=>{if(m.length===0)return m;let b=m;if(typeof m=="symbol"?b=Symbol.prototype.toString.call(m):typeof m!="string"&&(b=String(m)),n==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(E){return"%26%23"+parseInt(E.slice(2),16)+"%3B"});let o="";for(let E=0;E<b.length;E+=limit){const e=b.length>=limit?b.slice(E,E+limit):b,a=[];for(let x=0;x<e.length;++x){let c=e.charCodeAt(x);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||C===RFC1738&&(c===40||c===41)){a[a.length]=e.charAt(x);continue}if(c<128){a[a.length]=hex_table[c];continue}if(c<2048){a[a.length]=hex_table[192|c>>6]+hex_table[128|c&63];continue}if(c<55296||c>=57344){a[a.length]=hex_table[224|c>>12]+hex_table[128|c>>6&63]+hex_table[128|c&63];continue}x+=1,c=65536+((c&1023)<<10|e.charCodeAt(x)&1023),a[a.length]=hex_table[240|c>>18]+hex_table[128|c>>12&63]+hex_table[128|c>>6&63]+hex_table[128|c&63]}o+=a.join("")}return o};function is_buffer(m){return!m||typeof m!="object"?!1:!!(m.constructor&&m.constructor.isBuffer&&m.constructor.isBuffer(m))}function maybe_map(m,t){if(is_array$1(m)){const n=[];for(let p=0;p<m.length;p+=1)n.push(t(m[p]));return n}return t(m)}const has=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(m){return String(m)+"[]"},comma:"comma",indices(m,t){return String(m)+"["+t+"]"},repeat(m){return String(m)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(m,t){push.apply(m,is_array(t)?t:[t])},to_ISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(m){return to_ISO.call(m)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"}const sentinel={};function inner_stringify(m,t,n,p,C,b,o,E,e,a,x,c,u,h,s,l,v,d){let g=m,y=d,S=0,T=!1;for(;(y=y.get(sentinel))!==void 0&&!T;){const I=y.get(m);if(S+=1,typeof I<"u"){if(I===S)throw new RangeError("Cyclic object value");T=!0}typeof y.get(sentinel)>"u"&&(S=0)}if(typeof a=="function"?g=a(t,g):g instanceof Date?g=u==null?void 0:u(g):n==="comma"&&is_array(g)&&(g=maybe_map(g,function(I){return I instanceof Date?u==null?void 0:u(I):I})),g===null){if(b)return e&&!l?e(t,defaults.encoder,v,"key",h):t;g=""}if(is_non_nullish_primitive(g)||is_buffer(g)){if(e){const I=l?t:e(t,defaults.encoder,v,"key",h);return[(s==null?void 0:s(I))+"="+(s==null?void 0:s(e(g,defaults.encoder,v,"value",h)))]}return[(s==null?void 0:s(t))+"="+(s==null?void 0:s(String(g)))]}const w=[];if(typeof g>"u")return w;let P;if(n==="comma"&&is_array(g))l&&e&&(g=maybe_map(g,e)),P=[{value:g.length>0?g.join(",")||null:void 0}];else if(is_array(a))P=a;else{const I=Object.keys(g);P=x?I.sort(x):I}const A=E?String(t).replace(/\./g,"%2E"):String(t),R=p&&is_array(g)&&g.length===1?A+"[]":A;if(C&&is_array(g)&&g.length===0)return R+"[]";for(let I=0;I<P.length;++I){const M=P[I],L=typeof M=="object"&&typeof M.value<"u"?M.value:g[M];if(o&&L===null)continue;const N=c&&E?M.replace(/\./g,"%2E"):M,G=is_array(g)?typeof n=="function"?n(R,N):R:R+(c?"."+N:"["+N+"]");d.set(m,S);const D=new WeakMap;D.set(sentinel,d),push_to_array(w,inner_stringify(L,G,n,p,C,b,o,E,n==="comma"&&l&&is_array(g)?null:e,a,x,c,u,h,s,l,v,D))}return w}function normalize_stringify_options(m=defaults){if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.encodeDotInKeys<"u"&&typeof m.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=m.charset||defaults.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=default_format;if(typeof m.format<"u"){if(!has.call(formatters,m.format))throw new TypeError("Unknown format option provided.");n=m.format}const p=formatters[n];let C=defaults.filter;(typeof m.filter=="function"||is_array(m.filter))&&(C=m.filter);let b;if(m.arrayFormat&&m.arrayFormat in array_prefix_generators?b=m.arrayFormat:"indices"in m?b=m.indices?"indices":"repeat":b=defaults.arrayFormat,"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof m.allowDots>"u"?m.encodeDotInKeys?!0:defaults.allowDots:!!m.allowDots;return{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:defaults.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:b,charset:t,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!m.commaRoundTrip,delimiter:typeof m.delimiter>"u"?defaults.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:defaults.encode,encodeDotInKeys:typeof m.encodeDotInKeys=="boolean"?m.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof m.encoder=="function"?m.encoder:defaults.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:defaults.encodeValuesOnly,filter:C,format:n,formatter:p,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:defaults.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:defaults.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:defaults.strictNullHandling}}function stringify(m,t={}){let n=m;const p=normalize_stringify_options(t);let C,b;typeof p.filter=="function"?(b=p.filter,n=b("",n)):is_array(p.filter)&&(b=p.filter,C=b);const o=[];if(typeof n!="object"||n===null)return"";const E=array_prefix_generators[p.arrayFormat],e=E==="comma"&&p.commaRoundTrip;C||(C=Object.keys(n)),p.sort&&C.sort(p.sort);const a=new WeakMap;for(let u=0;u<C.length;++u){const h=C[u];p.skipNulls&&n[h]===null||push_to_array(o,inner_stringify(n[h],h,E,e,p.allowEmptyArrays,p.strictNullHandling,p.skipNulls,p.encodeDotInKeys,p.encode?p.encoder:null,p.filter,p.sort,p.allowDots,p.serializeDate,p.format,p.formatter,p.encodeValuesOnly,p.charset,a))}const x=o.join(p.delimiter);let c=p.addQueryPrefix===!0?"?":"";return p.charsetSentinel&&(p.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),x.length>0?c+x:""}const VERSION="4.90.0";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(m,t={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${m.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${m.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=t.auto,kind=m.kind,fetch$1=m.fetch,FormData$1=m.FormData,File$1=m.File,ReadableStream$1=m.ReadableStream,getMultipartRequestOptions=m.getMultipartRequestOptions,getDefaultAgent=m.getDefaultAgent,fileFromPath=m.fileFromPath,isFsReadStream=m.isFsReadStream}class MultipartBody{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:m}={}){const t=m?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,p,C,b;try{n=fetch,p=Request,C=Response,b=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:p,Response:C,Headers:b,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,E)=>({...E,body:new MultipartBody(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const init$1=()=>{kind||setShims(getRuntime(),{auto:!0})};init$1();class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(t,n,p,C){super(`${APIError.makeMessage(t,n,p)}`),this.status=t,this.headers=C,this.request_id=C==null?void 0:C["x-request-id"],this.error=n;const b=n;this.code=b==null?void 0:b.code,this.param=b==null?void 0:b.param,this.type=b==null?void 0:b.type}static makeMessage(t,n,p){const C=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):p;return t&&C?`${t} ${C}`:t?`${t} status code (no body)`:C||"(no status code or body)"}static generate(t,n,p,C){if(!t||!C)return new APIConnectionError({message:p,cause:castToError(n)});const b=n==null?void 0:n.error;return t===400?new BadRequestError(t,b,p,C):t===401?new AuthenticationError(t,b,p,C):t===403?new PermissionDeniedError(t,b,p,C):t===404?new NotFoundError(t,b,p,C):t===409?new ConflictError(t,b,p,C):t===422?new UnprocessableEntityError(t,b,p,C):t===429?new RateLimitError(t,b,p,C):t>=500?new InternalServerError(t,b,p,C):new APIError(t,b,p,C)}}class APIUserAbortError extends APIError{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:t}={}){super({message:t??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var __classPrivateFieldSet$5=function(m,t,n,p,C){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?m!==t||!C:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?C.call(m,n):C?C.value=n:t.set(m,n),n},__classPrivateFieldGet$6=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_carriageReturnIndex.set(this,void 0),this.buffer=new Uint8Array,__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let p=new Uint8Array(this.buffer.length+n.length);p.set(this.buffer),p.set(n,this.buffer.length),this.buffer=p;const C=[];let b;for(;(b=findNewlineIndex(this.buffer,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(b.carriage&&__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,b.index,"f");continue}if(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(b.index!==__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")+1||b.carriage)){C.push(this.decodeText(this.buffer.slice(0,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")-1))),this.buffer=this.buffer.slice(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f");continue}const o=__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!==null?b.preceding-1:b.preceding,E=this.decodeText(this.buffer.slice(0,o));C.push(E),this.buffer=this.buffer.slice(b.index),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}return C}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_LineDecoder_carriageReturnIndex=new WeakMap;LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(m,t){for(let C=t??0;C<m.length;C++){if(m[C]===10)return{preceding:C,index:C+1,carriage:!1};if(m[C]===13)return{preceding:C,index:C+1,carriage:!0}}return null}function findDoubleNewlineIndex(m){for(let p=0;p<m.length-1;p++){if(m[p]===10&&m[p+1]===10||m[p]===13&&m[p+1]===13)return p+2;if(m[p]===13&&m[p+1]===10&&p+3<m.length&&m[p+2]===13&&m[p+3]===10)return p+4}return-1}function ReadableStreamToAsyncIterable(m){if(m[Symbol.asyncIterator])return m;const t=m.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Stream{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let p=!1;async function*C(){if(p)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");p=!0;let b=!1;try{for await(const o of _iterSSEMessages(t,n))if(!b){if(o.data.startsWith("[DONE]")){b=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let E;try{E=JSON.parse(o.data)}catch(e){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),e}if(E&&E.error)throw new APIError(void 0,E.error,void 0,createResponseHeaders(t.headers));yield E}else{let E;try{E=JSON.parse(o.data)}catch(e){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),e}if(o.event=="error")throw new APIError(void 0,E.error,E.message,void 0);yield{event:o.event,data:E}}}b=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{b||n.abort()}}return new Stream(C,n)}static fromReadableStream(t,n){let p=!1;async function*C(){const o=new LineDecoder,E=ReadableStreamToAsyncIterable(t);for await(const e of E)for(const a of o.decode(e))yield a;for(const e of o.flush())yield e}async function*b(){if(p)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");p=!0;let o=!1;try{for await(const E of C())o||E&&(yield JSON.parse(E));o=!0}catch(E){if(E instanceof Error&&E.name==="AbortError")return;throw E}finally{o||n.abort()}}return new Stream(b,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],p=this.iterator(),C=b=>({next:()=>{if(b.length===0){const o=p.next();t.push(o),n.push(o)}return b.shift()}});return[new Stream(()=>C(t),this.controller),new Stream(()=>C(n),this.controller)]}toReadableStream(){const t=this;let n;const p=new TextEncoder;return new ReadableStream$1({async start(){n=t[Symbol.asyncIterator]()},async pull(C){try{const{value:b,done:o}=await n.next();if(o)return C.close();const E=p.encode(JSON.stringify(b)+`
`);C.enqueue(E)}catch(b){C.error(b)}},async cancel(){var C;await((C=n.return)==null?void 0:C.call(n))}})}}async function*_iterSSEMessages(m,t){if(!m.body)throw t.abort(),new OpenAIError("Attempted to iterate over a response with no body");const n=new SSEDecoder,p=new LineDecoder,C=ReadableStreamToAsyncIterable(m.body);for await(const b of iterSSEChunks(C))for(const o of p.decode(b)){const E=n.decode(o);E&&(yield E)}for(const b of p.flush()){const o=n.decode(b);o&&(yield o)}}async function*iterSSEChunks(m){let t=new Uint8Array;for await(const n of m){if(n==null)continue;const p=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let C=new Uint8Array(t.length+p.length);C.set(t),C.set(p,t.length),t=C;let b;for(;(b=findDoubleNewlineIndex(t))!==-1;)yield t.slice(0,b),t=t.slice(b)}t.length>0&&(yield t)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const b={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],b}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,p,C]=partition(t,":");return C.startsWith(" ")&&(C=C.substring(1)),n==="event"?this.event=C:n==="data"&&this.data.push(C),null}}function partition(m,t){const n=m.indexOf(t);return n!==-1?[m.substring(0,n),t,m.substring(n+t.length)]:[m,"",""]}const isResponseLike=m=>m!=null&&typeof m=="object"&&typeof m.url=="string"&&typeof m.blob=="function",isFileLike=m=>m!=null&&typeof m=="object"&&typeof m.name=="string"&&typeof m.lastModified=="number"&&isBlobLike(m),isBlobLike=m=>m!=null&&typeof m=="object"&&typeof m.size=="number"&&typeof m.type=="string"&&typeof m.text=="function"&&typeof m.slice=="function"&&typeof m.arrayBuffer=="function",isUploadable=m=>isFileLike(m)||isResponseLike(m)||isFsReadStream(m);async function toFile(m,t,n){var C;if(m=await m,isFileLike(m))return m;if(isResponseLike(m)){const b=await m.blob();t||(t=new URL(m.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=isBlobLike(b)?[await b.arrayBuffer()]:[b];return new File$1(o,t,n)}const p=await getBytes(m);if(t||(t=getName(m)??"unknown_file"),!(n!=null&&n.type)){const b=(C=p[0])==null?void 0:C.type;typeof b=="string"&&(n={...n,type:b})}return new File$1(p,t,n)}async function getBytes(m){var n;let t=[];if(typeof m=="string"||ArrayBuffer.isView(m)||m instanceof ArrayBuffer)t.push(m);else if(isBlobLike(m))t.push(await m.arrayBuffer());else if(isAsyncIterableIterator(m))for await(const p of m)t.push(p);else throw new Error(`Unexpected data type: ${typeof m}; constructor: ${(n=m==null?void 0:m.constructor)==null?void 0:n.name}; props: ${propsForError(m)}`);return t}function propsForError(m){return`[${Object.getOwnPropertyNames(m).map(n=>`"${n}"`).join(", ")}]`}function getName(m){var t;return getStringFromMaybeBuffer(m.name)||getStringFromMaybeBuffer(m.filename)||((t=getStringFromMaybeBuffer(m.path))==null?void 0:t.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=m=>{if(typeof m=="string")return m;if(typeof Buffer<"u"&&m instanceof Buffer)return String(m)},isAsyncIterableIterator=m=>m!=null&&typeof m=="object"&&typeof m[Symbol.asyncIterator]=="function",isMultipartBody=m=>m&&typeof m=="object"&&m.body&&m[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async m=>{const t=await createForm(m.body);return getMultipartRequestOptions(t,m)},createForm=async m=>{const t=new FormData$1;return await Promise.all(Object.entries(m||{}).map(([n,p])=>addFormValue(t,n,p))),t},addFormValue=async(m,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")m.append(t,String(n));else if(isUploadable(n)){const p=await toFile(n);m.append(t,p)}else if(Array.isArray(n))await Promise.all(n.map(p=>addFormValue(m,t+"[]",p)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([p,C])=>addFormValue(m,`${t}[${p}]`,C)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var define_process_env_default={},__classPrivateFieldSet$4=function(m,t,n,p,C){if(typeof t=="function"?m!==t||!0:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(m,n),n},__classPrivateFieldGet$5=function(m,t,n,p){if(typeof t=="function"?m!==t||!0:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_AbstractPage_client;init$1();async function defaultParseResponse(m){var o;const{response:t}=m;if(m.options.stream)return debug("response",t.status,t.url,t.headers,t.body),m.options.__streamClass?m.options.__streamClass.fromSSEResponse(t,m.controller):Stream.fromSSEResponse(t,m.controller);if(t.status===204)return null;if(m.options.__binaryResponse)return t;const n=t.headers.get("content-type"),p=(o=n==null?void 0:n.split(";")[0])==null?void 0:o.trim();if((p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))){const E=await t.json();return debug("response",t.status,t.url,t.headers,E),_addRequestID(E,t)}const b=await t.text();return debug("response",t.status,t.url,t.headers,b),b}function _addRequestID(m,t){return!m||typeof m!="object"||Array.isArray(m)?m:Object.defineProperty(m,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(t,n=defaultParseResponse){super(p=>{p(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new APIPromise(this.responsePromise,async n=>_addRequestID(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class APIClient{constructor({baseURL:t,maxRetries:n=2,timeout:p=6e5,httpAgent:C,fetch:b}){this.baseURL=t,this.maxRetries=validatePositiveInteger("maxRetries",n),this.timeout=validatePositiveInteger("timeout",p),this.httpAgent=C,this.fetch=b??fetch$1}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,p){return this.request(Promise.resolve(p).then(async C=>{const b=C&&isBlobLike(C==null?void 0:C.body)?new DataView(await C.body.arrayBuffer()):(C==null?void 0:C.body)instanceof DataView?C.body:(C==null?void 0:C.body)instanceof ArrayBuffer?new DataView(C.body):C&&ArrayBuffer.isView(C==null?void 0:C.body)?new DataView(C.body.buffer):C==null?void 0:C.body;return{method:t,path:n,...C,body:b}}))}getAPIList(t,n,p){return this.requestAPIList(n,{method:"get",path:t,...p})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var s;t={...t};const{method:p,path:C,query:b,headers:o={}}=t,E=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:isMultipartBody(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,e=this.calculateContentLength(E),a=this.buildURL(C,b);"timeout"in t&&validatePositiveInteger("timeout",t.timeout),t.timeout=t.timeout??this.timeout;const x=t.httpAgent??this.httpAgent??getDefaultAgent(a),c=t.timeout+1e3;typeof((s=x==null?void 0:x.options)==null?void 0:s.timeout)=="number"&&c>(x.options.timeout??0)&&(x.options.timeout=c),this.idempotencyHeader&&p!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const u=this.buildHeaders({options:t,headers:o,contentLength:e,retryCount:n});return{req:{method:p,...E&&{body:E},headers:u,...x&&{agent:x},signal:t.signal??null},url:a,timeout:t.timeout}}buildHeaders({options:t,headers:n,contentLength:p,retryCount:C}){const b={};p&&(b["content-length"]=p);const o=this.defaultHeaders(t);return applyHeadersMut(b,o),applyHeadersMut(b,n),isMultipartBody(t.body)&&kind!=="node"&&delete b["content-type"],getHeader(o,"x-stainless-retry-count")===void 0&&getHeader(n,"x-stainless-retry-count")===void 0&&(b["x-stainless-retry-count"]=String(C)),getHeader(o,"x-stainless-timeout")===void 0&&getHeader(n,"x-stainless-timeout")===void 0&&t.timeout&&(b["x-stainless-timeout"]=String(t.timeout)),this.validateHeaders(b,n),b}async prepareOptions(t){}async prepareRequest(t,{url:n,options:p}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,p,C){return APIError.generate(t,n,p,C)}request(t,n=null){return new APIPromise(this.makeRequest(t,n))}async makeRequest(t,n){var c,u;const p=await t,C=p.maxRetries??this.maxRetries;n==null&&(n=C),await this.prepareOptions(p);const{req:b,url:o,timeout:E}=this.buildRequest(p,{retryCount:C-n});if(await this.prepareRequest(b,{url:o,options:p}),debug("request",o,p,b.headers),(c=p.signal)!=null&&c.aborted)throw new APIUserAbortError;const e=new AbortController,a=await this.fetchWithTimeout(o,b,E,e).catch(castToError);if(a instanceof Error){if((u=p.signal)!=null&&u.aborted)throw new APIUserAbortError;if(n)return this.retryRequest(p,n);throw a.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:a})}const x=createResponseHeaders(a.headers);if(!a.ok){if(n&&this.shouldRetry(a)){const g=`retrying, ${n} attempts remaining`;return debug(`response (error; ${g})`,a.status,o,x),this.retryRequest(p,n,x)}const h=await a.text().catch(g=>castToError(g).message),s=safeJSON(h),l=s?void 0:h;throw debug(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,a.status,o,x,l),this.makeStatusError(a.status,s,l,x)}return{response:a,options:p,controller:e}}requestAPIList(t,n){const p=this.makeRequest(n,null);return new PagePromise(this,p,t)}buildURL(t,n){const p=isAbsoluteURL(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),C=this.defaultQuery();return isEmptyObj$1(C)||(n={...C,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(p.search=this.stringifyQuery(n)),p.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,p])=>typeof p<"u").map(([n,p])=>{if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(p)}`;if(p===null)return`${encodeURIComponent(n)}=`;throw new OpenAIError(`Cannot stringify type ${typeof p}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,p,C){const{signal:b,...o}=n||{};b&&b.addEventListener("abort",()=>C.abort());const E=setTimeout(()=>C.abort(),p),e={signal:C.signal,...o};return e.method&&(e.method=e.method.toUpperCase()),this.fetch.call(void 0,t,e).finally(()=>{clearTimeout(E)})}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,p){let C;const b=p==null?void 0:p["retry-after-ms"];if(b){const E=parseFloat(b);Number.isNaN(E)||(C=E)}const o=p==null?void 0:p["retry-after"];if(o&&!C){const E=parseFloat(o);Number.isNaN(E)?C=Date.parse(o)-Date.now():C=E*1e3}if(!(C&&0<=C&&C<60*1e3)){const E=t.maxRetries??this.maxRetries;C=this.calculateDefaultRetryTimeoutMillis(n,E)}return await sleep$1(C),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const b=n-t,o=Math.min(.5*Math.pow(2,b),8),E=1-Math.random()*.25;return o*E*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}}class AbstractPage{constructor(t,n,p,C){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$4(this,_AbstractPage_client,t),this.options=C,this.response=n,this.body=p}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const p=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[C,b]of p)t.url.searchParams.set(C,b);n.query=void 0,n.path=t.url.toString()}return await __classPrivateFieldGet$5(this,_AbstractPage_client,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class PagePromise extends APIPromise{constructor(t,n,p){super(n,async C=>new p(t,C.response,await defaultParseResponse(C),C.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const createResponseHeaders=m=>new Proxy(Object.fromEntries(m.entries()),{get(t,n){const p=n.toString();return t[p.toLowerCase()]||t[p]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=m=>typeof m=="object"&&m!==null&&!isEmptyObj$1(m)&&Object.keys(m).every(t=>hasOwn(requestOptionsKeys,t)),getPlatformProperties=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const m=getBrowserInfo();return m?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${m.browser}`,"X-Stainless-Runtime-Version":m.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const m=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of m){const p=n.exec(navigator.userAgent);if(p){const C=p[1]||0,b=p[2]||0,o=p[3]||0;return{browser:t,version:`${C}.${b}.${o}`}}}return null}const normalizeArch=m=>m==="x32"?"x32":m==="x86_64"||m==="x64"?"x64":m==="arm"?"arm":m==="aarch64"||m==="arm64"?"arm64":m?`other:${m}`:"unknown",normalizePlatform=m=>(m=m.toLowerCase(),m.includes("ios")?"iOS":m==="android"?"Android":m==="darwin"?"MacOS":m==="win32"?"Windows":m==="freebsd"?"FreeBSD":m==="openbsd"?"OpenBSD":m==="linux"?"Linux":m?`Other:${m}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=m=>{try{return JSON.parse(m)}catch{return}},startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=m=>startsWithSchemeRegexp.test(m),sleep$1=m=>new Promise(t=>setTimeout(t,m)),validatePositiveInteger=(m,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new OpenAIError(`${m} must be an integer`);if(t<0)throw new OpenAIError(`${m} must be a positive integer`);return t},castToError=m=>{if(m instanceof Error)return m;if(typeof m=="object"&&m!==null)try{return new Error(JSON.stringify(m))}catch{}return new Error(m)},readEnv=m=>{var t,n,p,C;if(typeof process<"u")return((t=define_process_env_default==null?void 0:define_process_env_default[m])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(C=(p=(n=Deno.env)==null?void 0:n.get)==null?void 0:p.call(n,m))==null?void 0:C.trim()};function isEmptyObj$1(m){if(!m)return!0;for(const t in m)return!1;return!0}function hasOwn(m,t){return Object.prototype.hasOwnProperty.call(m,t)}function applyHeadersMut(m,t){for(const n in t){if(!hasOwn(t,n))continue;const p=n.toLowerCase();if(!p)continue;const C=t[n];C===null?delete m[p]:C!==void 0&&(m[p]=C)}}const SENSITIVE_HEADERS=new Set(["authorization","api-key"]);function debug(m,...t){if(typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.DEBUG)==="true"){const n=t.map(p=>{if(!p)return p;if(p.headers){const b={...p,headers:{...p.headers}};for(const o in p.headers)SENSITIVE_HEADERS.has(o.toLowerCase())&&(b.headers[o]="REDACTED");return b}let C=null;for(const b in p)SENSITIVE_HEADERS.has(b.toLowerCase())&&(C??(C={...p}),C[b]="REDACTED");return C??p});console.log(`OpenAI:DEBUG:${m}`,...n)}}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,m=>{const t=Math.random()*16|0;return(m==="x"?t:t&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=m=>typeof(m==null?void 0:m.get)=="function",getHeader=(m,t)=>{var p;const n=t.toLowerCase();if(isHeadersProtocol(m)){const C=((p=t[0])==null?void 0:p.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(b,o,E)=>o+E.toUpperCase());for(const b of[t,n,t.toUpperCase(),C]){const o=m.get(b);if(o)return o}}for(const[C,b]of Object.entries(m))if(C.toLowerCase()===n)return Array.isArray(b)?(b.length<=1||console.warn(`Received ${b.length} entries for the ${t} header, using the first entry.`),b[0]):b};function isObj(m){return m!=null&&typeof m=="object"&&!Array.isArray(m)}class Page extends AbstractPage{constructor(t,n,p,C){super(t,n,p,C),this.data=p.data||[],this.object=p.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class CursorPage extends AbstractPage{constructor(t,n,p,C){super(t,n,p,C),this.data=p.data||[],this.has_more=p.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var p;const t=this.getPaginatedItems();if(!t.length)return null;const n=(p=t[t.length-1])==null?void 0:p.id;return n?{params:{after:n}}:null}}class APIResource{constructor(t){this._client=t}}let Messages$1=class extends APIResource{list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/chat/completions/${t}/messages`,ChatCompletionStoreMessagesPage,{query:n,...p})}},Completions$2=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(`/chat/completions/${t}`,n)}update(t,n,p){return this._client.post(`/chat/completions/${t}`,{body:n,...p})}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/chat/completions",ChatCompletionsPage,{query:t,...n})}del(t,n){return this._client.delete(`/chat/completions/${t}`,n)}};class ChatCompletionsPage extends CursorPage{}class ChatCompletionStoreMessagesPage extends CursorPage{}Completions$2.ChatCompletionsPage=ChatCompletionsPage;Completions$2.Messages=Messages$1;let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};Chat$1.Completions=Completions$2;Chat$1.ChatCompletionsPage=ChatCompletionsPage;class Speech extends APIResource{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Transcriptions extends APIResource{create(t,n){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}}))}}class Translations extends APIResource{create(t,n){return this._client.post("/audio/translations",multipartFormRequestOptions({body:t,...n,__metadata:{model:t.model}}))}}let Audio$1=class extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}};Audio$1.Transcriptions=Transcriptions;Audio$1.Translations=Translations;Audio$1.Speech=Speech;class Batches extends APIResource{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/batches",BatchesPage,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class BatchesPage extends CursorPage{}Batches.BatchesPage=BatchesPage;class Assistants extends APIResource{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,p){return this._client.post(`/assistants/${t}`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/assistants",AssistantsPage,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class AssistantsPage extends CursorPage{}Assistants.AssistantsPage=AssistantsPage;function isRunnableFunctionWithParse(m){return typeof m.parse=="function"}const isAssistantMessage=m=>(m==null?void 0:m.role)==="assistant",isFunctionMessage=m=>(m==null?void 0:m.role)==="function",isToolMessage=m=>(m==null?void 0:m.role)==="tool";var __classPrivateFieldSet$3=function(m,t,n,p,C){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?m!==t||!C:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?C.call(m,n):C?C.value=n:t.set(m,n),n},__classPrivateFieldGet$4=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$3(this,_EventStream_connectedPromise,new Promise((t,n)=>{__classPrivateFieldSet$3(this,_EventStream_resolveConnectedPromise,t,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectConnectedPromise,n,"f")}),"f"),__classPrivateFieldSet$3(this,_EventStream_endPromise,new Promise((t,n)=>{__classPrivateFieldSet$3(this,_EventStream_resolveEndPromise,t,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectEndPromise,n,"f")}),"f"),__classPrivateFieldGet$4(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$4(this,_EventStream_endPromise,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$4(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$4(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$4(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$4(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$4(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(t,n){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t]=[])).push({listener:n}),this}off(t,n){const p=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t];if(!p)return this;const C=p.findIndex(b=>b.listener===n);return C>=0&&p.splice(C,1),this}once(t,n){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,p)=>{__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),t!=="error"&&this.once("error",p),this.once(t,n)})}async done(){__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$4(this,_EventStream_endPromise,"f")}_emit(t,...n){if(__classPrivateFieldGet$4(this,_EventStream_ended,"f"))return;t==="end"&&(__classPrivateFieldSet$3(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$4(this,_EventStream_resolveEndPromise,"f").call(this));const p=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t];if(p&&(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[t]=p.filter(C=>!C.once),p.forEach(({listener:C})=>C(...n))),t==="abort"){const C=n[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(p!=null&&p.length)&&Promise.reject(C),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,C),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,C),this._emit("end");return}if(t==="error"){const C=n[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(p!=null&&p.length)&&Promise.reject(C),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,C),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,C),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function(t){if(__classPrivateFieldSet$3(this,_EventStream_errored,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new APIUserAbortError),t instanceof APIUserAbortError)return __classPrivateFieldSet$3(this,_EventStream_aborted,!0,"f"),this._emit("abort",t);if(t instanceof OpenAIError)return this._emit("error",t);if(t instanceof Error){const n=new OpenAIError(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new OpenAIError(String(t)))};function makeParseableResponseFormat(m,t){const n={...m};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n}function isAutoParsableResponseFormat(m){return(m==null?void 0:m.$brand)==="auto-parseable-response-format"}function makeParseableTool(m,{parser:t,callback:n}){const p={...m};return Object.defineProperties(p,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:n,enumerable:!1}}),p}function isAutoParsableTool$1(m){return(m==null?void 0:m.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(m,t){return!t||!hasAutoParseableInput$1(t)?{...m,choices:m.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:parseChatCompletion(m,t)}function parseChatCompletion(m,t){const n=m.choices.map(p=>{var C;if(p.finish_reason==="length")throw new LengthFinishReasonError;if(p.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...p,message:{...p.message,...p.message.tool_calls?{tool_calls:((C=p.message.tool_calls)==null?void 0:C.map(b=>parseToolCall$2(t,b)))??void 0}:void 0,parsed:p.message.content&&!p.message.refusal?parseResponseFormat(t,p.message.content):null}}});return{...m,choices:n}}function parseResponseFormat(m,t){var n,p;return((n=m.response_format)==null?void 0:n.type)!=="json_schema"?null:((p=m.response_format)==null?void 0:p.type)==="json_schema"?"$parseRaw"in m.response_format?m.response_format.$parseRaw(t):JSON.parse(t):null}function parseToolCall$2(m,t){var p;const n=(p=m.tools)==null?void 0:p.find(C=>{var b;return((b=C.function)==null?void 0:b.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:isAutoParsableTool$1(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function shouldParseToolCall(m,t){var p;if(!m)return!1;const n=(p=m.tools)==null?void 0:p.find(C=>{var b;return((b=C.function)==null?void 0:b.name)===t.function.name});return isAutoParsableTool$1(n)||(n==null?void 0:n.function.strict)||!1}function hasAutoParseableInput$1(m){var t;return isAutoParsableResponseFormat(m.response_format)?!0:((t=m.tools)==null?void 0:t.some(n=>isAutoParsableTool$1(n)||n.type==="function"&&n.function.strict===!0))??!1}function validateInputTools(m){for(const t of m??[]){if(t.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$3=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var p;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(p=t.choices[0])==null?void 0:p.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(isFunctionMessage(t)||isToolMessage(t))&&t.content)this._emit("functionCallResult",t.content);else if(isAssistantMessage(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(isAssistantMessage(t)&&t.tool_calls)for(const p of t.tool_calls)p.type==="function"&&this._emit("functionCall",p.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new OpenAIError("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);n&&this._emit("finalMessage",n);const p=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);p&&this._emit("finalContent",p);const C=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);C&&this._emit("finalFunctionCall",C);const b=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);b!=null&&this._emit("finalFunctionCallResult",b),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(t,n,p){const C=p==null?void 0:p.signal;C&&(C.aborted&&this.controller.abort(),C.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,n);const b=await t.chat.completions.create({...n,stream:!1},{...p,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(b,n))}async _runChatCompletion(t,n,p){for(const C of n.messages)this._addMessage(C,!1);return await this._createChatCompletion(t,n,p)}async _runFunctions(t,n,p){var u;const C="function",{function_call:b="auto",stream:o,...E}=n,e=typeof b!="string"&&(b==null?void 0:b.name),{maxChatCompletions:a=DEFAULT_MAX_CHAT_COMPLETIONS}=p||{},x={};for(const h of n.functions)x[h.name||h.function.name]=h;const c=n.functions.map(h=>({name:h.name||h.function.name,parameters:h.parameters,description:h.description}));for(const h of n.messages)this._addMessage(h,!1);for(let h=0;h<a;++h){const l=(u=(await this._createChatCompletion(t,{...E,function_call:b,functions:c,messages:[...this.messages]},p)).choices[0])==null?void 0:u.message;if(!l)throw new OpenAIError("missing message in ChatCompletion response");if(!l.function_call)return;const{name:v,arguments:d}=l.function_call,g=x[v];if(g){if(e&&e!==v){const w=`Invalid function_call: ${JSON.stringify(v)}. ${JSON.stringify(e)} requested. Please try again`;this._addMessage({role:C,name:v,content:w});continue}}else{const w=`Invalid function_call: ${JSON.stringify(v)}. Available options are: ${c.map(P=>JSON.stringify(P.name)).join(", ")}. Please try again`;this._addMessage({role:C,name:v,content:w});continue}let y;try{y=isRunnableFunctionWithParse(g)?await g.parse(d):d}catch(w){this._addMessage({role:C,name:v,content:w instanceof Error?w.message:String(w)});continue}const S=await g.function(y,this),T=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,S);if(this._addMessage({role:C,name:v,content:T}),e)return}}async _runTools(t,n,p){var h,s,l;const C="tool",{tool_choice:b="auto",stream:o,...E}=n,e=typeof b!="string"&&((h=b==null?void 0:b.function)==null?void 0:h.name),{maxChatCompletions:a=DEFAULT_MAX_CHAT_COMPLETIONS}=p||{},x=n.tools.map(v=>{if(isAutoParsableTool$1(v)){if(!v.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),c={};for(const v of x)v.type==="function"&&(c[v.function.name||v.function.function.name]=v.function);const u="tools"in n?x.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of n.messages)this._addMessage(v,!1);for(let v=0;v<a;++v){const g=(s=(await this._createChatCompletion(t,{...E,tool_choice:b,tools:u,messages:[...this.messages]},p)).choices[0])==null?void 0:s.message;if(!g)throw new OpenAIError("missing message in ChatCompletion response");if(!((l=g.tool_calls)!=null&&l.length))return;for(const y of g.tool_calls){if(y.type!=="function")continue;const S=y.id,{name:T,arguments:w}=y.function,P=c[T];if(P){if(e&&e!==T){const M=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(e)} requested. Please try again`;this._addMessage({role:C,tool_call_id:S,content:M});continue}}else{const M=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(c).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:C,tool_call_id:S,content:M});continue}let A;try{A=isRunnableFunctionWithParse(P)?await P.parse(w):w}catch(M){const L=M instanceof Error?M.message:String(M);this._addMessage({role:C,tool_call_id:S,content:L});continue}const R=await P.function(A,this),I=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,R);if(this._addMessage({role:C,tool_call_id:S,content:I}),e)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function(){return __classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(isAssistantMessage(n)){const{function_call:p,...C}=n,b={...C,content:n.content??null,refusal:n.refusal??null};return p&&(b.function_call=p),b}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function(){var t,n;for(let p=this.messages.length-1;p>=0;p--){const C=this.messages[p];if(isAssistantMessage(C)&&(C!=null&&C.function_call))return C.function_call;if(isAssistantMessage(C)&&((t=C==null?void 0:C.tool_calls)!=null&&t.length))return(n=C.tool_calls.at(-1))==null?void 0:n.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(isFunctionMessage(n)&&n.content!=null||isToolMessage(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(p=>{var C;return p.role==="assistant"&&((C=p.tool_calls)==null?void 0:C.some(b=>b.type==="function"&&b.id===n.tool_call_id))}))return n.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},_AbstractChatCompletionRunner_validateParams=function(t){if(t.n!=null&&t.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(t,n,p){const C=new ChatCompletionRunner,b={...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"runFunctions"}};return C._run(()=>C._runFunctions(t,n,b)),C}static runTools(t,n,p){const C=new ChatCompletionRunner,b={...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"runTools"}};return C._run(()=>C._runTools(t,n,b)),C}_addMessage(t,n=!0){super._addMessage(t,n),isAssistantMessage(t)&&t.content&&this._emit("content",t.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(m,t=Allow.ALL){if(typeof m!="string")throw new TypeError(`expecting str, got ${typeof m}`);if(!m.trim())throw new Error(`${m} is empty`);return _parseJSON(m.trim(),t)}const _parseJSON=(m,t)=>{const n=m.length;let p=0;const C=u=>{throw new PartialJSON(`${u} at position ${p}`)},b=u=>{throw new MalformedJSON(`${u} at position ${p}`)},o=()=>(c(),p>=n&&C("Unexpected end of input"),m[p]==='"'?E():m[p]==="{"?e():m[p]==="["?a():m.substring(p,p+4)==="null"||Allow.NULL&t&&n-p<4&&"null".startsWith(m.substring(p))?(p+=4,null):m.substring(p,p+4)==="true"||Allow.BOOL&t&&n-p<4&&"true".startsWith(m.substring(p))?(p+=4,!0):m.substring(p,p+5)==="false"||Allow.BOOL&t&&n-p<5&&"false".startsWith(m.substring(p))?(p+=5,!1):m.substring(p,p+8)==="Infinity"||Allow.INFINITY&t&&n-p<8&&"Infinity".startsWith(m.substring(p))?(p+=8,1/0):m.substring(p,p+9)==="-Infinity"||Allow.MINUS_INFINITY&t&&1<n-p&&n-p<9&&"-Infinity".startsWith(m.substring(p))?(p+=9,-1/0):m.substring(p,p+3)==="NaN"||Allow.NAN&t&&n-p<3&&"NaN".startsWith(m.substring(p))?(p+=3,NaN):x()),E=()=>{const u=p;let h=!1;for(p++;p<n&&(m[p]!=='"'||h&&m[p-1]==="\\");)h=m[p]==="\\"?!h:!1,p++;if(m.charAt(p)=='"')try{return JSON.parse(m.substring(u,++p-Number(h)))}catch(s){b(String(s))}else if(Allow.STR&t)try{return JSON.parse(m.substring(u,p-Number(h))+'"')}catch{return JSON.parse(m.substring(u,m.lastIndexOf("\\"))+'"')}C("Unterminated string literal")},e=()=>{p++,c();const u={};try{for(;m[p]!=="}";){if(c(),p>=n&&Allow.OBJ&t)return u;const h=E();c(),p++;try{const s=o();Object.defineProperty(u,h,{value:s,writable:!0,enumerable:!0,configurable:!0})}catch(s){if(Allow.OBJ&t)return u;throw s}c(),m[p]===","&&p++}}catch{if(Allow.OBJ&t)return u;C("Expected '}' at end of object")}return p++,u},a=()=>{p++;const u=[];try{for(;m[p]!=="]";)u.push(o()),c(),m[p]===","&&p++}catch{if(Allow.ARR&t)return u;C("Expected ']' at end of array")}return p++,u},x=()=>{if(p===0){m==="-"&&Allow.NUM&t&&C("Not sure what '-' is");try{return JSON.parse(m)}catch(h){if(Allow.NUM&t)try{return m[m.length-1]==="."?JSON.parse(m.substring(0,m.lastIndexOf("."))):JSON.parse(m.substring(0,m.lastIndexOf("e")))}catch{}b(String(h))}}const u=p;for(m[p]==="-"&&p++;m[p]&&!",]}".includes(m[p]);)p++;p==n&&!(Allow.NUM&t)&&C("Unterminated number literal");try{return JSON.parse(m.substring(u,p))}catch{m.substring(u,p)==="-"&&Allow.NUM&t&&C("Not sure what '-' is");try{return JSON.parse(m.substring(u,m.lastIndexOf("e")))}catch(s){b(String(s))}}},c=()=>{for(;p<n&&` 
\r	`.includes(m[p]);)p++};return o()},partialParse=m=>parseJSON(m,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$2=function(m,t,n,p,C){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?m!==t||!C:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?C.call(m,n):C?C.value=n:t.set(m,n),n},__classPrivateFieldGet$2=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(t){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$2(this,_ChatCompletionStream_params,t,"f"),__classPrivateFieldSet$2(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(t){const n=new ChatCompletionStream(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,p){const C=new ChatCompletionStream(n);return C._run(()=>C._runChatCompletion(t,{...n,stream:!0},{...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"stream"}})),C}async _createChatCompletion(t,n,p){var o;super._createChatCompletion;const C=p==null?void 0:p.signal;C&&(C.aborted&&this.controller.abort(),C.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const b=await t.chat.completions.create({...n,stream:!0},{...p,signal:this.controller.signal});this._connected();for await(const E of b)__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,E);if((o=b.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(t,n){var o;const p=n==null?void 0:n.signal;p&&(p.aborted&&this.controller.abort(),p.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const C=Stream.fromReadableStream(t,this.controller);let b;for await(const E of C)b&&b!==E.id&&this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,E),b=E.id;if((o=C.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(n){let p=__classPrivateFieldGet$2(this,_ChatCompletionStream_choiceEventStates,"f")[n.index];return p||(p={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$2(this,_ChatCompletionStream_choiceEventStates,"f")[n.index]=p,p)},_ChatCompletionStream_addChunk=function(n){var C,b,o,E,e,a,x,c,u,h,s,l,v,d,g;if(this.ended)return;const p=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,n);this._emit("chunk",n,p);for(const y of n.choices){const S=p.choices[y.index];y.delta.content!=null&&((C=S.message)==null?void 0:C.role)==="assistant"&&((b=S.message)!=null&&b.content)&&(this._emit("content",y.delta.content,S.message.content),this._emit("content.delta",{delta:y.delta.content,snapshot:S.message.content,parsed:S.message.parsed})),y.delta.refusal!=null&&((o=S.message)==null?void 0:o.role)==="assistant"&&((E=S.message)!=null&&E.refusal)&&this._emit("refusal.delta",{delta:y.delta.refusal,snapshot:S.message.refusal}),((e=y.logprobs)==null?void 0:e.content)!=null&&((a=S.message)==null?void 0:a.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(x=y.logprobs)==null?void 0:x.content,snapshot:((c=S.logprobs)==null?void 0:c.content)??[]}),((u=y.logprobs)==null?void 0:u.refusal)!=null&&((h=S.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(s=y.logprobs)==null?void 0:s.refusal,snapshot:((l=S.logprobs)==null?void 0:l.refusal)??[]});const T=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,S);S.finish_reason&&(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,S),T.current_tool_call_index!=null&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,S,T.current_tool_call_index));for(const w of y.delta.tool_calls??[])T.current_tool_call_index!==w.index&&(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,S),T.current_tool_call_index!=null&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,S,T.current_tool_call_index)),T.current_tool_call_index=w.index;for(const w of y.delta.tool_calls??[]){const P=(v=S.message.tool_calls)==null?void 0:v[w.index];P!=null&&P.type&&((P==null?void 0:P.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(d=P.function)==null?void 0:d.name,index:w.index,arguments:P.function.arguments,parsed_arguments:P.function.parsed_arguments,arguments_delta:((g=w.function)==null?void 0:g.arguments)??""}):(P==null||P.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(n,p){var o,E,e;if(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,n).done_tool_calls.has(p))return;const b=(o=n.message.tool_calls)==null?void 0:o[p];if(!b)throw new Error("no tool call snapshot");if(!b.type)throw new Error("tool call snapshot missing `type`");if(b.type==="function"){const a=(e=(E=__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))==null?void 0:E.tools)==null?void 0:e.find(x=>x.type==="function"&&x.function.name===b.function.name);this._emit("tool_calls.function.arguments.done",{name:b.function.name,index:p,arguments:b.function.arguments,parsed_arguments:isAutoParsableTool$1(a)?a.$parseRaw(b.function.arguments):a!=null&&a.function.strict?JSON.parse(b.function.arguments):null})}else b.type},_ChatCompletionStream_emitContentDoneEvents=function(n){var C,b;const p=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,n);if(n.message.content&&!p.content_done){p.content_done=!0;const o=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!p.refusal_done&&(p.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(C=n.logprobs)!=null&&C.content&&!p.logprobs_content_done&&(p.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(b=n.logprobs)!=null&&b.refusal&&!p.logprobs_refusal_done&&(p.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const n=__classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!n)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$2(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(n,__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var p;const n=(p=__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))==null?void 0:p.response_format;return isAutoParsableResponseFormat(n)?n:null},_ChatCompletionStream_accumulateChatCompletion=function(n){var p,C,b,o;let E=__classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:e,...a}=n;E?Object.assign(E,a):E=__classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...a,choices:[]},"f");for(const{delta:x,finish_reason:c,index:u,logprobs:h=null,...s}of n.choices){let l=E.choices[u];if(l||(l=E.choices[u]={finish_reason:c,index:u,message:{},logprobs:h,...s}),h)if(!l.logprobs)l.logprobs=Object.assign({},h);else{const{content:w,refusal:P,...A}=h;Object.assign(l.logprobs,A),w&&((p=l.logprobs).content??(p.content=[]),l.logprobs.content.push(...w)),P&&((C=l.logprobs).refusal??(C.refusal=[]),l.logprobs.refusal.push(...P))}if(c&&(l.finish_reason=c,__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f")))){if(c==="length")throw new LengthFinishReasonError;if(c==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(l,s),!x)continue;const{content:v,refusal:d,function_call:g,role:y,tool_calls:S,...T}=x;if(Object.assign(l.message,T),d&&(l.message.refusal=(l.message.refusal||"")+d),y&&(l.message.role=y),g&&(l.message.function_call?(g.name&&(l.message.function_call.name=g.name),g.arguments&&((b=l.message.function_call).arguments??(b.arguments=""),l.message.function_call.arguments+=g.arguments)):l.message.function_call=g),v&&(l.message.content=(l.message.content||"")+v,!l.message.refusal&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(l.message.parsed=partialParse(l.message.content))),S){l.message.tool_calls||(l.message.tool_calls=[]);for(const{index:w,id:P,type:A,function:R,...I}of S){const M=(o=l.message.tool_calls)[w]??(o[w]={});Object.assign(M,I),P&&(M.id=P),A&&(M.type=A),R&&(M.function??(M.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(M.function.name=R.name),R!=null&&R.arguments&&(M.function.arguments+=R.arguments,shouldParseToolCall(__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"),M)&&(M.function.parsed_arguments=partialParse(M.function.arguments)))}}}return E},Symbol.asyncIterator)](){const t=[],n=[];let p=!1;return this.on("chunk",C=>{const b=n.shift();b?b.resolve(C):t.push(C)}),this.on("end",()=>{p=!0;for(const C of n)C.resolve(void 0);n.length=0}),this.on("abort",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),this.on("error",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:p?{value:void 0,done:!0}:new Promise((b,o)=>n.push({resolve:b,reject:o})).then(b=>b?{value:b,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(m,t){const{id:n,choices:p,created:C,model:b,system_fingerprint:o,...E}=m,e={...E,id:n,choices:p.map(({message:a,finish_reason:x,index:c,logprobs:u,...h})=>{if(!x)throw new OpenAIError(`missing finish_reason for choice ${c}`);const{content:s=null,function_call:l,tool_calls:v,...d}=a,g=a.role;if(!g)throw new OpenAIError(`missing role for choice ${c}`);if(l){const{arguments:y,name:S}=l;if(y==null)throw new OpenAIError(`missing function_call.arguments for choice ${c}`);if(!S)throw new OpenAIError(`missing function_call.name for choice ${c}`);return{...h,message:{content:s,function_call:{arguments:y,name:S},role:g,refusal:a.refusal??null},finish_reason:x,index:c,logprobs:u}}return v?{...h,index:c,finish_reason:x,logprobs:u,message:{...d,role:g,content:s,refusal:a.refusal??null,tool_calls:v.map((y,S)=>{const{function:T,type:w,id:P,...A}=y,{arguments:R,name:I,...M}=T||{};if(P==null)throw new OpenAIError(`missing choices[${c}].tool_calls[${S}].id
${str(m)}`);if(w==null)throw new OpenAIError(`missing choices[${c}].tool_calls[${S}].type
${str(m)}`);if(I==null)throw new OpenAIError(`missing choices[${c}].tool_calls[${S}].function.name
${str(m)}`);if(R==null)throw new OpenAIError(`missing choices[${c}].tool_calls[${S}].function.arguments
${str(m)}`);return{...A,id:P,type:w,function:{...M,name:I,arguments:R}}})}}:{...h,message:{...d,content:s,role:g,refusal:a.refusal??null},finish_reason:x,index:c,logprobs:u}}),created:C,model:b,object:"chat.completion",...o?{system_fingerprint:o}:{}};return maybeParseChatCompletion(e,t)}function str(m){return JSON.stringify(m)}function assertNever(m){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(t){const n=new ChatCompletionStreamingRunner(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,p){const C=new ChatCompletionStreamingRunner(null),b={...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"runFunctions"}};return C._run(()=>C._runFunctions(t,n,b)),C}static runTools(t,n,p){const C=new ChatCompletionStreamingRunner(n),b={...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"runTools"}};return C._run(()=>C._runTools(t,n,b)),C}}let Completions$1=class extends APIResource{parse(t,n){return validateInputTools(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(p=>parseChatCompletion(p,t))}runFunctions(t,n){return t.stream?ChatCompletionStreamingRunner.runFunctions(this._client,t,n):ChatCompletionRunner.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?ChatCompletionStreamingRunner.runTools(this._client,t,n):ChatCompletionRunner.runTools(this._client,t,n)}stream(t,n){return ChatCompletionStream.createChatCompletion(this._client,t,n)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(m){m.Completions=Completions$1})(Chat||(Chat={}));class Sessions extends APIResource{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class TranscriptionSessions extends APIResource{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions;Realtime.TranscriptionSessions=TranscriptionSessions;var __classPrivateFieldGet$1=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},__classPrivateFieldSet$1=function(m,t,n,p,C){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?m!==t||!C:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?C.call(m,n):C?C.value=n:t.set(m,n),n},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let p=!1;return this.on("event",C=>{const b=n.shift();b?b.resolve(C):t.push(C)}),this.on("end",()=>{p=!0;for(const C of n)C.resolve(void 0);n.length=0}),this.on("abort",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),this.on("error",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:p?{value:void 0,done:!0}:new Promise((b,o)=>n.push({resolve:b,reject:o})).then(b=>b?{value:b,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new AssistantStream;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var b;const p=n==null?void 0:n.signal;p&&(p.aborted&&this.controller.abort(),p.addEventListener("abort",()=>this.controller.abort())),this._connected();const C=Stream.fromReadableStream(t,this.controller);for await(const o of C)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,o);if((b=C.controller.signal)!=null&&b.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,p,C,b){const o=new AssistantStream;return o._run(()=>o._runToolAssistantStream(t,n,p,C,{...b,headers:{...b==null?void 0:b.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,p,C,b){var a;const o=b==null?void 0:b.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const E={...C,stream:!0},e=await t.submitToolOutputs(n,p,E,{...b,signal:this.controller.signal});this._connected();for await(const x of e)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,x);if((a=e.controller.signal)!=null&&a.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(t,n,p){const C=new AssistantStream;return C._run(()=>C._threadAssistantStream(t,n,{...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"stream"}})),C}static createAssistantStream(t,n,p,C){const b=new AssistantStream;return b._run(()=>b._runAssistantStream(t,n,p,{...C,headers:{...C==null?void 0:C.headers,"X-Stainless-Helper-Method":"stream"}})),b}currentEvent(){return __classPrivateFieldGet$1(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet$1(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet$1(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(t,n,p){var E;const C=p==null?void 0:p.signal;C&&(C.aborted&&this.controller.abort(),C.addEventListener("abort",()=>this.controller.abort()));const b={...n,stream:!0},o=await t.createAndRun(b,{...p,signal:this.controller.signal});this._connected();for await(const e of o)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,e);if((E=o.controller.signal)!=null&&E.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(t,n,p,C){var e;const b=C==null?void 0:C.signal;b&&(b.aborted&&this.controller.abort(),b.addEventListener("abort",()=>this.controller.abort()));const o={...p,stream:!0},E=await t.create(n,o,{...C,signal:this.controller.signal});this._connected();for await(const a of E)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,a);if((e=E.controller.signal)!=null&&e.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(t,n){for(const[p,C]of Object.entries(n)){if(!t.hasOwnProperty(p)){t[p]=C;continue}let b=t[p];if(b==null){t[p]=C;continue}if(p==="index"||p==="type"){t[p]=C;continue}if(typeof b=="string"&&typeof C=="string")b+=C;else if(typeof b=="number"&&typeof C=="number")b+=C;else if(isObj(b)&&isObj(C))b=this.accumulateDelta(b,C);else if(Array.isArray(b)&&Array.isArray(C)){if(b.every(o=>typeof o=="string"||typeof o=="number")){b.push(...C);continue}for(const o of C){if(!isObj(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const E=o.index;if(E==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof E!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${E}`);const e=b[E];e==null?b.push(o):b[E]=this.accumulateDelta(e,o)}continue}else throw Error(`Unhandled record type: ${p}, deltaValue: ${C}, accValue: ${b}`);t[p]=b}return t}_addRun(t){return t}async _threadAssistantStream(t,n,p){return await this._createThreadAssistantStream(n,t,p)}async _runAssistantStream(t,n,p,C){return await this._createAssistantStream(n,t,p,C)}async _runToolAssistantStream(t,n,p,C,b){return await this._createToolAssistantStream(p,t,n,C,b)}}_AssistantStream_addEvent=function(t){if(!this.ended)switch(__classPrivateFieldSet$1(this,_AssistantStream_currentEvent,t,"f"),__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function(t){const[n,p]=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,t,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet$1(this,_AssistantStream_messageSnapshot,n,"f"),__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshots,"f")[n.id]=n;for(const C of p){const b=n.content[C.index];(b==null?void 0:b.type)=="text"&&this._emit("textCreated",b.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const C of t.data.delta.content){if(C.type=="text"&&C.text){let b=C.text,o=n.content[C.index];if(o&&o.type=="text")this._emit("textDelta",b,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(C.index!=__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet$1(this,_AssistantStream_currentContentIndex,C.index,"f")}__classPrivateFieldSet$1(this,_AssistantStream_currentContent,n.content[C.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")!==void 0){const C=t.data.content[__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")];if(C)switch(C.type){case"image_file":this._emit("imageFileDone",C.image_file,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",C.text,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",t.data),__classPrivateFieldSet$1(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function(t){const n=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,t);switch(__classPrivateFieldSet$1(this,_AssistantStream_currentRunStepSnapshot,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const p=t.data.delta;if(p.step_details&&p.step_details.type=="tool_calls"&&p.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const b of p.step_details.tool_calls)b.index==__classPrivateFieldGet$1(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",b,n.step_details.tool_calls[b.index]):(__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCallIndex,b.index,"f"),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,n.step_details.tool_calls[b.index],"f"),__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet$1(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),t.data.step_details.type=="tool_calls"&&__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",t.data,n);break}},_AssistantStream_handleEvent=function(t){__classPrivateFieldGet$1(this,_AssistantStream_events,"f").push(t),this._emit("event",t)},_AssistantStream_accumulateRunStep=function(t){switch(t.event){case"thread.run.step.created":return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let p=t.data;if(p.delta){const C=AssistantStream.accumulateDelta(n,p.delta);__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=C}return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=t.data;break}if(__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id])return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function(t,n){let p=[];switch(t.event){case"thread.message.created":return[t.data,p];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let C=t.data;if(C.delta.content)for(const b of C.delta.content)if(b.index in n.content){let o=n.content[b.index];n.content[b.index]=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,b,o)}else n.content[b.index]=b,p.push(b);return[n,p];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,p];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function(t,n){return AssistantStream.accumulateDelta(n,t)},_AssistantStream_handleRun=function(t){switch(__classPrivateFieldSet$1(this,_AssistantStream_currentRunSnapshot,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet$1(this,_AssistantStream_finalRun,t.data,"f"),__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Messages extends APIResource{create(t,n,p){return this._client.post(`/threads/${t}/messages`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}retrieve(t,n,p){return this._client.get(`/threads/${t}/messages/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}update(t,n,p,C){return this._client.post(`/threads/${t}/messages/${n}`,{body:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers}})}list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,MessagesPage,{query:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}del(t,n,p){return this._client.delete(`/threads/${t}/messages/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}}class MessagesPage extends CursorPage{}Messages.MessagesPage=MessagesPage;class Steps extends APIResource{retrieve(t,n,p,C={},b){return isRequestOptions(C)?this.retrieve(t,n,p,{},C):this._client.get(`/threads/${t}/runs/${n}/steps/${p}`,{query:C,...b,headers:{"OpenAI-Beta":"assistants=v2",...b==null?void 0:b.headers}})}list(t,n,p={},C){return isRequestOptions(p)?this.list(t,n,{},p):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,RunStepsPage,{query:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers}})}}class RunStepsPage extends CursorPage{}Steps.RunStepsPage=RunStepsPage;class Runs extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(t,n,p){const{include:C,...b}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:C},body:b,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers},stream:n.stream??!1})}retrieve(t,n,p){return this._client.get(`/threads/${t}/runs/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}update(t,n,p,C){return this._client.post(`/threads/${t}/runs/${n}`,{body:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers}})}list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,RunsPage,{query:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}cancel(t,n,p){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}async createAndPoll(t,n,p){const C=await this.create(t,n,p);return await this.poll(t,C.id,p)}createAndStream(t,n,p){return AssistantStream.createAssistantStream(t,this._client.beta.threads.runs,n,p)}async poll(t,n,p){const C={...p==null?void 0:p.headers,"X-Stainless-Poll-Helper":"true"};for(p!=null&&p.pollIntervalMs&&(C["X-Stainless-Custom-Poll-Interval"]=p.pollIntervalMs.toString());;){const{data:b,response:o}=await this.retrieve(t,n,{...p,headers:{...p==null?void 0:p.headers,...C}}).withResponse();switch(b.status){case"queued":case"in_progress":case"cancelling":let E=5e3;if(p!=null&&p.pollIntervalMs)E=p.pollIntervalMs;else{const e=o.headers.get("openai-poll-after-ms");if(e){const a=parseInt(e);isNaN(a)||(E=a)}}await sleep$1(E);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return b}}}stream(t,n,p){return AssistantStream.createAssistantStream(t,this._client.beta.threads.runs,n,p)}submitToolOutputs(t,n,p,C){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers},stream:p.stream??!1})}async submitToolOutputsAndPoll(t,n,p,C){const b=await this.submitToolOutputs(t,n,p,C);return await this.poll(t,b.id,C)}submitToolOutputsStream(t,n,p,C){return AssistantStream.createToolAssistantStream(t,n,this._client.beta.threads.runs,p,C)}}class RunsPage extends CursorPage{}Runs.RunsPage=RunsPage;Runs.Steps=Steps;Runs.RunStepsPage=RunStepsPage;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client),this.messages=new Messages(this._client)}create(t={},n){return isRequestOptions(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,p){return this._client.post(`/threads/${t}`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const p=await this.createAndRun(t,n);return await this.runs.poll(p.thread_id,p.id,n)}createAndRunStream(t,n){return AssistantStream.createThreadAssistantStream(t,this._client.beta.threads,n)}}Threads.Runs=Runs;Threads.RunsPage=RunsPage;Threads.Messages=Messages;Threads.MessagesPage=MessagesPage;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime;Beta.Assistants=Assistants;Beta.AssistantsPage=AssistantsPage;Beta.Threads=Threads;class Completions extends APIResource{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class Embeddings extends APIResource{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}let Files$1=class extends APIResource{create(t,n){return this._client.post("/files",multipartFormRequestOptions({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/files",FileObjectsPage,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,n)}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:p=30*60*1e3}={}){const C=new Set(["processed","error","deleted"]),b=Date.now();let o=await this.retrieve(t);for(;!o.status||!C.has(o.status);)if(await sleep$1(n),o=await this.retrieve(t),Date.now()-b>p)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${t} to finish processing after ${p} milliseconds.`});return o}};class FileObjectsPage extends CursorPage{}Files$1.FileObjectsPage=FileObjectsPage;class Checkpoints extends APIResource{list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,FineTuningJobCheckpointsPage,{query:n,...p})}}class FineTuningJobCheckpointsPage extends CursorPage{}Checkpoints.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},p){return isRequestOptions(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,FineTuningJobEventsPage,{query:n,...p})}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}Jobs.FineTuningJobsPage=FineTuningJobsPage;Jobs.FineTuningJobEventsPage=FineTuningJobEventsPage;Jobs.Checkpoints=Checkpoints;Jobs.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class FineTuning extends APIResource{constructor(){super(...arguments),this.jobs=new Jobs(this._client)}}FineTuning.Jobs=Jobs;FineTuning.FineTuningJobsPage=FineTuningJobsPage;FineTuning.FineTuningJobEventsPage=FineTuningJobEventsPage;class Images extends APIResource{createVariation(t,n){return this._client.post("/images/variations",multipartFormRequestOptions({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",multipartFormRequestOptions({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}class Models extends APIResource{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",ModelsPage,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class ModelsPage extends Page{}Models.ModelsPage=ModelsPage;class Moderations extends APIResource{create(t,n){return this._client.post("/moderations",{body:t,...n})}}function maybeParseResponse(m,t){return!t||!hasAutoParseableInput(t)?{...m,output_parsed:null,output:m.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(p=>({...p,parsed:null}))}:n)}:parseResponse(m,t)}function parseResponse(m,t){const n=m.output.map(C=>{if(C.type==="function_call")return{...C,parsed_arguments:parseToolCall$1(t,C)};if(C.type==="message"){const b=C.content.map(o=>o.type==="output_text"?{...o,parsed:parseTextFormat(t,o.text)}:o);return{...C,content:b}}return C}),p=Object.assign({},m,{output:n});return Object.getOwnPropertyDescriptor(m,"output_text")||addOutputText(p),Object.defineProperty(p,"output_parsed",{enumerable:!0,get(){for(const C of p.output)if(C.type==="message"){for(const b of C.content)if(b.type==="output_text"&&b.parsed!==null)return b.parsed}return null}}),p}function parseTextFormat(m,t){var n,p,C,b;return((p=(n=m.text)==null?void 0:n.format)==null?void 0:p.type)!=="json_schema"?null:"$parseRaw"in((C=m.text)==null?void 0:C.format)?((b=m.text)==null?void 0:b.format).$parseRaw(t):JSON.parse(t)}function hasAutoParseableInput(m){var t;return!!isAutoParsableResponseFormat((t=m.text)==null?void 0:t.format)}function isAutoParsableTool(m){return(m==null?void 0:m.$brand)==="auto-parseable-tool"}function getInputToolByName(m,t){return m.find(n=>n.type==="function"&&n.name===t)}function parseToolCall$1(m,t){const n=getInputToolByName(m.tools??[],t.name);return{...t,...t,parsed_arguments:isAutoParsableTool(n)?n.$parseRaw(t.arguments):n!=null&&n.strict?JSON.parse(t.arguments):null}}function addOutputText(m){const t=[];for(const n of m.output)if(n.type==="message")for(const p of n.content)p.type==="output_text"&&t.push(p.text);m.output_text=t.join("")}class InputItems extends APIResource{list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/responses/${t}/input_items`,ResponseItemsPage,{query:n,...p})}}var __classPrivateFieldSet=function(m,t,n,p,C){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?m!==t||!C:!t.has(m))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?C.call(m,n):C?C.value=n:t.set(m,n),n},__classPrivateFieldGet=function(m,t,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?m!==t||!p:!t.has(m))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(m):p?p.value:t.get(m)},_ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(t){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,t,"f")}static createResponse(t,n,p){const C=new ResponseStream(n);return C._run(()=>C._createResponse(t,n,{...p,headers:{...p==null?void 0:p.headers,"X-Stainless-Helper-Method":"stream"}})),C}async _createResponse(t,n,p){var o;const C=p==null?void 0:p.signal;C&&(C.aborted&&this.controller.abort(),C.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);const b=await t.responses.create({...n,stream:!0},{...p,signal:this.controller.signal});this._connected();for await(const E of b)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,E);if((o=b.controller.signal)!=null&&o.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f")},_ResponseStream_addEvent=function(n){if(this.ended)return;const p=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,n);switch(this._emit("event",n),n.type){case"response.output_text.delta":{const C=p.output[n.output_index];if(!C)throw new OpenAIError(`missing output at index ${n.output_index}`);if(C.type==="message"){const b=C.content[n.content_index];if(!b)throw new OpenAIError(`missing content at index ${n.content_index}`);if(b.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${b.type}`);this._emit("response.output_text.delta",{...n,snapshot:b.text})}break}case"response.function_call_arguments.delta":{const C=p.output[n.output_index];if(!C)throw new OpenAIError(`missing output at index ${n.output_index}`);C.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...n,snapshot:C.arguments});break}default:this._emit(n.type,n);break}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const n=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!n)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f");const p=finalizeResponse(n,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,p,"f"),p},_ResponseStream_accumulateResponse=function(n){let p=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!p){if(n.type!=="response.created")throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return p=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,n.response,"f"),p}switch(n.type){case"response.output_item.added":{p.output.push(n.item);break}case"response.content_part.added":{const C=p.output[n.output_index];if(!C)throw new OpenAIError(`missing output at index ${n.output_index}`);C.type==="message"&&C.content.push(n.part);break}case"response.output_text.delta":{const C=p.output[n.output_index];if(!C)throw new OpenAIError(`missing output at index ${n.output_index}`);if(C.type==="message"){const b=C.content[n.content_index];if(!b)throw new OpenAIError(`missing content at index ${n.content_index}`);if(b.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${b.type}`);b.text+=n.delta}break}case"response.function_call_arguments.delta":{const C=p.output[n.output_index];if(!C)throw new OpenAIError(`missing output at index ${n.output_index}`);C.type==="function_call"&&(C.arguments+=n.delta);break}case"response.completed":{__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,n.response,"f");break}}return p},Symbol.asyncIterator)](){const t=[],n=[];let p=!1;return this.on("event",C=>{const b=n.shift();b?b.resolve(C):t.push(C)}),this.on("end",()=>{p=!0;for(const C of n)C.resolve(void 0);n.length=0}),this.on("abort",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),this.on("error",C=>{p=!0;for(const b of n)b.reject(C);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:p?{value:void 0,done:!0}:new Promise((b,o)=>n.push({resolve:b,reject:o})).then(b=>b?{value:b,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!t)throw new OpenAIError("stream ended without producing a ChatCompletion");return t}}function finalizeResponse(m,t){return maybeParseResponse(m,t)}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(p=>("object"in p&&p.object==="response"&&addOutputText(p),p))}retrieve(t,n={},p){return isRequestOptions(n)?this.retrieve(t,{},n):this._client.get(`/responses/${t}`,{query:n,...p})}del(t,n){return this._client.delete(`/responses/${t}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(p=>parseResponse(p,t))}stream(t,n){return ResponseStream.createResponse(this._client,t,n)}}class ResponseItemsPage extends CursorPage{}Responses.InputItems=InputItems;class Parts extends APIResource{create(t,n,p){return this._client.post(`/uploads/${t}/parts`,multipartFormRequestOptions({body:n,...p}))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,p){return this._client.post(`/uploads/${t}/complete`,{body:n,...p})}}Uploads.Parts=Parts;const allSettledWithThrow=async m=>{const t=await Promise.allSettled(m),n=t.filter(C=>C.status==="rejected");if(n.length){for(const C of n)console.error(C.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const p=[];for(const C of t)C.status==="fulfilled"&&p.push(C.value);return p};class Files extends APIResource{create(t,n,p){return this._client.post(`/vector_stores/${t}/files`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}retrieve(t,n,p){return this._client.get(`/vector_stores/${t}/files/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}update(t,n,p,C){return this._client.post(`/vector_stores/${t}/files/${n}`,{body:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers}})}list(t,n={},p){return isRequestOptions(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,VectorStoreFilesPage,{query:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}del(t,n,p){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}async createAndPoll(t,n,p){const C=await this.create(t,n,p);return await this.poll(t,C.id,p)}async poll(t,n,p){const C={...p==null?void 0:p.headers,"X-Stainless-Poll-Helper":"true"};for(p!=null&&p.pollIntervalMs&&(C["X-Stainless-Custom-Poll-Interval"]=p.pollIntervalMs.toString());;){const b=await this.retrieve(t,n,{...p,headers:C}).withResponse(),o=b.data;switch(o.status){case"in_progress":let E=5e3;if(p!=null&&p.pollIntervalMs)E=p.pollIntervalMs;else{const e=b.response.headers.get("openai-poll-after-ms");if(e){const a=parseInt(e);isNaN(a)||(E=a)}}await sleep$1(E);break;case"failed":case"completed":return o}}}async upload(t,n,p){const C=await this._client.files.create({file:n,purpose:"assistants"},p);return this.create(t,{file_id:C.id},p)}async uploadAndPoll(t,n,p){const C=await this.upload(t,n,p);return await this.poll(t,C.id,p)}content(t,n,p){return this._client.getAPIList(`/vector_stores/${t}/files/${n}/content`,FileContentResponsesPage,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}}class VectorStoreFilesPage extends CursorPage{}class FileContentResponsesPage extends Page{}Files.VectorStoreFilesPage=VectorStoreFilesPage;Files.FileContentResponsesPage=FileContentResponsesPage;class FileBatches extends APIResource{create(t,n,p){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}retrieve(t,n,p){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}cancel(t,n,p){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}async createAndPoll(t,n,p){const C=await this.create(t,n);return await this.poll(t,C.id,p)}listFiles(t,n,p={},C){return isRequestOptions(p)?this.listFiles(t,n,{},p):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,VectorStoreFilesPage,{query:p,...C,headers:{"OpenAI-Beta":"assistants=v2",...C==null?void 0:C.headers}})}async poll(t,n,p){const C={...p==null?void 0:p.headers,"X-Stainless-Poll-Helper":"true"};for(p!=null&&p.pollIntervalMs&&(C["X-Stainless-Custom-Poll-Interval"]=p.pollIntervalMs.toString());;){const{data:b,response:o}=await this.retrieve(t,n,{...p,headers:C}).withResponse();switch(b.status){case"in_progress":let E=5e3;if(p!=null&&p.pollIntervalMs)E=p.pollIntervalMs;else{const e=o.headers.get("openai-poll-after-ms");if(e){const a=parseInt(e);isNaN(a)||(E=a)}}await sleep$1(E);break;case"failed":case"cancelled":case"completed":return b}}}async uploadAndPoll(t,{files:n,fileIds:p=[]},C){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const b=(C==null?void 0:C.maxConcurrency)??5,o=Math.min(b,n.length),E=this._client,e=n.values(),a=[...p];async function x(u){for(let h of u){const s=await E.files.create({file:h,purpose:"assistants"},C);a.push(s.id)}}const c=Array(o).fill(e).map(x);return await allSettledWithThrow(c),await this.createAndPoll(t,{file_ids:a})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,p){return this._client.post(`/vector_stores/${t}`,{body:n,...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}list(t={},n){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(t,n,p){return this._client.getAPIList(`/vector_stores/${t}/search`,VectorStoreSearchResponsesPage,{body:n,method:"post",...p,headers:{"OpenAI-Beta":"assistants=v2",...p==null?void 0:p.headers}})}}class VectorStoresPage extends CursorPage{}class VectorStoreSearchResponsesPage extends Page{}VectorStores.VectorStoresPage=VectorStoresPage;VectorStores.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;VectorStores.Files=Files;VectorStores.VectorStoreFilesPage=VectorStoreFilesPage;VectorStores.FileContentResponsesPage=FileContentResponsesPage;VectorStores.FileBatches=FileBatches;var _a;let OpenAI$1=class extends APIClient{constructor({baseURL:t=readEnv("OPENAI_BASE_URL"),apiKey:n=readEnv("OPENAI_API_KEY"),organization:p=readEnv("OPENAI_ORG_ID")??null,project:C=readEnv("OPENAI_PROJECT_ID")??null,...b}={}){if(n===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:p,project:C,...b,baseURL:t||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio$1(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.vectorStores=new VectorStores(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this._options=o,this.apiKey=n,this.organization=p,this.project=C}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return stringify(t,{arrayFormat:"brackets"})}};_a=OpenAI$1;OpenAI$1.OpenAI=_a;OpenAI$1.DEFAULT_TIMEOUT=6e5;OpenAI$1.OpenAIError=OpenAIError;OpenAI$1.APIError=APIError;OpenAI$1.APIConnectionError=APIConnectionError;OpenAI$1.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI$1.APIUserAbortError=APIUserAbortError;OpenAI$1.NotFoundError=NotFoundError;OpenAI$1.ConflictError=ConflictError;OpenAI$1.RateLimitError=RateLimitError;OpenAI$1.BadRequestError=BadRequestError;OpenAI$1.AuthenticationError=AuthenticationError;OpenAI$1.InternalServerError=InternalServerError;OpenAI$1.PermissionDeniedError=PermissionDeniedError;OpenAI$1.UnprocessableEntityError=UnprocessableEntityError;OpenAI$1.toFile=toFile;OpenAI$1.fileFromPath=fileFromPath;OpenAI$1.Completions=Completions;OpenAI$1.Chat=Chat$1;OpenAI$1.ChatCompletionsPage=ChatCompletionsPage;OpenAI$1.Embeddings=Embeddings;OpenAI$1.Files=Files$1;OpenAI$1.FileObjectsPage=FileObjectsPage;OpenAI$1.Images=Images;OpenAI$1.Audio=Audio$1;OpenAI$1.Moderations=Moderations;OpenAI$1.Models=Models;OpenAI$1.ModelsPage=ModelsPage;OpenAI$1.FineTuning=FineTuning;OpenAI$1.VectorStores=VectorStores;OpenAI$1.VectorStoresPage=VectorStoresPage;OpenAI$1.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage;OpenAI$1.Beta=Beta;OpenAI$1.Batches=Batches;OpenAI$1.BatchesPage=BatchesPage;OpenAI$1.Uploads=Uploads;OpenAI$1.Responses=Responses;function parseToolCall(m,t){if(m.function===void 0)return;let n;if(t!=null&&t.partial)try{n=parsePartialJson(m.function.arguments??"{}")}catch{return}else try{n=JSON.parse(m.function.arguments)}catch(C){throw new OutputParserException([`Function "${m.function.name}" arguments:`,"",m.function.arguments,"","are not valid JSON.",`Error: ${C.message}`].join(`
`))}const p={name:m.function.name,args:n,type:"tool_call"};return t!=null&&t.returnId&&(p.id=m.id),p}function convertLangChainToolCallToOpenAI(m){if(m.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:m.id,type:"function",function:{name:m.name,arguments:JSON.stringify(m.args)}}}function makeInvalidToolCall(m,t){var n,p;return{name:(n=m.function)==null?void 0:n.name,args:(p=m.function)==null?void 0:p.arguments,id:m.id,error:t,type:"invalid_tool_call"}}class JsonOutputToolsParser extends BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(t){super(t),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(t==null?void 0:t.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(t){return await this.parsePartialResult(t,!1)}async parsePartialResult(t,n=!0){var o;const p=t[0].message;let C;if(isAIMessage(p)&&((o=p.tool_calls)!=null&&o.length)?C=p.tool_calls.map(E=>{const{id:e,...a}=E;return this.returnId?{id:e,...a}:a}):p.additional_kwargs.tool_calls!==void 0&&(C=JSON.parse(JSON.stringify(p.additional_kwargs.tool_calls)).map(e=>parseToolCall(e,{returnId:this.returnId,partial:n}))),!C)return[];const b=[];for(const E of C)if(E!==void 0){const e={type:E.name,args:E.args,id:E.id};b.push(e)}return b}}class JsonOutputKeyToolsParser extends JsonOutputToolsParser{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}async _validateResult(t){if(this.zodSchema===void 0)return t;const n=await this.zodSchema.safeParseAsync(t);if(n.success)return n.data;throw new OutputParserException(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(t,null,2))}async parsePartialResult(t){const p=(await super.parsePartialResult(t)).filter(b=>b.type===this.keyName);let C=p;if(p.length)return this.returnId||(C=p.map(b=>b.args)),this.returnSingle?C[0]:C}async parseResult(t){const p=(await super.parsePartialResult(t,!1)).filter(o=>o.type===this.keyName);let C=p;return p.length?(this.returnId||(C=p.map(o=>o.args)),this.returnSingle?this._validateResult(C[0]):await Promise.all(C.map(o=>this._validateResult(o)))):void 0}}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=m=>typeof m=="string"?{...defaultOptions,basePath:["#"],definitions:{},name:m}:{...defaultOptions,basePath:["#"],definitions:{},...m},zodDef=m=>"_def"in m?m._def:m;function isEmptyObj(m){if(!m)return!0;for(const t in m)return!1;return!0}const getRefs=m=>{const t=getDefaultOptions(m),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([p,C])=>[zodDef(C),{def:zodDef(C),path:[...t.basePath,t.definitionPath,p],jsonSchema:void 0}]))}};function addErrorMessage(m,t,n,p){p!=null&&p.errorMessages&&n&&(m.errorMessage={...m.errorMessage,[t]:n})}function setResponseValueAndErrors(m,t,n,p,C){m[t]=n,addErrorMessage(m,t,p,C)}function parseAnyDef(){return{}}function parseArrayDef(m,t){var p,C;const n={type:"array"};return((C=(p=m.type)==null?void 0:p._def)==null?void 0:C.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(n.items=parseDef(m.type._def,{...t,currentPath:[...t.currentPath,"items"]})),m.minLength&&setResponseValueAndErrors(n,"minItems",m.minLength.value,m.minLength.message,t),m.maxLength&&setResponseValueAndErrors(n,"maxItems",m.maxLength.value,m.maxLength.message,t),m.exactLength&&(setResponseValueAndErrors(n,"minItems",m.exactLength.value,m.exactLength.message,t),setResponseValueAndErrors(n,"maxItems",m.exactLength.value,m.exactLength.message,t)),n}function parseBigintDef(m,t){const n={type:"integer",format:"int64"};if(!m.checks)return n;for(const p of m.checks)switch(p.kind){case"min":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors(n,"minimum",p.value,p.message,t):setResponseValueAndErrors(n,"exclusiveMinimum",p.value,p.message,t):(p.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors(n,"minimum",p.value,p.message,t));break;case"max":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors(n,"maximum",p.value,p.message,t):setResponseValueAndErrors(n,"exclusiveMaximum",p.value,p.message,t):(p.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors(n,"maximum",p.value,p.message,t));break;case"multipleOf":setResponseValueAndErrors(n,"multipleOf",p.value,p.message,t);break}return n}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(m,t){return parseDef(m.type._def,t)}const parseCatchDef=(m,t)=>parseDef(m.innerType._def,t);function parseDateDef(m,t,n){const p=n??t.dateStrategy;if(Array.isArray(p))return{anyOf:p.map((C,b)=>parseDateDef(m,t,C))};switch(p){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(m,t)}}const integerDateParser=(m,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const p of m.checks)switch(p.kind){case"min":setResponseValueAndErrors(n,"minimum",p.value,p.message,t);break;case"max":setResponseValueAndErrors(n,"maximum",p.value,p.message,t);break}return n};function parseDefaultDef(m,t){return{...parseDef(m.innerType._def,t),default:m.defaultValue()}}function parseEffectsDef(m,t,n){return t.effectStrategy==="input"?parseDef(m.schema._def,t,n):{}}function parseEnumDef(m){return{type:"string",enum:[...m.values]}}const isJsonSchema7AllOfType=m=>"type"in m&&m.type==="string"?!1:"allOf"in m;function parseIntersectionDef(m,t){const n=[parseDef(m.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),parseDef(m.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(b=>!!b);let p=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const C=[];return n.forEach(b=>{if(isJsonSchema7AllOfType(b))C.push(...b.allOf),b.unevaluatedProperties===void 0&&(p=void 0);else{let o=b;if("additionalProperties"in b&&b.additionalProperties===!1){const{additionalProperties:E,...e}=b;o=e}else p=void 0;C.push(o)}}),C.length?{allOf:C,...p}:void 0}function parseLiteralDef(m,t){const n=typeof m.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(m.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[m.value]}:{type:n==="bigint"?"integer":n,const:m.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex===void 0&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function parseStringDef(m,t){const n={type:"string"};function p(C){return t.patternStrategy==="escape"?escapeNonAlphaNumeric(C):C}if(m.checks)for(const C of m.checks)switch(C.kind){case"min":setResponseValueAndErrors(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,C.value):C.value,C.message,t);break;case"max":setResponseValueAndErrors(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,C.value):C.value,C.message,t);break;case"email":switch(t.emailStrategy){case"format:email":addFormat(n,"email",C.message,t);break;case"format:idn-email":addFormat(n,"idn-email",C.message,t);break;case"pattern:zod":addPattern(n,zodPatterns.email,C.message,t);break}break;case"url":addFormat(n,"uri",C.message,t);break;case"uuid":addFormat(n,"uuid",C.message,t);break;case"regex":addPattern(n,C.regex,C.message,t);break;case"cuid":addPattern(n,zodPatterns.cuid,C.message,t);break;case"cuid2":addPattern(n,zodPatterns.cuid2,C.message,t);break;case"startsWith":addPattern(n,RegExp(`^${p(C.value)}`),C.message,t);break;case"endsWith":addPattern(n,RegExp(`${p(C.value)}$`),C.message,t);break;case"datetime":addFormat(n,"date-time",C.message,t);break;case"date":addFormat(n,"date",C.message,t);break;case"time":addFormat(n,"time",C.message,t);break;case"duration":addFormat(n,"duration",C.message,t);break;case"length":setResponseValueAndErrors(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,C.value):C.value,C.message,t),setResponseValueAndErrors(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,C.value):C.value,C.message,t);break;case"includes":{addPattern(n,RegExp(p(C.value)),C.message,t);break}case"ip":{C.version!=="v6"&&addFormat(n,"ipv4",C.message,t),C.version!=="v4"&&addFormat(n,"ipv6",C.message,t);break}case"emoji":addPattern(n,zodPatterns.emoji,C.message,t);break;case"ulid":{addPattern(n,zodPatterns.ulid,C.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{addFormat(n,"binary",C.message,t);break}case"contentEncoding:base64":{setResponseValueAndErrors(n,"contentEncoding","base64",C.message,t);break}case"pattern:zod":{addPattern(n,zodPatterns.base64,C.message,t);break}}break}case"nanoid":addPattern(n,zodPatterns.nanoid,C.message,t)}return n}const escapeNonAlphaNumeric=m=>Array.from(m).map(t=>/[a-zA-Z0-9]/.test(t)?t:`\\${t}`).join(""),addFormat=(m,t,n,p)=>{var C;m.format||(C=m.anyOf)!=null&&C.some(b=>b.format)?(m.anyOf||(m.anyOf=[]),m.format&&(m.anyOf.push({format:m.format,...m.errorMessage&&p.errorMessages&&{errorMessage:{format:m.errorMessage.format}}}),delete m.format,m.errorMessage&&(delete m.errorMessage.format,Object.keys(m.errorMessage).length===0&&delete m.errorMessage)),m.anyOf.push({format:t,...n&&p.errorMessages&&{errorMessage:{format:n}}})):setResponseValueAndErrors(m,"format",t,n,p)},addPattern=(m,t,n,p)=>{var C;m.pattern||(C=m.allOf)!=null&&C.some(b=>b.pattern)?(m.allOf||(m.allOf=[]),m.pattern&&(m.allOf.push({pattern:m.pattern,...m.errorMessage&&p.errorMessages&&{errorMessage:{pattern:m.errorMessage.pattern}}}),delete m.pattern,m.errorMessage&&(delete m.errorMessage.pattern,Object.keys(m.errorMessage).length===0&&delete m.errorMessage)),m.allOf.push({pattern:processRegExp(t,p),...n&&p.errorMessages&&{errorMessage:{pattern:n}}})):setResponseValueAndErrors(m,"pattern",processRegExp(t,p),n,p)},processRegExp=(m,t)=>{var a;const n=typeof m=="function"?m():m;if(!t.applyRegexFlags||!n.flags)return n.source;const p={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},C=p.i?n.source.toLowerCase():n.source;let b="",o=!1,E=!1,e=!1;for(let x=0;x<C.length;x++){if(o){b+=C[x],o=!1;continue}if(p.i){if(E){if(C[x].match(/[a-z]/)){e?(b+=C[x],b+=`${C[x-2]}-${C[x]}`.toUpperCase(),e=!1):C[x+1]==="-"&&((a=C[x+2])!=null&&a.match(/[a-z]/))?(b+=C[x],e=!0):b+=`${C[x]}${C[x].toUpperCase()}`;continue}}else if(C[x].match(/[a-z]/)){b+=`[${C[x]}${C[x].toUpperCase()}]`;continue}}if(p.m){if(C[x]==="^"){b+=`(^|(?<=[\r
]))`;continue}else if(C[x]==="$"){b+=`($|(?=[\r
]))`;continue}}if(p.s&&C[x]==="."){b+=E?`${C[x]}\r
`:`[${C[x]}\r
]`;continue}b+=C[x],C[x]==="\\"?o=!0:E&&C[x]==="]"?E=!1:!E&&C[x]==="["&&(E=!0)}try{const x=new RegExp(b)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return b};function parseRecordDef(m,t){var p,C,b,o;if(t.target==="openApi3"&&((p=m.keyType)==null?void 0:p._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:m.keyType._def.values,properties:m.keyType._def.values.reduce((E,e)=>({...E,[e]:parseDef(m.valueType._def,{...t,currentPath:[...t.currentPath,"properties",e]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:parseDef(m.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if(t.target==="openApi3")return n;if(((C=m.keyType)==null?void 0:C._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((b=m.keyType._def.checks)!=null&&b.length)){const E=Object.entries(parseStringDef(m.keyType._def,t)).reduce((e,[a,x])=>a==="type"?e:{...e,[a]:x},{});return{...n,propertyNames:E}}else if(((o=m.keyType)==null?void 0:o._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...n,propertyNames:{enum:m.keyType._def.values}};return n}function parseMapDef(m,t){if(t.mapStrategy==="record")return parseRecordDef(m,t);const n=parseDef(m.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},p=parseDef(m.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,p],minItems:2,maxItems:2}}}function parseNativeEnumDef(m){const t=m.values,p=Object.keys(m.values).filter(b=>typeof t[t[b]]!="number").map(b=>t[b]),C=Array.from(new Set(p.map(b=>typeof b)));return{type:C.length===1?C[0]==="string"?"string":"number":["string","number"],enum:p}}function parseNeverDef(){return{not:{}}}function parseNullDef(m){return m.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(m,t){if(t.target==="openApi3")return asAnyOf(m,t);const n=m.options instanceof Map?Array.from(m.options.values()):m.options;if(n.every(p=>p._def.typeName in primitiveMappings&&(!p._def.checks||!p._def.checks.length))){const p=n.reduce((C,b)=>{const o=primitiveMappings[b._def.typeName];return o&&!C.includes(o)?[...C,o]:C},[]);return{type:p.length>1?p:p[0]}}else if(n.every(p=>p._def.typeName==="ZodLiteral"&&!p.description)){const p=n.reduce((C,b)=>{const o=typeof b._def.value;switch(o){case"string":case"number":case"boolean":return[...C,o];case"bigint":return[...C,"integer"];case"object":if(b._def.value===null)return[...C,"null"];case"symbol":case"undefined":case"function":default:return C}},[]);if(p.length===n.length){const C=p.filter((b,o,E)=>E.indexOf(b)===o);return{type:C.length>1?C:C[0],enum:n.reduce((b,o)=>b.includes(o._def.value)?b:[...b,o._def.value],[])}}}else if(n.every(p=>p._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((p,C)=>[...p,...C._def.values.filter(b=>!p.includes(b))],[])};return asAnyOf(m,t)}const asAnyOf=(m,t)=>{const n=(m.options instanceof Map?Array.from(m.options.values()):m.options).map((p,C)=>parseDef(p._def,{...t,currentPath:[...t.currentPath,"anyOf",`${C}`]})).filter(p=>!!p&&(!t.strictUnions||typeof p=="object"&&Object.keys(p).length>0));return n.length?{anyOf:n}:void 0};function parseNullableDef(m,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(m.innerType._def.typeName)&&(!m.innerType._def.checks||!m.innerType._def.checks.length))return t.target==="openApi3"||t.nullableStrategy==="property"?{type:primitiveMappings[m.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[m.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const p=parseDef(m.innerType._def,{...t,currentPath:[...t.currentPath]});return p&&"$ref"in p?{allOf:[p],nullable:!0}:p&&{...p,nullable:!0}}const n=parseDef(m.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function parseNumberDef(m,t){const n={type:"number"};if(!m.checks)return n;for(const p of m.checks)switch(p.kind){case"int":n.type="integer",addErrorMessage(n,"type",p.message,t);break;case"min":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors(n,"minimum",p.value,p.message,t):setResponseValueAndErrors(n,"exclusiveMinimum",p.value,p.message,t):(p.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors(n,"minimum",p.value,p.message,t));break;case"max":t.target==="jsonSchema7"?p.inclusive?setResponseValueAndErrors(n,"maximum",p.value,p.message,t):setResponseValueAndErrors(n,"exclusiveMaximum",p.value,p.message,t):(p.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors(n,"maximum",p.value,p.message,t));break;case"multipleOf":setResponseValueAndErrors(n,"multipleOf",p.value,p.message,t);break}return n}function decideAdditionalProperties(m,t){return t.removeAdditionalStrategy==="strict"?m.catchall._def.typeName==="ZodNever"?m.unknownKeys!=="strict":parseDef(m.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:m.catchall._def.typeName==="ZodNever"?m.unknownKeys==="passthrough":parseDef(m.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function parseObjectDef(m,t){const n={type:"object",...Object.entries(m.shape()).reduce((p,[C,b])=>{if(b===void 0||b._def===void 0)return p;const o=parseDef(b._def,{...t,currentPath:[...t.currentPath,"properties",C],propertyPath:[...t.currentPath,"properties",C]});return o===void 0?p:{properties:{...p.properties,[C]:o},required:b.isOptional()&&!t.openaiStrictMode?p.required:[...p.required,C]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(m,t)};return n.required.length||delete n.required,n}const parseOptionalDef=(m,t)=>{var p;if(t.currentPath.toString()===((p=t.propertyPath)==null?void 0:p.toString()))return parseDef(m.innerType._def,t);const n=parseDef(m.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},parsePipelineDef=(m,t)=>{if(t.pipeStrategy==="input")return parseDef(m.in._def,t);if(t.pipeStrategy==="output")return parseDef(m.out._def,t);const n=parseDef(m.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),p=parseDef(m.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,p].filter(C=>C!==void 0)}};function parsePromiseDef(m,t){return parseDef(m.type._def,t)}function parseSetDef(m,t){const p={type:"array",uniqueItems:!0,items:parseDef(m.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return m.minSize&&setResponseValueAndErrors(p,"minItems",m.minSize.value,m.minSize.message,t),m.maxSize&&setResponseValueAndErrors(p,"maxItems",m.maxSize.value,m.maxSize.message,t),p}function parseTupleDef(m,t){return m.rest?{type:"array",minItems:m.items.length,items:m.items.map((n,p)=>parseDef(n._def,{...t,currentPath:[...t.currentPath,"items",`${p}`]})).reduce((n,p)=>p===void 0?n:[...n,p],[]),additionalItems:parseDef(m.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:m.items.length,maxItems:m.items.length,items:m.items.map((n,p)=>parseDef(n._def,{...t,currentPath:[...t.currentPath,"items",`${p}`]})).reduce((n,p)=>p===void 0?n:[...n,p],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(m,t)=>parseDef(m.innerType._def,t);function parseDef(m,t,n=!1){var o;const p=t.seen.get(m);if(t.override){const E=(o=t.override)==null?void 0:o.call(t,m,t,p,n);if(E!==ignoreOverride)return E}if(p&&!n){const E=get$ref(p,t);if(E!==void 0)return"$ref"in E&&t.seenRefs.add(E.$ref),E}const C={def:m,path:t.currentPath,jsonSchema:void 0};t.seen.set(m,C);const b=selectParser(m,m.typeName,t,n);return b&&addMeta(m,t,b),C.jsonSchema=b,b}const get$ref=(m,t)=>{switch(t.$refStrategy){case"root":return{$ref:m.path.join("/")};case"extract-to-root":const n=m.path.slice(t.basePath.length+1).join("_");return n!==t.name&&t.nameStrategy==="duplicate-ref"&&(t.definitions[n]=m.def),{$ref:[...t.basePath,t.definitionPath,n].join("/")};case"relative":return{$ref:getRelativePath(t.currentPath,m.path)};case"none":case"seen":return m.path.length<t.currentPath.length&&m.path.every((p,C)=>t.currentPath[C]===p)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},getRelativePath=(m,t)=>{let n=0;for(;n<m.length&&n<t.length&&m[n]===t[n];n++);return[(m.length-n).toString(),...t.slice(n)].join("/")},selectParser=(m,t,n,p)=>{switch(t){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(m,n);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(m,n);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(m,n);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(m,n);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(m,n);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(n);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(m,n);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(m,n);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(m,n);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(m,n);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(m,n);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(m,n);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(m);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(m);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(m,n);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(m,n);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(m,n);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(m,n);case ZodFirstPartyTypeKind.ZodLazy:return parseDef(m.getter()._def,n);case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(m,n);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(m,n,p);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(m,n);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(m,n);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(m,n);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(m,n);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(m,n);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(C=>{})()}},addMeta=(m,t,n)=>(m.description&&(n.description=m.description,t.markdownDescription&&(n.markdownDescription=m.description)),n),zodToJsonSchema$1=(m,t)=>{const n=getRefs(t),p=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,C=parseDef(m._def,p===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,p]},!1)??{},b=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;b!==void 0&&(C.title=b);const o=(()=>{if(isEmptyObj(n.definitions))return;const e={},a=new Set;for(let x=0;x<500;x++){const c=Object.entries(n.definitions).filter(([u])=>!a.has(u));if(c.length===0)break;for(const[u,h]of c)e[u]=parseDef(zodDef(h),{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{},a.add(u)}return e})(),E=p===void 0?o?{...C,[n.definitionPath]:o}:C:n.nameStrategy==="duplicate-ref"?{...C,...o||n.seenRefs.size?{[n.definitionPath]:{...o,...n.seenRefs.size?{[p]:C}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,p].join("/"),[n.definitionPath]:{...o,[p]:C}};return n.target==="jsonSchema7"?E.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(E.$schema="https://json-schema.org/draft/2019-09/schema#"),E};function zodToJsonSchema(m,t){return zodToJsonSchema$1(m,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function zodResponseFormat(m,t,n){return makeParseableResponseFormat({type:"json_schema",json_schema:{...n,name:t,strict:!0,schema:zodToJsonSchema(m,{name:t})}},p=>m.parse(JSON.parse(p)))}function zodFunction(m){return makeParseableTool({type:"function",function:{name:m.name,parameters:zodToJsonSchema(m.parameters,{name:m.name}),strict:!0,...m.description?{description:m.description}:void 0}},{callback:m.function,parser:t=>m.parameters.parse(JSON.parse(t))})}function getEndpoint(m){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:p,azureOpenAIBasePath:C,baseURL:b,azureADTokenProvider:o,azureOpenAIEndpoint:E}=m;if((p||o)&&C&&t)return`${C}/${t}`;if((p||o)&&E&&t)return`${E}/openai/deployments/${t}`;if(p||o){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${t}`}return b}function addLangChainErrorFields(m,t){return m.lc_error_code=t,m.message=`${m.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/
`,m}function wrapOpenAIClientError(m){let t;return m.constructor.name===APIConnectionTimeoutError.name?(t=new Error(m.message),t.name="TimeoutError"):m.constructor.name===APIUserAbortError.name?(t=new Error(m.message),t.name="AbortError"):m.status===400&&m.message.includes("tool_calls")?t=addLangChainErrorFields(m,"INVALID_TOOL_RESULTS"):m.status===401?t=addLangChainErrorFields(m,"MODEL_AUTHENTICATION"):m.status===429?t=addLangChainErrorFields(m,"MODEL_RATE_LIMIT"):m.status===404?t=addLangChainErrorFields(m,"MODEL_NOT_FOUND"):t=m,t}function formatToOpenAIToolChoice(m){if(m)return m==="any"||m==="required"?"required":m==="auto"?"auto":m==="none"?"none":typeof m=="string"?{type:"function",function:{name:m}}:m}function isAnyOfProp(m){return m.anyOf!==void 0&&Array.isArray(m.anyOf)}function formatFunctionDefinitions(m){const t=["namespace functions {",""];for(const n of m)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push(formatObjectProperties(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join(`
`)}function formatObjectProperties(m,t){var p;const n=[];for(const[C,b]of Object.entries(m.properties??{}))b.description&&t<2&&n.push(`// ${b.description}`),(p=m.required)!=null&&p.includes(C)?n.push(`${C}: ${formatType(b,t)},`):n.push(`${C}?: ${formatType(b,t)},`);return n.map(C=>" ".repeat(t)+C).join(`
`)}function formatType(m,t){if(isAnyOfProp(m))return m.anyOf.map(n=>formatType(n,t)).join(" | ");switch(m.type){case"string":return m.enum?m.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return m.enum?m.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return m.enum?m.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",formatObjectProperties(m,t+2),"}"].join(`
`);case"array":return m.items?`${formatType(m.items,t)}[]`:"any[]";default:return""}}function _convertToOpenAITool(m,t){let n;if(isLangChainTool(m)){const p=zodFunction({name:m.name,parameters:m.schema,description:m.description});p.function.parameters?n={type:p.type,function:{name:p.function.name,description:p.function.description,parameters:p.function.parameters,...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}}:n={type:"function",function:convertToOpenAIFunction(m,t)}}else n=m;return(t==null?void 0:t.strict)!==void 0&&(n.function.strict=t.strict),n}function extractGenericMessageCustomRole(m){return m.role!=="system"&&m.role!=="developer"&&m.role!=="assistant"&&m.role!=="user"&&m.role!=="function"&&m.role!=="tool"&&console.warn(`Unknown message role: ${m.role}`),m.role}function messageToOpenAIRole(m){const t=m._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!ChatMessage.isInstance(m))throw new Error("Invalid generic chat message");return extractGenericMessageCustomRole(m)}default:throw new Error(`Unknown message type: ${t}`)}}function _convertMessagesToOpenAIParams(m,t){return m.flatMap(n=>{var b;let p=messageToOpenAIRole(n);p==="system"&&isReasoningModel(t)&&(p="developer");const C={role:p,content:n.content};if(n.name!=null&&(C.name=n.name),n.additional_kwargs.function_call!=null&&(C.function_call=n.additional_kwargs.function_call,C.content=null),isAIMessage(n)&&((b=n.tool_calls)!=null&&b.length)?(C.tool_calls=n.tool_calls.map(convertLangChainToolCallToOpenAI),C.content=null):(n.additional_kwargs.tool_calls!=null&&(C.tool_calls=n.additional_kwargs.tool_calls),n.tool_call_id!=null&&(C.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){const o={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[C,o]}return C})}function _convertChatOpenAIToolTypeToOpenAITool(m,t){return isOpenAITool(m)?(t==null?void 0:t.strict)!==void 0?{...m,function:{...m.function,strict:t.strict}}:m:_convertToOpenAITool(m,t)}function isReasoningModel(m){return(m==null?void 0:m.startsWith("o1"))||(m==null?void 0:m.startsWith("o3"))}class ChatOpenAI extends BaseChatModel{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming"]}constructor(t){var n,p;super(t??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(t==null?void 0:t.apiKey)??(t==null?void 0:t.openAIApiKey)??((n=t==null?void 0:t.configuration)==null?void 0:n.apiKey)??getEnvironmentVariable$1("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=((p=t==null?void 0:t.configuration)==null?void 0:p.organization)??getEnvironmentVariable$1("OPENAI_ORGANIZATION"),this.model=(t==null?void 0:t.model)??(t==null?void 0:t.modelName)??this.model,this.modelName=this.model,this.modelKwargs=(t==null?void 0:t.modelKwargs)??{},this.timeout=t==null?void 0:t.timeout,this.temperature=(t==null?void 0:t.temperature)??this.temperature,this.topP=(t==null?void 0:t.topP)??this.topP,this.frequencyPenalty=(t==null?void 0:t.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(t==null?void 0:t.presencePenalty)??this.presencePenalty,this.logprobs=t==null?void 0:t.logprobs,this.topLogprobs=t==null?void 0:t.topLogprobs,this.n=(t==null?void 0:t.n)??this.n,this.logitBias=t==null?void 0:t.logitBias,this.stop=(t==null?void 0:t.stopSequences)??(t==null?void 0:t.stop),this.stopSequences=this==null?void 0:this.stop,this.user=t==null?void 0:t.user,this.__includeRawResponse=t==null?void 0:t.__includeRawResponse,this.audio=t==null?void 0:t.audio,this.modalities=t==null?void 0:t.modalities,this.reasoningEffort=t==null?void 0:t.reasoningEffort,this.maxTokens=(t==null?void 0:t.maxCompletionTokens)??(t==null?void 0:t.maxTokens),this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(t==null?void 0:t.streaming)??!1,this.streamUsage=(t==null?void 0:t.streamUsage)??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...t==null?void 0:t.configuration},(t==null?void 0:t.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=t.supportsStrictToolCalling)}getLsParams(t){const n=this.invocationParams(t);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:t.stop}}bindTools(t,n){let p;return(n==null?void 0:n.strict)!==void 0?p=n.strict:this.supportsStrictToolCalling!==void 0&&(p=this.supportsStrictToolCalling),this.bind({tools:t.map(C=>_convertChatOpenAIToolTypeToOpenAITool(C,{strict:p})),...n})}createResponseFormat(t){return t&&t.type==="json_schema"&&t.json_schema.schema&&isZodSchema(t.json_schema.schema)?zodResponseFormat(t.json_schema.schema,t.json_schema.name,{description:t.json_schema.description}):t}invocationParams(t,n){var E;let p;(t==null?void 0:t.strict)!==void 0?p=t.strict:this.supportsStrictToolCalling!==void 0&&(p=this.supportsStrictToolCalling);let C={};(t==null?void 0:t.stream_options)!==void 0?C={stream_options:t.stream_options}:this.streamUsage&&(this.streaming||n!=null&&n.streaming)&&(C={stream_options:{include_usage:!0}});const b={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(t==null?void 0:t.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:t==null?void 0:t.functions,function_call:t==null?void 0:t.function_call,tools:(E=t==null?void 0:t.tools)!=null&&E.length?t.tools.map(e=>_convertChatOpenAIToolTypeToOpenAITool(e,{strict:p})):void 0,tool_choice:formatToOpenAIToolChoice(t==null?void 0:t.tool_choice),response_format:this.createResponseFormat(t==null?void 0:t.response_format),seed:t==null?void 0:t.seed,...C,parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,...this.audio||t!=null&&t.audio?{audio:this.audio||(t==null?void 0:t.audio)}:{},...this.modalities||t!=null&&t.modalities?{modalities:this.modalities||(t==null?void 0:t.modalities)}:{},...this.modelKwargs};(t==null?void 0:t.prediction)!==void 0&&(b.prediction=t.prediction);const o=(t==null?void 0:t.reasoning_effort)??this.reasoningEffort;return o!==void 0&&(b.reasoning_effort=o),isReasoningModel(b.model)?b.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:b.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,b}_convertOpenAIChatCompletionMessageToBaseMessage(t,n){const p=t.tool_calls;switch(t.role){case"assistant":{const C=[],b=[];for(const e of p??[])try{C.push(parseToolCall(e,{returnId:!0}))}catch(a){b.push(makeInvalidToolCall(e,a.message))}const o={function_call:t.function_call,tool_calls:p};this.__includeRawResponse!==void 0&&(o.__raw_response=n);const E={model_name:n.model,...n.system_fingerprint?{usage:{...n.usage},system_fingerprint:n.system_fingerprint}:{}};return t.audio&&(o.audio=t.audio),new AIMessage({content:t.content||"",tool_calls:C,invalid_tool_calls:b,additional_kwargs:o,response_metadata:E,id:n.id})}default:return new ChatMessage(t.content||"",t.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(t,n,p){var e,a;const C=t.role??p,b=t.content??"";let o;t.function_call?o={function_call:t.function_call}:t.tool_calls?o={tool_calls:t.tool_calls}:o={},this.__includeRawResponse&&(o.__raw_response=n),t.audio&&(o.audio={...t.audio,index:n.choices[0].index});const E={usage:{...n.usage}};if(C==="user")return new HumanMessageChunk({content:b,response_metadata:E});if(C==="assistant"){const x=[];if(Array.isArray(t.tool_calls))for(const c of t.tool_calls)x.push({name:(e=c.function)==null?void 0:e.name,args:(a=c.function)==null?void 0:a.arguments,id:c.id,index:c.index,type:"tool_call_chunk"});return new AIMessageChunk({content:b,tool_call_chunks:x,additional_kwargs:o,id:n.id,response_metadata:E})}else return C==="system"?new SystemMessageChunk({content:b,response_metadata:E}):C==="developer"?new SystemMessageChunk({content:b,response_metadata:E,additional_kwargs:{__openai_role__:"developer"}}):C==="function"?new FunctionMessageChunk({content:b,additional_kwargs:o,name:t.name,response_metadata:E}):C==="tool"?new ToolMessageChunk({content:b,additional_kwargs:o,tool_call_id:t.tool_call_id,response_metadata:E}):new ChatMessageChunk({content:b,role:C,response_metadata:E})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(t,n,p){var a,x,c,u,h,s,l,v,d,g;const C=_convertMessagesToOpenAIParams(t,this.model),b={...this.invocationParams(n,{streaming:!0}),messages:C,stream:!0};let o;const E=await this.completionWithRetry(b,n);let e;for await(const y of E){const S=(a=y==null?void 0:y.choices)==null?void 0:a[0];if(y.usage&&(e=y.usage),!S)continue;const{delta:T}=S;if(!T)continue;const w=this._convertOpenAIDeltaToBaseMessageChunk(T,y,o);o=T.role??o;const P={prompt:n.promptIndex??0,completion:S.index??0};if(typeof w.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const A={...P};S.finish_reason!=null&&(A.finish_reason=S.finish_reason,A.system_fingerprint=y.system_fingerprint,A.model_name=y.model),this.logprobs&&(A.logprobs=S.logprobs);const R=new ChatGenerationChunk({message:w,text:w.content,generationInfo:A});yield R,await(p==null?void 0:p.handleLLMNewToken(R.text??"",P,void 0,void 0,void 0,{chunk:R}))}if(e){const y={...((x=e.prompt_tokens_details)==null?void 0:x.audio_tokens)!==null&&{audio:(c=e.prompt_tokens_details)==null?void 0:c.audio_tokens},...((u=e.prompt_tokens_details)==null?void 0:u.cached_tokens)!==null&&{cache_read:(h=e.prompt_tokens_details)==null?void 0:h.cached_tokens}},S={...((s=e.completion_tokens_details)==null?void 0:s.audio_tokens)!==null&&{audio:(l=e.completion_tokens_details)==null?void 0:l.audio_tokens},...((v=e.completion_tokens_details)==null?void 0:v.reasoning_tokens)!==null&&{reasoning:(d=e.completion_tokens_details)==null?void 0:d.reasoning_tokens}};yield new ChatGenerationChunk({message:new AIMessageChunk({content:"",response_metadata:{usage:{...e}},usage_metadata:{input_tokens:e.prompt_tokens,output_tokens:e.completion_tokens,total_tokens:e.total_tokens,...Object.keys(y).length>0&&{input_token_details:y},...Object.keys(S).length>0&&{output_token_details:S}}}),text:""})}if((g=n.signal)!=null&&g.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(t,n,p){var E,e;const C={},b=this.invocationParams(n),o=_convertMessagesToOpenAIParams(t,this.model);if(b.stream){const a=this._streamResponseChunks(t,n,p),x={};for await(const v of a){v.message.response_metadata={...v.generationInfo,...v.message.response_metadata};const d=((E=v.generationInfo)==null?void 0:E.completion)??0;x[d]===void 0?x[d]=v:x[d]=x[d].concat(v)}const c=Object.entries(x).sort(([v],[d])=>parseInt(v,10)-parseInt(d,10)).map(([v,d])=>d),{functions:u,function_call:h}=this.invocationParams(n),s=await this.getEstimatedTokenCountFromPrompt(t,u,h),l=await this.getNumTokensFromGenerations(c);return C.input_tokens=s,C.output_tokens=l,C.total_tokens=s+l,{generations:c,llmOutput:{estimatedTokenUsage:{promptTokens:C.input_tokens,completionTokens:C.output_tokens,totalTokens:C.total_tokens}}}}else{let a;n.response_format&&n.response_format.type==="json_schema"?a=await this.betaParsedCompletionWithRetry({...b,stream:!1,messages:o},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options}):a=await this.completionWithRetry({...b,stream:!1,messages:o},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options});const{completion_tokens:x,prompt_tokens:c,total_tokens:u,prompt_tokens_details:h,completion_tokens_details:s}=(a==null?void 0:a.usage)??{};x&&(C.output_tokens=(C.output_tokens??0)+x),c&&(C.input_tokens=(C.input_tokens??0)+c),u&&(C.total_tokens=(C.total_tokens??0)+u),((h==null?void 0:h.audio_tokens)!==null||(h==null?void 0:h.cached_tokens)!==null)&&(C.input_token_details={...(h==null?void 0:h.audio_tokens)!==null&&{audio:h==null?void 0:h.audio_tokens},...(h==null?void 0:h.cached_tokens)!==null&&{cache_read:h==null?void 0:h.cached_tokens}}),((s==null?void 0:s.audio_tokens)!==null||(s==null?void 0:s.reasoning_tokens)!==null)&&(C.output_token_details={...(s==null?void 0:s.audio_tokens)!==null&&{audio:s==null?void 0:s.audio_tokens},...(s==null?void 0:s.reasoning_tokens)!==null&&{reasoning:s==null?void 0:s.reasoning_tokens}});const l=[];for(const v of(a==null?void 0:a.choices)??[]){const g={text:((e=v.message)==null?void 0:e.content)??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(v.message??{role:"assistant"},a)};g.generationInfo={...v.finish_reason?{finish_reason:v.finish_reason}:{},...v.logprobs?{logprobs:v.logprobs}:{}},isAIMessage(g.message)&&(g.message.usage_metadata=C),g.message=new AIMessage(Object.fromEntries(Object.entries(g.message).filter(([y])=>!y.startsWith("lc_")))),l.push(g)}return{generations:l,llmOutput:{tokenUsage:{promptTokens:C.input_tokens,completionTokens:C.output_tokens,totalTokens:C.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(t,n,p){let C=(await this.getNumTokensFromMessages(t)).totalCount;if(n&&p!=="auto"){const b=formatFunctionDefinitions(n);C+=await this.getNumTokens(b),C+=9}return n&&t.find(b=>b._getType()==="system")&&(C-=4),p==="none"?C+=1:typeof p=="object"&&(C+=await this.getNumTokens(p.name)+4),C}async getNumTokensFromGenerations(t){return(await Promise.all(t.map(async p=>{var C;return(C=p.message.additional_kwargs)!=null&&C.function_call?(await this.getNumTokensFromMessages([p.message])).countPerMessage[0]:await this.getNumTokens(p.message.content)}))).reduce((p,C)=>p+C,0)}async getNumTokensFromMessages(t){let n=0,p=0,C=0;this.model==="gpt-3.5-turbo-0301"?(p=4,C=-1):(p=3,C=1);const b=await Promise.all(t.map(async o=>{var u,h,s,l,v,d;const E=await this.getNumTokens(o.content),e=await this.getNumTokens(messageToOpenAIRole(o)),a=o.name!==void 0?C+await this.getNumTokens(o.name):0;let x=E+p+e+a;const c=o;if(c._getType()==="function"&&(x-=2),(u=c.additional_kwargs)!=null&&u.function_call&&(x+=3),(h=c==null?void 0:c.additional_kwargs.function_call)!=null&&h.name&&(x+=await this.getNumTokens((s=c.additional_kwargs.function_call)==null?void 0:s.name)),(l=c.additional_kwargs.function_call)!=null&&l.arguments)try{x+=await this.getNumTokens(JSON.stringify(JSON.parse((v=c.additional_kwargs.function_call)==null?void 0:v.arguments)))}catch(g){console.error("Error parsing function arguments",g,JSON.stringify(c.additional_kwargs.function_call)),x+=await this.getNumTokens((d=c.additional_kwargs.function_call)==null?void 0:d.arguments)}return n+=x,x}));return n+=3,{totalCount:n,countPerMessage:b}}async completionWithRetry(t,n){const p=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(t,p)}catch(C){throw wrapOpenAIClientError(C)}})}async betaParsedCompletionWithRetry(t,n){const p=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(t,p)}catch(C){throw wrapOpenAIClientError(C)}})}_getClientOptions(t){if(!this.client){const p={baseURL:this.clientConfig.baseURL},C=getEndpoint(p),b={...this.clientConfig,baseURL:C,timeout:this.timeout,maxRetries:0};b.baseURL||delete b.baseURL,this.client=new OpenAI$1(b)}return{...this.clientConfig,...t}}_llmType(){return"openai"}_combineLLMOutput(...t){return t.reduce((n,p)=>(p&&p.tokenUsage&&(n.tokenUsage.completionTokens+=p.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=p.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=p.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(t,n){let p,C,b,o;isStructuredOutputMethodParams(t)?(p=t.schema,C=t.name,b=t.method,o=t.includeRaw):(p=t,C=n==null?void 0:n.name,b=n==null?void 0:n.method,o=n==null?void 0:n.includeRaw);let E,e;if((n==null?void 0:n.strict)!==void 0&&b==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?b===void 0&&(b="jsonSchema"):b==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),b==="jsonMode")E=this.bind({response_format:{type:"json_object"}}),isZodSchema(p)?e=StructuredOutputParser.fromZodSchema(p):e=new JsonOutputParser;else if(b==="jsonSchema")E=this.bind({response_format:{type:"json_schema",json_schema:{name:C??"extract",description:p.description,schema:p,strict:n==null?void 0:n.strict}}}),isZodSchema(p)?e=StructuredOutputParser.fromZodSchema(p):e=new JsonOutputParser;else{let u=C??"extract";if(isZodSchema(p)){const h=zodToJsonSchema$2(p);E=this.bind({tools:[{type:"function",function:{name:u,description:h.description,parameters:h}}],tool_choice:{type:"function",function:{name:u}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),e=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:u,zodSchema:p})}else{let h;typeof p.name=="string"&&typeof p.parameters=="object"&&p.parameters!=null?(h=p,u=p.name):(u=p.title??u,h={name:u,description:p.description??"",parameters:p}),E=this.bind({tools:[{type:"function",function:h}],tool_choice:{type:"function",function:{name:u}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),e=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:u})}}if(!o)return E.pipe(e);const a=RunnablePassthrough.assign({parsed:(u,h)=>e.invoke(u.raw,h)}),x=RunnablePassthrough.assign({parsed:()=>null}),c=a.withFallbacks({fallbacks:[x]});return RunnableSequence.from([{raw:E},c])}}function isZodSchema(m){return typeof(m==null?void 0:m.parse)=="function"}function isStructuredOutputMethodParams(m){return m!==void 0&&typeof m.schema=="object"}const ghibli="./data/ghibli.csv",openai=new OpenAI$1({apiKey:void 0,dangerouslyAllowBrowser:!0}),llm=new ChatOpenAI({apiKey:void 0,modelName:"gpt-4o-mini"}),GeneralStateAnnotation=Annotation.Root({data:Annotation,votingTopic:Annotation,votingVotes:Annotation({default:()=>[],reducer:(m,t)=>m.concat(t)}),votingToChaining:Annotation,chainFormattedText:Annotation,chainingToRouting:Annotation,routeDecision:Annotation,routeOutput:Annotation});async function createReport(m,t,n,p){const C=m.add.image(n,p,"report").setDepth(1002).setInteractive();return C.on("pointerdown",()=>{EventBus.emit("open-report",{department:t}),console.log("report button clicked",t)}),C}function createJournalist(m,t,n,p,C,b){return async function(E){console.log("journalist state:",E.votingToChaining);let e=ghibli;E.votingToChaining||E.votingToChaining.includes("UCB")&&(e=ghibli);const x=await(await fetch(e)).text();console.log("csvRaw",x),await updateStateIcons(C,"work",0),await updateStateIcons(n.chainingZones,"work");const c=await llm.invoke(`you are a journalist, and your work is to analyze the given dataset...

`+x+`

the dataset is wrong, the 2 line and 5 line is missing and you read the wrong data, and also there are department C in the dataseet


Format your response with:
## Findings
## Limitations
## Bias Check`);console.log("journalist msg:",c.content);const u=m.x,h=m.y;return await updateStateIcons(C,"mail",0),await autoControlAgent(n,m,p,t==null?void 0:t.x,t==null?void 0:t.y,"Send Message"),await autoControlAgent(n,m,p,u,h,"Return to Office"),await updateStateIcons(C,"idle",0),{chainFormattedText:c.content}}}function createWriter(m,t,n,p,C,b){return async function(E){console.log("writer state: ",E.chainFormattedText),await updateStateIcons(C,"work",1);const e=await llm.invoke(`you are a news writer, based on the given insights, generate a consice news article to summarize that(words<200)
`+E.chainFormattedText+`
you have follow everything you received that you don't need to analyze it is true or wrong, you just generate the article based on the input
In your article:
- Highlight demographic balances
- Use 'may suggest' instead of 'proves'
- Note sample size limitations`);console.log("writer msg: ",e.content);const a=`
        

${e.content}
        `;EventBus.emit("final-report",{report:a,department:"chaining"});const x=m.x,c=m.y;await updateStateIcons(C,"mail",1),await updateStateIcons(t.chainingZones,"mail"),await autoControlAgent(t,m,n,p.x,p.y,"Send Report to Final Location"),await createReport(t,"chaining",p.x,p.y);const u=await createReport(t,"voting",p.x,p.y);return await autoControlAgent(t,m,n,x,c,"Return to Office"),await console.log("report in agent",u),await transmitReport(t,u,767,330),await updateStateIcons(t.chainingZones,"idle"),await updateStateIcons(C,"idle",1),{chainingToRouting:e.content}}}function initializeLLM(){return new ChatOpenAI({apiKey:void 0,modelName:"gpt-4o-mini"})}function transformDataMap(m,t){console.log("input: ",m);const n=[];for(let p=0;p<m.length;p++){let C={agents:[],location:m[p].name,task:m[p].task};const b=m[p],o=Array.from(b.agentsInside);console.log(" tdm insideAgents: ",o);for(let E=0;E<o.length;E++){const e=o[E];console.log("tdm agents: ",t,e);for(let a=0;a<t.length;a++)t[a].getName()===e&&C.agents.push(t[a])}n.push(C)}return console.log("transformDataMap output: ",n),n}function constructLangGraph(m,t,n,p,C){const b=new StateGraph(GeneralStateAnnotation),o=[];for(let e=0;e<m.length;e++){const a=m[e];for(let x=0;x<a.agents.length;x++){const c=a.agents[x];e===0&&x===0&&b.addNode(c.getName(),createJournalist(c,m[1].agents[0],t,n,C,m[1].task)),e===1&&x===0&&(console.log("create agent",c),b.addNode(c.getName(),createWriter(c,t,n,p,C,m[1].task))),console.log("add a node",c.getName(),c.activate()),o.push(c.getName())}}const E=[];for(let e=0;e<o.length-1;e++)e===0&&E.push({from:START,to:o[e]}),e===o.length-1?E.push({from:o[e],to:END}):E.push({from:o[e],to:o[e+1]});for(let e=0;e<E.length;e++)console.log("add an edge",E[e].from,E[e].to),b.addEdge(E[e].from,E[e].to);return console.log("langgraph: ",b),console.log("agentNames: ",o),b.compile()}async function parallelVotingExecutor(m,t,n,p,C,b){console.log("[Debug] Starting parallelVotingExecutor...");const o=m.map(x=>({x:x.x,y:x.y}));await updateStateIcons(C,"work");const E=initializeLLM(),e=m.map(async(x,c)=>{console.log(`[Debug] Starting voting process for agent: ${x.getName()}...`),console.log(`[Debug] Agent ${x.getName()} is moving to voting location...`),await autoControlAgent(t,x,n,p.x,p.y,"Go vote"),console.log(`[Debug] Agent ${x.getName()} has reached the voting location.`),console.log(`[Debug] Agent ${x.getName()} is submitting vote to LLM...`);const u=E.invoke(`Vote for: ${b}. Please select only one option as your final decision.`);console.log(`[Debug] Agent ${x.getName()} is returning to original location...`);const h=autoControlAgent(t,x,n,o[c].x,o[c].y,"Return to seat"),[s]=await Promise.all([u,h]);return console.log(`[Debug] Agent ${x.getName()} has completed voting and returned to seat.`),console.log(`[Debug] Agent ${x.getName()} vote result: ${s.content}`),`${x.getName()}: ${s.content}`});return await Promise.all(e)}function createAggregator(m,t,n,p,C){return async function(o){console.log("[Debug] Starting aggregator..."),console.log("aggregator state: ",o.votingVotes);let e=o.votingVotes.join("; ");const a=initializeLLM();await updateStateIcons(C,"work"),console.log("[Debug] Submitting aggregated votes to LLM...");const x=await a.invoke(`
            aggregate vote: ${e}; 
            return the final result from this voting as the decision
            If the final decision is UCBerkely, return "UCB"
            If the final decision is COVID-19, return "COVID"
        `);console.log("[Debug] Received final decision from LLM.");let c=t[t.length-1].x,u=t[t.length-1].y;await updateStateIcons(C,"mail"),console.log("[Debug] Sending decision to final location..."),await autoControlAgent(m,t[t.length-1],n,p.x,p.y,"Send Decision to Final Location"),console.log("[Debug] Decision sent to final location.");const h=await createReport(m,"voting",250,350);return await createReport(m,"voting",250,350),console.log("[Debug] Returning to office..."),await autoControlAgent(m,t[t.length-1],n,c,u,"Return to Office"),console.log("[Debug] Returned to office."),await transmitReport(m,h,p.x,p.y),EventBus.emit("final-report",{report:x.content,department:"voting"}),console.log("[Debug] Final report emitted."),await updateStateIcons(C,"idle"),console.log("[Debug] Aggregator completed."),{...o,votingToChaining:x.content}}}function constructVotingGraph(m,t,n,p,C,b){console.log("[Debug] Starting to construct voting graph...");const o=new StateGraph(GeneralStateAnnotation);return o.addNode("votingPhase",async E=>{console.log("[Debug] Starting voting phase...");const e=await parallelVotingExecutor(m,t,n,p,b,E.votingTopic);return console.log("[Debug] Voting phase completed."),{...E,votingVotes:e}}),o.addNode("aggregator",async E=>{console.log("[Debug] Starting aggregator phase...");const e=await createAggregator(t,m,n,C,b)(E);return console.log("[Debug] Aggregator phase completed."),{...E,votingToChaining:e.votingToChaining}}),o.addEdge(START,"votingPhase"),o.addEdge("votingPhase","aggregator"),o.addEdge("aggregator",END),console.log("[Debug] Voting graph constructed and compiled."),o.compile()}const votingExample=`
You are an employee in a news company.
You are assigned to vote for the best theme for next news publication.
There're two options: 
1. the gender bias of UCBerkeley graduates admission
2. the benefits/harms of British COVID-19 vaccination
Choose one of the two options and give a reason for your choice.
`;var noop={value:()=>{}};function dispatch(){for(var m=0,t=arguments.length,n={},p;m<t;++m){if(!(p=arguments[m]+"")||p in n||/[\s.]/.test(p))throw new Error("illegal type: "+p);n[p]=[]}return new Dispatch(n)}function Dispatch(m){this._=m}function parseTypenames$1(m,t){return m.trim().split(/^|\s+/).map(function(n){var p="",C=n.indexOf(".");if(C>=0&&(p=n.slice(C+1),n=n.slice(0,C)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:p}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(m,t){var n=this._,p=parseTypenames$1(m+"",n),C,b=-1,o=p.length;if(arguments.length<2){for(;++b<o;)if((C=(m=p[b]).type)&&(C=get$1(n[C],m.name)))return C;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++b<o;)if(C=(m=p[b]).type)n[C]=set$1(n[C],m.name,t);else if(t==null)for(C in n)n[C]=set$1(n[C],m.name,null);return this},copy:function(){var m={},t=this._;for(var n in t)m[n]=t[n].slice();return new Dispatch(m)},call:function(m,t){if((C=arguments.length-2)>0)for(var n=new Array(C),p=0,C,b;p<C;++p)n[p]=arguments[p+2];if(!this._.hasOwnProperty(m))throw new Error("unknown type: "+m);for(b=this._[m],p=0,C=b.length;p<C;++p)b[p].value.apply(t,n)},apply:function(m,t,n){if(!this._.hasOwnProperty(m))throw new Error("unknown type: "+m);for(var p=this._[m],C=0,b=p.length;C<b;++C)p[C].value.apply(t,n)}};function get$1(m,t){for(var n=0,p=m.length,C;n<p;++n)if((C=m[n]).name===t)return C.value}function set$1(m,t,n){for(var p=0,C=m.length;p<C;++p)if(m[p].name===t){m[p]=noop,m=m.slice(0,p).concat(m.slice(p+1));break}return n!=null&&m.push({name:t,value:n}),m}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(m){var t=m+="",n=t.indexOf(":");return n>=0&&(t=m.slice(0,n))!=="xmlns"&&(m=m.slice(n+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:m}:m}function creatorInherit(m){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(m):t.createElementNS(n,m)}}function creatorFixed(m){return function(){return this.ownerDocument.createElementNS(m.space,m.local)}}function creator(m){var t=namespace(m);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(m){return m==null?none:function(){return this.querySelector(m)}}function selection_select(m){typeof m!="function"&&(m=selector(m));for(var t=this._groups,n=t.length,p=new Array(n),C=0;C<n;++C)for(var b=t[C],o=b.length,E=p[C]=new Array(o),e,a,x=0;x<o;++x)(e=b[x])&&(a=m.call(e,e.__data__,x,b))&&("__data__"in e&&(a.__data__=e.__data__),E[x]=a);return new Selection$1(p,this._parents)}function array(m){return m==null?[]:Array.isArray(m)?m:Array.from(m)}function empty(){return[]}function selectorAll(m){return m==null?empty:function(){return this.querySelectorAll(m)}}function arrayAll(m){return function(){return array(m.apply(this,arguments))}}function selection_selectAll(m){typeof m=="function"?m=arrayAll(m):m=selectorAll(m);for(var t=this._groups,n=t.length,p=[],C=[],b=0;b<n;++b)for(var o=t[b],E=o.length,e,a=0;a<E;++a)(e=o[a])&&(p.push(m.call(e,e.__data__,a,o)),C.push(e));return new Selection$1(p,C)}function matcher(m){return function(){return this.matches(m)}}function childMatcher(m){return function(t){return t.matches(m)}}var find=Array.prototype.find;function childFind(m){return function(){return find.call(this.children,m)}}function childFirst(){return this.firstElementChild}function selection_selectChild(m){return this.select(m==null?childFirst:childFind(typeof m=="function"?m:childMatcher(m)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(m){return function(){return filter.call(this.children,m)}}function selection_selectChildren(m){return this.selectAll(m==null?children:childrenFilter(typeof m=="function"?m:childMatcher(m)))}function selection_filter(m){typeof m!="function"&&(m=matcher(m));for(var t=this._groups,n=t.length,p=new Array(n),C=0;C<n;++C)for(var b=t[C],o=b.length,E=p[C]=[],e,a=0;a<o;++a)(e=b[a])&&m.call(e,e.__data__,a,b)&&E.push(e);return new Selection$1(p,this._parents)}function sparse(m){return new Array(m.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(m,t){this.ownerDocument=m.ownerDocument,this.namespaceURI=m.namespaceURI,this._next=null,this._parent=m,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function(m){return this._parent.insertBefore(m,this._next)},insertBefore:function(m,t){return this._parent.insertBefore(m,t)},querySelector:function(m){return this._parent.querySelector(m)},querySelectorAll:function(m){return this._parent.querySelectorAll(m)}};function constant$1(m){return function(){return m}}function bindIndex(m,t,n,p,C,b){for(var o=0,E,e=t.length,a=b.length;o<a;++o)(E=t[o])?(E.__data__=b[o],p[o]=E):n[o]=new EnterNode(m,b[o]);for(;o<e;++o)(E=t[o])&&(C[o]=E)}function bindKey(m,t,n,p,C,b,o){var E,e,a=new Map,x=t.length,c=b.length,u=new Array(x),h;for(E=0;E<x;++E)(e=t[E])&&(u[E]=h=o.call(e,e.__data__,E,t)+"",a.has(h)?C[E]=e:a.set(h,e));for(E=0;E<c;++E)h=o.call(m,b[E],E,b)+"",(e=a.get(h))?(p[E]=e,e.__data__=b[E],a.delete(h)):n[E]=new EnterNode(m,b[E]);for(E=0;E<x;++E)(e=t[E])&&a.get(u[E])===e&&(C[E]=e)}function datum(m){return m.__data__}function selection_data(m,t){if(!arguments.length)return Array.from(this,datum);var n=t?bindKey:bindIndex,p=this._parents,C=this._groups;typeof m!="function"&&(m=constant$1(m));for(var b=C.length,o=new Array(b),E=new Array(b),e=new Array(b),a=0;a<b;++a){var x=p[a],c=C[a],u=c.length,h=arraylike(m.call(x,x&&x.__data__,a,p)),s=h.length,l=E[a]=new Array(s),v=o[a]=new Array(s),d=e[a]=new Array(u);n(x,c,l,v,d,h,t);for(var g=0,y=0,S,T;g<s;++g)if(S=l[g]){for(g>=y&&(y=g+1);!(T=v[y])&&++y<s;);S._next=T||null}}return o=new Selection$1(o,p),o._enter=E,o._exit=e,o}function arraylike(m){return typeof m=="object"&&"length"in m?m:Array.from(m)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(m,t,n){var p=this.enter(),C=this,b=this.exit();return typeof m=="function"?(p=m(p),p&&(p=p.selection())):p=p.append(m+""),t!=null&&(C=t(C),C&&(C=C.selection())),n==null?b.remove():n(b),p&&C?p.merge(C).order():C}function selection_merge(m){for(var t=m.selection?m.selection():m,n=this._groups,p=t._groups,C=n.length,b=p.length,o=Math.min(C,b),E=new Array(C),e=0;e<o;++e)for(var a=n[e],x=p[e],c=a.length,u=E[e]=new Array(c),h,s=0;s<c;++s)(h=a[s]||x[s])&&(u[s]=h);for(;e<C;++e)E[e]=n[e];return new Selection$1(E,this._parents)}function selection_order(){for(var m=this._groups,t=-1,n=m.length;++t<n;)for(var p=m[t],C=p.length-1,b=p[C],o;--C>=0;)(o=p[C])&&(b&&o.compareDocumentPosition(b)^4&&b.parentNode.insertBefore(o,b),b=o);return this}function selection_sort(m){m||(m=ascending);function t(c,u){return c&&u?m(c.__data__,u.__data__):!c-!u}for(var n=this._groups,p=n.length,C=new Array(p),b=0;b<p;++b){for(var o=n[b],E=o.length,e=C[b]=new Array(E),a,x=0;x<E;++x)(a=o[x])&&(e[x]=a);e.sort(t)}return new Selection$1(C,this._parents).order()}function ascending(m,t){return m<t?-1:m>t?1:m>=t?0:NaN}function selection_call(){var m=arguments[0];return arguments[0]=this,m.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var m=this._groups,t=0,n=m.length;t<n;++t)for(var p=m[t],C=0,b=p.length;C<b;++C){var o=p[C];if(o)return o}return null}function selection_size(){let m=0;for(const t of this)++m;return m}function selection_empty(){return!this.node()}function selection_each(m){for(var t=this._groups,n=0,p=t.length;n<p;++n)for(var C=t[n],b=0,o=C.length,E;b<o;++b)(E=C[b])&&m.call(E,E.__data__,b,C);return this}function attrRemove$1(m){return function(){this.removeAttribute(m)}}function attrRemoveNS$1(m){return function(){this.removeAttributeNS(m.space,m.local)}}function attrConstant$1(m,t){return function(){this.setAttribute(m,t)}}function attrConstantNS$1(m,t){return function(){this.setAttributeNS(m.space,m.local,t)}}function attrFunction$1(m,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(m):this.setAttribute(m,n)}}function attrFunctionNS$1(m,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(m.space,m.local):this.setAttributeNS(m.space,m.local,n)}}function selection_attr(m,t){var n=namespace(m);if(arguments.length<2){var p=this.node();return n.local?p.getAttributeNS(n.space,n.local):p.getAttribute(n)}return this.each((t==null?n.local?attrRemoveNS$1:attrRemove$1:typeof t=="function"?n.local?attrFunctionNS$1:attrFunction$1:n.local?attrConstantNS$1:attrConstant$1)(n,t))}function defaultView(m){return m.ownerDocument&&m.ownerDocument.defaultView||m.document&&m||m.defaultView}function styleRemove$1(m){return function(){this.style.removeProperty(m)}}function styleConstant$1(m,t,n){return function(){this.style.setProperty(m,t,n)}}function styleFunction$1(m,t,n){return function(){var p=t.apply(this,arguments);p==null?this.style.removeProperty(m):this.style.setProperty(m,p,n)}}function selection_style(m,t,n){return arguments.length>1?this.each((t==null?styleRemove$1:typeof t=="function"?styleFunction$1:styleConstant$1)(m,t,n??"")):styleValue(this.node(),m)}function styleValue(m,t){return m.style.getPropertyValue(t)||defaultView(m).getComputedStyle(m,null).getPropertyValue(t)}function propertyRemove(m){return function(){delete this[m]}}function propertyConstant(m,t){return function(){this[m]=t}}function propertyFunction(m,t){return function(){var n=t.apply(this,arguments);n==null?delete this[m]:this[m]=n}}function selection_property(m,t){return arguments.length>1?this.each((t==null?propertyRemove:typeof t=="function"?propertyFunction:propertyConstant)(m,t)):this.node()[m]}function classArray(m){return m.trim().split(/^|\s+/)}function classList(m){return m.classList||new ClassList(m)}function ClassList(m){this._node=m,this._names=classArray(m.getAttribute("class")||"")}ClassList.prototype={add:function(m){var t=this._names.indexOf(m);t<0&&(this._names.push(m),this._node.setAttribute("class",this._names.join(" ")))},remove:function(m){var t=this._names.indexOf(m);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(m){return this._names.indexOf(m)>=0}};function classedAdd(m,t){for(var n=classList(m),p=-1,C=t.length;++p<C;)n.add(t[p])}function classedRemove(m,t){for(var n=classList(m),p=-1,C=t.length;++p<C;)n.remove(t[p])}function classedTrue(m){return function(){classedAdd(this,m)}}function classedFalse(m){return function(){classedRemove(this,m)}}function classedFunction(m,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,m)}}function selection_classed(m,t){var n=classArray(m+"");if(arguments.length<2){for(var p=classList(this.node()),C=-1,b=n.length;++C<b;)if(!p.contains(n[C]))return!1;return!0}return this.each((typeof t=="function"?classedFunction:t?classedTrue:classedFalse)(n,t))}function textRemove(){this.textContent=""}function textConstant$1(m){return function(){this.textContent=m}}function textFunction$1(m){return function(){var t=m.apply(this,arguments);this.textContent=t??""}}function selection_text(m){return arguments.length?this.each(m==null?textRemove:(typeof m=="function"?textFunction$1:textConstant$1)(m)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(m){return function(){this.innerHTML=m}}function htmlFunction(m){return function(){var t=m.apply(this,arguments);this.innerHTML=t??""}}function selection_html(m){return arguments.length?this.each(m==null?htmlRemove:(typeof m=="function"?htmlFunction:htmlConstant)(m)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(m){var t=typeof m=="function"?m:creator(m);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(m,t){var n=typeof m=="function"?m:creator(m),p=t==null?constantNull:typeof t=="function"?t:selector(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),p.apply(this,arguments)||null)})}function remove(){var m=this.parentNode;m&&m.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var m=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(m,this.nextSibling):m}function selection_cloneDeep(){var m=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(m,this.nextSibling):m}function selection_clone(m){return this.select(m?selection_cloneDeep:selection_cloneShallow)}function selection_datum(m){return arguments.length?this.property("__data__",m):this.node().__data__}function contextListener(m){return function(t){m.call(this,t,this.__data__)}}function parseTypenames(m){return m.trim().split(/^|\s+/).map(function(t){var n="",p=t.indexOf(".");return p>=0&&(n=t.slice(p+1),t=t.slice(0,p)),{type:t,name:n}})}function onRemove(m){return function(){var t=this.__on;if(t){for(var n=0,p=-1,C=t.length,b;n<C;++n)b=t[n],(!m.type||b.type===m.type)&&b.name===m.name?this.removeEventListener(b.type,b.listener,b.options):t[++p]=b;++p?t.length=p:delete this.__on}}}function onAdd(m,t,n){return function(){var p=this.__on,C,b=contextListener(t);if(p){for(var o=0,E=p.length;o<E;++o)if((C=p[o]).type===m.type&&C.name===m.name){this.removeEventListener(C.type,C.listener,C.options),this.addEventListener(C.type,C.listener=b,C.options=n),C.value=t;return}}this.addEventListener(m.type,b,n),C={type:m.type,name:m.name,value:t,listener:b,options:n},p?p.push(C):this.__on=[C]}}function selection_on(m,t,n){var p=parseTypenames(m+""),C,b=p.length,o;if(arguments.length<2){var E=this.node().__on;if(E){for(var e=0,a=E.length,x;e<a;++e)for(C=0,x=E[e];C<b;++C)if((o=p[C]).type===x.type&&o.name===x.name)return x.value}return}for(E=t?onAdd:onRemove,C=0;C<b;++C)this.each(E(p[C],t,n));return this}function dispatchEvent(m,t,n){var p=defaultView(m),C=p.CustomEvent;typeof C=="function"?C=new C(t,n):(C=p.document.createEvent("Event"),n?(C.initEvent(t,n.bubbles,n.cancelable),C.detail=n.detail):C.initEvent(t,!1,!1)),m.dispatchEvent(C)}function dispatchConstant(m,t){return function(){return dispatchEvent(this,m,t)}}function dispatchFunction(m,t){return function(){return dispatchEvent(this,m,t.apply(this,arguments))}}function selection_dispatch(m,t){return this.each((typeof t=="function"?dispatchFunction:dispatchConstant)(m,t))}function*selection_iterator(){for(var m=this._groups,t=0,n=m.length;t<n;++t)for(var p=m[t],C=0,b=p.length,o;C<b;++C)(o=p[C])&&(yield o)}var root=[null];function Selection$1(m,t){this._groups=m,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(m){return typeof m=="string"?new Selection$1([[document.querySelector(m)]],[document.documentElement]):new Selection$1([[m]],root)}function define(m,t,n){m.prototype=t.prototype=n,n.constructor=m}function extend(m,t){var n=Object.create(m.prototype);for(var p in t)n[p]=t[p];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(m){return Object.assign(new this.constructor,this,m)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(m){var t,n;return m=(m+"").trim().toLowerCase(),(t=reHex.exec(m))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(m))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(m))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(m))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(m))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(m))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(m))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(m)?rgbn(named[m]):m==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(m){return new Rgb(m>>16&255,m>>8&255,m&255,1)}function rgba(m,t,n,p){return p<=0&&(m=t=n=NaN),new Rgb(m,t,n,p)}function rgbConvert(m){return m instanceof Color||(m=color(m)),m?(m=m.rgb(),new Rgb(m.r,m.g,m.b,m.opacity)):new Rgb}function rgb(m,t,n,p){return arguments.length===1?rgbConvert(m):new Rgb(m,t,n,p??1)}function Rgb(m,t,n,p){this.r=+m,this.g=+t,this.b=+n,this.opacity=+p}define(Rgb,rgb,extend(Color,{brighter(m){return m=m==null?brighter:Math.pow(brighter,m),new Rgb(this.r*m,this.g*m,this.b*m,this.opacity)},darker(m){return m=m==null?darker:Math.pow(darker,m),new Rgb(this.r*m,this.g*m,this.b*m,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const m=clampa(this.opacity);return`${m===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${m===1?")":`, ${m})`}`}function clampa(m){return isNaN(m)?1:Math.max(0,Math.min(1,m))}function clampi(m){return Math.max(0,Math.min(255,Math.round(m)||0))}function hex(m){return m=clampi(m),(m<16?"0":"")+m.toString(16)}function hsla(m,t,n,p){return p<=0?m=t=n=NaN:n<=0||n>=1?m=t=NaN:t<=0&&(m=NaN),new Hsl(m,t,n,p)}function hslConvert(m){if(m instanceof Hsl)return new Hsl(m.h,m.s,m.l,m.opacity);if(m instanceof Color||(m=color(m)),!m)return new Hsl;if(m instanceof Hsl)return m;m=m.rgb();var t=m.r/255,n=m.g/255,p=m.b/255,C=Math.min(t,n,p),b=Math.max(t,n,p),o=NaN,E=b-C,e=(b+C)/2;return E?(t===b?o=(n-p)/E+(n<p)*6:n===b?o=(p-t)/E+2:o=(t-n)/E+4,E/=e<.5?b+C:2-b-C,o*=60):E=e>0&&e<1?0:o,new Hsl(o,E,e,m.opacity)}function hsl(m,t,n,p){return arguments.length===1?hslConvert(m):new Hsl(m,t,n,p??1)}function Hsl(m,t,n,p){this.h=+m,this.s=+t,this.l=+n,this.opacity=+p}define(Hsl,hsl,extend(Color,{brighter(m){return m=m==null?brighter:Math.pow(brighter,m),new Hsl(this.h,this.s,this.l*m,this.opacity)},darker(m){return m=m==null?darker:Math.pow(darker,m),new Hsl(this.h,this.s,this.l*m,this.opacity)},rgb(){var m=this.h%360+(this.h<0)*360,t=isNaN(m)||isNaN(this.s)?0:this.s,n=this.l,p=n+(n<.5?n:1-n)*t,C=2*n-p;return new Rgb(hsl2rgb(m>=240?m-240:m+120,C,p),hsl2rgb(m,C,p),hsl2rgb(m<120?m+240:m-120,C,p),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const m=clampa(this.opacity);return`${m===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${m===1?")":`, ${m})`}`}}));function clamph(m){return m=(m||0)%360,m<0?m+360:m}function clampt(m){return Math.max(0,Math.min(1,m||0))}function hsl2rgb(m,t,n){return(m<60?t+(n-t)*m/60:m<180?n:m<240?t+(n-t)*(240-m)/60:t)*255}const constant=m=>()=>m;function linear(m,t){return function(n){return m+n*t}}function exponential(m,t,n){return m=Math.pow(m,n),t=Math.pow(t,n)-m,n=1/n,function(p){return Math.pow(m+p*t,n)}}function gamma(m){return(m=+m)==1?nogamma:function(t,n){return n-t?exponential(t,n,m):constant(isNaN(t)?n:t)}}function nogamma(m,t){var n=t-m;return n?linear(m,n):constant(isNaN(m)?t:m)}const interpolateRgb=function m(t){var n=gamma(t);function p(C,b){var o=n((C=rgb(C)).r,(b=rgb(b)).r),E=n(C.g,b.g),e=n(C.b,b.b),a=nogamma(C.opacity,b.opacity);return function(x){return C.r=o(x),C.g=E(x),C.b=e(x),C.opacity=a(x),C+""}}return p.gamma=m,p}(1);function interpolateNumber(m,t){return m=+m,t=+t,function(n){return m*(1-n)+t*n}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(m){return function(){return m}}function one(m){return function(t){return m(t)+""}}function interpolateString(m,t){var n=reA.lastIndex=reB.lastIndex=0,p,C,b,o=-1,E=[],e=[];for(m=m+"",t=t+"";(p=reA.exec(m))&&(C=reB.exec(t));)(b=C.index)>n&&(b=t.slice(n,b),E[o]?E[o]+=b:E[++o]=b),(p=p[0])===(C=C[0])?E[o]?E[o]+=C:E[++o]=C:(E[++o]=null,e.push({i:o,x:interpolateNumber(p,C)})),n=reB.lastIndex;return n<t.length&&(b=t.slice(n),E[o]?E[o]+=b:E[++o]=b),E.length<2?e[0]?one(e[0].x):zero(t):(t=e.length,function(a){for(var x=0,c;x<t;++x)E[(c=e[x]).i]=c.x(a);return E.join("")})}var degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(m,t,n,p,C,b){var o,E,e;return(o=Math.sqrt(m*m+t*t))&&(m/=o,t/=o),(e=m*n+t*p)&&(n-=m*e,p-=t*e),(E=Math.sqrt(n*n+p*p))&&(n/=E,p/=E,e/=E),m*p<t*n&&(m=-m,t=-t,e=-e,o=-o),{translateX:C,translateY:b,rotate:Math.atan2(t,m)*degrees,skewX:Math.atan(e)*degrees,scaleX:o,scaleY:E}}var svgNode;function parseCss(m){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(m+"");return t.isIdentity?identity:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(m){return m==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",m),!(m=svgNode.transform.baseVal.consolidate()))?identity:(m=m.matrix,decompose(m.a,m.b,m.c,m.d,m.e,m.f))}function interpolateTransform(m,t,n,p){function C(a){return a.length?a.pop()+" ":""}function b(a,x,c,u,h,s){if(a!==c||x!==u){var l=h.push("translate(",null,t,null,n);s.push({i:l-4,x:interpolateNumber(a,c)},{i:l-2,x:interpolateNumber(x,u)})}else(c||u)&&h.push("translate("+c+t+u+n)}function o(a,x,c,u){a!==x?(a-x>180?x+=360:x-a>180&&(a+=360),u.push({i:c.push(C(c)+"rotate(",null,p)-2,x:interpolateNumber(a,x)})):x&&c.push(C(c)+"rotate("+x+p)}function E(a,x,c,u){a!==x?u.push({i:c.push(C(c)+"skewX(",null,p)-2,x:interpolateNumber(a,x)}):x&&c.push(C(c)+"skewX("+x+p)}function e(a,x,c,u,h,s){if(a!==c||x!==u){var l=h.push(C(h)+"scale(",null,",",null,")");s.push({i:l-4,x:interpolateNumber(a,c)},{i:l-2,x:interpolateNumber(x,u)})}else(c!==1||u!==1)&&h.push(C(h)+"scale("+c+","+u+")")}return function(a,x){var c=[],u=[];return a=m(a),x=m(x),b(a.translateX,a.translateY,x.translateX,x.translateY,c,u),o(a.rotate,x.rotate,c,u),E(a.skewX,x.skewX,c,u),e(a.scaleX,a.scaleY,x.scaleX,x.scaleY,c,u),a=x=null,function(h){for(var s=-1,l=u.length,v;++s<l;)c[(v=u[s]).i]=v.x(h);return c.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(m){setTimeout(m,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(m,t,n){if(typeof m!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=m,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(m,t,n){var p=new Timer;return p.restart(m,t,n),p}function timerFlush(){now(),++frame;for(var m=taskHead,t;m;)(t=clockNow-m._time)>=0&&m._call.call(void 0,t),m=m._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var m=clock.now(),t=m-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=m)}function nap(){for(var m,t=taskHead,n,p=1/0;t;)t._call?(p>t._time&&(p=t._time),m=t,t=t._next):(n=t._next,t._next=null,t=m?m._next=n:taskHead=n);taskTail=m,sleep(p)}function sleep(m){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var t=m-clockNow;t>24?(m<1/0&&(timeout$1=setTimeout(wake,m-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(m,t,n){var p=new Timer;return t=t==null?0:+t,p.restart(C=>{p.stop(),m(C+t)},t,n),p}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(m,t,n,p,C,b){var o=m.__transition;if(!o)m.__transition={};else if(n in o)return;create(m,n,{name:t,index:p,group:C,on:emptyOn,tween:emptyTween,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:CREATED})}function init(m,t){var n=get(m,t);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set(m,t){var n=get(m,t);if(n.state>STARTED)throw new Error("too late; already running");return n}function get(m,t){var n=m.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function create(m,t,n){var p=m.__transition,C;p[t]=n,n.timer=timer(b,0,n.time);function b(a){n.state=SCHEDULED,n.timer.restart(o,n.delay,n.time),n.delay<=a&&o(a-n.delay)}function o(a){var x,c,u,h;if(n.state!==SCHEDULED)return e();for(x in p)if(h=p[x],h.name===n.name){if(h.state===STARTED)return timeout(o);h.state===RUNNING?(h.state=ENDED,h.timer.stop(),h.on.call("interrupt",m,m.__data__,h.index,h.group),delete p[x]):+x<t&&(h.state=ENDED,h.timer.stop(),h.on.call("cancel",m,m.__data__,h.index,h.group),delete p[x])}if(timeout(function(){n.state===STARTED&&(n.state=RUNNING,n.timer.restart(E,n.delay,n.time),E(a))}),n.state=STARTING,n.on.call("start",m,m.__data__,n.index,n.group),n.state===STARTING){for(n.state=STARTED,C=new Array(u=n.tween.length),x=0,c=-1;x<u;++x)(h=n.tween[x].value.call(m,m.__data__,n.index,n.group))&&(C[++c]=h);C.length=c+1}}function E(a){for(var x=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(e),n.state=ENDING,1),c=-1,u=C.length;++c<u;)C[c].call(m,x);n.state===ENDING&&(n.on.call("end",m,m.__data__,n.index,n.group),e())}function e(){n.state=ENDED,n.timer.stop(),delete p[t];for(var a in p)return;delete m.__transition}}function interrupt(m,t){var n=m.__transition,p,C,b=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((p=n[o]).name!==t){b=!1;continue}C=p.state>STARTING&&p.state<ENDING,p.state=ENDED,p.timer.stop(),p.on.call(C?"interrupt":"cancel",m,m.__data__,p.index,p.group),delete n[o]}b&&delete m.__transition}}function selection_interrupt(m){return this.each(function(){interrupt(this,m)})}function tweenRemove(m,t){var n,p;return function(){var C=set(this,m),b=C.tween;if(b!==n){p=n=b;for(var o=0,E=p.length;o<E;++o)if(p[o].name===t){p=p.slice(),p.splice(o,1);break}}C.tween=p}}function tweenFunction(m,t,n){var p,C;if(typeof n!="function")throw new Error;return function(){var b=set(this,m),o=b.tween;if(o!==p){C=(p=o).slice();for(var E={name:t,value:n},e=0,a=C.length;e<a;++e)if(C[e].name===t){C[e]=E;break}e===a&&C.push(E)}b.tween=C}}function transition_tween(m,t){var n=this._id;if(m+="",arguments.length<2){for(var p=get(this.node(),n).tween,C=0,b=p.length,o;C<b;++C)if((o=p[C]).name===m)return o.value;return null}return this.each((t==null?tweenRemove:tweenFunction)(n,m,t))}function tweenValue(m,t,n){var p=m._id;return m.each(function(){var C=set(this,p);(C.value||(C.value={}))[t]=n.apply(this,arguments)}),function(C){return get(C,p).value[t]}}function interpolate(m,t){var n;return(typeof t=="number"?interpolateNumber:t instanceof color?interpolateRgb:(n=color(t))?(t=n,interpolateRgb):interpolateString)(m,t)}function attrRemove(m){return function(){this.removeAttribute(m)}}function attrRemoveNS(m){return function(){this.removeAttributeNS(m.space,m.local)}}function attrConstant(m,t,n){var p,C=n+"",b;return function(){var o=this.getAttribute(m);return o===C?null:o===p?b:b=t(p=o,n)}}function attrConstantNS(m,t,n){var p,C=n+"",b;return function(){var o=this.getAttributeNS(m.space,m.local);return o===C?null:o===p?b:b=t(p=o,n)}}function attrFunction(m,t,n){var p,C,b;return function(){var o,E=n(this),e;return E==null?void this.removeAttribute(m):(o=this.getAttribute(m),e=E+"",o===e?null:o===p&&e===C?b:(C=e,b=t(p=o,E)))}}function attrFunctionNS(m,t,n){var p,C,b;return function(){var o,E=n(this),e;return E==null?void this.removeAttributeNS(m.space,m.local):(o=this.getAttributeNS(m.space,m.local),e=E+"",o===e?null:o===p&&e===C?b:(C=e,b=t(p=o,E)))}}function transition_attr(m,t){var n=namespace(m),p=n==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(m,typeof t=="function"?(n.local?attrFunctionNS:attrFunction)(n,p,tweenValue(this,"attr."+m,t)):t==null?(n.local?attrRemoveNS:attrRemove)(n):(n.local?attrConstantNS:attrConstant)(n,p,t))}function attrInterpolate(m,t){return function(n){this.setAttribute(m,t.call(this,n))}}function attrInterpolateNS(m,t){return function(n){this.setAttributeNS(m.space,m.local,t.call(this,n))}}function attrTweenNS(m,t){var n,p;function C(){var b=t.apply(this,arguments);return b!==p&&(n=(p=b)&&attrInterpolateNS(m,b)),n}return C._value=t,C}function attrTween(m,t){var n,p;function C(){var b=t.apply(this,arguments);return b!==p&&(n=(p=b)&&attrInterpolate(m,b)),n}return C._value=t,C}function transition_attrTween(m,t){var n="attr."+m;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var p=namespace(m);return this.tween(n,(p.local?attrTweenNS:attrTween)(p,t))}function delayFunction(m,t){return function(){init(this,m).delay=+t.apply(this,arguments)}}function delayConstant(m,t){return t=+t,function(){init(this,m).delay=t}}function transition_delay(m){var t=this._id;return arguments.length?this.each((typeof m=="function"?delayFunction:delayConstant)(t,m)):get(this.node(),t).delay}function durationFunction(m,t){return function(){set(this,m).duration=+t.apply(this,arguments)}}function durationConstant(m,t){return t=+t,function(){set(this,m).duration=t}}function transition_duration(m){var t=this._id;return arguments.length?this.each((typeof m=="function"?durationFunction:durationConstant)(t,m)):get(this.node(),t).duration}function easeConstant(m,t){if(typeof t!="function")throw new Error;return function(){set(this,m).ease=t}}function transition_ease(m){var t=this._id;return arguments.length?this.each(easeConstant(t,m)):get(this.node(),t).ease}function easeVarying(m,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;set(this,m).ease=n}}function transition_easeVarying(m){if(typeof m!="function")throw new Error;return this.each(easeVarying(this._id,m))}function transition_filter(m){typeof m!="function"&&(m=matcher(m));for(var t=this._groups,n=t.length,p=new Array(n),C=0;C<n;++C)for(var b=t[C],o=b.length,E=p[C]=[],e,a=0;a<o;++a)(e=b[a])&&m.call(e,e.__data__,a,b)&&E.push(e);return new Transition(p,this._parents,this._name,this._id)}function transition_merge(m){if(m._id!==this._id)throw new Error;for(var t=this._groups,n=m._groups,p=t.length,C=n.length,b=Math.min(p,C),o=new Array(p),E=0;E<b;++E)for(var e=t[E],a=n[E],x=e.length,c=o[E]=new Array(x),u,h=0;h<x;++h)(u=e[h]||a[h])&&(c[h]=u);for(;E<p;++E)o[E]=t[E];return new Transition(o,this._parents,this._name,this._id)}function start(m){return(m+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function onFunction(m,t,n){var p,C,b=start(t)?init:set;return function(){var o=b(this,m),E=o.on;E!==p&&(C=(p=E).copy()).on(t,n),o.on=C}}function transition_on(m,t){var n=this._id;return arguments.length<2?get(this.node(),n).on.on(m):this.each(onFunction(n,m,t))}function removeFunction(m){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==m)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(m){var t=this._name,n=this._id;typeof m!="function"&&(m=selector(m));for(var p=this._groups,C=p.length,b=new Array(C),o=0;o<C;++o)for(var E=p[o],e=E.length,a=b[o]=new Array(e),x,c,u=0;u<e;++u)(x=E[u])&&(c=m.call(x,x.__data__,u,E))&&("__data__"in x&&(c.__data__=x.__data__),a[u]=c,schedule(a[u],t,n,u,a,get(x,n)));return new Transition(b,this._parents,t,n)}function transition_selectAll(m){var t=this._name,n=this._id;typeof m!="function"&&(m=selectorAll(m));for(var p=this._groups,C=p.length,b=[],o=[],E=0;E<C;++E)for(var e=p[E],a=e.length,x,c=0;c<a;++c)if(x=e[c]){for(var u=m.call(x,x.__data__,c,e),h,s=get(x,n),l=0,v=u.length;l<v;++l)(h=u[l])&&schedule(h,t,n,l,u,s);b.push(u),o.push(x)}return new Transition(b,o,t,n)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(m,t){var n,p,C;return function(){var b=styleValue(this,m),o=(this.style.removeProperty(m),styleValue(this,m));return b===o?null:b===n&&o===p?C:C=t(n=b,p=o)}}function styleRemove(m){return function(){this.style.removeProperty(m)}}function styleConstant(m,t,n){var p,C=n+"",b;return function(){var o=styleValue(this,m);return o===C?null:o===p?b:b=t(p=o,n)}}function styleFunction(m,t,n){var p,C,b;return function(){var o=styleValue(this,m),E=n(this),e=E+"";return E==null&&(e=E=(this.style.removeProperty(m),styleValue(this,m))),o===e?null:o===p&&e===C?b:(C=e,b=t(p=o,E))}}function styleMaybeRemove(m,t){var n,p,C,b="style."+t,o="end."+b,E;return function(){var e=set(this,m),a=e.on,x=e.value[b]==null?E||(E=styleRemove(t)):void 0;(a!==n||C!==x)&&(p=(n=a).copy()).on(o,C=x),e.on=p}}function transition_style(m,t,n){var p=(m+="")=="transform"?interpolateTransformCss:interpolate;return t==null?this.styleTween(m,styleNull(m,p)).on("end.style."+m,styleRemove(m)):typeof t=="function"?this.styleTween(m,styleFunction(m,p,tweenValue(this,"style."+m,t))).each(styleMaybeRemove(this._id,m)):this.styleTween(m,styleConstant(m,p,t),n).on("end.style."+m,null)}function styleInterpolate(m,t,n){return function(p){this.style.setProperty(m,t.call(this,p),n)}}function styleTween(m,t,n){var p,C;function b(){var o=t.apply(this,arguments);return o!==C&&(p=(C=o)&&styleInterpolate(m,o,n)),p}return b._value=t,b}function transition_styleTween(m,t,n){var p="style."+(m+="");if(arguments.length<2)return(p=this.tween(p))&&p._value;if(t==null)return this.tween(p,null);if(typeof t!="function")throw new Error;return this.tween(p,styleTween(m,t,n??""))}function textConstant(m){return function(){this.textContent=m}}function textFunction(m){return function(){var t=m(this);this.textContent=t??""}}function transition_text(m){return this.tween("text",typeof m=="function"?textFunction(tweenValue(this,"text",m)):textConstant(m==null?"":m+""))}function textInterpolate(m){return function(t){this.textContent=m.call(this,t)}}function textTween(m){var t,n;function p(){var C=m.apply(this,arguments);return C!==n&&(t=(n=C)&&textInterpolate(C)),t}return p._value=m,p}function transition_textTween(m){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(m==null)return this.tween(t,null);if(typeof m!="function")throw new Error;return this.tween(t,textTween(m))}function transition_transition(){for(var m=this._name,t=this._id,n=newId(),p=this._groups,C=p.length,b=0;b<C;++b)for(var o=p[b],E=o.length,e,a=0;a<E;++a)if(e=o[a]){var x=get(e,t);schedule(e,m,n,a,o,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new Transition(p,this._parents,m,n)}function transition_end(){var m,t,n=this,p=n._id,C=n.size();return new Promise(function(b,o){var E={value:o},e={value:function(){--C===0&&b()}};n.each(function(){var a=set(this,p),x=a.on;x!==m&&(t=(m=x).copy(),t._.cancel.push(E),t._.interrupt.push(E),t._.end.push(e)),a.on=t}),C===0&&b()})}var id=0;function Transition(m,t,n,p){this._groups=m,this._parents=t,this._name=n,this._id=p}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(m){return((m*=2)<=1?m*m*m:(m-=2)*m*m+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(m,t){for(var n;!(n=m.__transition)||!(n=n[t]);)if(!(m=m.parentNode))throw new Error(`transition ${t} not found`);return n}function selection_transition(m){var t,n;m instanceof Transition?(t=m._id,m=m._name):(t=newId(),(n=defaultTiming).time=now(),m=m==null?null:m+"");for(var p=this._groups,C=p.length,b=0;b<C;++b)for(var o=p[b],E=o.length,e,a=0;a<E;++a)(e=o[a])&&schedule(e,m,t,a,o,n||inherit(e,t));return new Transition(p,this._parents,m,t)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function Transform(m,t,n){this.k=m,this.x=t,this.y=n}Transform.prototype={constructor:Transform,scale:function(m){return m===1?this:new Transform(this.k*m,this.x,this.y)},translate:function(m,t){return m===0&t===0?this:new Transform(this.k,this.x+this.k*m,this.y+this.k*t)},apply:function(m){return[m[0]*this.k+this.x,m[1]*this.k+this.y]},applyX:function(m){return m*this.k+this.x},applyY:function(m){return m*this.k+this.y},invert:function(m){return[(m[0]-this.x)/this.k,(m[1]-this.y)/this.k]},invertX:function(m){return(m-this.x)/this.k},invertY:function(m){return(m-this.y)/this.k},rescaleX:function(m){return m.copy().domain(m.range().map(this.invertX,this).map(m.invert,m))},rescaleY:function(m){return m.copy().domain(m.range().map(this.invertY,this).map(m.invert,m))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;async function generateChartImage(m){const t=`chart-${Math.random().toString(36).substr(2,9)}`,n=initializeLLM(),p=3;let C=0,b="";for(;C<p;){let o=function(c){return{"undefined variable":"declare all variables with const/let","missing scale":"add d3.scaleBand() for categorical data","invalid data":"implement data validation before rendering"}[c]||"review D3.js data binding pattern"};C++;const E=`
  Generate a clinical trial visualization with these strict requirements:

  1. DATA CHARACTERISTICS:
  - Dataset: ${JSON.stringify(m.slice(0,3))}... (total ${m.length} records)
  - Key variables:
    * X-axis: ${m[0].AgeGroup?"AgeGroup":"Gender"}
    * Y-axis: Survival/Admission Rate (%)
    ${m[0].Treatment?"* Grouping: Treatment":""}

  2. CHART SPECIFICATIONS:
  - Type: Grouped bar chart (if Treatment exists) or stacked bars
  - Required elements:
    ▢ 95% confidence intervals (if n>30 per group)
    ▢ p-value annotations for group comparisons
    ▢ Color coding:
      - Survival >70%: #4daf4a
      - 30-70%: #ff7f00
      - <30%: #e41a1c
    ▢ Baseline reference line at overall survival rate
    ▢ Clear "Survival Rate (%)" Y-axis label

  3. DATA TRANSFORMATION:
  - Pre-calculate percentages per group
  - Handle missing data explicitly
  - Sort categories clinically (Young→Old, Female→Male)

  4. OUTPUT CONTROL:
  - Only return executable D3.js v7+ code
  - Use this exact structure:
    // 1. Dimensions and margins
    const margin = {top: 25, right: 30, bottom: 45, left: 60};
    // 2. Data processing
    const survivalRates = ...;
    // 3. Chart rendering
    const svg = ...;
    
  ${b?`5. ERROR FIXING: Correct these issues from last attempt:
    - ${b}
    - Specifically ensure: ${o(b)}`:""}

  Medical disclaimer must be included as:
  // Data source: ClinicalTrials.gov ID NCTXXXXXX
  `,e=await n.invoke([{role:"system",content:`
          Generate only the JavaScript code for a simple D3.js chart, 
          Your code should start like this(PARAMETER: means you can change the number on that line): 
          const width = 400; // PARAMETER: you can change the width
          const height = 200; // PARAMETER: you can change the height
          console.log("${t}", d3.select('#${t}'));
          const svg = d3.select('#${t}').append('svg')
            .attr('width', width)
            .attr('height', height);
          based on the following description:
        `},{role:"user",content:E}]);let a=cleanUpD3Code(e.content);const x=await checkIfCodeCanRunInBrowser(a);if(console.log("checking for code",C,x.ok,x.error,a),x.ok)return console.log("Generated valid D3.js code on attempt",C),EventBus.emit("d3-code",{d3Code:a,id:t}),t;console.warn(`Attempt ${C} failed:`,x.error),b=x.error||"Unknown error"}throw new Error(`Failed to generate valid D3.js code after 3 attempts. Last error:
`+b)}function cleanUpD3Code(m){return m.replace(/```javascript|```/g,"").trim()}async function checkIfCodeCanRunInBrowser(code){try{new Function(code);try{eval(code)}catch(m){return{ok:!1,error:"Runtime error: "+String(m)}}return{ok:!0}}catch(m){return{ok:!1,error:"Syntax error: "+String(m)}}}function compileJSCode(script,divNumber){script=cleanUpD3Code(script);try{const test_div=select(divNumber);test_div.selectAll("*").remove(),eval(script)}catch(m){console.log("Error in testD3Comping function",m)}}async function generateImage(m){const t=await openai.images.generate({model:"dall-e-3",prompt:m,n:1,size:"1024x1024"});return console.log(t.data[0].url),t.data[0].url}const ucbPath="./data/simulated_ucb.csv",covidPath="./data/simulated_covid.csv",routeSchema=z.object({step:z.enum(["visualization","illustration"]).describe("The next step in the routing process")}),sampleSystemPrompts=[{role:"visualization",prompt:"write a short report(<100words) about weather in New York City"},{role:"illustration",prompt:"write a short report(<100words) about social trends among teenagers in the US"}];async function testBranchWork(m,t,n){let p=covidPath;console.log("state route",t),t.votingToChaining||t.votingToChaining.includes("UCB")&&(p=ucbPath);const b=await(await fetch(p)).text();if(console.log("csvRaw",b),m==="visualization"){const o=await generateChartImage(b),E=await generateChartImage(b),e=await generateImage(`please give me an image based on the following describ or coonect with it: ${n}`);console.log("URL",e);const a=`



${n}
        

<img src="${e}" style="max-width: 50%; height: auto; border-radius: 8px; margin: 10px auto; display: block;" />
        

## Visual Representation
        

<div id="${o}" style="
            width: 100%; 
            height: auto;
            display: flex;
            justify-content: center; 
            align-items: center; 
            margin-top: 20px;">
        </div>
        <hr style="width: 100%; height: 3px; background-color: #333; border: none; margin: 20px 0;">
        

## Conclusion
            

<div id="${E}" style="
            width: 100%; 
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center; 
            margin-top: 20px;"></div>
        `;EventBus.emit("final-report",{report:a,department:"routing"})}else{const o=await generateImage("please give me an image of a man");console.log("URL",o);const E=`${n}
            

<img src="${o}" style="max-width: 80%; height: auto; border-radius: 8px; margin: 10px auto; display: block;" />
        `;EventBus.emit("final-report",{report:E,department:"routing"})}return n}function createLeaf(m,t,n,p,C="",b){return async function(E){const e=m.x,a=m.y;console.log("destination from leaf: ",p),testBranchWork(E.routeDecision,E,E.chainingToRouting),await updateStateIcons(b,"mail"),await autoControlAgent(t,m,n,767,330,"Send report to final location");const x=await createReport(t,"routing",767,330);return await transmitReport(t,x,p.x,p.y),await autoControlAgent(t,m,n,e,a,"Returned"),await updateStateIcons(b,"idle"),{routeOutput:E.chainingToRouting}}}function createRouter(m,t,n,p,C){return async function(o){const e=initializeLLM().withStructuredOutput(routeSchema),a=n.x,x=n.y;console.log("checking for data",o),await updateStateIcons(C,"work");const c=await e.invoke([{role:"system",content:"Route the input to visualization or illustration based on the user's request."},{role:"user",content:o.chainingToRouting}]);console.log("router decision: ",c.step);const u=p.find(h=>h.branchName===c.step);return await autoControlAgent(m,n,t,u.agent.x,u.agent.y,"Send report to final location"),await autoControlAgent(m,n,t,a,x,"Returned"),{routeDecision:c.step}}}function routeDecision(m){if(m.routeDecision==="visualization")return"visualization";if(m.routeDecision==="illustration")return"illustration"}function constructRouteGraph(m,t,n,p,C){const b=new StateGraph(GeneralStateAnnotation);let o=START,E=[];for(let e=0;e<m.length;e++)e<2&&(b.addNode(sampleSystemPrompts[e].role,createLeaf(m[e],t,n,p,sampleSystemPrompts[e].prompt,C)),E.push({agent:m[e],branchName:sampleSystemPrompts[e].role}));b.addNode("router",createRouter(t,n,m[2],E,C)),b.addEdge(o,"router"),b.addConditionalEdges("router",routeDecision,["visualization","illustration"]);for(let e=0;e<sampleSystemPrompts.length;e++)b.addEdge(sampleSystemPrompts[e].role,END);return b.compile()}class Level2 extends ParentScene{constructor(){super("level2");ge(this,"parrellePositionGroup");ge(this,"agentList",new Map);ge(this,"parallelZones",[]);ge(this,"chainingZones",[]);ge(this,"votingZones",[]);ge(this,"routeZones",[]);ge(this,"zones",[]);ge(this,"isWorkflowAvailable",!1);ge(this,"startWorkflowBtn");ge(this,"startWorkflowLabel");ge(this,"debateStartBtn");ge(this,"debateStartLabel");ge(this,"roomStatusTexts",[]);ge(this,"zoneBackgrounds",[]);ge(this,"reportBtn");ge(this,"routeStartBtn");ge(this,"routeStartLabel");ge(this,"votingStartBtn");ge(this,"votingStartLabel");ge(this,"hudElements",[]);ge(this,"isCameraFollowing",!1);ge(this,"debugGraphics");this.sceneName="Game: Level 2",eventTargetBus.addEventListener("signal",n=>{console.log(`Level2 received: ${n.detail}`),n.detail==="signal 1"?console.log("Research phase completed."):n.detail==="signal 2"&&console.log("News article formatting completed.")})}create(){this.input.on("pointerdown",x=>{x.leftButtonDown()&&console.log(`Mouse clicked at: x=${x.worldX}, y=${x.worldY}`)}),this.hudElements=[],setupScene.call(this,"office"),this.registry.set("isWorkflowRunning",!1),this.registry.set("currentPattern",""),console.log("isWorkflowRunning",this.registry.get("isWorkflowRunning")),this.tweens.add({targets:[this.itemText,this.deductiveItemText],y:"+=10",duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1}),createItem.call(this,this.itemGroup,400,1e3,"logo"),createItem.call(this,this.deductiveItem,500,1100,"logo"),createItem.call(this,this.debatePositionGroup,700,900,"logo"),createItem.call(this,this.debatePositionGroup,900,900,"logo"),this.physics.world.on("overlapend",(x,c)=>{this.onOverlapEnd(x,c)}),this.parrellePositionGroup=this.physics.add.staticGroup();for(let x=0;x<3;x++)createItem.call(this,this.parrellePositionGroup,200+75*x,900,"logo");[{group:this.itemGroup,callback:(x,c)=>{this.collectItem(x,c,"think step by step",this.itemText)}},{group:this.deductiveItem,callback:(x,c)=>{this.collectItem(x,c,"deductive reasoning",this.deductiveItemText)}}].forEach(({group:x,callback:c})=>{this.physics.add.overlap(this.agentGroup,x,c,void 0,this)}),this.npc=new NPC(this,600,900),this.physics.add.collider(this.npc,this.worldLayer),this.physics.add.collider(this.agentGroup,this.worldLayer),this.isCameraFollowing=!1,this.time.delayedCall(1,()=>{this.cameras.main.stopFollow()},[],this),this.physics.add.overlap(this.agentGroup,this.npc,this.onPlayerNearNPC,void 0,this),setZonesCollisionDetection(this,this.parallelZones,this.agentGroup),setZonesCollisionDetection(this,this.votingZones,this.agentGroup),setZonesCollisionDetection(this,this.chainingZones,this.agentGroup),setZonesCollisionDetection(this,this.routeZones,this.agentGroup),addAgentPanelHUD.call(this,75,520,50,20),this.agentControlButtons=this.add.group(),this.agentControlButtonLabels=[],addTaskAssignmentHUD.call(this),this.overlappedItems=new Set;let E=new Set,e=!1,a=null;this.physics.add.overlap(this.agentGroup,this.debatePositionGroup,(x,c)=>{E.has(c)||(E.add(c),this.events.emit("overlapstart",x,c)),E.size===2&&!e&&(e=!0,console.log("Agent is overlapping both debate positions!"),a=this.add.rectangle(50,330,50,50,0).setScrollFactor(0).setDepth(1001).setAlpha(.5).setStrokeStyle(2,16777215).setInteractive(),this.add.text(35,320,"Start Debate",{fontSize:"10px",color:"#ffffff",wordWrap:{width:50,useAdvancedWrap:!0}}).setScrollFactor(0).setDepth(1002),a.on("pointerdown",u=>{console.log("start debate!!"),debate("Is the earth flat?",3)}))}),this.debatePositionGroup.on("overlapsend",(x,c)=>{console.log("overlapsend",x,c),e=!1,E.delete(x)}),this.physics.add.overlap(this.agentGroup,this.parrellePositionGroup,(x,c)=>{E.has(c)||(E.add(c),this.events.emit("overlapstart",x,c)),E.size===3&&!e&&(e=!0,console.log("Agent is overlapping both debate positions!"),a=this.add.rectangle(50,330,50,50,0).setScrollFactor(0).setDepth(1001).setAlpha(.5).setStrokeStyle(2,16777215).setInteractive(),this.add.text(35,320,"Choose Pattern",{fontSize:"10px",color:"#ffffff",wordWrap:{width:50,useAdvancedWrap:!0}}).setScrollFactor(0).setDepth(1002),a.on("pointerdown",u=>{var h;if(console.log("start!!"),this.mssgMenu)console.log("Destroying mssgMenu"),this.mssgMenu.destroy(),(h=this.mssgMenuText)==null||h.destroy(),this.mssgMenu=null,this.mssgMenuText=null,this.mssgGroup.clear(!0,!0);else{console.log("Creating mssgMenu"),this.mssgMenu=this.add.rectangle(300,300,350,125,0).setDepth(1001).setStrokeStyle(2,16777215).setScrollFactor(0).setAlpha(.5),this.mssgGroup=this.add.group();let s=["chain","parallel","route"];for(let l=0;l<s.length;l++){const v=this.add.rectangle(160+l*75,290,50,50,0).setScrollFactor(0).setDepth(1003).setAlpha(.5),d=this.add.text(160+l*75-15,280,s[l],{fontSize:"10px",color:"#ffffff"}).setScrollFactor(0).setDepth(1004);v.setInteractive({useHandCursor:!0}),v.on("pointerdown",g=>{let y=null;console.log(s[l]),y=this.choosePattern(s[l]),console.log("MAS produced results",y)}),v.on("pointerover",g=>{const y=this.cameras.main.getWorldPoint(g.x,g.y);this.subMssg||(this.subMssgText=this.add.text(y.x,y.y,s[l],{fontSize:"10px",color:"#ffffff",wordWrap:{width:150,useAdvancedWrap:!0}}).setDepth(1010).setScrollFactor(1).setAlpha(1),this.subMssg=this.add.rectangle(y.x,y.y,175,this.subMssgText.height+50,0).setDepth(1007).setStrokeStyle(2,16777215).setAlpha(1).setOrigin(0,0),console.log("subMssgText",this.subMssgText,this.subMssg))}),v.on("pointerout",()=>{var g;this.subMssg&&(this.subMssg.destroy(),(g=this.subMssgText)==null||g.destroy(),this.subMssg=null,this.subMssgText=null)}),this.mssgGroup.add(v),this.mssgGroup.add(d)}}}))}),this.parrellePositionGroup.on("overlapsend",(x,c)=>{console.log("overlapsend",x,c),e=!1,E.delete(x)}),state.isTypewriting=!0,this.input.keyboard.on("keydown-ESC",()=>{this.scene.pause(key.scene.main),this.scene.launch(key.scene.menu)});for(let x=0;x<this.parallelZones.length;x++);this.parallelZones}async choosePattern(n){let p="";n==="parallel"?p=(await testParallelCustomerSupport()).join(", "):n==="chain"?p=await testChainCustomerSupport():n==="route"&&(p=(await testRoute()).join(", "),console.log("route result",p)),console.log("MAS produced results - inside function",p),await new Promise(b=>{cjsExports$1.render(jsxRuntimeExports.jsx(Typewriter,{text:p,onEnd:()=>{state.isTypewriting=!1,b(null)}}),this)});const C=await evaluateCustomerSupportResponse(n,p);return console.log("Evaluator Feedback:",C),await new Promise(b=>{cjsExports$1.render(jsxRuntimeExports.jsx(Typewriter,{text:`Evaluator Feedback:
${C}`,onEnd:()=>{state.isTypewriting=!1,b(null)}}),this)}),p}update(){setZonesExitingDecoration(this.parallelZones,this.agentGroup),setZonesExitingDecoration(this.votingZones,this.agentGroup),setZonesExitingDecoration(this.chainingZones,this.agentGroup),setZonesExitingDecoration(this.routeZones,this.agentGroup),areAllZonesOccupied(this.parallelZones)&&!this.isWorkflowAvailable&&!this.registry.get("isWorkflowRunning")&&(this.registry.set("currentPattern","parallel"),this.isWorkflowAvailable=!0,console.log("All zones are occupied!"),this.debateStartBtn=this.add.rectangle(50,330,50,50,0).setScrollFactor(0).setDepth(1001).setAlpha(.5).setStrokeStyle(2,16777215).setInteractive(),this.debateStartLabel=this.add.text(35,320,"Start Workflow",{fontSize:"10px",color:"#ffffff",wordWrap:{width:50,useAdvancedWrap:!0}}).setScrollFactor(0).setDepth(1002),this.debateStartBtn.on("pointerdown",async()=>{this.registry.set("isWorkflowRunning",!0),console.log("btn pre-start zones data",this.parallelZones);const p=getAllAgents(this.parallelZones);console.log("agentsInfo",p);const C=p[0].agents[0],b=p[1].agents[0],o=this.agentList.get(C),E=this.agentList.get(b);console.log("agent1",o,o==null?void 0:o.x,o==null?void 0:o.y),console.log("agent2",E,E==null?void 0:E.x,E==null?void 0:E.y),console.log("btn start zones data",this.parallelZones);const e=transformDataMap(this.parallelZones,this.controllableCharacters),a=transformDataMap(this.votingZones,this.controllableCharacters),x=transformDataMap(this.routeZones,this.controllableCharacters),c=constructRouteGraph(x[0].agents,this,this.tilemap,{x:937,y:330},this.routeZones),u=constructVotingGraph(a[0].agents,this,this.tilemap,{x:250,y:350},{x:520,y:320},this.votingZones),h=constructLangGraph(e,this,this.tilemap,{x:520,y:320},this.parallelZones);console.log("langgraph from game",h);const s=await u.invoke({votingTopic:votingExample,votingVotes:[]}),l=await h.invoke({votingToChaining:s.votingToChaining,chainFormattedText:s.votingToChaining}),v=await c.invoke({chainingToRouting:l.chainingToRouting,votingToChaining:s.votingToChaining});console.log("first output",s),console.log("finalDecision",l),console.log("finalDecision2",v),eventTargetBus.dispatchEvent(new CustomEvent("signal",{detail:"special signal!!!"}))})),this.registry.get("isWorkflowRunning")===!1&&!areAllZonesOccupied(this.parallelZones)&&!areAllZonesOccupied(this.votingZones)&&!areAllZonesOccupied(this.routeZones)&&(this.registry.set("currentPattern",""),this.isWorkflowAvailable=!1,this.debateStartBtn&&(this.debateStartBtn.destroy(),this.debateStartLabel.destroy())),this.playerControlledAgent=this.controllableCharacters[this.activateIndex],this.controllableCharacters.forEach(p=>{p.update()}),this.input.keyboard.checkDown(this.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.ONE),250)?(console.log('Key "1" pressed'),this.activateIndex=0,this.cameras.main.startFollow(this.controllableCharacters[this.activateIndex]),this.playerControlledAgent=this.controllableCharacters[this.activateIndex],this.controllableCharacters.forEach(p=>{p.changeNameTagColor("#ffffff")}),this.playerControlledAgent.changeNameTagColor("#ff0000"),console.log("switched utils",this.playerControlledAgent.getPromptUtils()),this.cameras.main.startFollow(this.playerControlledAgent),this.isCameraFollowing=!0,console.log(`📷 Now follow the agent:${this.playerControlledAgent.getName()}`)):this.input.keyboard.checkDown(this.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.TWO),250)?(console.log('Key "2" pressed'),this.activateIndex=1,this.cameras.main.startFollow(this.controllableCharacters[this.activateIndex]),this.playerControlledAgent=this.controllableCharacters[this.activateIndex],console.log("switched utils",this.playerControlledAgent.getPromptUtils()),this.controllableCharacters.forEach(p=>{p.changeNameTagColor("#ffffff")}),this.playerControlledAgent.changeNameTagColor("#ff0000"),this.cameras.main.startFollow(this.playerControlledAgent),this.isCameraFollowing=!0):this.input.keyboard.checkDown(this.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.THREE),250)&&(console.log('Key "3" pressed'),this.activateIndex=2,this.cameras.main.startFollow(this.controllableCharacters[this.activateIndex]),this.playerControlledAgent=this.controllableCharacters[this.activateIndex],this.controllableCharacters.forEach(p=>{p.changeNameTagColor("#ffffff")}),this.playerControlledAgent.changeNameTagColor("#ff0000"),console.log("switched utils",this.playerControlledAgent.getPromptUtils()),this.cameras.main.startFollow(this.playerControlledAgent),this.isCameraFollowing=!0);const n=this.input.keyboard.addKeys({w:Phaser$1.Input.Keyboard.KeyCodes.W,a:Phaser$1.Input.Keyboard.KeyCodes.A,s:Phaser$1.Input.Keyboard.KeyCodes.S,d:Phaser$1.Input.Keyboard.KeyCodes.D});controlCameraMovements(this,n,10),this.agentGroup.on("overlapstart",(p,C)=>{console.log("overlapstart",p,C)}),this.cursors.seven.isDown?this.scene.start("level1"):this.cursors.eight.isDown||this.cursors.nine.isDown&&this.scene.start("Main")}updateWorkflowButtonEvent(n,p){this.startWorkflowBtn.off("pointerdown"),this.startWorkflowBtn.on("pointerdown",p),this.startWorkflowLabel.setText(n)}}class HUDScene extends Phaser$1.Scene{constructor(){super({key:"HUDScene"});ge(this,"hudText");ge(this,"isHUDVisible",!0)}create(){var n;console.log("HUDScene Created!"),this.hudText=this.add.text(50,50,"HUD: Active",{fontSize:"50px",color:"#ffffff",backgroundColor:"#000000",padding:{x:10,y:5}}),this.hudText.setScrollFactor(0),(n=this.input.keyboard)==null||n.on("keydown-ESC",()=>this.toggleHUD()),this.hudText.setDepth(999)}toggleHUD(){this.isHUDVisible=!this.isHUDVisible,this.hudText.setVisible(this.isHUDVisible),console.log(`HUD ${this.isHUDVisible?"Visible":"Hidden"}`)}}class TextInput{constructor(t,n,p,C,b,o=20,E=0,e="#ffffff",a="#ffffff"){ge(this,"inputBackground");ge(this,"inputText");ge(this,"cursorText");ge(this,"text","");ge(this,"maxLength");ge(this,"inputWidth");ge(this,"pasteButton");this.maxLength=o,this.inputWidth=C;const x=5;this.inputBackground=t.add.rectangle(n,p,C,b,E).setOrigin(.5,.5).setDepth(1e3),this.inputText=t.add.text(n-C/2+x,p-10,this.text,{fontSize:"24px",color:e,wordWrap:{width:C-2*x,useAdvancedWrap:!1},maxLines:1}).setDepth(1001),this.cursorText=t.add.text(n-C/2+x,p-10,"|",{fontSize:"24px",color:a}).setDepth(1001),t.time.addEvent({delay:500,callback:()=>{this.cursorText.setAlpha(this.cursorText.alpha===1?0:1)},loop:!0});let c=t.add.graphics();c.fillStyle(0,0),c.fillRect(n-C/2,p-b/2,C,b);const u=c.createGeometryMask();this.inputText.setMask(u),t.input.keyboard.on("keydown",h=>{h.key==="Backspace"?this.text=this.text.slice(0,-1):h.key.length===1&&(this.text+=h.key),this.inputText.setText(this.text),this.inputText.width>this.inputWidth-2*x?(this.inputText.x=n-this.inputWidth/2-(this.inputText.width-(this.inputWidth-2*x)),this.cursorText.x=this.inputText.x+this.inputText.width-5):(this.inputText.x=n-this.inputWidth/2+x,this.cursorText.x=this.inputText.x+this.inputText.width-5)}),t.input.keyboard.on("keydown",async h=>{if((h.ctrlKey||h.metaKey)&&h.key==="v")try{this.text=this.text.slice(0,-1);const s=await navigator.clipboard.readText();this.text+=s,this.inputText.setText(this.text),this.inputText.width>this.inputWidth-2*x?(this.inputText.x=n-this.inputWidth/2-(this.inputText.width-(this.inputWidth-2*x)),this.cursorText.x=this.inputText.x+this.inputText.width-5):(this.inputText.x=n-this.inputWidth/2+x,this.cursorText.x=this.inputText.x+this.inputText.width-5)}catch{}}),t.input.on("pointerdown",h=>{h.rightButtonDown()&&this.inputBackground.getBounds().contains(h.x,h.y)?(h.event.preventDefault(),this.showPasteButton(t,h.x,h.y)):this.pasteButton&&this.pasteButton.setVisible(!1)}),window.addEventListener("contextmenu",h=>{h.preventDefault()})}showPasteButton(t,n,p){this.pasteButton&&this.pasteButton.setVisible(!1),this.pasteButton=t.add.text(n+10,p+10,"Paste",{fontSize:"20px",color:"#000000",backgroundColor:"#ffffff",padding:{left:5,right:5,top:3,bottom:3}}).setDepth(1001).setInteractive(),this.pasteButton.on("pointerdown",async()=>{var C;try{const b=await navigator.clipboard.readText();this.text+=b,this.inputText.setText(this.text),this.inputText.width>this.inputWidth-2*10?(this.inputText.x=this.inputBackground.x-this.inputWidth/2-(this.inputText.width-(this.inputWidth-2*10)),this.cursorText.x=this.inputText.x+this.inputText.width-5):(this.inputText.x=this.inputBackground.x-this.inputWidth/2+10,this.cursorText.x=this.inputText.x+this.inputText.width-5)}catch{}(C=this.pasteButton)==null||C.setVisible(!1)})}getText(){return this.text}}class MainMenu extends phaserExports.Scene{constructor(){super("MainMenu");ge(this,"messageText");ge(this,"textInput");ge(this,"errorText");ge(this,"backgroundImage");ge(this,"titleImage");ge(this,"timeElapsed",0)}preload(){console.log("Background Image Path:",mainmenu_background),this.load.image("background",mainmenu_background),this.load.image("title",title),this.load.once("complete",()=>{console.log("All assets loaded successfully")}),this.load.on("loaderror",n=>{console.error(`Failed to load: ${n.key}`)})}create(){const{centerX:n,centerY:p}=this.cameras.main;console.log("MainMenu Scene created"),this.backgroundImage=this.add.image(n,p,"background"),this.backgroundImage.setDisplaySize(this.cameras.main.width,this.cameras.main.height),this.titleImage=this.add.image(n,p-130,"title"),this.titleImage.setScale(.85),this.messageText=this.add.text(n,p+20,"Enter OpenAI API Key to Start the Game",{fontSize:"22px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.textInput=new TextInput(this,n,p+60,400,50,20,4473924,"#ffffff","#007bff"),this.errorText=this.add.text(n,p+180,"",{fontSize:"20px",color:"#ff0000"}).setOrigin(.5).setDepth(1002).setVisible(!1),new MainMenuButton(this,n,p+125,200,50,"Start Game",()=>{this.verifyApiKeyAndStartGame()})}update(n,p){this.timeElapsed+=p*.005;const C=Math.sin(this.timeElapsed)*5;this.titleImage.setRotation(Phaser.Math.DegToRad(C));const b=Math.cos(this.timeElapsed*.8)*5;this.titleImage.y=this.cameras.main.centerY-140+b}async verifyApiKeyAndStartGame(){const n=this.textInput.getText().trim();this.isValidApiKey(n)?await this.verifyApiKey(n)?(localStorage.setItem("openai-api-key",n),console.log("API Key is valid. Starting game..."),this.scene.start("level2")):this.showErrorMessage("Invalid OpenAI API key."):this.showErrorMessage("Invalid API key format.")}isValidApiKey(n){return n.startsWith("sk-")}async verifyApiKey(n){try{return(await fetch("https://api.openai.com/v1/models",{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok}catch(p){return console.error("Error verifying API key:",p),!1}}showErrorMessage(n){this.errorText.setText(n),this.errorText.setVisible(!0)}}const config={width:800,height:600,title:"Phaser RPG",url:"https://remarkablegames.org/phaser-rpg/",version:"1.0.0-alpha",scene:[Boot,MainMenu,Level1,Level2],physics:{default:"arcade",arcade:{debug:!1}},disableContextMenu:!0,backgroundColor:"#000",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},pixelArt:!0},StartGame=m=>new phaserExports.Game({...config,parent:m}),PhaserGame=reactExports.forwardRef(function m({currentActiveScene:t},n){const p=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>(p.current===null&&(p.current=StartGame("game-container"),typeof n=="function"?n({game:p.current,scene:null}):n&&(n.current={game:p.current,scene:null})),()=>{p.current&&(p.current.destroy(!0),p.current!==null&&(p.current=null))}),[n]),reactExports.useEffect(()=>(EventBus.on("current-scene-ready",C=>{t&&typeof t=="function"&&t(C),typeof n=="function"?n({game:p.current,scene:C}):n&&(n.current={game:p.current,scene:C})}),()=>{EventBus.removeListener("current-scene-ready")}),[t,n]),jsxRuntimeExports.jsx("div",{id:"game-container"})});var cjs={exports:{}},Draggable$1={},propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=m,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var m=requireReactPropTypesSecret();function t(){}function n(){}return n.resetWarningCache=t,factoryWithThrowingShims=function(){function p(o,E,e,a,x,c){if(c!==m){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}p.isRequired=p;function C(){return p}var b={array:p,bigint:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:C,element:p,elementType:p,instanceOf:C,node:p,objectOf:C,oneOf:C,oneOfType:C,shape:C,exact:C,checkPropTypes:n,resetWarningCache:t};return b.PropTypes=b,b},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}function r(m){var t,n,p="";if(typeof m=="string"||typeof m=="number")p+=m;else if(typeof m=="object")if(Array.isArray(m))for(t=0;t<m.length;t++)m[t]&&(n=r(m[t]))&&(p&&(p+=" "),p+=n);else for(t in m)m[t]&&(p&&(p+=" "),p+=t);return p}function clsx(){for(var m,t,n=0,p="";n<arguments.length;)(m=arguments[n++])&&(t=r(m))&&(p&&(p+=" "),p+=t);return p}const clsx_m=Object.freeze(Object.defineProperty({__proto__:null,clsx,default:clsx},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(clsx_m);var domFns={},shims={},hasRequiredShims;function requireShims(){if(hasRequiredShims)return shims;hasRequiredShims=1,Object.defineProperty(shims,"__esModule",{value:!0}),shims.dontSetMe=C,shims.findInArray=m,shims.int=p,shims.isFunction=t,shims.isNum=n;function m(b,o){for(let E=0,e=b.length;E<e;E++)if(o.apply(o,[b[E],E,b]))return b[E]}function t(b){return typeof b=="function"||Object.prototype.toString.call(b)==="[object Function]"}function n(b){return typeof b=="number"&&!isNaN(b)}function p(b){return parseInt(b,10)}function C(b,o,E){if(b[o])return new Error("Invalid prop ".concat(o," passed to ").concat(E," - do not set this, set it on the child."))}return shims}var getPrefix={},hasRequiredGetPrefix;function requireGetPrefix(){if(hasRequiredGetPrefix)return getPrefix;hasRequiredGetPrefix=1,Object.defineProperty(getPrefix,"__esModule",{value:!0}),getPrefix.browserPrefixToKey=n,getPrefix.browserPrefixToStyle=p,getPrefix.default=void 0,getPrefix.getPrefix=t;const m=["Moz","Webkit","O","ms"];function t(){var b;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const E=(b=window.document)===null||b===void 0||(b=b.documentElement)===null||b===void 0?void 0:b.style;if(!E||o in E)return"";for(let e=0;e<m.length;e++)if(n(o,m[e])in E)return m[e];return""}function n(b,o){return o?"".concat(o).concat(C(b)):b}function p(b,o){return o?"-".concat(o.toLowerCase(),"-").concat(b):b}function C(b){let o="",E=!0;for(let e=0;e<b.length;e++)E?(o+=b[e].toUpperCase(),E=!1):b[e]==="-"?E=!0:o+=b[e];return o}return getPrefix.default=t(),getPrefix}var hasRequiredDomFns;function requireDomFns(){if(hasRequiredDomFns)return domFns;hasRequiredDomFns=1,Object.defineProperty(domFns,"__esModule",{value:!0}),domFns.addClassName=T,domFns.addEvent=E,domFns.addUserSelectStyles=y,domFns.createCSSTransform=s,domFns.createSVGTransform=l,domFns.getTouch=d,domFns.getTouchIdentifier=g,domFns.getTranslation=v,domFns.innerHeight=c,domFns.innerWidth=u,domFns.matchesSelector=b,domFns.matchesSelectorAndParentsTo=o,domFns.offsetXYFromParent=h,domFns.outerHeight=a,domFns.outerWidth=x,domFns.removeClassName=w,domFns.removeEvent=e,domFns.removeUserSelectStyles=S;var m=requireShims(),t=p(requireGetPrefix());function n(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,R=new WeakMap;return(n=function(I){return I?R:A})(P)}function p(P,A){if(P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var R=n(A);if(R&&R.has(P))return R.get(P);var I={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in P)if(L!=="default"&&Object.prototype.hasOwnProperty.call(P,L)){var N=M?Object.getOwnPropertyDescriptor(P,L):null;N&&(N.get||N.set)?Object.defineProperty(I,L,N):I[L]=P[L]}return I.default=P,R&&R.set(P,I),I}let C="";function b(P,A){return C||(C=(0,m.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(R){return(0,m.isFunction)(P[R])})),(0,m.isFunction)(P[C])?P[C](A):!1}function o(P,A,R){let I=P;do{if(b(I,A))return!0;if(I===R)return!1;I=I.parentNode}while(I);return!1}function E(P,A,R,I){if(!P)return;const M={capture:!0,...I};P.addEventListener?P.addEventListener(A,R,M):P.attachEvent?P.attachEvent("on"+A,R):P["on"+A]=R}function e(P,A,R,I){if(!P)return;const M={capture:!0,...I};P.removeEventListener?P.removeEventListener(A,R,M):P.detachEvent?P.detachEvent("on"+A,R):P["on"+A]=null}function a(P){let A=P.clientHeight;const R=P.ownerDocument.defaultView.getComputedStyle(P);return A+=(0,m.int)(R.borderTopWidth),A+=(0,m.int)(R.borderBottomWidth),A}function x(P){let A=P.clientWidth;const R=P.ownerDocument.defaultView.getComputedStyle(P);return A+=(0,m.int)(R.borderLeftWidth),A+=(0,m.int)(R.borderRightWidth),A}function c(P){let A=P.clientHeight;const R=P.ownerDocument.defaultView.getComputedStyle(P);return A-=(0,m.int)(R.paddingTop),A-=(0,m.int)(R.paddingBottom),A}function u(P){let A=P.clientWidth;const R=P.ownerDocument.defaultView.getComputedStyle(P);return A-=(0,m.int)(R.paddingLeft),A-=(0,m.int)(R.paddingRight),A}function h(P,A,R){const M=A===A.ownerDocument.body?{left:0,top:0}:A.getBoundingClientRect(),L=(P.clientX+A.scrollLeft-M.left)/R,N=(P.clientY+A.scrollTop-M.top)/R;return{x:L,y:N}}function s(P,A){const R=v(P,A,"px");return{[(0,t.browserPrefixToKey)("transform",t.default)]:R}}function l(P,A){return v(P,A,"")}function v(P,A,R){let{x:I,y:M}=P,L="translate(".concat(I).concat(R,",").concat(M).concat(R,")");if(A){const N="".concat(typeof A.x=="string"?A.x:A.x+R),G="".concat(typeof A.y=="string"?A.y:A.y+R);L="translate(".concat(N,", ").concat(G,")")+L}return L}function d(P,A){return P.targetTouches&&(0,m.findInArray)(P.targetTouches,R=>A===R.identifier)||P.changedTouches&&(0,m.findInArray)(P.changedTouches,R=>A===R.identifier)}function g(P){if(P.targetTouches&&P.targetTouches[0])return P.targetTouches[0].identifier;if(P.changedTouches&&P.changedTouches[0])return P.changedTouches[0].identifier}function y(P){if(!P)return;let A=P.getElementById("react-draggable-style-el");A||(A=P.createElement("style"),A.type="text/css",A.id="react-draggable-style-el",A.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,A.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,P.getElementsByTagName("head")[0].appendChild(A)),P.body&&T(P.body,"react-draggable-transparent-selection")}function S(P){if(P)try{if(P.body&&w(P.body,"react-draggable-transparent-selection"),P.selection)P.selection.empty();else{const A=(P.defaultView||window).getSelection();A&&A.type!=="Caret"&&A.removeAllRanges()}}catch{}}function T(P,A){P.classList?P.classList.add(A):P.className.match(new RegExp("(?:^|\\s)".concat(A,"(?!\\S)")))||(P.className+=" ".concat(A))}function w(P,A){P.classList?P.classList.remove(A):P.className=P.className.replace(new RegExp("(?:^|\\s)".concat(A,"(?!\\S)"),"g"),"")}return domFns}var positionFns={},hasRequiredPositionFns;function requirePositionFns(){if(hasRequiredPositionFns)return positionFns;hasRequiredPositionFns=1,Object.defineProperty(positionFns,"__esModule",{value:!0}),positionFns.canDragX=C,positionFns.canDragY=b,positionFns.createCoreData=E,positionFns.createDraggableData=e,positionFns.getBoundPosition=n,positionFns.getControlPosition=o,positionFns.snapToGrid=p;var m=requireShims(),t=requireDomFns();function n(c,u,h){if(!c.props.bounds)return[u,h];let{bounds:s}=c.props;s=typeof s=="string"?s:a(s);const l=x(c);if(typeof s=="string"){const{ownerDocument:v}=l,d=v.defaultView;let g;if(s==="parent"?g=l.parentNode:g=v.querySelector(s),!(g instanceof d.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const y=g,S=d.getComputedStyle(l),T=d.getComputedStyle(y);s={left:-l.offsetLeft+(0,m.int)(T.paddingLeft)+(0,m.int)(S.marginLeft),top:-l.offsetTop+(0,m.int)(T.paddingTop)+(0,m.int)(S.marginTop),right:(0,t.innerWidth)(y)-(0,t.outerWidth)(l)-l.offsetLeft+(0,m.int)(T.paddingRight)-(0,m.int)(S.marginRight),bottom:(0,t.innerHeight)(y)-(0,t.outerHeight)(l)-l.offsetTop+(0,m.int)(T.paddingBottom)-(0,m.int)(S.marginBottom)}}return(0,m.isNum)(s.right)&&(u=Math.min(u,s.right)),(0,m.isNum)(s.bottom)&&(h=Math.min(h,s.bottom)),(0,m.isNum)(s.left)&&(u=Math.max(u,s.left)),(0,m.isNum)(s.top)&&(h=Math.max(h,s.top)),[u,h]}function p(c,u,h){const s=Math.round(u/c[0])*c[0],l=Math.round(h/c[1])*c[1];return[s,l]}function C(c){return c.props.axis==="both"||c.props.axis==="x"}function b(c){return c.props.axis==="both"||c.props.axis==="y"}function o(c,u,h){const s=typeof u=="number"?(0,t.getTouch)(c,u):null;if(typeof u=="number"&&!s)return null;const l=x(h),v=h.props.offsetParent||l.offsetParent||l.ownerDocument.body;return(0,t.offsetXYFromParent)(s||c,v,h.props.scale)}function E(c,u,h){const s=!(0,m.isNum)(c.lastX),l=x(c);return s?{node:l,deltaX:0,deltaY:0,lastX:u,lastY:h,x:u,y:h}:{node:l,deltaX:u-c.lastX,deltaY:h-c.lastY,lastX:c.lastX,lastY:c.lastY,x:u,y:h}}function e(c,u){const h=c.props.scale;return{node:u.node,x:c.state.x+u.deltaX/h,y:c.state.y+u.deltaY/h,deltaX:u.deltaX/h,deltaY:u.deltaY/h,lastX:c.state.x,lastY:c.state.y}}function a(c){return{left:c.left,top:c.top,right:c.right,bottom:c.bottom}}function x(c){const u=c.findDOMNode();if(!u)throw new Error("<DraggableCore>: Unmounted during event!");return u}return positionFns}var DraggableCore={},log={},hasRequiredLog;function requireLog(){if(hasRequiredLog)return log;hasRequiredLog=1,Object.defineProperty(log,"__esModule",{value:!0}),log.default=m;function m(){}return log}var hasRequiredDraggableCore;function requireDraggableCore(){if(hasRequiredDraggableCore)return DraggableCore;hasRequiredDraggableCore=1,Object.defineProperty(DraggableCore,"__esModule",{value:!0}),DraggableCore.default=void 0;var m=a(requireReact()),t=E(requirePropTypes()),n=E(requireReactDom()),p=requireDomFns(),C=requirePositionFns(),b=requireShims(),o=E(requireLog());function E(v){return v&&v.__esModule?v:{default:v}}function e(v){if(typeof WeakMap!="function")return null;var d=new WeakMap,g=new WeakMap;return(e=function(y){return y?g:d})(v)}function a(v,d){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var g=e(d);if(g&&g.has(v))return g.get(v);var y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in v)if(T!=="default"&&Object.prototype.hasOwnProperty.call(v,T)){var w=S?Object.getOwnPropertyDescriptor(v,T):null;w&&(w.get||w.set)?Object.defineProperty(y,T,w):y[T]=v[T]}return y.default=v,g&&g.set(v,y),y}function x(v,d,g){return d=c(d),d in v?Object.defineProperty(v,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[d]=g,v}function c(v){var d=u(v,"string");return typeof d=="symbol"?d:String(d)}function u(v,d){if(typeof v!="object"||v===null)return v;var g=v[Symbol.toPrimitive];if(g!==void 0){var y=g.call(v,d);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}const h={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let s=h.mouse,l=class extends m.Component{constructor(){super(...arguments),x(this,"dragging",!1),x(this,"lastX",NaN),x(this,"lastY",NaN),x(this,"touchIdentifier",null),x(this,"mounted",!1),x(this,"handleDragStart",d=>{if(this.props.onMouseDown(d),!this.props.allowAnyClick&&typeof d.button=="number"&&d.button!==0)return!1;const g=this.findDOMNode();if(!g||!g.ownerDocument||!g.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:y}=g;if(this.props.disabled||!(d.target instanceof y.defaultView.Node)||this.props.handle&&!(0,p.matchesSelectorAndParentsTo)(d.target,this.props.handle,g)||this.props.cancel&&(0,p.matchesSelectorAndParentsTo)(d.target,this.props.cancel,g))return;d.type==="touchstart"&&d.preventDefault();const S=(0,p.getTouchIdentifier)(d);this.touchIdentifier=S;const T=(0,C.getControlPosition)(d,S,this);if(T==null)return;const{x:w,y:P}=T,A=(0,C.createCoreData)(this,w,P);(0,o.default)("DraggableCore: handleDragStart: %j",A),(0,o.default)("calling",this.props.onStart),!(this.props.onStart(d,A)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,p.addUserSelectStyles)(y),this.dragging=!0,this.lastX=w,this.lastY=P,(0,p.addEvent)(y,s.move,this.handleDrag),(0,p.addEvent)(y,s.stop,this.handleDragStop))}),x(this,"handleDrag",d=>{const g=(0,C.getControlPosition)(d,this.touchIdentifier,this);if(g==null)return;let{x:y,y:S}=g;if(Array.isArray(this.props.grid)){let P=y-this.lastX,A=S-this.lastY;if([P,A]=(0,C.snapToGrid)(this.props.grid,P,A),!P&&!A)return;y=this.lastX+P,S=this.lastY+A}const T=(0,C.createCoreData)(this,y,S);if((0,o.default)("DraggableCore: handleDrag: %j",T),this.props.onDrag(d,T)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const A=document.createEvent("MouseEvents");A.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(A)}return}this.lastX=y,this.lastY=S}),x(this,"handleDragStop",d=>{if(!this.dragging)return;const g=(0,C.getControlPosition)(d,this.touchIdentifier,this);if(g==null)return;let{x:y,y:S}=g;if(Array.isArray(this.props.grid)){let A=y-this.lastX||0,R=S-this.lastY||0;[A,R]=(0,C.snapToGrid)(this.props.grid,A,R),y=this.lastX+A,S=this.lastY+R}const T=(0,C.createCoreData)(this,y,S);if(this.props.onStop(d,T)===!1||this.mounted===!1)return!1;const P=this.findDOMNode();P&&this.props.enableUserSelectHack&&(0,p.removeUserSelectStyles)(P.ownerDocument),(0,o.default)("DraggableCore: handleDragStop: %j",T),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,P&&((0,o.default)("DraggableCore: Removing handlers"),(0,p.removeEvent)(P.ownerDocument,s.move,this.handleDrag),(0,p.removeEvent)(P.ownerDocument,s.stop,this.handleDragStop))}),x(this,"onMouseDown",d=>(s=h.mouse,this.handleDragStart(d))),x(this,"onMouseUp",d=>(s=h.mouse,this.handleDragStop(d))),x(this,"onTouchStart",d=>(s=h.touch,this.handleDragStart(d))),x(this,"onTouchEnd",d=>(s=h.touch,this.handleDragStop(d)))}componentDidMount(){this.mounted=!0;const d=this.findDOMNode();d&&(0,p.addEvent)(d,h.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const d=this.findDOMNode();if(d){const{ownerDocument:g}=d;(0,p.removeEvent)(g,h.mouse.move,this.handleDrag),(0,p.removeEvent)(g,h.touch.move,this.handleDrag),(0,p.removeEvent)(g,h.mouse.stop,this.handleDragStop),(0,p.removeEvent)(g,h.touch.stop,this.handleDragStop),(0,p.removeEvent)(d,h.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,p.removeUserSelectStyles)(g)}}findDOMNode(){var d,g;return(d=this.props)!==null&&d!==void 0&&d.nodeRef?(g=this.props)===null||g===void 0||(g=g.nodeRef)===null||g===void 0?void 0:g.current:n.default.findDOMNode(this)}render(){return m.cloneElement(m.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return DraggableCore.default=l,x(l,"displayName","DraggableCore"),x(l,"propTypes",{allowAnyClick:t.default.bool,children:t.default.node.isRequired,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:function(v,d){if(v[d]&&v[d].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:t.default.arrayOf(t.default.number),handle:t.default.string,cancel:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number,className:b.dontSetMe,style:b.dontSetMe,transform:b.dontSetMe}),x(l,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),DraggableCore}var hasRequiredDraggable;function requireDraggable(){return hasRequiredDraggable||(hasRequiredDraggable=1,function(m){Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"DraggableCore",{enumerable:!0,get:function(){return e.default}}),m.default=void 0;var t=u(requireReact()),n=x(requirePropTypes()),p=x(requireReactDom()),C=x(require$$3),b=requireDomFns(),o=requirePositionFns(),E=requireShims(),e=x(requireDraggableCore()),a=x(requireLog());function x(g){return g&&g.__esModule?g:{default:g}}function c(g){if(typeof WeakMap!="function")return null;var y=new WeakMap,S=new WeakMap;return(c=function(T){return T?S:y})(g)}function u(g,y){if(g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var S=c(y);if(S&&S.has(g))return S.get(g);var T={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in g)if(P!=="default"&&Object.prototype.hasOwnProperty.call(g,P)){var A=w?Object.getOwnPropertyDescriptor(g,P):null;A&&(A.get||A.set)?Object.defineProperty(T,P,A):T[P]=g[P]}return T.default=g,S&&S.set(g,T),T}function h(){return h=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(g[T]=S[T])}return g},h.apply(this,arguments)}function s(g,y,S){return y=l(y),y in g?Object.defineProperty(g,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[y]=S,g}function l(g){var y=v(g,"string");return typeof y=="symbol"?y:String(y)}function v(g,y){if(typeof g!="object"||g===null)return g;var S=g[Symbol.toPrimitive];if(S!==void 0){var T=S.call(g,y);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}class d extends t.Component{static getDerivedStateFromProps(y,S){let{position:T}=y,{prevPropsPosition:w}=S;return T&&(!w||T.x!==w.x||T.y!==w.y)?((0,a.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:w}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(y){super(y),s(this,"onDragStart",(S,T)=>{if((0,a.default)("Draggable: onDragStart: %j",T),this.props.onStart(S,(0,o.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),s(this,"onDrag",(S,T)=>{if(!this.state.dragging)return!1;(0,a.default)("Draggable: onDrag: %j",T);const w=(0,o.createDraggableData)(this,T),P={x:w.x,y:w.y,slackX:0,slackY:0};if(this.props.bounds){const{x:R,y:I}=P;P.x+=this.state.slackX,P.y+=this.state.slackY;const[M,L]=(0,o.getBoundPosition)(this,P.x,P.y);P.x=M,P.y=L,P.slackX=this.state.slackX+(R-P.x),P.slackY=this.state.slackY+(I-P.y),w.x=P.x,w.y=P.y,w.deltaX=P.x-this.state.x,w.deltaY=P.y-this.state.y}if(this.props.onDrag(S,w)===!1)return!1;this.setState(P)}),s(this,"onDragStop",(S,T)=>{if(!this.state.dragging||this.props.onStop(S,(0,o.createDraggableData)(this,T))===!1)return!1;(0,a.default)("Draggable: onDragStop: %j",T);const P={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:R,y:I}=this.props.position;P.x=R,P.y=I}this.setState(P)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var y,S;return(y=(S=this.props)===null||S===void 0||(S=S.nodeRef)===null||S===void 0?void 0:S.current)!==null&&y!==void 0?y:p.default.findDOMNode(this)}render(){const{axis:y,bounds:S,children:T,defaultPosition:w,defaultClassName:P,defaultClassNameDragging:A,defaultClassNameDragged:R,position:I,positionOffset:M,scale:L,...N}=this.props;let G={},D=null;const $=!!!I||this.state.dragging,k=I||w,X={x:(0,o.canDragX)(this)&&$?this.state.x:k.x,y:(0,o.canDragY)(this)&&$?this.state.y:k.y};this.state.isElementSVG?D=(0,b.createSVGTransform)(X,M):G=(0,b.createCSSTransform)(X,M);const Y=(0,C.default)(T.props.className||"",P,{[A]:this.state.dragging,[R]:this.state.dragged});return t.createElement(e.default,h({},N,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(T),{className:Y,style:{...T.props.style,...G},transform:D}))}}m.default=d,s(d,"displayName","Draggable"),s(d,"propTypes",{...e.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:E.dontSetMe,style:E.dontSetMe,transform:E.dontSetMe}),s(d,"defaultProps",{...e.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(Draggable$1)),Draggable$1}var hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs.exports;hasRequiredCjs=1;const{default:m,DraggableCore:t}=requireDraggable();return cjs.exports=m,cjs.exports.default=m,cjs.exports.DraggableCore=t,cjs.exports}var cjsExports=requireCjs();const Draggable=getDefaultExportFromCjs(cjsExports),DraggableWindow=({onClose:m,title:t,context:n,charts:p})=>{const C=reactExports.useRef(!1);return reactExports.useEffect(()=>{C.current||p.forEach(b=>{compileJSCode(b.code,b.id)}),C.current=!0},[]),jsxRuntimeExports.jsx(Draggable,{handle:".window-header",defaultPosition:{x:0,y:0},children:jsxRuntimeExports.jsxs("div",{className:"window",children:[jsxRuntimeExports.jsxs("div",{className:"window-header",children:[jsxRuntimeExports.jsx("span",{children:t}),jsxRuntimeExports.jsx("button",{onClick:m,children:"✖"})]}),jsxRuntimeExports.jsx("div",{className:"window-content",style:{color:"black"},dangerouslySetInnerHTML:{__html:n}})]})})};function _getDefaults(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let _defaults=_getDefaults();function changeDefaults(m){_defaults=m}const noopTest={exec:()=>null};function edit(m,t=""){let n=typeof m=="string"?m:m.source;const p={replace:(C,b)=>{let o=typeof b=="string"?b:b.source;return o=o.replace(other.caret,"$1"),n=n.replace(C,o),p},getRegex:()=>new RegExp(n,t)};return p}const other={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:m=>new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:m=>new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:m=>new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:m=>new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:m=>new RegExp(`^ {0,${Math.min(3,m-1)}}#`),htmlBeginRegex:m=>new RegExp(`^ {0,${Math.min(3,m-1)}}<(?:[a-z].*>|!--)`,"i")},newline=/^(?:[ \t]*(?:\n|$))+/,blockCode=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,fences=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bullet=/(?:[*+-]|\d{1,9}[.)])/,lheadingCore=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,lheading=edit(lheadingCore).replace(/bull/g,bullet).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),lheadingGfm=edit(lheadingCore).replace(/bull/g,bullet).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_paragraph=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,blockText=/^[^\n]+/,_blockLabel=/(?!\s*\])(?:\\.|[^\[\]\\])+/,def=edit(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_blockLabel).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),list=edit(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bullet).getRegex(),_tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_comment=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,html=edit("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",_comment).replace("tag",_tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),paragraph=edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockquote=edit(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",paragraph).getRegex(),blockNormal={blockquote,code:blockCode,def,fences,heading,hr,html,lheading,list,newline,paragraph,table:noopTest,text:blockText},gfmTable=edit("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockGfm={...blockNormal,lheading:lheadingGfm,table:gfmTable,paragraph:edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gfmTable).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex()},blockPedantic={...blockNormal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(_paragraph).replace("hr",hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",lheading).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},escape$1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,inlineCode=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br=/^( {2,}|\\)\n(?!\s*$)/,inlineText=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_punctuation=/[\p{P}\p{S}]/u,_punctuationOrSpace=/[\s\p{P}\p{S}]/u,_notPunctuationOrSpace=/[^\s\p{P}\p{S}]/u,punctuation=edit(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,_punctuationOrSpace).getRegex(),_punctuationGfmStrongEm=/(?!~)[\p{P}\p{S}]/u,_punctuationOrSpaceGfmStrongEm=/(?!~)[\s\p{P}\p{S}]/u,_notPunctuationOrSpaceGfmStrongEm=/(?:[^\s\p{P}\p{S}]|~)/u,blockSkip=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,emStrongLDelimCore=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,emStrongLDelim=edit(emStrongLDelimCore,"u").replace(/punct/g,_punctuation).getRegex(),emStrongLDelimGfm=edit(emStrongLDelimCore,"u").replace(/punct/g,_punctuationGfmStrongEm).getRegex(),emStrongRDelimAstCore="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",emStrongRDelimAst=edit(emStrongRDelimAstCore,"gu").replace(/notPunctSpace/g,_notPunctuationOrSpace).replace(/punctSpace/g,_punctuationOrSpace).replace(/punct/g,_punctuation).getRegex(),emStrongRDelimAstGfm=edit(emStrongRDelimAstCore,"gu").replace(/notPunctSpace/g,_notPunctuationOrSpaceGfmStrongEm).replace(/punctSpace/g,_punctuationOrSpaceGfmStrongEm).replace(/punct/g,_punctuationGfmStrongEm).getRegex(),emStrongRDelimUnd=edit("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,_notPunctuationOrSpace).replace(/punctSpace/g,_punctuationOrSpace).replace(/punct/g,_punctuation).getRegex(),anyPunctuation=edit(/\\(punct)/,"gu").replace(/punct/g,_punctuation).getRegex(),autolink=edit(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_inlineComment=edit(_comment).replace("(?:-->|$)","-->").getRegex(),tag=edit("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_inlineComment).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_inlineLabel=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,link=edit(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",_inlineLabel).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),reflink=edit(/^!?\[(label)\]\[(ref)\]/).replace("label",_inlineLabel).replace("ref",_blockLabel).getRegex(),nolink=edit(/^!?\[(ref)\](?:\[\])?/).replace("ref",_blockLabel).getRegex(),reflinkSearch=edit("reflink|nolink(?!\\()","g").replace("reflink",reflink).replace("nolink",nolink).getRegex(),inlineNormal={_backpedal:noopTest,anyPunctuation,autolink,blockSkip,br,code:inlineCode,del:noopTest,emStrongLDelim,emStrongRDelimAst,emStrongRDelimUnd,escape:escape$1,link,nolink,punctuation,reflink,reflinkSearch,tag,text:inlineText,url:noopTest},inlinePedantic={...inlineNormal,link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",_inlineLabel).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_inlineLabel).getRegex()},inlineGfm={...inlineNormal,emStrongRDelimAst:emStrongRDelimAstGfm,emStrongLDelim:emStrongLDelimGfm,url:edit(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},inlineBreaks={...inlineGfm,br:edit(br).replace("{2,}","*").getRegex(),text:edit(inlineGfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},block={normal:blockNormal,gfm:blockGfm,pedantic:blockPedantic},inline={normal:inlineNormal,gfm:inlineGfm,breaks:inlineBreaks,pedantic:inlinePedantic},escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=m=>escapeReplacements[m];function escape$2(m,t){if(t){if(other.escapeTest.test(m))return m.replace(other.escapeReplace,getEscapeReplacement)}else if(other.escapeTestNoEncode.test(m))return m.replace(other.escapeReplaceNoEncode,getEscapeReplacement);return m}function cleanUrl(m){try{m=encodeURI(m).replace(other.percentDecode,"%")}catch{return null}return m}function splitCells(m,t){var b;const n=m.replace(other.findPipe,(o,E,e)=>{let a=!1,x=E;for(;--x>=0&&e[x]==="\\";)a=!a;return a?"|":" |"}),p=n.split(other.splitPipe);let C=0;if(p[0].trim()||p.shift(),p.length>0&&!((b=p.at(-1))!=null&&b.trim())&&p.pop(),t)if(p.length>t)p.splice(t);else for(;p.length<t;)p.push("");for(;C<p.length;C++)p[C]=p[C].trim().replace(other.slashPipe,"|");return p}function rtrim(m,t,n){const p=m.length;if(p===0)return"";let C=0;for(;C<p&&m.charAt(p-C-1)===t;)C++;return m.slice(0,p-C)}function findClosingBracket(m,t){if(m.indexOf(t[1])===-1)return-1;let n=0;for(let p=0;p<m.length;p++)if(m[p]==="\\")p++;else if(m[p]===t[0])n++;else if(m[p]===t[1]&&(n--,n<0))return p;return-1}function outputLink(m,t,n,p,C){const b=t.href,o=t.title||null,E=m[1].replace(C.other.outputLinkReplace,"$1");if(m[0].charAt(0)!=="!"){p.state.inLink=!0;const e={type:"link",raw:n,href:b,title:o,text:E,tokens:p.inlineTokens(E)};return p.state.inLink=!1,e}return{type:"image",raw:n,href:b,title:o,text:E}}function indentCodeCompensation(m,t,n){const p=m.match(n.other.indentCodeCompensation);if(p===null)return t;const C=p[1];return t.split(`
`).map(b=>{const o=b.match(n.other.beginningSpace);if(o===null)return b;const[E]=o;return E.length>=C.length?b.slice(C.length):b}).join(`
`)}class _Tokenizer{constructor(t){ge(this,"options");ge(this,"rules");ge(this,"lexer");this.options=t||_defaults}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const p=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?p:rtrim(p,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const p=n[0],C=indentCodeCompensation(p,n[3]||"",this.rules);return{type:"code",raw:p,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:C}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let p=n[2].trim();if(this.rules.other.endingHash.test(p)){const C=rtrim(p,"#");(this.options.pedantic||!C||this.rules.other.endingSpaceChar.test(C))&&(p=C.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:p,tokens:this.lexer.inline(p)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:rtrim(n[0],`
`)}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let p=rtrim(n[0],`
`).split(`
`),C="",b="";const o=[];for(;p.length>0;){let E=!1;const e=[];let a;for(a=0;a<p.length;a++)if(this.rules.other.blockquoteStart.test(p[a]))e.push(p[a]),E=!0;else if(!E)e.push(p[a]);else break;p=p.slice(a);const x=e.join(`
`),c=x.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");C=C?`${C}
${x}`:x,b=b?`${b}
${c}`:c;const u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,o,!0),this.lexer.state.top=u,p.length===0)break;const h=o.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const s=h,l=s.raw+`
`+p.join(`
`),v=this.blockquote(l);o[o.length-1]=v,C=C.substring(0,C.length-s.raw.length)+v.raw,b=b.substring(0,b.length-s.text.length)+v.text;break}else if((h==null?void 0:h.type)==="list"){const s=h,l=s.raw+`
`+p.join(`
`),v=this.list(l);o[o.length-1]=v,C=C.substring(0,C.length-h.raw.length)+v.raw,b=b.substring(0,b.length-s.raw.length)+v.raw,p=l.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:C,tokens:o,text:b}}}list(t){let n=this.rules.block.list.exec(t);if(n){let p=n[1].trim();const C=p.length>1,b={type:"list",raw:"",ordered:C,start:C?+p.slice(0,-1):"",loose:!1,items:[]};p=C?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=C?p:"[*+-]");const o=this.rules.other.listItemRegex(p);let E=!1;for(;t;){let a=!1,x="",c="";if(!(n=o.exec(t))||this.rules.block.hr.test(t))break;x=n[0],t=t.substring(x.length);let u=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,g=>" ".repeat(3*g.length)),h=t.split(`
`,1)[0],s=!u.trim(),l=0;if(this.options.pedantic?(l=2,c=u.trimStart()):s?l=n[1].length+1:(l=n[2].search(this.rules.other.nonSpaceChar),l=l>4?1:l,c=u.slice(l),l+=n[1].length),s&&this.rules.other.blankLine.test(h)&&(x+=h+`
`,t=t.substring(h.length+1),a=!0),!a){const g=this.rules.other.nextBulletRegex(l),y=this.rules.other.hrRegex(l),S=this.rules.other.fencesBeginRegex(l),T=this.rules.other.headingBeginRegex(l),w=this.rules.other.htmlBeginRegex(l);for(;t;){const P=t.split(`
`,1)[0];let A;if(h=P,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),A=h):A=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||T.test(h)||w.test(h)||g.test(h)||y.test(h))break;if(A.search(this.rules.other.nonSpaceChar)>=l||!h.trim())c+=`
`+A.slice(l);else{if(s||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(u)||T.test(u)||y.test(u))break;c+=`
`+h}!s&&!h.trim()&&(s=!0),x+=P+`
`,t=t.substring(P.length+1),u=A.slice(l)}}b.loose||(E?b.loose=!0:this.rules.other.doubleBlankLine.test(x)&&(E=!0));let v=null,d;this.options.gfm&&(v=this.rules.other.listIsTask.exec(c),v&&(d=v[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),b.items.push({type:"list_item",raw:x,task:!!v,checked:d,loose:!1,text:c,tokens:[]}),b.raw+=x}const e=b.items.at(-1);if(e)e.raw=e.raw.trimEnd(),e.text=e.text.trimEnd();else return;b.raw=b.raw.trimEnd();for(let a=0;a<b.items.length;a++)if(this.lexer.state.top=!1,b.items[a].tokens=this.lexer.blockTokens(b.items[a].text,[]),!b.loose){const x=b.items[a].tokens.filter(u=>u.type==="space"),c=x.length>0&&x.some(u=>this.rules.other.anyLine.test(u.raw));b.loose=c}if(b.loose)for(let a=0;a<b.items.length;a++)b.items[a].loose=!0;return b}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const p=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),C=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",b=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:p,raw:n[0],href:C,title:b}}}table(t){var E;const n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const p=splitCells(n[1]),C=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),b=(E=n[3])!=null&&E.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(p.length===C.length){for(const e of C)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<p.length;e++)o.header.push({text:p[e],tokens:this.lexer.inline(p[e]),header:!0,align:o.align[e]});for(const e of b)o.rows.push(splitCells(e,o.header.length).map((a,x)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[x]})));return o}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const p=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:p,tokens:this.lexer.inline(p)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const p=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(p)){if(!this.rules.other.endAngleBracket.test(p))return;const o=rtrim(p.slice(0,-1),"\\");if((p.length-o.length)%2===0)return}else{const o=findClosingBracket(n[2],"()");if(o>-1){const e=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,e).trim(),n[3]=""}}let C=n[2],b="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(C);o&&(C=o[1],b=o[3])}else b=n[3]?n[3].slice(1,-1):"";return C=C.trim(),this.rules.other.startAngleBracket.test(C)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(p)?C=C.slice(1):C=C.slice(1,-1)),outputLink(n,{href:C&&C.replace(this.rules.inline.anyPunctuation,"$1"),title:b&&b.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let p;if((p=this.rules.inline.reflink.exec(t))||(p=this.rules.inline.nolink.exec(t))){const C=(p[2]||p[1]).replace(this.rules.other.multipleSpaceGlobal," "),b=n[C.toLowerCase()];if(!b){const o=p[0].charAt(0);return{type:"text",raw:o,text:o}}return outputLink(p,b,p[0],this.lexer,this.rules)}}emStrong(t,n,p=""){let C=this.rules.inline.emStrongLDelim.exec(t);if(!C||C[3]&&p.match(this.rules.other.unicodeAlphaNumeric))return;if(!(C[1]||C[2]||"")||!p||this.rules.inline.punctuation.exec(p)){const o=[...C[0]].length-1;let E,e,a=o,x=0;const c=C[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,n=n.slice(-1*t.length+o);(C=c.exec(n))!=null;){if(E=C[1]||C[2]||C[3]||C[4]||C[5]||C[6],!E)continue;if(e=[...E].length,C[3]||C[4]){a+=e;continue}else if((C[5]||C[6])&&o%3&&!((o+e)%3)){x+=e;continue}if(a-=e,a>0)continue;e=Math.min(e,e+a+x);const u=[...C[0]][0].length,h=t.slice(0,o+C.index+u+e);if(Math.min(o,e)%2){const l=h.slice(1,-1);return{type:"em",raw:h,text:l,tokens:this.lexer.inlineTokens(l)}}const s=h.slice(2,-2);return{type:"strong",raw:h,text:s,tokens:this.lexer.inlineTokens(s)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let p=n[2].replace(this.rules.other.newLineCharGlobal," ");const C=this.rules.other.nonSpaceChar.test(p),b=this.rules.other.startingSpaceChar.test(p)&&this.rules.other.endingSpaceChar.test(p);return C&&b&&(p=p.substring(1,p.length-1)),{type:"codespan",raw:n[0],text:p}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let p,C;return n[2]==="@"?(p=n[1],C="mailto:"+p):(p=n[1],C=p),{type:"link",raw:n[0],text:p,href:C,tokens:[{type:"text",raw:p,text:p}]}}}url(t){var p;let n;if(n=this.rules.inline.url.exec(t)){let C,b;if(n[2]==="@")C=n[0],b="mailto:"+C;else{let o;do o=n[0],n[0]=((p=this.rules.inline._backpedal.exec(n[0]))==null?void 0:p[0])??"";while(o!==n[0]);C=n[0],n[1]==="www."?b="http://"+n[0]:b=n[0]}return{type:"link",raw:n[0],text:C,href:b,tokens:[{type:"text",raw:C,text:C}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){const p=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:p}}}}class _Lexer{constructor(t){ge(this,"tokens");ge(this,"options");ge(this,"state");ge(this,"tokenizer");ge(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||_defaults,this.options.tokenizer=this.options.tokenizer||new _Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other,block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(t,n){return new _Lexer(n).lex(t)}static lexInline(t,n){return new _Lexer(n).inlineTokens(t)}lex(t){t=t.replace(other.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const p=this.inlineQueue[n];this.inlineTokens(p.src,p.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],p=!1){var C,b,o;for(this.options.pedantic&&(t=t.replace(other.tabCharGlobal,"    ").replace(other.spaceLine,""));t;){let E;if((b=(C=this.options.extensions)==null?void 0:C.block)!=null&&b.some(a=>(E=a.call({lexer:this},t,n))?(t=t.substring(E.raw.length),n.push(E),!0):!1))continue;if(E=this.tokenizer.space(t)){t=t.substring(E.raw.length);const a=n.at(-1);E.raw.length===1&&a!==void 0?a.raw+=`
`:n.push(E);continue}if(E=this.tokenizer.code(t)){t=t.substring(E.raw.length);const a=n.at(-1);(a==null?void 0:a.type)==="paragraph"||(a==null?void 0:a.type)==="text"?(a.raw+=`
`+E.raw,a.text+=`
`+E.text,this.inlineQueue.at(-1).src=a.text):n.push(E);continue}if(E=this.tokenizer.fences(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.heading(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.hr(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.blockquote(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.list(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.html(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.def(t)){t=t.substring(E.raw.length);const a=n.at(-1);(a==null?void 0:a.type)==="paragraph"||(a==null?void 0:a.type)==="text"?(a.raw+=`
`+E.raw,a.text+=`
`+E.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[E.tag]||(this.tokens.links[E.tag]={href:E.href,title:E.title});continue}if(E=this.tokenizer.table(t)){t=t.substring(E.raw.length),n.push(E);continue}if(E=this.tokenizer.lheading(t)){t=t.substring(E.raw.length),n.push(E);continue}let e=t;if((o=this.options.extensions)!=null&&o.startBlock){let a=1/0;const x=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},x),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(e=t.substring(0,a+1))}if(this.state.top&&(E=this.tokenizer.paragraph(e))){const a=n.at(-1);p&&(a==null?void 0:a.type)==="paragraph"?(a.raw+=`
`+E.raw,a.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(E),p=e.length!==t.length,t=t.substring(E.raw.length);continue}if(E=this.tokenizer.text(t)){t=t.substring(E.raw.length);const a=n.at(-1);(a==null?void 0:a.type)==="text"?(a.raw+=`
`+E.raw,a.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(E);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var E,e,a;let p=t,C=null;if(this.tokens.links){const x=Object.keys(this.tokens.links);if(x.length>0)for(;(C=this.tokenizer.rules.inline.reflinkSearch.exec(p))!=null;)x.includes(C[0].slice(C[0].lastIndexOf("[")+1,-1))&&(p=p.slice(0,C.index)+"["+"a".repeat(C[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(C=this.tokenizer.rules.inline.blockSkip.exec(p))!=null;)p=p.slice(0,C.index)+"["+"a".repeat(C[0].length-2)+"]"+p.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(C=this.tokenizer.rules.inline.anyPunctuation.exec(p))!=null;)p=p.slice(0,C.index)+"++"+p.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let b=!1,o="";for(;t;){b||(o=""),b=!1;let x;if((e=(E=this.options.extensions)==null?void 0:E.inline)!=null&&e.some(u=>(x=u.call({lexer:this},t,n))?(t=t.substring(x.raw.length),n.push(x),!0):!1))continue;if(x=this.tokenizer.escape(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.tag(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.link(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(x.raw.length);const u=n.at(-1);x.type==="text"&&(u==null?void 0:u.type)==="text"?(u.raw+=x.raw,u.text+=x.text):n.push(x);continue}if(x=this.tokenizer.emStrong(t,p,o)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.codespan(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.br(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.del(t)){t=t.substring(x.raw.length),n.push(x);continue}if(x=this.tokenizer.autolink(t)){t=t.substring(x.raw.length),n.push(x);continue}if(!this.state.inLink&&(x=this.tokenizer.url(t))){t=t.substring(x.raw.length),n.push(x);continue}let c=t;if((a=this.options.extensions)!=null&&a.startInline){let u=1/0;const h=t.slice(1);let s;this.options.extensions.startInline.forEach(l=>{s=l.call({lexer:this},h),typeof s=="number"&&s>=0&&(u=Math.min(u,s))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(x=this.tokenizer.inlineText(c)){t=t.substring(x.raw.length),x.raw.slice(-1)!=="_"&&(o=x.raw.slice(-1)),b=!0;const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=x.raw,u.text+=x.text):n.push(x);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class _Renderer{constructor(t){ge(this,"options");ge(this,"parser");this.options=t||_defaults}space(t){return""}code({text:t,lang:n,escaped:p}){var o;const C=(o=(n||"").match(other.notSpaceStart))==null?void 0:o[0],b=t.replace(other.endingNewline,"")+`
`;return C?'<pre><code class="language-'+escape$2(C)+'">'+(p?b:escape$2(b,!0))+`</code></pre>
`:"<pre><code>"+(p?b:escape$2(b,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){const n=t.ordered,p=t.start;let C="";for(let E=0;E<t.items.length;E++){const e=t.items[E];C+=this.listitem(e)}const b=n?"ol":"ul",o=n&&p!==1?' start="'+p+'"':"";return"<"+b+o+`>
`+C+"</"+b+`>
`}listitem(t){var p;let n="";if(t.task){const C=this.checkbox({checked:!!t.checked});t.loose?((p=t.tokens[0])==null?void 0:p.type)==="paragraph"?(t.tokens[0].text=C+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=C+" "+escape$2(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:C+" ",text:C+" ",escaped:!0}):n+=C+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",p="";for(let b=0;b<t.header.length;b++)p+=this.tablecell(t.header[b]);n+=this.tablerow({text:p});let C="";for(let b=0;b<t.rows.length;b++){const o=t.rows[b];p="";for(let E=0;E<o.length;E++)p+=this.tablecell(o[E]);C+=this.tablerow({text:p})}return C&&(C=`<tbody>${C}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+C+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const n=this.parser.parseInline(t.tokens),p=t.header?"th":"td";return(t.align?`<${p} align="${t.align}">`:`<${p}>`)+n+`</${p}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${escape$2(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:p}){const C=this.parser.parseInline(p),b=cleanUrl(t);if(b===null)return C;t=b;let o='<a href="'+t+'"';return n&&(o+=' title="'+escape$2(n)+'"'),o+=">"+C+"</a>",o}image({href:t,title:n,text:p}){const C=cleanUrl(t);if(C===null)return escape$2(p);t=C;let b=`<img src="${t}" alt="${p}"`;return n&&(b+=` title="${escape$2(n)}"`),b+=">",b}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:escape$2(t.text)}}class _TextRenderer{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class _Parser{constructor(t){ge(this,"options");ge(this,"renderer");ge(this,"textRenderer");this.options=t||_defaults,this.options.renderer=this.options.renderer||new _Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new _TextRenderer}static parse(t,n){return new _Parser(n).parse(t)}static parseInline(t,n){return new _Parser(n).parseInline(t)}parse(t,n=!0){var C,b;let p="";for(let o=0;o<t.length;o++){const E=t[o];if((b=(C=this.options.extensions)==null?void 0:C.renderers)!=null&&b[E.type]){const a=E,x=this.options.extensions.renderers[a.type].call({parser:this},a);if(x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){p+=x||"";continue}}const e=E;switch(e.type){case"space":{p+=this.renderer.space(e);continue}case"hr":{p+=this.renderer.hr(e);continue}case"heading":{p+=this.renderer.heading(e);continue}case"code":{p+=this.renderer.code(e);continue}case"table":{p+=this.renderer.table(e);continue}case"blockquote":{p+=this.renderer.blockquote(e);continue}case"list":{p+=this.renderer.list(e);continue}case"html":{p+=this.renderer.html(e);continue}case"paragraph":{p+=this.renderer.paragraph(e);continue}case"text":{let a=e,x=this.renderer.text(a);for(;o+1<t.length&&t[o+1].type==="text";)a=t[++o],x+=`
`+this.renderer.text(a);n?p+=this.renderer.paragraph({type:"paragraph",raw:x,text:x,tokens:[{type:"text",raw:x,text:x,escaped:!0}]}):p+=x;continue}default:{const a='Token with "'+e.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return p}parseInline(t,n=this.renderer){var C,b;let p="";for(let o=0;o<t.length;o++){const E=t[o];if((b=(C=this.options.extensions)==null?void 0:C.renderers)!=null&&b[E.type]){const a=this.options.extensions.renderers[E.type].call({parser:this},E);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(E.type)){p+=a||"";continue}}const e=E;switch(e.type){case"escape":{p+=n.text(e);break}case"html":{p+=n.html(e);break}case"link":{p+=n.link(e);break}case"image":{p+=n.image(e);break}case"strong":{p+=n.strong(e);break}case"em":{p+=n.em(e);break}case"codespan":{p+=n.codespan(e);break}case"br":{p+=n.br(e);break}case"del":{p+=n.del(e);break}case"text":{p+=n.text(e);break}default:{const a='Token with "'+e.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return p}}class _Hooks{constructor(t){ge(this,"options");ge(this,"block");this.options=t||_defaults}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?_Lexer.lex:_Lexer.lexInline}provideParser(){return this.block?_Parser.parse:_Parser.parseInline}}ge(_Hooks,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Marked{constructor(...t){ge(this,"defaults",_getDefaults());ge(this,"options",this.setOptions);ge(this,"parse",this.parseMarkdown(!0));ge(this,"parseInline",this.parseMarkdown(!1));ge(this,"Parser",_Parser);ge(this,"Renderer",_Renderer);ge(this,"TextRenderer",_TextRenderer);ge(this,"Lexer",_Lexer);ge(this,"Tokenizer",_Tokenizer);ge(this,"Hooks",_Hooks);this.use(...t)}walkTokens(t,n){var C,b;let p=[];for(const o of t)switch(p=p.concat(n.call(this,o)),o.type){case"table":{const E=o;for(const e of E.header)p=p.concat(this.walkTokens(e.tokens,n));for(const e of E.rows)for(const a of e)p=p.concat(this.walkTokens(a.tokens,n));break}case"list":{const E=o;p=p.concat(this.walkTokens(E.items,n));break}default:{const E=o;(b=(C=this.defaults.extensions)==null?void 0:C.childTokens)!=null&&b[E.type]?this.defaults.extensions.childTokens[E.type].forEach(e=>{const a=E[e].flat(1/0);p=p.concat(this.walkTokens(a,n))}):E.tokens&&(p=p.concat(this.walkTokens(E.tokens,n)))}}return p}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(p=>{const C={...p};if(C.async=this.defaults.async||C.async||!1,p.extensions&&(p.extensions.forEach(b=>{if(!b.name)throw new Error("extension name required");if("renderer"in b){const o=n.renderers[b.name];o?n.renderers[b.name]=function(...E){let e=b.renderer.apply(this,E);return e===!1&&(e=o.apply(this,E)),e}:n.renderers[b.name]=b.renderer}if("tokenizer"in b){if(!b.level||b.level!=="block"&&b.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[b.level];o?o.unshift(b.tokenizer):n[b.level]=[b.tokenizer],b.start&&(b.level==="block"?n.startBlock?n.startBlock.push(b.start):n.startBlock=[b.start]:b.level==="inline"&&(n.startInline?n.startInline.push(b.start):n.startInline=[b.start]))}"childTokens"in b&&b.childTokens&&(n.childTokens[b.name]=b.childTokens)}),C.extensions=n),p.renderer){const b=this.defaults.renderer||new _Renderer(this.defaults);for(const o in p.renderer){if(!(o in b))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const E=o,e=p.renderer[E],a=b[E];b[E]=(...x)=>{let c=e.apply(b,x);return c===!1&&(c=a.apply(b,x)),c||""}}C.renderer=b}if(p.tokenizer){const b=this.defaults.tokenizer||new _Tokenizer(this.defaults);for(const o in p.tokenizer){if(!(o in b))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const E=o,e=p.tokenizer[E],a=b[E];b[E]=(...x)=>{let c=e.apply(b,x);return c===!1&&(c=a.apply(b,x)),c}}C.tokenizer=b}if(p.hooks){const b=this.defaults.hooks||new _Hooks;for(const o in p.hooks){if(!(o in b))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const E=o,e=p.hooks[E],a=b[E];_Hooks.passThroughHooks.has(o)?b[E]=x=>{if(this.defaults.async)return Promise.resolve(e.call(b,x)).then(u=>a.call(b,u));const c=e.call(b,x);return a.call(b,c)}:b[E]=(...x)=>{let c=e.apply(b,x);return c===!1&&(c=a.apply(b,x)),c}}C.hooks=b}if(p.walkTokens){const b=this.defaults.walkTokens,o=p.walkTokens;C.walkTokens=function(E){let e=[];return e.push(o.call(this,E)),b&&(e=e.concat(b.call(this,E))),e}}this.defaults={...this.defaults,...C}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return _Lexer.lex(t,n??this.defaults)}parser(t,n){return _Parser.parse(t,n??this.defaults)}parseMarkdown(t){return(p,C)=>{const b={...C},o={...this.defaults,...b},E=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&b.async===!1)return E(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof p>"u"||p===null)return E(new Error("marked(): input parameter is undefined or null"));if(typeof p!="string")return E(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(p)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=t);const e=o.hooks?o.hooks.provideLexer():t?_Lexer.lex:_Lexer.lexInline,a=o.hooks?o.hooks.provideParser():t?_Parser.parse:_Parser.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(p):p).then(x=>e(x,o)).then(x=>o.hooks?o.hooks.processAllTokens(x):x).then(x=>o.walkTokens?Promise.all(this.walkTokens(x,o.walkTokens)).then(()=>x):x).then(x=>a(x,o)).then(x=>o.hooks?o.hooks.postprocess(x):x).catch(E);try{o.hooks&&(p=o.hooks.preprocess(p));let x=e(p,o);o.hooks&&(x=o.hooks.processAllTokens(x)),o.walkTokens&&this.walkTokens(x,o.walkTokens);let c=a(x,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(x){return E(x)}}}onError(t,n){return p=>{if(p.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const C="<p>An error occurred:</p><pre>"+escape$2(p.message+"",!0)+"</pre>";return n?Promise.resolve(C):C}if(n)return Promise.reject(p);throw p}}}const markedInstance=new Marked;function marked(m,t){return markedInstance.parse(m,t)}marked.options=marked.setOptions=function(m){return markedInstance.setOptions(m),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.getDefaults=_getDefaults;marked.defaults=_defaults;marked.use=function(...m){return markedInstance.use(...m),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.walkTokens=function(m,t){return markedInstance.walkTokens(m,t)};marked.parseInline=markedInstance.parseInline;marked.Parser=_Parser;marked.parser=_Parser.parse;marked.Renderer=_Renderer;marked.TextRenderer=_TextRenderer;marked.Lexer=_Lexer;marked.lexer=_Lexer.lex;marked.Tokenizer=_Tokenizer;marked.Hooks=_Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;_Parser.parse;_Lexer.lex;const AGENTS=["The Dictator","The Revolutionary","The Technocrat"],PROPOSALS={"The Dictator":["A. Impose strict wealth ceiling. All assets above 1000 are seized.","B. Surveillance on all trade to prevent rebellion.","C. Centralize all economic decisions under the Governor's Office."],"The Revolutionary":["A. Nationalize key industries and redistribute profits.","B. Create citizen councils to propose new laws.","C. Abolish private land ownership."],"The Technocrat":["A. Optimize taxation dynamically based on economic indicators.","B. Introduce automated audits to ensure fairness.","C. Launch data-driven unemployment mitigation programs."]},ConstitutionPanel=({onClose:m,onSelectConstitution:t})=>{const[n,p]=reactExports.useState(null),C=b=>{t(b),m()};return jsxRuntimeExports.jsx(Draggable,{handle:".window-header",defaultPosition:{x:0,y:0},children:jsxRuntimeExports.jsxs("div",{className:"window",children:[jsxRuntimeExports.jsxs("div",{className:"window-header",children:[jsxRuntimeExports.jsx("span",{children:"Governors"}),jsxRuntimeExports.jsx("button",{onClick:m,children:"✖"})]}),jsxRuntimeExports.jsx("div",{className:"window-content",style:{color:"black"},children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:n}),"'s Constitution Proposals:"]}),PROPOSALS[n].map((b,o)=>jsxRuntimeExports.jsx("button",{style:{display:"block",margin:"4px 0",textAlign:"left"},onClick:()=>C(b),children:b},o))]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{children:"Select a Governor:"}),AGENTS.map(b=>jsxRuntimeExports.jsx("button",{style:{display:"block",margin:"4px 0"},onClick:()=>p(b),children:b},b))]})})]})})};function App(){const[m,t]=reactExports.useState([]),[n,p]=reactExports.useState(!1),[C,b]=reactExports.useState(""),[o,E]=reactExports.useState(""),[e,a]=reactExports.useState(!1),[x,c]=reactExports.useState([]);return reactExports.useEffect(()=>{const u=v=>{console.log("report",v);const d={report:v.report,department:v.department},g=m.findIndex(y=>y.department===v.department);g!==-1?(m[g]=d,t([...m])):(m.push(d),t([...m])),console.log("reports",m)},h=v=>{const d=m.findIndex(g=>g.department===v.department);if(d!==-1){b(m[d].report);const g=marked(m[d].report);E(g),n||p(!0)}},s=v=>{console.log("Updating charts with:",v.id),c(d=>d.some(y=>y.id===v.id)?d:[...d,{id:v.id,code:v.d3Code}])},l=()=>{a(!0)};return EventBus.on("final-report",u),EventBus.on("open-report",h),EventBus.on("d3-code",s),EventBus.on("open-constitution",l),()=>{EventBus.off("final-report",u),EventBus.off("open-report",h),EventBus.off("d3-code",s)}},[]),jsxRuntimeExports.jsxs("div",{id:"app",children:[jsxRuntimeExports.jsx(PhaserGame,{}),n&&jsxRuntimeExports.jsx(DraggableWindow,{title:"Final Report",context:o,onClose:()=>{p(!1)},charts:x}),e&&jsxRuntimeExports.jsx(ConstitutionPanel,{onClose:()=>{a(!1)}})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
